!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=552)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.a=r},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Object(o.a)(r.key),r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}e.a=i;var o=n(393)},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}e.a=r},function(t,e,n){"use strict";function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Object(i.a)(t,e)}e.a=r;var i=n(268)},function(t,e,n){"use strict";function r(t,e){if(e&&("object"===Object(i.a)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Object(o.a)(t)}e.a=r;var i=n(83),o=n(12)},function(t,e,n){var r=n(21),i=n(66),o=n(50),a=n(51),s=n(67),u=function(t,e,n){var c,l,f,h,p=t&u.F,d=t&u.G,v=t&u.S,m=t&u.P,g=t&u.B,y=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,_=d?i:i[e]||(i[e]={}),b=_.prototype||(_.prototype={});d&&(n=e);for(c in n)l=!p&&y&&void 0!==y[c],f=(l?y:n)[c],h=g&&l?s(f,r):m&&"function"==typeof f?s(Function.call,f):f,y&&a(y,c,f,t&u.U),_[c]!=f&&o(_,c,h),m&&b[c]!=f&&(b[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";function r(t,e,n){return e=Object(i.a)(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=r;var i=n(393)},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){function a(t){r(u,i,o,a,s,"next",t)}function s(t){r(u,i,o,a,s,"throw",t)}var u=t.apply(e,n);a(void 0)})}}e.a=i},function(t,e,n){var r=n(750)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){"use strict";var r=n(760);n.d(e,"v",function(){return r.a}),n.d(e,"B",function(){return r.b}),n.d(e,"F",function(){return r.c}),n.d(e,"P",function(){return r.d});var i=n(778);n.d(e,"k",function(){return i.a}),n.d(e,"l",function(){return i.b}),n.d(e,"m",function(){return i.c});var o=n(188);n.d(e,"s",function(){return o.a}),n.d(e,"t",function(){return o.b}),n.d(e,"w",function(){return o.c}),n.d(e,"x",function(){return o.d}),n.d(e,"y",function(){return o.e}),n.d(e,"z",function(){return o.f}),n.d(e,"A",function(){return o.g}),n.d(e,"E",function(){return o.h}),n.d(e,"T",function(){return o.i});var a=n(781);n.d(e,"D",function(){return a.a});var s=n(782);n.d(e,"b",function(){return s});var u=n(786);n.d(e,"J",function(){return u.a}),n.d(e,"L",function(){return u.b});var c=n(787);n.d(e,"c",function(){return c.a}),n.d(e,"o",function(){return c.b});var l=n(140);n.d(e,"i",function(){return l.a}),n.d(e,"j",function(){return l.b}),n.d(e,"n",function(){return l.d}),n.d(e,"p",function(){return l.e}),n.d(e,"q",function(){return l.g}),n.d(e,"r",function(){return l.h}),n.d(e,"u",function(){return l.i}),n.d(e,"C",function(){return l.j}),n.d(e,"M",function(){return l.k}),n.d(e,"N",function(){return l.l}),n.d(e,"O",function(){return l.m}),n.d(e,"Q",function(){return l.n}),n.d(e,"R",function(){return l.o});var f=n(790);n.d(e,"I",function(){return f.a});var h=(n(791),n(796));n.d(e,"d",function(){return h.a});var p=n(184);n.d(e,"a",function(){return p.b}),n.d(e,"K",function(){return p.c}),n.d(e,"U",function(){return p.d});var d=n(797);n.d(e,"g",function(){return d});var v=n(798);n.d(e,"h",function(){return v.a}),n.d(e,"G",function(){return v.b}),n.d(e,"H",function(){return v.c});var m=(n(804),n(192));n.d(e,"e",function(){return m.a}),n.d(e,"f",function(){return m.b}),n.d(e,"S",function(){return m.c})},function(t,e,n){"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){Object(o.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}e.a=i;var o=n(6)},function(t,e,n){"use strict";var r=n(829),i=(n(75),n(42)),o=(n(900),n(902),n(903),n(904),n(905));n.d(e,"c",function(){return o.a});var a=n(427);n.d(e,"j",function(){return a.a});var s=(n(906),n(907),n(908),n(428));n.d(e,"d",function(){return s.a}),n.d(e,"e",function(){return s.b});var u=n(909);n.d(e,"f",function(){return u.a});var c=(n(160),n(910),n(285));n.d(e,"b",function(){return c.a}),n.d(e,"g",function(){return c.b}),n.d(e,"i",function(){return c.c}),n.d(e,"n",function(){return c.d});var l=n(911);n.d(e,"a",function(){return l.a}),n.d(e,"l",function(){return l.b}),n.d(e,"o",function(){return l.c});var f=n(912);n.d(e,"h",function(){return f.a});var h=n(109);n.d(e,"t",function(){return h.a});var p=(n(913),n(914),n(915),n(916),n(917),n(110),n(918),n(919),n(920),n(921),n(922));n.d(e,"m",function(){return p.a});var d=(n(923),n(924));n.d(e,"k",function(){return d.a}),n.d(e,"q",function(){return r.c}),n.d(e,"s",function(){return r.b}),n.d(e,"r",function(){return r.a}),n.d(e,"u",function(){return r.d}),n.d(e,"p",function(){return i.a})},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=e.getServiceIdentifierAsString=e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=e.decorate=e.id=e.MetadataReader=e.postConstruct=e.targetName=e.multiInject=e.unmanaged=e.optional=e.LazyServiceIdentifer=e.inject=e.named=e.tagged=e.injectable=e.ContainerModule=e.AsyncContainerModule=e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=e.Container=e.METADATA_KEY=void 0;var r=n(38);e.METADATA_KEY=r;var i=n(830);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return i.Container}});var o=n(84);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return o.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return o.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return o.TargetTypeEnum}});var a=n(846);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var s=n(847);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return s.injectable}});var u=n(848);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return u.tagged}});var c=n(849);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return c.named}});var l=n(422);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return l.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return l.LazyServiceIdentifer}});var f=n(850);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return f.optional}});var h=n(851);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return h.unmanaged}});var p=n(852);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return p.multiInject}});var d=n(853);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return d.targetName}});var v=n(854);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return v.postConstruct}});var m=n(420);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return m.MetadataReader}});var g=n(108);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return g.id}});var y=n(90);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return y.decorate}});var _=n(425);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return _.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return _.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return _.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return _.typeConstraint}});var b=n(159);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var x=n(855);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return x.multiBindToService}})},function(t,e,n){(function(t,e){var n;!function(n){!function(r){function i(t,e){return function(n,r){"function"!==typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}var o="object"===typeof e?e:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),a=i(n);"undefined"===typeof o.Reflect?o.Reflect=n:a=i(o.Reflect,a),function(e){function n(t,e,n,r){if(E(n)){if(!j(t))throw new TypeError;if(!R(e))throw new TypeError;return h(t,e)}if(!j(t))throw new TypeError;if(!T(e))throw new TypeError;if(!T(r)&&!E(r)&&!S(r))throw new TypeError;return S(r)&&(r=void 0),n=P(n),p(t,e,n,r)}function r(t,e){function n(n,r){if(!T(n))throw new TypeError;if(!E(r)&&!L(r))throw new TypeError;_(t,e,n,r)}return n}function i(t,e,n,r){if(!T(n))throw new TypeError;return E(r)||(r=P(r)),_(t,e,n,r)}function o(t,e,n){if(!T(e))throw new TypeError;return E(n)||(n=P(n)),v(t,e,n)}function a(t,e,n){if(!T(e))throw new TypeError;return E(n)||(n=P(n)),m(t,e,n)}function s(t,e,n){if(!T(e))throw new TypeError;return E(n)||(n=P(n)),g(t,e,n)}function u(t,e,n){if(!T(e))throw new TypeError;return E(n)||(n=P(n)),y(t,e,n)}function c(t,e){if(!T(t))throw new TypeError;return E(e)||(e=P(e)),b(t,e)}function l(t,e){if(!T(t))throw new TypeError;return E(e)||(e=P(e)),x(t,e)}function f(t,e,n){if(!T(e))throw new TypeError;E(n)||(n=P(n));var r=d(e,n,!1);if(E(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=nt.get(e);return i.delete(n),i.size>0||(nt.delete(e),!0)}function h(t,e){for(var n=t.length-1;n>=0;--n){var r=t[n],i=r(e);if(!E(i)&&!S(i)){if(!R(i))throw new TypeError;e=i}}return e}function p(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=t[i],a=o(e,n,r);if(!E(a)&&!S(a)){if(!T(a))throw new TypeError;r=a}}return r}function d(t,e,n){var r=nt.get(t);if(E(r)){if(!n)return;r=new $,nt.set(t,r)}var i=r.get(e);if(E(i)){if(!n)return;i=new $,r.set(e,i)}return i}function v(t,e,n){if(m(t,e,n))return!0;var r=U(e);return!S(r)&&v(t,r,n)}function m(t,e,n){var r=d(e,n,!1);return!E(r)&&k(r.has(t))}function g(t,e,n){if(m(t,e,n))return y(t,e,n);var r=U(e);return S(r)?void 0:g(t,r,n)}function y(t,e,n){var r=d(e,n,!1);if(!E(r))return r.get(t)}function _(t,e,n,r){d(n,r,!0).set(t,e)}function b(t,e){var n=x(t,e),r=U(t);if(null===r)return n;var i=b(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new tt,a=[],s=0,u=n;s<u.length;s++){var c=u[s],l=o.has(c);l||(o.add(c),a.push(c))}for(var f=0,h=i;f<h.length;f++){var c=h[f],l=o.has(c);l||(o.add(c),a.push(c))}return a}function x(t,e){var n=[],r=d(t,e,!1);if(E(r))return n;for(var i=r.keys(),o=N(i),a=0;;){var s=F(o);if(!s)return n.length=a,n;var u=z(s);try{n[a]=u}catch(t){try{B(o)}finally{throw t}}a++}}function w(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function E(t){return void 0===t}function S(t){return null===t}function O(t){return"symbol"===typeof t}function T(t){return"object"===typeof t?null!==t:"function"===typeof t}function A(t,e){switch(w(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",r=D(t,W);if(void 0!==r){var i=r.call(t,n);if(T(i))throw new TypeError;return i}return C(t,"default"===n?"number":n)}function C(t,e){if("string"===e){var n=t.toString;if(I(n)){var r=n.call(t);if(!T(r))return r}var i=t.valueOf;if(I(i)){var r=i.call(t);if(!T(r))return r}}else{var i=t.valueOf;if(I(i)){var r=i.call(t);if(!T(r))return r}var o=t.toString;if(I(o)){var r=o.call(t);if(!T(r))return r}}throw new TypeError}function k(t){return!!t}function M(t){return""+t}function P(t){var e=A(t,3);return O(e)?e:M(e)}function j(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function I(t){return"function"===typeof t}function R(t){return"function"===typeof t}function L(t){switch(w(t)){case 3:case 4:return!0;default:return!1}}function D(t,e){var n=t[e];if(void 0!==n&&null!==n){if(!I(n))throw new TypeError;return n}}function N(t){var e=D(t,q);if(!I(e))throw new TypeError;var n=e.call(t);if(!T(n))throw new TypeError;return n}function z(t){return t.value}function F(t){var e=t.next();return!e.done&&e}function B(t){var e=t.return;e&&e.call(t)}function U(t){var e=Object.getPrototypeOf(t);if("function"!==typeof t||t===J)return e;if(e!==J)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!==typeof i?e:i===t?e:i}function V(t){return t.__=void 0,delete t.__,t}var G=Object.prototype.hasOwnProperty,H="function"===typeof Symbol,W=H&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",q=H&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",Z="function"===typeof Object.create,X={__proto__:[]}instanceof Array,Y=!Z&&!X,K={create:Z?function(){return V(Object.create(null))}:X?function(){return V({__proto__:null})}:function(){return V({})},has:Y?function(t,e){return G.call(t,e)}:function(t,e){return e in t},get:Y?function(t,e){return G.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},J=Object.getPrototypeOf(Function),Q="object"===typeof t&&Object({NODE_ENV:"production",PUBLIC_URL:"."})&&"true"===Object({NODE_ENV:"production",PUBLIC_URL:"."}).REFLECT_METADATA_USE_MAP_POLYFILL,$=Q||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?function(){function t(t,e){return t}function e(t,e){return e}function n(t,e){return[t,e]}var r={},i=[],o=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[q]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var e=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=i,this._values=i):this._index++,{value:e,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=i,this._values=i),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=i,this._values=i),{value:t,done:!0}},t}();return function(){function i(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}return Object.defineProperty(i.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),i.prototype.has=function(t){return this._find(t,!1)>=0},i.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},i.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},i.prototype.delete=function(t){var e=this._find(t,!1);if(e>=0){for(var n=this._keys.length,i=e+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},i.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},i.prototype.keys=function(){return new o(this._keys,this._values,t)},i.prototype.values=function(){return new o(this._keys,this._values,e)},i.prototype.entries=function(){return new o(this._keys,this._values,n)},i.prototype["@@iterator"]=function(){return this.entries()},i.prototype[q]=function(){return this.entries()},i.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},i}()}():Map,tt=Q||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?function(){return function(){function t(){this._map=new $}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[q]=function(){return this.keys()},t}()}():Set,et=Q||"function"!==typeof WeakMap?function(){function t(){var t;do{t="@@WeakMap@@"+i()}while(K.has(a,t));return a[t]=!0,t}function e(t,e){if(!G.call(t,s)){if(!e)return;Object.defineProperty(t,s,{value:K.create()})}return t[s]}function n(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function r(t){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):n(new Uint8Array(t),t):n(new Array(t),t)}function i(){var t=r(o);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var e="",n=0;n<o;++n){var i=t[n];4!==n&&6!==n&&8!==n||(e+="-"),i<16&&(e+="0"),e+=i.toString(16).toLowerCase()}return e}var o=16,a=K.create(),s=t();return function(){function n(){this._key=t()}return n.prototype.has=function(t){var n=e(t,!1);return void 0!==n&&K.has(n,this._key)},n.prototype.get=function(t){var n=e(t,!1);return void 0!==n?K.get(n,this._key):void 0},n.prototype.set=function(t,n){return e(t,!0)[this._key]=n,this},n.prototype.delete=function(t){var n=e(t,!1);return void 0!==n&&delete n[this._key]},n.prototype.clear=function(){this._key=t()},n}()}():WeakMap,nt=new et;e("decorate",n),e("metadata",r),e("defineMetadata",i),e("hasMetadata",o),e("hasOwnMetadata",a),e("getMetadata",s),e("getOwnMetadata",u),e("getMetadataKeys",c),e("getOwnMetadataKeys",l),e("deleteMetadata",f)}(a)}()}(n||(n={}))}).call(e,n(135),n(80))},function(t,e,n){"use strict";function r(t,e){return Object(i.a)(t)||Object(o.a)(t,e)||Object(a.a)(t,e)||Object(s.a)()}e.a=r;var i=n(783),o=n(784),a=n(392),s=n(785)},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i,o,a=n(7),s=n(10),u=n(39),c=n(0),l=n(1),f=n(6),h=n(40),p=(n(41),n(8)),d=n.n(p),v=n(11),m=n(9),g=n(439),y=n(1084),_=n(1085),b=(r=Object(v.u)(v.p.IGlobalConfigService),i=function(){function t(e){Object(c.a)(this,t),Object(f.a)(this,"preStyleAttribute",{}),Object(f.a)(this,"encodeStyleAttribute",{}),Object(u.a)(this,"configService",o,this),this.layer=e,this.rendererService=e.getContainer().get(v.p.IRendererService),this.pickingService=e.getContainer().get(v.p.IPickingService),this.shaderModuleService=e.getContainer().get(v.p.IShaderModuleService),this.styleAttributeService=e.getContainer().get(v.p.IStyleAttributeService),this.mapService=e.getContainer().get(v.p.IMapService),this.iconService=e.getContainer().get(v.p.IIconService),this.fontService=e.getContainer().get(v.p.IFontService),this.cameraService=e.getContainer().get(v.p.ICameraService),this.layerService=e.getContainer().get(v.p.ILayerService),this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n}return Object(l.a)(t,[{key:"getBlend",value:function(){var t=this.layer.getLayerConfig(),e=t.blend,n=void 0===e?"normal":e;return g.a[v.b[n]]}},{key:"getStencil",value:function(t){var e=this.layer.getLayerConfig(),n=e.mask,r=void 0!==n&&n,i=e.maskInside,o=void 0===i||i,a=e.enableMask,u=e.maskOperation,c=void 0===u?v.i.AND:u;if("MaskLayer"===this.layer.type)return Object(y.b)({isStencil:!0,stencilType:v.n.SINGLE});if(t.isStencil)return Object(y.b)(Object(s.a)(Object(s.a)({},t),{},{maskOperation:c}));var l=r||a&&0!==this.layer.masks.length||void 0!==this.layer.tileMask;return Object(y.a)(l,o)}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}},t)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}},t)}));return t}()},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}},t)}));return t}()},{key:"clearModels",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(t){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.duration||4,t.interval||.2,t.trailLength||.1]}},{key:"startModelAnimate",value:function(){this.layer.getLayerConfig().animateOption.enable&&this.layer.setAnimateStartTime()}},{key:"getInject",value:function(){var t=this.layer.encodeStyleAttribute,e="",n={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2"};this.layer.enableEncodeStyles.forEach(function(r){t[r]&&(e+="#define USE_ATTRIBUTE_".concat(r.toUpperCase()," 0.0; \n\n")),e+="\n      #ifdef USE_ATTRIBUTE_".concat(r.toUpperCase(),"\n  attribute ").concat(n[r]," a_").concat(r.charAt(0).toUpperCase()+r.slice(1),";\n#else\n  uniform ").concat(n[r]," u_").concat(r,";\n#endif\n\n")});var r="";return this.layer.enableEncodeStyles.forEach(function(t){r+="\n\n#ifdef USE_ATTRIBUTE_".concat(t.toUpperCase(),"\n  ").concat(n[t]," ").concat(t,"  = a_").concat(t.charAt(0).toUpperCase()+t.slice(1),";\n#else\n  ").concat(n[t]," ").concat(t," = u_").concat(t,";\n#endif\n\n")}),{"vs:#decl":e,"vs:#main-start":r}}},{key:"getStyleAttribute",value:function(){var t=this,e={},n={opacity:1,stroke:[1,0,0,1],offsets:[0,0]};return this.layer.enableEncodeStyles.forEach(function(r){if(!t.layer.encodeStyleAttribute[r]){var i=t.layer.getLayerConfig()[r],o="undefined"===typeof i?n[r]:i;"stroke"===r&&(o=Object(m.T)(o)),e["u_"+r]=o}}),e}},{key:"registerStyleAttribute",value:function(){var t=this;Object.keys(this.layer.encodeStyleAttribute).forEach(function(e){var n=Object(_.a)(e);n&&t.styleAttributeService.registerStyleAttribute(n)})}},{key:"updateEncodeAttribute",value:function(t,e){this.encodeStyleAttribute[t]=e}}]),t}(),o=Object(h.a)(i.prototype,"configService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i)},function(t,e,n){var r=n(24);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u){if(i(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,s,u],f=0;c=new Error(e.replace(/%s/g,function(){return l[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var i=function(t){};t.exports=r},function(t,e,n){(function(t,r){var i;(function(){function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function u(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function f(t,e){return!!(null==t?0:t.length)&&w(t,e,0)>-1}function h(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function p(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function d(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function v(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function m(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function g(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function y(t){return t.split("")}function _(t){return t.match(Fe)||[]}function b(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function x(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function w(t,e,n){return e===e?K(t,e,n):x(t,S,n)}function E(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function S(t){return t!==t}function O(t,e){var n=null==t?0:t.length;return n?M(t,e)/n:Dt}function T(t){return function(e){return null==e?it:e[t]}}function A(t){return function(e){return null==t?it:t[e]}}function C(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function k(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function M(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==it&&(n=n===it?o:n+o)}return n}function P(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function j(t,e){return p(e,function(e){return[e,t[e]]})}function I(t){return t?t.slice(0,tt(t)+1).replace(Re,""):t}function R(t){return function(e){return t(e)}}function L(t,e){return p(e,function(e){return t[e]})}function D(t,e){return t.has(e)}function N(t,e){for(var n=-1,r=t.length;++n<r&&w(e,t[n],0)>-1;);return n}function z(t,e){for(var n=t.length;n--&&w(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function B(t){return"\\"+Cn[t]}function U(t,e){return null==t?it:t[e]}function V(t){return _n.test(t)}function G(t){return bn.test(t)}function H(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function W(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function q(t,e){return function(n){return t(e(n))}}function Z(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ft||(t[n]=ft,o[i++]=n)}return o}function X(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function K(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function J(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Q(t){return V(t)?et(t):Wn(t)}function $(t){return V(t)?nt(t):y(t)}function tt(t){for(var e=t.length;e--&&Le.test(t.charAt(e)););return e}function et(t){for(var e=gn.lastIndex=0;gn.test(t);)++e;return e}function nt(t){return t.match(gn)||[]}function rt(t){return t.match(yn)||[]}var it,ot=200,at="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",st="Expected a function",ut="Invalid `variable` option passed into `_.template`",ct="__lodash_hash_undefined__",lt=500,ft="__lodash_placeholder__",ht=1,pt=2,dt=4,vt=1,mt=2,gt=1,yt=2,_t=4,bt=8,xt=16,wt=32,Et=64,St=128,Ot=256,Tt=512,At=30,Ct="...",kt=800,Mt=16,Pt=1,jt=2,It=1/0,Rt=9007199254740991,Lt=1.7976931348623157e308,Dt=NaN,Nt=4294967295,zt=Nt-1,Ft=Nt>>>1,Bt=[["ary",St],["bind",gt],["bindKey",yt],["curry",bt],["curryRight",xt],["flip",Tt],["partial",wt],["partialRight",Et],["rearg",Ot]],Ut="[object Arguments]",Vt="[object Array]",Gt="[object AsyncFunction]",Ht="[object Boolean]",Wt="[object Date]",qt="[object DOMException]",Zt="[object Error]",Xt="[object Function]",Yt="[object GeneratorFunction]",Kt="[object Map]",Jt="[object Number]",Qt="[object Null]",$t="[object Object]",te="[object Proxy]",ee="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",ue="[object ArrayBuffer]",ce="[object DataView]",le="[object Float32Array]",fe="[object Float64Array]",he="[object Int8Array]",pe="[object Int16Array]",de="[object Int32Array]",ve="[object Uint8Array]",me="[object Uint8ClampedArray]",ge="[object Uint16Array]",ye="[object Uint32Array]",_e=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,xe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,we=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,Se=RegExp(we.source),Oe=RegExp(Ee.source),Te=/<%-([\s\S]+?)%>/g,Ae=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,ke=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Me=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,je=/[\\^$.*+?()[\]{}|]/g,Ie=RegExp(je.source),Re=/^\s+/,Le=/\s/,De=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ne=/\{\n\/\* \[wrapped with (.+)\] \*/,ze=/,? & /,Fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Be=/[()=,{}\[\]\/\s]/,Ue=/\\(\\)?/g,Ve=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,He=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,qe=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,Je=/['\n\r\u2028\u2029\\]/g,Qe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",$e="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tn="["+$e+"]",en="["+Qe+"]",nn="[a-z\\xdf-\\xf6\\xf8-\\xff]",rn="[^\\ud800-\\udfff"+$e+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",on="\\ud83c[\\udffb-\\udfff]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",sn="[\\ud800-\\udbff][\\udc00-\\udfff]",un="[A-Z\\xc0-\\xd6\\xd8-\\xde]",cn="(?:"+nn+"|"+rn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",an,sn].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*",hn="[\\ufe0e\\ufe0f]?"+ln+fn,pn="(?:"+["[\\u2700-\\u27bf]",an,sn].join("|")+")"+hn,dn="(?:"+["[^\\ud800-\\udfff]"+en+"?",en,an,sn,"[\\ud800-\\udfff]"].join("|")+")",vn=RegExp("['\u2019]","g"),mn=RegExp(en,"g"),gn=RegExp(on+"(?="+on+")|"+dn+hn,"g"),yn=RegExp([un+"?"+nn+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[tn,un,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[tn,un+cn,"$"].join("|")+")",un+"?"+cn+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",un+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",pn].join("|"),"g"),_n=RegExp("[\\u200d\\ud800-\\udfff"+Qe+"\\ufe0e\\ufe0f]"),bn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wn=-1,En={};En[le]=En[fe]=En[he]=En[pe]=En[de]=En[ve]=En[me]=En[ge]=En[ye]=!0,En[Ut]=En[Vt]=En[ue]=En[Ht]=En[ce]=En[Wt]=En[Zt]=En[Xt]=En[Kt]=En[Jt]=En[$t]=En[ee]=En[ne]=En[re]=En[ae]=!1;var Sn={};Sn[Ut]=Sn[Vt]=Sn[ue]=Sn[ce]=Sn[Ht]=Sn[Wt]=Sn[le]=Sn[fe]=Sn[he]=Sn[pe]=Sn[de]=Sn[Kt]=Sn[Jt]=Sn[$t]=Sn[ee]=Sn[ne]=Sn[re]=Sn[ie]=Sn[ve]=Sn[me]=Sn[ge]=Sn[ye]=!0,Sn[Zt]=Sn[Xt]=Sn[ae]=!1;var On={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},An={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Cn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kn=parseFloat,Mn=parseInt,Pn="object"==typeof t&&t&&t.Object===Object&&t,jn="object"==typeof self&&self&&self.Object===Object&&self,In=Pn||jn||Function("return this")(),Rn="object"==typeof e&&e&&!e.nodeType&&e,Ln=Rn&&"object"==typeof r&&r&&!r.nodeType&&r,Dn=Ln&&Ln.exports===Rn,Nn=Dn&&Pn.process,zn=function(){try{var t=Ln&&Ln.require&&Ln.require("util").types;return t||Nn&&Nn.binding&&Nn.binding("util")}catch(t){}}(),Fn=zn&&zn.isArrayBuffer,Bn=zn&&zn.isDate,Un=zn&&zn.isMap,Vn=zn&&zn.isRegExp,Gn=zn&&zn.isSet,Hn=zn&&zn.isTypedArray,Wn=T("length"),qn=A(On),Zn=A(Tn),Xn=A(An),Yn=function t(e){function n(t){if(ru(t)&&!vh(t)&&!(t instanceof y)){if(t instanceof i)return t;if(dl.call(t,"__wrapped__"))return ta(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=it}function y(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Nt,this.__views__=[]}function A(){var t=new y(this.__wrapped__);return t.__actions__=Ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ri(this.__views__),t}function K(){if(this.__filtered__){var t=new y(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function et(){var t=this.__wrapped__.value(),e=this.__dir__,n=vh(t),r=e<0,i=n?t.length:0,o=So(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,f=l.length,h=0,p=Hl(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return gi(t,this.__actions__);var d=[];t:for(;u--&&h<p;){c+=e;for(var v=-1,m=t[c];++v<f;){var g=l[v],y=g.iteratee,_=g.type,b=y(m);if(_==jt)m=b;else if(!b){if(_==Pt)continue t;break t}}d[h++]=m}return d}function nt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Le(){this.__data__=tf?tf(null):{},this.size=0}function Fe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Qe(t){var e=this.__data__;if(tf){var n=e[t];return n===ct?it:n}return dl.call(e,t)?e[t]:it}function $e(t){var e=this.__data__;return tf?e[t]!==it:dl.call(e,t)}function tn(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=tf&&e===it?ct:e,this}function en(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nn(){this.__data__=[],this.size=0}function rn(t){var e=this.__data__,n=Wn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Cl.call(e,n,1),--this.size,!0)}function on(t){var e=this.__data__,n=Wn(e,t);return n<0?it:e[n][1]}function an(t){return Wn(this.__data__,t)>-1}function sn(t,e){var n=this.__data__,r=Wn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function cn(){this.size=0,this.__data__={hash:new nt,map:new(Kl||en),string:new nt}}function ln(t){var e=bo(this,t).delete(t);return this.size-=e?1:0,e}function fn(t){return bo(this,t).get(t)}function hn(t){return bo(this,t).has(t)}function pn(t,e){var n=bo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function dn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new un;++e<n;)this.add(t[e])}function gn(t){return this.__data__.set(t,ct),this}function yn(t){return this.__data__.has(t)}function _n(t){var e=this.__data__=new en(t);this.size=e.size}function bn(){this.__data__=new en,this.size=0}function On(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Tn(t){return this.__data__.get(t)}function An(t){return this.__data__.has(t)}function Cn(t,e){var n=this.__data__;if(n instanceof en){var r=n.__data__;if(!Kl||r.length<ot-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new un(r)}return n.set(t,e),this.size=n.size,this}function Pn(t,e){var n=vh(t),r=!n&&dh(t),i=!n&&!r&&gh(t),o=!n&&!r&&!i&&wh(t),a=n||r||i||o,s=a?P(t.length,sl):[],u=s.length;for(var c in t)!e&&!dl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jo(c,u))||s.push(c);return s}function jn(t){var e=t.length;return e?t[Qr(0,e-1)]:it}function Rn(t,e){return Ko(Ri(t),er(e,0,t.length))}function Ln(t){return Ko(Ri(t))}function Nn(t,e,n){(n===it||Gs(t[e],n))&&(n!==it||e in t)||$n(t,e,n)}function zn(t,e,n){var r=t[e];dl.call(t,e)&&Gs(r,n)&&(n!==it||e in t)||$n(t,e,n)}function Wn(t,e){for(var n=t.length;n--;)if(Gs(t[n][0],e))return n;return-1}function Kn(t,e,n,r){return pf(t,function(t,i,o){e(r,t,n(t),o)}),r}function Jn(t,e){return t&&Li(e,zu(e),t)}function Qn(t,e){return t&&Li(e,Fu(e),t)}function $n(t,e,n){"__proto__"==e&&jl?jl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function tr(t,e){for(var n=-1,r=e.length,i=tl(r),o=null==t;++n<r;)i[n]=o?it:Lu(t,e[n]);return i}function er(t,e,n){return t===t&&(n!==it&&(t=t<=n?t:n),e!==it&&(t=t>=e?t:e)),t}function nr(t,e,n,r,i,o){var a,u=e&ht,c=e&pt,l=e&dt;if(n&&(a=i?n(t,r,i,o):n(t)),a!==it)return a;if(!nu(t))return t;var f=vh(t);if(f){if(a=Ao(t),!u)return Ri(t,a)}else{var h=Of(t),p=h==Xt||h==Yt;if(gh(t))return Si(t,u);if(h==$t||h==Ut||p&&!i){if(a=c||p?{}:Co(t),!u)return c?Ni(t,Qn(a,t)):Di(t,Jn(a,t))}else{if(!Sn[h])return i?t:{};a=ko(t,h,u)}}o||(o=new _n);var d=o.get(t);if(d)return d;o.set(t,a),xh(t)?t.forEach(function(r){a.add(nr(r,e,n,r,t,o))}):_h(t)&&t.forEach(function(r,i){a.set(i,nr(r,e,n,i,t,o))});var v=l?c?mo:vo:c?Fu:zu,m=f?it:v(t);return s(m||t,function(r,i){m&&(i=r,r=t[i]),zn(a,i,nr(r,e,n,i,t,o))}),a}function rr(t){var e=zu(t);return function(n){return ir(n,t,e)}}function ir(t,e,n){var r=n.length;if(null==t)return!r;for(t=ol(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===it&&!(i in t)||!o(a))return!1}return!0}function or(t,e,n){if("function"!=typeof t)throw new ul(st);return Cf(function(){t.apply(it,n)},e)}function ar(t,e,n,r){var i=-1,o=f,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=p(e,R(n))),r?(o=h,a=!1):e.length>=ot&&(o=D,a=!1,e=new dn(e));t:for(;++i<s;){var l=t[i],d=null==n?l:n(l);if(l=r||0!==l?l:0,a&&d===d){for(var v=c;v--;)if(e[v]===d)continue t;u.push(l)}else o(e,d,r)||u.push(l)}return u}function sr(t,e){var n=!0;return pf(t,function(t,r,i){return n=!!e(t,r,i)}),n}function ur(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===it?a===a&&!du(a):n(a,s)))var s=a,u=o}return u}function cr(t,e,n,r){var i=t.length;for(n=bu(n),n<0&&(n=-n>i?0:i+n),r=r===it||r>i?i:bu(r),r<0&&(r+=i),r=n>r?0:xu(r);n<r;)t[n++]=e;return t}function lr(t,e){var n=[];return pf(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function fr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Po),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?fr(s,e-1,n,r,i):d(i,s):r||(i[i.length]=s)}return i}function hr(t,e){return t&&vf(t,e,zu)}function pr(t,e){return t&&mf(t,e,zu)}function dr(t,e){return l(e,function(e){return $s(t[e])})}function vr(t,e){e=wi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Jo(e[n++])];return n&&n==r?t:it}function mr(t,e,n){var r=e(t);return vh(t)?r:d(r,n(t))}function gr(t){return null==t?t===it?oe:Qt:Pl&&Pl in ol(t)?Eo(t):Go(t)}function yr(t,e){return t>e}function _r(t,e){return null!=t&&dl.call(t,e)}function br(t,e){return null!=t&&e in ol(t)}function xr(t,e,n){return t>=Hl(e,n)&&t<Gl(e,n)}function wr(t,e,n){for(var r=n?h:f,i=t[0].length,o=t.length,a=o,s=tl(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=p(l,R(e))),u=Hl(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new dn(a&&l):it}l=t[0];var d=-1,v=s[0];t:for(;++d<i&&c.length<u;){var m=l[d],g=e?e(m):m;if(m=n||0!==m?m:0,!(v?D(v,g):r(c,g,n))){for(a=o;--a;){var y=s[a];if(!(y?D(y,g):r(t[a],g,n)))continue t}v&&v.push(g),c.push(m)}}return c}function Er(t,e,n,r){return hr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Sr(t,e,n){e=wi(e,t),t=Wo(t,e);var r=null==t?t:t[Jo(_a(e))];return null==r?it:o(r,t,n)}function Or(t){return ru(t)&&gr(t)==Ut}function Tr(t){return ru(t)&&gr(t)==ue}function Ar(t){return ru(t)&&gr(t)==Wt}function Cr(t,e,n,r,i){return t===e||(null==t||null==e||!ru(t)&&!ru(e)?t!==t&&e!==e:kr(t,e,n,r,Cr,i))}function kr(t,e,n,r,i,o){var a=vh(t),s=vh(e),u=a?Vt:Of(t),c=s?Vt:Of(e);u=u==Ut?$t:u,c=c==Ut?$t:c;var l=u==$t,f=c==$t,h=u==c;if(h&&gh(t)){if(!gh(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new _n),a||wh(t)?lo(t,e,n,r,i,o):fo(t,e,u,n,r,i,o);if(!(n&vt)){var p=l&&dl.call(t,"__wrapped__"),d=f&&dl.call(e,"__wrapped__");if(p||d){var v=p?t.value():t,m=d?e.value():e;return o||(o=new _n),i(v,m,n,r,o)}}return!!h&&(o||(o=new _n),ho(t,e,n,r,i,o))}function Mr(t){return ru(t)&&Of(t)==Kt}function Pr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=ol(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(c===it&&!(u in t))return!1}else{var f=new _n;if(r)var h=r(c,l,u,t,e,f);if(!(h===it?Cr(l,c,vt|mt,r,f):h))return!1}}return!0}function jr(t){return!(!nu(t)||No(t))&&($s(t)?bl:qe).test(Qo(t))}function Ir(t){return ru(t)&&gr(t)==ee}function Rr(t){return ru(t)&&Of(t)==ne}function Lr(t){return ru(t)&&eu(t.length)&&!!En[gr(t)]}function Dr(t){return"function"==typeof t?t:null==t?Cc:"object"==typeof t?vh(t)?Vr(t[0],t[1]):Ur(t):Dc(t)}function Nr(t){if(!zo(t))return Vl(t);var e=[];for(var n in ol(t))dl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function zr(t){if(!nu(t))return Vo(t);var e=zo(t),n=[];for(var r in t)("constructor"!=r||!e&&dl.call(t,r))&&n.push(r);return n}function Fr(t,e){return t<e}function Br(t,e){var n=-1,r=Hs(t)?tl(t.length):[];return pf(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ur(t){var e=xo(t);return 1==e.length&&e[0][2]?Bo(e[0][0],e[0][1]):function(n){return n===t||Pr(n,t,e)}}function Vr(t,e){return Ro(t)&&Fo(e)?Bo(Jo(t),e):function(n){var r=Lu(n,t);return r===it&&r===e?Nu(n,t):Cr(e,r,vt|mt)}}function Gr(t,e,n,r,i){t!==e&&vf(e,function(o,a){if(i||(i=new _n),nu(o))Hr(t,e,a,n,Gr,r,i);else{var s=r?r(Zo(t,a),o,a+"",t,e,i):it;s===it&&(s=o),Nn(t,a,s)}},Fu)}function Hr(t,e,n,r,i,o,a){var s=Zo(t,n),u=Zo(e,n),c=a.get(u);if(c)return void Nn(t,n,c);var l=o?o(s,u,n+"",t,e,a):it,f=l===it;if(f){var h=vh(u),p=!h&&gh(u),d=!h&&!p&&wh(u);l=u,h||p||d?vh(s)?l=s:Ws(s)?l=Ri(s):p?(f=!1,l=Si(u,!0)):d?(f=!1,l=ki(u,!0)):l=[]:fu(u)||dh(u)?(l=s,dh(s)?l=Eu(s):nu(s)&&!$s(s)||(l=Co(u))):f=!1}f&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),Nn(t,n,l)}function Wr(t,e){var n=t.length;if(n)return e+=e<0?n:0,jo(e,n)?t[e]:it}function qr(t,e,n){e=e.length?p(e,function(t){return vh(t)?function(e){return vr(e,1===t.length?t[0]:t)}:t}):[Cc];var r=-1;return e=p(e,R(_o())),k(Br(t,function(t,n,i){return{criteria:p(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return Pi(t,e,n)})}function Zr(t,e){return Xr(t,e,function(e,n){return Nu(t,n)})}function Xr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=vr(t,a);n(s,a)&&ii(o,wi(a,t),s)}return o}function Yr(t){return function(e){return vr(e,t)}}function Kr(t,e,n,r){var i=r?E:w,o=-1,a=e.length,s=t;for(t===e&&(e=Ri(e)),n&&(s=p(t,R(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Cl.call(s,u,1),Cl.call(t,u,1);return t}function Jr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;jo(i)?Cl.call(t,i,1):di(t,i)}}return t}function Qr(t,e){return t+Nl(Zl()*(e-t+1))}function $r(t,e,n,r){for(var i=-1,o=Gl(Dl((e-t)/(n||1)),0),a=tl(o);o--;)a[r?o:++i]=t,t+=n;return a}function ti(t,e){var n="";if(!t||e<1||e>Rt)return n;do{e%2&&(n+=t),(e=Nl(e/2))&&(t+=t)}while(e);return n}function ei(t,e){return kf(Ho(t,e,Cc),t+"")}function ni(t){return jn(Ju(t))}function ri(t,e){var n=Ju(t);return Ko(n,er(e,0,n.length))}function ii(t,e,n,r){if(!nu(t))return t;e=wi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Jo(e[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=a){var l=s[u];c=r?r(l,u,s):it,c===it&&(c=nu(l)?l:jo(e[i+1])?[]:{})}zn(s,u,c),s=s[u]}return t}function oi(t){return Ko(Ju(t))}function ai(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=tl(i);++r<i;)o[r]=t[r+e];return o}function si(t,e){var n;return pf(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function ui(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=Ft){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!du(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ci(t,e,Cc,n)}function ci(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;e=n(e);for(var a=e!==e,s=null===e,u=du(e),c=e===it;i<o;){var l=Nl((i+o)/2),f=n(t[l]),h=f!==it,p=null===f,d=f===f,v=du(f);if(a)var m=r||d;else m=c?d&&(r||h):s?d&&h&&(r||!p):u?d&&h&&!p&&(r||!v):!p&&!v&&(r?f<=e:f<e);m?i=l+1:o=l}return Hl(o,zt)}function li(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Gs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function fi(t){return"number"==typeof t?t:du(t)?Dt:+t}function hi(t){if("string"==typeof t)return t;if(vh(t))return p(t,hi)+"";if(du(t))return ff?ff.call(t):"";var e=t+"";return"0"==e&&1/t==-It?"-0":e}function pi(t,e,n){var r=-1,i=f,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=h;else if(o>=ot){var c=e?null:xf(t);if(c)return X(c);a=!1,i=D,u=new dn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],p=e?e(l):l;if(l=n||0!==l?l:0,a&&p===p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(l)}else i(u,p,n)||(u!==s&&u.push(p),s.push(l))}return s}function di(t,e){return e=wi(e,t),null==(t=Wo(t,e))||delete t[Jo(_a(e))]}function vi(t,e,n,r){return ii(t,e,n(vr(t,e)),r)}function mi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ai(t,r?0:o,r?o+1:i):ai(t,r?o+1:0,r?i:o)}function gi(t,e){var n=t;return n instanceof y&&(n=n.value()),v(e,function(t,e){return e.func.apply(e.thisArg,d([t],e.args))},n)}function yi(t,e,n){var r=t.length;if(r<2)return r?pi(t[0]):[];for(var i=-1,o=tl(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=ar(o[i]||a,t[s],e,n));return pi(fr(o,1),e,n)}function _i(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:it;n(a,t[r],s)}return a}function bi(t){return Ws(t)?t:[]}function xi(t){return"function"==typeof t?t:Cc}function wi(t,e){return vh(t)?t:Ro(t,e)?[t]:Mf(Ou(t))}function Ei(t,e,n){var r=t.length;return n=n===it?r:n,!e&&n>=r?t:ai(t,e,n)}function Si(t,e){if(e)return t.slice();var n=t.length,r=Sl?Sl(n):new t.constructor(n);return t.copy(r),r}function Oi(t){var e=new t.constructor(t.byteLength);return new El(e).set(new El(t)),e}function Ti(t,e){var n=e?Oi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ai(t){var e=new t.constructor(t.source,Ge.exec(t));return e.lastIndex=t.lastIndex,e}function Ci(t){return lf?ol(lf.call(t)):{}}function ki(t,e){var n=e?Oi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==it,r=null===t,i=t===t,o=du(t),a=e!==it,s=null===e,u=e===e,c=du(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Pi(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Mi(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}function ji(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Gl(o-a,0),l=tl(u+c),f=!r;++s<u;)l[s]=e[s];for(;++i<a;)(f||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Ii(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=Gl(o-s,0),f=tl(l+c),h=!r;++i<l;)f[i]=t[i];for(var p=i;++u<c;)f[p+u]=e[u];for(;++a<s;)(h||i<o)&&(f[p+n[a]]=t[i++]);return f}function Ri(t,e){var n=-1,r=t.length;for(e||(e=tl(r));++n<r;)e[n]=t[n];return e}function Li(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):it;u===it&&(u=t[s]),i?$n(n,s,u):zn(n,s,u)}return n}function Di(t,e){return Li(t,Ef(t),e)}function Ni(t,e){return Li(t,Sf(t),e)}function zi(t,e){return function(n,r){var i=vh(n)?a:Kn,o=e?e():{};return i(n,t,_o(r,2),o)}}function Fi(t){return ei(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:it,a=i>2?n[2]:it;for(o=t.length>3&&"function"==typeof o?(i--,o):it,a&&Io(n[0],n[1],a)&&(o=i<3?it:o,i=1),e=ol(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Bi(t,e){return function(n,r){if(null==n)return n;if(!Hs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=ol(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ui(t){return function(e,n,r){for(var i=-1,o=ol(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Vi(t,e,n){function r(){return(this&&this!==In&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&gt,o=Wi(t);return r}function Gi(t){return function(e){e=Ou(e);var n=V(e)?$(e):it,r=n?n[0]:e.charAt(0),i=n?Ei(n,1).join(""):e.slice(1);return r[t]()+i}}function Hi(t){return function(e){return v(Ec(rc(e).replace(vn,"")),t,"")}}function Wi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=hf(t.prototype),r=t.apply(n,e);return nu(r)?r:n}}function qi(t,e,n){function r(){for(var a=arguments.length,s=tl(a),u=a,c=yo(r);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:Z(s,c);return(a-=l.length)<n?ro(t,e,Yi,r.placeholder,it,s,l,it,it,n-a):o(this&&this!==In&&this instanceof r?i:t,this,s)}var i=Wi(t);return r}function Zi(t){return function(e,n,r){var i=ol(e);if(!Hs(e)){var o=_o(n,3);e=zu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:it}}function Xi(t){return po(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new ul(st);if(o&&!s&&"wrapper"==go(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=go(a),c="wrapper"==u?wf(a):it;s=c&&Do(c[0])&&c[1]==(St|bt|wt|Ot)&&!c[4].length&&1==c[9]?s[go(c[0])].apply(s,c[3]):1==a.length&&Do(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&vh(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function Yi(t,e,n,r,i,o,a,s,u,c){function l(){for(var g=arguments.length,y=tl(g),_=g;_--;)y[_]=arguments[_];if(d)var b=yo(l),x=F(y,b);if(r&&(y=ji(y,r,i,d)),o&&(y=Ii(y,o,a,d)),g-=x,d&&g<c){var w=Z(y,b);return ro(t,e,Yi,l.placeholder,n,y,w,s,u,c-g)}var E=h?n:this,S=p?E[t]:t;return g=y.length,s?y=qo(y,s):v&&g>1&&y.reverse(),f&&u<g&&(y.length=u),this&&this!==In&&this instanceof l&&(S=m||Wi(S)),S.apply(E,y)}var f=e&St,h=e&gt,p=e&yt,d=e&(bt|xt),v=e&Tt,m=p?it:Wi(t);return l}function Ki(t,e){return function(n,r){return Er(n,t,e(r),{})}}function Ji(t,e){return function(n,r){var i;if(n===it&&r===it)return e;if(n!==it&&(i=n),r!==it){if(i===it)return r;"string"==typeof n||"string"==typeof r?(n=hi(n),r=hi(r)):(n=fi(n),r=fi(r)),i=t(n,r)}return i}}function Qi(t){return po(function(e){return e=p(e,R(_o())),ei(function(n){var r=this;return t(e,function(t){return o(t,r,n)})})})}function $i(t,e){e=e===it?" ":hi(e);var n=e.length;if(n<2)return n?ti(e,t):e;var r=ti(e,Dl(t/Q(e)));return V(e)?Ei($(r),0,t).join(""):r.slice(0,t)}function to(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,l=r.length,f=tl(l+u),h=this&&this!==In&&this instanceof i?s:t;++c<l;)f[c]=r[c];for(;u--;)f[c++]=arguments[++e];return o(h,a?n:this,f)}var a=e&gt,s=Wi(t);return i}function eo(t){return function(e,n,r){return r&&"number"!=typeof r&&Io(e,n,r)&&(n=r=it),e=_u(e),n===it?(n=e,e=0):n=_u(n),r=r===it?e<n?1:-1:_u(r),$r(e,n,r,t)}}function no(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=wu(e),n=wu(n)),t(e,n)}}function ro(t,e,n,r,i,o,a,s,u,c){var l=e&bt,f=l?a:it,h=l?it:a,p=l?o:it,d=l?it:o;e|=l?wt:Et,(e&=~(l?Et:wt))&_t||(e&=~(gt|yt));var v=[t,e,i,p,f,d,h,s,u,c],m=n.apply(it,v);return Do(t)&&Af(m,v),m.placeholder=r,Xo(m,t,e)}function io(t){var e=il[t];return function(t,n){if(t=wu(t),(n=null==n?0:Hl(bu(n),292))&&Bl(t)){var r=(Ou(t)+"e").split("e");return r=(Ou(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function oo(t){return function(e){var n=Of(e);return n==Kt?W(e):n==ne?Y(e):j(e,t(e))}}function ao(t,e,n,r,i,o,a,s){var u=e&yt;if(!u&&"function"!=typeof t)throw new ul(st);var c=r?r.length:0;if(c||(e&=~(wt|Et),r=i=it),a=a===it?a:Gl(bu(a),0),s=s===it?s:bu(s),c-=i?i.length:0,e&Et){var l=r,f=i;r=i=it}var h=u?it:wf(t),p=[t,e,n,r,i,l,f,o,a,s];if(h&&Uo(p,h),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],s=p[9]=p[9]===it?u?0:t.length:Gl(p[9]-c,0),!s&&e&(bt|xt)&&(e&=~(bt|xt)),e&&e!=gt)d=e==bt||e==xt?qi(t,e,s):e!=wt&&e!=(gt|wt)||i.length?Yi.apply(it,p):to(t,e,n,r);else var d=Vi(t,e,n);return Xo((h?gf:Af)(d,p),t,e)}function so(t,e,n,r){return t===it||Gs(t,fl[n])&&!dl.call(r,n)?e:t}function uo(t,e,n,r,i,o){return nu(t)&&nu(e)&&(o.set(e,t),Gr(t,e,it,uo,o),o.delete(e)),t}function co(t){return fu(t)?it:t}function lo(t,e,n,r,i,o){var a=n&vt,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t),l=o.get(e);if(c&&l)return c==e&&l==t;var f=-1,h=!0,p=n&mt?new dn:it;for(o.set(t,e),o.set(e,t);++f<s;){var d=t[f],v=e[f];if(r)var m=a?r(v,d,f,e,t,o):r(d,v,f,t,e,o);if(m!==it){if(m)continue;h=!1;break}if(p){if(!g(e,function(t,e){if(!D(p,e)&&(d===t||i(d,t,n,r,o)))return p.push(e)})){h=!1;break}}else if(d!==v&&!i(d,v,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function fo(t,e,n,r,i,o,a){switch(n){case ce:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ue:return!(t.byteLength!=e.byteLength||!o(new El(t),new El(e)));case Ht:case Wt:case Jt:return Gs(+t,+e);case Zt:return t.name==e.name&&t.message==e.message;case ee:case re:return t==e+"";case Kt:var s=W;case ne:var u=r&vt;if(s||(s=X),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=mt,a.set(t,e);var l=lo(s(t),s(e),r,i,o,a);return a.delete(t),l;case ie:if(lf)return lf.call(t)==lf.call(e)}return!1}function ho(t,e,n,r,i,o){var a=n&vt,s=vo(t),u=s.length;if(u!=vo(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:dl.call(e,l)))return!1}var f=o.get(t),h=o.get(e);if(f&&h)return f==e&&h==t;var p=!0;o.set(t,e),o.set(e,t);for(var d=a;++c<u;){l=s[c];var v=t[l],m=e[l];if(r)var g=a?r(m,v,l,e,t,o):r(v,m,l,t,e,o);if(!(g===it?v===m||i(v,m,n,r,o):g)){p=!1;break}d||(d="constructor"==l)}if(p&&!d){var y=t.constructor,_=e.constructor;y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return o.delete(t),o.delete(e),p}function po(t){return kf(Ho(t,it,fa),t+"")}function vo(t){return mr(t,zu,Ef)}function mo(t){return mr(t,Fu,Sf)}function go(t){for(var e=t.name+"",n=nf[e],r=dl.call(nf,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function yo(t){return(dl.call(n,"placeholder")?n:t).placeholder}function _o(){var t=n.iteratee||kc;return t=t===kc?Dr:t,arguments.length?t(arguments[0],arguments[1]):t}function bo(t,e){var n=t.__data__;return Lo(e)?n["string"==typeof e?"string":"hash"]:n.map}function xo(t){for(var e=zu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Fo(i)]}return e}function wo(t,e){var n=U(t,e);return jr(n)?n:it}function Eo(t){var e=dl.call(t,Pl),n=t[Pl];try{t[Pl]=it;var r=!0}catch(t){}var i=gl.call(t);return r&&(e?t[Pl]=n:delete t[Pl]),i}function So(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Hl(e,t+a);break;case"takeRight":t=Gl(t,e-a)}}return{start:t,end:e}}function Oo(t){var e=t.match(Ne);return e?e[1].split(ze):[]}function To(t,e,n){e=wi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Jo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&eu(i)&&jo(a,i)&&(vh(t)||dh(t))}function Ao(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&dl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Co(t){return"function"!=typeof t.constructor||zo(t)?{}:hf(Ol(t))}function ko(t,e,n){var r=t.constructor;switch(e){case ue:return Oi(t);case Ht:case Wt:return new r(+t);case ce:return Ti(t,n);case le:case fe:case he:case pe:case de:case ve:case me:case ge:case ye:return ki(t,n);case Kt:return new r;case Jt:case re:return new r(t);case ee:return Ai(t);case ne:return new r;case ie:return Ci(t)}}function Mo(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(De,"{\n/* [wrapped with "+e+"] */\n")}function Po(t){return vh(t)||dh(t)||!!(kl&&t&&t[kl])}function jo(t,e){var n=typeof t;return!!(e=null==e?Rt:e)&&("number"==n||"symbol"!=n&&Xe.test(t))&&t>-1&&t%1==0&&t<e}function Io(t,e,n){if(!nu(n))return!1;var r=typeof e;return!!("number"==r?Hs(n)&&jo(e,n.length):"string"==r&&e in n)&&Gs(n[e],t)}function Ro(t,e){if(vh(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!du(t))||(Me.test(t)||!ke.test(t)||null!=e&&t in ol(e))}function Lo(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Do(t){var e=go(t),r=n[e];if("function"!=typeof r||!(e in y.prototype))return!1;if(t===r)return!0;var i=wf(r);return!!i&&t===i[0]}function No(t){return!!ml&&ml in t}function zo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||fl)}function Fo(t){return t===t&&!nu(t)}function Bo(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==it||t in ol(n)))}}function Uo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(gt|yt|St),a=r==St&&n==bt||r==St&&n==Ot&&t[7].length<=e[8]||r==(St|Ot)&&e[7].length<=e[8]&&n==bt;if(!o&&!a)return t;r&gt&&(t[2]=e[2],i|=n&gt?0:_t);var s=e[3];if(s){var u=t[3];t[3]=u?ji(u,s,e[4]):s,t[4]=u?Z(t[3],ft):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Ii(u,s,e[6]):s,t[6]=u?Z(t[5],ft):e[6]),s=e[7],s&&(t[7]=s),r&St&&(t[8]=null==t[8]?e[8]:Hl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Vo(t){var e=[];if(null!=t)for(var n in ol(t))e.push(n);return e}function Go(t){return gl.call(t)}function Ho(t,e,n){return e=Gl(e===it?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Gl(r.length-e,0),s=tl(a);++i<a;)s[i]=r[e+i];i=-1;for(var u=tl(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),o(t,this,u)}}function Wo(t,e){return e.length<2?t:vr(t,ai(e,0,-1))}function qo(t,e){for(var n=t.length,r=Hl(e.length,n),i=Ri(t);r--;){var o=e[r];t[r]=jo(o,n)?i[o]:it}return t}function Zo(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}function Xo(t,e,n){var r=e+"";return kf(t,Mo(r,$o(Oo(r),n)))}function Yo(t){var e=0,n=0;return function(){var r=Wl(),i=Mt-(r-n);if(n=r,i>0){if(++e>=kt)return arguments[0]}else e=0;return t.apply(it,arguments)}}function Ko(t,e){var n=-1,r=t.length,i=r-1;for(e=e===it?r:e;++n<e;){var o=Qr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Jo(t){if("string"==typeof t||du(t))return t;var e=t+"";return"0"==e&&1/t==-It?"-0":e}function Qo(t){if(null!=t){try{return pl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function $o(t,e){return s(Bt,function(n){var r="_."+n[0];e&n[1]&&!f(t,r)&&t.push(r)}),t.sort()}function ta(t){if(t instanceof y)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Ri(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function ea(t,e,n){e=(n?Io(t,e,n):e===it)?1:Gl(bu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=tl(Dl(r/e));i<r;)a[o++]=ai(t,i,i+=e);return a}function na(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ra(){var t=arguments.length;if(!t)return[];for(var e=tl(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return d(vh(n)?Ri(n):[n],fr(e,1))}function ia(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bu(e),ai(t,e<0?0:e,r)):[]}function oa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bu(e),e=r-e,ai(t,0,e<0?0:e)):[]}function aa(t,e){return t&&t.length?mi(t,_o(e,3),!0,!0):[]}function sa(t,e){return t&&t.length?mi(t,_o(e,3),!0):[]}function ua(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Io(t,e,n)&&(n=0,r=i),cr(t,e,n,r)):[]}function ca(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bu(n);return i<0&&(i=Gl(r+i,0)),x(t,_o(e,3),i)}function la(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==it&&(i=bu(n),i=n<0?Gl(r+i,0):Hl(i,r-1)),x(t,_o(e,3),i,!0)}function fa(t){return(null==t?0:t.length)?fr(t,1):[]}function ha(t){return(null==t?0:t.length)?fr(t,It):[]}function pa(t,e){return(null==t?0:t.length)?(e=e===it?1:bu(e),fr(t,e)):[]}function da(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function va(t){return t&&t.length?t[0]:it}function ma(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bu(n);return i<0&&(i=Gl(r+i,0)),w(t,e,i)}function ga(t){return(null==t?0:t.length)?ai(t,0,-1):[]}function ya(t,e){return null==t?"":Ul.call(t,e)}function _a(t){var e=null==t?0:t.length;return e?t[e-1]:it}function ba(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==it&&(i=bu(n),i=i<0?Gl(r+i,0):Hl(i,r-1)),e===e?J(t,e,i):x(t,S,i,!0)}function xa(t,e){return t&&t.length?Wr(t,bu(e)):it}function wa(t,e){return t&&t.length&&e&&e.length?Kr(t,e):t}function Ea(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,_o(n,2)):t}function Sa(t,e,n){return t&&t.length&&e&&e.length?Kr(t,e,it,n):t}function Oa(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=_o(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Jr(t,i),n}function Ta(t){return null==t?t:Xl.call(t)}function Aa(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Io(t,e,n)?(e=0,n=r):(e=null==e?0:bu(e),n=n===it?r:bu(n)),ai(t,e,n)):[]}function Ca(t,e){return ui(t,e)}function ka(t,e,n){return ci(t,e,_o(n,2))}function Ma(t,e){var n=null==t?0:t.length;if(n){var r=ui(t,e);if(r<n&&Gs(t[r],e))return r}return-1}function Pa(t,e){return ui(t,e,!0)}function ja(t,e,n){return ci(t,e,_o(n,2),!0)}function Ia(t,e){if(null==t?0:t.length){var n=ui(t,e,!0)-1;if(Gs(t[n],e))return n}return-1}function Ra(t){return t&&t.length?li(t):[]}function La(t,e){return t&&t.length?li(t,_o(e,2)):[]}function Da(t){var e=null==t?0:t.length;return e?ai(t,1,e):[]}function Na(t,e,n){return t&&t.length?(e=n||e===it?1:bu(e),ai(t,0,e<0?0:e)):[]}function za(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===it?1:bu(e),e=r-e,ai(t,e<0?0:e,r)):[]}function Fa(t,e){return t&&t.length?mi(t,_o(e,3),!1,!0):[]}function Ba(t,e){return t&&t.length?mi(t,_o(e,3)):[]}function Ua(t){return t&&t.length?pi(t):[]}function Va(t,e){return t&&t.length?pi(t,_o(e,2)):[]}function Ga(t,e){return e="function"==typeof e?e:it,t&&t.length?pi(t,it,e):[]}function Ha(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Ws(t))return e=Gl(t.length,e),!0}),P(e,function(e){return p(t,T(e))})}function Wa(t,e){if(!t||!t.length)return[];var n=Ha(t);return null==e?n:p(n,function(t){return o(e,it,t)})}function qa(t,e){return _i(t||[],e||[],zn)}function Za(t,e){return _i(t||[],e||[],ii)}function Xa(t){var e=n(t);return e.__chain__=!0,e}function Ya(t,e){return e(t),t}function Ka(t,e){return e(t)}function Ja(){return Xa(this)}function Qa(){return new i(this.value(),this.__chain__)}function $a(){this.__values__===it&&(this.__values__=yu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?it:this.__values__[this.__index__++]}}function ts(){return this}function es(t){for(var e,n=this;n instanceof r;){var i=ta(n);i.__index__=0,i.__values__=it,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function ns(){var t=this.__wrapped__;if(t instanceof y){var e=t;return this.__actions__.length&&(e=new y(this)),e=e.reverse(),e.__actions__.push({func:Ka,args:[Ta],thisArg:it}),new i(e,this.__chain__)}return this.thru(Ta)}function rs(){return gi(this.__wrapped__,this.__actions__)}function is(t,e,n){var r=vh(t)?c:sr;return n&&Io(t,e,n)&&(e=it),r(t,_o(e,3))}function os(t,e){return(vh(t)?l:lr)(t,_o(e,3))}function as(t,e){return fr(hs(t,e),1)}function ss(t,e){return fr(hs(t,e),It)}function us(t,e,n){return n=n===it?1:bu(n),fr(hs(t,e),n)}function cs(t,e){return(vh(t)?s:pf)(t,_o(e,3))}function ls(t,e){return(vh(t)?u:df)(t,_o(e,3))}function fs(t,e,n,r){t=Hs(t)?t:Ju(t),n=n&&!r?bu(n):0;var i=t.length;return n<0&&(n=Gl(i+n,0)),pu(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&w(t,e,n)>-1}function hs(t,e){return(vh(t)?p:Br)(t,_o(e,3))}function ps(t,e,n,r){return null==t?[]:(vh(e)||(e=null==e?[]:[e]),n=r?it:n,vh(n)||(n=null==n?[]:[n]),qr(t,e,n))}function ds(t,e,n){var r=vh(t)?v:C,i=arguments.length<3;return r(t,_o(e,4),n,i,pf)}function vs(t,e,n){var r=vh(t)?m:C,i=arguments.length<3;return r(t,_o(e,4),n,i,df)}function ms(t,e){return(vh(t)?l:lr)(t,Ms(_o(e,3)))}function gs(t){return(vh(t)?jn:ni)(t)}function ys(t,e,n){return e=(n?Io(t,e,n):e===it)?1:bu(e),(vh(t)?Rn:ri)(t,e)}function _s(t){return(vh(t)?Ln:oi)(t)}function bs(t){if(null==t)return 0;if(Hs(t))return pu(t)?Q(t):t.length;var e=Of(t);return e==Kt||e==ne?t.size:Nr(t).length}function xs(t,e,n){var r=vh(t)?g:si;return n&&Io(t,e,n)&&(e=it),r(t,_o(e,3))}function ws(t,e){if("function"!=typeof e)throw new ul(st);return t=bu(t),function(){if(--t<1)return e.apply(this,arguments)}}function Es(t,e,n){return e=n?it:e,e=t&&null==e?t.length:e,ao(t,St,it,it,it,it,e)}function Ss(t,e){var n;if("function"!=typeof e)throw new ul(st);return t=bu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=it),n}}function Os(t,e,n){e=n?it:e;var r=ao(t,bt,it,it,it,it,it,e);return r.placeholder=Os.placeholder,r}function Ts(t,e,n){e=n?it:e;var r=ao(t,xt,it,it,it,it,it,e);return r.placeholder=Ts.placeholder,r}function As(t,e,n){function r(e){var n=h,r=p;return h=p=it,y=e,v=t.apply(r,n)}function i(t){return y=t,m=Cf(s,e),_?r(t):v}function o(t){var n=t-g,r=t-y,i=e-n;return b?Hl(i,d-r):i}function a(t){var n=t-g,r=t-y;return g===it||n>=e||n<0||b&&r>=d}function s(){var t=rh();if(a(t))return u(t);m=Cf(s,o(t))}function u(t){return m=it,x&&h?r(t):(h=p=it,v)}function c(){m!==it&&bf(m),y=0,h=g=p=m=it}function l(){return m===it?v:u(rh())}function f(){var t=rh(),n=a(t);if(h=arguments,p=this,g=t,n){if(m===it)return i(g);if(b)return bf(m),m=Cf(s,e),r(g)}return m===it&&(m=Cf(s,e)),v}var h,p,d,v,m,g,y=0,_=!1,b=!1,x=!0;if("function"!=typeof t)throw new ul(st);return e=wu(e)||0,nu(n)&&(_=!!n.leading,b="maxWait"in n,d=b?Gl(wu(n.maxWait)||0,e):d,x="trailing"in n?!!n.trailing:x),f.cancel=c,f.flush=l,f}function Cs(t){return ao(t,Tt)}function ks(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ul(st);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ks.Cache||un),n}function Ms(t){if("function"!=typeof t)throw new ul(st);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Ps(t){return Ss(2,t)}function js(t,e){if("function"!=typeof t)throw new ul(st);return e=e===it?e:bu(e),ei(t,e)}function Is(t,e){if("function"!=typeof t)throw new ul(st);return e=null==e?0:Gl(bu(e),0),ei(function(n){var r=n[e],i=Ei(n,0,e);return r&&d(i,r),o(t,this,i)})}function Rs(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ul(st);return nu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),As(t,e,{leading:r,maxWait:e,trailing:i})}function Ls(t){return Es(t,1)}function Ds(t,e){return ch(xi(e),t)}function Ns(){if(!arguments.length)return[];var t=arguments[0];return vh(t)?t:[t]}function zs(t){return nr(t,dt)}function Fs(t,e){return e="function"==typeof e?e:it,nr(t,dt,e)}function Bs(t){return nr(t,ht|dt)}function Us(t,e){return e="function"==typeof e?e:it,nr(t,ht|dt,e)}function Vs(t,e){return null==e||ir(t,e,zu(e))}function Gs(t,e){return t===e||t!==t&&e!==e}function Hs(t){return null!=t&&eu(t.length)&&!$s(t)}function Ws(t){return ru(t)&&Hs(t)}function qs(t){return!0===t||!1===t||ru(t)&&gr(t)==Ht}function Zs(t){return ru(t)&&1===t.nodeType&&!fu(t)}function Xs(t){if(null==t)return!0;if(Hs(t)&&(vh(t)||"string"==typeof t||"function"==typeof t.splice||gh(t)||wh(t)||dh(t)))return!t.length;var e=Of(t);if(e==Kt||e==ne)return!t.size;if(zo(t))return!Nr(t).length;for(var n in t)if(dl.call(t,n))return!1;return!0}function Ys(t,e){return Cr(t,e)}function Ks(t,e,n){n="function"==typeof n?n:it;var r=n?n(t,e):it;return r===it?Cr(t,e,it,n):!!r}function Js(t){if(!ru(t))return!1;var e=gr(t);return e==Zt||e==qt||"string"==typeof t.message&&"string"==typeof t.name&&!fu(t)}function Qs(t){return"number"==typeof t&&Bl(t)}function $s(t){if(!nu(t))return!1;var e=gr(t);return e==Xt||e==Yt||e==Gt||e==te}function tu(t){return"number"==typeof t&&t==bu(t)}function eu(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Rt}function nu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ru(t){return null!=t&&"object"==typeof t}function iu(t,e){return t===e||Pr(t,e,xo(e))}function ou(t,e,n){return n="function"==typeof n?n:it,Pr(t,e,xo(e),n)}function au(t){return lu(t)&&t!=+t}function su(t){if(Tf(t))throw new nl(at);return jr(t)}function uu(t){return null===t}function cu(t){return null==t}function lu(t){return"number"==typeof t||ru(t)&&gr(t)==Jt}function fu(t){if(!ru(t)||gr(t)!=$t)return!1;var e=Ol(t);if(null===e)return!0;var n=dl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&pl.call(n)==yl}function hu(t){return tu(t)&&t>=-Rt&&t<=Rt}function pu(t){return"string"==typeof t||!vh(t)&&ru(t)&&gr(t)==re}function du(t){return"symbol"==typeof t||ru(t)&&gr(t)==ie}function vu(t){return t===it}function mu(t){return ru(t)&&Of(t)==ae}function gu(t){return ru(t)&&gr(t)==se}function yu(t){if(!t)return[];if(Hs(t))return pu(t)?$(t):Ri(t);if(Ml&&t[Ml])return H(t[Ml]());var e=Of(t);return(e==Kt?W:e==ne?X:Ju)(t)}function _u(t){if(!t)return 0===t?t:0;if((t=wu(t))===It||t===-It){return(t<0?-1:1)*Lt}return t===t?t:0}function bu(t){var e=_u(t),n=e%1;return e===e?n?e-n:e:0}function xu(t){return t?er(bu(t),0,Nt):0}function wu(t){if("number"==typeof t)return t;if(du(t))return Dt;if(nu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=nu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=I(t);var n=We.test(t);return n||Ze.test(t)?Mn(t.slice(2),n?2:8):He.test(t)?Dt:+t}function Eu(t){return Li(t,Fu(t))}function Su(t){return t?er(bu(t),-Rt,Rt):0===t?t:0}function Ou(t){return null==t?"":hi(t)}function Tu(t,e){var n=hf(t);return null==e?n:Jn(n,e)}function Au(t,e){return b(t,_o(e,3),hr)}function Cu(t,e){return b(t,_o(e,3),pr)}function ku(t,e){return null==t?t:vf(t,_o(e,3),Fu)}function Mu(t,e){return null==t?t:mf(t,_o(e,3),Fu)}function Pu(t,e){return t&&hr(t,_o(e,3))}function ju(t,e){return t&&pr(t,_o(e,3))}function Iu(t){return null==t?[]:dr(t,zu(t))}function Ru(t){return null==t?[]:dr(t,Fu(t))}function Lu(t,e,n){var r=null==t?it:vr(t,e);return r===it?n:r}function Du(t,e){return null!=t&&To(t,e,_r)}function Nu(t,e){return null!=t&&To(t,e,br)}function zu(t){return Hs(t)?Pn(t):Nr(t)}function Fu(t){return Hs(t)?Pn(t,!0):zr(t)}function Bu(t,e){var n={};return e=_o(e,3),hr(t,function(t,r,i){$n(n,e(t,r,i),t)}),n}function Uu(t,e){var n={};return e=_o(e,3),hr(t,function(t,r,i){$n(n,r,e(t,r,i))}),n}function Vu(t,e){return Gu(t,Ms(_o(e)))}function Gu(t,e){if(null==t)return{};var n=p(mo(t),function(t){return[t]});return e=_o(e),Xr(t,n,function(t,n){return e(t,n[0])})}function Hu(t,e,n){e=wi(e,t);var r=-1,i=e.length;for(i||(i=1,t=it);++r<i;){var o=null==t?it:t[Jo(e[r])];o===it&&(r=i,o=n),t=$s(o)?o.call(t):o}return t}function Wu(t,e,n){return null==t?t:ii(t,e,n)}function qu(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:ii(t,e,n,r)}function Zu(t,e,n){var r=vh(t),i=r||gh(t)||wh(t);if(e=_o(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:nu(t)&&$s(o)?hf(Ol(t)):{}}return(i?s:hr)(t,function(t,r,i){return e(n,t,r,i)}),n}function Xu(t,e){return null==t||di(t,e)}function Yu(t,e,n){return null==t?t:vi(t,e,xi(n))}function Ku(t,e,n,r){return r="function"==typeof r?r:it,null==t?t:vi(t,e,xi(n),r)}function Ju(t){return null==t?[]:L(t,zu(t))}function Qu(t){return null==t?[]:L(t,Fu(t))}function $u(t,e,n){return n===it&&(n=e,e=it),n!==it&&(n=wu(n),n=n===n?n:0),e!==it&&(e=wu(e),e=e===e?e:0),er(wu(t),e,n)}function tc(t,e,n){return e=_u(e),n===it?(n=e,e=0):n=_u(n),t=wu(t),xr(t,e,n)}function ec(t,e,n){if(n&&"boolean"!=typeof n&&Io(t,e,n)&&(e=n=it),n===it&&("boolean"==typeof e?(n=e,e=it):"boolean"==typeof t&&(n=t,t=it)),t===it&&e===it?(t=0,e=1):(t=_u(t),e===it?(e=t,t=0):e=_u(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Zl();return Hl(t+i*(e-t+kn("1e-"+((i+"").length-1))),e)}return Qr(t,e)}function nc(t){return Xh(Ou(t).toLowerCase())}function rc(t){return(t=Ou(t))&&t.replace(Ye,qn).replace(mn,"")}function ic(t,e,n){t=Ou(t),e=hi(e);var r=t.length;n=n===it?r:er(bu(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function oc(t){return t=Ou(t),t&&Oe.test(t)?t.replace(Ee,Zn):t}function ac(t){return t=Ou(t),t&&Ie.test(t)?t.replace(je,"\\$&"):t}function sc(t,e,n){t=Ou(t),e=bu(e);var r=e?Q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return $i(Nl(i),n)+t+$i(Dl(i),n)}function uc(t,e,n){t=Ou(t),e=bu(e);var r=e?Q(t):0;return e&&r<e?t+$i(e-r,n):t}function cc(t,e,n){t=Ou(t),e=bu(e);var r=e?Q(t):0;return e&&r<e?$i(e-r,n)+t:t}function lc(t,e,n){return n||null==e?e=0:e&&(e=+e),ql(Ou(t).replace(Re,""),e||0)}function fc(t,e,n){return e=(n?Io(t,e,n):e===it)?1:bu(e),ti(Ou(t),e)}function hc(){var t=arguments,e=Ou(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function pc(t,e,n){return n&&"number"!=typeof n&&Io(t,e,n)&&(e=n=it),(n=n===it?Nt:n>>>0)?(t=Ou(t),t&&("string"==typeof e||null!=e&&!bh(e))&&!(e=hi(e))&&V(t)?Ei($(t),0,n):t.split(e,n)):[]}function dc(t,e,n){return t=Ou(t),n=null==n?0:er(bu(n),0,t.length),e=hi(e),t.slice(n,n+e.length)==e}function vc(t,e,r){var i=n.templateSettings;r&&Io(t,e,r)&&(e=it),t=Ou(t),e=Ah({},e,i,so);var o,a,s=Ah({},e.imports,i.imports,so),u=zu(s),c=L(s,u),l=0,f=e.interpolate||Ke,h="__p += '",p=al((e.escape||Ke).source+"|"+f.source+"|"+(f===Ce?Ve:Ke).source+"|"+(e.evaluate||Ke).source+"|$","g"),d="//# sourceURL="+(dl.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wn+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),h+=t.slice(l,u).replace(Je,B),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var v=dl.call(e,"variable")&&e.variable;if(v){if(Be.test(v))throw new nl(ut)}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(_e,""):h).replace(be,"$1").replace(xe,"$1;"),h="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Yh(function(){return rl(u,d+"return "+h).apply(it,c)});if(m.source=h,Js(m))throw m;return m}function mc(t){return Ou(t).toLowerCase()}function gc(t){return Ou(t).toUpperCase()}function yc(t,e,n){if((t=Ou(t))&&(n||e===it))return I(t);if(!t||!(e=hi(e)))return t;var r=$(t),i=$(e);return Ei(r,N(r,i),z(r,i)+1).join("")}function _c(t,e,n){if((t=Ou(t))&&(n||e===it))return t.slice(0,tt(t)+1);if(!t||!(e=hi(e)))return t;var r=$(t);return Ei(r,0,z(r,$(e))+1).join("")}function bc(t,e,n){if((t=Ou(t))&&(n||e===it))return t.replace(Re,"");if(!t||!(e=hi(e)))return t;var r=$(t);return Ei(r,N(r,$(e))).join("")}function xc(t,e){var n=At,r=Ct;if(nu(e)){var i="separator"in e?e.separator:i;n="length"in e?bu(e.length):n,r="omission"in e?hi(e.omission):r}t=Ou(t);var o=t.length;if(V(t)){var a=$(t);o=a.length}if(n>=o)return t;var s=n-Q(r);if(s<1)return r;var u=a?Ei(a,0,s).join(""):t.slice(0,s);if(i===it)return u+r;if(a&&(s+=u.length-s),bh(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=al(i.source,Ou(Ge.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var f=c.index;u=u.slice(0,f===it?s:f)}}else if(t.indexOf(hi(i),s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r}function wc(t){return t=Ou(t),t&&Se.test(t)?t.replace(we,Xn):t}function Ec(t,e,n){return t=Ou(t),e=n?it:e,e===it?G(t)?rt(t):_(t):t.match(e)||[]}function Sc(t){var e=null==t?0:t.length,n=_o();return t=e?p(t,function(t){if("function"!=typeof t[1])throw new ul(st);return[n(t[0]),t[1]]}):[],ei(function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function Oc(t){return rr(nr(t,ht))}function Tc(t){return function(){return t}}function Ac(t,e){return null==t||t!==t?e:t}function Cc(t){return t}function kc(t){return Dr("function"==typeof t?t:nr(t,ht))}function Mc(t){return Ur(nr(t,ht))}function Pc(t,e){return Vr(t,nr(e,ht))}function jc(t,e,n){var r=zu(e),i=dr(e,r);null!=n||nu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=dr(e,zu(e)));var o=!(nu(n)&&"chain"in n)||!!n.chain,a=$s(t);return s(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ri(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,d([this.value()],arguments))})}),t}function Ic(){return In._===this&&(In._=_l),this}function Rc(){}function Lc(t){return t=bu(t),ei(function(e){return Wr(e,t)})}function Dc(t){return Ro(t)?T(Jo(t)):Yr(t)}function Nc(t){return function(e){return null==t?it:vr(t,e)}}function zc(){return[]}function Fc(){return!1}function Bc(){return{}}function Uc(){return""}function Vc(){return!0}function Gc(t,e){if((t=bu(t))<1||t>Rt)return[];var n=Nt,r=Hl(t,Nt);e=_o(e),t-=Nt;for(var i=P(r,e);++n<t;)e(n);return i}function Hc(t){return vh(t)?p(t,Jo):du(t)?[t]:Ri(Mf(Ou(t)))}function Wc(t){var e=++vl;return Ou(t)+e}function qc(t){return t&&t.length?ur(t,Cc,yr):it}function Zc(t,e){return t&&t.length?ur(t,_o(e,2),yr):it}function Xc(t){return O(t,Cc)}function Yc(t,e){return O(t,_o(e,2))}function Kc(t){return t&&t.length?ur(t,Cc,Fr):it}function Jc(t,e){return t&&t.length?ur(t,_o(e,2),Fr):it}function Qc(t){return t&&t.length?M(t,Cc):0}function $c(t,e){return t&&t.length?M(t,_o(e,2)):0}e=null==e?In:Yn.defaults(In.Object(),e,Yn.pick(In,xn));var tl=e.Array,el=e.Date,nl=e.Error,rl=e.Function,il=e.Math,ol=e.Object,al=e.RegExp,sl=e.String,ul=e.TypeError,cl=tl.prototype,ll=rl.prototype,fl=ol.prototype,hl=e["__core-js_shared__"],pl=ll.toString,dl=fl.hasOwnProperty,vl=0,ml=function(){var t=/[^.]+$/.exec(hl&&hl.keys&&hl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),gl=fl.toString,yl=pl.call(ol),_l=In._,bl=al("^"+pl.call(dl).replace(je,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xl=Dn?e.Buffer:it,wl=e.Symbol,El=e.Uint8Array,Sl=xl?xl.allocUnsafe:it,Ol=q(ol.getPrototypeOf,ol),Tl=ol.create,Al=fl.propertyIsEnumerable,Cl=cl.splice,kl=wl?wl.isConcatSpreadable:it,Ml=wl?wl.iterator:it,Pl=wl?wl.toStringTag:it,jl=function(){try{var t=wo(ol,"defineProperty");return t({},"",{}),t}catch(t){}}(),Il=e.clearTimeout!==In.clearTimeout&&e.clearTimeout,Rl=el&&el.now!==In.Date.now&&el.now,Ll=e.setTimeout!==In.setTimeout&&e.setTimeout,Dl=il.ceil,Nl=il.floor,zl=ol.getOwnPropertySymbols,Fl=xl?xl.isBuffer:it,Bl=e.isFinite,Ul=cl.join,Vl=q(ol.keys,ol),Gl=il.max,Hl=il.min,Wl=el.now,ql=e.parseInt,Zl=il.random,Xl=cl.reverse,Yl=wo(e,"DataView"),Kl=wo(e,"Map"),Jl=wo(e,"Promise"),Ql=wo(e,"Set"),$l=wo(e,"WeakMap"),tf=wo(ol,"create"),ef=$l&&new $l,nf={},rf=Qo(Yl),of=Qo(Kl),af=Qo(Jl),sf=Qo(Ql),uf=Qo($l),cf=wl?wl.prototype:it,lf=cf?cf.valueOf:it,ff=cf?cf.toString:it,hf=function(){function t(){}return function(e){if(!nu(e))return{};if(Tl)return Tl(e);t.prototype=e;var n=new t;return t.prototype=it,n}}();n.templateSettings={escape:Te,evaluate:Ae,interpolate:Ce,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=hf(r.prototype),i.prototype.constructor=i,y.prototype=hf(r.prototype),y.prototype.constructor=y,nt.prototype.clear=Le,nt.prototype.delete=Fe,nt.prototype.get=Qe,nt.prototype.has=$e,nt.prototype.set=tn,en.prototype.clear=nn,en.prototype.delete=rn,en.prototype.get=on,en.prototype.has=an,en.prototype.set=sn,un.prototype.clear=cn,un.prototype.delete=ln,un.prototype.get=fn,un.prototype.has=hn,un.prototype.set=pn,dn.prototype.add=dn.prototype.push=gn,dn.prototype.has=yn,_n.prototype.clear=bn,_n.prototype.delete=On,_n.prototype.get=Tn,_n.prototype.has=An,_n.prototype.set=Cn;var pf=Bi(hr),df=Bi(pr,!0),vf=Ui(),mf=Ui(!0),gf=ef?function(t,e){return ef.set(t,e),t}:Cc,yf=jl?function(t,e){return jl(t,"toString",{configurable:!0,enumerable:!1,value:Tc(e),writable:!0})}:Cc,_f=ei,bf=Il||function(t){return In.clearTimeout(t)},xf=Ql&&1/X(new Ql([,-0]))[1]==It?function(t){return new Ql(t)}:Rc,wf=ef?function(t){return ef.get(t)}:Rc,Ef=zl?function(t){return null==t?[]:(t=ol(t),l(zl(t),function(e){return Al.call(t,e)}))}:zc,Sf=zl?function(t){for(var e=[];t;)d(e,Ef(t)),t=Ol(t);return e}:zc,Of=gr;(Yl&&Of(new Yl(new ArrayBuffer(1)))!=ce||Kl&&Of(new Kl)!=Kt||Jl&&"[object Promise]"!=Of(Jl.resolve())||Ql&&Of(new Ql)!=ne||$l&&Of(new $l)!=ae)&&(Of=function(t){var e=gr(t),n=e==$t?t.constructor:it,r=n?Qo(n):"";if(r)switch(r){case rf:return ce;case of:return Kt;case af:return"[object Promise]";case sf:return ne;case uf:return ae}return e});var Tf=hl?$s:Fc,Af=Yo(gf),Cf=Ll||function(t,e){return In.setTimeout(t,e)},kf=Yo(yf),Mf=function(t){var e=ks(t,function(t){return n.size===lt&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Pe,function(t,n,r,i){e.push(r?i.replace(Ue,"$1"):n||t)}),e}),Pf=ei(function(t,e){return Ws(t)?ar(t,fr(e,1,Ws,!0)):[]}),jf=ei(function(t,e){var n=_a(e);return Ws(n)&&(n=it),Ws(t)?ar(t,fr(e,1,Ws,!0),_o(n,2)):[]}),If=ei(function(t,e){var n=_a(e);return Ws(n)&&(n=it),Ws(t)?ar(t,fr(e,1,Ws,!0),it,n):[]}),Rf=ei(function(t){var e=p(t,bi);return e.length&&e[0]===t[0]?wr(e):[]}),Lf=ei(function(t){var e=_a(t),n=p(t,bi);return e===_a(n)?e=it:n.pop(),n.length&&n[0]===t[0]?wr(n,_o(e,2)):[]}),Df=ei(function(t){var e=_a(t),n=p(t,bi);return e="function"==typeof e?e:it,e&&n.pop(),n.length&&n[0]===t[0]?wr(n,it,e):[]}),Nf=ei(wa),zf=po(function(t,e){var n=null==t?0:t.length,r=tr(t,e);return Jr(t,p(e,function(t){return jo(t,n)?+t:t}).sort(Mi)),r}),Ff=ei(function(t){return pi(fr(t,1,Ws,!0))}),Bf=ei(function(t){var e=_a(t);return Ws(e)&&(e=it),pi(fr(t,1,Ws,!0),_o(e,2))}),Uf=ei(function(t){var e=_a(t);return e="function"==typeof e?e:it,pi(fr(t,1,Ws,!0),it,e)}),Vf=ei(function(t,e){return Ws(t)?ar(t,e):[]}),Gf=ei(function(t){return yi(l(t,Ws))}),Hf=ei(function(t){var e=_a(t);return Ws(e)&&(e=it),yi(l(t,Ws),_o(e,2))}),Wf=ei(function(t){var e=_a(t);return e="function"==typeof e?e:it,yi(l(t,Ws),it,e)}),qf=ei(Ha),Zf=ei(function(t){var e=t.length,n=e>1?t[e-1]:it;return n="function"==typeof n?(t.pop(),n):it,Wa(t,n)}),Xf=po(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return tr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof y&&jo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:Ka,args:[o],thisArg:it}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(it),t})):this.thru(o)}),Yf=zi(function(t,e,n){dl.call(t,n)?++t[n]:$n(t,n,1)}),Kf=Zi(ca),Jf=Zi(la),Qf=zi(function(t,e,n){dl.call(t,n)?t[n].push(e):$n(t,n,[e])}),$f=ei(function(t,e,n){var r=-1,i="function"==typeof e,a=Hs(t)?tl(t.length):[];return pf(t,function(t){a[++r]=i?o(e,t,n):Sr(t,e,n)}),a}),th=zi(function(t,e,n){$n(t,n,e)}),eh=zi(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),nh=ei(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Io(t,e[0],e[1])?e=[]:n>2&&Io(e[0],e[1],e[2])&&(e=[e[0]]),qr(t,fr(e,1),[])}),rh=Rl||function(){return In.Date.now()},ih=ei(function(t,e,n){var r=gt;if(n.length){var i=Z(n,yo(ih));r|=wt}return ao(t,r,e,n,i)}),oh=ei(function(t,e,n){var r=gt|yt;if(n.length){var i=Z(n,yo(oh));r|=wt}return ao(e,r,t,n,i)}),ah=ei(function(t,e){return or(t,1,e)}),sh=ei(function(t,e,n){return or(t,wu(e)||0,n)});ks.Cache=un;var uh=_f(function(t,e){e=1==e.length&&vh(e[0])?p(e[0],R(_o())):p(fr(e,1),R(_o()));var n=e.length;return ei(function(r){for(var i=-1,a=Hl(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)})}),ch=ei(function(t,e){var n=Z(e,yo(ch));return ao(t,wt,it,e,n)}),lh=ei(function(t,e){var n=Z(e,yo(lh));return ao(t,Et,it,e,n)}),fh=po(function(t,e){return ao(t,Ot,it,it,it,e)}),hh=no(yr),ph=no(function(t,e){return t>=e}),dh=Or(function(){return arguments}())?Or:function(t){return ru(t)&&dl.call(t,"callee")&&!Al.call(t,"callee")},vh=tl.isArray,mh=Fn?R(Fn):Tr,gh=Fl||Fc,yh=Bn?R(Bn):Ar,_h=Un?R(Un):Mr,bh=Vn?R(Vn):Ir,xh=Gn?R(Gn):Rr,wh=Hn?R(Hn):Lr,Eh=no(Fr),Sh=no(function(t,e){return t<=e}),Oh=Fi(function(t,e){if(zo(e)||Hs(e))return void Li(e,zu(e),t);for(var n in e)dl.call(e,n)&&zn(t,n,e[n])}),Th=Fi(function(t,e){Li(e,Fu(e),t)}),Ah=Fi(function(t,e,n,r){Li(e,Fu(e),t,r)}),Ch=Fi(function(t,e,n,r){Li(e,zu(e),t,r)}),kh=po(tr),Mh=ei(function(t,e){t=ol(t);var n=-1,r=e.length,i=r>2?e[2]:it;for(i&&Io(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Fu(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===it||Gs(l,fl[c])&&!dl.call(t,c))&&(t[c]=o[c])}return t}),Ph=ei(function(t){return t.push(it,uo),o(Dh,it,t)}),jh=Ki(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=gl.call(e)),t[e]=n},Tc(Cc)),Ih=Ki(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=gl.call(e)),dl.call(t,e)?t[e].push(n):t[e]=[n]},_o),Rh=ei(Sr),Lh=Fi(function(t,e,n){Gr(t,e,n)}),Dh=Fi(function(t,e,n,r){Gr(t,e,n,r)}),Nh=po(function(t,e){var n={};if(null==t)return n;var r=!1;e=p(e,function(e){return e=wi(e,t),r||(r=e.length>1),e}),Li(t,mo(t),n),r&&(n=nr(n,ht|pt|dt,co));for(var i=e.length;i--;)di(n,e[i]);return n}),zh=po(function(t,e){return null==t?{}:Zr(t,e)}),Fh=oo(zu),Bh=oo(Fu),Uh=Hi(function(t,e,n){return e=e.toLowerCase(),t+(n?nc(e):e)}),Vh=Hi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Gh=Hi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Hh=Gi("toLowerCase"),Wh=Hi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),qh=Hi(function(t,e,n){return t+(n?" ":"")+Xh(e)}),Zh=Hi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xh=Gi("toUpperCase"),Yh=ei(function(t,e){try{return o(t,it,e)}catch(t){return Js(t)?t:new nl(t)}}),Kh=po(function(t,e){return s(e,function(e){e=Jo(e),$n(t,e,ih(t[e],t))}),t}),Jh=Xi(),Qh=Xi(!0),$h=ei(function(t,e){return function(n){return Sr(n,t,e)}}),tp=ei(function(t,e){return function(n){return Sr(t,n,e)}}),ep=Qi(p),np=Qi(c),rp=Qi(g),ip=eo(),op=eo(!0),ap=Ji(function(t,e){return t+e},0),sp=io("ceil"),up=Ji(function(t,e){return t/e},1),cp=io("floor"),lp=Ji(function(t,e){return t*e},1),fp=io("round"),hp=Ji(function(t,e){return t-e},0);return n.after=ws,n.ary=Es,n.assign=Oh,n.assignIn=Th,n.assignInWith=Ah,n.assignWith=Ch,n.at=kh,n.before=Ss,n.bind=ih,n.bindAll=Kh,n.bindKey=oh,n.castArray=Ns,n.chain=Xa,n.chunk=ea,n.compact=na,n.concat=ra,n.cond=Sc,n.conforms=Oc,n.constant=Tc,n.countBy=Yf,n.create=Tu,n.curry=Os,n.curryRight=Ts,n.debounce=As,n.defaults=Mh,n.defaultsDeep=Ph,n.defer=ah,n.delay=sh,n.difference=Pf,n.differenceBy=jf,n.differenceWith=If,n.drop=ia,n.dropRight=oa,n.dropRightWhile=aa,n.dropWhile=sa,n.fill=ua,n.filter=os,n.flatMap=as,n.flatMapDeep=ss,n.flatMapDepth=us,n.flatten=fa,n.flattenDeep=ha,n.flattenDepth=pa,n.flip=Cs,n.flow=Jh,n.flowRight=Qh,n.fromPairs=da,n.functions=Iu,n.functionsIn=Ru,n.groupBy=Qf,n.initial=ga,n.intersection=Rf,n.intersectionBy=Lf,n.intersectionWith=Df,n.invert=jh,n.invertBy=Ih,n.invokeMap=$f,n.iteratee=kc,n.keyBy=th,n.keys=zu,n.keysIn=Fu,n.map=hs,n.mapKeys=Bu,n.mapValues=Uu,n.matches=Mc,n.matchesProperty=Pc,n.memoize=ks,n.merge=Lh,n.mergeWith=Dh,n.method=$h,n.methodOf=tp,n.mixin=jc,n.negate=Ms,n.nthArg=Lc,n.omit=Nh,n.omitBy=Vu,n.once=Ps,n.orderBy=ps,n.over=ep,n.overArgs=uh,n.overEvery=np,n.overSome=rp,n.partial=ch,n.partialRight=lh,n.partition=eh,n.pick=zh,n.pickBy=Gu,n.property=Dc,n.propertyOf=Nc,n.pull=Nf,n.pullAll=wa,n.pullAllBy=Ea,n.pullAllWith=Sa,n.pullAt=zf,n.range=ip,n.rangeRight=op,n.rearg=fh,n.reject=ms,n.remove=Oa,n.rest=js,n.reverse=Ta,n.sampleSize=ys,n.set=Wu,n.setWith=qu,n.shuffle=_s,n.slice=Aa,n.sortBy=nh,n.sortedUniq=Ra,n.sortedUniqBy=La,n.split=pc,n.spread=Is,n.tail=Da,n.take=Na,n.takeRight=za,n.takeRightWhile=Fa,n.takeWhile=Ba,n.tap=Ya,n.throttle=Rs,n.thru=Ka,n.toArray=yu,n.toPairs=Fh,n.toPairsIn=Bh,n.toPath=Hc,n.toPlainObject=Eu,n.transform=Zu,n.unary=Ls,n.union=Ff,n.unionBy=Bf,n.unionWith=Uf,n.uniq=Ua,n.uniqBy=Va,n.uniqWith=Ga,n.unset=Xu,n.unzip=Ha,n.unzipWith=Wa,n.update=Yu,n.updateWith=Ku,n.values=Ju,n.valuesIn=Qu,n.without=Vf,n.words=Ec,n.wrap=Ds,n.xor=Gf,n.xorBy=Hf,n.xorWith=Wf,n.zip=qf,n.zipObject=qa,n.zipObjectDeep=Za,n.zipWith=Zf,n.entries=Fh,n.entriesIn=Bh,n.extend=Th,n.extendWith=Ah,jc(n,n),n.add=ap,n.attempt=Yh,n.camelCase=Uh,n.capitalize=nc,n.ceil=sp,n.clamp=$u,n.clone=zs,n.cloneDeep=Bs,n.cloneDeepWith=Us,n.cloneWith=Fs,n.conformsTo=Vs,n.deburr=rc,n.defaultTo=Ac,n.divide=up,n.endsWith=ic,n.eq=Gs,n.escape=oc,n.escapeRegExp=ac,n.every=is,n.find=Kf,n.findIndex=ca,n.findKey=Au,n.findLast=Jf,n.findLastIndex=la,n.findLastKey=Cu,n.floor=cp,n.forEach=cs,n.forEachRight=ls,n.forIn=ku,n.forInRight=Mu,n.forOwn=Pu,n.forOwnRight=ju,n.get=Lu,n.gt=hh,n.gte=ph,n.has=Du,n.hasIn=Nu,n.head=va,n.identity=Cc,n.includes=fs,n.indexOf=ma,n.inRange=tc,n.invoke=Rh,n.isArguments=dh,n.isArray=vh,n.isArrayBuffer=mh,n.isArrayLike=Hs,n.isArrayLikeObject=Ws,n.isBoolean=qs,n.isBuffer=gh,n.isDate=yh,n.isElement=Zs,n.isEmpty=Xs,n.isEqual=Ys,n.isEqualWith=Ks,n.isError=Js,n.isFinite=Qs,n.isFunction=$s,n.isInteger=tu,n.isLength=eu,n.isMap=_h,n.isMatch=iu,n.isMatchWith=ou,n.isNaN=au,n.isNative=su,n.isNil=cu,n.isNull=uu,n.isNumber=lu,n.isObject=nu,n.isObjectLike=ru,n.isPlainObject=fu,n.isRegExp=bh,n.isSafeInteger=hu,n.isSet=xh,n.isString=pu,n.isSymbol=du,n.isTypedArray=wh,n.isUndefined=vu,n.isWeakMap=mu,n.isWeakSet=gu,n.join=ya,n.kebabCase=Vh,n.last=_a,n.lastIndexOf=ba,n.lowerCase=Gh,n.lowerFirst=Hh,n.lt=Eh,n.lte=Sh,n.max=qc,n.maxBy=Zc,n.mean=Xc,n.meanBy=Yc,n.min=Kc,n.minBy=Jc,n.stubArray=zc,n.stubFalse=Fc,n.stubObject=Bc,n.stubString=Uc,n.stubTrue=Vc,n.multiply=lp,n.nth=xa,n.noConflict=Ic,n.noop=Rc,n.now=rh,n.pad=sc,n.padEnd=uc,n.padStart=cc,n.parseInt=lc,n.random=ec,n.reduce=ds,n.reduceRight=vs,n.repeat=fc,n.replace=hc,n.result=Hu,n.round=fp,n.runInContext=t,n.sample=gs,n.size=bs,n.snakeCase=Wh,n.some=xs,n.sortedIndex=Ca,n.sortedIndexBy=ka,n.sortedIndexOf=Ma,n.sortedLastIndex=Pa,n.sortedLastIndexBy=ja,n.sortedLastIndexOf=Ia,n.startCase=qh,n.startsWith=dc,n.subtract=hp,n.sum=Qc,n.sumBy=$c,n.template=vc,n.times=Gc,n.toFinite=_u,n.toInteger=bu,n.toLength=xu,n.toLower=mc,n.toNumber=wu,n.toSafeInteger=Su,n.toString=Ou,n.toUpper=gc,n.trim=yc,n.trimEnd=_c,n.trimStart=bc,n.truncate=xc,n.unescape=wc,n.uniqueId=Wc,n.upperCase=Zh,n.upperFirst=Xh,n.each=cs,n.eachRight=ls,n.first=va,jc(n,function(){var t={};return hr(n,function(e,r){dl.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.21",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),s(["drop","take"],function(t,e){y.prototype[t]=function(n){n=n===it?1:Gl(bu(n),0);var r=this.__filtered__&&!e?new y(this):this.clone();return r.__filtered__?r.__takeCount__=Hl(n,r.__takeCount__):r.__views__.push({size:Hl(n,Nt),type:t+(r.__dir__<0?"Right":"")}),r},y.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==Pt||3==n;y.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:_o(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),s(["head","last"],function(t,e){var n="take"+(e?"Right":"");y.prototype[t]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");y.prototype[t]=function(){return this.__filtered__?new y(this):this[n](1)}}),y.prototype.compact=function(){return this.filter(Cc)},y.prototype.find=function(t){return this.filter(t).head()},y.prototype.findLast=function(t){return this.reverse().find(t)},y.prototype.invokeMap=ei(function(t,e){return"function"==typeof t?new y(this):this.map(function(n){return Sr(n,t,e)})}),y.prototype.reject=function(t){return this.filter(Ms(_o(t)))},y.prototype.slice=function(t,e){t=bu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new y(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==it&&(e=bu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},y.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},y.prototype.toArray=function(){return this.take(Nt)},hr(y.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof y,l=u[0],f=c||vh(e),h=function(t){var e=a.apply(n,d([t],u));return o&&p?e[0]:e};f&&r&&"function"==typeof l&&1!=l.length&&(c=f=!1);var p=this.__chain__,v=!!this.__actions__.length,m=s&&!p,g=c&&!v;if(!s&&f){e=g?e:new y(this);var _=t.apply(e,u);return _.__actions__.push({func:Ka,args:[h],thisArg:it}),new i(_,p)}return m&&g?t.apply(this,u):(_=this.thru(h),m?o?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=cl[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(vh(n)?n:[],t)}return this[r](function(n){return e.apply(vh(n)?n:[],t)})}}),hr(y.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";dl.call(nf,i)||(nf[i]=[]),nf[i].push({name:e,func:r})}}),nf[Yi(it,yt).name]=[{name:"wrapper",func:it}],y.prototype.clone=A,y.prototype.reverse=K,y.prototype.value=et,n.prototype.at=Xf,n.prototype.chain=Ja,n.prototype.commit=Qa,n.prototype.next=$a,n.prototype.plant=es,n.prototype.reverse=ns,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=rs,n.prototype.first=n.prototype.head,Ml&&(n.prototype[Ml]=ts),n}();In._=Yn,(i=function(){return Yn}.call(e,n,e,r))!==it&&(r.exports=i)}).call(this)}).call(e,n(80),n(189)(t))},function(t,e,n){"use strict";function r(t){return Object(i.a)(t)||Object(o.a)(t)||Object(a.a)(t)||Object(s.a)()}e.a=r;var i=n(744),o=n(745),a=n(392),s=n(746)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){"use strict";function r(t){var e=Object(A.q)(t.coordinates);return{vertices:[].concat(Object(T.a)(e),Object(T.a)(e),Object(T.a)(e),Object(T.a)(e)),indices:[0,1,2,2,3,0],size:e.length}}function i(t){var e=Object(A.q)(t.coordinates),n=Object(M.d)(e);return{vertices:[].concat(Object(T.a)(n),Object(T.a)(n),Object(T.a)(n),Object(T.a)(n)),indices:[0,1,2,2,3,0],size:n.length}}function o(t){var e=t.shape,n=x(e,!1);return{vertices:n.positions,indices:n.index,normals:n.normals,size:5}}function a(t){var e=Object(A.q)(t.coordinates);return{vertices:Object(T.a)(e),indices:[0],size:e.length}}function s(t){var e=t.coordinates,n=t.originCoordinates,r=t.version,i=new P.a({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=e;Array.isArray(o[0][0])||(o=[e]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var l=e;l[0]&&!Array.isArray(l[0][0])&&(l=[e]),l.forEach(function(t){i.extrude(t)})}var f=i.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function u(t){var e=t.coordinates.flat();return{vertices:[1,0,0].concat(Object(T.a)(e),[1,2,-3],Object(T.a)(e),[1,1,-3],Object(T.a)(e),[0,1,0],Object(T.a)(e),[0,0,0],Object(T.a)(e),[1,0,0],Object(T.a)(e),[1,2,-3],Object(T.a)(e),[1,1,-3],Object(T.a)(e),[0,1,0],Object(T.a)(e),[0,0,0],Object(T.a)(e)),normals:[-1,2,1,2,-1,1,1,-1,1,1,-1,1,-1,-1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function c(t){var e=t.coordinates,n=[];if(!Array.isArray(e[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};var r=h(e),i=r.results,o=r.totalDistance;return i.map(function(t){n.push(t[0],t[1],t[2],t[3],0,o)}),{vertices:n,indices:[],normals:[],size:6,count:i.length}}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function f(t,e){return t.length<3&&t.push(0),void 0!==e&&t.push(e),t}function h(t){var e=t;Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[0][0])&&(e=t.flat());var n=0;if(e.length<2)return{results:e,totalDistance:0};var r=[],i=f(e[0],n);r.push(i);for(var o=1;o<e.length-1;o++){n+=l(e[o-1],e[o]);var a=f(e[o],n);r.push(a),r.push(a)}return n+=l(e[e.length-2],e[e.length-1]),r.push(f(e[e.length-1],n)),{results:r,totalDistance:n}}function p(t){var e=t.coordinates,n=k.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:k()(r,o,i),vertices:r,size:i}}function d(t){var e=t.coordinates,n=k.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:k()(r,o,i),vertices:v(r),size:i+4}}function v(t){for(var e=[],n=Object(A.r)(t),r=n.center,i=n.radius,o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];e.push.apply(e,[a,s,0].concat(Object(T.a)(r),[i]))}return e}function m(t){var e=t.coordinates,n=Object(j.b)(e,!0);return{vertices:n.positions,indices:n.index,normals:n.normals,size:5}}function g(t){var e=t.shape,n=w(e);return{vertices:n.positions,indices:n.index,size:3}}function y(t){var e=t.coordinates;return{vertices:[].concat(Object(T.a)(e[0]),[0,0,1,e[1][0],e[0][1],0,1,1],Object(T.a)(e[1]),[0,1,0],Object(T.a)(e[0]),[0,0,1],Object(T.a)(e[1]),[0,1,0,e[0][0],e[1][1],0,0,0]),indices:[0,1,2,3,4,5],size:5}}function _(t,e){for(var n=e||30,r=t.coordinates,i=[],o=[],a=0;a<n;a++)!function(t){i.push(t,1,t,r[0][0],r[0][1],r[1][0],r[1][1],t,-1,t,r[0][0],r[0][1],r[1][0],r[1][1]),t!==n-1&&o.push.apply(o,Object(T.a)([0,1,2,1,3,2].map(function(e){return 2*t+e})))}(a);return{vertices:i,indices:o,size:7}}function b(t){var e=t.coordinates;2===e.length&&e.push(0);var n=E(-1,1),r=E(1,1),i=E(-1,-1),o=E(1,-1);return{vertices:[].concat(Object(T.a)(e),Object(T.a)(n),Object(T.a)(e),Object(T.a)(i),Object(T.a)(e),Object(T.a)(o),Object(T.a)(e),Object(T.a)(r)),indices:[0,1,2,3,0,2],size:5}}function x(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(R&&R[t])return R[t];var n=I.a[t]?I.a[t]():I.a.cylinder(),r=Object(j.b)([n],e);return R[t]=r,r}function w(t){var e=["cylinder","triangleColumn","hexagonColumn","squareColumn"],n=I.a[t]?I.a[t]():I.a.circle();return-1===e.indexOf(t)?Object(j.c)([n]):Object(j.a)([n])}function E(t,e){return[(t+1)/2,(e+1)/2]}function S(){var t=Object(M.e)(M.a,{segments:M.c});return{vertices:t.positionsArr,indices:t.indicesArr,size:5,normals:t.normalArr}}function O(){var t=Object(M.e)(M.a+M.b,{segments:M.c});return{vertices:t.positionsArr,indices:t.indicesArr,size:5,normals:t.normalArr}}e.h=r,e.b=i,e.g=o,e.i=a,e.f=s,e.a=u,e.l=c,e.o=p,e.p=d,e.j=m,e.c=g,e.k=y,e.e=_,e.d=b,e.n=S,e.m=O;var T=(n(15),n(20)),A=n(9),C=n(279),k=n.n(C),M=(n(36),n(208)),P=n(1088),j=n(1089),I=n(1090),R={}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=r},function(t,e,n){"use strict";var r=n(71),i=r;t.exports=i},function(t,e,n){var r=n(166)("wks"),i=n(120),o=n(21).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e,n){var r=n(69),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){t.exports=!n(23)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";function r(t,e){return 1===t.nodeType&&t.getAttribute(d)===String(e)||8===t.nodeType&&t.nodeValue===" react-text: "+e+" "||8===t.nodeType&&t.nodeValue===" react-empty: "+e+" "}function i(t){for(var e;e=t._renderedComponent;)t=e;return t}function o(t,e){var n=i(t);n._hostNode=e,e[m]=n}function a(t){var e=t._hostNode;e&&(delete e[m],t._hostNode=null)}function s(t,e){if(!(t._flags&v.hasCachedChildNodes)){var n=t._renderedChildren,a=e.firstChild;t:for(var s in n)if(n.hasOwnProperty(s)){var u=n[s],c=i(u)._domID;if(0!==c){for(;null!==a;a=a.nextSibling)if(r(a,c)){o(u,a);continue t}f("32",c)}}t._flags|=v.hasCachedChildNodes}}function u(t){if(t[m])return t[m];for(var e=[];!t[m];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,r;t&&(r=t[m]);t=e.pop())n=r,e.length&&s(r,t);return n}function c(t){var e=u(t);return null!=e&&e._hostNode===t?e:null}function l(t){if(void 0===t._hostNode&&f("33"),t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent||f("34"),t=t._hostParent;for(;e.length;t=e.pop())s(t,t._hostNode);return t._hostNode}var f=n(25),h=n(132),p=n(345),d=(n(18),h.ID_ATTRIBUTE_NAME),v=p,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:u,getInstanceFromNode:c,getNodeFromInstance:l,precacheChildNodes:s,precacheNode:o,uncacheNode:a};t.exports=g},function(t,e,n){"use strict";function r(){return r="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=Object(i.a)(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},r.apply(this,arguments)}e.a=r;var i=n(885)},function(t,e,n){var r=n(17),i=n(516),o=n(76),a=Object.defineProperty;e.f=n(30)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(77);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";t.exports=n(130)},function(t,e,n){"use strict";var r=(n(74),n(813)),i=(n(814),n(415),n(193)),o=(n(416),n(815),n(194)),a=n(280),s=n(281);n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return s})},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,r||t,o),s=c?c+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}var u=Object.prototype.hasOwnProperty,c="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(c=!1)),s.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)u.call(t,e)&&n.push(c?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},s.prototype.listeners=function(t){var e=c?c+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},s.prototype.listenerCount=function(t){var e=c?c+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,r,i,o){var a=c?c+t:t;if(!this._events[a])return!1;var s,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(u=1,s=new Array(f-1);u<f;u++)s[u-1]=arguments[u];l.fn.apply(l.context,s)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!s)for(h=1,s=new Array(f-1);h<f;h++)s[h-1]=arguments[h];l[u].fn.apply(l[u].context,s)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,n,r){var i=c?c+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||a(this,i);else{for(var s=0,u=[],l=o.length;s<l;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&u.push(o[s]);u.length?this._events[i]=1===u.length?u[0]:u:a(this,i)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=c?c+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=c,s.EventEmitter=s,t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=function(){return[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]}()},function(t,e,n){"use strict";function r(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}e.a=r},function(t,e,n){"use strict";function r(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}e.a=r},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),IDebugService:Symbol.for("IDebugService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")}},function(t,e,n){"use strict";function r(t,e,n,a){function s(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return s.floor=function(e){return t(e=new Date(+e)),e},s.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},s.range=function(n,r,i){var o,a=[];if(n=s.ceil(n),i=null==i?1:Math.floor(i),!(n<r)||!(i>0))return a;do{a.push(o=new Date(+n)),e(n,i),t(n)}while(o<n&&n<r);return a},s.filter=function(n){return r(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(s.count=function(e,r){return i.setTime(+e),o.setTime(+r),t(i),t(o),Math.floor(n(i,o))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(a?function(e){return a(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}e.a=r;var i=new Date,o=new Date},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=s();return function(){var n,r=Object(b.a)(t);if(e){var i=Object(b.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(_.a)(this,n)}}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return F});var u,c,l,f=n(49),h=n(7),p=n(10),d=n(39),v=n(0),m=n(1),g=n(12),y=n(3),_=n(4),b=n(2),x=n(6),w=n(40),E=(n(41),n(8)),S=n.n(E),O=n(286),T=n(11),A=n(183),C=n(9),k=n(37),M=(n.n(k),n(19)),P=(n.n(M),n(439)),j=n(957),I=n(472),R=n(1080),L=n(1081),D=["passes"],N=["moduleName","vertexShader","fragmentShader","inject","triangulation","segmentNumber"],z=0,F=(u=Object(T.u)(T.p.IGlobalConfigService),c=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(v.a)(this,e),t=n.call(this),Object(x.a)(Object(g.a)(t),"id","".concat(z++)),Object(x.a)(Object(g.a)(t),"name","".concat(z)),Object(x.a)(Object(g.a)(t),"visible",!0),Object(x.a)(Object(g.a)(t),"zIndex",0),Object(x.a)(Object(g.a)(t),"inited",!1),Object(x.a)(Object(g.a)(t),"layerModelNeedUpdate",!1),Object(x.a)(Object(g.a)(t),"pickedFeatureID",null),Object(x.a)(Object(g.a)(t),"selectedFeatureID",null),Object(x.a)(Object(g.a)(t),"styleNeedUpdate",!1),Object(x.a)(Object(g.a)(t),"forceRender",!1),Object(x.a)(Object(g.a)(t),"clusterZoom",0),Object(x.a)(Object(g.a)(t),"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),Object(x.a)(Object(g.a)(t),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),Object(x.a)(Object(g.a)(t),"hooks",{init:new O.a,afterInit:new O.d,beforeRender:new O.d,beforeRenderData:new O.c,afterRender:new O.e,beforePickingEncode:new O.e,afterPickingEncode:new O.e,beforeHighlight:new O.e(["pickedColor"]),afterHighlight:new O.e,beforeSelect:new O.e(["pickedColor"]),afterSelect:new O.e,beforeDestroy:new O.e,afterDestroy:new O.e}),Object(x.a)(Object(g.a)(t),"models",[]),Object(x.a)(Object(g.a)(t),"startInit",!1),Object(x.a)(Object(g.a)(t),"layerChildren",[]),Object(x.a)(Object(g.a)(t),"masks",[]),Object(d.a)(Object(g.a)(t),"configService",l,Object(g.a)(t)),Object(x.a)(Object(g.a)(t),"animateOptions",{enable:!1}),Object(x.a)(Object(g.a)(t),"currentPickId",null),Object(x.a)(Object(g.a)(t),"encodeStyleAttribute",{}),Object(x.a)(Object(g.a)(t),"enableEncodeStyles",[]),Object(x.a)(Object(g.a)(t),"pendingStyleAttributes",[]),Object(x.a)(Object(g.a)(t),"scaleOptions",{}),Object(x.a)(Object(g.a)(t),"animateStatus",!1),Object(x.a)(Object(g.a)(t),"isDestroyed",!1),Object(x.a)(Object(g.a)(t),"encodeDataLength",0),Object(x.a)(Object(g.a)(t),"sourceEvent",function(){t.dataState.dataSourceNeedUpdate=!0;var e=t.getLayerConfig();e&&e.autoFit&&t.fitBounds(e.fitBoundsOptions),t.layerSource.getSourceCfg().autoRender&&t.reRender()}),t.name=r.name||t.id,t.zIndex=r.zIndex||0,t.rawConfig=r,t}Object(y.a)(e,t);var n=a(e);return Object(m.a)(e,[{key:"addMask",value:function(t){this.masks.push(t),this.enableMask()}},{key:"removeMask",value:function(t){var e=this.masks.indexOf(t);e>-1&&this.masks.splice(e,1)}},{key:"disableMask",value:function(){this.updateLayerConfig({enableMask:!1})}},{key:"enableMask",value:function(){this.updateLayerConfig({enableMask:!0})}},{key:"addMaskLayer",value:function(t){this.masks.push(t)}},{key:"removeMaskLayer",value:function(t){var e=this.masks.indexOf(t);e>-1&&this.masks.splice(e,1),t.destroy()}},{key:"getAttribute",value:function(t){return this.styleAttributeService.getLayerStyleAttribute(t)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(t){var e=this;if(Object.keys(t).map(function(n){n in e.rawConfig&&(e.rawConfig[n]=t[n])}),this.startInit){var n=this.container.get(T.p.SceneID);this.configService.setLayerConfig(n,this.id,Object(p.a)(Object(p.a)(Object(p.a)({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),t)),this.needUpdateConfig={}}else this.needUpdateConfig=Object(p.a)(Object(p.a)({},this.needUpdateConfig),t)}},{key:"setContainer",value:function(t,e){this.container=t,this.sceneContainer=e}},{key:"getContainer",value:function(){return this.container}},{key:"addPlugin",value:function(t){return this.plugins.push(t),this}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(){var e,n,i,o,a,s,u,c=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.container.get(T.p.SceneID),this.startInit=!0,this.configService.setLayerConfig(e,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(T.p.IIconService),this.fontService=this.container.get(T.p.IFontService),this.rendererService=this.container.get(T.p.IRendererService),this.layerService=this.container.get(T.p.ILayerService),this.debugService=this.container.get(T.p.IDebugService),this.interactionService=this.container.get(T.p.IInteractionService),this.pickingService=this.container.get(T.p.IPickingService),this.mapService=this.container.get(T.p.IMapService),n=this.getLayerConfig(),i=n.enableMultiPassRenderer,o=n.passes,i&&null!==o&&void 0!==o&&o.length&&o.length>0&&this.mapService.on("mapAfterFrameChange",function(){c.renderLayers()}),this.cameraService=this.container.get(T.p.ICameraService),this.coordinateService=this.container.get(T.p.ICoordinateSystemService),this.shaderModuleService=this.container.get(T.p.IShaderModuleService),this.postProcessingPassFactory=this.container.get(T.p.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(T.p.IFactoryNormalPass),this.styleAttributeService=this.container.get(T.p.IStyleAttributeService),i&&(this.multiPassRenderer=this.container.get(T.p.IMultiPassRenderer),this.multiPassRenderer.setLayer(this)),this.pendingStyleAttributes.forEach(function(t){var e=t.attributeName,n=t.attributeField,r=t.attributeValues,i=t.updateOptions;c.styleAttributeService.updateStyleAttribute(e,{scale:Object(p.a)({field:n},c.splitValuesAndCallbackInAttribute(r,c.getLayerConfig()[e]))},i)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(T.p.ILayerPlugin),a=r(this.plugins);try{for(a.s();!(s=a.n()).done;)u=s.value,u.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}catch(t){a.e(t)}finally{a.f()}return this.layerPickService=new R.a(this),this.textureService=new L.a(this),this.log(T.f.LayerInitStart),t.next=31,this.hooks.init.promise();case 31:this.log(T.f.LayerInitEnd),this.inited=!0,this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this.hooks.afterInit.call();case 36:case"end":return t.stop()}},t,this)}));return t}()},{key:"log",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";if(!this.tileLayer&&!this.isTileLayer){var r="".concat(this.id,".").concat(n,".").concat(t),i={id:this.id,type:this.type};null===(e=this.debugService)||void 0===e||e.log(r,i)}}},{key:"updateModelData",value:function(t){t.attributes&&t.elements?this.models.map(function(e){e.updateAttributesAndElements(t.attributes,t.elements)}):console.warn("data error")}},{key:"createModelData",value:function(t,e){var n;if(null!==(n=this.layerModel)&&void 0!==n&&n.createModelData)return this.layerModel.createModelData(e);var r=this.calculateEncodeData(t,e),i=this.triangulation;return r&&i?this.styleAttributeService.createAttributesAndIndices(r,i):{attributes:void 0,elements:void 0}}},{key:"setLayerPickService",value:function(t){this.layerPickService=t}},{key:"calculateEncodeData",value:function(t,e){return this.inited?Object(j.a)(this,this.fontService,this.mapService,this.styleAttributeService,t,e):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){0!==Object.keys(this.needUpdateConfig||{}).length&&this.updateLayerConfig({});var t=this.getLayerConfig(),e=t.animateOption;null!==e&&void 0!==e&&e.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}},{key:"color",value:function(t,e,n){return this.updateStyleAttribute("color",t,e,n),this}},{key:"texture",value:function(t,e,n){return this.updateStyleAttribute("texture",t,e,n),this}},{key:"rotate",value:function(t,e,n){return this.updateStyleAttribute("rotate",t,e,n),this}},{key:"size",value:function(t,e,n){return this.updateStyleAttribute("size",t,e,n),this}},{key:"filter",value:function(t,e,n){var r=this.updateStyleAttribute("filter",t,e,n);return this.dataState.dataSourceNeedUpdate=r&&this.inited,this}},{key:"shape",value:function(t,e,n){this.shapeOption={field:t,values:e};var r=this.updateStyleAttribute("shape",t,e,n);return this.dataState.dataSourceNeedUpdate=r&&this.inited,this}},{key:"label",value:function(t,e,n){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:t,attributeValues:e,updateOptions:n}),this}},{key:"animate",value:function(t){var e={};return Object(M.isObject)(t)?(e.enable=!0,e=Object(p.a)(Object(p.a)({},e),t)):e.enable=t,this.updateLayerConfig({animateOption:e}),this}},{key:"source",value:function(t,e){return"source"===(null===t||void 0===t?void 0:t.type)?(this.setSource(t),this):(this.sourceOption={data:t,options:e},this.clusterZoom=0,this)}},{key:"setData",value:function(t,e){var n=this;return this.inited?(this.log(T.f.SourceInitStart,T.g.UPDATE),this.layerSource.setData(t,e),this.log(T.f.SourceInitEnd,T.g.UPDATE)):this.on("inited",function(){n.log(T.f.SourceInitStart,T.g.UPDATE),n.getSource()?n.layerSource.setData(t,e):n.source(new A.a(t,e)),n.layerSource.once("update",function(){n.log(T.f.SourceInitEnd,T.g.UPDATE)})}),this}},{key:"style",value:function(t){var e=this,n=t.passes,r=Object(f.a)(t,D);n&&Object(I.b)(n).forEach(function(t){var n=e.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(t[0]);n&&n.updateOptions(t[1])});var i=r;return Object.keys(r).forEach(function(t){var e=r[t];!Array.isArray(e)||2!==e.length||Object(M.isNumber)(e[0])||Object(M.isNumber)(e[1])||(i[t]={field:e[0],value:e[1]})}),this.encodeStyle(i),this.updateLayerConfig(i),this}},{key:"encodeStyle",value:function(t){var e=this;Object.keys(t).forEach(function(n){e.enableEncodeStyles.includes(n)&&Object(M.isPlainObject)(t[n])&&(t[n].field||t[n].value)&&!Object(M.isEqual)(e.encodeStyleAttribute[n],t[n])?(e.encodeStyleAttribute[n]=t[n],e.updateStyleAttribute(n,t[n].field,t[n].value),e.styleNeedUpdate=!0):e.encodeStyleAttribute[n]&&delete e.encodeStyleAttribute[n]})}},{key:"scale",value:function(t,e){var n=Object(p.a)({},this.scaleOptions);if(Object(M.isObject)(t)?this.scaleOptions=Object(p.a)(Object(p.a)({},this.scaleOptions),t):this.scaleOptions[t]=e,this.styleAttributeService&&!Object(M.isEqual)(n,this.scaleOptions)){var r=Object(M.isObject)(t)?t:Object(x.a)({},t,e);this.styleAttributeService.updateScaleAttribute(r)}return this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(t),this))}},{key:"renderMultiPass",value:function(){function t(){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.encodeDataLength<=0)||this.forceRender){t.next=2;break}return t.abrupt("return");case 2:if(!this.multiPassRenderer||!this.multiPassRenderer.getRenderFlag()){t.next=7;break}return t.next=5,this.multiPassRenderer.render();case 5:t.next=8;break;case 7:this.multiPassRenderer,this.renderModels();case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"active",value:function(t){var e={};return e.enableHighlight=!!Object(M.isObject)(t)||t,Object(M.isObject)(t)?(e.enableHighlight=!0,t.color&&(e.highlightColor=t.color),t.mix&&(e.activeMix=t.mix)):e.enableHighlight=!!t,this.updateLayerConfig(e),this}},{key:"setActive",value:function(t,e){var n=this;if(Object(M.isObject)(t)){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;this.updateLayerConfig({highlightColor:Object(M.isObject)(e)?e.color:this.getLayerConfig().highlightColor,activeMix:Object(M.isObject)(e)?e.mix:this.getLayerConfig().activeMix}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:t,highlightColor:Object(M.isObject)(e)?e.color:this.getLayerConfig().highlightColor,activeMix:Object(M.isObject)(e)?e.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(Object(C.t)(t)).then(function(){setTimeout(function(){n.reRender()},1)})}},{key:"select",value:function(t){var e={};return e.enableSelect=!!Object(M.isObject)(t)||t,Object(M.isObject)(t)?(e.enableSelect=!0,t.color&&(e.selectColor=t.color),t.mix&&(e.selectMix=t.mix)):e.enableSelect=!!t,this.updateLayerConfig(e),this}},{key:"setSelect",value:function(t,e){var n=this;if(Object(M.isObject)(t)){var r=t.x,i=void 0===r?0:r,o=t.y,a=void 0===o?0:o;this.updateLayerConfig({selectColor:Object(M.isObject)(e)?e.color:this.getLayerConfig().selectColor,selectMix:Object(M.isObject)(e)?e.mix:this.getLayerConfig().selectMix}),this.pick({x:i,y:a})}else this.updateLayerConfig({pickedFeatureID:t,selectColor:Object(M.isObject)(e)?e.color:this.getLayerConfig().selectColor,selectMix:Object(M.isObject)(e)?e.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Object(C.t)(t)).then(function(){setTimeout(function(){n.reRender()},1)})}},{key:"setBlend",value:function(t){return this.updateLayerConfig({blend:t}),this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}},{key:"hide",value:function(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}},{key:"setIndex",value:function(t){return this.zIndex=t,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(t){this.currentPickId=t}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(t){this.selectedFeatureID=t}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var t=this.mapService.getZoom(),e=this.getLayerConfig(),n=e.visible,r=e.minZoom,i=void 0===r?-1/0:r,o=e.maxZoom,a=void 0===o?1/0:o;return!!n&&t>=i&&t<a}},{key:"setMultiPass",value:function(t,e){if(this.updateLayerConfig({enableMultiPassRenderer:t}),e&&this.updateLayerConfig({passes:e}),t){var n=this.getLayerConfig(),r=n.passes,i=void 0===r?[]:r;this.multiPassRenderer=Object(I.a)(this,i,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var o=this.rendererService.getViewportSize(),a=o.width,s=o.height;this.multiPassRenderer.resize(a,s)}return this}},{key:"setMinZoom",value:function(t){return this.updateLayerConfig({minZoom:t}),this}},{key:"getMinZoom",value:function(){return this.getLayerConfig().minZoom}},{key:"getMaxZoom",value:function(){return this.getLayerConfig().maxZoom}},{key:"get",value:function(t){return this.getLayerConfig()[t]}},{key:"setMaxZoom",value:function(t){return this.updateLayerConfig({maxZoom:t}),this}},{key:"setAutoFit",value:function(t){return this.updateLayerConfig({autoFit:t}),this}},{key:"fitBounds",value:function(t){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var e=this.getSource(),n=e.extent;return n.some(function(t){return Math.abs(t)===1/0})?this:(this.mapService.fitBounds([[n[0],n[1]],[n[2],n[3]]],t),this)}},{key:"destroy",value:function(){var t,e,n,r,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.isDestroyed){this.layerChildren.map(function(t){return t.destroy(!1)}),this.layerChildren=[];this.getLayerConfig().maskfence&&(this.masks.map(function(t){return t.destroy(!1)}),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),null===(t=this.multiPassRenderer)||void 0===t||t.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),null===(e=this.layerModel)||void 0===e||e.clearModels(i),null===(n=this.tileLayer)||void 0===n||n.destroy(),this.models=[],null===(r=this.debugService)||void 0===r||r.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){var t;this.models.forEach(function(t){return t.destroy()}),null===(t=this.layerModel)||void 0===t||t.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(t){return t.needRescale||t.needRemapping||t.needRegenerateVertices}).length}},{key:"setSource",value:function(t){var e=this;if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=t,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var n=this.mapService.getZoom();this.layerSource.updateClusterData(n)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",function(t){var n=t.type;if(void 0===e.coordCenter){var r,i=e.layerSource.center;e.coordCenter=i,null!==(r=e.mapService)&&void 0!==r&&r.setCoordCenter&&e.mapService.setCoordCenter(i)}if("update"===n){if(e.tileLayer)return void e.tileLayer.reload();e.sourceEvent()}})}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(t){this.encodedData=t,this.encodeDataLength=t.length}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(t){return this.styleAttributeService.getLayerAttributeScale(t)}},{key:"getLegend",value:function(t){var e,n,r,i=this.styleAttributeService.getLayerStyleAttribute(t);return{type:null===(n=((null===i||void 0===i?void 0:null===(e=i.scale)||void 0===e?void 0:e.scalers)||[])[0].option)||void 0===n?void 0:n.type,field:null===i||void 0===i?void 0:null===(r=i.scale)||void 0===r?void 0:r.field,items:this.getLegendItems(t)}}},{key:"getLegendItems",value:function(t){var e=this.styleAttributeService.getLayerAttributeScale(t);if(!e)return[];if(e.invertExtent){return e.range().map(function(n){return Object(x.a)({value:e.invertExtent(n)},t,n)})}if(e.ticks){return e.ticks().map(function(n){return Object(x.a)({value:n},t,e(n))})}if(null!==e&&void 0!==e&&e.domain){return e.domain().filter(function(t){return!Object(M.isUndefined)(t)}).map(function(n){return Object(x.a)({value:n},t,e(n))})}return[]}},{key:"pick",value:function(t){var e=t.x,n=t.y;this.interactionService.triggerHover({x:e,y:n})}},{key:"boxSelect",value:function(t,e){this.pickingService.boxPickLayer(this,t,e)}},{key:"buildLayerModel",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(e){var n,r,i,o,a,s,u,c,l,h,d,v,m=this;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.moduleName,r=e.vertexShader,i=e.fragmentShader,o=e.inject,a=e.triangulation,s=e.segmentNumber,u=Object(f.a)(e,N),this.shaderModuleService.registerModule(n,{vs:r,fs:i,inject:o}),c=this.shaderModuleService.getModule(n),l=c.vs,h=c.fs,d=c.uniforms,v=this.rendererService.createModel,t.abrupt("return",new Promise(function(t){var e=m.styleAttributeService.createAttributesAndIndices(m.encodedData,a,s),n=e.attributes,r=e.elements,i=e.count,o=Object(p.a)({attributes:n,uniforms:d,fs:h,vs:l,elements:r,blend:P.a[T.b.normal]},u);i&&(o.count=i),t(v(o))}));case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"createAttributes",value:function(t){var e=t.triangulation;return this.styleAttributeService.createAttributes(this.encodedData,e).attributes}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(t){var e=this.getLayerConfig(),n=e.enableHighlight,r=void 0===n||n,i=e.enableSelect,o=void 0===i||i,a=-1!==this.eventNames().indexOf(t)||-1!==this.eventNames().indexOf("un"+t);return"click"!==t&&"dblclick"!==t||!o||(a=!0),"mousemove"!==t||!r&&-1===this.eventNames().indexOf("mouseenter")&&-1===this.eventNames().indexOf("unmousemove")&&-1===this.eventNames().indexOf("mouseout")||(a=!0),this.isVisible()&&a}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return t.stop()}},t)}));return t}()},{key:"rebuildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"renderMulPass",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(e){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.render();case 2:case"end":return t.stop()}},t)}));return t}()},{key:"renderModels",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(function(n){n.draw({uniforms:t.layerModel.getUninforms(),blend:t.layerModel.getBlend(),stencil:t.layerModel.getStencil(e)},(null===e||void 0===e?void 0:e.ispick)||!1)}),this.hooks.afterRender.call(),this)}},{key:"updateStyleAttribute",value:function(t,e,n,r){var i=this.configService.getAttributeConfig(this.id)||{};return!Object(M.isEqual)(i[t],{field:e,values:n})&&(-1!==["color","size","texture","rotate","filter","label","shape"].indexOf(t)&&this.configService.setAttributeConfig(this.id,Object(x.a)({},t,{field:e,values:n})),this.startInit?this.styleAttributeService.updateStyleAttribute(t,{scale:Object(p.a)({field:e},this.splitValuesAndCallbackInAttribute(n,this.getLayerConfig()[e]))},r):this.pendingStyleAttributes.push({attributeName:t,attributeField:e,attributeValues:n,updateOptions:r}),!0)}},{key:"getLayerAttributeConfig",value:function(){return this.configService.getAttributeConfig(this.id)}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(t){console.warn("empty fn")}},{key:"processData",value:function(t){return t}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"initLayerModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(h.a)(S.a.mark(function t(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.models.forEach(function(t){return t.destroy()}),this.models=[],t.next=4,this.layerModel.initModels();case 4:this.models=t.sent;case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"reRender",value:function(){this.inited&&this.layerService.reRender()}},{key:"splitValuesAndCallbackInAttribute",value:function(t,e){return{values:Object(M.isFunction)(t)?void 0:t||e,callback:Object(M.isFunction)(t)?t:void 0}}}]),e}(k.EventEmitter),l=Object(w.a)(c.prototype,"configService",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c)},function(t,e,n){"use strict";function r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function i(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}e.b=r,e.a=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var r=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};e.UNDEFINED_INJECT_ANNOTATION=r,e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."};e.ARGUMENTS_LENGTH_MISMATCH=i,e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};e.POST_CONSTRUCT_ERROR=o;var a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."};e.CIRCULAR_DEPENDENCY_IN_FACTORY=a,e.STACK_OVERFLOW="Maximum call stack size exceeded"},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,o=Object(i.a)(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}e.a=r;var i=n(876)},function(t,e,n){var r=n(33),i=n(119);t.exports=n(30)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(21),i=n(50),o=n(57),a=n(120)("src"),s=n(1272),u=(""+s).split("toString");n(66).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e,n){var r=n(5),i=n(23),o=n(77),a=/"/g,s=function(t,e,n,r){var i=String(o(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(370),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(255),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"===typeof e?"undefined":(0,i.default)(e))&&"function"!==typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(694),o=r(i),a=n(698),s=r(a),u=n(255),c=r(u);e.default=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof e?"undefined":(0,c.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(167),i=n(77);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(168),i=n(119),o=n(58),a=n(76),s=n(57),u=n(516),c=Object.getOwnPropertyDescriptor;e.f=n(30)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(57),i=n(34),o=n(313)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){"use strict";var r=null;t.exports={debugTool:r}},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=n(38),i=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===r.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=i},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(e,n){Object(r.a)(this,t),this.x=e,this.y=n}return Object(i.a)(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"_add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"add",value:function(t){return this.clone()._add(t)}},{key:"_sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"sub",value:function(t){return this.clone()._sub(t)}},{key:"_multByPoint",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multByPoint",value:function(t){return this.clone()._multByPoint(t)}},{key:"_divByPoint",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divByPoint",value:function(t){return this.clone()._divByPoint(t)}},{key:"_mult",value:function(t){return this.x*=t,this.y*=t,this}},{key:"mult",value:function(t){return this.clone()._mult(t)}},{key:"_div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"div",value:function(t){return this.clone()._div(t)}},{key:"_rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this}},{key:"rotate",value:function(t){return this.clone()._rotate(t)}},{key:"_rotateAround",value:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this}},{key:"roateAround",value:function(t,e){return this.clone()._rotateAround(t,e)}},{key:"_matMult",value:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this}},{key:"matMult",value:function(t){return this.clone()._matMult(t)}},{key:"_unit",value:function(){return this.div(this.mag()),this}},{key:"unit",value:function(){return this.clone()._unit()}},{key:"_perp",value:function(){var t=this.y;return this.y=this.x,this.x=-t,this}},{key:"perp",value:function(){return this.clone()._perp()}},{key:"_round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"round",value:function(){return this.clone()._round()}},{key:"mag",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"dist",value:function(t){return Math.sqrt(this.distSqr(t))}},{key:"distSqr",value:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n}},{key:"angle",value:function(){return Math.atan2(this.y,this.x)}},{key:"angleTo",value:function(t){return Math.atan2(this.y-t.y,this.x-t.x)}},{key:"angleWith",value:function(t){return this.angleWithSep(t.x,t.y)}},{key:"angleWithSep",value:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)}}],[{key:"convert",value:function(e){return e instanceof t?e:Array.isArray(e)?new t(e[0],e[1]):e}}]),t}()},function(t,e,n){"use strict";var r=n(481);n.d(e,"b",function(){return r.a});var i=n(144);n.d(e,"a",function(){return i.a});var o=n(482);n.d(e,"c",function(){return o.a});var a=(n(1148),n(1149),n(484),n(486));n.d(e,"d",function(){return a.a});var s=(n(1150),n(1153),n(1154),n(490),n(1155),n(1156),n(1157),n(1158),n(491),n(483),n(1159),n(300));n.d(e,"e",function(){return s.a});var u=n(488);n.d(e,"f",function(){return u.a});var c=(n(1160),n(1161),n(1162),n(489));n.d(e,"i",function(){return c.a}),n.d(e,"g",function(){return c.b}),n.d(e,"h",function(){return c.c});n(492),n(485),n(1163)},function(t,e){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(44);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(23);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";function r(){C.ReactReconcileTransaction&&w||l("123")}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=h.getPooled(),this.reconcileTransaction=C.ReactReconcileTransaction.getPooled(!0)}function o(t,e,n,i,o,a){return r(),w.batchedUpdates(t,e,n,i,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==y.length&&l("124",e,y.length),y.sort(a),_++;for(var n=0;n<e;n++){var r=y[n],i=r._pendingCallbacks;r._pendingCallbacks=null;var o;if(d.logTopLevelRenders){var s=r;r._currentElement.type.isReactTopLevelWrapper&&(s=r._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(v.performUpdateIfNecessary(r,t.reconcileTransaction,_),o&&console.timeEnd(o),i)for(var u=0;u<i.length;u++)t.callbackQueue.enqueue(i[u],r.getPublicInstance())}}function u(t){if(r(),!w.isBatchingUpdates)return void w.batchedUpdates(u,t);y.push(t),null==t._updateBatchNumber&&(t._updateBatchNumber=_+1)}function c(t,e){g(w.isBatchingUpdates,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."),b.enqueue(t,e),x=!0}var l=n(25),f=n(28),h=n(349),p=n(99),d=n(350),v=n(133),m=n(171),g=n(18),y=[],_=0,b=h.getPooled(),x=!1,w=null,E={initialize:function(){this.dirtyComponentsLength=y.length},close:function(){this.dirtyComponentsLength!==y.length?(y.splice(0,this.dirtyComponentsLength),T()):y.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},O=[E,S];f(i.prototype,m,{getTransactionWrappers:function(){return O},destructor:function(){this.dirtyComponentsLength=null,h.release(this.callbackQueue),this.callbackQueue=null,C.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return m.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),p.addPoolingTo(i);var T=function(){for(;y.length||x;){if(y.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(x){x=!1;var e=b;b=h.getPooled(),e.notifyAll(),h.release(e)}}},A={injectReconcileTransaction:function(t){t||l("126"),C.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t||l("127"),"function"!==typeof t.batchedUpdates&&l("128"),"boolean"!==typeof t.isBatchingUpdates&&l("129"),w=t}},C={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:T,injection:A,asap:c};t.exports=C},function(t,e,n){"use strict";e.__esModule=!0;var r=n(666),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o});var r=1e-6,i="undefined"!==typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r,i,o,a,s,u=n(10),c=n(39),l=n(0),f=n(1),h=n(6),p=n(40),d=(n(41),n(13)),v=(n.n(d),n(19)),m=(n.n(v),n(14)),g=(n.n(m),n(109)),y=n(42),_=n(110),b="attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",x=(r=Object(d.injectable)(),i=Object(d.inject)(y.a.IShaderModuleService),r((a=function(){function t(){Object(l.a)(this,t),Object(c.a)(this,"shaderModuleService",s,this),Object(h.a)(this,"rendererService",void 0),Object(h.a)(this,"config",void 0),Object(h.a)(this,"quad",b),Object(h.a)(this,"enabled",!0),Object(h.a)(this,"renderToScreen",!1),Object(h.a)(this,"model",void 0),Object(h.a)(this,"name",void 0),Object(h.a)(this,"optionsToUpdate",{})}return Object(f.a)(t,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"getType",value:function(){return _.a.PostProcessing}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(y.a.IRendererService),this.shaderModuleService=t.getContainer().get(y.a.IShaderModuleService);var n=this.rendererService,r=n.createAttribute,i=n.createBuffer,o=n.createModel,a=this.setupShaders(),s=a.vs,c=a.fs,l=a.uniforms;this.model=o({vs:s,fs:c,attributes:{a_Position:r({buffer:i({data:[-4,-4,4,-4,0,4],type:g.a.FLOAT}),size:2})},uniforms:Object(u.a)(Object(u.a)({u_Texture:null},l),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:"copy"===this.getName()}})}},{key:"render",value:function(t,e){var n=this,r=t.multiPassRenderer.getPostProcessor(),i=this.rendererService,o=i.useFramebuffer,a=i.getViewportSize,s=i.clear,c=a(),l=c.width,f=c.height;o(this.renderToScreen?null:r.getWriteFBO(),function(){s({framebuffer:r.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var t=Object(u.a)({u_BloomFinal:0,u_Texture:r.getReadFBO(),u_ViewportSize:[l,f]},n.convertOptionsToUniforms(n.optionsToUpdate));e&&(t.u_BloomFinal=1,t.u_Texture2=e),n.model.draw({uniforms:t})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(t){this.enabled=t}},{key:"setRenderToScreen",value:function(t){this.renderToScreen=t}},{key:"updateOptions",value:function(t){this.optionsToUpdate=Object(u.a)(Object(u.a)({},this.optionsToUpdate),t)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object.keys(t).forEach(function(n){Object(v.isNil)(t[n])||(e["u_".concat(Object(v.upperFirst)(Object(v.camelCase)(n)))]=t[n])}),e}}]),t}(),s=Object(p.a)(a.prototype,"shaderModuleService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){var r=n(24);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(5),i=n(66),o=n(23);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(67),i=n(167),o=n(34),a=n(29),s=n(329);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f,p=e||s;return function(e,s,d){for(var v,m,g=o(e),y=i(g),_=r(s,d,3),b=a(y.length),x=0,w=n?p(e,b):u?p(e,0):void 0;b>x;x++)if((h||x in y)&&(v=y[x],m=_(v,x,g),t))if(n)w[x]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(l)return!1;return f?-1:c||l?l:w}}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r={current:null};t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];s?this[o]=s(n):"target"===o?this.target=r:this[o]=n[o]}var u=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=u?a.thatReturnsTrue:a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var i=n(28),o=n(99),a=n(71),s=(n(26),["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),u={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),r.Interface=u,r.augmentClass=function(t,e){var n=this,r=function(){};r.prototype=n.prototype;var a=new r;i(a,t.prototype),t.prototype=a,t.prototype.constructor=t,t.Interface=i({},n.Interface,e),t.augmentClass=n.augmentClass,o.addPoolingTo(t,o.fourArgumentPooler)},o.addPoolingTo(r,o.fourArgumentPooler),t.exports=r},function(t,e,n){"use strict";function r(t){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.a=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;var r={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingScopeEnum=r;var i={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.BindingTypeEnum=i;var o={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};e.TargetTypeEnum=o},function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a}),n.d(e,"e",function(){return s});var r=1e3,i=6e4,o=36e5,a=864e5,s=6048e5},function(t,e,n){"use strict";if(n(30)){var r=n(96),i=n(21),o=n(23),a=n(5),s=n(224),u=n(337),c=n(67),l=n(126),f=n(119),h=n(50),p=n(128),d=n(69),v=n(29),m=n(544),g=n(122),y=n(76),_=n(57),b=n(147),x=n(24),w=n(34),E=n(326),S=n(123),O=n(60),T=n(124).f,A=n(328),C=n(120),k=n(27),M=n(79),P=n(214),j=n(170),I=n(331),R=n(149),L=n(219),D=n(125),N=n(330),z=n(533),F=n(33),B=n(59),U=F.f,V=B.f,G=i.RangeError,H=i.TypeError,W=i.Uint8Array,q=Array.prototype,Z=u.ArrayBuffer,X=u.DataView,Y=M(0),K=M(2),J=M(3),Q=M(4),$=M(5),tt=M(6),et=P(!0),nt=P(!1),rt=I.values,it=I.keys,ot=I.entries,at=q.lastIndexOf,st=q.reduce,ut=q.reduceRight,ct=q.join,lt=q.sort,ft=q.slice,ht=q.toString,pt=q.toLocaleString,dt=k("iterator"),vt=k("toStringTag"),mt=C("typed_constructor"),gt=C("def_constructor"),yt=s.CONSTR,_t=s.TYPED,bt=s.VIEW,xt=M(1,function(t,e){return Tt(j(t,t[gt]),e)}),wt=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Et=!!W&&!!W.prototype.set&&o(function(){new W(1).set({})}),St=function(t,e){var n=d(t);if(n<0||n%e)throw G("Wrong offset!");return n},Ot=function(t){if(x(t)&&_t in t)return t;throw H(t+" is not a typed array!")},Tt=function(t,e){if(!(x(t)&&mt in t))throw H("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Ct(j(t,t[gt]),e)},Ct=function(t,e){for(var n=0,r=e.length,i=Tt(t,r);r>n;)i[n]=e[n++];return i},kt=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},Mt=function(t){var e,n,r,i,o,a,s=w(t),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=A(s);if(void 0!=h&&!E(h)){for(a=h.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(s.length),i=Tt(this,n);n>e;e++)i[e]=f?l(s[e],e):s[e];return i},Pt=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},jt=!!W&&o(function(){pt.call(new W(1))}),It=function(){return pt.apply(jt?ft.call(Ot(this)):Ot(this),arguments)},Rt={copyWithin:function(t,e){return z.call(Ot(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Ot(this),arguments)},filter:function(t){return At(this,K(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Y(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Ot(this),arguments)},lastIndexOf:function(t){return at.apply(Ot(this),arguments)},map:function(t){return xt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Ot(this),arguments)},reduceRight:function(t){return ut.apply(Ot(this),arguments)},reverse:function(){for(var t,e=this,n=Ot(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return J(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Ot(this),t)},subarray:function(t,e){var n=Ot(this),r=n.length,i=g(t,r);return new(j(n,n[gt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-i))}},Lt=function(t,e){return At(this,ft.call(Ot(this),t,e))},Dt=function(t){Ot(this);var e=St(arguments[1],1),n=this.length,r=w(t),i=v(r.length),o=0;if(i+e>n)throw G("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Nt={entries:function(){return ot.call(Ot(this))},keys:function(){return it.call(Ot(this))},values:function(){return rt.call(Ot(this))}},zt=function(t,e){return x(t)&&t[_t]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return zt(t,e=y(e,!0))?f(2,t[e]):V(t,e)},Bt=function(t,e,n){return!(zt(t,e=y(e,!0))&&x(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};yt||(B.f=Ft,F.f=Bt),a(a.S+a.F*!yt,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:Bt}),o(function(){ht.call({})})&&(ht=pt=function(){return ct.call(this)});var Ut=p({},Rt);p(Ut,Nt),h(Ut,dt,Nt.values),p(Ut,{slice:Lt,set:Dt,constructor:function(){},toString:ht,toLocaleString:It}),kt(Ut,"buffer","b"),kt(Ut,"byteOffset","o"),kt(Ut,"byteLength","l"),kt(Ut,"length","e"),U(Ut,vt,{get:function(){return this[_t]}}),t.exports=function(t,e,n,u){u=!!u;var c=t+(u?"Clamped":"")+"Array",f="get"+t,p="set"+t,d=i[c],g=d||{},y=d&&O(d),_=!d||!s.ABV,w={},E=d&&d.prototype,A=function(t,n){var r=t._d;return r.v[f](n*e+r.o,wt)},C=function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*e+i.o,r,wt)},k=function(t,e){U(t,e,{get:function(){return A(this,e)},set:function(t){return C(this,e,t)},enumerable:!0})};_?(d=n(function(t,n,r,i){l(t,d,c,"_d");var o,a,s,u,f=0,p=0;if(x(n)){if(!(n instanceof Z||"ArrayBuffer"==(u=b(n))||"SharedArrayBuffer"==u))return _t in n?Ct(d,n):Mt.call(d,n);o=n,p=St(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw G("Wrong length!");if((a=g-p)<0)throw G("Wrong length!")}else if((a=v(i)*e)+p>g)throw G("Wrong length!");s=a/e}else s=m(n),a=s*e,o=new Z(a);for(h(t,"_d",{b:o,o:p,l:a,e:s,v:new X(o)});f<s;)k(t,f++)}),E=d.prototype=S(Ut),h(E,"constructor",d)):o(function(){d(1)})&&o(function(){new d(-1)})&&L(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,r,i){l(t,d,c);var o;return x(n)?n instanceof Z||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,St(r,e),i):void 0!==r?new g(n,St(r,e)):new g(n):_t in n?Ct(d,n):Mt.call(d,n):new g(m(n))}),Y(y!==Function.prototype?T(g).concat(T(y)):T(g),function(t){t in d||h(d,t,g[t])}),d.prototype=E,r||(E.constructor=d));var M=E[dt],P=!!M&&("values"==M.name||void 0==M.name),j=Nt.values;h(d,mt,!0),h(E,_t,c),h(E,bt,!0),h(E,gt,d),(u?new d(1)[vt]==c:vt in E)||U(E,vt,{get:function(){return c}}),w[c]=d,a(a.G+a.W+a.F*(d!=g),w),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){g.of.call(d,1)}),c,{from:Mt,of:Pt}),"BYTES_PER_ELEMENT"in E||h(E,"BYTES_PER_ELEMENT",e),a(a.P,c,Rt),D(c),a(a.P+a.F*Et,c,{set:Dt}),a(a.P+a.F*!P,c,Nt),r||E.toString==ht||(E.toString=ht),a(a.P+a.F*o(function(){new d(1).slice()}),c,{slice:Lt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),c,{toLocaleString:It}),R[c]=P?M:j,r||P||h(E,dt,j)}}else t.exports=function(){}},function(t,e,n){var r=n(539),i=n(5),o=n(166)("metadata"),a=o.store||(o.store=new(n(542))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},u=function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},c=function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},l=function(t,e,n,r){s(n,r,!0).set(t,e)},f=function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){i(i.S,"Reflect",t)};t.exports={store:a,map:s,has:u,get:c,set:l,keys:f,key:h,exp:p}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){t.exports=!n(138)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";function r(t,e,n,r){o(l.TAGGED,t,e,r,n)}function i(t,e,n){o(l.TAGGED_PROP,t.constructor,e,n)}function o(t,e,n,r,i){var o={},a="number"===typeof i,s=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(c.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var u=o[s];if(Array.isArray(u))for(var l=0,f=u;l<f.length;l++){var h=f[l];if(h.key===r.key)throw new Error(c.DUPLICATED_METADATA+" "+h.key.toString())}else u=[];u.push(r),o[s]=u,Reflect.defineMetadata(t,o,e)}function a(t,e){Reflect.decorate(t,e)}function s(t,e){return function(n,r){e(n,r,t)}}function u(t,e,n){"number"===typeof n?a([s(n,t)],e):"string"===typeof n?Reflect.decorate([t],e,n):a([t],e)}Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var c=n(48),l=n(38);e.tagParameter=r,e.tagProperty=i,e.decorate=u},function(t,e,n){"use strict";var r=(n(958),n(967)),i=(n(970),n(1073),n(1075),n(92));n(1079);n.d(e,"b",function(){return i.a}),n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t["GAODE1.x"]="GAODE1.x",t["GAODE2.x"]="GAODE2.x",t.MAPBOX="MAPBOX",t.DEFUALT="DEFUALTMAP",t.SIMPLE="SIMPLE",t.GLOBEL="GLOBEL",t}({})},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function s(t,e,n){return Math.min(n,Math.max(e,t))}function u(t,e,n){return t*(1-n)+e*n}function c(t,e,n,r){var i=new g.a(t,e,n,r);return function(t){return i.solve(t)}}function l(){return!(v.K||!v.a.matchMedia)&&(null==d&&(d=v.a.matchMedia("(prefers-reduced-motion: reduce)")),d.matches)}function f(t,e){var n,i={},o=r(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;a in t&&(i[a]=t[a])}}catch(t){o.e(t)}finally{o.f()}return i}function h(t){var e=b(t);return{cancel:function(){return x(e)}}}function p(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var s in a)void 0!==a[s]&&(t[s]=a[s])}return t}e.j=a,e.b=s,e.e=u,e.a=c,n.d(e,"c",function(){return y}),e.h=l,e.g=f,n.d(e,"f",function(){return _}),e.i=h,e.d=p;var d,v=n(9),m=n(973),g=n.n(m),y=c(.25,.1,.25,1),_=v.K?Date.now.bind(Date):v.a.performance&&v.a.performance.now?v.a.performance.now.bind(v.a.performance):Date.now.bind(Date),b=v.a.requestAnimationFrame||v.a.mozRequestAnimationFrame||v.a.webkitRequestAnimationFrame||v.a.msRequestAnimationFrame,x=v.a.cancelAnimationFrame||v.a.mozCancelAnimationFrame||v.a.webkitCancelAnimationFrame||v.a.msCancelAnimationFrame},function(t,e,n){"use strict";function r(t){return t}function i(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Object(d.a)(isNaN(e)?NaN:.5)}function o(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function a(t,e,n){var r=t[0],o=t[1],a=e[0],s=e[1];return o<r?(r=i(o,r),a=n(s,a)):(r=i(r,o),a=n(a,s)),function(t){return a(r(t))}}function s(t,e,n){var r=Math.min(t.length,e.length)-1,o=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)o[s]=i(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(e){var n=Object(f.b)(t,e,1,r)-1;return a[n](o[n](e))}}function u(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function c(){function t(){return c=Math.min(d.length,g.length)>2?s:a,l=f=null,e}function e(t){return isNaN(t=+t)?u:(l||(l=c(d.map(n),g,y)))(n(_(t)))}var n,i,u,c,l,f,d=m,g=m,y=h.a,_=r;return e.invert=function(t){return _(i((f||(f=c(g,d.map(n),h.b)))(t)))},e.domain=function(e){return arguments.length?(d=p.a.call(e,v.a),_===r||(_=o(d)),t()):d.slice()},e.range=function(e){return arguments.length?(g=p.b.call(e),t()):g.slice()},e.rangeRound=function(e){return g=p.b.call(e),y=h.d,t()},e.clamp=function(t){return arguments.length?(_=t?o(d):r,e):_!==r},e.interpolate=function(e){return arguments.length?(y=e,t()):y},e.unknown=function(t){return arguments.length?(u=t,e):u},function(e,r){return n=e,i=r,t()}}function l(t,e){return c()(t,e)}e.c=r,e.a=u,e.d=c,e.b=l;var f=n(65),h=n(493),p=n(117),d=n(1186),v=n(502),m=[0,1]},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n(7),i=n(10),o=n(15),a=n(0),s=n(1),u=n(6),c=n(8),l=n.n(c),f=n(11),h=n(299),p=n(514),d=function(){function t(e,n){Object(a.a)(this,t),Object(u.a)(this,"visible",!0),Object(u.a)(this,"layers",[]),Object(u.a)(this,"isLoaded",!1),Object(u.a)(this,"tileMaskLayers",[]),this.parent=n,this.sourceTile=e,this.x=e.x,this.y=e.y,this.z=e.z,this.key="".concat(this.x,"_").concat(this.y,"_").concat(this.z)}return Object(s.a)(t,[{key:"getLayers",value:function(){return this.layers}},{key:"styleUpdate",value:function(){}},{key:"lnglatInBounds",value:function(t){var e=Object(o.a)(this.sourceTile.bounds,4),n=e[0],r=e[1],i=e[2],a=e[3],s=t.lng,u=t.lat;return s>=n&&s<=i&&u>=r&&u<=a}},{key:"getLayerOptions",value:function(){var t,e=this.parent.getLayerConfig();return Object(i.a)(Object(i.a)({},e),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:Object(p.b)(this.parent.type),mask:e.mask||0!==(null===(t=e.maskLayers)||void 0===t?void 0:t.length)&&e.enableMask})}},{key:"getMaskLayer",value:function(){var t=this,e=this.parent.getLayerConfig(),n=e.maskLayers,r=[];return null===n||void 0===n||n.forEach(function(e){if(!e.tileLayer)return r.push(e),e;var n=e.tileLayer,i=n.getTile(t.sourceTile.key),o=null===i||void 0===i?void 0:i.getLayers()[0];o&&r.push(o)}),r}},{key:"addTileMask",value:function(){function t(){return e.apply(this,arguments)}var e=Object(r.a)(l.a.mark(function t(){var e,n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new h.a({visible:!1,enablePicking:!1}).source({type:"FeatureCollection",features:[this.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill"),n=Object(f.r)(this.parent.sceneContainer),e.setContainer(n,this.parent.sceneContainer),t.next=5,e.init();case 5:return this.tileMask=e,r=this.getMainLayer(),void 0!==r&&(r.tileMask=e),t.abrupt("return",e);case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"addMask",value:function(){function t(t,n){return e.apply(this,arguments)}var e=Object(r.a)(l.a.mark(function t(e,n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(f.r)(this.parent.sceneContainer),n.setContainer(r,this.parent.sceneContainer),t.next=4,n.init();case 4:e.addMask(n),this.tileMaskLayers.push(n);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"addLayer",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(r.a)(l.a.mark(function t(e){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isTileLayer=!0,n=Object(f.r)(this.parent.sceneContainer),e.setContainer(n,this.parent.sceneContainer),this.layers.push(e),t.next=6,e.init();case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"updateVisible",value:function(t){this.visible=t,this.updateOptions("visible",t)}},{key:"updateOptions",value:function(t,e){this.layers.forEach(function(n){n.updateLayerConfig(Object(u.a)({},t,e))})}},{key:"getMainLayer",value:function(){return this.layers[0]}},{key:"getFeatures",value:function(t){return[]}},{key:"getFeatureById",value:function(t){return[]}},{key:"destroy",value:function(){var t;null===(t=this.tileMask)||void 0===t||t.destroy(),this.layers.forEach(function(t){return t.destroy()})}}]),t}()},function(t,e){t.exports=!1},function(t,e,n){var r=n(120)("meta"),i=n(24),o=n(57),a=n(33).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(23)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return c&&d.NEED&&u(t)&&!o(t,r)&&l(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},function(t,e,n){var r=n(27)("unscopables"),i=Array.prototype;void 0==i[r]&&n(50)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";var r=n(25),i=(n(18),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},u=function(t){var e=this;t instanceof e||r("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=i,l=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||c,n.poolSize||(n.poolSize=10),n.release=u,n},f={addPoolingTo:l,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=f},function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"===typeof btoa){var o=r(i);return[n].concat(i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}function r(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=n(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r}).join("")},e.i=function(t,n){"string"===typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"===typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"===typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e,n){function r(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(l(r.parts[o],e))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(l(r.parts[o],e));d[r.id]={id:r.id,refs:1,parts:a}}}}function i(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s=o[1],u=o[2],c=o[3],l={css:s,media:u,sourceMap:c};r[a]?r[a].parts.push(l):n.push(r[a]={id:a,parts:[l]})}return n}function o(t,e){var n=m(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=_[_.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),_.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function a(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=_.indexOf(t);e>=0&&_.splice(e,1)}function s(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),o(t,e),e}function u(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),o(t,e),e}function c(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function l(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var c=y++;n=g||(g=s(e)),r=f.bind(null,n,c,!1),i=f.bind(null,n,c,!0)}else t.sourceMap&&"function"===typeof URL&&"function"===typeof URL.createObjectURL&&"function"===typeof URL.revokeObjectURL&&"function"===typeof Blob&&"function"===typeof btoa?(n=u(e),r=p.bind(null,n,e),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),r=h.bind(null,n),i=function(){a(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}function f(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function h(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=b(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var d={},v=function(t){var e;return function(){return"undefined"===typeof e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),m=function(t){var e={};return function(n){return"undefined"===typeof e[n]&&(e[n]=t.call(this,n)),e[n]}}(function(t){return document.querySelector(t)}),g=null,y=0,_=[],b=n(654);t.exports=function(t,e){if("undefined"!==typeof DEBUG&&DEBUG&&"object"!==typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"===typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=v()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return r(n,e),function(t){for(var o=[],a=0;a<n.length;a++){var s=n[a],u=d[s.id];u.refs--,o.push(u)}if(t){r(i(t,e),e)}for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var x=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var r=n(88),i=n(62),o=n(371),a=n(136),s=n(104),u=function(t,e,n){var c,l,f,h=t&u.F,p=t&u.G,d=t&u.S,v=t&u.P,m=t&u.B,g=t&u.W,y=p?i:i[e]||(i[e]={}),_=y.prototype,b=p?r:d?r[e]:(r[e]||{}).prototype;p&&(n=e);for(c in n)(l=!h&&b&&void 0!==b[c])&&s(y,c)||(f=l?b[c]:n[c],y[c]=p&&"function"!=typeof b[c]?n[c]:m&&l?o(f,r):g&&b[c]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((y.virtual||(y.virtual={}))[c]=f,t&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){var r=n(155),i=n(372),o=n(248),a=Object.defineProperty;e.f=n(89)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(375),i=n(249);t.exports=function(t){return r(i(t))}},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function i(t,e,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h(t[0])||!h(t[1]))throw new Error("coordinates must contain numbers");return r({type:"Point",coordinates:t},e,n)}function o(t,e,n){void 0===n&&(n={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return r({type:"LineString",coordinates:t},e,n)}function s(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),r({type:"MultiPolygon",coordinates:t},e,n)}function c(t,e){void 0===e&&(e="kilometers");var n=d[e];if(!n)throw new Error(e+" units is invalid");return t*n}function l(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return t%360*Math.PI/180}function h(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function p(t){return!!t&&t.constructor===Object}e.b=r,e.h=i,e.i=o,e.f=a,e.c=s,e.g=u,e.k=c,e.j=l,e.a=f,e.d=h,e.e=p;var d={centimeters:637100880,centimetres:637100880,degrees:6371008.8/111325,feet:20902260.511392,inches:6371008.8*39.37,kilometers:6371.0088,kilometres:6371.0088,meters:6371008.8,metres:6371008.8,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:6371008.8/1852,radians:1,yards:6371008.8*1.0936}},function(t,e,n){"use strict";var r=n(273);n.d(e,"a",function(){return r.e}),n.d(e,"f",function(){return r.g}),n.d(e,"d",function(){return r.f});var i=n(779);n.d(e,"e",function(){return i.a}),n.d(e,"c",function(){return i.b});var o=n(780);n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function r(){return i++}Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var i=0;e.id=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8";t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.Normal="normal",t.PostProcessing="post-processing"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("l7-iconfont"),e.setAttribute("aria-hidden","true");var n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href","#".concat(t)),e.appendChild(n),e}},function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return u});var r=n(83),i=n(0),o=n(1),a=n(93),s=6371008.8,u=function(){function t(e,n){if(Object(i.a)(this,t),isNaN(e)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(n,")"));if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return Object(o.a)(t,[{key:"wrap",value:function(){return new t(Object(a.j)(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return s*Math.acos(Math.min(i,1))}}],[{key:"convert",value:function(e){if(e instanceof t)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new t(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"===Object(r.a)(e)&&null!==e){var n="lng"in e?e.lng:e.lon;return new t(Number(n),Number(e.lat))}throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(1),i=n(0),o=n(290),a=n.n(o),s=Object(r.a)(function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.a)(this,t),a()(this,n),this.type=e})},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){if(!f)return t[0];var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i in f)return i}}catch(t){n.e(t)}finally{n.f()}return t[0]}var s=n(9),u=n(64),c={};e.a=c,c.create=function(t,e,n){var r=s.a.document.createElement(t);return void 0!==e&&(r.className=e),n&&n.appendChild(r),r},c.createNS=function(t,e){return s.a.document.createElementNS(t,e)};var l,f=s.a.document&&s.a.document.documentElement.style,h=a(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){f&&h&&(l=f[h],f[h]="none")},c.enableDrag=function(){f&&h&&(f[h]=l)};var p=a(["transform","WebkitTransform"]);c.setTransform=function(t,e){t.style[p]=e};var d=!1;try{var v=Object.defineProperty({},"passive",{get:function(){d=!0}});s.a.addEventListener("test",v,v),s.a.removeEventListener("test",v,v)}catch(t){d=!1}c.addEventListener=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&d?t.addEventListener(e,n,r):t.addEventListener(e,n,r.capture)},c.removeEventListener=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"passive"in r&&d?t.removeEventListener(e,n,r):t.removeEventListener(e,n,r.capture)};var m=function t(e){e.preventDefault(),e.stopPropagation(),s.a.removeEventListener("click",t,!0)};c.suppressClick=function(){s.K||(s.a.addEventListener("click",m,!0),setTimeout(function(){s.a.removeEventListener("click",m,!0)},0))},c.mousePos=function(t,e){if(s.K)return new u.a(e.clientX-t.left-0,e.clientY-t.top-0);var n=t.getBoundingClientRect();return new u.a(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},c.touchPos=function(t,e){if(s.K){var n,i=[],o=r(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;i.push(new u.a(a.clientX-t.left,a.clientY-t.top))}}catch(t){o.e(t)}finally{o.f()}return i}var c,l=t.getBoundingClientRect(),f=[],h=r(e);try{for(h.s();!(c=h.n()).done;){var p=c.value;f.push(new u.a(p.clientX-l.left-t.clientLeft,p.clientY-l.top-t.clientTop))}}catch(t){h.e(t)}finally{h.f()}return f},c.mouseButton=function(t){return s.K&&"undefined"!==typeof s.a.InstallTrigger&&2===t.button&&t.ctrlKey&&s.a.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},c.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a});var r=function(t){return t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t}({}),i=function(t){return t.NORMAL="normal",t.REPLACE="replace",t}({}),o=function(t){return t[t.pixel=0]="pixel",t[t.meter=1]="meter",t}({}),a=function(t){return t.ALWAYS="always",t.DRAGEND="dragend",t}({})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=Array.prototype,i=r.map,o=r.slice},function(t,e,n){"use strict";function r(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(o.i)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Object(u.a)(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,s=i.length-1,u=i[a],c=i[s];return c<u&&(r=u,u=c,c=r,r=a,a=s,s=r),r=Object(o.g)(u,c,n),r>0?(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,r=Object(o.g)(u,c,n)):r<0&&(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,r=Object(o.g)(u,c,n)),r>0?(i[a]=Math.floor(u/r)*r,i[s]=Math.ceil(c/r)*r,e(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[s]=Math.floor(c*r)/r,e(i)),t},t}function i(){var t=Object(a.b)(a.c,a.c);return t.copy=function(){return Object(a.a)(t,i())},s.b.apply(t,arguments),r(t)}e.b=r,e.a=i;var o=n(65),a=n(94),s=n(47),u=n(503)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(518),i=n(314);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(69),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(17),i=n(519),o=n(314),a=n(313)("IE_PROTO"),s=function(){},u=function(){var t,e=n(311)("iframe"),r=o.length;for(e.style.display="none",n(315).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(518),i=n(314).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(21),i=n(33),o=n(30),a=n(27)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(67),i=n(531),o=n(326),a=n(17),s=n(29),u=n(328),c={},l={},e=t.exports=function(t,e,n,f,h){var p,d,v,m,g=h?function(){return t}:u(t),y=r(n,f,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=s(t.length);p>_;_++)if((m=e?y(a(d=t[_])[0],d[1]):y(t[_]))===c||m===l)return m}else for(v=g.call(t);!(d=v.next()).done;)if((m=i(v,y,d.value,e))===c||m===l)return m};e.BREAK=c,e.RETURN=l},function(t,e,n){var r=n(51);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(24);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";var r=n(28),i=n(339),o=n(560),a=n(565),s=n(131),u=n(566),c=n(572),l=n(573),f=n(575),h=s.createElement,p=s.createFactory,d=s.cloneElement,v=r,m=function(t){return t},g={Children:{map:o.map,forEach:o.forEach,count:o.count,toArray:o.toArray,only:f},Component:i.Component,PureComponent:i.PureComponent,createElement:h,cloneElement:d,isValidElement:s.isValidElement,PropTypes:u,createClass:l,createFactory:p,createMixin:m,DOM:a,version:c,__spread:v};t.exports=g},function(t,e,n){"use strict";function r(t){return void 0!==t.ref}function i(t){return void 0!==t.key}var o=n(28),a=n(81),s=(n(26),n(341),Object.prototype.hasOwnProperty),u=n(342),c={key:!0,ref:!0,__self:!0,__source:!0},l=function(t,e,n,r,i,o,a){var s={$$typeof:u,type:t,key:e,ref:n,props:a,_owner:o};return s};l.createElement=function(t,e,n){var o,u={},f=null,h=null;if(null!=e){r(e)&&(h=e.ref),i(e)&&(f=""+e.key),void 0===e.__self?null:e.__self,void 0===e.__source?null:e.__source;for(o in e)s.call(e,o)&&!c.hasOwnProperty(o)&&(u[o]=e[o])}var p=arguments.length-2;if(1===p)u.children=n;else if(p>1){for(var d=Array(p),v=0;v<p;v++)d[v]=arguments[v+2];u.children=d}if(t&&t.defaultProps){var m=t.defaultProps;for(o in m)void 0===u[o]&&(u[o]=m[o])}return l(t,f,h,0,0,a.current,u)},l.createFactory=function(t){var e=l.createElement.bind(null,t);return e.type=t,e},l.cloneAndReplaceKey=function(t,e){return l(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},l.cloneElement=function(t,e,n){var u,f=o({},t.props),h=t.key,p=t.ref,d=(t._self,t._source,t._owner);if(null!=e){r(e)&&(p=e.ref,d=a.current),i(e)&&(h=""+e.key);var v;t.type&&t.type.defaultProps&&(v=t.type.defaultProps);for(u in e)s.call(e,u)&&!c.hasOwnProperty(u)&&(void 0===e[u]&&void 0!==v?f[u]=v[u]:f[u]=e[u])}var m=arguments.length-2;if(1===m)f.children=n;else if(m>1){for(var g=Array(m),y=0;y<m;y++)g[y]=arguments[y+2];f.children=g}return l(t.type,h,p,0,0,d,f)},l.isValidElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===u},t.exports=l},function(t,e,n){"use strict";function r(t,e){return(t&e)===e}var i=n(25),o=(n(18),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=o,n=t.Properties||{},a=t.DOMAttributeNamespaces||{},u=t.DOMAttributeNames||{},c=t.DOMPropertyNames||{},l=t.DOMMutationMethods||{};t.isCustomAttribute&&s._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var f in n){s.properties.hasOwnProperty(f)&&i("48",f);var h=f.toLowerCase(),p=n[f],d={attributeName:h,attributeNamespace:null,propertyName:f,mutationMethod:null,mustUseProperty:r(p,e.MUST_USE_PROPERTY),hasBooleanValue:r(p,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(p,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(p,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(p,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(d.hasBooleanValue+d.hasNumericValue+d.hasOverloadedBooleanValue<=1||i("50",f),u.hasOwnProperty(f)){var v=u[f];d.attributeName=v}a.hasOwnProperty(f)&&(d.attributeNamespace=a[f]),c.hasOwnProperty(f)&&(d.propertyName=c[f]),l.hasOwnProperty(f)&&(d.mutationMethod=l[f]),s.properties[f]=d}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<s._isCustomAttributeFunctions.length;e++){if((0,s._isCustomAttributeFunctions[e])(t))return!0}return!1},injection:o};t.exports=s},function(t,e,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=n(584),o=(n(61),n(26),{mountComponent:function(t,e,n,i,o,a){var s=t.mountComponent(e,n,i,o,a);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),s},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){i.detachRefs(t,t._currentElement),t.unmountComponent(e)},receiveComponent:function(t,e,n,o){var a=t._currentElement;if(e!==a||o!==t._context){var s=i.shouldUpdateRefs(a,e);s&&i.detachRefs(t,a),t.receiveComponent(e,n,o),s&&t._currentElement&&null!=t._currentElement.ref&&n.getReactMountReady().enqueue(r,t)}},performUpdateIfNecessary:function(t,e,n){t._updateBatchNumber===n&&t.performUpdateIfNecessary(e)}});t.exports=o},function(t,e,n){"use strict";function r(t){if(d){var e=t.node,n=t.children;if(n.length)for(var r=0;r<n.length;r++)v(e,n[r],null);else null!=t.html?f(e,t.html):null!=t.text&&p(e,t.text)}}function i(t,e){t.parentNode.replaceChild(e.node,t),r(e)}function o(t,e){d?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){d?t.html=e:f(t.node,e)}function s(t,e){d?t.text=e:p(t.node,e)}function u(){return this.node.nodeName}function c(t){return{node:t,children:[],html:null,text:null,toString:u}}var l=n(237),f=n(173),h=n(238),p=n(354),d="undefined"!==typeof document&&"number"===typeof document.documentMode||"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=h(function(t,e,n){11===e.node.nodeType||1===e.node.nodeType&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===l.html)?(r(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),r(e))});c.insertTreeBefore=v,c.replaceChildWithTree=i,c.queueChild=o,c.queueHTML=a,c.queueText=s,t.exports=c},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):m=-1,d.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++m<e;)p&&p[m].run();m=-1,e=d.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,h=t.exports={};!function(){try{l="function"===typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"===typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,d=[],v=!1,m=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){var r=n(103),i=n(176);t.exports=n(89)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(252)("wks"),i=n(179),o=n(88).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e,n){"use strict";function r(t,e){var n=Object(w.a)(e,4),r=n[0],i=n[1],o=n[2],a=n[3];return t.lng>r&&t.lng<=o&&t.lat>i&&t.lat<=a}function i(t){var e=[1/0,1/0,-1/0,-1/0];return t.forEach(function(t){var n=t.coordinates;o(e,n)}),e}function o(t,e){return Array.isArray(e[0])?e.forEach(function(e){o(t,e)}):(t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])),t}function a(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1};t=c(t,e);var r=t[0],i=t[1],o=r*T/180,a=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return a=a*T/180,n.enable&&(o=Number(o.toFixed(n.decimal)),a=Number(a.toFixed(n.decimal))),3===t.length?[o,a,t[2]]:[o,a]}function s(t){if(void 0===t||null===t)throw new Error("lng is required");return(t>180||t<-180)&&(t%=360,t>180&&(t=-360+t),t<-180&&(t=360+t),0===t&&(t=0)),t}function u(t){if(void 0===t||null===t)throw new Error("lat is required");return(t>90||t<-90)&&(t%=180,t>90&&(t=-180+t),t<-90&&(t=180+t),0===t&&(t=0)),t}function c(t,e){if(!1===e)return t;var n=s(t[0]),r=u(t[1]);return r>85&&(r=85),r<-85&&(r=-85),3===t.length?[n,r,t[2]]:[n,r]}function l(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),n=Math.PI/180,r=t[0]*n,i=e*n;i=Math.log(Math.tan(Math.PI/4+i/2));var o=.5/Math.PI,a=-.5/Math.PI;return n=.5,r=(256<<20)*(o*r+.5),i=(256<<20)*(a*i+n),[Math.floor(r),Math.floor(i)]}function f(t,e){var n=85.0511287798,r=Math.PI/180;return e=Math.max(Math.min(n,e),-n),t*=r,e*=r,e=Math.log(Math.tan(Math.PI/4+e/2)),[6378137*t,6378137*e]}function h(t,e){var n=Math.PI/180;return[t/6378137/n,2*(Math.atan(Math.exp(e/6378137))-Math.PI/4)/n]}function p(t,e,n){var r=Object(S.a)(e[1]-t[1]),i=Object(S.a)(e[0]-t[0]),o=Object(S.a)(t[1]),a=Object(S.a)(e[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(o)*Math.cos(a);return Object(S.k)(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function d(t,e){var n=Math.abs(t[1][1]-t[0][1])*e,r=Math.abs(t[1][0]-t[0][0])*e;return[[t[0][0]-r,t[0][1]-n],[t[1][0]+r,t[1][1]+n]]}function v(t,e){return t[0][0]<=e[0][0]&&t[0][1]<=e[0][1]&&t[1][0]>=e[1][0]&&t[1][1]>=e[1][1]}function m(t){return[[t[0],t[1]],[t[2],t[3]]]}function g(t){var e=y(t,[0,0]);return[t[0]/e,t[1]/e]}function y(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function _(t){if(Object(O.a)(t[0]))return t;if(Object(O.a)(t[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(Object(O.a)(t[0][0][0])){var e=t,n=0,r=0,i=0;return e.forEach(function(t){t.forEach(function(t){n+=t[0],r+=t[1],i++})}),[n/i,r/i,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}function b(t){for(var e=t[0],n=t[1],r=t[0],i=t[1],o=0,a=0,s=0,u=0;u<t.length;u+=2){var c=t[u],l=t[u+1];c&&l&&(e=Math.max(c,e),n=Math.max(l,n),r=Math.min(c,r),i=Math.min(l,i),o+=c,a+=l,s++)}return{center:[o/s,a/s],radius:Math.sqrt(Math.pow(e-r,2)+Math.pow(n-i,2))/2}}function x(t){return Object(E.a)(Object(S.c)([Object(S.f)(t)]))}e.k=r,e.i=i,e.l=a,e.a=l,e.b=f,e.c=h,e.m=p,e.o=d,e.e=v,e.d=m,e.n=g,e.f=y,e.g=_,e.h=b,e.j=x;var w=n(15),E=n(788),S=n(106),O=n(789),T=2*Math.PI*6378137/2},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o,a=n(10),s=n(39),u=n(0),c=n(1),l=(n(6),n(40)),f=(n(41),n(11)),h=(r=Object(f.u)(f.p.IGlobalConfigService),i=function(){function t(e){Object(u.a)(this,t),Object(s.a)(this,"configService",o,this),this.config=e}return Object(c.a)(t,[{key:"setContainer",value:function(t,e,n,r){t.bind(f.p.MapConfig).toConstantValue(Object(a.a)(Object(a.a)({},this.config),{},{id:e,canvas:n,hasBaseMap:r})),t.bind(f.p.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),t}(),o=Object(l.a)(i.prototype,"configService",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i)},function(t,e,n){var r=n(451),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(u.a)(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?s:function(e,n){return n-e?i(e,n,t):Object(u.a)(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):Object(u.a)(isNaN(t)?e:t)}e.c=o,e.b=a,e.a=s;var u=n(496)},function(t,e,n){var r=n(33).f,i=n(57),o=n(27)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(68),i=n(27)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(5),i=n(77),o=n(23),a=n(317),s="["+a+"]",u="\u200b\x85",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(t,e,n){var i={},s=o(function(){return!!a[t]()||u[t]()!=u}),c=i[t]=s?e(h):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},h=f.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},function(t,e){t.exports={}},function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=e.dispatchConfig.phasedRegistrationNames[n];return g(t,r)}function i(t,e,n){var i=r(t,n,e);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&d.traverseTwoPhase(t._targetInst,i,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?d.getParentInstance(e):null;d.traverseTwoPhase(n,i,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(t,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}}function u(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function c(t){m(t,o)}function l(t){m(t,a)}function f(t,e,n,r){d.traverseEnterLeave(n,r,s,t,e)}function h(t){m(t,u)}var p=n(152),d=n(231),v=n(346),m=n(347),g=(n(26),p.getListener),y={accumulateTwoPhaseDispatches:c,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:h,accumulateEnterLeaveDispatches:f};t.exports=y},function(t,e,n){"use strict";function r(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}function i(t,e,n){switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(e));default:return!1}}var o=n(25),a=n(230),s=n(231),u=n(232),c=n(346),l=n(347),f=(n(18),{}),h=null,p=function(t,e){t&&(s.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},d=function(t){return p(t,!0)},v=function(t){return p(t,!1)},m=function(t){return"."+t._rootNodeID},g={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(t,e,n){"function"!==typeof n&&o("94",e,typeof n);var r=m(t);(f[e]||(f[e]={}))[r]=n;var i=a.registrationNameModules[e];i&&i.didPutListener&&i.didPutListener(t,e,n)},getListener:function(t,e){var n=f[e];if(i(e,t._currentElement.type,t._currentElement.props))return null;var r=m(t);return n&&n[r]},deleteListener:function(t,e){var n=a.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=f[e];if(r){delete r[m(t)]}},deleteAllListeners:function(t){var e=m(t);for(var n in f)if(f.hasOwnProperty(n)&&f[n][e]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(t,n),delete f[n][e]}},extractEvents:function(t,e,n,r){for(var i,o=a.plugins,s=0;s<o.length;s++){var u=o[s];if(u){var l=u.extractEvents(t,e,n,r);l&&(i=c(i,l))}}return i},enqueueEvents:function(t){t&&(h=c(h,t))},processEventQueue:function(t){var e=h;h=null,t?l(e,d):l(e,v),h&&o("95"),u.rethrowCaughtError()},__purge:function(){f={}},__getListenerBank:function(){return f}};t.exports=g},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(82),o=n(233),a={view:function(t){if(t.view)return t.view;var e=o(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),t.exports=r},function(t,e,n){"use strict";var r={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};t.exports=r},function(t,e,n){var r=n(137);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(370),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e,n){return e in t?(0,i.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r,i;!function(){"use strict";function n(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)){if(r.length){var a=n.apply(null,r);a&&t.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){t.push(r.toString());continue}for(var s in r)o.call(r,s)&&r[s]&&t.push(s)}}}return t.join(" ")}var o={}.hasOwnProperty;"undefined"!==typeof t&&t.exports?(n.default=n,t.exports=n):(r=[],void 0!==(i=function(){return n}.apply(e,r))&&(t.exports=i))}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(1),i=n(0),o=Object(r.a)(function t(e,n){Object(i.a)(this,t),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})},function(t,e,n){"use strict";function r(t){if("function"===typeof t){var e=t;return e.name}if("symbol"===typeof t)return t.toString();var e=t;return e}function i(t,e,n){var r="",i=n(t,e);return 0!==i.length&&(r="\nRegistered bindings:",i.forEach(function(t){var e="Object";null!==t.implementationType&&(e=c(t.implementationType)),r=r+"\n "+e,t.constraint.metaData&&(r=r+" - "+t.constraint.metaData)})),r}function o(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||o(t.parentRequest,e))}function a(t){function e(t,n){void 0===n&&(n=[]);var i=r(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}return e(t).reverse().join(" --\x3e ")}function s(t){t.childRequests.forEach(function(t){if(o(t,t.serviceIdentifier)){var e=a(t);throw new Error(l.CIRCULAR_DEPENDENCY+" "+e)}s(t)})}function u(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach(function(t){n+=t.toString()+"\n"})," "+t+"\n "+t+" - "+n}return" "+t}function c(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var l=n(48);e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=i,e.circularDependencyToException=s,e.listMetadataForTarget=u,e.getFunctionName=c},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.Hover="hover",t.Click="click",t.Select="select",t.Active="active",t.Drag="drag"}(r||(r={}))},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return v});var o=n(0),a=n(1),s=n(12),u=n(32),c=n(3),l=n(4),f=n(2),h=n(6),p=n(9),d=n(287),v=function(t){function e(){var t;Object(o.a)(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(s.a)(t),"isDisable",!1),t}Object(c.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"setIsDisable",value:function(t){if(this.isDisable=t,t){var e;null===(e=this.button)||void 0===e||e.setAttribute("disabled","true")}else{var n;null===(n=this.button)||void 0===n||n.removeAttribute("disabled")}}},{key:"createButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p.b.create("button","l7-button-control ".concat(t))}},{key:"onAdd",value:function(){this.button=this.createButton(),this.isDisable=!1;var t=this.controlOption,e=t.title,n=t.btnText,r=t.btnIcon;return this.setBtnTitle(e),this.setBtnText(n),this.setBtnIcon(r),this.button}},{key:"onRemove",value:function(){this.button=this.buttonIcon=this.buttonText=void 0,this.isDisable=!1}},{key:"setOptions",value:function(t){var n=t.title,r=t.btnText,i=t.btnIcon;this.checkUpdateOption(t,["title"])&&this.setBtnTitle(n),this.checkUpdateOption(t,["btnIcon"])&&this.setBtnIcon(i),this.checkUpdateOption(t,["btnText"])&&this.setBtnText(r),Object(u.a)(Object(f.a)(e.prototype),"setOptions",this).call(this,t)}},{key:"setBtnTitle",value:function(t){var e;null===(e=this.button)||void 0===e||e.setAttribute("title",null!==t&&void 0!==t?t:"")}},{key:"setBtnIcon",value:function(t){if(this.buttonIcon&&p.b.remove(this.buttonIcon),t){var e,n=null===(e=this.button)||void 0===e?void 0:e.firstChild;if(n){var r;null===(r=this.button)||void 0===r||r.insertBefore(t,n)}else{var i;null===(i=this.button)||void 0===i||i.appendChild(t)}this.buttonIcon=t}}},{key:"setBtnText",value:function(t){if(this.button)if(p.b.removeClass(this.button,"l7-button-control--row"),p.b.removeClass(this.button,"l7-button-control--column"),t){var e=this.buttonText;if(!e){var n;e=p.b.create("div","l7-button-control__text"),null===(n=this.button)||void 0===n||n.appendChild(e),this.buttonText=e}e.innerText=t,p.b.addClass(this.button,this.controlOption.vertical?"l7-button-control--column":"l7-button-control--row")}else!t&&this.buttonText&&(p.b.remove(this.buttonText),this.buttonText=void 0)}}]),e}(d.c)},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r=n(0),i=n(1),o=n(4),a=n(2),s=n(3),u=n(12),c=n(961),l=n(163),f=n(445),h=n(194),p=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.width,s=n.height,c=n.latitude,f=void 0===c?0:c,h=n.longitude,p=void 0===h?0:h,d=n.zoom,v=void 0===d?0:d,m=n.pitch,g=void 0===m?0:m,y=n.bearing,_=void 0===y?0:y,b=n.altitude,x=void 0===b?1.5:b,w=n.nearZMultiplier,E=n.farZMultiplier;Object(r.a)(this,e),i=i||1,s=s||1;var S=Object(l.i)(v);x=Math.max(.75,x);var O=Object(l.d)([p,f],S);O[2]=0;var T=Object(l.b)({width:i,height:s,pitch:g,bearing:_,altitude:x,nearZMultiplier:w||1/s,farZMultiplier:E||1.01}),A=Object(l.c)({height:s,center:O,pitch:g,bearing:_,altitude:x,flipY:!0});return t=Object(o.a)(this,Object(a.a)(e).call(this,{width:i,height:s,viewMatrix:A,projectionMatrix:T})),t.latitude=f,t.longitude=p,t.zoom=v,t.pitch=g,t.bearing=_,t.altitude=x,t.scale=S,t.center=O,t.pixelsPerMeter=Object(l.a)(Object(u.a)(Object(u.a)(t))).pixelsPerMeter[2],Object.freeze(Object(u.a)(Object(u.a)(t))),t}return Object(s.a)(e,t),Object(i.a)(e,[{key:"projectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(l.d)(t,e)}},{key:"unprojectFlat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return Object(l.g)(t,e)}},{key:"getMapCenterByLngLatPosition",value:function(t){var e=t.lngLat,n=t.pos,r=Object(l.e)(n,this.pixelUnprojectionMatrix),i=Object(l.d)(e,this.scale),o=h.add([],i,h.negate([],r)),a=h.add([],this.center,o);return Object(l.g)(a,this.scale)}},{key:"getLocationAtPoint",value:function(t){var e=t.lngLat,n=t.pos;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}},{key:"fitBounds",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,o=Object(f.a)(Object.assign({width:r,height:i,bounds:t},n));return new e({width:r,height:i,longitude:o.longitude,latitude:o.latitude,zoom:o.zoom})}}]),e}(c.a)},function(t,e,n){"use strict";function r(t){return Math.pow(2,t)}function i(t){return Math.log2(t)}function o(t,e){var n=Object(p.a)(t,2),r=n[0],i=n[1];Object(y.a)(Number.isFinite(r)&&Number.isFinite(e)),Object(y.a)(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),e*=E;var o=r*x,a=i*x;return[e*(o+_)/(2*_),e*(_-Math.log(Math.tan(b+.5*a)))/(2*_)]}function a(t,e){var n=Object(p.a)(t,2),r=n[0],i=n[1];e*=E;var o=r/e*(2*_)-_,a=2*(Math.atan(Math.exp(_-i/e*(2*_)))-b);return[o*w,a*w]}function s(t){var e=t.latitude,n=t.longitude,i=t.zoom,o=t.scale,a=t.highPrecision,s=void 0!==a&&a;o=void 0!==o?o:r(i),Object(y.a)(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(o));var u={},c=E*o,l=Math.cos(e*x),f=c/360,h=f/l,p=c/S/l;if(u.pixelsPerMeter=[p,-p,p],u.metersPerPixel=[1/p,-1/p,1/p],u.pixelsPerDegree=[f,-h,p],u.degreesPerPixel=[1/f,-1/h,1/p],s){var d=x*Math.tan(e*x)/l,v=f*d/2,m=c/S*d,g=m/h*p;u.pixelsPerDegree2=[0,-v,m],u.pixelsPerMeter2=[g,0,g]}return u}function u(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,o=t.center,a=void 0===o?null:o,s=t.flipY,u=void 0!==s&&s,c=Object(d.a)();return v.translate(c,c,[0,0,-i]),v.scale(c,c,[1,1,1/e]),v.rotateX(c,c,-n*x),v.rotateZ(c,c,r*x),u&&v.scale(c,c,[1,-1,1]),a&&v.translate(c,c,g.negate([],a)),c}function c(t){var e=t.width,n=t.height,r=t.altitude,i=void 0===r?O:r,o=t.pitch,a=void 0===o?0:o,s=t.nearZMultiplier,u=void 0===s?1:s,c=t.farZMultiplier,l=void 0===c?1:c,f=a*x,h=Math.atan(.5/i),p=Math.sin(h)*i/Math.sin(Math.PI/2-f-h),d=Math.cos(Math.PI/2-f)*p+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:u,far:d*l}}function l(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,o=t.nearZMultiplier,a=t.farZMultiplier,s=c({width:e,height:n,altitude:i,pitch:r,nearZMultiplier:o,farZMultiplier:a}),u=s.fov,l=s.aspect,f=s.near,h=s.far;return v.perspective([],u,l,f,h)}function f(t,e){var n=Object(p.a)(t,3),r=n[0],i=n[1],o=n[2],a=void 0===o?0:o;return Object(y.a)(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(a)),Object(d.d)(e,[r,i,a,1])}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(p.a)(t,3),i=r[0],o=r[1],a=r[2];if(Object(y.a)(Number.isFinite(i)&&Number.isFinite(o),"invalid pixel coordinate"),Number.isFinite(a)){return Object(d.d)(e,[i,o,a,1])}var s=Object(d.d)(e,[i,o,0,1]),u=Object(d.d)(e,[i,o,1,1]),c=s[2],l=u[2],f=c===l?0:((n||0)-c)/(l-c);return m.lerp([],s,u,f)}e.i=r,e.f=i,e.d=o,e.g=a,e.a=s,e.c=u,e.b=l,e.h=f,e.e=h;var p=n(15),d=n(198),v=n(193),m=n(194),g=n(280),y=n(444),_=Math.PI,b=_/4,x=_/180,w=180/_,E=512,S=4003e4,O=1.5},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){var r=n(66),i=n(21),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(96)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(68);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=n(17);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){var r=n(17),i=n(44),o=n(27)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";var r=n(25),i=(n(18),{}),o={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,n,i,o,a,s,u){this.isInTransaction()&&r("27");var c,l;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),l=t.call(e,n,i,o,a,s,u),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(t){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=i,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i)try{this.initializeAll(n+1)}catch(t){}}}},closeAll:function(t){this.isInTransaction()||r("28");for(var e=this.transactionWrappers,n=t;n<e.length;n++){var o,a=e[n],s=this.wrapperInitData[n];try{o=!0,s!==i&&a.close&&a.close.call(this,s),o=!1}finally{if(o)try{this.closeAll(n+1)}catch(t){}}}this.wrapperInitData.length=0}};t.exports=o},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(153),o=n(353),a=n(235),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),t.exports=r},function(t,e,n){"use strict";var r,i=n(45),o=n(237),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=n(238),c=u(function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+e+"</svg>";for(var n=r.firstChild;n.firstChild;)t.appendChild(n.firstChild)}});if(i.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(c=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),l=null}t.exports=c},function(t,e,n){"use strict";function r(t){var e=""+t,n=o.exec(e);if(!n)return e;var r,i="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(i+=e.substring(s,a)),s=a+1,i+=r}return s!==a?i+e.substring(s,a):i}function i(t){return"boolean"===typeof t||"number"===typeof t?""+t:r(t)}var o=/["'&<>]/;t.exports=i},function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,v)||(t[v]=p++,f[t[v]]={}),f[t[v]]}var i,o=n(28),a=n(230),s=n(605),u=n(353),c=n(606),l=n(234),f={},h=!1,p=0,d={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),m=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=t}},setEnabled:function(t){m.ReactEventListener&&m.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=r(n),o=a.registrationNameDependencies[t],s=0;s<o.length;s++){var u=o[s];i.hasOwnProperty(u)&&i[u]||("topWheel"===u?l("wheel")?m.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):l("mousewheel")?m.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):m.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?l("scroll",!0)?m.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):m.ReactEventListener.trapBubbledEvent("topScroll","scroll",m.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(l("focus",!0)?(m.ReactEventListener.trapCapturedEvent("topFocus","focus",n),m.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):l("focusin")&&(m.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),m.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),i.topBlur=!0,i.topFocus=!0):d.hasOwnProperty(u)&&m.ReactEventListener.trapBubbledEvent(u,d[u],n),i[u]=!0)}},trapBubbledEvent:function(t,e,n){return m.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return m.ReactEventListener.trapCapturedEvent(t,e,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var t=document.createEvent("MouseEvent");return null!=t&&"pageX"in t},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=m.supportsEventPageXY()),!i&&!h){var t=u.refreshScrollValues;m.ReactEventListener.monitorScrollValue(t),h=!0}}});t.exports=m},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(374),i=n(253);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=!0},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(249);t.exports=function(t){return Object(r(t))}},function(t,e,n){t.exports=n(726)()},function(t,e,n){"use strict";var r=n(263),i=n(739),o=n(748),a=n(749),s=n(759),u=n(390),c=n(819),l=n(825),f=n(828),h=n(928),p=n(929),d=n(930),v=n(431),m=n(932),g=n(933),y=n(934),_=n(937),b=n(938);n(433),n(939);Object(r.c)("rasterTile",f.a),Object(r.c)("mvt",c.a),Object(r.c)("geojsonvt",a.a),Object(r.c)("testTile",p.a),Object(r.c)("geojson",o.a),Object(r.c)("image",s.a),Object(r.c)("csv",i.a),Object(r.c)("json",u.a),Object(r.c)("raster",l.a),Object(r.c)("rasterRgb",h.a),Object(r.d)("cluster",v.a),Object(r.d)("filter",m.a),Object(r.d)("join",_.a),Object(r.d)("map",b.a),Object(r.d)("grid",g.a),Object(r.d)("hexagon",y.a),e.a=d.a},function(t,e,n){"use strict";function r(t){C=t}e.d=r,n.d(e,"c",function(){return P}),n.d(e,"b",function(){return I}),n.d(e,"a",function(){return R});var i=n(396),o=n(764),a=n(397),s=n(186),u=n(398),c=n(158),l=n(271),f=n(765),h=n(270),p=n(402),d=n(401),v=n(403),m=n(766),g=n(404),y=n(767),_=n(399),b=n(768),x=n(769),w=n(400),E=n(770),S=n(771),O=n(772),T=n(773),A=n(185),C=(n(774),!1),k="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,M="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram),P=(k||M)&&C,j={atob:i.a,btoa:i.b,devicePixelRatio:a.a,Blob:o.a,document:s.a,Element:u.a,Event:c.a,EventTarget:l.a,HTMLCanvasElement:f.a,HTMLElement:h.a,HTMLMediaElement:p.a,HTMLVideoElement:d.a,Image:v.a,ImageData:m.a,navigator:y.a,Node:_.a,requestAnimationFrame:x.b,cancelAnimationFrame:x.a,screen:w.a,XMLHttpRequest:T.a,performance:b.a,URL:E.a,WebGLRenderingContext:S.a,WebGL2RenderingContext:O.a,addEventListener:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.a.addEventListener(t,e,n)},removeEventListener:function(t,e,n){s.a.removeEventListener(t,e)},dispatchEvent:function(t){s.a.dispatchEvent(t)},innerWidth:w.a.availWidth,innerHeight:w.a.availHeight,setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval},I=P?j:A.a,R=P?T.a:A.a.XMLHttpRequest;P?g.a:A.a.location},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return i});var r;r=function(){return r||(r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{})}();var i;i="undefined"===typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,n){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window}).call(e,n(80))},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(158),f=n(270),h=n(401),p=n(403),d=n(404),v=function(t){function e(){return Object(o.a)(this,e),n.call(this,"body",0)}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"addEventListener",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"removeEventListener",value:function(t,e,n){}},{key:"dispatchEvent",value:function(t){}}]),e}(f.a),m=function(t){function e(){return Object(o.a)(this,e),n.call(this,"html",0)}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"addEventListener",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),e}(f.a),g={},y={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:d.a,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return t=t.toLowerCase(),"canvas"===t?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new p.a:"video"===t?new h.a:new f.a(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,n){g[t]||(g[t]=[]),g[t].push(e)},removeEventListener:function(t,e){var n=g[t];if(n&&n.length>0)for(var r=n.length;r--;r>0)if(n[r]===e){n.splice(r,1);break}},dispatchEvent:function(t){var e=t.type,n=g[e];if(n)for(var r=0;r<n.length;r++)n[r](t);t.target&&"function"===typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new l.a(t)}};y.documentElement=new m,y.head=new f.a("head"),y.body=new v},function(t,e,n){"use strict";function r(){return i}n.d(e,"a",function(){return r});var i=(n(397),n(272),{})},function(t,e,n){"use strict";function r(t){var e=p.a(t),n=[0,0,0,0];return null!=e&&(n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.opacity),n}function i(t){return(t&&t[0])+256*(t&&t[1])+65536*(t&&t[2])-1}function o(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function a(t){var e=d.b.document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;for(var r=null,i=n.createLinearGradient(0,0,256,1),o=t.positions[0],a=t.positions[t.positions.length-1],s=0;s<t.colors.length;++s){var u=(t.positions[s]-o)/(a-o);i.addColorStop(u,t.colors[s])}if(n.fillStyle=i,n.fillRect(0,0,256,1),d.c)return r=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),e=null,n=null,{data:r,width:256,height:1};r=n.getImageData(0,0,256,1).data;for(var c=n.createImageData(256,1),l=0;l<c.data.length;l+=4)c.data[l+0]=r[l+0],c.data[l+1]=r[l+1],c.data[l+2]=r[l+2],c.data[l+3]=r[l+3];return e=null,n=null,c}function s(t,e){var n=d.b.document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;for(var i=r.createLinearGradient(0,0,256,1),o=e[1]-e[0],a=0;a<t.colors.length;++a){var s=Math.max((t.positions[a]-e[0])/o,0);i.addColorStop(s,t.colors[a])}r.fillStyle=i,r.fillRect(0,0,256,1);var u=r.getImageData(0,0,256,1).data,c=f(r,u);return n=null,r=null,c}function u(t){var e=d.b.document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;var i=n.createImageData(256,1);return i.data.fill(0),t.positions.forEach(function(e,n){var o=r(t.colors[n]);i.data[4*e+0]=255*o[0],i.data[4*e+1]=255*o[1],i.data[4*e+2]=255*o[2],i.data[4*e+3]=255*o[3]}),e=null,n=null,i}function c(t){var e=d.b.document.createElement("canvas"),n=e.getContext("2d");n.globalAlpha=1,e.width=256,e.height=1;for(var r=256/t.colors.length,i=0;i<t.colors.length;i++)n.beginPath(),n.lineWidth=2,n.strokeStyle=t.colors[i],n.moveTo(i*r,0),n.lineTo((i+1)*r,0),n.stroke();var o=n.getImageData(0,0,256,1).data,a=f(n,o);return e=null,n=null,a}function l(t,e){var n=d.b.document.createElement("canvas"),r=n.getContext("2d");r.globalAlpha=1,n.width=256,n.height=1;var i=e[1]-e[0];t.positions.length-t.colors.length!==1&&console.warn("positions \u7684\u6570\u5b57\u4e2a\u6570\u5e94\u5f53\u6bd4 colors \u7684\u6837\u5f0f\u591a\u4e00\u4e2a,poisitions \u7684\u9996\u5c3e\u503c\u4e00\u822c\u4e3a\u6570\u636e\u7684\u6700\u5927\u6700\u65b0\u503c");for(var o=0;o<t.colors.length;o++)r.beginPath(),r.lineWidth=2,r.strokeStyle=t.colors[o],r.moveTo((t.positions[o]-e[0])/i*255,0),r.lineTo((t.positions[o+1]-e[0])/i*255,0),r.stroke();var a=r.getImageData(0,0,256,1).data,s=f(r,a);return n=null,r=null,s}function f(t,e){for(var n=t.createImageData(256,1),r=0;r<n.data.length;r+=4)n.data[r+0]=e[r+0],n.data[r+1]=e[r+1],n.data[r+2]=e[r+2],n.data[r+3]=e[r+3];return n}function h(t){switch(t.type){case"cat":return[0,255];default:return[0,1]}}e.i=r,e.a=i,e.b=o,e.d=a,e.f=s,e.c=u,e.g=c,e.e=l,e.h=h;var p=n(107),d=n(184)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i});var r=function(t){return t.Realtime="realtime",t.Overlap="overlap",t.Replace="replace",t}({}),i=function(t){return t.Loading="Loading",t.Loaded="Loaded",t.Failure="Failure",t.Cancelled="Cancelled",t}({})},function(t,e,n){"use strict";function r(t,e,n){return[Math.floor((t+180)/360*Math.pow(2,n)),Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,n))]}function i(t,e,n){var r=t/Math.pow(2,n)*360-180,i=Math.PI-2*Math.PI*e/Math.pow(2,n);return[r,180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)))]}function o(t){var e=t.zoom,n=t.latLonBounds,i=t.maxZoom,o=void 0===i?1/0:i,u=t.minZoom,c=void 0===u?0:u,l=t.zoomOffset,f=void 0===l?0:l,h=t.extent,p=void 0===h?s.c:h,d=Math.ceil(e)+f;if(Number.isFinite(c)&&d<c)return[];Number.isFinite(o)&&d>o&&(d=o);for(var v=Object(a.a)(n,4),m=v[0],g=v[1],y=v[2],_=v[3],b=[Math.max(m,p[0]),Math.max(g,p[1]),Math.min(y,p[2]),Math.min(_,p[3])],x=[],w=r(b[0],b[1],d),E=Object(a.a)(w,2),S=E[0],O=E[1],T=r(b[2],b[3],d),A=Object(a.a)(T,2),C=A[0],k=A[1],M=S;M<=C;M++)for(var P=k;P<=O;P++)x.push({x:M,y:P,z:d});var j=(C+S)/2,I=(O+k)/2,R=function(t,e){return Math.abs(t-j)+Math.abs(e-I)};return x.sort(function(t,e){return R(t.x,t.y)-R(e.x,e.y)}),x}e.c=r,n.d(e,"d",function(){return u}),e.a=o,n.d(e,"b",function(){return c});var a=n(15),s=n(407),u=function(t,e,n){var r=i(t,e,n),o=Object(a.a)(r,2),s=o[0],u=o[1],c=i(t+1,e+1,n),l=Object(a.a)(c,2),f=l[0];return[s,l[1],f,u]},c=function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Math.pow(2,n),o=i-1,a=i,s=t,u=e;return r&&(s<0?s+=a:s>o&&(s%=a)),{warpX:s,warpY:u}}},function(t,e,n){"use strict";function r(t){var e=t.coordinates,n=t.originCoordinates,r=t.version,i=new l.a({dash:!0,join:"bevel"});if("GAODE2.x"===r){var o=e;Array.isArray(o[0][0])||(o=[e]);var a=n;Array.isArray(a[0][0])||(a=[n]);for(var s=0;s<o.length;s++){var u=o[s],c=a[s];i.extrude_gaode2(u,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach(function(t){i.extrude(t)})}var h=i.complex;return{vertices:h.positions,indices:h.indices,normals:h.normals,indexes:h.indexes,size:6}}function i(t){var e=Object(c.g)(t.coordinates);return{vertices:[].concat(Object(a.a)(e),Object(a.a)(e),Object(a.a)(e),Object(a.a)(e)),indices:[0,1,2,2,3,0],size:e.length}}function o(t){var e=t.coordinates,n=u.a.flatten(e),r=n.vertices,i=n.dimensions,o=n.holes;return{indices:u()(r,o,i),vertices:r,size:i}}e.a=r,e.b=i,e.c=o;var a=n(20),s=n(279),u=n.n(s),c=n(140),l=n(812)},function(t,e,n){"use strict";function r(){var t=new K.a(16);return K.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function i(t){var e=new K.a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function a(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v){var m=new K.a(16);return m[0]=t,m[1]=e,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=u,m[9]=c,m[10]=l,m[11]=f,m[12]=h,m[13]=p,m[14]=d,m[15]=v,m}function s(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=p,t[13]=d,t[14]=v,t[15]=m,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function l(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*s-r*a,_=n*u-i*a,b=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=l*v-f*d,O=l*m-h*d,T=l*g-p*d,A=f*m-h*v,C=f*g-p*v,k=h*g-p*m,M=y*k-_*C+b*A+x*T-w*O+E*S;return M?(M=1/M,t[0]=(s*k-u*C+c*A)*M,t[1]=(i*C-r*k-o*A)*M,t[2]=(v*E-m*w+g*x)*M,t[3]=(h*w-f*E-p*x)*M,t[4]=(u*T-a*k-c*O)*M,t[5]=(n*k-i*T+o*O)*M,t[6]=(m*b-d*E-g*_)*M,t[7]=(l*E-h*b+p*_)*M,t[8]=(a*C-s*T+c*S)*M,t[9]=(r*T-n*C-o*S)*M,t[10]=(d*w-v*b+g*y)*M,t[11]=(f*b-l*w-p*y)*M,t[12]=(s*O-a*A-u*S)*M,t[13]=(n*A-r*O+i*S)*M,t[14]=(v*_-d*x-m*y)*M,t[15]=(l*x-f*_+h*y)*M,t):null}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15];return t[0]=s*(h*g-p*m)-f*(u*g-c*m)+v*(u*p-c*h),t[1]=-(r*(h*g-p*m)-f*(i*g-o*m)+v*(i*p-o*h)),t[2]=r*(u*g-c*m)-s*(i*g-o*m)+v*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*g-p*m)-l*(u*g-c*m)+d*(u*p-c*h)),t[5]=n*(h*g-p*m)-l*(i*g-o*m)+d*(i*p-o*h),t[6]=-(n*(u*g-c*m)-a*(i*g-o*m)+d*(i*c-o*u)),t[7]=n*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*g-p*v)-l*(s*g-c*v)+d*(s*p-c*f),t[9]=-(n*(f*g-p*v)-l*(r*g-o*v)+d*(r*p-o*f)),t[10]=n*(s*g-c*v)-a*(r*g-o*v)+d*(r*c-o*s),t[11]=-(n*(s*p-c*f)-a*(r*p-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*m-h*v)-l*(s*m-u*v)+d*(s*h-u*f)),t[13]=n*(f*m-h*v)-l*(r*m-i*v)+d*(r*h-i*f),t[14]=-(n*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),t}function h(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15];return(e*a-n*o)*(f*m-h*v)-(e*s-r*o)*(l*m-h*d)+(e*u-i*o)*(l*v-f*d)+(n*s-r*a)*(c*m-h*p)-(n*u-i*a)*(c*v-f*p)+(r*u-i*s)*(c*d-l*p)}function p(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*f+w*v,t[1]=_*i+b*u+x*h+w*m,t[2]=_*o+b*c+x*p+w*g,t[3]=_*a+b*l+x*d+w*y,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*r+b*s+x*f+w*v,t[5]=_*i+b*u+x*h+w*m,t[6]=_*o+b*c+x*p+w*g,t[7]=_*a+b*l+x*d+w*y,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*r+b*s+x*f+w*v,t[9]=_*i+b*u+x*h+w*m,t[10]=_*o+b*c+x*p+w*g,t[11]=_*a+b*l+x*d+w*y,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*r+b*s+x*f+w*v,t[13]=_*i+b*u+x*h+w*m,t[14]=_*o+b*c+x*p+w*g,t[15]=_*a+b*l+x*d+w*y,t}function d(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,v=n[0],m=n[1],g=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*g+e[12],t[13]=i*v+u*m+h*g+e[13],t[14]=o*v+c*m+p*g+e[14],t[15]=a*v+l*m+d*g+e[15]),t}function v(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function m(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,d,v,m,g,y,_,b,x,w,E,S,O,T,A,C=r[0],k=r[1],M=r[2],P=Math.hypot(C,k,M);return P<K.b?null:(P=1/P,C*=P,k*=P,M*=P,i=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=e[6],d=e[7],v=e[8],m=e[9],g=e[10],y=e[11],_=C*C*a+o,b=k*C*a+M*i,x=M*C*a-k*i,w=C*k*a-M*i,E=k*k*a+o,S=M*k*a+C*i,O=C*M*a+k*i,T=k*M*a-C*i,A=M*M*a+o,t[0]=s*_+f*b+v*x,t[1]=u*_+h*b+m*x,t[2]=c*_+p*b+g*x,t[3]=l*_+d*b+y*x,t[4]=s*w+f*E+v*S,t[5]=u*w+h*E+m*S,t[6]=c*w+p*E+g*S,t[7]=l*w+d*E+y*S,t[8]=s*O+f*T+v*A,t[9]=u*O+h*T+m*A,t[10]=c*O+p*T+g*A,t[11]=l*O+d*T+y*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function g(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function y(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t}function _(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function b(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function w(t,e,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<K.b?null:(c=1/c,a*=c,s*=c,u*=c,r=Math.sin(e),i=Math.cos(e),o=1-i,t[0]=a*a*o+i,t[1]=s*a*o+u*r,t[2]=u*a*o-s*r,t[3]=0,t[4]=a*s*o-u*r,t[5]=s*s*o+i,t[6]=u*s*o+a*r,t[7]=0,t[8]=a*u*o+s*r,t[9]=s*u*o-a*r,t[10]=u*u*o+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function E(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function O(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,p=i*u,d=i*c,v=o*c,m=a*s,g=a*u,y=a*c;return t[0]=1-(p+v),t[1]=f+y,t[2]=h-g,t[3]=0,t[4]=f-y,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=h+g,t[9]=d-m,t[10]=1-(l+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function A(t,e){var n=new K.a(3),r=-e[0],i=-e[1],o=-e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=r*r+i*i+o*o+a*a;return f>0?(n[0]=2*(s*a+l*r+u*o-c*i)/f,n[1]=2*(u*a+l*i+c*r-s*o)/f,n[2]=2*(c*a+l*o+s*i-u*r)/f):(n[0]=2*(s*a+l*r+u*o-c*i),n[1]=2*(u*a+l*i+c*r-s*o),n[2]=2*(c*a+l*o+s*i-u*r)),T(t,e,n),t}function C(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function k(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,a,s),t[2]=Math.hypot(u,c,l),t}function M(t,e){var n=new K.a(3);k(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,s=e[1]*i,u=e[2]*o,c=e[4]*r,l=e[5]*i,f=e[6]*o,h=e[8]*r,p=e[9]*i,d=e[10]*o,v=a+l+d,m=0;return v>0?(m=2*Math.sqrt(v+1),t[3]=.25*m,t[0]=(f-p)/m,t[1]=(h-u)/m,t[2]=(s-c)/m):a>l&&a>d?(m=2*Math.sqrt(1+a-l-d),t[3]=(f-p)/m,t[0]=.25*m,t[1]=(s+c)/m,t[2]=(h+u)/m):l>d?(m=2*Math.sqrt(1+l-a-d),t[3]=(h-u)/m,t[0]=(s+c)/m,t[1]=.25*m,t[2]=(f+p)/m):(m=2*Math.sqrt(1+d-a-l),t[3]=(s-c)/m,t[0]=(h+u)/m,t[1]=(f+p)/m,t[2]=.25*m),t}function P(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,p=i*l,d=o*c,v=o*l,m=a*l,g=s*u,y=s*c,_=s*l,b=r[0],x=r[1],w=r[2];return t[0]=(1-(d+m))*b,t[1]=(h+_)*b,t[2]=(p-y)*b,t[3]=0,t[4]=(h-_)*x,t[5]=(1-(f+m))*x,t[6]=(v+g)*x,t[7]=0,t[8]=(p+y)*w,t[9]=(v-g)*w,t[10]=(1-(f+d))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function j(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,h=o*c,p=o*l,d=o*f,v=a*l,m=a*f,g=s*f,y=u*c,_=u*l,b=u*f,x=r[0],w=r[1],E=r[2],S=i[0],O=i[1],T=i[2],A=(1-(v+g))*x,C=(p+b)*x,k=(d-_)*x,M=(p-b)*w,P=(1-(h+g))*w,j=(m+y)*w,I=(d+_)*E,R=(m-y)*E,L=(1-(h+v))*E;return t[0]=A,t[1]=C,t[2]=k,t[3]=0,t[4]=M,t[5]=P,t[6]=j,t[7]=0,t[8]=I,t[9]=R,t[10]=L,t[11]=0,t[12]=n[0]+S-(A*S+M*O+I*T),t[13]=n[1]+O-(C*S+P*O+R*T),t[14]=n[2]+T-(k*S+j*O+L*T),t[15]=1,t}function I(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,v=o*a,m=o*s,g=o*u;return t[0]=1-f-d,t[1]=l+g,t[2]=h-m,t[3]=0,t[4]=l-g,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+m,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function L(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function D(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=i*o,t[14]=i*r*o):(t[10]=-1,t[14]=-r),t}function N(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function z(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}function F(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=o*c,t[15]=1,t}function B(t,e,n,r){var i,o,a,s,c,l,f,h,p,d,v=e[0],m=e[1],g=e[2],y=r[0],_=r[1],b=r[2],x=n[0],w=n[1],E=n[2];return Math.abs(v-x)<K.b&&Math.abs(m-w)<K.b&&Math.abs(g-E)<K.b?u(t):(f=v-x,h=m-w,p=g-E,d=1/Math.hypot(f,h,p),f*=d,h*=d,p*=d,i=_*p-b*h,o=b*f-y*p,a=y*h-_*f,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=h*a-p*o,c=p*i-f*a,l=f*o-h*i,d=Math.hypot(s,c,l),d?(d=1/d,s*=d,c*=d,l*=d):(s=0,c=0,l=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=o,t[5]=c,t[6]=h,t[7]=0,t[8]=a,t[9]=l,t[10]=p,t[11]=0,t[12]=-(i*v+o*m+a*g),t[13]=-(s*v+c*m+l*g),t[14]=-(f*v+h*m+p*g),t[15]=1,t)}function U(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],f=o-n[1],h=a-n[2],p=l*l+f*f+h*h;p>0&&(p=1/Math.sqrt(p),l*=p,f*=p,h*=p);var d=u*h-c*f,v=c*l-s*h,m=s*f-u*l;return p=d*d+v*v+m*m,p>0&&(p=1/Math.sqrt(p),d*=p,v*=p,m*=p),t[0]=d,t[1]=v,t[2]=m,t[3]=0,t[4]=f*m-h*v,t[5]=h*d-l*m,t[6]=l*v-f*d,t[7]=0,t[8]=l,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function V(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function G(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function H(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function W(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function q(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function Z(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function X(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Y(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],p=t[11],d=t[12],v=t[13],m=t[14],g=t[15],y=e[0],_=e[1],b=e[2],x=e[3],w=e[4],E=e[5],S=e[6],O=e[7],T=e[8],A=e[9],C=e[10],k=e[11],M=e[12],P=e[13],j=e[14],I=e[15];return Math.abs(n-y)<=K.b*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-_)<=K.b*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=K.b*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-x)<=K.b*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=K.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-E)<=K.b*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-S)<=K.b*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-O)<=K.b*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(l-T)<=K.b*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-A)<=K.b*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(h-C)<=K.b*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(p-k)<=K.b*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(d-M)<=K.b*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(v-P)<=K.b*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(m-j)<=K.b*Math.max(1,Math.abs(m),Math.abs(j))&&Math.abs(g-I)<=K.b*Math.max(1,Math.abs(g),Math.abs(I))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.copy=o,e.fromValues=a,e.set=s,e.identity=u,e.transpose=c,e.invert=l,e.adjoint=f,e.determinant=h,e.multiply=p,e.translate=d,e.scale=v,e.rotate=m,e.rotateX=g,e.rotateY=y,e.rotateZ=_,e.fromTranslation=b,e.fromScaling=x,e.fromRotation=w,e.fromXRotation=E,e.fromYRotation=S,e.fromZRotation=O,e.fromRotationTranslation=T,e.fromQuat2=A,e.getTranslation=C,e.getScaling=k,e.getRotation=M,e.fromRotationTranslationScale=P,e.fromRotationTranslationScaleOrigin=j,e.fromQuat=I,e.frustum=R,e.perspectiveNO=L,n.d(e,"perspective",function(){return J}),e.perspectiveZO=D,e.perspectiveFromFieldOfView=N,e.orthoNO=z,n.d(e,"ortho",function(){return Q}),e.orthoZO=F,e.lookAt=B,e.targetTo=U,e.str=V,e.frob=G,e.add=H,e.subtract=W,e.multiplyScalar=q,e.multiplyScalarAndAdd=Z,e.exactEquals=X,e.equals=Y,n.d(e,"mul",function(){return $}),n.d(e,"sub",function(){return tt});var K=n(74),J=L,Q=z,$=p,tt=W},function(t,e,n){"use strict";function r(){var t=new B.a(2);return B.a!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t){var e=new B.a(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new B.a(2);return n[0]=t,n[1]=e,n}function a(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,n){return t[0]=e,t[1]=n,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function y(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function x(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function w(t){var e=t[0],n=t[1];return e*e+n*n}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t}function S(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function O(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function C(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function k(t,e){e=e||1;var n=2*B.c()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function M(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function P(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function R(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t}function L(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function D(t){return t[0]=0,t[1]=0,t}function N(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]}function F(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=B.b*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=B.b*Math.max(1,Math.abs(r),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.fromValues=o,e.copy=a,e.set=s,e.add=u,e.subtract=c,e.multiply=l,e.divide=f,e.ceil=h,e.floor=p,e.min=d,e.max=v,e.round=m,e.scale=g,e.scaleAndAdd=y,e.distance=_,e.squaredDistance=b,e.length=x,e.squaredLength=w,e.negate=E,e.inverse=S,e.normalize=O,e.dot=T,e.cross=A,e.lerp=C,e.random=k,e.transformMat2=M,e.transformMat2d=P,e.transformMat3=j,e.transformMat4=I,e.rotate=R,e.angle=L,e.zero=D,e.str=N,e.exactEquals=z,e.equals=F,n.d(e,"len",function(){return U}),n.d(e,"sub",function(){return V}),n.d(e,"mul",function(){return G}),n.d(e,"div",function(){return H}),n.d(e,"dist",function(){return W}),n.d(e,"sqrDist",function(){return q}),n.d(e,"sqrLen",function(){return Z}),n.d(e,"forEach",function(){return X});var B=n(74),U=x,V=c,G=l,H=f,W=_,q=b,Z=w,X=function(){var t=r();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";function r(t,e,n){return i.apply(this,arguments)}function i(){return i=Object(h.a)(d.a.mark(function t(e,n,r){var i,a,s,u,h,p;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return",{rasterData:[0],width:1,heigh:1});case 2:return t.next=4,Promise.all(e.map(function(t){var e=t.data,r=t.bands;return n(e,void 0===r?[0]:r)}));case 4:i=t.sent,a=[],i.forEach(function(t){Array.isArray(t)?a.push.apply(a,Object(f.a)(t)):a.push(t)}),s=a[0],u=s.width,h=s.height,t.t0=Object(l.a)(r),t.next="function"===t.t0?11:"object"===t.t0?13:15;break;case 11:return p=r(a),t.abrupt("break",16);case 13:return p=Array.isArray(r)?{rasterData:Object(v.a)(r,a)}:o(r,a),t.abrupt("break",16);case 15:p={rasterData:a[0].rasterData};case 16:return t.abrupt("return",Object(c.a)(Object(c.a)({},p),{},{width:u,height:h}));case 17:case"end":return t.stop()}},t)})),i.apply(this,arguments)}function o(t,e){var n=m.a[t.type];return"function"===n.type?n.method(e,null===t||void 0===t?void 0:t.options):"operation"===n.type?"rgb"===t.type?a(n.expression,e):{rasterData:Object(v.a)(n.expression,e)}:void 0}function a(t,e){return void 0===t.r&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),void 0===t.g&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),void 0===t.b&&console.warn("Channel B lost in Operation! Use band[0] to fill!"),[Object(v.a)(t.r||["band",0],e),Object(v.a)(t.g||["band",0],e),Object(v.a)(t.b||["band",0],e)]}function s(t,e,n,r){return u.apply(this,arguments)}function u(){return u=Object(h.a)(d.a.mark(function t(e,n,i,o){var a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e,n,i);case 2:a=t.sent,o(null,{data:a});case 4:case"end":return t.stop()}},t)})),u.apply(this,arguments)}e.a=r,e.b=s;var c=n(10),l=n(83),f=n(20),h=n(7),p=n(8),d=n.n(p),v=n(826),m=n(827)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o=n(0),a=n(1),s=n(6),u=n(13),c=(n.n(u),n(14)),l=(n.n(c),n(42)),f=n(110),h=(r=Object(u.injectable)())(i=function(){function t(){Object(o.a)(this,t),Object(s.a)(this,"shaderModuleService",void 0),Object(s.a)(this,"rendererService",void 0),Object(s.a)(this,"cameraService",void 0),Object(s.a)(this,"mapService",void 0),Object(s.a)(this,"interactionService",void 0),Object(s.a)(this,"layerService",void 0),Object(s.a)(this,"config",void 0)}return Object(a.a)(t,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return f.a.Normal}},{key:"init",value:function(t,e){this.config=e,this.rendererService=t.getContainer().get(l.a.IRendererService),this.cameraService=t.getContainer().get(l.a.ICameraService),this.mapService=t.getContainer().get(l.a.IMapService),this.interactionService=t.getContainer().get(l.a.IInteractionService),this.layerService=t.getContainer().get(l.a.ILayerService),this.shaderModuleService=t.getContainer().get(l.a.IShaderModuleService)}},{key:"render",value:function(t){}}]),t}())||i},function(t,e,n){"use strict";var r=(n(161),n(287));n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b});n(436),n(288)},function(t,e,n){"use strict";function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(t,e){var n=s.transformMat4([],e,t);return s.scale(n,n,1/n[3]),n}function o(t,e){var n=t%e;return n<0?e+n:n}function a(t,e,n){return n*e+(1-n)*t}e.a=r,e.d=i,e.c=o,e.b=a;var s=n(281)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(112),a=function(){function t(e,n){Object(r.a)(this,t),e&&(n?this.setSouthWest(e).setNorthEast(n):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}return Object(i.a)(t,[{key:"setNorthEast",value:function(t){return this.ne=t instanceof o.a?new o.a(t.lng,t.lat):o.a.convert(t),this}},{key:"setSouthWest",value:function(t){return this.sw=t instanceof o.a?new o.a(t.lng,t.lat):o.a.convert(t),this}},{key:"extend",value:function(e){var n,r,i=this.sw,a=this.ne;if(e instanceof o.a)n=e,r=e;else{if(!(e instanceof t)){if(Array.isArray(e)){if(4===e.length||e.every(Array.isArray)){var s=e;return this.extend(t.convert(s))}var u=e;return this.extend(o.a.convert(u))}return this}if(n=e.sw,r=e.ne,!n||!r)return this}return i||a?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this.sw=new o.a(n.lng,n.lat),this.ne=new o.a(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new o.a((this.sw.lng+this.ne.lng)/2,(this.sw.lat+this.ne.lat)/2)}},{key:"getSouthWest",value:function(){return this.sw}},{key:"getNorthEast",value:function(){return this.ne}},{key:"getNorthWest",value:function(){return new o.a(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new o.a(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this.sw.lng}},{key:"getSouth",value:function(){return this.sw.lat}},{key:"getEast",value:function(){return this.ne.lng}},{key:"getNorth",value:function(){return this.ne.lat}},{key:"toArray",value:function(){return[this.sw.toArray(),this.ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this.sw.toString(),", ").concat(this.ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this.sw&&this.ne)}},{key:"contains",value:function(t){var e=o.a.convert(t),n=e.lng,r=e.lat,i=this.sw.lat<=r&&r<=this.ne.lat,a=this.sw.lng<=n&&n<=this.ne.lng;return this.sw.lng>this.ne.lng&&(a=this.sw.lng>=n&&n>=this.ne.lng),i&&a}}],[{key:"convert",value:function(e){return e instanceof t?e:new t(e)}}]),t}()},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(978),o=n(979),a=n(980),s=n(981),u=n(982);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=n(202);t.exports=r},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e,n){function r(t){return null==t?void 0===t?u:s:c&&c in Object(t)?o(t):a(t)}var i=n(450),o=n(989),a=n(990),s="[object Null]",u="[object Undefined]",c=i?i.toStringTag:void 0;t.exports=r},function(t,e,n){var r=n(291),i=r(Object,"create");t.exports=i},function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=n(1004);t.exports=r},function(t,e,n){"use strict";function r(t,e){var n=u[e];return void 0===t.buttons||(t.buttons&n)!==n}n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s}),e.c=r;var i,o=n(6),a=0,s=2,u=(i={},Object(o.a)(i,a,1),Object(o.a)(i,s,2),i)},function(t,e,n){"use strict";n.d(e,"a",function(){return A});var r,i,o,a,s,u,c,l,f,h,p,d=n(39),v=n(0),m=n(1),g=n(6),y=n(40),_=(n(41),n(11)),b=n(9),x=n(13),w=(n.n(x),n(14)),E=(n.n(w),n(92)),S=n(442),O=n(1071),T={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},A=(r=Object(x.injectable)(),i=Object(x.inject)(_.p.MapConfig),o=Object(x.inject)(_.p.IGlobalConfigService),a=Object(x.inject)(_.p.ICoordinateSystemService),s=Object(x.inject)(_.p.IEventEmitter),r((c=function(){function t(){var e=this;Object(v.a)(this,t),Object(g.a)(this,"version",E.a.DEFUALT),Object(g.a)(this,"simpleMapCoord",new S.a),Object(g.a)(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Object(d.a)(this,"config",l,this),Object(d.a)(this,"configService",f,this),Object(d.a)(this,"coordinateSystemService",h,this),Object(d.a)(this,"eventEmitter",p,this),Object(g.a)(this,"handleCameraChanged",function(t){var n=e.map.getCenter(),r=n.lat,i=n.lng;e.emit("mapchange"),e.viewport.syncWithMapCamera({bearing:e.map.getBearing(),center:[i,r],viewportHeight:e.map.transform.height,pitch:e.map.getPitch(),viewportWidth:e.map.transform.width,zoom:e.map.getZoom(),cameraHeight:0}),e.updateCoordinateSystemService(),e.cameraChangedCallback(e.viewport)})}return Object(m.a)(t,[{key:"setBgColor",value:function(t){this.bgColor=t}},{key:"addMarkerContainer",value:function(){var t=this.map.getCanvasContainer();this.markerContainer=b.b.create("div","l7-marker-container",t),this.markerContainer.setAttribute("tabindex","-1")}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"getOverlayContainer",value:function(){}},{key:"on",value:function(t,e){-1!==_.h.indexOf(t)?this.eventEmitter.on(t,e):this.map.on(T[t]||t,e)}},{key:"off",value:function(t,e){this.map.off(T[t]||t,e),this.eventEmitter.off(t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){if(this.version===E.a.SIMPLE)return this.simpleMapCoord.getSize();var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"default"}},{key:"getZoom",value:function(){return this.map.getZoom()}},{key:"setZoom",value:function(t){return this.map.setZoom(t)}},{key:"getCenter",value:function(){return this.map.getCenter()}},{key:"setCenter",value:function(t){this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return this.map.getBearing()}},{key:"getBounds",value:function(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.map.getMaxZoom()}},{key:"setRotation",value:function(t){this.map.setBearing(t)}},{key:"zoomIn",value:function(t,e){this.map.zoomIn(t,e)}},{key:"zoomOut",value:function(t,e){this.map.zoomOut(t,e)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.map.panBy([t,e])}},{key:"fitBounds",value:function(t,e){this.map.fitBounds(t,e)}},{key:"setMaxZoom",value:function(t){this.map.setMaxZoom(t)}},{key:"setMinZoom",value:function(t){this.map.setMinZoom(t)}},{key:"setMapStatus",value:function(t){!0===t.doubleClickZoom&&this.map.doubleClickZoom.enable(),!1===t.doubleClickZoom&&this.map.doubleClickZoom.disable(),!1===t.dragEnable&&this.map.dragPan.disable(),!0===t.dragEnable&&this.map.dragPan.enable(),!1===t.rotateEnable&&this.map.dragRotate.disable(),!0===t.dragEnable&&this.map.dragRotate.enable(),!1===t.keyboardEnable&&this.map.keyboard.disable(),!0===t.keyboardEnable&&this.map.keyboard.enable(),!1===t.zoomEnable&&this.map.scrollZoom.disable(),!0===t.zoomEnable&&this.map.scrollZoom.enable()}},{key:"setZoomAndCenter",value:function(t,e){this.map.flyTo({zoom:t,center:e})}},{key:"setMapStyle",value:function(t){this.map.setStyle(this.getMapStyleValue(t))}},{key:"meterToCoord",value:function(t,e){return 1}},{key:"pixelToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToPixel",value:function(t){return this.map.project(t)}},{key:"containerToLngLat",value:function(t){return this.map.unproject(t)}},{key:"lngLatToContainer",value:function(t){return this.map.project(t)}},{key:"getMapStyle",value:function(){try{var t,e=null!==(t=this.map.getStyle().sprite)&&void 0!==t?t:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(e)?null===e||void 0===e?void 0:e.replace(/\/\w+$/,"").replace(/sprites/,"styles"):e}catch(t){return""}}},{key:"getMapStyleConfig",value:function(){return O.a}},{key:"getMapStyleValue",value:function(t){var e;return null!==(e=this.getMapStyleConfig()[t])&&void 0!==e?e:t}},{key:"destroy",value:function(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"exportMap",value:function(t){var e=this.map.getCanvas();return"jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png")}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"creatMapContainer",value:function(t){var e=t;return"string"===typeof t&&(e=document.getElementById(t)),e}},{key:"updateView",value:function(t){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:t.bearing,center:t.center,viewportHeight:t.viewportHeight,pitch:t.pitch,viewportWidth:t.viewportWidth,zoom:t.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}},{key:"updateCoordinateSystemService",value:function(){var t=this.config.offsetCoordinate,e=void 0===t||t;this.viewport.getZoom()>12&&e?this.coordinateSystemService.setCoordinateSystem(_.d.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(_.d.LNGLAT)}}]),t}(),l=Object(y.a)(c.prototype,"config",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(y.a)(c.prototype,"configService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(y.a)(c.prototype,"coordinateSystemService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(y.a)(c.prototype,"eventEmitter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u)},function(t,e,n){"use strict";function r(t){return t/180*Math.acos(-1)}function i(t){var e=r(t[0])+Math.PI/2,n=r(t[1]),i=u+.4*Math.random(),o=i*Math.cos(n)*Math.cos(e);return[i*Math.cos(n)*Math.sin(e),i*Math.sin(n),o]}function o(t,e){var n=s.b.create(),r=s.b.create(),i=s.d.fromValues(0,1,0),o=s.d.fromValues(0,0,0);e=e||{},t="undefined"!==typeof t?t:1;for(var u="undefined"!==typeof e.segments?e.segments:32,c=2+u,l=2*c,f=[],h=[],p=[],d=[],v=[],m=[],g=0;g<=c;g++){for(var y=g/c,_=y*Math.PI,b=0;b<=l;b++){var x=b/l,w=x*Math.PI*2;s.b.identity(r),s.b.rotateZ(r,r,-_),s.b.identity(n),s.b.rotateY(n,n,w),s.d.transformMat4(o,i,r),s.d.transformMat4(o,o,n),s.d.scale(o,o,-t),p.push(o.slice()),d.push.apply(d,Object(a.a)(o.slice())),s.d.normalize(o,o),v.push.apply(v,Object(a.a)(o.slice())),m.push([x,1-y]),d.push(x,1-y)}if(g>0)for(var E=p.length,S=E-2*(l+1);S+l+2<E;S++)f.push([S,S+1,S+l+1]),h.push(S,S+1,S+l+1),f.push([S+l+1,S+1,S+l+2]),h.push(S+l+1,S+1,S+l+2)}return{cells:f,positions:p,uvs:m,positionsArr:d,indicesArr:h,normalArr:v}}n.d(e,"a",function(){return u}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return l}),e.d=i,e.e=o;var a=n(20),s=n(36),u=100,c=36,l=40},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1128),g=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"type","RasterLayer"),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new m.a[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getDefaultConfig",value:function(){return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[this.getModelType()]}},{key:"getModelType",value:function(){switch(this.layerSource.getParserType()){case"raster":return"raster";case"rasterRgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}}]),e}(v.a)},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}},function(t,e,n){"use strict";var r=n(212);e.a=function(t){return t=Object(r.b)(Math.abs(t)),t?t[1]:NaN}},function(t,e,n){"use strict";function r(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}e.b=r,e.a=function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}},function(t,e,n){"use strict";n.d(e,"j",function(){return _}),n.d(e,"m",function(){return b}),n.d(e,"e",function(){return x}),n.d(e,"h",function(){return w}),n.d(e,"i",function(){return E}),n.d(e,"g",function(){return S}),n.d(e,"n",function(){return O}),n.d(e,"c",function(){return T}),n.d(e,"f",function(){return A}),n.d(e,"a",function(){return C}),n.d(e,"b",function(){return k}),n.d(e,"k",function(){return M}),n.d(e,"l",function(){return P}),n.d(e,"d",function(){return j});var r,i,o,a,s,u,c,l,f,h,p,d,v,m,g=n(6),y=n(11),_=(r={},Object(g.a)(r,y.t.POINTS,"points"),Object(g.a)(r,y.t.LINES,"lines"),Object(g.a)(r,y.t.LINE_LOOP,"line loop"),Object(g.a)(r,y.t.LINE_STRIP,"line strip"),Object(g.a)(r,y.t.TRIANGLES,"triangles"),Object(g.a)(r,y.t.TRIANGLE_FAN,"triangle fan"),Object(g.a)(r,y.t.TRIANGLE_STRIP,"triangle strip"),r),b=(i={},Object(g.a)(i,y.t.STATIC_DRAW,"static"),Object(g.a)(i,y.t.DYNAMIC_DRAW,"dynamic"),Object(g.a)(i,y.t.STREAM_DRAW,"stream"),i),x=(o={},Object(g.a)(o,y.t.BYTE,"int8"),Object(g.a)(o,y.t.UNSIGNED_INT,"int16"),Object(g.a)(o,y.t.INT,"int32"),Object(g.a)(o,y.t.UNSIGNED_BYTE,"uint8"),Object(g.a)(o,y.t.UNSIGNED_SHORT,"uint16"),Object(g.a)(o,y.t.UNSIGNED_INT,"uint32"),Object(g.a)(o,y.t.FLOAT,"float"),o),w=(a={},Object(g.a)(a,y.t.ALPHA,"alpha"),Object(g.a)(a,y.t.LUMINANCE,"luminance"),Object(g.a)(a,y.t.LUMINANCE_ALPHA,"luminance alpha"),Object(g.a)(a,y.t.RGB,"rgb"),Object(g.a)(a,y.t.RGBA,"rgba"),Object(g.a)(a,y.t.RGBA4,"rgba4"),Object(g.a)(a,y.t.RGB5_A1,"rgb5 a1"),Object(g.a)(a,y.t.RGB565,"rgb565"),Object(g.a)(a,y.t.DEPTH_COMPONENT,"depth"),Object(g.a)(a,y.t.DEPTH_STENCIL,"depth stencil"),a),E=(s={},Object(g.a)(s,y.t.DONT_CARE,"dont care"),Object(g.a)(s,y.t.NICEST,"nice"),Object(g.a)(s,y.t.FASTEST,"fast"),s),S=(u={},Object(g.a)(u,y.t.NEAREST,"nearest"),Object(g.a)(u,y.t.LINEAR,"linear"),Object(g.a)(u,y.t.LINEAR_MIPMAP_LINEAR,"mipmap"),Object(g.a)(u,y.t.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Object(g.a)(u,y.t.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Object(g.a)(u,y.t.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),u),O=(c={},Object(g.a)(c,y.t.REPEAT,"repeat"),Object(g.a)(c,y.t.CLAMP_TO_EDGE,"clamp"),Object(g.a)(c,y.t.MIRRORED_REPEAT,"mirror"),c),T=(l={},Object(g.a)(l,y.t.NONE,"none"),Object(g.a)(l,y.t.BROWSER_DEFAULT_WEBGL,"browser"),l),A=(f={},Object(g.a)(f,y.t.NEVER,"never"),Object(g.a)(f,y.t.ALWAYS,"always"),Object(g.a)(f,y.t.LESS,"less"),Object(g.a)(f,y.t.LEQUAL,"lequal"),Object(g.a)(f,y.t.GREATER,"greater"),Object(g.a)(f,y.t.GEQUAL,"gequal"),Object(g.a)(f,y.t.EQUAL,"equal"),Object(g.a)(f,y.t.NOTEQUAL,"notequal"),f),C=(h={},Object(g.a)(h,y.t.FUNC_ADD,"add"),Object(g.a)(h,y.t.MIN_EXT,"min"),Object(g.a)(h,y.t.MAX_EXT,"max"),Object(g.a)(h,y.t.FUNC_SUBTRACT,"subtract"),Object(g.a)(h,y.t.FUNC_REVERSE_SUBTRACT,"reverse subtract"),h),k=(p={},Object(g.a)(p,y.t.ZERO,"zero"),Object(g.a)(p,y.t.ONE,"one"),Object(g.a)(p,y.t.SRC_COLOR,"src color"),Object(g.a)(p,y.t.ONE_MINUS_SRC_COLOR,"one minus src color"),Object(g.a)(p,y.t.SRC_ALPHA,"src alpha"),Object(g.a)(p,y.t.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Object(g.a)(p,y.t.DST_COLOR,"dst color"),Object(g.a)(p,y.t.ONE_MINUS_DST_COLOR,"one minus dst color"),Object(g.a)(p,y.t.DST_ALPHA,"dst alpha"),Object(g.a)(p,y.t.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Object(g.a)(p,y.t.CONSTANT_COLOR,"constant color"),Object(g.a)(p,y.t.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Object(g.a)(p,y.t.CONSTANT_ALPHA,"constant alpha"),Object(g.a)(p,y.t.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Object(g.a)(p,y.t.SRC_ALPHA_SATURATE,"src alpha saturate"),p),M=(d={},Object(g.a)(d,y.t.NEVER,"never"),Object(g.a)(d,y.t.ALWAYS,"always"),Object(g.a)(d,y.t.LESS,"less"),Object(g.a)(d,y.t.LEQUAL,"lequal"),Object(g.a)(d,y.t.GREATER,"greater"),Object(g.a)(d,y.t.GEQUAL,"gequal"),Object(g.a)(d,y.t.EQUAL,"equal"),Object(g.a)(d,y.t.NOTEQUAL,"notequal"),d),P=(v={},Object(g.a)(v,y.t.ZERO,"zero"),Object(g.a)(v,y.t.KEEP,"keep"),Object(g.a)(v,y.t.REPLACE,"replace"),Object(g.a)(v,y.t.INVERT,"invert"),Object(g.a)(v,y.t.INCR,"increment"),Object(g.a)(v,y.t.DECR,"decrement"),Object(g.a)(v,y.t.INCR_WRAP,"increment wrap"),Object(g.a)(v,y.t.DECR_WRAP,"decrement wrap"),v),j=(m={},Object(g.a)(m,y.t.FRONT,"front"),Object(g.a)(m,y.t.BACK,"back"),m)},function(t,e,n){var r=n(58),i=n(29),o=n(122);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(68);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(69),i=n(77);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){var r=n(24),i=n(68),o=n(27)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(27)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(147),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";n(535);var r=n(51),i=n(50),o=n(23),a=n(77),s=n(27),u=n(332),c=s("species"),l=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var h=s(t),p=!o(function(){var e={};return e[h]=function(){return 7},7!=""[t](e)}),d=p?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[c]=function(){return n}),n[h](""),!e}):void 0;if(!p||!d||"replace"===t&&!l||"split"===t&&!f){var v=/./[h],m=n(a,h,""[t],function(t,e,n,r,i){return e.exec===u?p&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),g=m[0],y=m[1];r(String.prototype,t,g),i(RegExp.prototype,h,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},function(t,e,n){var r=n(21),i=r.navigator;t.exports=i&&i.userAgent||""},function(t,e,n){"use strict";var r=n(21),i=n(5),o=n(51),a=n(128),s=n(97),u=n(127),c=n(126),l=n(24),f=n(23),h=n(219),p=n(146),d=n(318);t.exports=function(t,e,n,v,m,g){var y=r[t],_=y,b=m?"set":"add",x=_&&_.prototype,w={},E=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(g||x.forEach&&!f(function(){(new _).entries().next()}))){var S=new _,O=S[b](g?{}:-0,1)!=S,T=f(function(){S.has(1)}),A=h(function(t){new _(t)}),C=!g&&f(function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)});A||(_=e(function(e,n){c(e,_,t);var r=d(new y,e,_);return void 0!=n&&u(n,m,r[b],r),r}),_.prototype=x,x.constructor=_),(T||C)&&(E("delete"),E("has"),m&&E("get")),(C||O)&&E(b),g&&x.clear&&delete x.clear}else _=v.getConstructor(e,t,m,b),a(_.prototype,n),s.NEED=!0;return p(_,t),w[t]=_,i(i.G+i.W+i.F*(_!=y),w),g||v.setStrong(_,t,m),_}},function(t,e,n){for(var r,i=n(21),o=n(50),a=n(120),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;t.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},function(t,e,n){"use strict";t.exports=n(96)||!n(23)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(21)[t]})},function(t,e,n){"use strict";var r=n(5);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(5),i=n(44),o=n(67),a=n(127);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),e=void 0!==u,e&&i(u),void 0==t?new this:(n=[],e?(r=0,s=o(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){"use strict";var r={};t.exports=r},function(t,e,n){"use strict";t.exports=n(576)},function(t,e,n){"use strict";function r(){if(s)for(var t in u){var e=u[t],n=s.indexOf(t);if(n>-1||a("96",t),!c.plugins[n]){e.extractEvents||a("97",t),c.plugins[n]=e;var r=e.eventTypes;for(var o in r)i(r[o],e,o)||a("98",o,t)}}}function i(t,e,n){c.eventNameDispatchConfigs.hasOwnProperty(n)&&a("99",n),c.eventNameDispatchConfigs[n]=t;var r=t.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];o(s,e,n)}return!0}return!!t.registrationName&&(o(t.registrationName,e,n),!0)}function o(t,e,n){c.registrationNameModules[t]&&a("100",t),c.registrationNameModules[t]=e,c.registrationNameDependencies[t]=e.eventTypes[n].dependencies}var a=n(25),s=(n(18),null),u={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(t){s&&a("101"),s=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];u.hasOwnProperty(n)&&u[n]===i||(u[n]&&a("102",n),u[n]=i,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return c.registrationNameModules[e.registrationName]||null;if(void 0!==e.phasedRegistrationNames){var n=e.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var i=c.registrationNameModules[n[r]];if(i)return i}}return null},_resetEventPlugins:function(){s=null;for(var t in u)u.hasOwnProperty(t)&&delete u[t];c.plugins.length=0;var e=c.eventNameDispatchConfigs;for(var n in e)e.hasOwnProperty(n)&&delete e[n];var r=c.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=c},function(t,e,n){"use strict";function r(t){return"topMouseUp"===t||"topTouchEnd"===t||"topTouchCancel"===t}function i(t){return"topMouseMove"===t||"topTouchMove"===t}function o(t){return"topMouseDown"===t||"topTouchStart"===t}function a(t,e,n,r){var i=t.type||"unknown-event";t.currentTarget=g.getNodeFromInstance(r),e?v.invokeGuardedCallbackWithCatch(i,n,t):v.invokeGuardedCallback(i,n,t),t.currentTarget=null}function s(t,e){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)a(t,e,n[i],r[i]);else n&&a(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null}function u(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e)){for(var r=0;r<e.length&&!t.isPropagationStopped();r++)if(e[r](t,n[r]))return n[r]}else if(e&&e(t,n))return n;return null}function c(t){var e=u(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function l(t){var e=t._dispatchListeners,n=t._dispatchInstances;Array.isArray(e)&&d("103"),t.currentTarget=e?g.getNodeFromInstance(n):null;var r=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,r}function f(t){return!!t._dispatchListeners}var h,p,d=n(25),v=n(232),m=(n(18),n(26),{injectComponentTree:function(t){h=t},injectTreeTraversal:function(t){p=t}}),g={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:f,getInstanceFromNode:function(t){return h.getInstanceFromNode(t)},getNodeFromInstance:function(t){return h.getNodeFromInstance(t)},isAncestor:function(t,e){return p.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return p.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return p.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return p.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,r,i){return p.traverseEnterLeave(t,e,n,r,i)},injection:m};t.exports=g},function(t,e,n){"use strict";function r(t,e,n){try{e(n)}catch(t){null===i&&(i=t)}}var i=null,o={invokeGuardedCallback:r,invokeGuardedCallbackWithCatch:r,rethrowCaughtError:function(){if(i){var t=i;throw i=null,t}}};t.exports=o},function(t,e,n){"use strict";function r(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"===typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=n(45);o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=r},function(t,e,n){"use strict";function r(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=o[t];return!!r&&!!n[r]}function i(t){return r}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},function(t,e,n){"use strict";function r(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function i(t,e,n){l.insertTreeBefore(t,e,n)}function o(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):v(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],u(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,r){for(var i=e;;){var o=i.nextSibling;if(v(t,i,r),i===n)break;i=o}}function u(t,e,n){for(;;){var r=e.nextSibling;if(r===n)break;t.removeChild(r)}}function c(t,e,n){var r=t.parentNode,i=t.nextSibling;i===e?n&&v(r,document.createTextNode(n),i):n?(d(i,n),u(r,i,e)):u(r,t,e)}var l=n(134),f=n(590),h=(n(31),n(61),n(238)),p=n(173),d=n(354),v=h(function(t,e,n){t.insertBefore(e,n)}),m=f.dangerouslyReplaceNodeWithMarkup,g={dangerouslyReplaceNodeWithMarkup:m,replaceDelimitedText:c,processUpdates:function(t,e){for(var n=0;n<e.length;n++){var s=e[n];switch(s.type){case"INSERT_MARKUP":i(t,s.content,r(t,s.afterNode));break;case"MOVE_EXISTING":o(t,s.fromNode,r(t,s.afterNode));break;case"SET_MARKUP":p(t,s.content);break;case"TEXT_CONTENT":d(t,s.content);break;case"REMOVE_NODE":a(t,s.fromNode)}}}};t.exports=g},function(t,e,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=r},function(t,e,n){"use strict";var r=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t};t.exports=r},function(t,e,n){"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink&&s("87")}function i(t){r(t),(null!=t.value||null!=t.onChange)&&s("88")}function o(t){r(t),(null!=t.checked||null!=t.onChange)&&s("89")}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=n(25),u=n(608),c=n(343),l=n(130),f=c(l.isValidElement),h=(n(18),n(26),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(t,e,n){return!t[e]||h[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:f.func},d={},v={checkPropTypes:function(t,e,n){for(var r in p){if(p.hasOwnProperty(r))var i=p[r](e,r,t,"prop",null,u);if(i instanceof Error&&!(i.message in d)){d[i.message]=!0;a(n)}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};t.exports=v},function(t,e,n){"use strict";var r=n(25),i=(n(18),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){i&&r("104"),o.replaceNodeWithMarkup=t.replaceNodeWithMarkup,o.processChildrenUpdates=t.processChildrenUpdates,i=!0}}};t.exports=o},function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=i},function(t,e,n){"use strict";function r(t,e){var n=null===t||!1===t,r=null===e||!1===e;if(n||r)return n===r;var i=typeof t,o=typeof e;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}t.exports=r},function(t,e,n){"use strict";function r(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function i(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1))).replace(e,function(t){return n[t]})}var o={escape:r,unescape:i};t.exports=o},function(t,e,n){"use strict";function r(t){u.enqueueUpdate(t)}function i(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,r=Object.keys(t);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(t,e){var n=s.get(t);if(!n){return null}return n}var a=n(25),s=(n(81),n(154)),u=(n(61),n(72)),c=(n(18),n(26),{isMounted:function(t){var e=s.get(t);return!!e&&!!e._renderedComponent},enqueueCallback:function(t,e,n){c.validateCallback(e,n);var i=o(t);if(!i)return null;i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],r(i)},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e,n){var i=o(t,"replaceState");i&&(i._pendingStateQueue=[e],i._pendingReplaceState=!0,void 0!==n&&null!==n&&(c.validateCallback(n,"replaceState"),i._pendingCallbacks?i._pendingCallbacks.push(n):i._pendingCallbacks=[n]),r(i))},enqueueSetState:function(t,e){var n=o(t,"setState");if(n){(n._pendingStateQueue||(n._pendingStateQueue=[])).push(e),r(n)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,r(t)},validateCallback:function(t,e){t&&"function"!==typeof t&&a("122",e,i(t))}});t.exports=c},function(t,e,n){"use strict";var r=(n(28),n(71)),i=(n(26),r);t.exports=i},function(t,e,n){"use strict";function r(t){var e,n=t.keyCode;return"charCode"in t?0===(e=t.charCode)&&13===n&&(e=13):e=n,e>=32||13===e?e:0}t.exports=r},function(t,e,n){"use strict";n(657),n(658)},function(t,e,n){var r=n(137);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(252)("keys"),i=n(179);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(62),i=n(88),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(178)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(673),o=r(i),a=n(684),s=r(a),u="function"===typeof s.default&&"symbol"===typeof o.default?function(t){return typeof t}:function(t){return t&&"function"===typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"===typeof s.default&&"symbol"===u(o.default)?function(t){return"undefined"===typeof t?"undefined":u(t)}:function(t){return t&&"function"===typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":"undefined"===typeof t?"undefined":u(t)}},function(t,e){t.exports={}},function(t,e,n){var r=n(155),i=n(678),o=n(253),a=n(251)("IE_PROTO"),s=function(){},u=function(){var t,e=n(373)("iframe"),r=o.length;for(e.style.display="none",n(679).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(103).f,i=n(104),o=n(139)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){e.f=n(139)},function(t,e,n){var r=n(88),i=n(62),o=n(178),a=n(259),s=n(103).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(180),i=n(176),o=n(105),a=n(248),s=n(104),u=n(372),c=Object.getOwnPropertyDescriptor;e.f=n(89)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){"use strict";function r(t){return{transform:t,WebkitTransform:t,MozTransform:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px";return"translate3d("+(t=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"0px, "+t+e+", 0px":""+t+e+", 0px, 0px")+")"}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"px",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];arguments.length>4&&void 0!==arguments[4]&&arguments[4]?r?t.style.top=""+e+n:t.style.left=""+e+n:a(t.style,i(e,n,r))}function a(t,e){t.transform=e,t.webkitTransform=e,t.mozTransform=e}e.b=r,e.a=i,e.c=o,e.d=a},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return u});var r={},i={},o=function(t){return i[t]},a=function(t,e){i[t]=e},s=function(t){return r[t]},u=function(t,e){r[t]=e}},function(t,e,n){"use strict";function r(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function i(t,e){var n=r(t);return function(r,i){return e(n(r),i,t)}}function o(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function a(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function s(t){return t<0?"-"+a(-t,6):t>9999?"+"+a(t,6):a(t,4)}function u(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":s(t.getUTCFullYear(),4)+"-"+a(t.getUTCMonth()+1,2)+"-"+a(t.getUTCDate(),2)+(i?"T"+a(e,2)+":"+a(n,2)+":"+a(r,2)+"."+a(i,3)+"Z":r?"T"+a(e,2)+":"+a(n,2)+":"+a(r,2)+"Z":n||e?"T"+a(e,2)+":"+a(n,2)+"Z":"")}var c={},l={},f=34,h=10,p=13;e.a=function(t){function e(t,e){var o,a,s=n(t,function(t,n){if(o)return o(t,n-1);a=t,o=e?i(t,e):r(t)});return s.columns=a||[],s}function n(t,e){function n(){if(u)return l;if(d)return d=!1,c;var e,n,r=a;if(t.charCodeAt(r)===f){for(;a++<o&&t.charCodeAt(a)!==f||t.charCodeAt(++a)===f;);return(e=a)>=o?u=!0:(n=t.charCodeAt(a++))===h?d=!0:n===p&&(d=!0,t.charCodeAt(a)===h&&++a),t.slice(r+1,e-1).replace(/""/g,'"')}for(;a<o;){if((n=t.charCodeAt(e=a++))===h)d=!0;else if(n===p)d=!0,t.charCodeAt(a)===h&&++a;else if(n!==_)continue;return t.slice(r,e)}return u=!0,t.slice(r,o)}var r,i=[],o=t.length,a=0,s=0,u=o<=0,d=!1;for(t.charCodeAt(o-1)===h&&--o,t.charCodeAt(o-1)===p&&--o;(r=n())!==l;){for(var v=[];r!==c&&r!==l;)v.push(r),r=n();e&&null==(v=e(v,s++))||i.push(v)}return i}function a(e,n){return e.map(function(e){return n.map(function(t){return g(e[t])}).join(t)})}function s(e,n){return null==n&&(n=o(e)),[n.map(g).join(t)].concat(a(e,n)).join("\n")}function d(t,e){return null==e&&(e=o(t)),a(t,e).join("\n")}function v(t){return t.map(m).join("\n")}function m(e){return e.map(g).join(t)}function g(t){return null==t?"":t instanceof Date?u(t):y.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var y=new RegExp('["'+t+"\n\r]"),_=t.charCodeAt(0);return{parse:e,parseRows:n,format:s,formatBody:d,formatRows:v,formatRow:m,formatValue:g}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function i(t){return"Feature"===t.type?t.geometry:t}e.a=r,e.b=i;n(106)},function(t,e,n){"use strict";function r(t,e,n){if(null!==t)for(var i,o,a,s,u,c,l,f,h=0,p=0,d=t.type,v="FeatureCollection"===d,m="Feature"===d,g=v?t.features.length:1,y=0;y<g;y++){l=v?t.features[y].geometry:m?t.geometry:t,f=!!l&&"GeometryCollection"===l.type,u=f?l.geometries.length:1;for(var _=0;_<u;_++){var b=0,x=0;if(null!==(s=f?l.geometries[_]:l)){c=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(c,p,y,b,x))return!1;p++,b++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===e(c[i],p,y,b,x))return!1;p++,"MultiPoint"===w&&b++}"LineString"===w&&b++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(o=0;o<c[i].length-h;o++){if(!1===e(c[i][o],p,y,b,x))return!1;p++}"MultiLineString"===w&&b++,"Polygon"===w&&x++}"Polygon"===w&&b++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(x=0,o=0;o<c[i].length;o++){for(a=0;a<c[i][o].length-h;a++){if(!1===e(c[i][o][a],p,y,b,x))return!1;p++}x++}b++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===r(s.geometries[i],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(t,e){var n,r,i,o,a,s,u,c,l,f,h=0,p="FeatureCollection"===t.type,d="Feature"===t.type,v=p?t.features.length:1;for(n=0;n<v;n++){for(s=p?t.features[n].geometry:d?t.geometry:t,c=p?t.features[n].properties:d?t.properties:{},l=p?t.features[n].bbox:d?t.bbox:void 0,f=p?t.features[n].id:d?t.id:void 0,u=!!s&&"GeometryCollection"===s.type,a=u?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,c,l,f))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,c,l,f))return!1;h++}}function o(t,e){i(t,function(t,n,r,i,o){var s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":if(!1===e(Object(a.b)(t,r,{bbox:i,id:o}),n,0))return!1;return}var u;switch(s){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}for(var c=0;c<t.coordinates.length;c++){var l=t.coordinates[c],f={type:u,coordinates:l};if(!1===e(Object(a.b)(f,r),n,c))return!1}})}n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var a=n(106)},function(t,e,n){"use strict";function r(t,e,n,r){var o={id:"undefined"===typeof t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return i(o),o}function i(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)o(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)o(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)o(t,e[r][i])}function o(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}e.a=r},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}e.a=r},function(t,e,n){"use strict";function r(t,e,n){return r=Object(o.a)()?Reflect.construct.bind():function(t,e,n){var r=[null];r.push.apply(r,e);var o=Function.bind.apply(t,r),a=new o;return n&&Object(i.a)(a,n.prototype),a},r.apply(null,arguments)}e.a=r;var i=n(268),o=n(763)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(){}n.d(e,"a",function(){return d});var a=n(1),s=n(0),u=n(12),c=n(3),l=n(4),f=n(2),h=n(398),p=n(272),d=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return Object(s.a)(this,e),t=n.call(this),t.className="",t.children=[],t.focus=o,t.blur=o,t.insertBefore=o,t.appendChild=o,t.removeChild=o,t.remove=o,t.innerHTML="",t.tagName=r.toUpperCase(),p.d(Object(u.a)(t),i),p.f(Object(u.a)(t)),p.a(Object(u.a)(t)),p.b(Object(u.a)(t)),p.c(Object(u.a)(t)),p.e(Object(u.a)(t)),t}Object(c.a)(e,t);var n=r(e);return Object(a.a)(e)}(h.a)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",function(){return c});var a=n(0),s=n(1),u=new WeakMap,c=function(){function t(){Object(a.a)(this,t),u.set(this,{})}return Object(s.a)(t,[{key:"addEventListener",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u.get(this);r||(r={}),r[t]||(r[t]=[]),r[t].push(e),u.set(this,r),n.capture,n.once,n.passive}},{key:"removeEventListener",value:function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],u.get(this));if(n){var r=n[t];if(r&&r.length>0)for(var i=r.length;i--;i>0)if(r[i]===e){r.splice(i,1);break}}}},{key:"dispatchEvent",value:function(t){var e=u.get(this)[t.type];if(e){var n,i=r(e);try{for(i.s();!(n=i.n()).done;){(0,n.value)(t)}}catch(t){i.e(t)}finally{i.f()}}}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!("parentNode"in t)){var n;n=0===e?function(){return null}:1===e?function(){return h}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:n})}if(!("parentElement"in t)){var r;r=0===e?function(){return null}:1===e?function(){return h}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:r})}}function i(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:l+"px",height:f+"px",margin:"0px",padding:"0px"})}function o(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=l,t.clientHeight=f),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function a(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=l,t.offsetHeight=f)}function s(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=l,t.scrollHeight=f)}function u(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}e.d=r,e.f=i,e.b=o,e.c=a,e.e=s,e.a=u;var c=n(400),l=c.a.availWidth,f=c.a.availHeight,h={style:[]}},function(t,e,n){"use strict";function r(){}function i(){return this.rgb().formatHex()}function o(){return g(this).formatHsl()}function a(){return this.rgb().formatRgb()}function s(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=A.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?u(e):3===n?new h(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?c(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?c(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=C.exec(t))?new h(e[1],e[2],e[3],1):(e=k.exec(t))?new h(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=M.exec(t))?c(e[1],e[2],e[3],e[4]):(e=P.exec(t))?c(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=j.exec(t))?m(e[1],e[2]/100,e[3]/100,1):(e=I.exec(t))?m(e[1],e[2]/100,e[3]/100,e[4]):R.hasOwnProperty(t)?u(R[t]):"transparent"===t?new h(NaN,NaN,NaN,0):null}function u(t){return new h(t>>16&255,t>>8&255,255&t,1)}function c(t,e,n,r){return r<=0&&(t=e=n=NaN),new h(t,e,n,r)}function l(t){return t instanceof r||(t=s(t)),t?(t=t.rgb(),new h(t.r,t.g,t.b,t.opacity)):new h}function f(t,e,n,r){return 1===arguments.length?l(t):new h(t,e,n,null==r?1:r)}function h(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function p(){return"#"+v(this.r)+v(this.g)+v(this.b)}function d(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function v(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function m(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _(t,e,n,r)}function g(t){if(t instanceof _)return new _(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=s(t)),!t)return new _;if(t instanceof _)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,o=Math.min(e,n,i),a=Math.max(e,n,i),u=NaN,c=a-o,l=(a+o)/2;return c?(u=e===a?(n-i)/c+6*(n<i):n===a?(i-e)/c+2:(e-n)/c+4,c/=l<.5?a+o:2-a-o,u*=60):c=l>0&&l<1?0:u,new _(u,c,l,t.opacity)}function y(t,e,n,r){return 1===arguments.length?g(t):new _(t,e,n,null==r?1:r)}function _(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function b(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.a=r,n.d(e,"d",function(){return w}),n.d(e,"c",function(){return E}),e.e=s,e.h=l,e.g=f,e.b=h,e.f=y;var x=n(274),w=.7,E=1/w,S="\\s*([+-]?\\d+)\\s*",O="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",T="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A=/^#([0-9a-f]{3,8})$/,C=new RegExp("^rgb\\("+[S,S,S]+"\\)$"),k=new RegExp("^rgb\\("+[T,T,T]+"\\)$"),M=new RegExp("^rgba\\("+[S,S,S,O]+"\\)$"),P=new RegExp("^rgba\\("+[T,T,T,O]+"\\)$"),j=new RegExp("^hsl\\("+[O,T,T]+"\\)$"),I=new RegExp("^hsla\\("+[O,T,T,O]+"\\)$"),R={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(x.a)(r,s,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:i,formatHex:i,formatHsl:o,formatRgb:a,toString:a}),Object(x.a)(h,f,Object(x.b)(r,{brighter:function(t){return t=null==t?E:Math.pow(E,t),new h(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?w:Math.pow(w,t),new h(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p,formatHex:p,formatRgb:d,toString:d})),Object(x.a)(_,y,Object(x.b)(r,{brighter:function(t){return t=null==t?E:Math.pow(E,t),new _(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?w:Math.pow(w,t),new _(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new h(b(t>=240?t-240:t+120,i,r),b(t,i,r),b(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}))},function(t,e,n){"use strict";function r(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}e.b=r,e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a});var r={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,document:"undefined"!==typeof document&&document},i=r.self||r.window||{},o="function"===typeof importScripts,a="undefined"!==typeof window&&"undefined"!==typeof window.orientation},function(t,e,n){"use strict";var r=n(141),i=n(805),o=n(277),a=function(){},s=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,n=t.source,i=t.url;Object(r.a)(n||i),this.name=e,this.source=n,this.url=i,this.onMessage=a,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!==typeof Worker},t.prototype.destroy=function(){this.onMessage=a,this.onError=a,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Object(o.a)(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Object(i.a)({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}();e.a=s},function(t,e,n){"use strict";function r(t,e,n){void 0===e&&(e=!0);var o=n||new Set;if(t){if(i(t))o.add(t);else if(i(t.buffer))o.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"===typeof t)for(var a in t)r(t[a],e,o)}else;return void 0===n?Array.from(o):[]}function i(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!==typeof MessagePort&&t instanceof MessagePort||("undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}e.a=r},function(t,e,n){"use strict";function r(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function i(t,e,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}function o(t){return t.filter?[1]:[0]}function a(t,e){return[e]}e.a=r,e.b=i,e.c=o,e.d=a},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r=e&&e.length,o=r?e[0]*n:t.length,s=i(t,0,o,n,!0),u=[];if(!s||s.next===s.prev)return u;var c,l,h,p,d,v,m;if(r&&(s=f(t,e,s,n)),t.length>80*n){c=h=t[0],l=p=t[1];for(var g=n;g<o;g+=n)d=t[g],v=t[g+1],d<c&&(c=d),v<l&&(l=v),d>h&&(h=d),v>p&&(p=v);m=Math.max(h-c,p-l),m=0!==m?32767/m:0}return a(s,u,n,c,l,m,0),u}function i(t,e,n,r,i){var o,a;if(i===R(t,e,n,r)>0)for(o=e;o<n;o+=r)a=P(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=P(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(j(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!E(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(j(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,f,h){if(t){!h&&f&&m(t,r,i,f);for(var p,d,v=t;t.prev!==t.next;)if(p=t.prev,d=t.next,f?u(t,r,i,f):s(t))e.push(p.i/n|0),e.push(t.i/n|0),e.push(d.i/n|0),j(t),t=d.next,v=d.next;else if((t=d)===v){h?1===h?(t=c(o(t),e,n),a(t,e,n,r,i,f,2)):2===h&&l(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(w(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,s=e.y,u=n.y,c=r.y,l=i<o?i<a?i:a:o<a?o:a,f=s<u?s<c?s:c:u<c?u:c,h=i>o?i>a?i:a:o>a?o:a,p=s>u?s>c?s:c:u>c?u:c,d=r.next;d!==e;){if(d.x>=l&&d.x<=h&&d.y>=f&&d.y<=p&&b(i,s,o,u,a,c,d.x,d.y)&&w(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(w(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,c=a.x,l=i.y,f=o.y,h=a.y,p=s<u?s<c?s:c:u<c?u:c,d=l<f?l<h?l:h:f<h?f:h,v=s>u?s>c?s:c:u>c?u:c,m=l>f?l>h?l:h:f>h?f:h,g=y(p,d,e,n,r),_=y(v,m,e,n,r),x=t.prevZ,E=t.nextZ;x&&x.z>=g&&E&&E.z<=_;){if(x.x>=p&&x.x<=v&&x.y>=d&&x.y<=m&&x!==i&&x!==a&&b(s,l,u,f,c,h,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,E.x>=p&&E.x<=v&&E.y>=d&&E.y<=m&&E!==i&&E!==a&&b(s,l,u,f,c,h,E.x,E.y)&&w(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;x&&x.z>=g;){if(x.x>=p&&x.x<=v&&x.y>=d&&x.y<=m&&x!==i&&x!==a&&b(s,l,u,f,c,h,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;E&&E.z<=_;){if(E.x>=p&&E.x<=v&&E.y>=d&&E.y<=m&&E!==i&&E!==a&&b(s,l,u,f,c,h,E.x,E.y)&&w(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!E(i,a)&&S(i,r,r.next,a)&&C(i,a)&&C(a,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(a.i/n|0),j(r),j(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function l(t,e,n,r,i,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&x(u,c)){var l=M(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s,0),void a(l,e,n,r,i,s,0)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,r){var o,a,s,u,c,l=[];for(o=0,a=e.length;o<a;o++)s=e[o]*r,u=o<a-1?e[o+1]*r:t.length,c=i(t,s,u,r,!1),c===c.next&&(c.steiner=!0),l.push(_(c));for(l.sort(h),o=0;o<l.length;o++)n=p(l[o],n);return n}function h(t,e){return t.x-e.x}function p(t,e){var n=d(t,e);if(!n)return e;var r=M(n,t);return o(r,r.next),o(n,n.next)}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==e);if(!n)return null;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&b(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),C(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}function v(t,e){return w(t.prev,t,e.prev)<0&&w(e.next,t,t.next)<0}function m(t,e,n,r){var i=t;do{0===i.z&&(i.z=y(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function y(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function _(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function b(t,e,n,r,i,o,a,s){return(i-a)*(e-s)>=(t-a)*(o-s)&&(t-a)*(r-s)>=(n-a)*(e-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function x(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!A(t,e)&&(C(t,e)&&C(e,t)&&k(t,e)&&(w(t.prev,t,e.prev)||w(t,e.prev,e))||E(t,e)&&w(t.prev,t,t.next)>0&&w(e.prev,e,e.next)>0)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function S(t,e,n,r){var i=T(w(t,e,n)),o=T(w(t,e,r)),a=T(w(n,r,t)),s=T(w(n,r,e));return i!==o&&a!==s||(!(0!==i||!O(t,n,e))||(!(0!==o||!O(t,r,e))||(!(0!==a||!O(n,t,r))||!(0!==s||!O(n,e,r)))))}function O(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function T(t){return t>0?1:t<0?-1:0}function A(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&S(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function C(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function k(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function M(t,e){var n=new I(t.i,t.x,t.y),r=new I(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(t,e,n,r){var i=new I(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function j(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(R(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(R(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";function r(){var t=new G.a(3);return G.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t){var e=new G.a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function a(t,e,n){var r=new G.a(3);return r[0]=t,r[1]=e,r[2]=n,r}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function u(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function f(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function m(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function y(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function w(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function S(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function A(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t}function C(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function k(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t}function M(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*h,t}function P(t,e){e=e||1;var n=2*G.c()*Math.PI,r=2*G.c()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function j(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function R(t,e,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=e[0],u=e[1],c=e[2],l=i*c-o*u,f=o*s-r*c,h=r*u-i*s,p=i*h-o*f,d=o*l-r*h,v=r*f-i*l,m=2*a;return l*=m,f*=m,h*=m,p*=2,d*=2,v*=2,t[0]=s+l+p,t[1]=u+f+d,t[2]=c+h+v,t}function L(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function D(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function N(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function z(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(o*o+a*a+s*s),l=u*c,f=l&&T(t,e)/l;return Math.acos(Math.min(Math.max(f,-1),1))}function F(t){return t[0]=0,t[1]=0,t[2]=0,t}function B(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function U(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function V(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=G.b*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=G.b*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=G.b*Math.max(1,Math.abs(i),Math.abs(s))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.length=o,e.fromValues=a,e.copy=s,e.set=u,e.add=c,e.subtract=l,e.multiply=f,e.divide=h,e.ceil=p,e.floor=d,e.min=v,e.max=m,e.round=g,e.scale=y,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=x,e.squaredLength=w,e.negate=E,e.inverse=S,e.normalize=O,e.dot=T,e.cross=A,e.lerp=C,e.hermite=k,e.bezier=M,e.random=P,e.transformMat4=j,e.transformMat3=I,e.transformQuat=R,e.rotateX=L,e.rotateY=D,e.rotateZ=N,e.angle=z,e.zero=F,e.str=B,e.exactEquals=U,e.equals=V,n.d(e,"sub",function(){return H}),n.d(e,"mul",function(){return W}),n.d(e,"div",function(){return q}),n.d(e,"dist",function(){return Z}),n.d(e,"sqrDist",function(){return X}),n.d(e,"len",function(){return Y}),n.d(e,"sqrLen",function(){return K}),n.d(e,"forEach",function(){return J});var G=n(74),H=l,W=f,q=h,Z=b,X=x,Y=o,K=w,J=function(){var t=r();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(){var t=new D.a(4);return D.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function i(t){var e=new D.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e,n,r){var i=new D.a(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function u(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function h(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function d(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function v(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function g(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function y(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function _(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.hypot(n,r,i,o)}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function x(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function w(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function E(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function S(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function O(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a,t}function T(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function A(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],l=e[0],f=e[1],h=e[2],p=e[3];return t[0]=f*c-h*u+p*s,t[1]=-l*c+h*a-p*o,t[2]=l*u-f*a+p*i,t[3]=-l*s+f*o-h*i,t}function C(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t}function k(t,e){e=e||1;var n,r,i,o,a,s;do{n=2*D.c()-1,r=2*D.c()-1,a=n*n+r*r}while(a>=1);do{i=2*D.c()-1,o=2*D.c()-1,s=i*i+o*o}while(s>=1);var u=Math.sqrt((1-a)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*i*u,t[3]=e*o*u,t}function M(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function P(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t[3]=e[3],t}function j(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function I(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function R(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function L(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=D.b*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=D.b*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=D.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=D.b*Math.max(1,Math.abs(o),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.fromValues=o,e.copy=a,e.set=s,e.add=u,e.subtract=c,e.multiply=l,e.divide=f,e.ceil=h,e.floor=p,e.min=d,e.max=v,e.round=m,e.scale=g,e.scaleAndAdd=y,e.distance=_,e.squaredDistance=b,e.length=x,e.squaredLength=w,e.negate=E,e.inverse=S,e.normalize=O,e.dot=T,e.cross=A,e.lerp=C,e.random=k,e.transformMat4=M,e.transformQuat=P,e.zero=j,e.str=I,e.exactEquals=R,e.equals=L,n.d(e,"sub",function(){return N}),n.d(e,"mul",function(){return z}),n.d(e,"div",function(){return F}),n.d(e,"dist",function(){return B}),n.d(e,"sqrDist",function(){return U}),n.d(e,"len",function(){return V}),n.d(e,"sqrLen",function(){return G}),n.d(e,"forEach",function(){return H});var D=n(74),N=c,z=l,F=f,B=_,U=b,V=x,G=w,H=function(){var t=r();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}()},function(t,e,n){"use strict";function r(t,e){return t.map(function(t){return 1*t[e]})}function i(t){return!!Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}e.a=r,e.b=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var r=n(284),i=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new r.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var r=n(283),i=n(425),o=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=i.namedConstraint(t),new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new r.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=i.taggedConstraint(t)(e),new r.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return i.typeConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return i.namedConstraint(t)(e.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return i.taggedConstraint(t)(e)(n.parentRequest)},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.typeConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,i.namedConstraint(t))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!i.traverseAncerstors(n,i.taggedConstraint(t)(e))},new r.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!i.traverseAncerstors(e,t)},new r.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=o},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return a});var r;!function(t){t.normal="normal",t.additive="additive",t.subtractive="subtractive",t.min="min",t.max="max",t.none="none"}(r||(r={}));var i;!function(t){t.MULTIPLE="MULTIPLE",t.SINGLE="SINGLE"}(i||(i={}));var o;!function(t){t.AND="and",t.OR="or"}(o||(o={}));var a;!function(t){t.INIT="init",t.UPDATE="update"}(a||(a={}))},function(t,e,n){"use strict";(function(t,r){function i(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})}function o(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function a(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c(t){setTimeout(t,0)}function l(t){return function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return t(function(){return e.apply(void 0,n)})}}function f(t){return"AsyncFunction"===t[Symbol.toStringTag]}function h(t){return"AsyncGenerator"===t[Symbol.toStringTag]}function p(t){return"function"===typeof t[Symbol.asyncIterator]}function d(t){if("function"!==typeof t)throw new Error("expected a function");return f(t)?(0,A.default)(t):t}n.d(e,"a",function(){return Z}),n.d(e,"b",function(){return q}),n.d(e,"c",function(){return X}),n.d(e,"d",function(){return W}),n.d(e,"e",function(){return F});var v={exports:{}},m={exports:{}},g={exports:{}};!function(t,e){function n(t){return t&&"number"===typeof t.length&&t.length>=0&&t.length%1===0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}(g,g.exports);var y={},_={exports:{}},b={exports:{}};!function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=e.pop();return t.call(this,e,r)}},t.exports=e.default}(b,b.exports);var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.fallback=c,x.wrap=l;var w,E=x.hasQueueMicrotask="function"===typeof queueMicrotask&&queueMicrotask,S=x.hasSetImmediate="function"===typeof t&&t,O=x.hasNextTick="object"===typeof r&&"function"===typeof r.nextTick;w=E?queueMicrotask:S?t:O?r.nextTick:c,x.default=l(w),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){return(0,l.isAsync)(t)?function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var r=e.pop();return i(t.apply(this,e),r)}:(0,s.default)(function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}if(r&&"function"===typeof r.then)return i(r,n);n(null,r)})}function i(t,e){return t.then(function(t){o(e,null,t)},function(t){o(e,t&&t.message?t:new Error(t))})}function o(t,e,n){try{t(e,n)}catch(t){(0,c.default)(function(t){throw t},t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var a=b.exports,s=n(a),u=x,c=n(u),l=y;t.exports=e.default}(_,_.exports),Object.defineProperty(y,"__esModule",{value:!0}),y.isAsyncIterable=y.isAsyncGenerator=y.isAsync=void 0;var T=_.exports,A=function(t){return t&&t.__esModule?t:{default:t}}(T);y.default=d,y.isAsync=f,y.isAsyncGenerator=h,y.isAsyncIterable=p;var C={exports:{}};!function(t,e){function n(t,e){function n(){for(var n=this,r=[],i=arguments.length;i--;)r[i]=arguments[i];return"function"===typeof r[e-1]?t.apply(this,r):new Promise(function(i,o){r[e-1]=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(t)return o(t);i(e.length>1?e:e[0])},t.apply(n,r)})}if(void 0===e&&(e=t.length),!e)throw new Error("arity is undefined");return n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}(C,C.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=g.exports,i=n(r),o=y,a=n(o),s=C.exports,u=n(s);e.default=(0,u.default)(function(t,e,n){var r=(0,i.default)(e)?[]:{};t(e,function(t,e,n){(0,a.default)(t)(function(t){for(var i,o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];o.length<2&&(i=o,o=i[0]),r[e]=o,n(t)})},function(t){return n(t,r)})},3),t.exports=e.default}(m,m.exports);var k={exports:{}},M={exports:{}},P={exports:{}},j={exports:{}};!function(t,e){function n(t){function e(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(null!==t){var r=t;t=null,r.apply(this,e)}}return Object.assign(e,t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}(j,j.exports);var I={exports:{}},R={exports:{}};!function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()},t.exports=e.default}(R,R.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function i(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function o(t){var e=t?Object.keys(t):[],n=-1,r=e.length;return function i(){var o=e[++n];return"__proto__"===o?i():n<r?{value:t[o],key:o}:null}}function a(t){if((0,u.default)(t))return r(t);var e=(0,l.default)(t);return e?i(e):o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=g.exports,u=n(s),c=R.exports,l=n(c);t.exports=e.default}(I,I.exports);var L={exports:{}};!function(t,e){function n(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(null===t)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}(L,L.exports);var D={exports:{}},N={exports:{}};!function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=n,t.exports=e.default}(N,N.exports),function(t,e){function n(t,e,n,r){function o(){f>=e||l||u||(l=!0,t.next().then(function(t){var e=t.value,i=t.done;if(!c&&!u){if(l=!1,i)return u=!0,void(f<=0&&r(null));f++,n(e,h,a),h++,o()}}).catch(s))}function a(t,e){if(f-=1,!c)return t?s(t):!1===t?(u=!0,void(c=!0)):e===i.default||u&&f<=0?(u=!0,r(null)):void o()}function s(t){c||(l=!1,u=!0,r(t))}var u=!1,c=!1,l=!1,f=0,h=0;o()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var r=N.exports,i=function(t){return t&&t.__esModule?t:{default:t}}(r);t.exports=e.default}(D,D.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=j.exports,i=n(r),o=I.exports,a=n(o),s=L.exports,u=n(s),c=y,l=D.exports,f=n(l),h=N.exports,p=n(h);e.default=function(t){return function(e,n,r){function o(t,e){if(!d)if(v-=1,t)h=!0,r(t);else if(!1===t)h=!0,d=!0;else{if(e===p.default||h&&v<=0)return h=!0,r(null);m||s()}}function s(){for(m=!0;v<t&&!h;){var e=l();if(null===e)return h=!0,void(v<=0&&r(null));v+=1,n(e.value,e.key,(0,u.default)(o))}m=!1}if(r=(0,i.default)(r),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return r(null);if((0,c.isAsyncGenerator)(e))return(0,f.default)(e,t,n,r);if((0,c.isAsyncIterable)(e))return(0,f.default)(e[Symbol.asyncIterator](),t,n,r);var l=(0,a.default)(e),h=!1,d=!1,v=0,m=!1;s()}},t.exports=e.default}(P,P.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,r){return(0,o.default)(e)(t,(0,s.default)(n),r)}Object.defineProperty(e,"__esModule",{value:!0});var i=P.exports,o=n(i),a=y,s=n(a),u=C.exports,c=n(u);e.default=(0,c.default)(r,4),t.exports=e.default}(M,M.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return(0,o.default)(t,1,e,n)}Object.defineProperty(e,"__esModule",{value:!0});var i=M.exports,o=n(i),a=C.exports,s=n(a);e.default=(0,s.default)(r,3),t.exports=e.default}(k,k.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(0,o.default)(s.default,t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=m.exports,o=n(i),a=k.exports,s=n(a);t.exports=e.default}(v,v.exports);var z=u(v.exports),F=function(){function t(){this.args=[],this.tasks=[]}return t.prototype.call=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,z(this.tasks)},t.prototype.tap=function(t,e){var n=this;this.tasks.push(function(r){e.apply(void 0,s([],a(n.args),!1)),r(null,t)})},t}(),B={exports:{}},U={exports:{}};!function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){function r(t,e){!1===t&&(s=!0),!0!==s&&(t?n(t):++o!==a&&e!==c.default||n(null))}n=(0,p.default)(n);var i=0,o=0,a=t.length,s=!1;for(0===a&&n(null);i<a;i++)e(t[i],i,(0,v.default)(r))}function i(t,e,n){return(0,f.default)(t,1/0,e,n)}function o(t,e,n){return((0,s.default)(t)?r:i)(t,(0,_.default)(e),n)}Object.defineProperty(e,"__esModule",{value:!0});var a=g.exports,s=n(a),u=N.exports,c=n(u),l=M.exports,f=n(l),h=j.exports,p=n(h),d=L.exports,v=n(d),m=y,_=n(m),b=C.exports,x=n(b);e.default=(0,x.default)(o,3),t.exports=e.default}(U,U.exports),function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return(0,s.default)(o.default,t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=U.exports,o=n(i),a=m.exports,s=n(a);t.exports=e.default}(B,B.exports);var V=u(B.exports),G=(function(){function t(){this.tasks=[]}t.prototype.promise=function(){return V(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push(function(r){return i(n,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return n.sent(),r(null,t),[2]}})})})}}(),{exports:{}});!function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){function n(e){(0,c.default)(t[i++]).apply(void 0,e.concat([(0,s.default)(r)]))}function r(r){for(var o=[],a=arguments.length-1;a-- >0;)o[a]=arguments[a+1];if(!1!==r)return r||i===t.length?e.apply(void 0,[r].concat(o)):void n(o)}if(e=(0,o.default)(e),!Array.isArray(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var i=0;n([])}Object.defineProperty(e,"__esModule",{value:!0});var i=j.exports,o=n(i),a=L.exports,s=n(a),u=y,c=n(u),l=C.exports,f=n(l);e.default=(0,f.default)(r),t.exports=e.default}(G,G.exports);var H=u(G.exports),W=(function(){function t(){this.tasks=[]}t.prototype.call=function(){return H(this.tasks)},t.prototype.tap=function(t,e){0===this.tasks.length?this.tasks.push(function(t){var n=e();t(!!n&&null,n)}):this.tasks.push(function(n,r){r(!!e.apply(void 0,s([],a(n),!1))&&null,t)})}}(),function(){function t(){this.tasks=[]}return t.prototype.call=function(){return z(this.tasks)},t.prototype.tap=function(t,e){this.tasks.push(function(n){n(e(),t)})},t}()),q=function(){function t(){this.args=[],this.tasks=[]}return t.prototype.promise=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,z(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push(function(r){return i(n,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,e.apply(void 0,s([],a(this.args),!1))];case 1:return n.sent(),r(null,t),[2]}})})})},t}(),Z=function(){function t(){this.args=[],this.tasks=[]}return t.prototype.promise=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];return this.args=e,z(this.tasks)},t.prototype.tapPromise=function(t,e){var n=this;this.tasks.push(function(r){return i(n,void 0,void 0,function(){var n;return o(this,function(i){switch(i.label){case 0:return[4,e.apply(void 0,s([],a(this.args),!1))];case 1:return n=i.sent(),r(n,t),[2]}})})})},t}(),X=function(){function t(){this.tasks=[]}return t.prototype.promise=function(){return H(this.tasks)},t.prototype.tapPromise=function(t,e){0===this.tasks.length?this.tasks.push(function(t){e().then(function(e){t(null,e)})}):this.tasks.push(function(t,n){e(t).then(function(t){n(null,t)})})},t}()}).call(e,n(879).setImmediate,n(135))},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g}),n.d(e,"c",function(){return g});var o=n(15),a=n(10),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(6),p=n(11),d=n(9),v=n(37),m=n.n(v);n.d(e,"b",function(){return p.j});var g=function(t){function e(t){var r;return Object(s.a)(this,e),r=n.call(this),e.controlCount++,r.controlOption=Object(a.a)(Object(a.a)({},r.getDefault(t)),t||{}),r}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getOptions",value:function(){return this.controlOption}},{key:"setOptions",value:function(t){var e=this.getDefault(t);Object.entries(t).forEach(function(n){var r=Object(o.a)(n,2),i=r[0];void 0===r[1]&&(t[i]=e[i])}),"position"in t&&this.setPosition(t.position),"className"in t&&this.setClassName(t.className),"style"in t&&this.setStyle(t.style),this.controlOption=Object(a.a)(Object(a.a)({},this.controlOption),t)}},{key:"addTo",value:function(t){this.mapsService=t.get(p.p.IMapService),this.renderService=t.get(p.p.IRendererService),this.layerService=t.get(p.p.ILayerService),this.controlService=t.get(p.p.IControlService),this.configService=t.get(p.p.IGlobalConfigService),this.scene=t.get(p.p.ISceneService),this.sceneContainer=t,this.isShow=!0,this.container=this.onAdd(),d.b.addClass(this.container,"l7-control");var e=this.controlOption,n=e.className,r=e.style;return n&&this.setClassName(n),r&&this.setStyle(r),this.insertContainer(),this.emit("add",this),this}},{key:"remove",value:function(){if(!this.mapsService)return this;d.b.remove(this.container),this.onRemove(),this.emit("remove",this)}},{key:"onAdd",value:function(){return d.b.create("div")}},{key:"onRemove",value:function(){}},{key:"show",value:function(){var t=this.container;d.b.removeClass(t,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}},{key:"hide",value:function(){var t=this.container;d.b.addClass(t,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}},{key:"getDefault",value:function(t){return{position:p.j.TOPRIGHT,name:"".concat(e.controlCount)}}},{key:"getContainer",value:function(){return this.container}},{key:"getIsShow",value:function(){return this.isShow}},{key:"_refocusOnMap",value:function(t){if(this.mapsService&&t&&t.screenX>0&&t.screenY>0){var e=this.mapsService.getContainer();null!==e&&e.focus()}}},{key:"setPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.j.TOPLEFT,e=this.controlService;return e&&e.removeControl(this),this.controlOption.position=t,e&&e.addControl(this,this.sceneContainer),this}},{key:"setClassName",value:function(t){var e=this.container,n=this.controlOption.className;n&&d.b.removeClass(e,n),t&&d.b.addClass(e,t)}},{key:"setStyle",value:function(t){var e=this.container;t?e.setAttribute("style",t):e.removeAttribute("style")}},{key:"insertContainer",value:function(){var t=this.controlOption.position,e=this.container;if(t instanceof Element)t.appendChild(e);else{var n=this.controlService.controlCorners[t];["bottomleft","bottomright","righttop","rightbottom"].includes(t)?n.insertBefore(e,n.firstChild):n.appendChild(e)}}},{key:"checkUpdateOption",value:function(t,e){return e.some(function(e){return e in t})}}]),e}(m.a);Object(h.a)(g,"controlCount",0)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(20),a=n(0),s=n(1),u=n(12),c=n(32),l=n(3),f=n(4),h=n(2),p=n(6),d=n(9),v=n(436),m=function(t){return t.ActiveOptionClassName="l7-select-control-item-active",t.OptionValueAttrKey="data-option-value",t.OptionIndexAttrKey="data-option-index",t}(m||{}),g=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(u.a)(t),"selectValue",[]),Object(p.a)(Object(u.a)(t),"createNormalOption",function(e){var n=t.selectValue.includes(e.value),r=d.b.create("div","l7-select-control-item ".concat(n?m.ActiveOptionClassName:""));t.getIsMultiple()&&r.appendChild(t.createCheckbox(n)),e.icon&&r.appendChild(e.icon);var i=d.b.create("span");return i.innerText=e.text,r.appendChild(i),r}),Object(p.a)(Object(u.a)(t),"onItemClick",function(e){if(t.getIsMultiple()){var n=t.selectValue.findIndex(function(t){return t===e.value});n>-1?t.selectValue.splice(n,1):t.selectValue=[].concat(Object(o.a)(t.selectValue),[e.value])}else t.selectValue=[e.value];t.setSelectValue(t.selectValue)}),t}Object(l.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"setOptions",value:function(t){Object(c.a)(Object(h.a)(e.prototype),"setOptions",this).call(this,t);var n=t.options;n&&this.popper.setContent(this.getPopperContent(n))}},{key:"onAdd",value:function(){var t=Object(c.a)(Object(h.a)(e.prototype),"onAdd",this).call(this),n=this.controlOption.defaultValue;return n&&(this.selectValue=this.transSelectValue(n)),this.popper.setContent(this.getPopperContent(this.controlOption.options)),t}},{key:"getSelectValue",value:function(){return this.getIsMultiple()?this.selectValue:this.selectValue[0]}},{key:"setSelectValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.transSelectValue(t);this.optionDOMList.forEach(function(t){var n=t.getAttribute(m.OptionValueAttrKey),i=e.getIsMultiple()?t.querySelector("input[type=checkbox]"):void 0;r.includes(n)?(d.b.addClass(t,m.ActiveOptionClassName),i&&d.b.setChecked(i,!0)):(d.b.removeClass(t,m.ActiveOptionClassName),i&&d.b.setChecked(i,!1))}),this.selectValue=r,n&&this.emit("selectChange",this.getIsMultiple()?r:r[0])}},{key:"getIsMultiple",value:function(){return!1}},{key:"getPopperContent",value:function(t){var e=this,n=this.isImageOptions(),r=d.b.create("div",n?"l7-select-control--image":"l7-select-control--normal");this.getIsMultiple()&&d.b.addClass(r,"l7-select-control--multiple");var i=t.map(function(t,r){var i=n?e.createImageOption(t):e.createNormalOption(t);return i.setAttribute(m.OptionValueAttrKey,t.value),i.setAttribute(m.OptionIndexAttrKey,window.String(r)),i.addEventListener("click",e.onItemClick.bind(e,t)),i});return r.append.apply(r,Object(o.a)(i)),this.optionDOMList=i,r}},{key:"createImageOption",value:function(t){var e=this.selectValue.includes(t.value),n=d.b.create("div","l7-select-control-item ".concat(e?m.ActiveOptionClassName:"")),r=d.b.create("img");r.setAttribute("src",t.img),d.b.setUnDraggable(r),n.appendChild(r);var i=d.b.create("div","l7-select-control-item-row");this.getIsMultiple()&&n.appendChild(this.createCheckbox(e));var o=d.b.create("span");return o.innerText=t.text,i.appendChild(o),n.appendChild(i),n}},{key:"createCheckbox",value:function(t){var e=d.b.create("input");return e.setAttribute("type","checkbox"),t&&d.b.setChecked(e,!0),e}},{key:"isImageOptions",value:function(){return!!this.controlOption.options.find(function(t){return t.img})}},{key:"transSelectValue",value:function(t){return Array.isArray(t)?t:[t]}}]),e}(v.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(10),i=n(0),o=n(1),a=n(443),s=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,[{key:"syncWithMapCamera",value:function(t){var e=t.center,n=t.zoom,i=t.pitch,o=t.bearing,s=t.viewportHeight,u=t.viewportWidth,c=this.viewport?{width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing}:{};this.viewport=new a.a(Object(r.a)(Object(r.a)({},c),{},{width:u,height:s,longitude:e&&e[0],latitude:e&&e[1],zoom:n,pitch:i,bearing:o}))}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}()},function(t,e,n){var r=n(976),i=n(1033),o=i(function(t,e,n){r(t,e,n)});t.exports=o},function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=n(988),o=n(994);t.exports=r},function(t,e,n){function r(t){if(!o(t))return!1;var e=i(t);return e==s||e==u||e==a||e==c}var i=n(203),o=n(114),a="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",c="[object Proxy]";t.exports=r},function(t,e,n){function r(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var i=n(453);t.exports=r},function(t,e,n){function r(t){return null!=t&&o(t.length)&&!i(t)}var i=n(292),o=n(458);t.exports=r},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(115),a=n(206),s=function(){function t(e){Object(r.a)(this,t),this.reset(),this.clickTolerance=e.clickTolerance||1}return Object(i.a)(t,[{key:"reset",value:function(){this.active=!1,this.moved=!1,delete this.lastPoint,delete this.eventButton}},{key:"mousedown",value:function(t,e){if(!this.lastPoint){var n=o.a.mouseButton(t);this.correctButton(t,n)&&(this.lastPoint=e,this.eventButton=n)}}},{key:"mousemoveWindow",value:function(t,e){var n=this.lastPoint;if(n){if(t.preventDefault(),Object(a.c)(t,this.eventButton))return void this.reset();if(this.moved||!(e.dist(n)<this.clickTolerance))return this.moved=!0,this.lastPoint=e,this.move(n,e)}}},{key:"mouseupWindow",value:function(t){if(this.lastPoint){o.a.mouseButton(t)===this.eventButton&&(this.moved&&o.a.suppressClick(),this.reset())}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"correctButton",value:function(t,e){return!1}},{key:"move",value:function(t,e){}}]),t}()},function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}n.d(e,"a",function(){return u});var i=n(15),o=n(0),a=n(1),s=n(115),u=function(){function t(){Object(o.a)(this,t),this.reset()}return Object(a.a)(t,[{key:"reset",value:function(){this.active=!1,delete this.firstTwoTouches}},{key:"start",value:function(t){}},{key:"move",value:function(t,e,n){}},{key:"touchstart",value:function(t,e,n){this.firstTwoTouches||n.length<2||(this.firstTwoTouches=[n[0].identifier,n[1].identifier],this.start([e[0],e[1]]))}},{key:"touchmove",value:function(t,e,n){if(this.firstTwoTouches){t.preventDefault();var o=Object(i.a)(this.firstTwoTouches,2),a=o[0],s=o[1],u=r(n,e,a),c=r(n,e,s);if(u&&c){var l=this.aroundCenter?null:u.add(c).div(2);return this.move([u,c],l,t)}}}},{key:"touchend",value:function(t,e,n){if(this.firstTwoTouches){var o=Object(i.a)(this.firstTwoTouches,2),a=o[0],u=o[1],c=r(n,e,a),l=r(n,e,u);c&&l||(this.active&&s.a.suppressClick(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(t){this.enabled=!0,this.aroundCenter=!!t&&"center"===t.around}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(10),a=n(7),s=n(0),u=n(1),c=n(12),l=n(3),f=n(4),h=n(2),p=n(6),d=n(8),v=n.n(d),m=n(46),g=n(1105),y=function(t){function e(){var t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(c.a)(t),"type","LineLayer"),Object(p.a)(Object(c.a)(t),"enableEncodeStyles",["opacity","offsets","stroke"]),Object(p.a)(Object(c.a)(t),"arrowInsertCount",0),Object(p.a)(Object(c.a)(t),"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}}),t}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(v.a.mark(function t(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new g.a[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getDefaultConfig",value:function(){return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{}}[this.getModelType()]}},{key:"getModelType",value:function(){var t;if(this.layerType)return this.layerType;var e=this.styleAttributeService.getLayerStyleAttribute("shape");return(null===e||void 0===e?void 0:null===(t=e.scale)||void 0===t?void 0:t.field)||"line"}},{key:"processData",value:function(t){if("simple"!==this.getModelType())return t;var e=[];return t.map(function(t){if(Array.isArray(t.coordinates)&&Array.isArray(t.coordinates[0])&&Array.isArray(t.coordinates[0][0])){var n=Object(o.a)({},t);t.coordinates.map(function(t){e.push(Object(o.a)(Object(o.a)({},n),{},{coordinates:t}))})}else e.push(t)}),e}}]),e}(m.a)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=s();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var u=n(7),c=n(0),l=n(1),f=n(12),h=n(3),p=n(4),d=n(2),v=n(6),m=n(8),g=n.n(m),y=n(46),_=n(1114),b=function(t){function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(v.a)(Object(f.a)(t),"type","PointLayer"),Object(v.a)(Object(f.a)(t),"enableEncodeStyles",["opacity","offsets","stroke"]),Object(v.a)(Object(f.a)(t),"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}}),t}Object(h.a)(e,t);var n=a(e);return Object(l.a)(e,[{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(u.a)(g.a.mark(function t(){var e;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel&&this.layerModel.clearModels(),this.layerModel=new _.a[e](this),t.next=5,this.initLayerModels();case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"rebuildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(u.a)(g.a.mark(function t(){return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.buildModels();case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var t=this.shapeOption,e=t.field,n=t.values,i=this.getLayerConfig(),o=i.shape2d,a=this.iconService.getIconMap();if(e&&-1!==(null===o||void 0===o?void 0:o.indexOf(e)))return"fill";if("text"===n)return"text";if(n&&n instanceof Array){var s,u=r(n);try{for(u.s();!(s=u.n()).done;){var c=s.value;if("string"===typeof c&&a.hasOwnProperty(c))return"image"}}catch(t){u.e(t)}finally{u.f()}}}return"normal"}},{key:"getDefaultConfig",value:function(){return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[this.getModelType()]}},{key:"getModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find(function(t){return t.hasOwnProperty("shape")});if(o){var a=o.shape;return"dot"===a?"normal":"simple"===a?"simplePoint":"radar"===a?"radar":"fillImage"===this.layerType?"fillImage":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"GLOBEL"===this.mapService.version?"earthFill":"fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"GLOBEL"===this.mapService.version?"earthExtrude":"extrude":i.hasOwnProperty(a)?"image":"text"}return this.getModelTypeWillEmptyData()}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1123),g=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"type","PolygonLayer"),Object(h.a)(Object(u.a)(t),"enableEncodeStyles",["opacity"]),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new m.a[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getModelType",value:function(){var t,e=this.styleAttributeService.getLayerStyleAttribute("shape"),n=null===e||void 0===e?void 0:null===(t=e.scale)||void 0===t?void 0:t.field;return"fill"!==n&&n?"extrude"===n?"extrude":"water"===n?"water":"ocean"===n?"ocean":"line"===n?"line":this.getPointModelType():"fill"}},{key:"getPointModelType",value:function(){var t=this.getEncodedData(),e=this.getLayerConfig(),n=e.shape2d,r=e.shape3d,i=this.iconService.getIconMap(),o=t.find(function(t){return t.hasOwnProperty("shape")});if(o){var a=o.shape;return"dot"===a?"point_normal":-1!==(null===n||void 0===n?void 0:n.indexOf(a))?"point_fill":-1!==(null===r||void 0===r?void 0:r.indexOf(a))?"point_extrude":i.hasOwnProperty(a)?"point_image":"text"}return"fill"}}]),e}(v.a)},function(t,e,n){"use strict";var r=n(165);e.a=function(t,e,n){if(null==n&&(n=r.a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,o=(i-1)*e,a=Math.floor(o),s=+n(t[a],a,t);return s+(+n(t[a+1],a+1,t)-s)*(o-a)}}},function(t,e,n){"use strict";var r=n(107),i=n(494),o=n(497),a=n(498),s=n(210),u=n(499),c=n(500),l=n(496),f=n(303);e.a=function(t,e){var n,h=typeof e;return null==e||"boolean"===h?Object(l.a)(e):("number"===h?s.a:"string"===h?(n=Object(r.a)(e))?(e=n,i.a):c.a:e instanceof r.a?i.a:e instanceof Date?a.a:Object(f.b)(e)?f.a:Array.isArray(e)?o.a:"function"!==typeof e.valueOf&&"function"!==typeof e.toString||isNaN(e)?u.a:s.a)(t,e)}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}e.a=r,e.b=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[i],a=t[i+1],s=i>0?t[i-1]:2*o-a,u=i<e-1?t[i+2]:2*a-o;return r((n-i/e)*e,s,o,a,u)}}},function(t,e,n){"use strict";function r(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}e.b=r,e.a=function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(i=t[o],o,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}n.d(e,"b",function(){return o});var o="$";r.prototype=i.prototype={constructor:r,has:function(t){return o+t in this},get:function(t){return this[o+t]},set:function(t,e){return this[o+t]=e,this},remove:function(t){var e=o+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===o&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===o&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===o&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===o&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===o&&++t;return t},empty:function(){for(var t in this)if(t[0]===o)return!1;return!0},each:function(t){for(var e in this)e[0]===o&&t(this[e],e.slice(1),this)}},e.a=i},function(t,e,n){"use strict";function r(t){return Math.log(t)}function i(t){return Math.exp(t)}function o(t){return-Math.log(-t)}function a(t){return-Math.exp(-t)}function s(t){return isFinite(t)?+("1e"+t):t<0?0:t}function u(t){return 10===t?s:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function c(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function l(t){return function(e){return-t(-e)}}function f(t){function e(){return n=c(m),s=u(m),h()[0]<0?(n=l(n),s=l(s),t(o,a)):t(r,i),f}var n,s,f=t(r,i),h=f.domain,m=10;return f.base=function(t){return arguments.length?(m=+t,e()):m},f.domain=function(t){return arguments.length?(h(t),e()):h()},f.ticks=function(t){var e,r=h(),i=r[0],o=r[r.length-1];(e=o<i)&&(l=i,i=o,o=l);var a,u,c,l=n(i),f=n(o),d=null==t?10:+t,v=[];if(!(m%1)&&f-l<d){if(l=Math.round(l)-1,f=Math.round(f)+1,i>0){for(;l<f;++l)for(u=1,a=s(l);u<m;++u)if(!((c=a*u)<i)){if(c>o)break;v.push(c)}}else for(;l<f;++l)for(u=m-1,a=s(l);u>=1;--u)if(!((c=a*u)<i)){if(c>o)break;v.push(c)}}else v=Object(p.i)(l,f,Math.min(f-l,d)).map(s);return e?v.reverse():v},f.tickFormat=function(t,e){if(null==e&&(e=10===m?".0e":","),"function"!==typeof e&&(e=Object(d.a)(e)),t===1/0)return e;null==t&&(t=10);var r=Math.max(1,m*t/f.ticks().length);return function(t){var i=t/s(Math.round(n(t)));return i*m<m-.5&&(i*=m),i<=r?e(t):""}},f.nice=function(){return h(Object(v.a)(h(),{floor:function(t){return s(Math.floor(n(t)))},ceil:function(t){return s(Math.ceil(n(t)))}}))},f}function h(){var t=f(Object(m.d)()).domain([1,10]);return t.copy=function(){return Object(m.a)(t,h()).base(t.base())},g.b.apply(t,arguments),t}e.b=f,e.a=h;var p=n(65),d=n(504),v=n(508),m=n(94),g=n(47)},function(t,e,n){"use strict";function r(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function i(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function o(t){var e=1,n=t(r(e),i(e));return n.constant=function(n){return arguments.length?t(r(e=+n),i(e)):e},Object(a.b)(n)}e.a=o;var a=n(118);n(94),n(47)},function(t,e,n){"use strict";function r(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function i(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function o(t){return t<0?-t*t:t*t}function a(t){function e(){return 1===a?t(c.c,c.c):.5===a?t(i,o):t(r(a),r(1/a))}var n=t(c.c,c.c),a=1;return n.exponent=function(t){return arguments.length?(a=+t,e()):a},Object(u.b)(n)}function s(){var t=a(Object(c.d)());return t.copy=function(){return Object(c.a)(t,s()).exponent(t.exponent())},l.b.apply(t,arguments),t}e.b=a,e.a=s;var u=n(118),c=n(94),l=n(47)},function(t,e,n){"use strict";var r=(n(43),n(1200));n.d(e,"c",function(){return r.a}),n.d(e,"n",function(){return r.a});var i=n(1201);n.d(e,"g",function(){return i.a}),n.d(e,"r",function(){return i.a});var o=n(1202);n.d(e,"d",function(){return o.a});var a=n(1203);n.d(e,"b",function(){return a.a});var s=n(1204);n.d(e,"a",function(){return s.a});var u=n(1205);n.d(e,"j",function(){return u.b}),n.d(e,"h",function(){return u.b}),n.d(e,"e",function(){return u.a}),n.d(e,"i",function(){return u.c});var c=n(1206);n.d(e,"f",function(){return c.a});var l=n(1207);n.d(e,"k",function(){return l.a});var f=n(1208);n.d(e,"o",function(){return f.a});var h=n(1209);n.d(e,"m",function(){return h.a});var p=n(1210);n.d(e,"l",function(){return p.a});var d=n(1211);n.d(e,"u",function(){return d.b}),n.d(e,"s",function(){return d.b}),n.d(e,"p",function(){return d.a}),n.d(e,"t",function(){return d.c});var v=n(1212);n.d(e,"q",function(){return v.a});var m=n(1213);n.d(e,"v",function(){return m.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s});var r,i,o,a,s,u=n(511);!function(t){r=Object(u.a)(t),i=r.format,o=r.parse,a=r.utcFormat,s=r.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=Object.create(null)),t}function i(t,e,n){void 0===e&&(e=[]),void 0===n&&(n={});var r=n.parsingContext,i=void 0===n.timeout?0:n.timeout,o="\n    (function anonymous("+e.join(",")+"){\n         "+t+"\n    });\n    ";return new a.a(r,{ecmaVersion:n.ecmaVersion,timeout:i,rootContext:n.rootContext,globalContextInFunction:n.globalContextInFunction}).evaluate(o)}function o(t,e,n){return new a.a(e,n).evaluate(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.createContext=r,e.compileFunction=i,n.d(e,"runInContext",function(){return o}),n.d(e,"runInNewContext",function(){return s}),n.d(e,"Script",function(){return u});var a=n(515),s=o,u=function(){function t(t){this._code=t}var e=t.prototype;return e.runInContext=function(t){return o(this._code,t)},e.runInNewContext=function(t){return o(this._code,t)},t}()},function(t,e,n){var r=n(24),i=n(21).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(21),i=n(66),o=n(96),a=n(517),s=n(33).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(166)("keys"),i=n(120);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(21).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(24),i=n(17),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(67)(Function.call,n(59).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(t,e,n){var r=n(24),i=n(316).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(69),i=n(77);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){"use strict";var r=n(96),i=n(5),o=n(51),a=n(50),s=n(149),u=n(323),c=n(146),l=n(60),f=n(27)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,m,g){u(n,e,d);var y,_,b,x=function(t){if(!h&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",E="values"==v,S=!1,O=t.prototype,T=O[f]||O["@@iterator"]||v&&O[v],A=T||x(v),C=v?E?x("entries"):A:void 0,k="Array"==e?O.entries||T:T;if(k&&(b=l(k.call(new t)))!==Object.prototype&&b.next&&(c(b,w,!0),r||"function"==typeof b[f]||a(b,f,p)),E&&T&&"values"!==T.name&&(S=!0,A=function(){return T.call(this)}),r&&!g||!h&&!S&&O[f]||a(O,f,A),s[e]=A,s[w]=p,v)if(y={values:E?A:x("values"),keys:m?A:x("keys"),entries:C},g)for(_ in y)_ in O||o(O,_,y[_]);else i(i.P+i.F*(h||S),e,y);return y}},function(t,e,n){"use strict";var r=n(123),i=n(119),o=n(146),a={};n(50)(a,n(27)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(218),i=n(77);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(27)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(149),i=n(27)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(33),i=n(119);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(147),i=n(27)("iterator"),o=n(149);t.exports=n(66).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(1361);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var r=n(34),i=n(122),o=n(29);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(98),i=n(534),o=n(149),a=n(58);t.exports=n(322)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";var r=n(169),i=RegExp.prototype.exec,o=String.prototype.replace,a=i,s=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),u=void 0!==/()??/.exec("")[1];(s||u)&&(a=function(t){var e,n,a,c,l=this;return u&&(n=new RegExp("^"+l.source+"$(?!\\s)",r.call(l))),s&&(e=l.lastIndex),a=i.call(l,t),s&&a&&(l.lastIndex=l.global?a.index+a[0].length:e),u&&a&&a.length>1&&o.call(a[0],n,function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)}),a}),t.exports=a},function(t,e,n){"use strict";var r=n(217)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){var r,i,o,a=n(67),s=n(524),u=n(315),c=n(311),l=n(21),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=l.Dispatch,m=0,g={},y=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},_=function(t){y.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},p=function(t){delete g[t]},"process"==n(68)(f)?r=function(t){f.nextTick(a(y,t,1))}:v&&v.now?r=function(t){v.now(a(y,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=_,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,n){var r=n(21),i=n(334).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(68)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,h=document.createTextNode("");new o(c).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n(44);t.exports.f=function(t){return new r(t)}},function(t,e,n){"use strict";function r(t,e,n){var r,i,o,a=new Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?z(2,-24)-z(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for(t=N(t),t!=t||t===L?(i=t!=t?1:0,r=u):(r=F(B(t)/U),t*(o=z(2,-r))<1&&(r--,o*=2),t+=r+c>=1?l/o:l*z(2,1-c),t*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*z(2,e),r+=c):(i=t*z(2,c-1)*z(2,e),r=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a}function i(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-L:L;r+=z(2,e),l-=a}return(c?-1:1)*r*z(2,l-e)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return[255&t]}function s(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function c(t){return r(t,52,8)}function l(t){return r(t,23,4)}function f(t,e,n){T(t[k],e,{get:function(){return this[n]}})}function h(t,e,n,r){var i=+n,o=S(i);if(o+e>t[G])throw R(M);var a=t[V]._b,s=o+t[H],u=a.slice(s,s+e);return r?u:u.reverse()}function p(t,e,n,r,i,o){var a=+n,s=S(a);if(s+e>t[G])throw R(M);for(var u=t[V]._b,c=s+t[H],l=r(+i),f=0;f<e;f++)u[c+f]=l[o?f:e-f-1]}var d=n(21),v=n(30),m=n(96),g=n(224),y=n(50),_=n(128),b=n(23),x=n(126),w=n(69),E=n(29),S=n(544),O=n(124).f,T=n(33).f,A=n(330),C=n(146),k="prototype",M="Wrong index!",P=d.ArrayBuffer,j=d.DataView,I=d.Math,R=d.RangeError,L=d.Infinity,D=P,N=I.abs,z=I.pow,F=I.floor,B=I.log,U=I.LN2,V=v?"_b":"buffer",G=v?"_l":"byteLength",H=v?"_o":"byteOffset";if(g.ABV){if(!b(function(){P(1)})||!b(function(){new P(-1)})||b(function(){return new P,new P(1.5),new P(NaN),"ArrayBuffer"!=P.name})){P=function(t){return x(this,P),new D(S(t))};for(var W,q=P[k]=D[k],Z=O(D),X=0;Z.length>X;)(W=Z[X++])in P||y(P,W,D[W]);m||(q.constructor=P)}var Y=new j(new P(2)),K=j[k].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||_(j[k],{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},!0)}else P=function(t){x(this,P,"ArrayBuffer");var e=S(t);this._b=A.call(new Array(e),0),this[G]=e},j=function(t,e,n){x(this,j,"DataView"),x(t,P,"DataView");var r=t[G],i=w(e);if(i<0||i>r)throw R("Wrong offset!");if(n=void 0===n?r-i:E(n),i+n>r)throw R("Wrong length!");this[V]=t,this[H]=i,this[G]=n},v&&(f(P,"byteLength","_l"),f(j,"buffer","_b"),f(j,"byteLength","_l"),f(j,"byteOffset","_o")),_(j[k],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var e=h(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=h(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){p(this,1,t,a,e)},setUint8:function(t,e){p(this,1,t,a,e)},setInt16:function(t,e){p(this,2,t,s,e,arguments[2])},setUint16:function(t,e){p(this,2,t,s,e,arguments[2])},setInt32:function(t,e){p(this,4,t,u,e,arguments[2])},setUint32:function(t,e){p(this,4,t,u,e,arguments[2])},setFloat32:function(t,e){p(this,4,t,l,e,arguments[2])},setFloat64:function(t,e){p(this,8,t,c,e,arguments[2])}});C(P,"ArrayBuffer"),C(j,"DataView"),y(j[k],g.VIEW,!0),e.ArrayBuffer=P,e.DataView=j},function(t,e,n){"use strict";function r(){}function i(t){try{return t.then}catch(t){return g=t,y}}function o(t,e){try{return t(e)}catch(t){return g=t,y}}function a(t,e,n){try{t(e,n)}catch(t){return g=t,y}}function s(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,t!==r&&v(t,this)}function u(t,e,n){return new t.constructor(function(i,o){var a=new s(r);a.then(i,o),c(t,new d(e,n,a))})}function c(t,e){for(;3===t._83;)t=t._18;if(s._47&&s._47(t),0===t._83)return 0===t._75?(t._75=1,void(t._38=e)):1===t._75?(t._75=2,void(t._38=[t._38,e])):void t._38.push(e);l(t,e)}function l(t,e){m(function(){var n=1===t._83?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._83?f(e.promise,t._18):h(e.promise,t._18));var r=o(n,t._18);r===y?h(e.promise,g):f(e.promise,r)})}function f(t,e){if(e===t)return h(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===typeof e||"function"===typeof e)){var n=i(e);if(n===y)return h(t,g);if(n===t.then&&e instanceof s)return t._83=3,t._18=e,void p(t);if("function"===typeof n)return void v(n.bind(e),t)}t._83=1,t._18=e,p(t)}function h(t,e){t._83=2,t._18=e,s._71&&s._71(t,e),p(t)}function p(t){if(1===t._75&&(c(t,t._38),t._38=null),2===t._75){for(var e=0;e<t._38.length;e++)c(t,t._38[e]);t._38=null}}function d(t,e,n){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=n}function v(t,e){var n=!1,r=a(t,function(t){n||(n=!0,f(e,t))},function(t){n||(n=!0,h(e,t))});n||r!==y||(n=!0,h(e,g))}var m=n(555),g=null,y={};t.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(t,e){if(this.constructor!==s)return u(this,t,e);var n=new s(r);return c(this,new d(t,e,n)),n}},function(t,e,n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=c,this.updater=n||u}function i(t,e,n){this.props=t,this.context=e,this.refs=c,this.updater=n||u}function o(){}var a=n(150),s=n(28),u=n(340),c=(n(341),n(228));n(18),n(559);r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&a("85"),this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")};o.prototype=r.prototype,i.prototype=new o,i.prototype.constructor=i,s(i.prototype,r.prototype),i.prototype.isPureReactComponent=!0,t.exports={Component:r,PureComponent:i}},function(t,e,n){"use strict";var r=(n(26),{isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){},enqueueReplaceState:function(t,e){},enqueueSetState:function(t,e){}});t.exports=r},function(t,e,n){"use strict";var r=!1;t.exports=r},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=r},function(t,e,n){"use strict";var r=n(567);t.exports=function(t){return r(t,!1)}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var r={hasCachedChildNodes:1};t.exports=r},function(t,e,n){"use strict";function r(t,e){return null==e&&i("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var i=n(25);n(18);t.exports=r},function(t,e,n){"use strict";function r(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}t.exports=r},function(t,e,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=n(45),o=null;t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(25),o=n(99),a=(n(18),function(){function t(e){r(this,t),this._callbacks=null,this._contexts=null,this._arg=e}return t.prototype.enqueue=function(t,e){this._callbacks=this._callbacks||[],this._callbacks.push(t),this._contexts=this._contexts||[],this._contexts.push(e)},t.prototype.notifyAll=function(){var t=this._callbacks,e=this._contexts,n=this._arg;if(t&&e){t.length!==e.length&&i("24"),this._callbacks=null,this._contexts=null;for(var r=0;r<t.length;r++)t[r].call(e[r],n);t.length=0,e.length=0}},t.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},t.prototype.rollback=function(t){this._callbacks&&this._contexts&&(this._callbacks.length=t,this._contexts.length=t)},t.prototype.reset=function(){this._callbacks=null,this._contexts=null},t.prototype.destructor=function(){this.reset()},t}());t.exports=o.addPoolingTo(a)},function(t,e,n){"use strict";var r={logTopLevelRenders:!1};t.exports=r},function(t,e,n){"use strict";function r(t){var e=t.type,n=t.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===e||"radio"===e)}function i(t){return t._wrapperState.valueTracker}function o(t,e){t._wrapperState.valueTracker=e}function a(t){t._wrapperState.valueTracker=null}function s(t){var e;return t&&(e=r(t)?""+t.checked:t.value),e}var u=n(31),c={_getTrackerFromNode:function(t){return i(u.getInstanceFromNode(t))},track:function(t){if(!i(t)){var e=u.getNodeFromInstance(t),n=r(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];e.hasOwnProperty(n)||"function"!==typeof s.get||"function"!==typeof s.set||(Object.defineProperty(e,n,{enumerable:s.enumerable,configurable:!0,get:function(){return s.get.call(this)},set:function(t){c=""+t,s.set.call(this,t)}}),o(t,{getValue:function(){return c},setValue:function(t){c=""+t},stopTracking:function(){a(t),delete e[n]}}))}},updateValueIfChanged:function(t){if(!t)return!1;var e=i(t);if(!e)return c.track(t),!0;var n=e.getValue(),r=s(u.getNodeFromInstance(t));return r!==n&&(e.setValue(r),!0)},stopTracking:function(t){var e=i(t);e&&e.stopTracking()}};t.exports=c},function(t,e,n){"use strict";function r(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!i[t.type]:"textarea"===e}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},function(t,e,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){r.currentScrollLeft=t.x,r.currentScrollTop=t.y}};t.exports=r},function(t,e,n){"use strict";var r=n(45),i=n(174),o=n(173),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){if(3===t.nodeType)return void(t.nodeValue=e);o(t,i(e))})),t.exports=a},function(t,e,n){"use strict";function r(t){try{t.focus()}catch(t){}}t.exports=r},function(t,e,n){"use strict";function r(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(t){o.forEach(function(e){i[r(e,t)]=i[t]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:a};t.exports=s},function(t,e,n){"use strict";function r(t){return!!c.hasOwnProperty(t)||!u.hasOwnProperty(t)&&(s.test(t)?(c[t]=!0,!0):(u[t]=!0,!1))}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&!1===e}var o=n(132),a=(n(31),n(61),n(604)),s=(n(26),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),u={},c={},l={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+a(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){if(i(n,e))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&!0===e?r+'=""':r+"="+a(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+a(e):null},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+a(e):""},setValueForProperty:function(t,e,n){var r=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(r){var a=r.mutationMethod;if(a)a(t,n);else{if(i(r,n))return void this.deleteValueForProperty(t,e);if(r.mustUseProperty)t[r.propertyName]=n;else{var s=r.attributeName,u=r.attributeNamespace;u?t.setAttributeNS(u,s,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?t.setAttribute(s,""):t.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(e))return void l.setValueForAttribute(t,e,n)},setValueForAttribute:function(t,e,n){if(r(e)){null==n?t.removeAttribute(e):t.setAttribute(e,""+n)}},deleteValueForAttribute:function(t,e){t.removeAttribute(e)},deleteValueForProperty:function(t,e){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){var r=n.mutationMethod;if(r)r(t,void 0);else if(n.mustUseProperty){var i=n.propertyName;n.hasBooleanValue?t[i]=!1:t[i]=""}else t.removeAttribute(n.attributeName)}else o.isCustomAttribute(e)&&t.removeAttribute(e)}};t.exports=l},function(t,e,n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=s.getValue(t);null!=e&&i(this,Boolean(t.multiple),e)}}function i(t,e,n){var r,i,o=u.getNodeFromInstance(t).options;if(e){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function o(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(r,this),n}var a=n(28),s=n(239),u=n(31),c=n(72),l=(n(26),!1),f={getHostProps:function(t,e){return a({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){var n=s.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:e.defaultValue,listeners:null,onChange:o.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||l||(l=!0)},getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=s.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,i(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?i(t,Boolean(e.multiple),e.defaultValue):i(t,Boolean(e.multiple),e.multiple?[]:""))}};t.exports=f},function(t,e,n){"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"===typeof t&&"undefined"!==typeof t.prototype&&"function"===typeof t.prototype.mountComponent&&"function"===typeof t.prototype.receiveComponent}function o(t,e){var n;if(null===t||!1===t)n=c.create(o);else if("object"===typeof t){var s=t,u=s.type;if("function"!==typeof u&&"string"!==typeof u){var h="";h+=r(s._owner),a("130",null==u?u:typeof u,h)}"string"===typeof s.type?n=l.createInternalComponent(s):i(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new f(s)}else"string"===typeof t||"number"===typeof t?n=l.createInstanceForText(t):a("131",typeof t);return n._mountIndex=0,n._mountImage=null,n}var a=n(25),s=n(28),u=n(613),c=n(361),l=n(362),f=(n(614),n(18),n(26),function(t){this.construct(t)});s(f.prototype,u,{_instantiateReactComponent:o}),t.exports=o},function(t,e,n){"use strict";var r=n(25),i=n(130),o=(n(18),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||!1===t?o.EMPTY:i.isValidElement(t)?"function"===typeof t.type?o.COMPOSITE:o.HOST:void r("26",t)}});t.exports=o},function(t,e,n){"use strict";var r,i={injectEmptyComponentFactory:function(t){r=t}},o={create:function(t){return r(t)}};o.injection=i,t.exports=o},function(t,e,n){"use strict";function r(t){return s||a("111",t.type),new s(t)}function i(t){return new u(t)}function o(t){return t instanceof u}var a=n(25),s=(n(18),null),u=null,c={injectGenericComponentClass:function(t){s=t},injectTextComponentClass:function(t){u=t}},l={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:c};t.exports=l},function(t,e,n){"use strict";function r(t,e){return t&&"object"===typeof t&&null!=t.key?c.escape(t.key):e.toString(36)}function i(t,e,n,o){var h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||"object"===h&&t.$$typeof===s)return n(o,t,""===e?l+r(t,0):e),1;var p,d,v=0,m=""===e?l:e+f;if(Array.isArray(t))for(var g=0;g<t.length;g++)p=t[g],d=m+r(p,g),v+=i(p,d,n,o);else{var y=u(t);if(y){var _,b=y.call(t);if(y!==t.entries)for(var x=0;!(_=b.next()).done;)p=_.value,d=m+r(p,x++),v+=i(p,d,n,o);else for(;!(_=b.next()).done;){var w=_.value;w&&(p=w[1],d=m+c.escape(w[0])+f+r(p,0),v+=i(p,d,n,o))}}else if("object"===h){var E="",S=String(t);a("31","[object Object]"===S?"object with keys {"+Object.keys(t).join(", ")+"}":S,E)}}return v}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(25),s=(n(81),n(615)),u=n(616),c=(n(18),n(243)),l=(n(26),"."),f=":";t.exports=o},function(t,e,n){"use strict";function r(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(t){return!1}}function i(t){var e=c(t);if(e){var n=e.childIDs;l(t),n.forEach(i)}}function o(t,e,n){return"\n    in "+(t||"Unknown")+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function a(t){return null==t?"#empty":"string"===typeof t||"number"===typeof t?"#text":"string"===typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}function s(t){var e,n=O.getDisplayName(t),r=O.getElement(t),i=O.getOwnerID(t);return i&&(e=O.getDisplayName(i)),o(n,r&&r._source,e)}var u,c,l,f,h,p,d,v=n(150),m=n(81),g=(n(18),n(26),"function"===typeof Array.from&&"function"===typeof Map&&r(Map)&&null!=Map.prototype&&"function"===typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"===typeof Set&&r(Set)&&null!=Set.prototype&&"function"===typeof Set.prototype.keys&&r(Set.prototype.keys));if(g){var y=new Map,_=new Set;u=function(t,e){y.set(t,e)},c=function(t){return y.get(t)},l=function(t){y.delete(t)},f=function(){return Array.from(y.keys())},h=function(t){_.add(t)},p=function(t){_.delete(t)},d=function(){return Array.from(_.keys())}}else{var b={},x={},w=function(t){return"."+t},E=function(t){return parseInt(t.substr(1),10)};u=function(t,e){var n=w(t);b[n]=e},c=function(t){var e=w(t);return b[e]},l=function(t){var e=w(t);delete b[e]},f=function(){return Object.keys(b).map(E)},h=function(t){var e=w(t);x[e]=!0},p=function(t){var e=w(t);delete x[e]},d=function(){return Object.keys(x).map(E)}}var S=[],O={onSetChildren:function(t,e){var n=c(t);n||v("144"),n.childIDs=e;for(var r=0;r<e.length;r++){var i=e[r],o=c(i);o||v("140"),null==o.childIDs&&"object"===typeof o.element&&null!=o.element&&v("141"),o.isMounted||v("71"),null==o.parentID&&(o.parentID=t),o.parentID!==t&&v("142",i,o.parentID,t)}},onBeforeMountComponent:function(t,e,n){u(t,{element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(t,e){var n=c(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=c(t);e||v("144"),e.isMounted=!0,0===e.parentID&&h(t)},onUpdateComponent:function(t){var e=c(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=c(t);if(e){e.isMounted=!1;0===e.parentID&&p(t)}S.push(t)},purgeUnmountedComponents:function(){if(!O._preventPurging){for(var t=0;t<S.length;t++){i(S[t])}S.length=0}},isMounted:function(t){var e=c(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=a(t),r=t._owner;e+=o(n,t._source,r&&r.getName())}var i=m.current,s=i&&i._debugID;return e+=O.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=s(t),t=O.getParentID(t);return e},getChildIDs:function(t){var e=c(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=O.getElement(t);return e?a(e):null},getElement:function(t){var e=c(t);return e?e.element:null},getOwnerID:function(t){var e=O.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=c(t);return e?e.parentID:null},getSource:function(t){var e=c(t),n=e?e.element:null;return null!=n?n._source:null},getText:function(t){var e=O.getElement(t);return"string"===typeof e?e:"number"===typeof e?""+e:null},getUpdateCount:function(t){var e=c(t);return e?e.updateCount:0},getRootIDs:d,getRegisteredIDs:f,pushNonStandardWarningStack:function(t,e){if("function"===typeof console.reactStack){var n=[],r=m.current,i=r&&r._debugID;try{for(t&&n.push({name:i?O.getDisplayName(i):null,fileName:e?e.fileName:null,lineNumber:e?e.lineNumber:null});i;){var o=O.getElement(i),a=O.getParentID(i),s=O.getOwnerID(i),u=s?O.getDisplayName(s):null,c=o&&o._source;n.push({name:u,fileName:c?c.fileName:null,lineNumber:c?c.lineNumber:null}),i=a}}catch(t){}console.reactStack(n)}},popNonStandardWarningStack:function(){"function"===typeof console.reactStackEnd&&console.reactStackEnd()}};t.exports=O},function(t,e,n){"use strict";var r=n(71),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!0),{remove:function(){t.removeEventListener(e,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},function(t,e,n){"use strict";function r(t){return o(document.documentElement,t)}var i=n(628),o=n(630),a=n(355),s=n(367),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};t.exports=u},function(t,e,n){"use strict";function r(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){return t?t.nodeType===R?t.documentElement:t.firstChild:null}function o(t){return t.getAttribute&&t.getAttribute(P)||""}function a(t,e,n,r,i){var o;if(x.logTopLevelRenders){var a=t._currentElement.props.child,s=a.type;o="React mount: "+("string"===typeof s?s:s.displayName||s.name),console.time(o)}var u=S.mountComponent(t,n,null,_(t,e),i,0);o&&console.timeEnd(o),t._renderedComponent._topLevelWrapper=t,F._mountImageIntoNode(u,e,t,r,n)}function s(t,e,n,r){var i=T.ReactReconcileTransaction.getPooled(!n&&b.useCreateElement);i.perform(a,null,t,e,i,n,r),T.ReactReconcileTransaction.release(i)}function u(t,e,n){for(S.unmountComponent(t,n),e.nodeType===R&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function c(t){var e=i(t);if(e){var n=y.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function l(t){return!(!t||t.nodeType!==I&&t.nodeType!==R&&t.nodeType!==L)}function f(t){var e=i(t),n=e&&y.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function h(t){var e=f(t);return e?e._hostContainerInfo._topLevelWrapper:null}var p=n(25),d=n(134),v=n(132),m=n(130),g=n(175),y=(n(81),n(31)),_=n(645),b=n(646),x=n(350),w=n(154),E=(n(61),n(647)),S=n(133),O=n(244),T=n(72),A=n(228),C=n(359),k=(n(18),n(173)),M=n(242),P=(n(26),v.ID_ATTRIBUTE_NAME),j=v.ROOT_ATTRIBUTE_NAME,I=1,R=9,L=11,D={},N=1,z=function(){this.rootID=N++};z.prototype.isReactComponent={},z.prototype.render=function(){return this.props.child},z.isReactTopLevelWrapper=!0;var F={TopLevelWrapper:z,_instancesByReactRootID:D,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r,i){return F.scrollMonitor(r,function(){O.enqueueElementInternal(t,e,n),i&&O.enqueueCallbackInternal(t,i)}),t},_renderNewRootComponent:function(t,e,n,r){l(e)||p("37"),g.ensureScrollValueMonitoring();var i=C(t,!1);T.batchedUpdates(s,i,e,n,r);var o=i._instance.rootID;return D[o]=i,i},renderSubtreeIntoContainer:function(t,e,n,r){return null!=t&&w.has(t)||p("38"),F._renderSubtreeIntoContainer(t,e,n,r)},_renderSubtreeIntoContainer:function(t,e,n,r){O.validateCallback(r,"ReactDOM.render"),m.isValidElement(e)||p("39","string"===typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"===typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=m.createElement(z,{child:e});if(t){var u=w.get(t);a=u._processChildContext(u._context)}else a=A;var l=h(n);if(l){var f=l._currentElement,d=f.props.child;if(M(d,e)){var v=l._renderedComponent.getPublicInstance(),g=r&&function(){r.call(v)};return F._updateRootComponent(l,s,a,n,g),v}F.unmountComponentAtNode(n)}var y=i(n),_=y&&!!o(y),b=c(n),x=_&&!l&&!b,E=F._renderNewRootComponent(s,n,x,a)._renderedComponent.getPublicInstance();return r&&r.call(E),E},render:function(t,e,n){return F._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){l(t)||p("40");var e=h(t);if(!e){c(t),1===t.nodeType&&t.hasAttribute(j);return!1}return delete D[e._instance.rootID],T.batchedUpdates(u,e,t,!1),!0},_mountImageIntoNode:function(t,e,n,o,a){if(l(e)||p("41"),o){var s=i(e);if(E.canReuseMarkup(t,s))return void y.precacheNode(n,s);var u=s.getAttribute(E.CHECKSUM_ATTR_NAME);s.removeAttribute(E.CHECKSUM_ATTR_NAME);var c=s.outerHTML;s.setAttribute(E.CHECKSUM_ATTR_NAME,u);var f=t,h=r(f,c),v=" (client) "+f.substring(h-20,h+20)+"\n (server) "+c.substring(h-20,h+20);e.nodeType===R&&p("42",v)}if(e.nodeType===R&&p("43"),a.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);d.insertTreeBefore(e,t,null)}else k(e,t),y.precacheNode(n,e.firstChild)}};t.exports=F},function(t,e,n){"use strict";function r(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}var i=n(360);t.exports=r},function(t,e,n){t.exports={default:n(663),__esModule:!0}},function(t,e,n){var r=n(665);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){t.exports=!n(89)&&!n(138)(function(){return 7!=Object.defineProperty(n(373)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(137),i=n(88).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(104),i=n(105),o=n(670)(!1),a=n(251)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(376);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(178),i=n(102),o=n(378),a=n(136),s=n(256),u=n(677),c=n(258),l=n(379),f=n(139)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,v,m,g){u(n,e,d);var y,_,b,x=function(t){if(!h&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",E="values"==v,S=!1,O=t.prototype,T=O[f]||O["@@iterator"]||v&&O[v],A=T||x(v),C=v?E?x("entries"):A:void 0,k="Array"==e?O.entries||T:T;if(k&&(b=l(k.call(new t)))!==Object.prototype&&b.next&&(c(b,w,!0),r||"function"==typeof b[f]||a(b,f,p)),E&&T&&"values"!==T.name&&(S=!0,A=function(){return T.call(this)}),r&&!g||!h&&!S&&O[f]||a(O,f,A),s[e]=A,s[w]=p,v)if(y={values:E?A:x("values"),keys:m?A:x("keys"),entries:C},g)for(_ in y)_ in O||o(O,_,y[_]);else i(i.P+i.F*(h||S),e,y);return y}},function(t,e,n){t.exports=n(136)},function(t,e,n){var r=n(104),i=n(181),o=n(251)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(374),i=n(253).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(102),i=n(62),o=n(138);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){"use strict";var r=n(73),i=n.n(r),o=n(54),a=n.n(o),s=n(53),u=n.n(s),c=n(55),l=n.n(c),f=n(56),h=n.n(f),p=n(35),d=n.n(p),v=n(710),m=n(383),g={all:m.a,vertical:m.h,horizontal:m.c},y=function(t){function e(t){a()(this,e);var n=l()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n.triggerEvent=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var o=n.props[t];"function"===typeof o&&o.apply(void 0,[n.getGestureState()].concat(r))},n.triggerCombineEvent=function(t,e){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];n.triggerEvent.apply(n,[t].concat(i)),n.triggerSubEvent.apply(n,[t,e].concat(i))},n.triggerSubEvent=function(t,e){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(e){var a=Object(v.e)(t,e);n.triggerEvent.apply(n,[a].concat(i))}},n.triggerPinchEvent=function(t,e){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=n.gesture.scale;"move"===e&&"number"===typeof a&&(a>1&&n.triggerEvent("onPinchOut"),a<1&&n.triggerEvent("onPinchIn")),n.triggerCombineEvent.apply(n,[t,e].concat(i))},n.initPressTimer=function(){n.cleanPressTimer(),n.pressTimer=setTimeout(function(){n.setGestureState({press:!0}),n.triggerEvent("onPress")},m.i.time)},n.cleanPressTimer=function(){n.pressTimer&&clearTimeout(n.pressTimer)},n.setGestureState=function(t){n.gesture||(n.gesture={}),n.gesture.touches&&(n.gesture.preTouches=n.gesture.touches),n.gesture=i()({},n.gesture,t)},n.getGestureState=function(){return n.gesture?i()({},n.gesture):n.gesture},n.cleanGestureState=function(){delete n.gesture},n.getTouches=function(t){return Array.prototype.slice.call(t.touches).map(function(t){return{x:t.screenX,y:t.screenY}})},n.triggerUserCb=function(t,e){var r=Object(v.e)("onTouch",t);r in n.props&&n.props[r](e)},n._handleTouchStart=function(t){n.triggerUserCb("start",t),n.event=t,t.touches.length>1&&t.preventDefault(),n.initGestureStatus(t),n.initPressTimer(),n.checkIfMultiTouchStart()},n.initGestureStatus=function(t){n.cleanGestureState();var e=n.getTouches(t),r=Object(v.g)(),i=Object(v.b)(e);n.setGestureState({startTime:r,startTouches:e,startMutliFingerStatus:i,time:r,touches:e,mutliFingerStatus:i,srcEvent:n.event})},n.checkIfMultiTouchStart=function(){var t=n.props,e=t.enablePinch,r=t.enableRotate,i=n.gesture.touches;if(i.length>1&&(e||r)){if(e){var o=Object(v.b)(i);n.setGestureState({startMutliFingerStatus:o,pinch:!0,scale:1}),n.triggerCombineEvent("onPinch","start")}r&&(n.setGestureState({rotate:!0,rotation:0}),n.triggerCombineEvent("onRotate","start"))}},n._handleTouchMove=function(t){n.triggerUserCb("move",t),n.event=t,n.gesture&&(n.cleanPressTimer(),n.updateGestureStatus(t),n.checkIfSingleTouchMove(),n.checkIfMultiTouchMove())},n.checkIfMultiTouchMove=function(){var t=n.gesture,e=t.pinch,r=t.rotate,i=t.touches,o=t.startMutliFingerStatus,a=t.mutliFingerStatus;if(e||r){if(i.length<2)return n.setGestureState({pinch:!1,rotate:!1}),e&&n.triggerCombineEvent("onPinch","cancel"),void(r&&n.triggerCombineEvent("onRotate","cancel"));if(e){var s=a.z/o.z;n.setGestureState({scale:s}),n.triggerPinchEvent("onPinch","move")}if(r){var u=Object(v.c)(o,a);n.setGestureState({rotation:u}),n.triggerCombineEvent("onRotate","move")}}},n.allowGesture=function(){return Object(v.h)(n.gesture.direction,n.directionSetting)},n.checkIfSingleTouchMove=function(){var t=n.gesture,e=t.pan,r=t.touches,i=t.moveStatus,o=t.preTouches,a=t.availablePan,s=void 0===a||a;if(r.length>1)return n.setGestureState({pan:!1}),void(e&&n.triggerCombineEvent("onPan","cancel"));if(i&&s){var u=Object(v.f)(o[0],r[0]);n.setGestureState({direction:u});var c=Object(v.d)(u);if(!n.allowGesture())return void(e||n.setGestureState({availablePan:!1}));e?(n.triggerCombineEvent("onPan",c),n.triggerSubEvent("onPan","move")):(n.triggerCombineEvent("onPan","start"),n.setGestureState({pan:!0,availablePan:!0}))}},n.checkIfMultiTouchEnd=function(t){var e=n.gesture,r=e.pinch,i=e.rotate;r&&n.triggerCombineEvent("onPinch",t),i&&n.triggerCombineEvent("onRotate",t)},n.updateGestureStatus=function(t){var e=Object(v.g)();if(n.setGestureState({time:e}),t.touches&&t.touches.length){var r=n.gesture,i=r.startTime,o=r.startTouches,a=r.pinch,s=r.rotate,u=n.getTouches(t),c=Object(v.a)(o,u,e-i),l=void 0;(a||s)&&(l=Object(v.b)(u)),n.setGestureState({touches:u,mutliFingerStatus:l,moveStatus:c})}},n._handleTouchEnd=function(t){n.triggerUserCb("end",t),n.event=t,n.gesture&&(n.cleanPressTimer(),n.updateGestureStatus(t),n.doSingleTouchEnd("end"),n.checkIfMultiTouchEnd("end"))},n._handleTouchCancel=function(t){n.triggerUserCb("cancel",t),n.event=t,n.gesture&&(n.cleanPressTimer(),n.updateGestureStatus(t),n.doSingleTouchEnd("cancel"),n.checkIfMultiTouchEnd("cancel"))},n.triggerAllowEvent=function(t,e){n.allowGesture()?n.triggerCombineEvent(t,e):n.triggerSubEvent(t,e)},n.doSingleTouchEnd=function(t){var e=n.gesture,r=e.moveStatus,i=e.pinch,o=e.rotate,a=e.press,s=e.pan,u=e.direction;if(!i&&!o){if(r){var c=r.z,l=r.velocity,f=Object(v.i)(c,l);if(n.setGestureState({swipe:f}),s&&n.triggerAllowEvent("onPan",t),f){var h=Object(v.d)(u);return void n.triggerAllowEvent("onSwipe",h)}}if(a)return void n.triggerEvent("onPressUp");n.triggerEvent("onTap")}},n.getTouchAction=function(){var t=n.props,e=t.enablePinch,r=t.enableRotate,i=n.directionSetting;return e||r||i===m.a?"pan-x pan-y":i===m.h?"pan-x":i===m.c?"pan-y":"auto"},n.directionSetting=g[t.direction],n}return h()(e,t),u()(e,[{key:"componentWillUnmount",value:function(){this.cleanPressTimer()}},{key:"render",value:function(){var t=this.props.children,e=d.a.Children.only(t),n=this.getTouchAction(),r={onTouchStart:this._handleTouchStart,onTouchMove:this._handleTouchMove,onTouchCancel:this._handleTouchCancel,onTouchEnd:this._handleTouchEnd};return d.a.cloneElement(e,i()({},r,{style:i()({touchAction:n},e.props.style||{})}))}}]),e}(p.Component);e.a=y,y.defaultProps={enableRotate:!1,enablePinch:!1,direction:"all"}},function(t,e,n){"use strict";n.d(e,"e",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"h",function(){return c}),n.d(e,"a",function(){return l}),n.d(e,"i",function(){return f}),n.d(e,"j",function(){return h});var r=1,i=2,o=4,a=8,s=16,u=i|o,c=a|s,l=u|c,f={time:251},h={threshold:10,velocity:.3}},function(t,e,n){"use strict";n.d(e,"a",function(){return _});var r=n(73),i=n.n(r),o=n(53),a=n.n(o),s=n(55),u=n.n(s),c=n(56),l=n.n(c),f=n(54),h=n.n(f),p=n(35),d=n.n(p),v=n(382),m=n(262),g=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},y=function t(){h()(this,t),this.transform="",this.isMoving=!1,this.showPrev=!1,this.showNext=!1},_=function(t){function e(t){h()(this,e);var n=u()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onPan=function(){var t=0,e=0,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.isTabBarVertical(),r=+(""+t).replace("%","");return(""+t).indexOf("%")>=0&&(r/=100,r*=e?n.layout.clientHeight:n.layout.clientWidth),r};return{onPanStart:function(){n.setState({isMoving:!0})},onPanMove:function(t){if(t.moveStatus&&n.layout){var i=n.isTabBarVertical(),o=r()+(i?t.moveStatus.y:t.moveStatus.x),a=i?-n.layout.scrollHeight+n.layout.clientHeight:-n.layout.scrollWidth+n.layout.clientWidth;o=Math.min(o,0),o=Math.max(o,a),Object(m.c)(n.layout,o,"px",i),e=o,n.setState({showPrev:-o>0,showNext:o>a})}},onPanEnd:function(){var r=n.isTabBarVertical();t=e,n.setState({isMoving:!1,transform:Object(m.a)(e,"px",r)})},setCurrentOffset:function(e){return t=e}}}(),n.getTransformByIndex=function(t){var e=t.activeTab,r=t.tabs,i=t.page,o=void 0===i?0:i,a=n.isTabBarVertical(),s=n.getTabSize(o,r.length),u=o/2,c=Math.min(e,r.length-u-.5),l=Math.min(-(c-u+.5)*s,0);return n.onPan.setCurrentOffset(l+"%"),{transform:Object(m.a)(l,"%",a),showPrev:e>u-.5&&r.length>o,showNext:e<r.length-u-.5&&r.length>o}},n.onPress=function(t){var e=n.props,r=e.goToTab,i=e.onTabClick,o=e.tabs;i&&i(o[t],t),r&&r(t)},n.isTabBarVertical=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.tabBarPosition;return"left"===t||"right"===t},n.renderTab=function(t,e,r,o){var a=n.props,s=a.prefixCls,u=a.renderTab,c=a.activeTab,l=a.tabBarTextStyle,f=a.tabBarActiveTextColor,h=a.tabBarInactiveTextColor,p=a.instanceId,v=i()({},l),m=s+"-tab",g=!1;return c===e?(m+=" "+m+"-active",g=!0,f&&(v.color=f)):h&&(v.color=h),d.a.createElement("div",{key:"t_"+e,style:i()({},v,o?{height:r+"%"}:{width:r+"%"}),id:"m-tabs-"+p+"-"+e,role:"tab","aria-selected":g,className:m,onClick:function(){return n.onPress(e)}},u?u(t):t.title)},n.setContentLayout=function(t){n.layout=t},n.getTabSize=function(t,e){return 100/Math.min(t,e)},n.state=i()({},new y,n.getTransformByIndex(t)),n}return l()(e,t),a()(e,[{key:"componentWillReceiveProps",value:function(t){this.props.activeTab===t.activeTab&&this.props.tabs===t.tabs&&this.props.tabs.length===t.tabs.length||this.setState(i()({},this.getTransformByIndex(t)))}},{key:"render",value:function(){var t=this,e=this.props,n=e.prefixCls,r=e.animated,o=e.tabs,a=void 0===o?[]:o,s=e.page,u=void 0===s?0:s,c=e.activeTab,l=void 0===c?0:c,f=e.tabBarBackgroundColor,h=e.tabBarUnderlineStyle,p=e.tabBarPosition,y=e.renderUnderline,_=this.state,b=_.isMoving,x=_.transform,w=_.showNext,E=_.showPrev,S=this.isTabBarVertical(),O=a.length>u,T=this.getTabSize(u,a.length),A=a.map(function(e,n){return t.renderTab(e,n,T,S)}),C=n;r&&!b&&(C+=" "+n+"-animated");var k={backgroundColor:f||""},M=O?i()({},Object(m.b)(x)):{},P=this.onPan,j=(P.setCurrentOffset,g(P,["setCurrentOffset"])),I={style:i()({},S?{height:T+"%"}:{width:T+"%"},S?{top:T*l+"%"}:{left:T*l+"%"},h),className:n+"-underline"};return d.a.createElement("div",{className:C+" "+n+"-"+p,style:k},E&&d.a.createElement("div",{className:n+"-prevpage"}),d.a.createElement(v.a,i()({},j,{direction:S?"vertical":"horizontal"}),d.a.createElement("div",{role:"tablist",className:n+"-content",style:M,ref:this.setContentLayout},A,y?y(I):d.a.createElement("div",I))),w&&d.a.createElement("div",{className:n+"-nextpage"}))}}]),e}(d.a.PureComponent);_.defaultProps={prefixCls:"rmc-tabs-tab-bar",animated:!0,tabs:[],goToTab:function(){},activeTab:0,page:5,tabBarUnderlineStyle:{},tabBarBackgroundColor:"#fff",tabBarActiveTextColor:"",tabBarInactiveTextColor:"",tabBarTextStyle:{}}},function(t,e,n){"use strict";n(247),n(718),n(721)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n;p.default.newInstance({prefixCls:_,style:{},transitionName:"am-fade",className:(0,c.default)((n={},(0,s.default)(n,_+"-mask",t),(0,s.default)(n,_+"-nomask",!t),n))},function(t){return e&&e(t)})}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.duration,r=arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m.mask,a={info:"",success:"success",fail:"fail",offline:"dislike",loading:"loading"},s=a[e];y=!1,i(o,function(e){if(e){if(g&&(g.destroy(),g=null),y)return e.destroy(),void(y=!1);g=e,e.notice({duration:n,style:{},content:s?f.createElement("div",{className:_+"-text "+_+"-text-icon",role:"alert","aria-live":"assertive"},f.createElement(v.default,{type:s,size:"lg"}),f.createElement("div",{className:_+"-text-info"},t)):f.createElement("div",{className:_+"-text",role:"alert","aria-live":"assertive"},f.createElement("div",null,t)),closable:!0,onClose:function(){r&&r(),e.destroy(),e=null,g=null}})}})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(156),s=r(a),u=n(157),c=r(u),l=n(35),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(l),h=n(723),p=r(h),d=n(736),v=r(d),m={duration:3,mask:!0},g=void 0,y=void 0,_="am-toast";e.default={SHORT:3,LONG:8,show:function(t,e,n){return o(t,"info",e,function(){},n)},info:function(t,e,n,r){return o(t,"info",e,n,r)},success:function(t,e,n,r){return o(t,"success",e,n,r)},fail:function(t,e,n,r){return o(t,"fail",e,n,r)},offline:function(t,e,n,r){return o(t,"offline",e,n,r)},loading:function(t,e,n,r){return o(t,"loading",e,n,r)},hide:function(){g?(g.destroy(),g=null):y=!0},config:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.duration,n=void 0===e?3:e,r=t.mask;m.duration=n,!1===r&&(m.mask=!1)}},t.exports=e.default},function(t,e){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,n){"use strict";var r={isAppearSupported:function(t){return t.transitionName&&t.transitionAppear||t.animation.appear},isEnterSupported:function(t){return t.transitionName&&t.transitionEnter||t.animation.enter},isLeaveSupported:function(t){return t.transitionName&&t.transitionLeave||t.animation.leave},allowAppearCallback:function(t){return t.transitionAppear||t.animation.appear},allowEnterCallback:function(t){return t.transitionEnter||t.animation.enter},allowLeaveCallback:function(t){return t.transitionLeave||t.animation.leave}};e.a=r},function(t,e,n){"use strict";function r(t){return t.json()}function i(t){if(t.status>=200&&t.status<500)return t;var e=new Error(t.statusText);throw e.response=t,e}function o(t){var e=t.url,n=t.data;if("get"===t.method){var o=[];Object.keys(n).forEach(function(t){return o.push(t+"="+n[t])}),-1===e.search(/\?/)?e+="?"+o.join("&"):e+="&"+o.join("&")}return fetch(a+e,n).then(i).then(r).catch(function(t){return{err:t}})}e.a=o;var a="https://api.edu-edu.com/mockjsdata/32"},function(t,e,n){"use strict";function r(t,e){var n=e.x,r=e.y,a=e.x1,l=e.y1,f=e.coordinates,h=e.geometry,p=[];if(!Array.isArray(t))return{dataArray:[]};if(h)return t.filter(function(t){return t[h]&&t[h].type&&t[h].coordinates&&t[h].coordinates.length>0}).forEach(function(t,e){var n=s()(Object(o.a)({},t[h]),!0);Object(c.b)(n,function(n){var r=Object(u.a)(n),i=Object(o.a)(Object(o.a)({},t),{},{_id:e,coordinates:r});p.push(i)})}),{dataArray:p};for(var d=0;d<t.length;d++){var v=t[d],m=[];if(f){var g="Polygon";Array.isArray(f[0])||(g="Point"),Array.isArray(f[0])&&!Array.isArray(f[0][0])&&(g="LineString");m=s()({type:g,coordinates:Object(i.a)(v[f])},!0).coordinates}else if(n&&r&&a&&l){var y=[parseFloat(v[n]),parseFloat(v[r])],_=[parseFloat(v[a]),parseFloat(v[l])];m=[y,_]}else n&&r&&(m=[parseFloat(v[n]),parseFloat(v[r])]);var b=Object(o.a)(Object(o.a)({},v),{},{_id:d,coordinates:m});p.push(b)}return{dataArray:p}}e.a=r;var i=n(20),o=n(10),a=n(394),s=n.n(a),u=n(265),c=n(266)},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.a=r},function(t,e,n){"use strict";function r(t,e){if(t){if("string"===typeof t)return Object(i.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i.a)(t,e):void 0}}e.a=r;var i=n(391)},function(t,e,n){"use strict";function r(t){var e=Object(o.a)(t,"string");return"symbol"===Object(i.a)(e)?e:String(e)}e.a=r;var i=n(83),o=n(747)},function(t,e){function n(t,e){var i,o=t&&t.type;if("FeatureCollection"===o)for(i=0;i<t.features.length;i++)n(t.features[i],e);else if("GeometryCollection"===o)for(i=0;i<t.geometries.length;i++)n(t.geometries[i],e);else if("Feature"===o)n(t.geometry,e);else if("Polygon"===o)r(t.coordinates,e);else if("MultiPolygon"===o)for(i=0;i<t.coordinates.length;i++)r(t.coordinates[i],e);return t}function r(t,e){if(0!==t.length){i(t[0],e);for(var n=1;n<t.length;n++)i(t[n],!e)}}function i(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!==!!e&&t.reverse()}t.exports=n},function(t,e,n){"use strict";function r(t,e,n,r,a,u,c,l){if(n/=e,r/=e,u>=n&&c<r)return t;if(c<n||u>=r)return null;for(var h=[],p=0;p<t.length;p++){var d=t[p],v=d.geometry,m=d.type,g=0===a?d.minX:d.minY,y=0===a?d.maxX:d.maxY;if(g>=n&&y<r)h.push(d);else if(!(y<n||g>=r)){var _=[];if("Point"===m||"MultiPoint"===m)i(v,_,n,r,a);else if("LineString"===m)o(v,_,n,r,a,!1,l.lineMetrics);else if("MultiLineString"===m)s(v,_,n,r,a,!1);else if("Polygon"===m)s(v,_,n,r,a,!0);else if("MultiPolygon"===m)for(var b=0;b<v.length;b++){var x=[];s(v[b],x,n,r,a,!0),x.length&&_.push(x)}if(_.length){if(l.lineMetrics&&"LineString"===m){for(b=0;b<_.length;b++)h.push(Object(f.a)(d.id,m,_[b],d.tags));continue}"LineString"!==m&&"MultiLineString"!==m||(1===_.length?(m="LineString",_=_[0]):m="MultiLineString"),"Point"!==m&&"MultiPoint"!==m||(m=3===_.length?"Point":"MultiPoint"),h.push(Object(f.a)(d.id,m,_,d.tags))}}}return h.length?h:null}function i(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function o(t,e,n,r,i,o,s){for(var f,h,p=a(t),d=0===i?c:l,v=t.start,m=0;m<t.length-3;m+=3){var g=t[m],y=t[m+1],_=t[m+2],b=t[m+3],x=t[m+4],w=0===i?g:y,E=0===i?b:x,S=!1;s&&(f=Math.sqrt(Math.pow(g-b,2)+Math.pow(y-x,2))),w<n?E>n&&(h=d(p,g,y,b,x,n),s&&(p.start=v+f*h)):w>r?E<r&&(h=d(p,g,y,b,x,r),s&&(p.start=v+f*h)):u(p,g,y,_),E<n&&w>=n&&(h=d(p,g,y,b,x,n),S=!0),E>r&&w<=r&&(h=d(p,g,y,b,x,r),S=!0),!o&&S&&(s&&(p.end=v+f*h),e.push(p),p=a(t)),s&&(v+=f)}var O=t.length-3;g=t[O],y=t[O+1],_=t[O+2],w=0===i?g:y,w>=n&&w<=r&&u(p,g,y,_),O=p.length-3,o&&O>=3&&(p[O]!==p[0]||p[O+1]!==p[1])&&u(p,p[0],p[1],p[2]),p.length&&e.push(p)}function a(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function s(t,e,n,r,i,a){for(var s=0;s<t.length;s++)o(t[s],e,n,r,i,a,!1)}function u(t,e,n,r){t.push(e),t.push(n),t.push(r)}function c(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function l(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}e.a=r;var f=n(267)},function(t,e,n){"use strict";function r(t){this.message=t}function i(t){var e=String(t).replace(/=+$/,"");if(e.length%4===1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o="",s=0,u=0;i=e.charAt(u++);~i&&(n=s%4?64*n+i:i,s++%4)?o+=String.fromCharCode(255&n>>(-2*s&6)):0)i=a.indexOf(i);return o}function o(t){t=String(t);for(var e,n,r,i,o="",s=0,u=t.length%3;s<t.length;){if((n=t.charCodeAt(s++))>255||(r=t.charCodeAt(s++))>255||(i=t.charCodeAt(s++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");e=n<<16|r<<8|i,o+=a.charAt(e>>18&63)+a.charAt(e>>12&63)+a.charAt(e>>6&63)+a.charAt(63&e)}return u?o.slice(0,u-3)+"===".substring(u):o}e.a=i,e.b=o;var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError"},function(t,e,n){"use strict";var r=n(185),i="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;e.a=i?my.getSystemInfoSync().pixelRatio:r.a.devicePixelRatio},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return f});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(399),f=function(t){function e(){var t;return Object(o.a)(this,e),t=n.call(this),t.className="",t.children=[],t}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),e}(l.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return f});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(271),f=function(t){function e(){var t;return Object(o.a)(this,e),t=n.call(this),t.childNodes=[],t}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex(function(e){return e===t});return e>-1?this.childNodes.splice(e,1):null}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o,a,s=n(185),u="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;if(u){var c=my.getSystemInfoSync();r=c.screenWidth,i=c.screenHeight,o=c.windowWidth,a=c.windowHeight}else{var l=s.a.innerWidth,f=s.a.innerHeight;r=l,i=f,o=l,a=f}var h={width:r,height:i,availWidth:o,availHeight:a,availLeft:0,availTop:0}},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return f});var o=n(1),a=n(0),s=n(3),u=n(4),c=n(2),l=n(402),f=function(t){function e(){return Object(a.a)(this,e),n.call(this,"video")}Object(s.a)(e,t);var n=r(e);return Object(o.a)(e)}(l.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return f});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(270),f=function(t){function e(t){return Object(o.a)(this,e),n.call(this,t)}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),e}(l.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(1),i=n(0),o=n(187),a=n(272),s=Object(r.a)(function t(){Object(i.a)(this,t);var e=Object(o.a)(),n=e.createImage&&e.createImage()||{};return"tagName"in n||(n.tagName="IMG",n.__proto__=t.prototype),a.d(n),a.a(n),Object.assign(n,{addEventListener:function(t,e){n["on".concat(t)]=e.bind(n)},removeEventListener:function(t){n["on".concat(t)]=null}}),n})},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={href:"",protocol:"",host:""}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=Math.PI/180,i=180/Math.PI},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(15),s=n(0),u=n(1),c=n(12),l=n(3),f=n(4),h=n(2),p=n(6),d=n(8),v=n.n(d),m=n(799),g=n(37),y=(n.n(g),n(190)),_=n(191),b=function(t){function e(t){var r;Object(s.a)(this,e),r=n.call(this),Object(p.a)(Object(c.a)(r),"tileSize",256),Object(p.a)(Object(c.a)(r),"isVisible",!1),Object(p.a)(Object(c.a)(r),"isCurrent",!1),Object(p.a)(Object(c.a)(r),"isVisibleChange",!1),Object(p.a)(Object(c.a)(r),"loadedLayers",0),Object(p.a)(Object(c.a)(r),"isLayerLoaded",!1),Object(p.a)(Object(c.a)(r),"isLoad",!1),Object(p.a)(Object(c.a)(r),"isChildLoad",!1),Object(p.a)(Object(c.a)(r),"parent",null),Object(p.a)(Object(c.a)(r),"children",[]),Object(p.a)(Object(c.a)(r),"data",null),Object(p.a)(Object(c.a)(r),"properties",{}),Object(p.a)(Object(c.a)(r),"loadDataId",0);var i=t.x,o=t.y,a=t.z,u=t.tileSize,l=t.warp,f=void 0===l||l;return r.x=i,r.y=o,r.z=a,r.warp=f||!0,r.tileSize=u,r}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"isLoading",get:function(){return this.loadStatus===y.a.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===y.a.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===y.a.Failure}},{key:"setTileLayerLoaded",value:function(){this.isLayerLoaded=!0}},{key:"isCancelled",get:function(){return this.loadStatus===y.a.Cancelled}},{key:"isDone",get:function(){return[y.a.Loaded,y.a.Cancelled,y.a.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return Object(_.d)(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var t=Object(a.a)(this.bounds,4),e=t[0],n=t[1],r=t[2],i=t[3],o=[(r-e)/2,(i-n)/2];return Object(m.a)(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:o,meta:"\n      ".concat(this.key,"\n      ")}})}},{key:"key",get:function(){return"".concat(this.x,"_").concat(this.y,"_").concat(this.z)}},{key:"layerLoad",value:function(){this.loadedLayers++,this.emit("layerLoaded")}},{key:"loadData",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(e){var n,r,i,o,a,s,u,c,l,f,h,p,d,m,g,b,x;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.getData,r=e.onLoad,i=e.onError,this.loadDataId++,o=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=y.a.Loading,a=null,t.prev=7,u=this.x,c=this.y,l=this.z,f=this.bounds,h=this.tileSize,p=this.warp,d=Object(_.b)(u,c,l,p),m=d.warpX,g=d.warpY,b=this.abortController.signal,x={x:m,y:g,z:l,bounds:f,tileSize:h,signal:b,warp:p},t.next=14,n(x,this);case 14:a=t.sent,t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),s=t.t0;case 20:if(o===this.loadDataId){t.next=22;break}return t.abrupt("return");case 22:if(!this.isCancelled||a){t.next=24;break}return t.abrupt("return");case 24:if(!s&&a){t.next=28;break}return this.loadStatus=y.a.Failure,i(s,this),t.abrupt("return");case 28:this.loadStatus=y.a.Loaded,this.data=a,r(this);case 31:case"end":return t.stop()}},t,this,[[7,17]])}));return t}()},{key:"reloadData",value:function(t){this.isLoading&&this.abortLoad(),this.loadData(t)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=y.a.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),e}(g.EventEmitter)},function(t,e,n){"use strict";n.d(e,"c",function(){return s}),n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c}),n.d(e,"e",function(){return l}),n.d(e,"d",function(){return f});var r,i=n(6),o=n(190),a=n(800),s=[-1/0,-1/0,1/0,1/0],u=.2,c=5,l=(r={},Object(i.a)(r,o.b.Realtime,a.b),Object(i.a)(r,o.b.Overlap,a.a),Object(i.a)(r,o.b.Replace,a.c),r),f=function(){}},function(t,e,n){"use strict";var r=(n(141),n(275),n(409),n(276),n(410));n.d(e,"a",function(){return r.a});var i=(n(411),n(412),n(806),n(808));n.d(e,"b",function(){return i.a});n(413),n(277),n(809),n(414)},function(t,e,n){"use strict";var r=n(141),i=function(){function t(t,e){var n=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise(function(t,e){n.resolve=t,n.reject=e})}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Object(r.a)(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Object(r.a)(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}();e.a=i},function(t,e,n){"use strict";var r=n(411),i=n(276),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},o.apply(this,arguments)},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},u=function(){function t(t){this.workerPools=new Map,this.props=o({},s),this.setProps(t),this.workerPools=new Map}return t.isSupported=function(){return i.a.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var n=a(this.workerPools.values()),r=n.next();!r.done;r=n.next()){r.value.destroy()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,n;this.props=o(o({},this.props),t);try{for(var r=a(this.workerPools.values()),i=r.next();!i.done;i=r.next()){i.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,n=t.source,i=t.url,o=this.workerPools.get(e);return o||(o=new r.a({name:e,source:n,url:i}),o.setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}},t}();e.a=u},function(t,e,n){"use strict";var r=n(275),i=n(276),o=n(409),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},a.apply(this,arguments)},s=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},c=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach(function(t){return t.destroy()}),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=a(a({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,n){return void 0===e&&(e=function(t,e,n){return t.done(n)}),void 0===n&&(n=function(t,e){return t.error(e)}),s(this,void 0,void 0,function(){var r,i=this;return u(this,function(o){switch(o.label){case 0:return r=new Promise(function(r){return i.jobQueue.push({name:t,onMessage:e,onError:n,onStart:r}),i}),this.startQueuedJob(),[4,r];case 1:return[2,o.sent()]}})})},t.prototype.startQueuedJob=function(){return s(this,void 0,void 0,function(){var t,e,n;return u(this,function(r){switch(r.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),n=new o.a(e.name,t),t.onMessage=function(t){return e.onMessage(n,t.type,t.payload)},t.onError=function(t){return e.onError(n,t)},e.onStart(n),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,n.result];case 2:return r.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}})})},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new i.a({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return r.b?this.maxMobileConcurrency:this.maxConcurrency},t}();e.a=c},function(t,e,n){"use strict";function r(t){var e=t.type,n=t.data;return"message"===e&&n&&"string"===typeof n.source&&"Main thread"===n.source}var i=n(277),o=new Map,a=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(r(e)){var n=e.data,i=n.type,o=n.payload;t(i,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=o.get(t);e||(e=function(e){if(r(e)){var n=e.data,i=n.type,o=n.payload;t(i,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=o.get(t);o.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var n={source:"Worker thread",type:t,payload:e},r=Object(i.a)(e);self.postMessage(n,r)}},t}();e.a=a},function(t,e,n){"use strict";function r(t){return""+t.name}function i(t,e){void 0===e&&(e={});var n=e[t.id]||{},r=t.name+".worker.js",i=n.workerUrl;return"test"===e._workerType&&(i=t.module+"/dist/"+r),i||(i="https://unpkg.com/"+t.module+"/dist/"+r),Object(o.a)(i),i}e.a=r,e.b=i;var o=n(141)},function(t,e,n){"use strict";var r=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise(function(e,n){t._settlers.push({resolve:e,reject:n})})},t}();e.a=r},function(t,e,n){"use strict";function r(){var t=new i.a(9);return i.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}e.a=r;var i=n(74)},function(t,e,n){"use strict";function r(){var t=new l.a(4);return l.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function i(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t}function a(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t}function s(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t}function u(t,e,n,r){var i,o,a,s,u,c=e[0],f=e[1],h=e[2],p=e[3],d=n[0],v=n[1],m=n[2],g=n[3];return o=c*d+f*v+h*m+p*g,o<0&&(o=-o,d=-d,v=-v,m=-m,g=-g),1-o>l.b?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*f+u*v,t[2]=s*h+u*m,t[3]=s*p+u*g,t}function c(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t}e.b=r,e.e=o,e.f=a,e.g=s,n.d(e,"a",function(){return d}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return m}),n.d(e,"h",function(){return g});var l=n(74),f=n(415),h=n(280),p=n(281),d=(p.clone,p.fromValues,p.copy),v=(p.set,p.add,p.scale,p.dot),m=(p.lerp,p.length),g=p.squaredLength,y=p.normalize;p.exactEquals,p.equals,function(){var t=h.create(),e=h.fromValues(1,0,0),n=h.fromValues(0,1,0)}(),function(){var t=r(),e=r()}(),function(){var t=f.a()}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(10),i=n(0),o=n(1),a=n(6),s=n(820),u=(n.n(s),n(823)),c=n.n(u),l=function(){function t(e,n,r,o){Object(i.a)(this,t),Object(a.a)(this,"vectorLayerCache",{}),this.x=n,this.y=r,this.z=o,this.vectorTile=new s.VectorTile(new c.a(e))}return Object(o.a)(t,[{key:"getTileData",value:function(t){if(!t||!this.vectorTile.layers[t])return[];if(this.vectorLayerCache[t])return this.vectorLayerCache[t];var e=this.vectorTile.layers[t];if(Array.isArray(e.features))return this.vectorLayerCache[t]=e.features,e.features;for(var n=[],i=0;i<e.length;i++){var o=e.feature(i),a=o.toGeoJSON(this.x,this.y,this.z);n.push(Object(r.a)(Object(r.a)({},a),{},{properties:Object(r.a)({id:a.id},a.properties)}))}return this.vectorLayerCache[t]=n,n}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),t}()},function(t,e,n){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}var a=n(419);t.exports=r,r.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},function(t,e,n){"use strict";function r(t,e,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=o,t.readFields(i,this,e)}function i(t,e,n){1==t?e.id=n.readVarint():2==t?o(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function a(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function s(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}var u=n(822);t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},r.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+l)/u;t[e]=[360*(n.x+c)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),c=this.extent*t,l=this.extent*e,f=this.loadGeometry(),h=r.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<f.length;o++)p[o]=f[o][0];f=p,i(f);break;case 2:for(o=0;o<f.length;o++)i(f[o]);break;case 3:for(f=a(f),o=0;o<f.length;o++)for(s=0;s<f[o].length;s++)i(f[o][s])}1===f.length?f=f[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:f},properties:this.properties};return"id"in this&&(d.id=this.id),d}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var r=n(38),i=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(r.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(r.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(r.TAGGED_PROP,t)||[]},t}();e.MetadataReader=i},function(t,e,n){"use strict";function r(t){return t instanceof RangeError||t.message===i.STACK_OVERFLOW}Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var i=n(48);e.isStackOverflowExeption=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){if(void 0===t)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(e.name));var u=new a.Metadata(o.INJECT_TAG,t);"number"===typeof r?s.tagParameter(e,n,r,u):s.tagProperty(e,n,u)}}Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var i=n(48),o=n(38),a=n(63),s=n(90),u=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=u,e.inject=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var r=n(38),i=n(108),o=n(63),a=n(837),s=function(){function t(t,e,n,s){this.id=i.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var u=null;"string"===typeof s?u=new o.Metadata(r.NAMED_TAG,s):s instanceof o.Metadata&&(u=s),null!==u&&this.metadata.push(u)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(r.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(r.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(r.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some(function(t){return r.NON_CUSTOM_TAG_KEYS.every(function(e){return t.key!==e})})},t.prototype.isOptional=function(){return this.matchesTag(r.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===r.NAMED_TAG})[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return r.NON_CUSTOM_TAG_KEYS.every(function(e){return t.key!==e})}):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(r.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var r=n(283),i=n(284),o=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var r=n(38),i=n(63),o=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||o(n,e))};e.traverseAncerstors=o;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new i.Metadata(t,e),n}};e.taggedConstraint=a;var s=a(r.NAMED_TAG);e.namedConstraint=s;var u=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"===typeof t){return n.serviceIdentifier===t}var r=e.bindings[0].implementationType;return t===r}return!1}};e.typeConstraint=u},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=t.characterSet,n=t.getFontWidth,r=t.fontHeight,i=t.buffer,o=t.maxCanvasWidth,a=t.mapping,s=void 0===a?{}:a,u=t.xOffset,l=void 0===u?0:u,h=t.yOffset,p=void 0===h?0:h,d=0,v=l;Array.from(e).forEach(function(t,e){if(!s[t]){var r=n(t,e);v+f>o&&(v=0,d++),s[t]={x:v,y:p+d*f,width:f,height:f,advance:r},v+=f}});var m=r+2*i;return{mapping:s,xOffset:v,yOffset:p+d*m,canvasHeight:c(p+(d+1)*m)}}function s(t,e,n){var i,o=0,a=0,s=0,l=[],f={},h=r(t);try{for(h.s();!(i=h.n()).done;){var p=i.value;if(!f[p.id]){var d=p.size;o+d+e>n&&(u(f,l,a),o=0,a=s+a+e,s=0,l=[]),l.push({icon:p,xOffset:o}),o=o+d+e,s=Math.max(s,d)}}}catch(t){h.e(t)}finally{h.f()}return l.length>0&&u(f,l,a),{mapping:f,canvasHeight:c(s+a+e)}}function u(t,e,n){var i,o=r(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.icon,u=a.xOffset;t[s.id]=Object(l.a)(Object(l.a)({},s),{},{x:u,y:n,image:s.image,width:s.width,height:s.height})}}catch(t){o.e(t)}finally{o.f()}}function c(t){return Math.pow(2,Math.ceil(Math.log2(t)))}e.b=a,e.a=s;var l=n(10),f=30},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.TOPRIGHT="topright",t.TOPLEFT="topleft",t.BOTTOMRIGHT="bottomright",t.BOTTOMLEFT="bottomleft",t.TOPCENTER="topcenter",t.BOTTOMCENTER="bottomcenter",t.LEFTCENTER="leftcenter",t.RIGHTCENTER="rightcenter",t.LEFTTOP="lefttop",t.RIGHTTOP="righttop",t.LEFTBOTTOM="leftbottom",t.RIGHTBOTTOM="rightbottom"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r;!function(t){t[t.LNGLAT=1]="LNGLAT",t[t.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",t[t.VECTOR_TILE=3]="VECTOR_TILE",t[t.IDENTITY=4]="IDENTITY",t[t.P20=5]="P20",t[t.P20_OFFSET=6]="P20_OFFSET",t[t.METER_OFFSET=7]="METER_OFFSET",t[t.P20_2=8]="P20_2"}(r||(r={}));var i={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"}},function(t,e,n){"use strict";function r(t){if(o.K)return null;var e=t;if("string"===typeof t&&(e=document.getElementById(t)),e){var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",n.id="l7-scene-".concat(a++),n.classList.add("l7-scene"),e.appendChild(n),n}return null}function i(t){var e,n=!0;if((null===t||void 0===t?void 0:null===(e=t.target)||void 0===e?void 0:e.target)instanceof HTMLElement)for(var r,i=null===t||void 0===t?void 0:null===(r=t.target)||void 0===r?void 0:r.target;i;){var o,a=Array.from(i.classList);if(a.includes("l7-marker")||a.includes("l7-popup")){n=!1;break}i=null===(o=i)||void 0===o?void 0:o.parentElement}return n}e.a=r,e.b=i;var o=n(9),a=0},function(t,e,n){"use strict";function r(t,e){return Array.isArray(t)?"string"===typeof t[0]?t.map(function(t){return Object(a.G)(t,e)}):t.map(function(t){return{url:Object(a.G)(t.url,e),bands:t.bands||[0]}}):Object(a.G)(t,e)}function i(t){return"string"===typeof t?[{url:t,bands:[0]}]:"string"===typeof t[0]?t.map(function(t){return{url:t,bands:[0]}}):t}function o(t,e){t.xhrCancel=function(){e.map(function(t){t.abort()})}}e.c=r,e.b=i,e.a=o;var a=n(9)},function(t,e,n){"use strict";function r(t,e){var n=e.radius,r=void 0===n?40:n,a=e.maxZoom,u=void 0===a?18:a,c=e.minZoom,l=void 0===c?0:c,f=e.zoom,h=void 0===f?2:f;if(t.pointIndex){var p=t.pointIndex.getClusters(t.extent,Math.floor(h));return t.dataArray=i(p),t}var d=new s.a({radius:r,minZoom:l,maxZoom:u}),v={type:"FeatureCollection",features:[]};return v.features=t.dataArray.map(function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t.coordinates},properties:Object(o.a)({},t)}}),d.load(v.features),d}function i(t){return t.map(function(t,e){return Object(o.a)({coordinates:t.geometry.coordinates,_id:e+1},t.properties)})}e.a=r;var o=n(10),a=n(432),s=n.n(a)},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(n,r,i,o,a,s){if(!(a-o<=i)){var u=o+a>>1;e(n,r,u,o,a,s%2),t(n,r,i,o,u-1,s+1),t(n,r,i,u+1,a,s+1)}}function e(t,r,i,o,a,s){for(;a>o;){if(a-o>600){var u=a-o+1,c=i-o+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1);e(t,r,i,Math.max(o,Math.floor(i-c*f/u+h)),Math.min(a,Math.floor(i+(u-c)*f/u+h)),s)}var p=r[2*i+s],d=o,v=a;for(n(t,r,o,i),r[2*a+s]>p&&n(t,r,o,a);d<v;){for(n(t,r,d,v),d++,v--;r[2*d+s]<p;)d++;for(;r[2*v+s]>p;)v--}r[2*o+s]===p?n(t,r,o,v):(v++,n(t,r,v,a)),v<=i&&(o=v+1),i<=v&&(a=v-1)}}function n(t,e,n,i){r(t,n,i),r(e,2*n,2*i),r(e,2*n+1,2*i+1)}function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function i(t,e,n,r,i,o,a){for(var s,u,c=[0,t.length-1,0],l=[];c.length;){var f=c.pop(),h=c.pop(),p=c.pop();if(h-p<=a)for(var d=p;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((p+h)/2);s=e[2*v],u=e[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(p),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(h),c.push(m))}}return l}function o(t,e,n,r,i,o){for(var s=[0,t.length-1,0],u=[],c=i*i;s.length;){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=o)for(var p=h;p<=f;p++)a(e[2*p],e[2*p+1],n,r)<=c&&u.push(t[p]);else{var d=Math.floor((h+f)/2),v=e[2*d],m=e[2*d+1];a(v,m,n,r)<=c&&u.push(t[d]);var g=(l+1)%2;(0===l?n-i<=v:r-i<=m)&&(s.push(h),s.push(d-1),s.push(g)),(0===l?n+i>=v:r+i>=m)&&(s.push(d+1),s.push(f),s.push(g))}}return u}function a(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function s(t,e,n,r,i){return{x:w(t),y:w(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function u(t,e){var n=t.geometry.coordinates,r=n[0],i=n[1];return{x:w(f(r)),y:w(h(i)),zoom:1/0,index:e,parentId:-1}}function c(t){return{type:"Feature",id:t.id,properties:l(t),geometry:{type:"Point",coordinates:[p(t.x),d(t.y)]}}}function l(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return v(v({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function f(t){return t/360+.5}function h(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function p(t){return 360*(t-.5)}function d(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function v(t,e){for(var n in e)t[n]=e[n];return t}function m(t){return t.x}function g(t){return t.y}var y=function(t){return t[0]},_=function(t){return t[1]},b=function(e,n,r,i,o){void 0===n&&(n=y),void 0===r&&(r=_),void 0===i&&(i=64),void 0===o&&(o=Float64Array),this.nodeSize=i,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,s=this.ids=new a(e.length),u=this.coords=new o(2*e.length),c=0;c<e.length;c++)s[c]=c,u[2*c]=n(e[c]),u[2*c+1]=r(e[c]);t(s,u,i,0,s.length-1,0)};b.prototype.range=function(t,e,n,r){return i(this.ids,this.coords,t,e,n,r,this.nodeSize)},b.prototype.within=function(t,e,n){return o(this.ids,this.coords,t,e,n,this.nodeSize)};var x={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},w=Math.fround||function(t){return function(e){return t[0]=+e,t[0]}}(new Float32Array(1)),E=function(t){this.options=v(Object.create(x),t),this.trees=new Array(this.options.maxZoom+1)};return E.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],c=0;c<t.length;c++)t[c].geometry&&s.push(u(t[c],c));this.trees[i+1]=new b(s,m,g,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var f=+Date.now();s=this._cluster(s,l),this.trees[l]=new b(s,m,g,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-f)}return n&&console.timeEnd("total time"),this},E.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=u.range(f(n),h(o),f(i),h(r)),p=[],d=0,v=l;d<v.length;d+=1){var m=v[d],g=u.points[m];p.push(g.numPoints?c(g):this.points[g.index])}return p},E.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[],l=0,f=s;l<f.length;l+=1){var h=f[l],p=i.points[h];p.parentId===t&&u.push(p.numPoints?c(p):this.points[p.index])}if(0===u.length)throw new Error(r);return u},E.prototype.getLeaves=function(t,e,n){e=e||10,n=n||0;var r=[];return this._appendLeaves(r,t,e,n,0),r},E.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.extent,s=o.radius,u=s/a,c=(n-u)/i,l=(n+1+u)/i,f={features:[]};return this._addTileFeatures(r.range((e-u)/i,c,(e+1+u)/i,l),r.points,e,n,i,f),0===e&&this._addTileFeatures(r.range(1-u/i,c,1,l),r.points,i,n,i,f),e===i-1&&this._addTileFeatures(r.range(0,c,u/i,l),r.points,-1,n,i,f),f.features.length?f:null},E.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},E.prototype._appendLeaves=function(t,e,n,r,i){for(var o=this.getChildren(e),a=0,s=o;a<s.length;a+=1){var u=s[a],c=u.properties;if(c&&c.cluster?i+c.point_count<=r?i+=c.point_count:i=this._appendLeaves(t,c.cluster_id,n,r,i):i<r?i++:t.push(u),t.length===n)break}return i},E.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=e[u],p=c.numPoints,d=void 0,v=void 0,m=void 0;if(p)d=l(c),v=c.x,m=c.y;else{var g=this.points[c.index];d=g.properties,v=f(g.geometry.coordinates[0]),m=h(g.geometry.coordinates[1])}var y={type:1,geometry:[[Math.round(this.options.extent*(v*i-n)),Math.round(this.options.extent*(m*i-r))]],tags:d},_=void 0;p?_=c.id:this.options.generateId?_=c.index:this.points[c.index].id&&(_=this.points[c.index].id),void 0!==_&&(y.id=_),o.features.push(y)}},E.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))},E.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.radius,o=r.extent,a=r.reduce,u=r.minPoints,c=i/(o*Math.pow(2,e)),l=0;l<t.length;l++){var f=t[l];if(!(f.zoom<=e)){f.zoom=e;for(var h=this.trees[e+1],p=h.within(f.x,f.y,c),d=f.numPoints||1,v=d,m=0,g=p;m<g.length;m+=1){var y=g[m],_=h.points[y];_.zoom>e&&(v+=_.numPoints||1)}if(v>d&&v>=u){for(var b=f.x*d,x=f.y*d,w=a&&d>1?this._map(f,!0):null,E=(l<<5)+(e+1)+this.points.length,S=0,O=p;S<O.length;S+=1){var T=O[S],A=h.points[T];if(!(A.zoom<=e)){A.zoom=e;var C=A.numPoints||1;b+=A.x*C,x+=A.y*C,A.parentId=E,a&&(w||(w=this._map(f,!0)),a(w,this._map(A)))}}f.parentId=E,n.push(s(b/v,x/v,E,v,w))}else if(n.push(f),v>1)for(var k=0,M=p;k<M.length;k+=1){var P=M[k],j=h.points[P];j.zoom<=e||(j.zoom=e,n.push(j))}}}return n},E.prototype._getOriginId=function(t){return t-this.points.length>>5},E.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},E.prototype._map=function(t,e){if(t.numPoints)return e?v({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?v({},r):r},E})},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=n(435),i=(n(940),n(941)),o=(n.n(i),n(197),n(943),n(944),n(946),n(947),n(948));n.d(e,"a",function(){return o.a});var a=(n(949),n(951),n(952),n(953));n.d(e,"d",function(){return a.a});var s=(n(954),n(955),n(437));n.d(e,"c",function(){return s.a}),n.d(e,"b",function(){return r.a}),function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".l7-marker-container {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n.l7-marker {\n  position: absolute !important;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  cursor: pointer;\n}\n.l7-marker-cluster {\n  width: 40px;\n  height: 40px;\n  background-color: rgba(181, 226, 140, 0.6);\n  background-clip: padding-box;\n  border-radius: 20px;\n}\n.l7-marker-cluster div {\n  width: 30px;\n  height: 30px;\n  margin-top: 5px;\n  margin-left: 5px;\n  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  text-align: center;\n  background-color: rgba(110, 204, 57, 0.6);\n  border-radius: 15px;\n}\n.l7-marker-cluster span {\n  line-height: 30px;\n}\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n  background-clip: padding-box;\n  border: 2px solid rgba(0, 0, 0, 0.2);\n}\n.mapboxgl-ctrl-logo,\n.amap-logo {\n  display: none !important;\n}\n.l7-select-box {\n  border: 3px dashed gray;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 1000;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.l7-control-container {\n  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;\n}\n.l7-control-container .l7-control {\n  position: relative;\n  z-index: 800;\n  float: left;\n  clear: both;\n  color: #595959;\n  font-size: 12px;\n  pointer-events: visiblePainted;\n  /* IE 9-10 doesn't have auto */\n  pointer-events: auto;\n}\n.l7-control-container .l7-control.l7-control--hide {\n  display: none;\n}\n.l7-control-container .l7-top {\n  top: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {\n  margin-top: 8px;\n}\n.l7-control-container .l7-right {\n  right: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {\n  margin-right: 8px;\n}\n.l7-control-container .l7-bottom {\n  bottom: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {\n  margin-bottom: 8px;\n}\n.l7-control-container .l7-left {\n  left: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  position: absolute;\n  z-index: 1000;\n  pointer-events: none;\n}\n.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {\n  margin-left: 8px;\n}\n.l7-control-container .l7-center {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.l7-control-container .l7-center.l7-top,\n.l7-control-container .l7-center.l7-bottom {\n  width: 100%;\n}\n.l7-control-container .l7-center.l7-left,\n.l7-control-container .l7-center.l7-right {\n  height: 100%;\n}\n.l7-control-container .l7-center .l7-control {\n  margin-right: 8px;\n  margin-bottom: 8px;\n}\n.l7-control-container .l7-row {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-control-container .l7-row.l7-top {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-control-container .l7-row.l7-bottom {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-control-container .l7-column {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-control-container .l7-column.l7-left {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-control-container .l7-column.l7-right {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-button-control {\n  min-width: 28px;\n  height: 28px;\n  background-color: #fff;\n  border-width: 0;\n  border-radius: 2px;\n  outline: 0;\n  cursor: pointer;\n  -webkit-transition: all 0.2s;\n  transition: all 0.2s;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 6px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  line-height: 16px;\n}\n.l7-button-control .l7-iconfont {\n  fill: #595959;\n  color: #595959;\n  width: 16px;\n  height: 16px;\n}\n.l7-button-control.l7-button-control--row {\n  padding: 0 16px 0 13px;\n}\n.l7-button-control.l7-button-control--row * + .l7-button-control__text {\n  margin-left: 8px;\n}\n.l7-button-control.l7-button-control--column {\n  height: 44px;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-button-control.l7-button-control--column .l7-iconfont {\n  margin-top: 3px;\n}\n.l7-button-control.l7-button-control--column .l7-button-control__text {\n  margin-top: 3px;\n  font-size: 10px;\n  -webkit-transform: scale(0.83333);\n          transform: scale(0.83333);\n}\n.l7-button-control:not(:disabled):hover {\n  background-color: #f3f3f3;\n}\n.l7-button-control:not(:disabled):active {\n  background-color: #f3f3f3;\n}\n.l7-button-control:disabled {\n  background-color: #fafafa;\n  color: #bdbdbd;\n  cursor: not-allowed;\n}\n.l7-button-control:disabled .l7-iconfont {\n  fill: #bdbdbd;\n  color: #bdbdbd;\n}\n.l7-button-control:disabled:hover {\n  background-color: #fafafa;\n}\n.l7-button-control:disabled:active {\n  background-color: #fafafa;\n}\n.l7-popper {\n  position: absolute;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  z-index: 5;\n  color: #595959;\n}\n.l7-popper.l7-popper-hide {\n  display: none;\n}\n.l7-popper .l7-popper-content {\n  min-height: 28px;\n  background: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n}\n.l7-popper .l7-popper-arrow {\n  width: 0;\n  height: 0;\n  border-width: 4px;\n  border-style: solid;\n  border-top-color: transparent;\n  border-bottom-color: transparent;\n  border-left-color: transparent;\n  border-right-color: transparent;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n}\n.l7-popper.l7-popper-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-popper.l7-popper-left .l7-popper-arrow {\n  border-left-color: #fff;\n  margin: 10px 0;\n}\n.l7-popper.l7-popper-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popper.l7-popper-right .l7-popper-arrow {\n  border-right-color: #fff;\n  margin: 10px 0;\n}\n.l7-popper.l7-popper-top {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-popper.l7-popper-top .l7-popper-arrow {\n  border-top-color: #fff;\n  margin: 0 10px;\n}\n.l7-popper.l7-popper-bottom {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n.l7-popper.l7-popper-bottom .l7-popper-arrow {\n  border-bottom-color: #fff;\n  margin: 0 10px;\n}\n.l7-popper.l7-popper-start {\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-popper.l7-popper-end {\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-select-control--normal {\n  padding: 4px 0;\n}\n.l7-select-control--normal .l7-select-control-item {\n  height: 24px;\n  line-height: 24px;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 0 16px;\n  font-size: 12px;\n}\n.l7-select-control--normal .l7-select-control-item > * + * {\n  margin-left: 6px;\n}\n.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {\n  height: 14px;\n  width: 14px;\n}\n.l7-select-control--normal .l7-select-control-item:hover {\n  background-color: #f3f3f3;\n}\n.l7-select-control--image {\n  padding: 12px 12px 0 12px;\n  width: 474px;\n  height: 320px;\n  overflow: auto;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-box-align: start;\n      -ms-flex-align: start;\n          align-items: flex-start;\n}\n.l7-select-control--image .l7-select-control-item {\n  margin-right: 12px;\n  border-radius: 2px;\n  overflow: hidden;\n  border: 1px solid #fff;\n  -webkit-box-sizing: content-box;\n          box-sizing: content-box;\n  width: calc((100% - 36px) / 3);\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin-bottom: 12px;\n  position: relative;\n  font-size: 12px;\n}\n.l7-select-control--image .l7-select-control-item img {\n  width: 142px;\n  height: 80px;\n}\n.l7-select-control--image .l7-select-control-item input[type='checkbox'] {\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  line-height: 26px;\n}\n.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {\n  margin-left: 8px;\n}\n.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {\n  border-color: #0370fe;\n}\n.l7-select-control--image .l7-select-control-item:nth-child(3n) {\n  margin-right: 0;\n}\n.l7-select-control-item {\n  cursor: pointer;\n}\n.l7-select-control-item input[type='checkbox'] {\n  margin: 0;\n  cursor: pointer;\n}\n.l7-select-control--multiple .l7-select-control-item:hover {\n  background-color: transparent;\n}\n.l7-control-logo {\n  width: 89px;\n  height: 16px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.l7-control-logo img {\n  height: 100%;\n  width: 100%;\n}\n.l7-control-logo .l7-control-logo-link {\n  display: block;\n  cursor: pointer;\n}\n.l7-control-logo .l7-control-logo-link img {\n  cursor: pointer;\n}\n.l7-control-mouse-location {\n  background-color: #fff;\n  border-radius: 2px;\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  padding: 2px 4px;\n  min-width: 130px;\n}\n.l7-control-zoom {\n  -webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n          box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.15);\n  border-radius: 2px;\n  overflow: hidden;\n}\n.l7-control-zoom .l7-button-control {\n  -webkit-box-shadow: 0 0 0;\n          box-shadow: 0 0 0;\n  border-radius: 0;\n  font-size: 16px;\n}\n.l7-control-zoom .l7-button-control .l7-iconfont {\n  width: 14px;\n  height: 14px;\n}\n.l7-control-zoom .l7-button-control:first-child {\n  border-bottom: 1px solid #f0f0f0;\n}\n.l7-control-scale {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-control-scale .l7-control-scale-line {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  padding: 2px 5px 1px;\n  overflow: hidden;\n  color: #595959;\n  font-size: 10px;\n  line-height: 1.1;\n  white-space: nowrap;\n  background: #fff;\n  border: 2px solid #000;\n  border-top: 0;\n  -webkit-transition: width 0.1s;\n  transition: width 0.1s;\n}\n.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {\n  margin-top: -2px;\n  border-top: 2px solid #777;\n  border-bottom: none;\n}\n.l7-right .l7-control-scale {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: end;\n      -ms-flex-align: end;\n          align-items: flex-end;\n}\n.l7-right .l7-control-scale .l7-control-scale-line {\n  text-align: right;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 5;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n}\n.l7-popup.l7-popup-hide {\n  display: none;\n}\n.l7-popup .l7-popup-content {\n  position: relative;\n  padding: 16px;\n  font-size: 14px;\n  background: #fff;\n  border-radius: 3px;\n  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.l7-popup .l7-popup-content .l7-popup-content__title {\n  margin-bottom: 8px;\n  font-weight: bold;\n}\n.l7-popup .l7-popup-content .l7-popup-close-button,\n.l7-popup .l7-popup-content .l7-popup-content__title,\n.l7-popup .l7-popup-content .l7-popup-content__panel {\n  white-space: normal;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n  pointer-events: initial;\n}\n.l7-popup .l7-popup-content .l7-popup-close-button {\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 18px;\n  height: 18px;\n  padding: 0;\n  font-size: 14px;\n  line-height: 18px;\n  text-align: center;\n  background-color: transparent;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n}\n.l7-popup .l7-popup-tip {\n  position: relative;\n  z-index: 1;\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n}\n.l7-popup.l7-popup-anchor-bottom,\n.l7-popup.l7-popup-anchor-bottom-left,\n.l7-popup.l7-popup-anchor-bottom-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: column-reverse;\n          flex-direction: column-reverse;\n}\n.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,\n.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,\n.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {\n  bottom: 1px;\n}\n.l7-popup.l7-popup-anchor-top,\n.l7-popup.l7-popup-anchor-top-left,\n.l7-popup.l7-popup-anchor-top-right {\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n}\n.l7-popup.l7-popup-anchor-top .l7-popup-tip,\n.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,\n.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {\n  top: 1px;\n}\n.l7-popup.l7-popup-anchor-left {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: row;\n          flex-direction: row;\n}\n.l7-popup.l7-popup-anchor-right {\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: reverse;\n      -ms-flex-direction: row-reverse;\n          flex-direction: row-reverse;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n  position: relative;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top: none;\n  border-bottom-color: #fff;\n}\n.l7-popup-anchor-top-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top: none;\n  border-bottom-color: #fff;\n  border-left: none;\n}\n.l7-popup-anchor-top-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top: none;\n  border-right: none;\n  border-bottom-color: #fff;\n}\n.l7-popup-anchor-bottom .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-top-color: #fff;\n  border-bottom: none;\n}\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n  -webkit-align-self: flex-start;\n  -ms-flex-item-align: start;\n      align-self: flex-start;\n  border-top-color: #fff;\n  border-bottom: none;\n  border-left: none;\n}\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n  -webkit-align-self: flex-end;\n  -ms-flex-item-align: end;\n      align-self: flex-end;\n  border-top-color: #fff;\n  border-right: none;\n  border-bottom: none;\n}\n.l7-popup-anchor-left .l7-popup-tip {\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right-color: #fff;\n  border-left: none;\n}\n.l7-popup-anchor-right .l7-popup-tip {\n  right: 1px;\n  -webkit-align-self: center;\n  -ms-flex-item-align: center;\n      align-self: center;\n  border-right: none;\n  border-left-color: #fff;\n}\n.l7-popup-anchor-top-left .l7-popup-content {\n  border-top-left-radius: 0;\n}\n.l7-popup-anchor-top-right .l7-popup-content {\n  border-top-right-radius: 0;\n}\n.l7-popup-anchor-bottom-left .l7-popup-content {\n  border-bottom-left-radius: 0;\n}\n.l7-popup-anchor-bottom-right .l7-popup-content {\n  border-bottom-right-radius: 0;\n}\n.l7-popup-track-pointer {\n  display: none;\n}\n.l7-popup-track-pointer * {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: none;\n}\n.l7-map:hover .l7-popup-track-pointer {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n}\n.l7-map:active .l7-popup-track-pointer {\n  display: none;\n}\n.l7-layer-popup__row {\n  font-size: 12px;\n}\n.l7-layer-popup__row + .l7-layer-popup__row {\n  margin-top: 4px;\n}\n")},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(10),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(11),d=n(9),v=n(37),m=(n.n(v),function(t){function e(t){var r;return Object(a.a)(this,e),r=n.call(this),Object(h.a)(Object(u.a)(r),"added",!1),Object(h.a)(Object(u.a)(r),"eventHandle",function(t){r.polyfillEvent(t),r.emit(t.type,{target:t,data:r.markerOption.extData,lngLat:r.lngLat})}),r.markerOption=Object(o.a)(Object(o.a)({},r.getDefault()),t),Object(d.o)(["update","onMove","onMapClick"],Object(u.a)(r)),r.init(),r}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getMarkerLayerContainerSize",value:function(){}},{key:"getDefault",value:function(){return{element:void 0,anchor:d.l.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(t){this.scene=t,this.mapsService=t.get(p.p.IMapService),this.sceneSerive=t.get(p.p.ISceneService);var e=this.markerOption.element;return this.mapsService.getMarkerContainer().appendChild(e),this.registerMarkerEvent(e),this.mapsService.on("camerachange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();var t=this.markerOption.element;return t&&d.b.remove(t),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(t){return this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(t){var e=this;if(!this.added)return this.once("added",function(){e.setElement(t)}),this;var n=this.markerOption.element;return n&&d.b.remove(n),this.markerOption.element=t,this.init(),this.mapsService.getMarkerContainer().appendChild(t),this.registerMarkerEvent(t),this.update(),this}},{key:"openPopup",value:function(){var t=this;if(!this.added)return this.once("added",function(){t.openPopup()}),this;var e=this.popup;return e?(e.isOpen()||e.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var t=this;this.added||this.once("added",function(){t.closePopup()});var e=this.popup;return e&&e.remove(),this}},{key:"setPopup",value:function(t){return this.popup=t,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var t=this.popup;return t?(t.isOpen()?t.remove():t.addTo(this.scene),this):this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(t){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(t){this.markerOption.extData=t}},{key:"update",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.anchor;this.updatePosition(),d.b.setTransform(e,"".concat(d.k[n]))}}},{key:"onMapClick",value:function(t){var e=this.markerOption.element;this.popup&&e&&this.togglePopup()}},{key:"getCurrentContainerSize",value:function(){var t=this.mapsService.getContainer();return{containerHeight:(null===t||void 0===t?void 0:t.scrollHeight)||0,containerWidth:(null===t||void 0===t?void 0:t.scrollWidth)||0,bounds:this.mapsService.getBounds()}}},{key:"updatePosition",value:function(){if(this.mapsService){var t=this.markerOption,e=t.element,n=t.offsets,r=this.lngLat,i=r.lng,o=r.lat,a=this.mapsService.lngLatToContainer([i,o]);if(e){e.style.display="block",e.style.whiteSpace="nowrap";var s=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize(),u=s.containerHeight,c=s.containerWidth,l=s.bounds;if(!l)return;if(Math.abs(l[0][0])>180||Math.abs(l[1][0])>180){if(a.x>c){var f=this.mapsService.lngLatToContainer([i-360,o]);a.x=f.x}if(a.x<0){var h=this.mapsService.lngLatToContainer([i+360,o]);a.x=h.x}}(a.x>c||a.x<0||a.y>u||a.y<0)&&(e.style.display="none"),e.style.left=a.x+n[0]+"px",e.style.top=a.y-n[1]+"px"}}}},{key:"init",value:function(){var t=this,e=this.markerOption.element,n=this.markerOption,r=n.color,i=n.anchor;if(!e){this.defaultMarker=!0,e=d.b.create("div"),this.markerOption.element=e;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","48px"),o.setAttributeNS(null,"width","48px"),o.setAttributeNS(null,"viewBox","0 0 1024 1024");var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),a.setAttributeNS(null,"fill",r),o.appendChild(a),e.appendChild(o)}d.b.addClass(e,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(n){var r,i,o=(null===(r=t.markerOption)||void 0===r?void 0:r.style)&&(null===(i=t.markerOption)||void 0===i?void 0:i.style[n]);e&&(e.style[n]=o)}),Object(d.m)(e,i,"marker")}},{key:"registerMarkerEvent",value:function(t){t.addEventListener("click",this.onMapClick),t.addEventListener("mousemove",this.eventHandle),t.addEventListener("click",this.eventHandle),t.addEventListener("mousedown",this.eventHandle),t.addEventListener("mouseup",this.eventHandle),t.addEventListener("dblclick",this.eventHandle),t.addEventListener("contextmenu",this.eventHandle),t.addEventListener("mouseover",this.eventHandle),t.addEventListener("mouseout",this.eventHandle),t.addEventListener("touchstart",this.eventHandle),t.addEventListener("touchend",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var t=this.getElement();t.removeEventListener("click",this.onMapClick),t.removeEventListener("mousemove",this.eventHandle),t.removeEventListener("click",this.eventHandle),t.removeEventListener("mousedown",this.eventHandle),t.removeEventListener("mouseup",this.eventHandle),t.removeEventListener("dblclick",this.eventHandle),t.removeEventListener("contextmenu",this.eventHandle),t.removeEventListener("mouseover",this.eventHandle),t.removeEventListener("mouseout",this.eventHandle),t.removeEventListener("touchstart",this.eventHandle),t.removeEventListener("touchend",this.eventHandle)}},{key:"polyfillEvent",value:function(t){this.mapsService&&"GAODE2.x"===this.mapsService.version&&(Object(d.L)()||("touchstart"===t.type&&(this.touchStartTime=Date.now()),"touchend"===t.type&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:t,data:this.markerOption.extData,lngLat:this.lngLat})))}},{key:"addDragHandler",value:function(t){return null}},{key:"onUp",value:function(t){throw new Error("Method not implemented.")}}]),e}(v.EventEmitter))},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return v});var o=n(10),a=n(0),s=n(1),u=n(32),c=n(3),l=n(4),f=n(2),h=n(942),p=n(161),d={topleft:"right-start",topcenter:"bottom",topright:"left-start",bottomleft:"right-end",bottomcenter:"top",bottomright:"left-end",lefttop:"bottom-start",leftcenter:"right",leftbottom:"top-start",righttop:"bottom-end",rightcenter:"left",rightbottom:"top-end"},v=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getPopper",value:function(){return this.popper}},{key:"hide",value:function(){this.popper.hide(),Object(u.a)(Object(f.a)(e.prototype),"hide",this).call(this)}},{key:"getDefault",value:function(t){var n,r=Object(u.a)(Object(f.a)(e.prototype),"getDefault",this).call(this,t),i=null!==(n=null===t||void 0===t?void 0:t.position)&&void 0!==n?n:r.position;return Object(o.a)(Object(o.a)({},Object(u.a)(Object(f.a)(e.prototype),"getDefault",this).call(this,t)),{},{popperPlacement:i instanceof Element?"bottom":d[i],popperTrigger:"click"})}},{key:"onAdd",value:function(){var t=Object(u.a)(Object(f.a)(e.prototype),"onAdd",this).call(this);return this.initPopper(),t}},{key:"onRemove",value:function(){this.popper.destroy()}},{key:"initPopper",value:function(){var t=this,e=this.controlOption,n=e.popperClassName,r=e.popperPlacement,i=e.popperTrigger,o=this.mapsService.getMapContainer();return this.popper=new h.a(this.button,{className:n,placement:r,trigger:i,container:o,unique:!0}),this.popper.on("show",function(){t.emit("popperShow",t)}).on("hide",function(){t.emit("popperHide",t)}),this.popper}},{key:"setOptions",value:function(t){if(Object(u.a)(Object(f.a)(e.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["popperPlacement","popperTrigger","popperClassName"])){var n=this.popper.getContent();this.popper.destroy(),this.initPopper(),this.popper.setContent(n)}}}]),e}(p.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g}),n.d(e,"b",function(){return g});var o=n(10),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(11),d=n(9),v=n(37),m=(n.n(v),n(111)),g=function(t){function e(t){var r;Object(a.a)(this,e),r=n.call(this),Object(h.a)(Object(u.a)(r),"isShow",!0),Object(h.a)(Object(u.a)(r),"onMouseMove",function(t){var e,n=r.mapsService.getMapContainer(),i=null!==(e=null===n||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==e?e:{},o=i.left,a=void 0===o?0:o,s=i.top,u=void 0===s?0:s;r.setPopupPosition(t.clientX-a,t.clientY-u)}),Object(h.a)(Object(u.a)(r),"updateLngLatPosition",function(){if(r.mapsService&&!r.popupOption.followCursor){var t=r.lngLat,e=t.lng,n=t.lat,i=r.mapsService.lngLatToContainer([e,n]),o=i.x,a=i.y;r.setPopupPosition(o,a)}}),Object(h.a)(Object(u.a)(r),"onKeyDown",function(t){27===t.keyCode&&r.remove()}),Object(h.a)(Object(u.a)(r),"onCloseButtonClick",function(t){t.stopPropagation&&t.stopPropagation(),r.hide()}),Object(h.a)(Object(u.a)(r),"update",function(){var t=!!r.lngLat,e=r.popupOption,n=e.className,i=e.style,o=e.maxWidth,a=e.anchor,s=e.stopPropagation;if(r.mapsService&&t&&r.content){var u=r.mapsService.getMarkerContainer();if(!r.container&&u&&(r.container=d.b.create("div","l7-popup ".concat(null!==n&&void 0!==n?n:""," ").concat(r.isShow?"":"l7-popup-hide"),u),i&&r.container.setAttribute("style",i),r.tip=d.b.create("div","l7-popup-tip",r.container),r.container.appendChild(r.content),s&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(t){r.container.addEventListener(t,function(t){t.stopPropagation()})}),r.container.style.whiteSpace="nowrap"),r.updateLngLatPosition(),d.b.setTransform(r.container,"".concat(d.k[a])),Object(d.m)(r.container,a,"popup"),o){r.container.getBoundingClientRect().width>parseFloat(o)&&(r.container.style.width=o)}else r.container.style.removeProperty("width")}}),r.popupOption=Object(o.a)(Object(o.a)({},r.getDefault(null!==t&&void 0!==t?t:{})),t);var i=r.popupOption.lngLat;return i&&(r.lngLat=i),r}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"lngLat",get:function(){var t;return null!==(t=this.popupOption.lngLat)&&void 0!==t?t:{lng:0,lat:0}},set:function(t){this.popupOption.lngLat=t}},{key:"getIsShow",value:function(){return this.isShow}},{key:"addTo",value:function(t){this.mapsService=t.get(p.p.IMapService),this.sceneService=t.get(p.p.ISceneService),this.layerService=t.get(p.p.ILayerService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=t,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();var e=this.popupOption,n=e.html,r=e.text,i=e.title;return n?this.setHTML(n):r&&this.setText(r),i&&this.setTitle(i),this.emit("open"),this}},{key:"remove",value:function(){if(null!==this&&void 0!==this&&this.isOpen())return this.content&&d.b.remove(this.content),this.container&&(d.b.remove(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}},{key:"getOptions",value:function(){return this.popupOption}},{key:"setOptions",value:function(t){return this.show(),this.popupOption=Object(o.a)(Object(o.a)({},this.popupOption),t),this.checkUpdateOption(t,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","className","style","lngLat","offsets"])&&(this.container&&(d.b.remove(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(t,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(t,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(t,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(t,["html"])&&t.html?this.setHTML(t.html):this.checkUpdateOption(t,["text"])&&t.text&&this.setText(t.text),this.checkUpdateOption(t,["lngLat"])&&t.lngLat&&this.setLnglat(t.lngLat),this}},{key:"open",value:function(){return this.addTo(this.scene),this}},{key:"close",value:function(){return this.remove(),this}},{key:"show",value:function(){if(!this.isShow)return this.container&&d.b.removeClass(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}},{key:"hide",value:function(){if(this.isShow)return this.container&&d.b.addClass(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}},{key:"setHTML",value:function(t){return this.popupOption.html=t,this.setDOMContent(t)}},{key:"setText",value:function(t){return this.popupOption.text=t,this.setDOMContent(window.document.createTextNode(t))}},{key:"setTitle",value:function(t){this.show(),this.popupOption.title=t,t?(this.contentTitle||(this.contentTitle=d.b.create("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),d.b.clearChildren(this.contentTitle),d.b.appendElementType(this.contentTitle,t)):this.contentTitle&&(d.b.remove(this.contentTitle),this.contentTitle=void 0)}},{key:"panToPopup",value:function(){var t=this.lngLat,e=t.lng,n=t.lat;return this.popupOption.autoPan&&this.mapsService.panTo([e,n]),this}},{key:"setLngLat",value:function(t){return this.setLnglat(t)}},{key:"setLnglat",value:function(t){var e=this;return this.show(),this.lngLat=t,Array.isArray(t)&&(this.lngLat={lng:t[0],lat:t[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(function(){e.panToPopup()},0),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setMaxWidth",value:function(t){return this.popupOption.maxWidth=t,this.update(),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"getDefault",value:function(t){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:d.l.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}},{key:"setDOMContent",value:function(t){return this.show(),this.createContent(),d.b.appendElementType(this.contentPanel,t),this.update(),this}},{key:"updateCloseOnClick",value:function(t){var e=this,n=this.mapsService;n&&(null===n||void 0===n||n.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!t&&requestAnimationFrame(function(){null===n||void 0===n||n.on("click",e.onCloseButtonClick)}))}},{key:"updateCloseOnEsc",value:function(t){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!t&&window.addEventListener("keydown",this.onKeyDown)}},{key:"updateFollowCursor",value:function(t){var e,n=null===(e=this.mapsService)||void 0===e?void 0:e.getContainer();n&&(null===n||void 0===n||n.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!t&&(null===n||void 0===n||n.addEventListener("mousemove",this.onMouseMove)))}},{key:"createContent",value:function(){var t=this;if(this.content&&d.b.remove(this.content),this.contentTitle=void 0,this.content=d.b.create("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){var e=Object(m.a)("l7-icon-guanbi");d.b.addClass(e,"l7-popup-close-button"),this.content.appendChild(e),this.popupOption.closeButtonOffsets&&(e.style.right=this.popupOption.closeButtonOffsets[0]+"px",e.style.top=this.popupOption.closeButtonOffsets[1]+"px"),e.setAttribute("aria-label","Close popup"),e.addEventListener("click",function(){t.hide()}),this.closeButton=e}else this.closeButton=void 0;this.contentPanel=d.b.create("div","l7-popup-content__panel",this.content)}},{key:"setPopupPosition",value:function(t,e){if(this.container){var n=this.popupOption.offsets;this.container.style.left=t+n[0]+"px",this.container.style.top=e-n[1]+"px"}}},{key:"checkUpdateOption",value:function(t,e){return e.some(function(e){return e in t})}}]),e}(v.EventEmitter)},function(t,e,n){"use strict";var r=n(11),i=(n(956),n(1086),n(46),n(16),n(1091),n(1096),n(473),n(297),n(298),n(299)),o=(n(209),n(1132),n(1133),n(480)),a=(n(1139),n(1145)),s=n(1146),u=n(1147),c=n(1219),l=n(1220),f=n(1221),h=n(1238),p=n(1239),d=n(1240),v=n(1241),m=n(1242),g=n(1244),y=n(1245),_=n(1246);n(116);n.d(e,"b",function(){return i.a}),n.d(e,"a",function(){return o.a}),r.q.bind(r.p.ILayerPlugin).to(s.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(m.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(u.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(a.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(h.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(l.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(_.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(y.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(d.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(g.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(c.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(p.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(v.a).inRequestScope(),r.q.bind(r.p.ILayerPlugin).to(f.a).inRequestScope()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r,i=n(6),o=n(11),a=(r={},Object(i.a)(r,o.b.additive,{enable:!0,func:{srcRGB:o.t.ONE,dstRGB:o.t.ONE,srcAlpha:1,dstAlpha:1}}),Object(i.a)(r,o.b.none,{enable:!1}),Object(i.a)(r,o.b.normal,{enable:!0,func:{srcRGB:o.t.SRC_ALPHA,dstRGB:o.t.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),Object(i.a)(r,o.b.subtractive,{enable:!0,func:{srcRGB:o.t.ONE,dstRGB:o.t.ONE,srcAlpha:o.t.ZERO,dstAlpha:o.t.ONE_MINUS_SRC_COLOR},equation:{rgb:o.t.FUNC_SUBTRACT,alpha:o.t.FUNC_SUBTRACT}}),Object(i.a)(r,o.b.max,{enable:!0,func:{srcRGB:o.t.ONE,dstRGB:o.t.ONE},equation:{rgb:o.t.MAX_EXT}}),Object(i.a)(r,o.b.min,{enable:!0,func:{srcRGB:o.t.ONE,dstRGB:o.t.ONE},equation:{rgb:o.t.MIN_EXT}}),r)},function(t,e,n){"use strict";n.d(e,"a",function(){return Z});var r,i,o,a,s,u,c,l,f,h,p,d=n(15),v=n(269),m=n(20),g=n(10),y=n(49),_=n(7),b=n(39),x=n(0),w=n(1),E=n(6),S=n(40),O=(n(41),n(8)),T=n.n(O),A=n(441),C=n.n(A),k=n(11),M=n(9),P=n(36),j=n(13),I=(n.n(j),n(14)),R=(n.n(I),n(92)),L=n(442),D=n(960),N=n(289),z=n(964),F=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];!function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".amap-logo{\n display: none !important;\n}\n");var B={contextmenu:"rightclick"},U={contextmenu:"rightclick",camerachange:"viewchange"},V={"GAODE1.x":B,"GAODE2.x":U},G=0;window.forceWebGL=!0;var H=!1,W=[],q=12,Z=(r=Object(j.injectable)(),i=Object(j.inject)(k.p.IGlobalConfigService),o=Object(j.inject)(k.p.MapConfig),a=Object(j.inject)(k.p.ICoordinateSystemService),s=Object(j.inject)(k.p.IEventEmitter),r((c=function(){function t(){var e=this;Object(x.a)(this,t),Object(E.a)(this,"version",R.a["GAODE1.x"]),Object(E.a)(this,"simpleMapCoord",new L.a),Object(E.a)(this,"bgColor","rgba(0, 0, 0, 0)"),Object(b.a)(this,"configService",l,this),Object(b.a)(this,"config",f,this),Object(b.a)(this,"coordinateSystemService",h,this),Object(b.a)(this,"eventEmitter",p,this),Object(E.a)(this,"handleCameraChanged",function(t){var n=t.camera,r=n.fov,i=n.near,o=n.far,a=n.height,s=n.pitch,u=n.rotation,c=n.aspect,l=n.position,f=e.getCenter(),h=f.lng,p=f.lat;if(e.emit("mapchange"),e.cameraChangedCallback){e.viewport.syncWithMapCamera({aspect:c,bearing:360-u,far:o,fov:r,cameraHeight:a,near:i,pitch:s,zoom:e.map.getZoom()-1,center:[h,p],offsetOrigin:[l.x,l.y]});var d=e.config.offsetZoom,v=void 0===d?q:d;e.viewport.getZoom()>v?e.coordinateSystemService.setCoordinateSystem(k.d.P20_OFFSET):e.coordinateSystemService.setCoordinateSystem(k.d.P20),e.cameraChangedCallback(e.viewport)}})}return Object(w.a)(t,[{key:"setBgColor",value:function(t){this.bgColor=t}},{key:"addMarkerContainer",value:function(){var t=this.map.getContainer();if(null!==t){var e=t.getElementsByClassName("amap-maps")[0];this.markerContainer=M.b.create("div","l7-marker-container",e)}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(t,e){-1!==k.h.indexOf(t)?this.eventEmitter.on(t,e):this.map.on(V[this.version][t]||t,e)}},{key:"off",value:function(t,e){-1!==k.h.indexOf(t)?this.eventEmitter.off(t,e):this.map.off(V[this.version][t]||t,e)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var t;return null===(t=this.map.getContainer())||void 0===t?void 0:t.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var t=this.map.getSize();return[t.getWidth(),t.getHeight()]}},{key:"getType",value:function(){return"amap"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(t){return this.map.setZoom(t+1)}},{key:"getCenter",value:function(t){if(null!==t&&void 0!==t&&t.padding){var e=this.getCenter(),n=Object(D.a)(t.padding),r=this.lngLatToPixel([e.lng,e.lat]),i=[(n.right-n.left)/2,(n.bottom-n.top)/2];return this.pixelToLngLat([r.x-i[0],r.y-i[1]])}var o=this.map.getCenter();return{lng:o.getLng(),lat:o.getLat()}}},{key:"setCenter",value:function(t,e){if(null!==e&&void 0!==e&&e.padding){var n=Object(D.a)(e.padding),r=this.lngLatToPixel(t),i=[(n.right-n.left)/2,(n.bottom-n.top)/2],o=this.pixelToLngLat([r.x+i[0],r.y+i[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(t)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var t=this.map.getBounds().toBounds(),e=t.getNorthEast(),n=t.getSouthWest(),r=this.getCenter(),i=r.lng>e.getLng()||r.lng<n.getLng()?180-e.getLng():e.getLng();return[[r.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[i,e.getLat()]]}},{key:"getMinZoom",value:function(){return this.map.get("zooms")[0]-1}},{key:"getMaxZoom",value:function(){return this.map.get("zooms")[1]-1}},{key:"setRotation",value:function(t){return this.map.setRotation(t)}},{key:"setPitch",value:function(t){return this.map.setPitch(t)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(t){this.map.panTo(t)}},{key:"panBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.map.panBy(t,e)}},{key:"fitBounds",value:function(t){this.map.setBounds(new AMap.Bounds([t[0][0],t[0][1],t[1][0],t[1][1]]))}},{key:"setZoomAndCenter",value:function(t,e){this.map.setZoomAndCenter(t+1,e)}},{key:"setMapStyle",value:function(t){this.map.setMapStyle(this.getMapStyleValue(t))}},{key:"setMapStatus",value:function(t){this.map.setStatus(t)}},{key:"getMapStyleConfig",value:function(){return z.a}},{key:"getMapStyleValue",value:function(t){return this.getMapStyleConfig()[t]||t}},{key:"getMapStyle",value:function(){return this.map.getMapStyle()}},{key:"pixelToLngLat",value:function(t){var e=this.map.pixelToLngLat(new AMap.Pixel(t[0],t[1]));return{lng:e.getLng(),lat:e.getLat()}}},{key:"lngLatToPixel",value:function(t){var e=this.map.lnglatToPixel(new AMap.LngLat(t[0],t[1]));return{x:e.getX(),y:e.getY()}}},{key:"containerToLngLat",value:function(t){var e=new AMap.Pixel(t[0],t[1]),n=this.map.containerToLngLat(e);return{lng:null===n||void 0===n?void 0:n.getLng(),lat:null===n||void 0===n?void 0:n.getLat()}}},{key:"lngLatToContainer",value:function(t){var e=new AMap.LngLat(t[0],t[1]),n=this.map.lngLatToContainer(e);return{x:n.getX(),y:n.getY()}}},{key:"lngLatToCoord",value:function(t){var e=this.map.lngLatToGeodeticCoord(t);return[e.x,-e.y]}},{key:"lngLatToMercator",value:function(t,e){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(t),o=P.b.create();return P.b.translate(o,o,P.d.fromValues(i[0],i[1],e)),P.b.scale(o,o,P.d.fromValues(r[0],r[1],r[2])),P.b.rotateX(o,o,n[0]),P.b.rotateY(o,o,n[1]),P.b.rotateZ(o,o,n[2]),o}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(_.a)(T.a.mark(function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p,d,v=this;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.config,n=e.id,r=e.style,i=void 0===r?"light":r,o=e.minZoom,a=void 0===o?0:o,s=e.maxZoom,u=void 0===s?18:s,c=e.token,l=void 0===c?"15cd8a57710d40c9b7c0e3cc120f1200":c,f=e.mapInstance,h=e.plugin,p=void 0===h?[]:h,d=Object(y.a)(e,F),t.next=3,new Promise(function(t){var e=function(){if(f)v.map=f,v.$mapContainer=v.map.getContainer(),setTimeout(function(){v.map.on("camerachange",v.handleCameraChanged),t()},30);else{v.$mapContainer=v.creatMapContainer(n);var e=Object(g.a)({mapStyle:v.getMapStyleValue(i),zooms:[a,u],viewMode:"3D"},d);e.zoom&&(e.zoom+=1);var r=new AMap.Map(v.$mapContainer,e);r.on("camerachange",v.handleCameraChanged),r.on("camerachange",function(){setTimeout(function(){return v.handleAfterMapChange()})}),v.map=r,setTimeout(function(){t()},10)}};H||f?H&&window.AMap||f?e():W.push(e):("15cd8a57710d40c9b7c0e3cc120f1200"===l&&console.warn("%c".concat(v.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),H=!0,p.push("Map3D"),C.a.load({key:l,version:"1.4.15",plugins:p}).then(function(){e(),W.length&&(W.forEach(function(t){return t()}),W=[])}).catch(function(t){throw new Error(t)}))});case 3:this.viewport=new N.a;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"meterToCoord",value:function(t,e){var n=AMap.GeometryUtil.distance(Object(v.a)(AMap.LngLat,Object(m.a)(t)),Object(v.a)(AMap.LngLat,Object(m.a)(e))),r=this.lngLatToCoord(t),i=Object(d.a)(r,2),o=i[0],a=i[1],s=this.lngLatToCoord(e),u=Object(d.a)(s,2),c=u[0],l=u[1];return Math.sqrt(Math.pow(o-c,2)+Math.pow(a-l,2))/n}},{key:"updateView",value:function(t){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(t){var e,n=null===(e=this.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-layer")[0];return"jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png")}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"destroy",value:function(){var t,e;null===(t=this.$mapContainer)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.$mapContainer),delete window.initAMap;var n=document.getElementById("amap-script");n&&document.head.removeChild(n),this.map.destroy()}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"handleAfterMapChange",value:function(){this.emit("mapAfterFrameChange")}},{key:"creatMapContainer",value:function(t){var e=t;"string"===typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n       position: absolute;\n       top: 0;\n       height: 100%;\n       width: 100%;\n     ",n.id="l7_amap_div"+G++,e.appendChild(n),n}}]),t}(),l=Object(S.a)(c.prototype,"configService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(S.a)(c.prototype,"config",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(S.a)(c.prototype,"coordinateSystemService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(S.a)(c.prototype,"eventEmitter",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u)},function(t,e,n){"use strict";!function(e,n){t.exports=n()}(0,function(){function t(t){var r=[];return t.AMapUI&&r.push(e(t.AMapUI)),t.Loca&&r.push(n(t.Loca)),Promise.all(r)}function e(t){return new Promise(function(e,n){var s=[];if(t.plugins)for(var u=0;u<t.plugins.length;u+=1)-1==i.AMapUI.plugins.indexOf(t.plugins[u])&&s.push(t.plugins[u]);if(o.AMapUI===r.failed)n("\u524d\u6b21\u8bf7\u6c42 AMapUI \u5931\u8d25");else if(o.AMapUI===r.notload){o.AMapUI=r.loading,i.AMapUI.version=t.version||i.AMapUI.version,u=i.AMapUI.version;var c=document.body||document.head,l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/ui/"+u+"/main.js",l.onerror=function(t){o.AMapUI=r.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},l.onload=function(){if(o.AMapUI=r.loaded,s.length)window.AMapUI.loadUI(s,function(){for(var t=0,n=s.length;t<n;t++){var r=s[t].split("/").slice(-1)[0];window.AMapUI[r]=arguments[t]}for(e();a.AMapUI.length;)a.AMapUI.splice(0,1)[0]()});else for(e();a.AMapUI.length;)a.AMapUI.splice(0,1)[0]()},c.appendChild(l)}else o.AMapUI===r.loaded?t.version&&t.version!==i.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):s.length?window.AMapUI.loadUI(s,function(){for(var t=0,n=s.length;t<n;t++){var r=s[t].split("/").slice(-1)[0];window.AMapUI[r]=arguments[t]}e()}):e():t.version&&t.version!==i.AMapUI.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c AMapUI \u6df7\u7528"):a.AMapUI.push(function(t){t?n(t):s.length?window.AMapUI.loadUI(s,function(){for(var t=0,n=s.length;t<n;t++){var r=s[t].split("/").slice(-1)[0];window.AMapUI[r]=arguments[t]}e()}):e()})})}function n(t){return new Promise(function(e,n){if(o.Loca===r.failed)n("\u524d\u6b21\u8bf7\u6c42 Loca \u5931\u8d25");else if(o.Loca===r.notload){o.Loca=r.loading,i.Loca.version=t.version||i.Loca.version;var s=i.Loca.version,u=i.AMap.version.startsWith("2"),c=s.startsWith("2");if(u&&!c||!u&&c)n("JSAPI \u4e0e Loca \u7248\u672c\u4e0d\u5bf9\u5e94\uff01\uff01");else{u=i.key,c=document.body||document.head;var l=document.createElement("script");l.type="text/javascript",l.src="https://webapi.amap.com/loca?v="+s+"&key="+u,l.onerror=function(t){o.Loca=r.failed,n("\u8bf7\u6c42 AMapUI \u5931\u8d25")},l.onload=function(){for(o.Loca=r.loaded,e();a.Loca.length;)a.Loca.splice(0,1)[0]()},c.appendChild(l)}}else o.Loca===r.loaded?t.version&&t.version!==i.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):e():t.version&&t.version!==i.Loca.version?n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c Loca \u6df7\u7528"):a.Loca.push(function(t){t?n(t):n()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var r;!function(t){t.notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed"}(r||(r={}));var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},a={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(t){"function"==typeof t&&(o.AMap===r.loaded?t(window.AMap):s.push(t))};return{load:function(e){return new Promise(function(n,a){if(o.AMap==r.failed)a("");else if(o.AMap==r.notload){var c=e.key,l=e.version,f=e.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&a("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),i.key=c,i.AMap.version=l||i.AMap.version,i.AMap.plugins=f||i.AMap.plugins,o.AMap=r.loading,l=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)o.AMap=r.failed,a(i);else for(o.AMap=r.loaded,t(e).then(function(){n(window.AMap)}).catch(a);s.length;)s.splice(0,1)[0]()},f=document.createElement("script"),f.type="text/javascript",f.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+c+"&plugin="+i.AMap.plugins.join(","),f.onerror=function(t){o.AMap=r.failed,a(t)},l.appendChild(f)):a("\u8bf7\u586b\u5199key")}else if(o.AMap==r.loaded)if(e.key&&e.key!==i.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(e.version&&e.version!==i.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{if(c=[],e.plugins)for(l=0;l<e.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(e.plugins[l])&&c.push(e.plugins[l]);c.length?window.AMap.plugin(c,function(){t(e).then(function(){n(window.AMap)}).catch(a)}):t(e).then(function(){n(window.AMap)}).catch(a)}else if(e.key&&e.key!==i.key)a("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");else if(e.version&&e.version!==i.AMap.version)a("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");else{var h=[];if(e.plugins)for(l=0;l<e.plugins.length;l+=1)-1==i.AMap.plugins.indexOf(e.plugins[l])&&h.push(e.plugins[l]);u(function(){h.length?window.AMap.plugin(h,function(){t(e).then(function(){n(window.AMap)}).catch(a)}):t(e).then(function(){n(window.AMap)}).catch(a)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},o={AMap:r.notload,AMapUI:r.notload,Loca:r.notload},a={AMap:[],AMapUI:[],Loca:[]}}}})},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(6),a=function(){function t(e){Object(r.a)(this,t),Object(o.a)(this,"size",1e4),this.size=e||1e4}return Object(i.a)(t,[{key:"setSize",value:function(t){this.size=t}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(t){return(180+t)/360*this.size}},{key:"mercatorYfromLat",value:function(t){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(t){return t/this.size*360-180}},{key:"latFromMercatorY",value:function(t){var e=180-360*(1-t/this.size);return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}},{key:"project",value:function(t){return[this.mercatorXfromLng(t[0]),this.mercatorYfromLat(t[1])]}},{key:"unproject",value:function(t){return[this.lngFromMercatorX(t[0]),this.latFromMercatorY(t[1])]}}]),t}()},function(t,e,n){"use strict";var r=n(162);n.d(e,"a",function(){return r.a});n(445),n(962),n(963),n(163)},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e||"viewport-mercator-project: assertion failed.")}e.a=r},function(t,e,n){"use strict";function r(t){var e=t.width,n=t.height,r=t.bounds,s=t.minExtent,u=void 0===s?0:s,c=t.maxZoom,l=void 0===c?24:c,f=t.padding,h=void 0===f?0:f,p=t.offset,d=void 0===p?[0,0]:p,v=Object(i.a)(r,2),m=Object(i.a)(v[0],2),g=m[0],y=m[1],_=Object(i.a)(v[1],2),b=_[0],x=_[1];if(Number.isFinite(h)){var w=h;h={top:w,bottom:w,left:w,right:w}}else Object(a.a)(Number.isFinite(h.top)&&Number.isFinite(h.bottom)&&Number.isFinite(h.left)&&Number.isFinite(h.right));var E=new o.a({width:e,height:n,longitude:0,latitude:0,zoom:0}),S=E.project([g,x]),O=E.project([b,y]),T=[Math.max(Math.abs(O[0]-S[0]),u),Math.max(Math.abs(O[1]-S[1]),u)],A=[e-h.left-h.right-2*Math.abs(d[0]),n-h.top-h.bottom-2*Math.abs(d[1])];Object(a.a)(A[0]>0&&A[1]>0);var C=A[0]/T[0],k=A[1]/T[1],M=(h.right-h.left)/2/C,P=(h.bottom-h.top)/2/k,j=[(O[0]+S[0])/2+M,(O[1]+S[1])/2+P],I=E.unproject(j),R=E.zoom+Math.log2(Math.abs(Math.min(C,k)));return{longitude:I[0],latitude:I[1],zoom:Math.min(R,l)}}e.a=r;var i=n(15),o=n(162),a=n(444)},function(t,e,n){"use strict";var r=n(972);n.d(e,"a",function(){return r.a});var i=n(448);n.d(e,"c",function(){return i.a});var o=(n(1068),n(1069));n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(0),a=n(1),s=n(12),u=n(3),c=n(4),l=n(2),f=n(6),h=n(37),p=(n.n(h),n(19)),d=(n.n(p),n(112)),v=n(199),m=n(64),g=n(974),y=n(113),_=n(93),b=function(t){function e(t){var r;Object(o.a)(this,e),r=n.call(this),Object(f.a)(Object(s.a)(r),"renderFrameCallback",function(){var t=Math.min((Object(_.f)()-r.easeStart)/r.easeOptions.duration,1);r.onEaseFrame(r.easeOptions.easing(t)),t<1?r.easeFrameId=r.requestRenderFrame(r.renderFrameCallback):r.stop()}),r.options=t;var i=t.minZoom,a=t.maxZoom,u=t.minPitch,c=t.maxPitch,l=t.renderWorldCopies;return r.moving=!1,r.zooming=!1,r.bearingSnap=t.bearingSnap,r.pitchEnabled=t.pitchEnabled,r.rotateEnabled=t.rotateEnabled,r.transform=new g.a(i,a,u,c,l),r}Object(u.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"requestRenderFrame",value:function(t){return 0}},{key:"cancelRenderFrame",value:function(t){}},{key:"getCenter",value:function(){var t=this.transform.center,e=t.lng,n=t.lat;return new d.a(e,n)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setCenter",value:function(t,e){return this.jumpTo({center:t},e)}},{key:"setPitch",value:function(t,e){return this.jumpTo({pitch:t},e),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"panTo",value:function(t,e,n){return this.easeTo(Object(p.merge)({center:t},e),n)}},{key:"panBy",value:function(t,e,n){return t=m.a.convert(t).mult(-1),this.panTo(this.transform.center,Object(_.d)({offset:t},e||{}),n)}},{key:"zoomOut",value:function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this}},{key:"setBearing",value:function(t,e){return this.jumpTo({bearing:t},e),this}},{key:"setZoom",value:function(t,e){return this.jumpTo({zoom:t},e),this}},{key:"zoomIn",value:function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this}},{key:"zoomTo",value:function(t,e,n){return this.easeTo(Object(p.merge)({zoom:t},e),n)}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(t,e){return this.jumpTo({padding:t},e),this}},{key:"rotateTo",value:function(t,e,n){return this.easeTo(Object(p.merge)({bearing:t},e),n)}},{key:"resetNorth",value:function(t,e){return this.rotateTo(0,Object(p.merge)({duration:1e3},t),e),this}},{key:"resetNorthPitch",value:function(t,e){return this.easeTo(Object(p.merge)({bearing:0,pitch:0,duration:1e3},t),e),this}},{key:"fitBounds",value:function(t,e,n){return this.fitInternal(this.cameraForBounds(t,e),e,n)}},{key:"cameraForBounds",value:function(t,e){return t=v.a.convert(t),this.cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,e)}},{key:"snapToNorth",value:function(t,e){return Math.abs(this.getBearing())<this.bearingSnap?this.resetNorth(t,e):this}},{key:"jumpTo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;this.stop();var n=this.transform,r=!1,i=!1,o=!1;return void 0!==t.zoom&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),void 0!==t.center&&(n.center=d.a.convert(t.center)),void 0!==t.bearing&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),void 0!==t.pitch&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),void 0===t.padding||n.isPaddingEqual(t.padding)||(n.padding=t.padding),this.emit("movestart",new y.a("movestart",e)),this.emit("move",new y.a("move",e)),r&&(this.emit("zoomstart",new y.a("zoomstart",e)),this.emit("zoom",new y.a("zoom",e)),this.emit("zoomend",new y.a("zoomend",e))),i&&(this.emit("rotatestart",new y.a("rotatestart",e)),this.emit("rotate",new y.a("rotate",e)),this.emit("rotateend",new y.a("rotateend",e))),o&&(this.emit("pitchstart",new y.a("pitchstart",e)),this.emit("pitch",new y.a("pitch",e)),this.emit("pitchend",new y.a("pitchend",e))),this.emit("moveend",new y.a("moveend",e))}},{key:"easeTo",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;e=Object(p.merge)({offset:[0,0],duration:500,easing:_.c},e),(!1===e.animate||!e.essential&&Object(_.h)())&&(e.duration=0);var r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),u=e.zoom?+e.zoom:i,c=e.bearing?this.normalizeBearing(e.bearing,o):o,l=e.pitch?+e.pitch:a,f=e.padding?e.padding:r.padding,h=m.a.convert(e.offset),v=r.centerPoint.add(h),g=r.pointLocation(v),y=d.a.convert(e.center||g);this.normalizeCenter(y);var b,x,w=r.project(g),E=r.project(y).sub(w),S=r.zoomScale(u-i);e.around&&(b=d.a.convert(e.around),x=r.locationPoint(b));var O={moving:this.moving,zooming:this.zooming,rotating:this.rotating,pitching:this.pitching};return this.zooming=this.zooming||u!==i,this.rotating=this.rotating||o!==c,this.pitching=this.pitching||l!==a,this.padding=!r.isPaddingEqual(f),this.easeId=e.easeId,this.prepareEase(n,e.noMoveStart,O),clearTimeout(this.easeEndTimeoutID),this.ease(function(e){if(t.zooming&&(r.zoom=Object(_.e)(i,u,e)),t.rotating&&t.rotateEnabled&&(r.bearing=Object(_.e)(o,c,e)),t.pitching&&t.pitchEnabled&&(r.pitch=Object(_.e)(a,l,e)),t.padding&&(r.interpolatePadding(s,f,e),v=r.centerPoint.add(h)),b)r.setLocationAtPoint(b,x);else{var p=r.zoomScale(r.zoom-i),d=u>i?Math.min(2,S):Math.max(.5,S),m=Math.pow(d,1-e),g=r.unproject(w.add(E.mult(e*m)).mult(p));r.setLocationAtPoint(r.renderWorldCopies?g.wrap():g,v)}t.fireMoveEvents(n)},function(e){t.afterEase(n,e)},e),this}},{key:"flyTo",value:function(){function t(t){var e=(M*M-k*k+(t?-1:1)*R*R*P*P)/(2*(t?M:k)*R*P);return Math.log(Math.sqrt(e*e+1)-e)}function e(t){return(Math.exp(t)-Math.exp(-t))/2}function n(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){return e(t)/n(t)}var i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(!o.essential&&Object(_.h)()){var s=Object(_.g)(o,["center","zoom","bearing","pitch","around"]);return this.jumpTo(s,a)}this.stop(),o=Object(p.merge)({offset:[0,0],speed:1.2,curve:1.42,easing:_.c},o);var u=this.transform,c=this.getZoom(),l=this.getBearing(),f=this.getPitch(),h=this.getPadding(),v=o.zoom?Object(_.b)(+o.zoom,u.minZoom,u.maxZoom):c,g=o.bearing?this.normalizeBearing(o.bearing,l):l,y=o.pitch?+o.pitch:f,b="padding"in o?o.padding:u.padding,x=u.zoomScale(v-c),w=m.a.convert(o.offset),E=u.centerPoint.add(w),S=u.pointLocation(E),O=d.a.convert(o.center||S);this.normalizeCenter(O);var T=u.project(S),A=u.project(O).sub(T),C=o.curve,k=Math.max(u.width,u.height),M=k/x,P=A.mag();if("minZoom"in o){var j=Object(_.b)(Math.min(o.minZoom,c,v),u.minZoom,u.maxZoom),I=k/u.zoomScale(j-c);C=Math.sqrt(I/P*2)}var R=C*C,L=t(0),D=function(t){return n(L)/n(L+C*t)},N=function(t){return k*((n(L)*r(L+C*t)-e(L))/R)/P},z=(t(1)-L)/C;if(Math.abs(P)<1e-6||!isFinite(z)){if(Math.abs(k-M)<1e-6)return this.easeTo(o,a);var F=M<k?-1:1;z=Math.abs(Math.log(M/k))/C,N=function(){return 0},D=function(t){return Math.exp(F*C*t)}}if("duration"in o)o.duration=+o.duration;else{var B="screenSpeed"in o?+o.screenSpeed/C:+o.speed;o.duration=1e3*z/B}return o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this.zooming=!0,this.rotating=l!==g,this.pitching=y!==f,this.padding=!u.isPaddingEqual(b),this.prepareEase(a,!1),this.ease(function(t){var e=t*z,n=1/D(e);u.zoom=1===t?v:c+u.scaleZoom(n),i.rotating&&(u.bearing=Object(_.e)(l,g,t)),i.pitching&&(u.pitch=Object(_.e)(f,y,t)),i.padding&&(u.interpolatePadding(h,b,t),E=u.centerPoint.add(w));var r=1===t?O:u.unproject(T.add(A.mult(N(e))).mult(n));u.setLocationAtPoint(u.renderWorldCopies?r.wrap():r,E),i.fireMoveEvents(a)},function(){return i.afterEase(a)},o),this}},{key:"fitScreenCoordinates",value:function(t,e,n,r,i){return this.fitInternal(this.cameraForBoxAndBearing(this.transform.pointLocation(m.a.convert(t)),this.transform.pointLocation(m.a.convert(e)),n,r),r,i)}},{key:"stop",value:function(t,e){if(this.easeFrameId&&(this.cancelRenderFrame(this.easeFrameId),delete this.easeFrameId,delete this.onEaseFrame),this.onEaseEnd){var n=this.onEaseEnd;delete this.onEaseEnd,n.call(this,e)}return this}},{key:"normalizeBearing",value:function(t,e){t=Object(_.j)(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t}},{key:"normalizeCenter",value:function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}}},{key:"fireMoveEvents",value:function(t){this.emit("move",new y.a("move",t)),this.zooming&&this.emit("zoom",new y.a("zoom",t)),this.rotating&&this.emit("rotate",new y.a("rotate",t)),this.pitching&&this.emit("rotate",new y.a("pitch",t))}},{key:"prepareEase",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.moving=!0,e||n.moving||this.emit("movestart",new y.a("movestart",t)),this.zooming&&!n.zooming&&this.emit("zoomstart",new y.a("zoomstart",t)),this.rotating&&!n.rotating&&this.emit("rotatestart",new y.a("rotatestart",t)),this.pitching&&!n.pitching&&this.emit("pitchstart",new y.a("pitchstart",t))}},{key:"afterEase",value:function(t,e){if(!this.easeId||!e||this.easeId!==e){delete this.easeId;var n=this.zooming,r=this.rotating,i=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.padding=!1,n&&this.emit("zoomend",new y.a("zoomend",t)),r&&this.emit("rotateend",new y.a("rotateend",t)),i&&this.emit("pitchend",new y.a("pitchend",t)),this.emit("moveend",new y.a("moveend",t))}}},{key:"ease",value:function(t,e,n){!1===n.animate||0===n.duration?(t(1),e()):(this.easeStart=Object(_.f)(),this.easeOptions=n,this.onEaseFrame=t,this.onEaseEnd=e,this.easeFrameId=this.requestRenderFrame(this.renderFrameCallback))}},{key:"cameraForBoxAndBearing",value:function(t,e,n,r){var i={top:0,bottom:0,right:0,left:0};if(r=Object(p.merge)({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},r),"number"===typeof r.padding){var o=r.padding;r.padding={top:o,bottom:o,right:o,left:o}}r.padding=Object(p.merge)(i,r.padding);var a=this.transform,s=a.padding,u=a.project(d.a.convert(t)),c=a.project(d.a.convert(e)),l=u.rotate(-n*Math.PI/180),f=c.rotate(-n*Math.PI/180),h=new m.a(Math.max(l.x,f.x),Math.max(l.y,f.y)),v=new m.a(Math.min(l.x,f.x),Math.min(l.y,f.y)),g=h.sub(v),y=(a.width-(s.left+s.right+r.padding.left+r.padding.right))/g.x,_=(a.height-(s.top+s.bottom+r.padding.top+r.padding.bottom))/g.y;if(!(_<0||y<0)){var b=Math.min(a.scaleZoom(a.scale*Math.min(y,_)),r.maxZoom),x=m.a.convert(r.offset),w=(r.padding.left-r.padding.right)/2,E=(r.padding.top-r.padding.bottom)/2,S=new m.a(x.x+w,x.y+E),O=S.mult(a.scale/a.zoomScale(b));return{center:a.unproject(u.add(c).div(2).sub(O)),zoom:b,bearing:n}}}},{key:"fitInternal",value:function(t,e,n){return t?(e=Object(p.merge)(t,e),delete e.padding,e.linear?this.easeTo(e,n):this.flyTo(e,n)):this}}]),e}(h.EventEmitter)},function(t,e,n){"use strict";function r(t){return d*Math.cos(t*Math.PI/180)}function i(t){return(180+t)/360}function o(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function a(t,e){return t/r(e)}function s(t){return 360*t-180}function u(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function c(t,e){return t*r(u(e))}function l(t){return 1/Math.cos(t*Math.PI/180)}e.c=i,e.d=o,e.e=a,n.d(e,"b",function(){return v}),n.d(e,"a",function(){return v});var f=n(0),h=n(1),p=n(112),d=2*Math.PI*p.b,v=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(f.a)(this,t),this.x=+e,this.y=+n,this.z=+r}return Object(h.a)(t,[{key:"toLngLat",value:function(){return new p.a(s(this.x),u(this.y))}},{key:"toAltitude",value:function(){return c(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/d*l(u(this.y))}}],[{key:"fromLngLat",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=p.a.convert(e);return new t(i(r.lng),o(r.lat),a(n,r.lat))}}]),t}()},function(t,e,n){var r=n(291),i=n(143),o=r(i,"Map");t.exports=o},function(t,e,n){var r=n(143),i=r.Symbol;t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(80))},function(t,e,n){function r(t,e,n){(void 0===n||o(t[e],n))&&(void 0!==n||e in t)||i(t,e,n)}var i=n(293),o=n(202);t.exports=r},function(t,e,n){var r=n(291),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){var r=n(1018),i=r(Object.getPrototypeOf,Object);t.exports=i},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e,n){var r=n(1019),i=n(164),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e,n){(function(t){var r=n(143),i=n(1021),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?r.Buffer:void 0,c=u?u.isBuffer:void 0,l=c||i;t.exports=l}).call(e,n(189)(t))},function(t,e,n){var r=n(1023),i=n(1024),o=n(1025),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},function(t,e){function n(t,e){if(("constructor"!==e||"function"!==typeof t[e])&&"__proto__"!=e)return t[e]}t.exports=n},function(t,e,n){function r(t){return a(t)?i(t,!0):o(t)}var i=n(1029),o=n(1031),a=n(294);t.exports=r},function(t,e){function n(t,e){var n=typeof t;return!!(e=null==e?r:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e){function n(t){return t}t.exports=n},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}var s=n(15),u=n(0),c=n(1),l=n(6),f=n(9),h=n(19),p=(n.n(h),n(64)),d=n(115),v=n(1042),m=n(1046),g=n(1047),y=n(113),_=n(1048),b=n(1049),x=n(1050),w=n(1051),E=n(1052),S=n(1056),O=n(1057),T=n(1058),A=n(1059),C=n(1060),k=n(1061),M=n(1062),P=n(1063),j=function(t){return t.zoom||t.drag||t.pitch||t.rotate},I=function(){function t(e,n){var i=this;Object(u.a)(this,t),Object(l.a)(this,"handleWindowEvent",function(t){i.handleEvent(t,"".concat(t.type,"Window"))}),Object(l.a)(this,"handleEvent",function(t,e){if("blur"===t.type)return void i.stop();i.updatingCamera=!0;var n,o="renderFrame"===t.type?void 0:t,s={needsRenderFrame:!1},u={},c={},l=t.touches?i.getMapTouches(t.touches):void 0,f=l?d.a.touchPos(i.el,l):d.a.mousePos(i.el,t),h=r(i.handlers);try{for(h.s();!(n=h.n()).done;){var p=n.value,v=p.handlerName,m=p.handler,g=p.allowed;if(m.isEnabled()){var y=void 0;if(i.blockedByActive(c,g,v))m.reset();else{var _=e||t.type;m&&m[_]&&(y=m[_](t,f,l),i.mergeIHandlerResult(s,u,y,v,o),y&&y.needsRenderFrame&&i.triggerRenderFrame())}(y||m.isActive())&&(c[v]=m)}}}catch(t){h.e(t)}finally{h.f()}var b={};for(var x in i.previousActiveHandlers)c[x]||(b[x]=o);i.previousActiveHandlers=c,(Object.keys(b).length||a(s))&&(i.changes.push([s,u,b]),i.triggerRenderFrame()),(Object.keys(c).length||a(s))&&i.map.stop(!0),i.updatingCamera=!1;var w=s.cameraAnimation;w&&(i.inertia.clear(),i.fireEvents({},{}),i.changes=[],w(i.map))}),this.map=e,this.el=this.map.getCanvasContainer(),this.handlers=[],this.handlersById={},this.changes=[],this.inertia=new b.a(e),this.bearingSnap=n.bearingSnap,this.rotateEnabled=n.rotateEnabled,this.pitchEnabled=n.pitchEnabled,this.previousActiveHandlers={},this.eventsInProgress={},this.addDefaultHandlers(n);var o=this.el;if(this.listeners=[],f.K)f.a.document.addEventListener("touchstart",function(t){i.handleEvent(t)},{}),f.a.document.addEventListener("touchmove",function(t){i.handleEvent(t)},{}),f.a.document.addEventListener("touchend",function(t){i.handleEvent(t)},{}),f.a.document.addEventListener("touchcancel",function(t){i.handleEvent(t)},{});else{this.listeners=[[o,"touchstart",{passive:!1}],[o,"touchmove",{passive:!1}],[o,"touchend",void 0],[o,"touchcancel",void 0],[o,"mousedown",void 0],[o,"mousemove",void 0],[o,"mouseup",void 0],[window.document,"mousemove",{capture:!0}],[window.document,"mouseup",void 0],[o,"mouseover",void 0],[o,"mouseout",void 0],[o,"dblclick",void 0],[o,"click",void 0],[o,"keydown",{capture:!1}],[o,"keyup",void 0],[o,"wheel",{passive:!1}],[o,"contextmenu",void 0],[window,"blur",void 0]];var c,h=r(this.listeners);try{for(h.s();!(c=h.n()).done;){var p=Object(s.a)(c.value,3),v=p[0],m=p[1],g=p[2];d.a.addEventListener(v,m,v===window.document?this.handleWindowEvent:this.handleEvent,g)}}catch(t){h.e(t)}finally{h.f()}}}return Object(c.a)(t,[{key:"destroy",value:function(){var t,e=r(this.listeners);try{for(e.s();!(t=e.n()).done;){var n=Object(s.a)(t.value,3),i=n[0],o=n[1],a=n[2];d.a.removeEventListener(i,o,i===window.document?this.handleWindowEvent:this.handleEvent,a)}}catch(t){e.e(t)}finally{e.f()}}},{key:"stop",value:function(){if(!this.updatingCamera){var t,e=r(this.handlers);try{for(e.s();!(t=e.n()).done;){t.value.handler.reset()}}catch(t){e.e(t)}finally{e.f()}this.inertia.clear(),this.fireEvents({},{}),this.changes=[]}}},{key:"isActive",value:function(){var t,e=r(this.handlers);try{for(e.s();!(t=e.n()).done;){if(t.value.handler.isActive())return!0}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"isZooming",value:function(){return!!this.eventsInProgress.zoom||this.map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this.eventsInProgress.rotate}},{key:"isMoving",value:function(){return Boolean(j(this.eventsInProgress))||this.isZooming()}},{key:"mergeIHandlerResult",value:function(t,e,n,r,i){if(n){Object(h.merge)(t,n);var o={handlerName:r,originalEvent:n.originalEvent||i};void 0!==n.zoomDelta&&(e.zoom=o),void 0!==n.panDelta&&(e.drag=o),void 0!==n.pitchDelta&&(e.pitch=o),void 0!==n.bearingDelta&&(e.rotate=o)}}},{key:"triggerRenderFrame",value:function(){var t=this;void 0===this.frameId&&(this.frameId=this.map.requestRenderFrame(function(e){delete t.frameId,t.handleEvent(new _.a("renderFrame",{timeStamp:e})),t.applyChanges()}))}},{key:"addDefaultHandlers",value:function(t){var e=this.map,n=e.getCanvasContainer();this.add("mapEvent",new w.a(e,t));var r=e.boxZoom=new m.a(e,t);this.add("boxZoom",r);var i=new M.a,o=new g.a;e.doubleClickZoom=new O.a(o,i),this.add("tapZoom",i),this.add("clickZoom",o);var a=new k.a;this.add("tapDragZoom",a);var s=e.touchPitch=new P.b;this.add("touchPitch",s);var u=new E.c(t),c=new E.b(t);e.dragRotate=new A.a(t,u,c),this.add("mouseRotate",u,["mousePitch"]),this.add("mousePitch",c,["mouseRotate"]);var l=new E.a(t),f=new P.a(t);e.dragPan=new T.a(n,l,f),this.add("mousePan",l),this.add("touchPan",f,["touchZoom","touchRotate"]);var h=new P.c,p=new P.d;e.touchZoomRotate=new C.a(n,p,h,a),this.add("touchRotate",h,["touchPan","touchZoom"]),this.add("touchZoom",p,["touchPan","touchRotate"]);var d=e.scrollZoom=new S.a(e,this);this.add("scrollZoom",d,["mousePan"]);var y=e.keyboard=new x.a;this.add("keyboard",y),this.add("blockableMapEvent",new v.a(e));for(var _=0,b=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];_<b.length;_++){var j=b[_];t.interactive&&t[j]&&e[j].enable(t[j])}}},{key:"add",value:function(t,e,n){this.handlers.push({handlerName:t,handler:e,allowed:n}),this.handlersById[t]=e}},{key:"blockedByActive",value:function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1}},{key:"getMapTouches",value:function(t){var e,n=[],i=r(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=o.target;(f.K||this.el.contains(a))&&n.push(o)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"applyChanges",value:function(){var t,e={},n={},i={},o=r(this.changes);try{for(o.s();!(t=o.n()).done;){var a=Object(s.a)(t.value,3),u=a[0],c=a[1],l=a[2];u.panDelta&&(e.panDelta=(e.panDelta||new p.a(0,0))._add(u.panDelta)),u.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+u.zoomDelta),u.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+u.bearingDelta),u.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+u.pitchDelta),void 0!==u.around&&(e.around=u.around),void 0!==u.pinchAround&&(e.pinchAround=u.pinchAround),u.noInertia&&(e.noInertia=u.noInertia),Object(h.merge)(n,c),Object(h.merge)(i,l)}}catch(t){o.e(t)}finally{o.f()}this.updateMapTransform(e,n,i),this.changes=[]}},{key:"updateMapTransform",value:function(t,e,n){var r=this.map,i=r.transform;if(!a(t))return this.fireEvents(e,n);var o=t.panDelta,s=t.zoomDelta,u=t.bearingDelta,c=t.pitchDelta,l=t.pinchAround,f=t.around;void 0!==l&&(f=l),r.stop(!0),f=f||r.transform.centerPoint;var h=i.pointLocation(o?f.sub(o):f);u&&this.rotateEnabled&&(i.bearing+=u),c&&this.pitchEnabled&&(i.pitch+=c),s&&(i.zoom+=s),i.setLocationAtPoint(h,f),this.map.update(),t.noInertia||this.inertia.record(t),this.fireEvents(e,n)}},{key:"fireEvents",value:function(t,e){var n=this,r=j(this.eventsInProgress),i=j(t),o={};for(var a in t)if(t[a]){var s=t[a].originalEvent;this.eventsInProgress[a]||(o["".concat(a,"start")]=s),this.eventsInProgress[a]=t[a]}!r&&i&&this.fireEvent("movestart",i.originalEvent);for(var u in o)o[u]&&this.fireEvent(u,o[u]);t.rotate&&(this.bearingChanged=!0),i&&this.fireEvent("move",i.originalEvent);for(var c in t)if(t[c]){var l=t[c].originalEvent;this.fireEvent(c,l)}var f,h={};for(var p in this.eventsInProgress)if(this.eventsInProgress[p]){var d=this.eventsInProgress[p],v=d.handlerName,m=d.originalEvent;this.handlersById[v].isActive()||(delete this.eventsInProgress[p],f=e[v]||m,h["".concat(p,"end")]=f)}for(var g in h)h[g]&&this.fireEvent(g,h[g]);var _=j(this.eventsInProgress);if((r||i)&&!_){this.updatingCamera=!0;var b=this.inertia.onMoveEnd(this.map.dragPan.inertiaOptions),x=function(t){return 0!==t&&-n.bearingSnap<t&&t<n.bearingSnap};b?(x(b.bearing||this.map.getBearing())&&(b.bearing=0),this.map.easeTo(b,{originalEvent:f})):(this.map.emit("moveend",new y.a("moveend",{originalEvent:f})),x(this.map.getBearing())&&this.map.resetNorth()),this.bearingChanged=!1,this.updatingCamera=!1}}},{key:"fireEvent",value:function(t,e){this.map.emit(t,new y.a(t,e?{originalEvent:e}:{}))}}]),t}();e.a=I},function(t,e,n){"use strict";var r=n(1043),i=n(1044),o=n(1045);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return o.a})},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e,n=new c.a(0,0),i=r(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;n._add(o)}}catch(t){i.e(t)}finally{i.f()}return n.div(t.length)}n.d(e,"b",function(){return f}),n.d(e,"a",function(){return h}),n.d(e,"c",function(){return p});var s=n(0),u=n(1),c=n(64),l=n(468),f=500,h=30,p=function(){function t(e){Object(s.a)(this,t),this.reset(),this.numTouches=e.numTouches}return Object(u.a)(t,[{key:"reset",value:function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}},{key:"touchstart",value:function(t,e,n){(this.centroid||n.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),n.length===this.numTouches&&(this.centroid=a(e),this.touches=Object(l.a)(n,e)))}},{key:"touchmove",value:function(t,e,n){if(!this.aborted&&this.centroid){var r=Object(l.a)(n,e);for(var i in this.touches)if(this.touches[i]){var o=this.touches[i],a=r[i];(!a||a.dist(o)>h)&&(this.aborted=!0)}}}},{key:"touchend",value:function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}()},function(t,e,n){"use strict";function r(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(467),a=function(){function t(e){Object(r.a)(this,t),this.singleTap=new o.c(e),this.numTaps=e.numTaps,this.reset()}return Object(i.a)(t,[{key:"reset",value:function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(t,e,n){this.singleTap.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.singleTap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<o.b,a=!this.lastTap||this.lastTap.dist(r)<o.a;if(i&&a||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(9),i=null,o=[],a=r.a.performance,s={create:"create",load:"load",fullLoad:"fullLoad"},u={mark:function(t){a.mark(t)},frame:function(t){var e=t;if(null!=i){var n=e-i;o.push(n)}i=e},clearMetrics:function(){i=null,o=[],a.clearMeasures("loadTime"),a.clearMeasures("fullLoadTime");for(var t in s)a.clearMarks(s[t])},getPerformanceMetrics:function(){var t=a.measure("loadTime",s.create,s.load).duration,e=a.measure("fullLoadTime",s.create,s.fullLoad).duration,n=o.length,r=o.reduce(function(t,e){return t+e},0)/n/1e3,i=1/r,u=o.filter(function(t){return t>1e3/30}).reduce(function(t,e){return t+(e-1e3/30)/(1e3/30)},0);return{loadTime:t,fullLoadTime:e,fps:i,percentDroppedFrames:u/(n+u)*100}}}},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=n(0),s=n(1),u=function(){function t(){Object(a.a)(this,t),this.queue=[],this.id=0,this.cleared=!1,this.currentlyRunning=!1}return Object(s.a)(t,[{key:"add",value:function(t){var e=++this.id;return this.queue.push({callback:t,id:e,cancelled:!1}),e}},{key:"remove",value:function(t){var e,n=this.currentlyRunning,i=n?this.queue.concat(n):this.queue,o=r(i);try{for(o.s();!(e=o.n()).done;){var a=e.value;if(a.id===t)return void(a.cancelled=!0)}}catch(t){o.e(t)}finally{o.f()}}},{key:"run",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.currentlyRunning=this.queue;this.queue=[];var n,i=r(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!o.cancelled&&(o.callback(t),this.cleared))break}}catch(t){i.e(t)}finally{i.f()}this.cleared=!1,this.currentlyRunning=!1}},{key:"clear",value:function(){this.currentlyRunning&&(this.cleared=!0),this.queue=[]}}]),t}();e.a=u},function(t,e,n){"use strict";function r(t){return t.map(function(t){return"string"===typeof t&&(t=[t,{}]),t})}function i(t,e,n,i){var a=t.multiPassRenderer;return t.getLayerConfig().enableTAA?a.add(i("taa")):a.add(i("render")),r(e).forEach(function(t){var e=Object(o.a)(t,2),r=e[0],i=e[1];a.add(n(r),i)}),a.add(n("copy")),a}e.b=r,e.a=i;var o=n(15)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1103),g=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"type","ImageLayer"),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new m.a[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getDefaultConfig",value:function(){return{image:{}}[this.getModelType()]}},{key:"getModelType",value:function(){return"image"}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return x});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(116),_='\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\n\nuniform float u_heightfixed: 0.0;\nuniform float u_vertexScale: 1.0;\nuniform float u_raisingHeight: 0.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\n\n// texV \u7ebf\u56fe\u5c42 - \u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\uff08\u7ebf\u7684\u5bbd\u5ea6\u65b9\u5411\uff09\nvarying vec2 v_iconMapUV;\n\n\nuniform float u_linearColor: 0;\nuniform float u_arrow: 0.0;\nuniform float u_arrowHeight: 3.0;\nuniform float u_arrowWidth: 2.0;\nuniform float u_tailWidth: 1.0;\n\nvarying vec4 v_texture_data;\n\nvec2 calculateArrow(vec2 offset) {\n  /*\n  * \u5728\u652f\u6301\u7bad\u5934\u7684\u65f6\u5019\uff0c\u7b2c\u4e8c\u3001\u7b2c\u4e09\u7ec4\u9876\u70b9\u662f\u989d\u5916\u63d2\u5165\u7528\u4e8e\u6784\u5efa\u9876\u70b9\u7684\n  */\n  float arrowFlag = -1.0;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // \u9ad8\u5fb7 2.0 \u7684\u65cb\u8f6c\u89d2\u5ea6\u4e0d\u540c\n    arrowFlag = 1.0;\n  }\n  float pi = arrowFlag * 3.1415926/2.;\n  if(a_Miter < 0.) {\n    // \u6839\u636e\u7ebf\u7684\u4e24\u4fa7\u504f\u79fb\u4e0d\u540c\u3001\u65cb\u8f6c\u7684\u65b9\u5411\u76f8\u53cd\n    pi = -pi;\n  }\n  highp float angle_sin = sin(pi);\n  highp float angle_cos = cos(pi);\n  // \u8ba1\u7b97\u5782\u76f4\u4e0e\u7ebf\u65b9\u5411\u7684\u65cb\u8f6c\u77e9\u9635\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float arrowWidth = u_arrowWidth;\n  float arrowHeight = u_arrowHeight;\n\n  vec2 arrowOffset = vec2(0.0);\n  /*\n  * a_DistanceAndIndex.y \u7528\u4e8e\u6807\u8bb0\u5f53\u524d\u9876\u70b9\u5c5e\u4e8e\u54ea\u4e00\u7ec4\uff08\u4e24\u4e2a\u9876\u70b9\u4e00\u7ec4\uff0c\u6784\u6210\u7ebf\u7684\u5176\u5b9e\u662f\u77e9\u5f62\uff0c\u6700\u7b80\u9700\u8981\u56db\u4e2a\u9876\u70b9\u3001\u4e24\u7ec4\u9876\u70b9\u6784\u6210\uff09\n  */\n  if(a_DistanceAndIndex.y == 0.0) {\n    // \u7bad\u5934\u5c16\u90e8\n    offset = vec2(0.0);\n  } else if(a_DistanceAndIndex.y == 1.0) {\n    // \u7bad\u5934\u4e24\u4fa7\n    arrowOffset = rotation_matrix*(offset * arrowHeight);\n    offset += arrowOffset; // \u6cbf\u7ebf\u504f\u79fb\n    offset = offset * arrowWidth; // \u5782\u76f4\u7ebf\u5411\u5916\u504f\u79fb\uff08\u662f\u6784\u5efa\u7bad\u5934\u4e24\u4fa7\u7684\u9876\u70b9\uff09\n  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {\n    // \u504f\u79fb\u5176\u4f59\u7684\u70b9\u4f4d\uff08\u5c06\u957f\u5ea6\u8ba9\u4f4d\u7ed9\u7bad\u5934\uff09\n    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;\n    offset += arrowOffset;// \u6cbf\u7ebf\u504f\u79fb\n  }\n\n  return offset;\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  \n  float d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n\n  v_iconMapUV = a_iconMapUV;\n  d_texPixelLen = project_float_pixel(u_icon_step);\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    d_texPixelLen *= 10.0;\n  }\n\n  v_color = a_Color;\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n \n  if(u_arrow > 0.0) {\n      //  \u8ba1\u7b97\u7bad\u5934\n    offset = calculateArrow(offset);\n\n    if(a_DistanceAndIndex.y > 4.0) {\n      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);\n    }\n  }\n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n  float texV = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n  \n  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    h *= 0.2;\n    if(u_heightfixed < 1.0) {\n      lineHeight = project_pixel(a_Size.y);\n    }\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));\n  } else {\n    // mapbox -  amap\n    \n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // mapbox\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      h *= mapboxZoomScale;\n      h += u_raisingHeight * mapboxZoomScale;\n      if(u_heightfixed > 0.0) {\n        lineHeight *= mapboxZoomScale;\n      }\n      \n    } else {\n      // amap\n      h += u_raisingHeight;\n      // lineHeight \u9876\u70b9\u504f\u79fb\u9ad8\u5ea6\n      if(u_heightfixed < 1.0) {\n        lineHeight *= pow(2.0, 20.0 - u_Zoom);\n      }\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',b={solid:0,dash:1},x=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"textureEventFlag",!1),Object(h.a)(Object(u.a)(t),"texture",t.createTexture2D({data:[0,0,0,0],mag:v.t.NEAREST,min:v.t.NEAREST,premultiplyAlpha:!1,width:1,height:1})),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:v.t.NEAREST,min:v.t.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5,0,0]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.vertexHeightScale,g=void 0===v?20:v,_=t.borderWidth,x=void 0===_?0:_,w=t.borderColor,E=void 0===w?"#ccc":w,S=t.raisingHeight,O=void 0===S?0:S,T=t.heightfixed,A=void 0!==T&&T,C=t.linearDir,k=void 0===C?y.b.VERTICAL:C,M=t.blur,P=void 0===M?[1,1,1]:M,j=t.arrow,I=void 0===j?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:j;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture&&this.texture.bind();var R=0,L=[0,0,0,0],D=[0,0,0,0];return r&&i&&(L=Object(m.T)(r),D=Object(m.T)(i),R=1),{u_opacity:n,u_textureBlend:a===y.d.NORMAL?0:1,u_line_type:b[u],u_dash_array:l,u_blur:P,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:x,u_borderColor:Object(m.T)(E),u_linearDir:k===y.b.VERTICAL?1:0,u_linearColor:R,u_sourceColor:L,u_targetColor:D,u_heightfixed:Number(A),u_vertexScale:g,u_raisingHeight:Number(O),u_arrow:Number(I.enable),u_arrowHeight:I.arrowHeight||3,u_arrowWidth:I.arrowWidth||2,u_tailWidth:void 0===I.tailWidth?1:I.tailWidth}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.textureEventFlag||(this.textureEventFlag=!0,this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture)),t.abrupt("return",this.buildModels());case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i,o,a,s,u;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.depth,r=void 0!==n&&n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,this.layer.triangulation=m.e,t.next=5,this.layer.buildLayerModel({moduleName:"line"+s,vertexShader:a,fragmentShader:o,triangulation:m.e,depth:{enable:r}});case 5:return u=t.sent,t.abrupt("return",[u]);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return"dash"===t.lineType?{frag:'#define LineTypeSolid 0.0\nvarying vec4 v_color;\n\n// dash\nvarying vec4 v_dash_array;\nvarying float v_d_distance_ratio;\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\n// [animate, duration, interval, trailLength],\nvoid main() {\n\n  gl_FragColor = v_color;\n\n \n  float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n    // \u5b9e\u7ebf\u90e8\u5206\n  } else {\n    // \u865a\u7ebf\u90e8\u5206\n    discard;\n  };\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nattribute vec2 a_iconMapUV;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\n\nuniform float u_vertexScale: 1.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvarying vec4 v_color;\nvarying vec4 v_dash_array;\nvarying float v_d_distance_ratio;\n\nuniform float u_opacity: 1.0;\n\nvoid main() {\n\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;\n  v_color = vec4(a_Color.xyz, a_Color.w * u_opacity);\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  vec2 offset = project_pixel(size.xy);\n  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;\n\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, project_pixel(a_Size.y), 1.0));\n  } else {\n    float lineHeight = a_Size.y;\n \n    // #define COORDINATE_SYSTEM_P20 5.0\n    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0\n    // amap1.x\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      lineHeight *= pow(2.0, 20.0 - u_Zoom);\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',type:"Dash"}:e&&n?{frag:'varying vec4 v_color;\nvarying vec4 v_texture_data;\nuniform float u_linearDir: 1.0;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_opacity: 1.0;\n\n#pragma include "picking"\n\n\nvoid main() {\n  float linearRadio = v_texture_data.r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  if(u_linearDir < 1.0) {\n    linearRadio = v_texture_data.a;\n  }\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, linearRadio);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= u_opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:_,type:"Linear"}:{frag:'#extension GL_OES_standard_derivatives : enable\n#define Animate 0.0\n#define LineTexture 1.0\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\n\nuniform float u_borderWidth: 0.0;\n\nuniform vec3 u_blur;\nuniform vec4 u_borderColor;\nvarying vec4 v_color;\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_texture_data;\n\n\n#pragma include "picking"\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1, 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n// [animate, duration, interval, trailLength],\nvoid main() {\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = v_texture_data.r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n  // anti-alias\n  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= u_opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = v_texture_data.g;      // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n    float d_texPixelLen = v_texture_data.b;  // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = v_texture_data.a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    // v = max(smoothstep(0.95, 1.0, v), v);\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n     vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor += pattern;\n    } else { // replace\n        pattern.a *= u_opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = pattern;\n    }\n  } \n\n  float v = v_texture_data.a;\n  float borderWidth = min(0.5, u_borderWidth);\n  // \u7ed8\u5236 border\n  if(borderWidth > 0.01) {\n    float borderOuterWidth = borderWidth / 2.0;\n\n\n    if(v >= 1.0 - borderWidth || v <= borderWidth) {\n      if(v > borderWidth) { // \u5916\u4fa7\n        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);\n        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);\n        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);\n      } else if(v <= borderWidth) {\n        float linear = smoothstep(0.0, 1.0, v/borderWidth);\n        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);\n      }\n    }\n\n    if(v < borderOuterWidth) {\n      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);\n    } else if(v > 1.0 - borderOuterWidth) {\n      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);\n    }\n  }\n\n  // blur\n  float blurV = v_texture_data.a;\n  if(blurV < 0.5) {\n    gl_FragColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);\n  } else {\n    gl_FragColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);\n  }\n  \n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:_,type:""}}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:v.a.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t,e,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:v.a.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:v.a.Attribute,descriptor:{name:"a_Miter",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0};return[i.x,i.y]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return _});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(22),_=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"raiseCount",0),Object(h.a)(Object(u.a)(t),"raiseRepeat",0),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1,speed:.01,repeat:!1}:e,r=t.opacity,i=void 0===r?1:r,o=t.sourceColor,a=t.targetColor,s=t.pickLight,u=void 0!==s&&s,c=t.heightfixed,l=void 0!==c&&c,f=t.opacityLinear,h=void 0===f?{enable:!1,dir:"up"}:f,p=t.lightEnable,d=void 0===p||p,v=0,g=[0,0,0,0],y=[0,0,0,0];if(o&&a&&(g=Object(m.T)(o),y=Object(m.T)(a),v=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){var _=n.speed,b=void 0===_?.01:_;this.raiseCount+=b,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(u),u_heightfixed:Number(l),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:i,u_linearColor:v,u_sourceColor:g,u_targetColor:y,u_opacitylinear:Number(h.enable),u_opacitylinear_dir:"up"===h.dir?1:0,u_lightEnable:Number(d)}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i,o,a;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.depth,r=void 0===n||n,i=e.animateOption.repeat,o=void 0===i?1:i,this.raiseRepeat=o,t.next=4,this.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:'precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_r;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\nvarying float v_lightWeight;\nvarying float v_barLinearZ;\n\nuniform float u_opacity : 1;\nuniform float u_lightEnable: 1;\nuniform float u_opacitylinear: 0.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_opacitylinear_dir: 1.0;\nuniform float  u_linearColor: 0.0;\n\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) + \n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n\n  vec3 size = a_Size * a_Position;\n\n  vec3 offset = size; // \u63a7\u5236\u5706\u67f1\u4f53\u7684\u5927\u5c0f - \u4ece\u6807\u51c6\u5355\u4f4d\u5706\u67f1\u4f53\u8fdb\u884c\u504f\u79fb\n\n  if(u_heightfixed < 1.0) { // \u5706\u67f1\u4f53\u4e0d\u56fa\u5b9a\u9ad8\u5ea6\n    \n    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n      offset = offset * pow(2.0, (19.0 - u_Zoom));\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n      // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));\n    }\n  } else {// \u5706\u67f1\u4f53\u56fa\u5b9a\u9ad8\u5ea6 \uff08 \u5904\u7406 mapbox \uff09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63a7\u5236\u5706\u67f1\u7684\u751f\u957f\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // // \u5706\u67f1\u5149\u7167\u6548\u679c\n  float lightWeight = 1.0;\n\n  if(u_lightEnable > 0.0) { // \u53d6\u6d88\u4e09\u5143\u8868\u8fbe\u5f0f\uff0c\u589e\u5f3a\u5065\u58ee\u6027\n    lightWeight = calc_lighting(pos);\n  }\n\n  v_lightWeight = lightWeight;\n\n  v_color = a_Color;\n\n    // \u8bbe\u7f6e\u5706\u67f1\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);\n    v_color.a =  v_color.a * u_opacity;\n  } else {\n    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * u_opacity);\n  }\n\n    if(u_opacitylinear > 0.0) {\n    v_color.a *= u_opacitylinear_dir > 0.0 ? (1.0 - a_Position.z): a_Position.z;\n  }\n\n\n  // gl_Position = project_common_position_to_clipspace(pos);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * pos;\n  } else {\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'varying vec4 v_color;\nvarying float v_lightWeight;\nuniform float u_pickLight: 0.0;\n\n#pragma include "picking"\n\n\nvoid main() {\n\n  gl_FragColor = v_color;\n  // \u5f00\u542f\u900f\u660e\u5ea6\u6e10\u53d8\n  // picking\n  if(u_pickLight > 0.0) {\n    gl_FragColor = filterColorAlpha(gl_FragColor, v_lightWeight);\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',triangulation:y.g,cull:{enable:!0,face:Object(m.D)(this.mapService.version)},depth:{enable:r}});case 4:return a=t.sent,t.abrupt("return",[a]);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t){var e=t.size;if(e){var n=[];return Array.isArray(e)&&(n=2===e.length?[e[0],e[0],e[1]]:e),Array.isArray(e)||(n=[e,e,e]),n}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:v.a.Attribute,descriptor:{name:"a_Pos",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t){var e=Object(m.q)(t.coordinates);return[e[0],e[1],0]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(10),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(11),v=n(9),m=n(16),g=n(116),y="\nuniform float u_additive;\n\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\nvoid main() {\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  \n  outer_df = sdCircle(v_data.xy, 1.0);\n  inner_df = sdCircle(v_data.xy, r);\n\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n  float PI = 3.14159;\n  float N_RINGS = 3.0;\n  float FREQ = 1.0;\n\n  gl_FragColor = v_color;\n\n  float d = length(v_data.xy);\n  if(d > 0.5) {\n    discard;\n  }\n  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);\n  \n  // \u6839\u636e\u53e0\u52a0\u6a21\u5f0f\u9009\u62e9\u6548\u679c\n  if(u_additive > 0.0) {\n    gl_FragColor *= intensity;\n    // \u4f18\u5316\u6c34\u6ce2\u70b9 blend additive \u6a21\u5f0f\u4e0b\u6709\u7684\u62fe\u53d6\u6548\u679c \n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",_='attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform int u_size_unit;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec4 v_stroke;\n\n// uniform float u_opacity : 1;\nuniform float u_stroke_width: 2;\nuniform vec3 u_blur_height_fixed: [0, 0, 0];\n\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  // \u900f\u660e\u5ea6\u8ba1\u7b97\n  v_stroke = stroke;  \n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8bbe\u7f6e\u62fe\u53d6\u5927\u5c0f\n  *  u_meter2coord \u5728\u7b49\u9762\u79ef\u5927\u5c0f\u7684\u65f6\u5019\u8bbe\u7f6e\u5355\u4f4d\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n\n\n  // unpack color(vec2)\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n\n  if(u_size_unit == 1) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n\n   v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);\n\n  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);\n  vec3 aPosition = a_Position;\n\n  offset = project_pixel(offset);\n  \n  // TODP: /abs(extrude.x) \u662f\u4e3a\u4e86\u517c\u5bb9\u5730\u7403\u6a21\u5f0f\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n\n  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n\n  float raisingHeight = u_blur_height_fixed.y;\n\n  if(u_blur_height_fixed.z < 1.0) { // false\n    raisingHeight = project_pixel(u_blur_height_fixed.y);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;\n    }\n  }\n \n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position =  u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n \n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',b=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.strokeOpacity,n=void 0===e?1:e,r=t.strokeWidth,i=void 0===r?0:r,o=t.blend,s=t.blur,u=void 0===s?0:s,c=t.raisingHeight,l=void 0===c?0:c,f=t.heightfixed,h=void 0!==f&&f,p=t.unit,d=void 0===p?"pixel":p;return Object(a.a)({u_blur_height_fixed:[u,Number(l),Number(h)],u_additive:"additive"===o?1:0,u_stroke_opacity:n,u_stroke_width:i,u_size_unit:g.c[d]},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1}:e;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),v.f)}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){var e,n,r,i,o,a,s,u;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.animateOption,r=void 0===n?{enable:!1}:n,i=this.getShaders(r),o=i.frag,a=i.vert,s=i.type,this.layer.triangulation=v.f,t.next=5,this.layer.buildLayerModel({moduleName:s,vertexShader:a,fragmentShader:o,inject:this.getInject(),triangulation:v.f,depth:{enable:!1}});case 5:return u=t.sent,t.abrupt("return",[u]);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"getShaders",value:function(t){if(!t.enable)return{frag:"uniform float u_additive;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec4 v_stroke;\n\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(u_stroke_width < 0.01) {\n    gl_FragColor = v_color;\n  } else {\n    gl_FragColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n   // \u4f5c\u4e3a mask \u6a21\u677f\u65f6\u9700\u8981\u4e22\u5f03\u900f\u660e\u7684\u50cf\u7d20\n  if(gl_FragColor.a < 0.01) {\n    discard;\n  } \n}\n",vert:_,type:"pointFill"};switch(t.type){case"wave":default:return{frag:y,vert:_,type:"pointWave"}}}},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig().shape2d;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:d.a.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:d.t.DYNAMIC_DRAW,data:[],type:d.t.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:d.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:d.t.DYNAMIC_DRAW,data:[],type:d.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:d.a.Attribute,descriptor:{name:"a_Shape",buffer:{usage:d.t.DYNAMIC_DRAW,data:[],type:d.t.FLOAT},size:1,update:function(e){var n=e.shape,r=void 0===n?2:n;return[t.indexOf(r)]}}})}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(16),g=n(22),y=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),void setTimeout(function(){t.layerService.throttleRenderLayers()});t.texture=e({data:t.iconService.getCanvas(),mag:v.t.LINEAR,min:v.t.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128,mipmap:!0})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,i=void 0===r?[0,0]:r,o=t.raisingHeight,a=void 0===o?0:o,s=t.heightfixed,u=void 0!==s&&s;return this.rendererService.getDirty()&&this.texture.bind(),{u_raisingHeight:Number(a),u_heightfixed:Number(u),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:n,u_offsets:i}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:'precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec2 u_offsets;\n\nuniform float u_opacity : 1;\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\n\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  v_color = a_Color;\n  v_uv = a_Uv;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   \n  vec2 offset = project_pixel(u_offsets);\n\n  float raisingHeight = u_raisingHeight;\n  if(u_heightfixed < 1.0) { // false\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nuniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform vec2 u_textSize;\nuniform float u_opacity : 1;\n\n#pragma include "picking"\n\nvoid main(){\n      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;\n      vec4 textureColor;\n\n      // Y = 0.299R + 0.587G + 0.114B // \u4eae\u5ea6\u63d0\u53d6\n     \n      textureColor = texture2D(u_texture, pos);\n\n      // Tip: \u53bb\u9664\u8fb9\u7f18\u90e8\u5206 mipmap \u5bfc\u81f4\u7684\u6df7\u5408\u53d8\u6697\n      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);\n      if(fragmengTocenter >= 0.5) {\n            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;\n            textureColor.a *= luma;\n      }\n      \n      \n\n      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){\n            gl_FragColor= textureColor;\n      }else {\n            gl_FragColor= step(0.01, textureColor.z) * v_color;\n      }\n\n      gl_FragColor.a = gl_FragColor.a * u_opacity;\n      \n      if (gl_FragColor.a < 0.01) {\n         discard;\n      }\n      gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:g.i,depth:{enable:!1},primitive:v.t.POINTS});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.shape,i=n[r]||{x:-64,y:-64};return[i.x,i.y]}}})}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){var e=t.coordinates;return{vertices:Object(h.a)(e),indices:[0],size:e.length}}n.d(e,"a",function(){return y});var a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(20),p=n(8),d=n.n(p),v=n(11),m=n(19),g=(n.n(m),n(16)),y=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;return{u_opacity:Object(m.isNumber)(n)?n:1}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.triangulation=o,t.next=3,this.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:'\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform float u_opacity : 1;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\n\nvarying vec4 v_color;\n\n#pragma include "projection"\n#pragma include "project"\n\nvoid main() {\n  v_color = vec4(a_Color.xyz, a_Color.w * u_opacity);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(a_Position.xy, a_Position.z, 1.0);\n  } else {\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n}\n',fragmentShader:"varying vec4 v_color;\nvoid main() {\n  gl_FragColor = v_color;\n}\n",triangulation:o,depth:{enable:!1},primitive:v.t.POINTS,pick:!1});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=s();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t){var e=this,n=t.id,r=[],i=[];if(!e.glyphInfoMap||!e.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var o=e.glyphInfoMap[n].centroid,a=2===o.length?[o[0],o[1],0]:o;return e.glyphInfoMap[n].glyphQuads.forEach(function(t,e){r.push.apply(r,Object(y.a)(a).concat([t.tex.x,t.tex.y+t.tex.height,t.tl.x,t.tl.y],Object(y.a)(a),[t.tex.x+t.tex.width,t.tex.y+t.tex.height,t.tr.x,t.tr.y],Object(y.a)(a),[t.tex.x+t.tex.width,t.tex.y,t.br.x,t.br.y],Object(y.a)(a),[t.tex.x,t.tex.y,t.bl.x,t.bl.y])),i.push(0+4*e,1+4*e,2+4*e,2+4*e,3+4*e,0+4*e)}),{vertices:r,indices:i,size:7}}n.d(e,"a",function(){return k});var c=n(10),l=n(7),f=n(0),h=n(1),p=n(12),d=n(3),v=n(4),m=n(2),g=n(6),y=n(20),_=n(8),b=n.n(_),x=n(11),w=n(9),E=n(19),S=(n.n(E),n(16)),O=n(1120),T=n(1122),A='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 48.0\nuniform sampler2D u_sdf_map;\nuniform float u_gamma_scale : 0.5;\nuniform float u_stroke_width : 2.0;\nuniform float u_halo_blur : 0.5;\nuniform float u_DevicePixelRatio;\n\nvarying vec4 v_color;\nvarying vec4 v_stroke_color;\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying float v_fontScale;\n\n\n#pragma include "picking"\nvoid main() {\n  // get style data mapping\n\n  // get sdf from atlas\n  float dist = texture2D(u_sdf_map, v_uv).a;\n\n  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;\n  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;\n\n  highp float gamma_scaled = gamma * v_gamma_scale;\n\n  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n  gl_FragColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));\n\n  gl_FragColor.a *= alpha;\n   // \u4f5c\u4e3a mask \u6a21\u677f\u65f6\u9700\u8981\u4e22\u5f03\u900f\u660e\u7684\u50cf\u7d20\n  if (gl_FragColor.a < 0.01) {\n    discard;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',C='#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105\n#define FONT_SIZE 24.0\nattribute vec3 a_Position;\nattribute vec2 a_tex;\nattribute vec2 a_textOffsets;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute float a_Rotate;\n\nuniform vec2 u_sdf_map_size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec2 v_uv;\nvarying float v_gamma_scale;\nvarying vec4 v_color;\nvarying vec4 v_stroke_color;\nvarying float v_fontScale;\n// uniform float u_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  \n  v_uv = a_tex / u_sdf_map_size;\n\n\n\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);\n\n  // \u6587\u672c\u7f29\u653e\u6bd4\u4f8b\n  float fontScale = a_Size / FONT_SIZE;\n  v_fontScale = fontScale;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  \n  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n\n  float raiseHeight = u_raisingHeight;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    raiseHeight = u_raisingHeight * mapboxZoomScale;\n  }\n\n  vec4 projected_position;\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n   projected_position  = u_Mvp *(vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n  } else { // else\n   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));\n  }\n\n  gl_Position = vec4(\n    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);\n  v_gamma_scale = gl_Position.w;\n  setPickingColor(a_PickingColor);\n\n}\n',k=function(t){function e(){var t;Object(f.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(g.a)(Object(p.a)(t),"glyphInfoMap",{}),Object(g.a)(Object(p.a)(t),"currentZoom",-1),Object(g.a)(Object(p.a)(t),"textureHeight",0),Object(g.a)(Object(p.a)(t),"textCount",0),Object(g.a)(Object(p.a)(t),"preTextStyle",{}),Object(g.a)(Object(p.a)(t),"mapping",Object(l.a)(b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.initGlyph(),t.updateTexture(),e.next=4,t.reBuildModel();case 4:case"end":return e.stop()}},e)}))),t}Object(d.a)(e,t);var n=a(e);return Object(h.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=(t.opacity,t.stroke),n=void 0===e?"#fff":e,r=t.strokeWidth,i=void 0===r?0:r,o=t.halo,a=void 0===o?.5:o,s=t.gamma,u=void 0===s?2:s,l=t.raisingHeight,f=void 0===l?0:l,h=this.getFontServiceMapping(),p=this.getFontServiceCanvas();return h&&Object.keys(h).length!==this.textCount&&p&&(this.updateTexture(),this.textCount=Object.keys(h).length),this.preTextStyle=this.getTextStyle(),Object(c.a)({u_raisingHeight:Number(f),u_stroke_width:i,u_stroke_color:Object(w.T)(n),u_sdf_map:this.texture,u_halo_blur:a,u_gamma_scale:u,u_sdf_map_size:[(null===p||void 0===p?void 0:p.width)||1,(null===p||void 0===p?void 0:p.height)||1]},this.getStyleAttribute())}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(l.a)(b.a.mark(function t(){return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.bindEvent(),this.extent=this.textExtent(),this.rawEncodeData=this.layer.getEncodedData(),this.preTextStyle=this.getTextStyle(),t.abrupt("return",this.buildModels());case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(l.a)(b.a.mark(function t(){var e,n,r,i;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.textAllowOverlap,r=void 0!==n&&n,this.initGlyph(),this.updateTexture(),r||this.filterGlyphs(),t.next=6,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:C,fragmentShader:A,inject:this.getInject(),triangulation:u.bind(this),depth:{enable:!1}});case 6:return i=t.sent,t.abrupt("return",[i]);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"needUpdate",value:function(){function t(){return e.apply(this,arguments)}var e=Object(l.a)(b.a.mark(function t(){var e,n,r,i,o,a,s,u,c,l,f,h;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getTextStyle(),n=e.textAllowOverlap,r=void 0!==n&&n,i=e.textAnchor,o=void 0===i?"center":i,a=e.textOffset,s=e.padding,u=e.fontFamily,c=e.fontWeight,Object(E.isEqual)(s,this.preTextStyle.padding)&&Object(E.isEqual)(a,this.preTextStyle.textOffset)&&Object(E.isEqual)(o,this.preTextStyle.textAnchor)&&Object(E.isEqual)(u,this.preTextStyle.fontFamily)&&Object(E.isEqual)(c,this.preTextStyle.fontWeight)){t.next=5;break}return t.next=4,this.mapping();case 4:return t.abrupt("return",!0);case 5:if(!r){t.next=7;break}return t.abrupt("return",!1);case 7:if(l=this.mapService.getZoom(),f=this.mapService.getBounds(),h=Object(w.p)(this.extent,f),!(Math.abs(this.currentZoom-l)>.5)&&h&&r===this.preTextStyle.textAllowOverlap){t.next=14;break}return t.next=13,this.reBuildModel();case 13:return t.abrupt("return",!0);case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.layer.off("remapping",this.mapping)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:x.a.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:x.t.DYNAMIC_DRAW,data:[],type:x.t.FLOAT},size:1,update:function(t){var e=t.rotate,n=void 0===e?0:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:x.a.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:x.t.STATIC_DRAW,data:[],type:x.t.FLOAT},size:2,update:function(t,e,n){return[n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:x.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:x.t.DYNAMIC_DRAW,data:[],type:x.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?12:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:x.a.Attribute,descriptor:{name:"a_tex",buffer:{usage:x.t.DYNAMIC_DRAW,data:[],type:x.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}},{key:"bindEvent",value:function(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}},{key:"textExtent",value:function(){var t=this.mapService.getBounds();return Object(w.R)(t,.5)}},{key:"initTextFont",value:function(){var t=this.getTextStyle(),e=t.fontWeight,n=t.fontFamily,i=this.rawEncodeData,o=[];i.forEach(function(t){var e=t.shape,n=void 0===e?"":e;n=n.toString();var i,a=r(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;-1===o.indexOf(s)&&o.push(s)}}catch(t){a.e(t)}finally{a.f()}}),this.fontService.setFontOptions({characterSet:o,fontWeight:e,fontFamily:n,iconfont:!1})}},{key:"initIconFontTex",value:function(){var t=this.getTextStyle(),e=t.fontWeight,n=t.fontFamily,r=this.rawEncodeData,i=[];r.forEach(function(t){var e=t.shape,n=void 0===e?"":e;n="".concat(n),-1===i.indexOf(n)&&i.push(n)}),this.fontService.setFontOptions({characterSet:i,fontWeight:e,fontFamily:n,iconfont:!0})}},{key:"getTextStyle",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r,o=t.textAllowOverlap,a=void 0!==o&&o,s=t.padding,u=void 0===s?[0,0]:s,c=t.textAnchor,l=void 0===c?"center":c,f=t.textOffset,h=void 0===f?[0,0]:f,p=t.opacity,d=void 0===p?1:p,v=t.strokeOpacity,m=void 0===v?1:v,g=t.strokeWidth,y=void 0===g?0:g,_=t.stroke;return{fontWeight:n,fontFamily:i,textAllowOverlap:a,padding:u,textAnchor:l,textOffset:h,opacity:d,strokeOpacity:m,strokeWidth:y,stroke:void 0===_?"#000":_}}},{key:"generateGlyphLayout",value:function(t){var e=this,n=this.getFontServiceMapping(),r=this.layer.getLayerConfig(),i=r.spacing,o=void 0===i?2:i,a=r.textAnchor,s=void 0===a?"center":a,u=r.textOffset,c=this.rawEncodeData;this.glyphInfo=c.map(function(r){var i=r.shape,a=void 0===i?"":i,c=r.id,l=r.size,f=void 0===l?1:l,h=Object(T.b)(a.toString(),n,f,s,"left",o,u,t),p=Object(T.a)(h,u,!1);return r.shaping=h,r.glyphQuads=p,r.centroid=Object(w.q)(r.coordinates),r.originCentroid="GAODE2.x"===r.version?Object(w.q)(r.originCoordinates):r.originCentroid=r.centroid,e.glyphInfoMap[c]={shaping:h,glyphQuads:p,centroid:Object(w.q)(r.coordinates)},r})}},{key:"getFontServiceMapping",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r;return this.fontService.getMappingByKey("".concat(i,"_").concat(n))}},{key:"getFontServiceCanvas",value:function(){var t=this.layer.getLayerConfig(),e=t.fontWeight,n=void 0===e?"400":e,r=t.fontFamily,i=void 0===r?"sans-serif":r;return this.fontService.getCanvasByKey("".concat(i,"_").concat(n))}},{key:"filterGlyphs",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.padding,r=void 0===n?[0,0]:n,i=e.textAllowOverlap;if(void 0===i||!i){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var o=this.rendererService.getViewportSize(),a=o.width,s=o.height,u=new O.a(a,s);this.glyphInfo.filter(function(e){var n=e.shaping,i=e.id,o=void 0===i?0:i,a="GAODE2.x"===e.version?e.originCentroid:e.centroid,s=e.size,c=s/16,l=t.mapService.lngLatToContainer(a),f=u.placeCollisionBox({x1:n.left*c-r[0],x2:n.right*c+r[0],y1:n.top*c-r[1],y2:n.bottom*c+r[1],anchorPointX:l.x,anchorPointY:l.y}),h=f.box;return!(!h||!h.length)&&(u.insertCollisionBox(h,o),!0)}).forEach(function(e){t.glyphInfoMap[e.id]=e})}}},{key:"initGlyph",value:function(){var t=this.layer.getLayerConfig(),e=t.iconfont,n=void 0!==e&&e;n?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(n)}},{key:"updateTexture",value:function(){var t=this.rendererService.createTexture2D,e=this.getFontServiceCanvas();this.textureHeight=e.height,this.texture&&this.texture.destroy(),this.texture=t({data:e,mag:x.t.LINEAR,min:x.t.LINEAR,width:e.width,height:e.height})}},{key:"reBuildModel",value:function(){function t(){return e.apply(this,arguments)}var e=Object(l.a)(b.a.mark(function t(){var e;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.filterGlyphs(),t.next=3,this.layer.buildLayerModel({moduleName:"pointText",vertexShader:C,fragmentShader:A,triangulation:u.bind(this),inject:this.getInject(),depth:{enable:!1}});case 3:e=t.sent,this.layer.models=[e];case 5:case"end":return t.stop()}},t,this)}));return t}()}]),e}(S.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1137),g=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"type","MaskLayer"),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelType(),this.layerModel=new m.a[e](this),t.next=4,this.initLayerModels();case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getModelType",value:function(){return"fill"}}]),e}(v.a)},function(t,e,n){"use strict";var r=n(144),i=n(482),o=Object(i.a)(r.a),a=o.right;o.left;e.a=a},function(t,e,n){"use strict";function r(t){return function(e,n){return Object(i.a)(t(e),n)}}var i=n(144);e.a=function(t){return 1===t.length&&(t=r(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.a=r},function(t,e,n){"use strict";var r=n(485);e.a=function(t,e){var n=Object(r.a)(t,e);return n?Math.sqrt(n):n}},function(t,e,n){"use strict";var r=n(165);e.a=function(t,e){var n,i,o=t.length,a=0,s=-1,u=0,c=0;if(null==e)for(;++s<o;)isNaN(n=Object(r.a)(t[s]))||(i=n-u,u+=i/++a,c+=i*(n-u));else for(;++s<o;)isNaN(n=Object(r.a)(e(t[s],s,t)))||(i=n-u,u+=i/++a,c+=i*(n-u));if(a>1)return c/(a-1)}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i,o=t.length,a=-1;if(null==e){for(;++a<o;)if(null!=(n=t[a])&&n>=n)for(r=i=n;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++a<o;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=i=n;++a<o;)null!=(n=e(t[a],a,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=Array.prototype,i=r.slice,o=r.map},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}},function(t,e,n){"use strict";function r(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,i);return i>=0?(u>=o?10:u>=a?5:u>=s?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(u>=o?10:u>=a?5:u>=s?2:1)}function i(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=o?i*=10:u>=a?i*=5:u>=s&&(i*=2),e<t?-i:i}e.b=r,e.c=i;var o=Math.sqrt(50),a=Math.sqrt(10),s=Math.sqrt(2);e.a=function(t,e,n){var i,o,a,s,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(o=t,t=e,e=o),0===(s=r(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),a=new Array(o=Math.ceil(e-t+1));++u<o;)a[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),a=new Array(o=Math.ceil(t-e+1));++u<o;)a[u]=(t-u)/s;return i&&a.reverse(),a}},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i=t.length,o=-1;if(null==e){for(;++o<i;)if(null!=(n=t[o])&&n>=n)for(r=n;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else for(;++o<i;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=n;++o<i;)null!=(n=e(t[o],o,t))&&r>n&&(r=n);return r}},function(t,e,n){"use strict";function r(t){return t.length}var i=n(491);e.a=function(t){if(!(a=t.length))return[];for(var e=-1,n=Object(i.a)(t,r),o=new Array(n);++e<n;)for(var a,s=-1,u=o[e]=new Array(a);++s<a;)u[s]=t[s][e];return o}},function(t,e,n){"use strict";var r=n(301);n.d(e,"a",function(){return r.a});var i=(n(497),n(302),n(495),n(498),n(1164),n(1165),n(210));n.d(e,"b",function(){return i.a});var o=(n(303),n(499),n(1166));n.d(e,"d",function(){return o.a});var a=(n(500),n(1167),n(1170),n(494));n.d(e,"c",function(){return a.b});n(1171),n(1172),n(1173),n(1174),n(1175),n(1176)},function(t,e,n){"use strict";function r(t){return function(e){var n,r,o=e.length,a=new Array(o),s=new Array(o),u=new Array(o);for(n=0;n<o;++n)r=Object(i.f)(e[n]),a[n]=r.r||0,s[n]=r.g||0,u[n]=r.b||0;return a=t(a),s=t(s),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=s(t),r.b=u(t),r+""}}}n.d(e,"b",function(){return u});var i=n(107),o=n(302),a=n(495),s=n(145);e.a=function t(e){function n(t,e){var n=r((t=Object(i.f)(t)).r,(e=Object(i.f)(e)).r),o=r(t.g,e.g),a=r(t.b,e.b),u=Object(s.a)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}var r=Object(s.b)(e);return n.gamma=t,n}(1);var u=r(o.b);r(a.a)},function(t,e,n){"use strict";var r=n(302);e.a=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),o=t[(i+e-1)%e],a=t[i%e],s=t[(i+1)%e],u=t[(i+2)%e];return Object(r.a)((n-i/e)*e,o,a,s,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function r(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,a=new Array(o),s=new Array(r);for(n=0;n<o;++n)a[n]=Object(i.a)(t[n],e[n]);for(;n<r;++n)s[n]=e[n];return function(t){for(n=0;n<o;++n)s[n]=a[n](t);return s}}e.a=r;var i=n(301);n(303)},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}},function(t,e,n){"use strict";var r=n(301);e.a=function(t,e){var n,i={},o={};null!==t&&"object"===typeof t||(t={}),null!==e&&"object"===typeof e||(e={});for(n in e)n in t?i[n]=Object(r.a)(t[n],e[n]):o[n]=e[n];return function(t){for(n in i)o[n]=i[n](t);return o}}},function(t,e,n){"use strict";function r(t){return function(){return t}}function i(t){return function(e){return t(e)+""}}var o=n(210),a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,s=new RegExp(a.source,"g");e.a=function(t,e){var n,u,c,l=a.lastIndex=s.lastIndex=0,f=-1,h=[],p=[];for(t+="",e+="";(n=a.exec(t))&&(u=s.exec(e));)(c=u.index)>l&&(c=e.slice(l,c),h[f]?h[f]+=c:h[++f]=c),(n=n[0])===(u=u[0])?h[f]?h[f]+=u:h[++f]=u:(h[++f]=null,p.push({i:f,x:Object(o.a)(n,u)})),l=s.lastIndex;return l<e.length&&(c=e.slice(l),h[f]?h[f]+=c:h[++f]=c),h.length<2?p[0]?i(p[0].x):r(e):(e=p.length,function(t){for(var n,r=0;r<e;++r)h[(n=p[r]).i]=n.x(t);return h.join("")})}},function(t,e,n){"use strict";function r(){function t(t){var r=t+"",i=e.get(r);if(!i){if(c!==s)return c;e.set(r,i=n.push(t))}return u[(i-1)%u.length]}var e=Object(i.a)(),n=[],u=[],c=s;return t.domain=function(r){if(!arguments.length)return n.slice();n=[],e=Object(i.a)();for(var o,a,s=-1,u=r.length;++s<u;)e.has(a=(o=r[s])+"")||e.set(a,n.push(o));return t},t.range=function(e){return arguments.length?(u=o.b.call(e),t):u.slice()},t.unknown=function(e){return arguments.length?(c=e,t):c},t.copy=function(){return r(n,u).unknown(c)},a.b.apply(t,arguments),t}e.a=r;var i=n(1179),o=n(117),a=n(47),s={name:"implicit"}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";var r=n(65),i=n(504);e.a=function(t,e,n,o){var a,s=Object(r.h)(t,e,n);switch(o=Object(i.c)(null==o?",f":o),o.type){case"s":var u=Math.max(Math.abs(t),Math.abs(e));return null!=o.precision||isNaN(a=Object(i.e)(s,u))||(o.precision=a),Object(i.b)(o,u);case"":case"e":case"g":case"p":case"r":null!=o.precision||isNaN(a=Object(i.f)(s,Math.max(Math.abs(t),Math.abs(e))))||(o.precision=a-("e"===o.type));break;case"f":case"%":null!=o.precision||isNaN(a=Object(i.d)(s))||(o.precision=a-2*("%"===o.type))}return Object(i.a)(o)}},function(t,e,n){"use strict";var r=n(1187);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b});var i=(n(505),n(506));n.d(e,"c",function(){return i.a});var o=n(1194);n.d(e,"d",function(){return o.a});var a=n(1195);n.d(e,"e",function(){return a.a});var s=n(1196);n.d(e,"f",function(){return s.a})},function(t,e,n){"use strict";var r=n(211),i=n(1188),o=n(1189),a=n(506),s=n(1190),u=n(1191),c=n(507),l=n(1193),f=Array.prototype.map,h=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){function e(t){function e(t){var e,o,a,u=O,d=T;if("c"===S)d=A(t)+d,t="";else{t=+t;var v=t<0||1/t<0;if(t=isNaN(t)?b:A(Math.abs(t),w),E&&(t=Object(s.a)(t)),v&&0===+t&&"+"!==i&&(v=!1),u=(v?"("===i?i:_:"-"===i||"("===i?"":i)+u,d=("s"===S?h[8+c.b/3]:"")+d+(v&&"("===i?")":""),C)for(e=-1,o=t.length;++e<o;)if(48>(a=t.charCodeAt(e))||a>57){d=(46===a?m+t.slice(e+1):t.slice(e))+d,t=t.slice(0,e);break}}x&&!l&&(t=p(t,1/0));var y=u.length+t.length+d.length,k=y<f?new Array(f-y+1).join(n):"";switch(x&&l&&(t=p(k+t,k.length?f-d.length:1/0),k=""),r){case"<":t=u+t+d+k;break;case"=":t=u+k+t+d;break;case"^":t=k.slice(0,y=k.length>>1)+u+t+d+k.slice(y);break;default:t=k+u+t+d}return g(t)}t=Object(a.a)(t);var n=t.fill,r=t.align,i=t.sign,o=t.symbol,l=t.zero,f=t.width,x=t.comma,w=t.precision,E=t.trim,S=t.type;"n"===S?(x=!0,S="g"):u.a[S]||(void 0===w&&(w=12),E=!0,S="g"),(l||"0"===n&&"="===r)&&(l=!0,n="0",r="=");var O="$"===o?d:"#"===o&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",T="$"===o?v:/[%p]/.test(S)?y:"",A=u.a[S],C=/[defgprs%]/.test(S);return w=void 0===w?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w)),e.toString=function(){return t+""},e}function n(t,n){var i=e((t=Object(a.a)(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Object(r.a)(n)/3))),s=Math.pow(10,-o),u=h[8+o/3];return function(t){return i(s*t)+u}}var p=void 0===t.grouping||void 0===t.thousands?l.a:Object(i.a)(f.call(t.grouping,Number),t.thousands+""),d=void 0===t.currency?"":t.currency[0]+"",v=void 0===t.currency?"":t.currency[1]+"",m=void 0===t.decimal?".":t.decimal+"",g=void 0===t.numerals?l.a:Object(o.a)(f.call(t.numerals,String)),y=void 0===t.percent?"%":t.percent+"",_=void 0===t.minus?"-":t.minus+"",b=void 0===t.nan?"NaN":t.nan+"";return{format:e,formatPrefix:n}}},function(t,e,n){"use strict";function r(t){if(!(e=o.exec(t)))throw new Error("invalid format: "+t);var e;return new i({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function i(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}e.a=r;var o=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;r.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r,i=n(212);e.a=function(t,e){var n=Object(i.b)(t,e);if(!n)return t+"";var o=n[0],a=n[1],s=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=o.length;return s===u?o:s>u?o+new Array(s-u+1).join("0"):s>0?o.slice(0,s)+"."+o.slice(s):"0."+new Array(1-s).join("0")+Object(i.b)(t,Math.max(0,e+s-1))[0]}},function(t,e,n){"use strict";e.a=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}},function(t,e,n){"use strict";function r(t){return new Date(t)}function i(t){return t instanceof Date?+t:+new Date(+t)}function o(t,e,n,s,u,f,b,x,w){function E(r){return(b(r)<r?C:f(r)<r?k:u(r)<r?M:s(r)<r?P:e(r)<r?n(r)<r?j:I:t(r)<r?R:L)(r)}function S(e,n,r,i){if(null==e&&(e=10),"number"===typeof e){var o=Math.abs(r-n)/e,s=Object(a.c)(function(t){return t[2]}).right(D,o);s===D.length?(i=Object(a.h)(n/_,r/_,e),e=t):s?(s=D[o/D[s-1][2]<D[s][2]/o?s-1:s],i=s[1],e=s[0]):(i=Math.max(Object(a.h)(n,r,e),1),e=x)}return null==i?e:e.every(i)}var O=Object(l.b)(l.c,l.c),T=O.invert,A=O.domain,C=w(".%L"),k=w(":%S"),M=w("%I:%M"),P=w("%I %p"),j=w("%a %d"),I=w("%b %d"),R=w("%B"),L=w("%Y"),D=[[b,1,p],[b,5,5*p],[b,15,15*p],[b,30,30*p],[f,1,d],[f,5,5*d],[f,15,15*d],[f,30,30*d],[u,1,v],[u,3,3*v],[u,6,6*v],[u,12,12*v],[s,1,m],[s,2,2*m],[n,1,g],[e,1,y],[e,3,3*y],[t,1,_]];return O.invert=function(t){return new Date(T(t))},O.domain=function(t){return arguments.length?A(c.a.call(t,i)):A().map(r)},O.ticks=function(t,e){var n,r=A(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=S(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},O.tickFormat=function(t,e){return null==e?E:w(e)},O.nice=function(t,e){var n=A();return(t=S(t,n[0],n[n.length-1],e))?A(Object(h.a)(n,t)):O},O.copy=function(){return Object(l.a)(O,o(t,e,n,s,u,f,b,x,w))},O}e.a=o;var a=n(65),s=n(308),u=n(510),c=n(117),l=n(94),f=n(47),h=n(508),p=1e3,d=60*p,v=60*d,m=24*v,g=7*m,y=30*m,_=365*m;e.b=function(){return f.b.apply(o(s.k,s.f,s.j,s.a,s.b,s.d,s.g,s.c,u.a).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},function(t,e,n){"use strict";var r=n(309);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b});n(511),n(512),n(1214)},function(t,e,n){"use strict";function r(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function i(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function o(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function a(t){function e(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=xt[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function n(t,e){return function(n){var s,u,c=o(1900,void 0,1),l=a(c,t,n+="",0);if(l!=n.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(!e||"Z"in c||(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(s=i(o(c.y,0,1)),u=s.getUTCDay(),s=u>4||0===u?bt.p.ceil(s):Object(bt.p)(s),s=bt.l.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(s=r(o(c.y,0,1)),u=s.getDay(),s=u>4||0===u?bt.e.ceil(s):Object(bt.e)(s),s=bt.a.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),u="Z"in c?i(o(c.y,0,1)).getUTCDay():r(o(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(u+5)%7:c.w+7*c.U-(u+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,i(c)):r(c)}}function a(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=ie[i in xt?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(t,e,n){var r=qt.exec(e.slice(n));return r?(t.p=Zt[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){var r=Kt.exec(e.slice(n));return r?(t.w=Jt[r[0].toLowerCase()],n+r[0].length):-1}function V(t,e,n){var r=Xt.exec(e.slice(n));return r?(t.w=Yt[r[0].toLowerCase()],n+r[0].length):-1}function ut(t,e,n){var r=te.exec(e.slice(n));return r?(t.m=ee[r[0].toLowerCase()],n+r[0].length):-1}function wt(t,e,n){var r=Qt.exec(e.slice(n));return r?(t.m=$t[r[0].toLowerCase()],n+r[0].length):-1}function Et(t,e,n){return a(t,zt,e,n)}function St(t,e,n){return a(t,Ft,e,n)}function Ot(t,e,n){return a(t,Bt,e,n)}function Tt(t){return Gt[t.getDay()]}function At(t){return Vt[t.getDay()]}function Ct(t){return Wt[t.getMonth()]}function kt(t){return Ht[t.getMonth()]}function Mt(t){return Ut[+(t.getHours()>=12)]}function Pt(t){return 1+~~(t.getMonth()/3)}function jt(t){return Gt[t.getUTCDay()]}function It(t){return Vt[t.getUTCDay()]}function Rt(t){return Wt[t.getUTCMonth()]}function Lt(t){return Ht[t.getUTCMonth()]}function Dt(t){return Ut[+(t.getUTCHours()>=12)]}function Nt(t){return 1+~~(t.getUTCMonth()/3)}var zt=t.dateTime,Ft=t.date,Bt=t.time,Ut=t.periods,Vt=t.days,Gt=t.shortDays,Ht=t.months,Wt=t.shortMonths,qt=c(Ut),Zt=l(Ut),Xt=c(Vt),Yt=l(Vt),Kt=c(Gt),Jt=l(Gt),Qt=c(Ht),$t=l(Ht),te=c(Wt),ee=l(Wt),ne={a:Tt,A:At,b:Ct,B:kt,c:null,d:P,e:P,f:D,g:Z,G:Y,H:j,I:I,j:R,L:L,m:N,M:z,p:Mt,q:Pt,Q:yt,s:_t,S:F,u:B,U:U,V:G,w:H,W:W,x:null,X:null,y:q,Y:X,Z:K,"%":gt},re={a:jt,A:It,b:Rt,B:Lt,c:null,d:J,e:J,f:nt,g:pt,G:vt,H:Q,I:$,j:tt,L:et,m:rt,M:it,p:Dt,q:Nt,Q:yt,s:_t,S:ot,u:at,U:st,V:ct,w:lt,W:ft,x:null,X:null,y:ht,Y:dt,Z:mt,"%":gt},ie={a:u,A:V,b:ut,B:wt,c:Et,d:x,e:x,f:A,g:g,G:m,H:E,I:E,j:w,L:T,m:b,M:S,p:s,q:_,Q:k,s:M,S:O,u:h,U:p,V:d,w:f,W:v,x:St,X:Ot,y:g,Y:m,Z:y,"%":C};return ne.x=e(Ft,ne),ne.X=e(Bt,ne),ne.c=e(zt,ne),re.x=e(Ft,re),re.X=e(Bt,re),re.c=e(zt,re),{format:function(t){var n=e(t+="",ne);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",re);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t+="",!0);return e.toString=function(){return t},e}}}function s(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function u(t){return t.replace(St,"\\$&")}function c(t){return new RegExp("^(?:"+t.map(u).join("|")+")","i")}function l(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function f(t,e,n){var r=wt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function h(t,e,n){var r=wt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function p(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function d(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function v(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function m(t,e,n){var r=wt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function g(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function y(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _(t,e,n){var r=wt.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function b(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function x(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function w(t,e,n){var r=wt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function E(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function S(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function O(t,e,n){var r=wt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function T(t,e,n){var r=wt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function A(t,e,n){var r=wt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function C(t,e,n){var r=Et.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function k(t,e,n){var r=wt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function M(t,e,n){var r=wt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function P(t,e){return s(t.getDate(),e,2)}function j(t,e){return s(t.getHours(),e,2)}function I(t,e){return s(t.getHours()%12||12,e,2)}function R(t,e){return s(1+bt.a.count(Object(bt.k)(t),t),e,3)}function L(t,e){return s(t.getMilliseconds(),e,3)}function D(t,e){return L(t,e)+"000"}function N(t,e){return s(t.getMonth()+1,e,2)}function z(t,e){return s(t.getMinutes(),e,2)}function F(t,e){return s(t.getSeconds(),e,2)}function B(t){var e=t.getDay();return 0===e?7:e}function U(t,e){return s(bt.h.count(Object(bt.k)(t)-1,t),e,2)}function V(t){var e=t.getDay();return e>=4||0===e?Object(bt.i)(t):bt.i.ceil(t)}function G(t,e){return t=V(t),s(bt.i.count(Object(bt.k)(t),t)+(4===Object(bt.k)(t).getDay()),e,2)}function H(t){return t.getDay()}function W(t,e){return s(bt.e.count(Object(bt.k)(t)-1,t),e,2)}function q(t,e){return s(t.getFullYear()%100,e,2)}function Z(t,e){return t=V(t),s(t.getFullYear()%100,e,2)}function X(t,e){return s(t.getFullYear()%1e4,e,4)}function Y(t,e){var n=t.getDay();return t=n>=4||0===n?Object(bt.i)(t):bt.i.ceil(t),s(t.getFullYear()%1e4,e,4)}function K(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+s(e/60|0,"0",2)+s(e%60,"0",2)}function J(t,e){return s(t.getUTCDate(),e,2)}function Q(t,e){return s(t.getUTCHours(),e,2)}function $(t,e){return s(t.getUTCHours()%12||12,e,2)}function tt(t,e){return s(1+bt.l.count(Object(bt.v)(t),t),e,3)}function et(t,e){return s(t.getUTCMilliseconds(),e,3)}function nt(t,e){return et(t,e)+"000"}function rt(t,e){return s(t.getUTCMonth()+1,e,2)}function it(t,e){return s(t.getUTCMinutes(),e,2)}function ot(t,e){return s(t.getUTCSeconds(),e,2)}function at(t){var e=t.getUTCDay();return 0===e?7:e}function st(t,e){return s(bt.s.count(Object(bt.v)(t)-1,t),e,2)}function ut(t){var e=t.getUTCDay();return e>=4||0===e?Object(bt.t)(t):bt.t.ceil(t)}function ct(t,e){return t=ut(t),s(bt.t.count(Object(bt.v)(t),t)+(4===Object(bt.v)(t).getUTCDay()),e,2)}function lt(t){return t.getUTCDay()}function ft(t,e){return s(bt.p.count(Object(bt.v)(t)-1,t),e,2)}function ht(t,e){return s(t.getUTCFullYear()%100,e,2)}function pt(t,e){return t=ut(t),s(t.getUTCFullYear()%100,e,2)}function dt(t,e){return s(t.getUTCFullYear()%1e4,e,4)}function vt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Object(bt.t)(t):bt.t.ceil(t),s(t.getUTCFullYear()%1e4,e,4)}function mt(){return"+0000"}function gt(){return"%"}function yt(t){return+t}function _t(t){return Math.floor(+t/1e3)}e.a=a;var bt=n(308),xt={"-":"",_:" ",0:"0"},wt=/^\s*\d+/,Et=/^%/,St=/[\\^$*+?|[\]().{}]/g},function(t,e,n){"use strict";function r(t){return t.toISOString()}n.d(e,"a",function(){return o});var i=n(309),o="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Object(i.b)(o)},function(t,e,n){"use strict";function r(){function t(t){return isNaN(t=+t)?o:c(0===r?.5:(t=(i(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}var e,n,r,i,o,s=0,u=1,c=a.c,l=!1;return t.domain=function(o){return arguments.length?(e=i(s=+o[0]),n=i(u=+o[1]),r=e===n?0:1/(n-e),t):[s,u]},t.clamp=function(e){return arguments.length?(l=!!e,t):l},t.interpolator=function(e){return arguments.length?(c=e,t):c},t.unknown=function(e){return arguments.length?(o=e,t):o},function(o){return i=o,e=o(s),n=o(u),r=e===n?0:1/(n-e),t}}function i(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function o(){var t=Object(u.b)(r()(a.c));return t.copy=function(){return i(t,o())},s.a.apply(t,arguments)}e.a=i,e.b=o;var a=n(94),s=n(47),u=n(118);n(305),n(306),n(307)},function(t,e,n){"use strict";function r(t){return"PolygonLayer"===t?s.a:"LineLayer"===t?o.a:a.a}function i(t){return-1!==["PolygonLayer","LineLayer"].indexOf(t)}e.a=r,e.b=i;var o=n(297),a=n(298),s=n(299)},function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function i(t,e,n){return i=r()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),a=new i;return n&&o(a,n.prototype),a},i.apply(null,arguments)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){Object.defineProperty(t,"name",{value:e,writable:!1,enumerable:!1,configurable:!0})}function s(t){return"function"===typeof t}function u(t,e,n){if(void 0===n&&(n=!0),!(t instanceof S))throw new Error("Illegal call");if("string"!==typeof e)return e;if(e){var r=t.generator(),i=r.getOptions(),o={timeout:i.timeout,_initEnv:function(){n||this.setCurrentContext(r.getCurrentContext()),this.execStartTime=r.getExecStartTime(),this.execEndTime=this.execStartTime}},a=n?r.getGlobalScope():r.getCurrentScope();return new M(a,o).evaluate(e)}}function c(t){if(!(t instanceof S))throw new Error("Illegal call");for(var e=t.generator(),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=r.pop(),a=new M(e.getGlobalScope(),e.getOptions()),s="\n\t\t    (function anonymous("+r.join(",")+"){\n\t\t        "+o+"\n\t\t    });\n\t\t    ";return a.evaluate(s)}function l(){}function f(t,e){return void 0===t&&(t=null),new C(Object.create(null),t,e)}function h(t){return Object.create(t)}n.d(e,"a",function(){return M});var p=n(1252),d=(n.n(p),n(1253)),v=Object.prototype.hasOwnProperty,m=Symbol("Break"),g=Symbol("Continue"),y=Symbol("DefaultCase"),_=Symbol("EmptyStatementReturn"),b=Symbol("WithScopeName"),x=Symbol("SuperScopeName"),w=Symbol("RootScopeName"),E=Symbol("GlobalScopeName"),S=function(){function t(t){this.interpreter=t}return t.prototype.generator=function(){function t(){return this.getCurrentScope()}function e(){return this.getGlobalScope()}function n(){return this.getCurrentContext()}var r=this.interpreter;return{getOptions:r.getOptions.bind(r),getCurrentScope:t.bind(r),getGlobalScope:e.bind(r),getCurrentContext:n.bind(r),getExecStartTime:r.getExecStartTime.bind(r)}},t}();Object.defineProperty(u,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(c,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var O=function(t){this.value=t},T=function(t){this.value=t},A=function(t){this.value=t},C=function(t,e,n){void 0===e&&(e=null),this.name=n,this.parent=e,this.data=t,this.labelStack=[]},k={NaN:NaN,Infinity:1/0,undefined:void 0,Object:Object,Array:Array,String:String,Boolean:Boolean,Number:Number,Date:Date,RegExp:RegExp,Error:Error,URIError:URIError,TypeError:TypeError,RangeError:RangeError,SyntaxError:SyntaxError,ReferenceError:ReferenceError,Float32Array:Float32Array,Float64Array:Float64Array,Uint32Array:Uint32Array,Math:Math,parseInt:parseInt,parseFloat:parseFloat,isNaN:isNaN,isFinite:isFinite,decodeURI:decodeURI,decodeURIComponent:decodeURIComponent,encodeURI:encodeURI,encodeURIComponent:encodeURIComponent,escape:escape,unescape:unescape,eval:u,Function:c};"undefined"!==typeof JSON&&(k.JSON=JSON),"undefined"!==typeof Promise&&(k.Promise=Promise),"undefined"!==typeof Set&&(k.Set=Set),"undefined"!==typeof Map&&(k.Map=Map),"undefined"!==typeof Symbol&&(k.Symbol=Symbol),"undefined"!==typeof Proxy&&(k.Proxy=Proxy),"undefined"!==typeof WeakMap&&(k.WeakMap=WeakMap),"undefined"!==typeof WeakSet&&(k.WeakSet=WeakSet),"undefined"!==typeof Reflect&&(k.Reflect=Reflect);var M=function(){function t(e,n){void 0===e&&(e=t.global),void 0===n&&(n={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:n.ecmaVersion||t.ecmaVersion,timeout:n.timeout||0,rootContext:n.rootContext,globalContextInFunction:void 0===n.globalContextInFunction?t.globalContextInFunction:n.globalContextInFunction,_initEnv:n._initEnv},this.context=e||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var e=t.prototype;return e.initEnvironment=function(t){var e;if(t instanceof C)e=t;else{var n=null,r=this.createSuperScope(t);this.options.rootContext&&(n=new C(h(this.options.rootContext),r,w)),e=new C(t,n||r,E)}this.globalScope=e,this.currentScope=this.globalScope,this.globalContext=e.data,this.currentContext=e.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var i=this.options._initEnv;i&&i.call(this)},e.getExecStartTime=function(){return this.execStartTime},e.getExecutionTime=function(){return this.execEndTime-this.execStartTime},e.setExecTimeout=function(t){void 0===t&&(t=0),this.options.timeout=t},e.getOptions=function(){return this.options},e.getGlobalScope=function(){return this.globalScope},e.getCurrentScope=function(){return this.currentScope},e.getCurrentContext=function(){return this.currentContext},e.isInterruptThrow=function(t){return t instanceof d.a||t instanceof d.b||t instanceof d.c},e.createSuperScope=function(t){var e=Object.assign({},k);return Object.keys(e).forEach(function(n){n in t&&delete e[n]}),new C(e,null,x)},e.setCurrentContext=function(t){this.currentContext=t},e.setCurrentScope=function(t){this.currentScope=t},e.evaluate=function(e){void 0===e&&(e="");var n;if(e)return n=Object(p.parse)(e,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||t.ecmaVersion}),this.evaluateNode(n,e)},e.appendCode=function(t){return this.evaluate(t)},e.evaluateNode=function(t,e){var n=this;void 0===e&&(e=""),this.value=void 0,this.source=e,this.sourceList.push(e),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var r=this.getCurrentScope(),i=this.getCurrentContext(),o=r.labelStack.concat([]),a=this.callStack.concat([]);try{var s=this.createClosure(t);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),s()}catch(t){throw t}finally{!function(){n.setCurrentScope(r),n.setCurrentContext(i),r.labelStack=o,n.callStack=a}(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},e.createErrorMessage=function(t,e,n){var r=t[1].replace("%0",String(e));return null!==n&&(r+=this.getNodePosition(n||this.lastExecNode)),r},e.createError=function(t,e){return new e(t)},e.createThrowError=function(t,e){return this.createError(t,e)},e.createInternalThrowError=function(t,e,n){return this.createError(this.createErrorMessage(t,e,n),t[2])},e.checkTimeout=function(){if(!this.isRunning)return!1;var t=this.options.timeout||0;return Date.now()-this.execStartTime>t},e.getNodePosition=function(t){if(t){return t.loc?" ["+t.loc.start.line+":"+t.loc.start.column+"]":""}return""},e.createClosure=function(t){var e,n=this;switch(t.type){case"BinaryExpression":e=this.binaryExpressionHandler(t);break;case"LogicalExpression":e=this.logicalExpressionHandler(t);break;case"UnaryExpression":e=this.unaryExpressionHandler(t);break;case"UpdateExpression":e=this.updateExpressionHandler(t);break;case"ObjectExpression":e=this.objectExpressionHandler(t);break;case"ArrayExpression":e=this.arrayExpressionHandler(t);break;case"CallExpression":e=this.callExpressionHandler(t);break;case"NewExpression":e=this.newExpressionHandler(t);break;case"MemberExpression":e=this.memberExpressionHandler(t);break;case"ThisExpression":e=this.thisExpressionHandler(t);break;case"SequenceExpression":e=this.sequenceExpressionHandler(t);break;case"Literal":e=this.literalHandler(t);break;case"Identifier":e=this.identifierHandler(t);break;case"AssignmentExpression":e=this.assignmentExpressionHandler(t);break;case"FunctionDeclaration":e=this.functionDeclarationHandler(t);break;case"VariableDeclaration":e=this.variableDeclarationHandler(t);break;case"BlockStatement":case"Program":e=this.programHandler(t);break;case"ExpressionStatement":e=this.expressionStatementHandler(t);break;case"EmptyStatement":e=this.emptyStatementHandler(t);break;case"ReturnStatement":e=this.returnStatementHandler(t);break;case"FunctionExpression":e=this.functionExpressionHandler(t);break;case"IfStatement":e=this.ifStatementHandler(t);break;case"ConditionalExpression":e=this.conditionalExpressionHandler(t);break;case"ForStatement":e=this.forStatementHandler(t);break;case"WhileStatement":e=this.whileStatementHandler(t);break;case"DoWhileStatement":e=this.doWhileStatementHandler(t);break;case"ForInStatement":e=this.forInStatementHandler(t);break;case"WithStatement":e=this.withStatementHandler(t);break;case"ThrowStatement":e=this.throwStatementHandler(t);break;case"TryStatement":e=this.tryStatementHandler(t);break;case"ContinueStatement":e=this.continueStatementHandler(t);break;case"BreakStatement":e=this.breakStatementHandler(t);break;case"SwitchStatement":e=this.switchStatementHandler(t);break;case"LabeledStatement":e=this.labeledStatementHandler(t);break;case"DebuggerStatement":e=this.debuggerStatementHandler(t);break;default:throw this.createInternalThrowError(d.d.NodeTypeSyntaxError,t.type,t)}return function(){var r=n.options.timeout;if(r&&r>0&&n.checkTimeout())throw n.createInternalThrowError(d.d.ExecutionTimeOutError,r,null);return n.lastExecNode=t,e.apply(void 0,arguments)}},e.binaryExpressionHandler=function(t){var e=this,n=this.createClosure(t.left),r=this.createClosure(t.right);return function(){var i=n(),o=r();switch(t.operator){case"==":return i==o;case"!=":return i!=o;case"===":return i===o;case"!==":return i!==o;case"<":return i<o;case"<=":return i<=o;case">":return i>o;case">=":return i>=o;case"<<":return i<<o;case">>":return i>>o;case">>>":return i>>>o;case"+":return i+o;case"-":return i-o;case"*":return i*o;case"**":return Math.pow(i,o);case"/":return i/o;case"%":return i%o;case"|":return i|o;case"^":return i^o;case"&":return i&o;case"in":return i in o;case"instanceof":return i instanceof o;default:throw e.createInternalThrowError(d.d.BinaryOperatorSyntaxError,t.operator,t)}}},e.logicalExpressionHandler=function(t){var e=this,n=this.createClosure(t.left),r=this.createClosure(t.right);return function(){switch(t.operator){case"||":return n()||r();case"&&":return n()&&r();default:throw e.createInternalThrowError(d.d.LogicalOperatorSyntaxError,t.operator,t)}}},e.unaryExpressionHandler=function(t){var e=this;switch(t.operator){case"delete":var n=this.createObjectGetter(t.argument),r=this.createNameGetter(t.argument);return function(){return delete n()[r()]};default:var i;if("typeof"===t.operator&&"Identifier"===t.argument.type){var o=this.createObjectGetter(t.argument),a=this.createNameGetter(t.argument);i=function(){return o()[a()]}}else i=this.createClosure(t.argument);return function(){var n=i();switch(t.operator){case"-":return-n;case"+":return+n;case"!":return!n;case"~":return~n;case"void":return;case"typeof":return typeof n;default:throw e.createInternalThrowError(d.d.UnaryOperatorSyntaxError,t.operator,t)}}}},e.updateExpressionHandler=function(t){var e=this,n=this.createObjectGetter(t.argument),r=this.createNameGetter(t.argument);return function(){var i=n(),o=r();switch(e.assertVariable(i,o,t),t.operator){case"++":return t.prefix?++i[o]:i[o]++;case"--":return t.prefix?--i[o]:i[o]--;default:throw e.createInternalThrowError(d.d.UpdateOperatorSyntaxError,t.operator,t)}}},e.objectExpressionHandler=function(t){function e(t){return"Identifier"===t.type?t.name:"Literal"===t.type?t.value:this.throwError(d.d.ObjectStructureSyntaxError,t.type,t)}var n=this,r=[],i=Object.create(null);return t.properties.forEach(function(t){var o=t.kind,a=e(t.key);i[a]&&"init"!==o||(i[a]={}),i[a][o]=n.createClosure(t.value),r.push({key:a,property:t})}),function(){for(var t={},e=r.length,n=0;n<e;n++){var o=r[n],s=o.key,u=i[s],c=u.init?u.init():void 0,l=u.get?u.get():function(){},f=u.set?u.set():function(t){};if("set"in u||"get"in u){var h={configurable:!0,enumerable:!0,get:l,set:f};Object.defineProperty(t,s,h)}else{var p=o.property,d=p.kind;"Identifier"!==p.key.type||"FunctionExpression"!==p.value.type||"init"!==d||p.value.id||a(c,p.key.name),t[s]=c}}return t}},e.arrayExpressionHandler=function(t){var e=this,n=t.elements.map(function(t){return t?e.createClosure(t):t});return function(){for(var t=n.length,e=Array(t),r=0;r<t;r++){var i=n[r];i&&(e[r]=i())}return e}},e.safeObjectGet=function(t,e,n){return t[e]},e.createCallFunctionGetter=function(t){var e=this;switch(t.type){case"MemberExpression":var n=this.createClosure(t.object),r=this.createMemberKeyGetter(t),i=this.source;return function(){var o=n(),a=r(),u=e.safeObjectGet(o,a,t);if(!u||!s(u)){var c=i.slice(t.start,t.end);throw e.createInternalThrowError(d.d.FunctionUndefinedReferenceError,c,t)}return u.__IS_EVAL_FUNC?function(t){return u(new S(e),t,!0)}:u.__IS_FUNCTION_FUNC?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return u.apply(void 0,[new S(e)].concat(n))}:u.bind(o)};default:var o=this.createClosure(t);return function(){var n="";"Identifier"===t.type&&(n=t.name);var r=o();if(!r||!s(r))throw e.createInternalThrowError(d.d.FunctionUndefinedReferenceError,n,t);if("Identifier"===t.type&&r.__IS_EVAL_FUNC&&"eval"===n)return function(t){var i=e.getScopeFromName(n,e.getCurrentScope()),o=i.name===x||i.name===E||i.name===w;return r(new S(e),t,!o)};if(r.__IS_EVAL_FUNC)return function(t){return r(new S(e),t,!0)};if(r.__IS_FUNCTION_FUNC)return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r.apply(void 0,[new S(e)].concat(n))};var i=e.options.globalContextInFunction;if("Identifier"===t.type){var a=e.getIdentifierScope(t);a.name===b&&(i=a.data)}return r.bind(i)}}},e.callExpressionHandler=function(t){var e=this,n=this.createCallFunctionGetter(t.callee),r=t.arguments.map(function(t){return e.createClosure(t)});return function(){return n().apply(void 0,r.map(function(t){return t()}))}},e.functionExpressionHandler=function(t){var e=this,n=this,r=this.source,i=this.collectDeclVars,o=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var s=t.id?t.id.name:"",u=t.params.length,c=t.params.map(function(t){return e.createParamNameGetter(t)}),l=this.createClosure(t.body),h=this.collectDeclVars,p=this.collectDeclFuncs;return this.collectDeclVars=i,this.collectDeclFuncs=o,function(){var e=n.getCurrentScope(),i=function t(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.callStack.push(""+s);var a=n.getCurrentScope(),u=f(e,"FunctionScope("+s+")");n.setCurrentScope(u),n.addDeclarationsToScope(h,p,u),s&&(u.data[s]=t),u.data.arguments=arguments,c.forEach(function(t,e){u.data[t()]=i[e]});var d=n.getCurrentContext();n.setCurrentContext(this);var v=l();if(n.setCurrentContext(d),n.setCurrentScope(a),n.callStack.pop(),v instanceof O)return v.value};return a(i,s),Object.defineProperty(i,"length",{value:u,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(i,"toString",{value:function(){return r.slice(t.start,t.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(i,"valueOf",{value:function(){return r.slice(t.start,t.end)},writable:!0,configurable:!0,enumerable:!1}),i}},e.newExpressionHandler=function(t){var e=this,n=this.source,r=this.createClosure(t.callee),o=t.arguments.map(function(t){return e.createClosure(t)});return function(){var a=r();if(!s(a)||a.__IS_EVAL_FUNC){var u=t.callee,c=n.slice(u.start,u.end);throw e.createInternalThrowError(d.d.IsNotConstructor,c,t)}return a.__IS_FUNCTION_FUNC?a.apply(void 0,[new S(e)].concat(o.map(function(t){return t()}))):i(a,o.map(function(t){return t()}))}},e.memberExpressionHandler=function(t){var e=this.createClosure(t.object),n=this.createMemberKeyGetter(t);return function(){return e()[n()]}},e.thisExpressionHandler=function(t){var e=this;return function(){return e.getCurrentContext()}},e.sequenceExpressionHandler=function(t){var e=this,n=t.expressions.map(function(t){return e.createClosure(t)});return function(){for(var t,e=n.length,r=0;r<e;r++){t=(0,n[r])()}return t}},e.literalHandler=function(t){return function(){return t.regex?new RegExp(t.regex.pattern,t.regex.flags):t.value}},e.identifierHandler=function(t){var e=this;return function(){var n=e.getCurrentScope(),r=e.getScopeDataFromName(t.name,n);return e.assertVariable(r,t.name,t),r[t.name]}},e.getIdentifierScope=function(t){var e=this.getCurrentScope();return this.getScopeFromName(t.name,e)},e.assignmentExpressionHandler=function(t){var e=this;"Identifier"!==t.left.type||"FunctionExpression"!==t.right.type||t.right.id||(t.right.id={type:"Identifier",name:t.left.name});var n=this.createObjectGetter(t.left),r=this.createNameGetter(t.left),i=this.createClosure(t.right);return function(){var o=n(),a=r(),s=i();switch("="!==t.operator&&e.assertVariable(o,a,t),t.operator){case"=":return o[a]=s;case"+=":return o[a]+=s;case"-=":return o[a]-=s;case"*=":return o[a]*=s;case"**=":return o[a]=Math.pow(o[a],s);case"/=":return o[a]/=s;case"%=":return o[a]%=s;case"<<=":return o[a]<<=s;case">>=":return o[a]>>=s;case">>>=":return o[a]>>>=s;case"&=":return o[a]&=s;case"^=":return o[a]^=s;case"|=":return o[a]|=s;default:throw e.createInternalThrowError(d.d.AssignmentExpressionSyntaxError,t.type,t)}}},e.functionDeclarationHandler=function(t){if(t.id){var e=this.functionExpressionHandler(t);Object.defineProperty(e,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(t.id.name,e)}return function(){return _}},e.getVariableName=function(t){if("Identifier"===t.type)return t.name;throw this.createInternalThrowError(d.d.VariableTypeSyntaxError,t.type,t)},e.variableDeclarationHandler=function(t){for(var e,n=this,r=[],i=0;i<t.declarations.length;i++){var o=t.declarations[i];this.varDeclaration(this.getVariableName(o.id)),o.init&&r.push({type:"AssignmentExpression",operator:"=",left:o.id,right:o.init})}return r.length&&(e=this.createClosure({type:"BlockStatement",body:r})),function(){if(e){var t=n.isVarDeclMode;n.isVarDeclMode=!0,e(),n.isVarDeclMode=t}return _}},e.assertVariable=function(t,e,n){if(t===this.globalScope.data&&!(e in t))throw this.createInternalThrowError(d.d.VariableUndefinedReferenceError,e,n)},e.programHandler=function(t){var e=this,n=t.body.map(function(t){return e.createClosure(t)});return function(){for(var t=_,r=0;r<n.length;r++){var i=n[r],o=e.setValue(i());if(o!==_&&((t=o)instanceof O||t instanceof T||t instanceof A||t===m||t===g))break}return t}},e.expressionStatementHandler=function(t){return this.createClosure(t.expression)},e.emptyStatementHandler=function(t){return function(){return _}},e.returnStatementHandler=function(t){var e=t.argument?this.createClosure(t.argument):l;return function(){return new O(e())}},e.ifStatementHandler=function(t){var e=this.createClosure(t.test),n=this.createClosure(t.consequent),r=t.alternate?this.createClosure(t.alternate):function(){return _};return function(){return e()?n():r()}},e.conditionalExpressionHandler=function(t){return this.ifStatementHandler(t)},e.forStatementHandler=function(t){var e=this,n=l,r=t.test?this.createClosure(t.test):function(){return!0},i=l,o=this.createClosure(t.body);return"ForStatement"===t.type&&(n=t.init?this.createClosure(t.init):n,i=t.update?this.createClosure(t.update):l),function(a){var s,u=_,c="DoWhileStatement"===t.type;for(a&&"LabeledStatement"===a.type&&(s=a.label.name),n();c||r();i()){c=!1;var l=e.setValue(o());if(l!==_&&l!==g){if(l===m)break;if((u=l)instanceof A&&u.value===s)u=_;else if(u instanceof O||u instanceof T||u instanceof A)break}}return u}},e.whileStatementHandler=function(t){return this.forStatementHandler(t)},e.doWhileStatementHandler=function(t){return this.forStatementHandler(t)},e.forInStatementHandler=function(t){var e=this,n=t.left,r=this.createClosure(t.right),i=this.createClosure(t.body);return"VariableDeclaration"===t.left.type&&(this.createClosure(t.left)(),n=t.left.declarations[0].id),function(t){var o,a,s=_;t&&"LabeledStatement"===t.type&&(o=t.label.name);var u=r();for(a in u){e.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:n,right:{type:"Literal",value:a}})();var c=e.setValue(i());if(c!==_&&c!==g){if(c===m)break;if((s=c)instanceof A&&s.value===o)s=_;else if(s instanceof O||s instanceof T||s instanceof A)break}}return s}},e.withStatementHandler=function(t){var e=this,n=this.createClosure(t.object),r=this.createClosure(t.body);return function(){var t=n(),i=e.getCurrentScope(),o=new C(t,i,b);e.setCurrentScope(o);var a=e.setValue(r());return e.setCurrentScope(i),a}},e.throwStatementHandler=function(t){var e=this,n=this.createClosure(t.argument);return function(){throw e.setValue(void 0),n()}},e.tryStatementHandler=function(t){var e=this,n=this.createClosure(t.block),r=t.handler?this.catchClauseHandler(t.handler):null,i=t.finalizer?this.createClosure(t.finalizer):null;return function(){var t,o,a=e.getCurrentScope(),s=e.getCurrentContext(),u=a.labelStack.concat([]),c=e.callStack.concat([]),l=_,f=function(){e.setCurrentScope(a),e.setCurrentContext(s),a.labelStack=u,e.callStack=c};try{l=e.setValue(n()),l instanceof O&&(t=l)}catch(n){if(f(),e.isInterruptThrow(n))throw n;if(r)try{l=e.setValue(r(n)),l instanceof O&&(t=l)}catch(t){if(f(),e.isInterruptThrow(t))throw t;o=t}}if(i)try{l=i(),l instanceof O&&(t=l)}catch(t){if(f(),e.isInterruptThrow(t))throw t;o=t}if(o)throw o;return t||l}},e.catchClauseHandler=function(t){var e=this,n=this.createParamNameGetter(t.param),r=this.createClosure(t.body);return function(t){var i,o=e.getCurrentScope(),a=o.data,s=n(),u=v.call(a,s),c=a[s];return a[s]=t,i=r(),u?a[s]=c:delete a[s],i}},e.continueStatementHandler=function(t){return function(){return t.label?new A(t.label.name):g}},e.breakStatementHandler=function(t){return function(){return t.label?new T(t.label.name):m}},e.switchStatementHandler=function(t){var e=this,n=this.createClosure(t.discriminant),r=t.cases.map(function(t){return e.switchCaseHandler(t)});return function(){for(var t,i,o,a=n(),s=!1,u=0;u<r.length;u++){var c=r[u](),l=c.testClosure();if(l!==y){if(s||l===a){if(s=!0,(i=e.setValue(c.bodyClosure()))===_)continue;if(i===m)break;if((t=i)instanceof O||t instanceof T||t instanceof A||t===g)break}}else o=c}if(!s&&o){i=e.setValue(o.bodyClosure());i===_||i===m||i===g||(t=i)}return t}},e.switchCaseHandler=function(t){var e=t.test?this.createClosure(t.test):function(){return y},n=this.createClosure({type:"BlockStatement",body:t.consequent});return function(){return{testClosure:e,bodyClosure:n}}},e.labeledStatementHandler=function(t){var e=this,n=t.label.name,r=this.createClosure(t.body);return function(){var i,o=e.getCurrentScope();return o.labelStack.push(n),i=r(t),i instanceof T&&i.value===n&&(i=_),o.labelStack.pop(),i}},e.debuggerStatementHandler=function(t){return function(){return _}},e.createParamNameGetter=function(t){if("Identifier"===t.type)return function(){return t.name};throw this.createInternalThrowError(d.d.ParamTypeSyntaxError,t.type,t)},e.createObjectKeyGetter=function(t){var e;return e="Identifier"===t.type?function(){return t.name}:this.createClosure(t),function(){return e()}},e.createMemberKeyGetter=function(t){return t.computed?this.createClosure(t.property):this.createObjectKeyGetter(t.property)},e.createObjectGetter=function(t){var e=this;switch(t.type){case"Identifier":return function(){return e.getScopeDataFromName(t.name,e.getCurrentScope())};case"MemberExpression":return this.createClosure(t.object);default:throw this.createInternalThrowError(d.d.AssignmentTypeSyntaxError,t.type,t)}},e.createNameGetter=function(t){switch(t.type){case"Identifier":return function(){return t.name};case"MemberExpression":return this.createMemberKeyGetter(t);default:throw this.createInternalThrowError(d.d.AssignmentTypeSyntaxError,t.type,t)}},e.varDeclaration=function(t){this.collectDeclVars[t]=void 0},e.funcDeclaration=function(t,e){this.collectDeclFuncs[t]=e},e.addDeclarationsToScope=function(t,e,n){var r=n.data;for(var i in e){var o=e[i];r[i]=o?o():o}for(var a in t)a in r||(r[a]=void 0)},e.getScopeValue=function(t,e){return this.getScopeFromName(t,e).data[t]},e.getScopeDataFromName=function(t,e){return this.getScopeFromName(t,e).data},e.getScopeFromName=function(t,e){var n=e;do{if(t in n.data)return n}while(n=n.parent);return this.globalScope},e.setValue=function(t){var e=this.callStack.length;return this.isVarDeclMode||e||t===_||t===m||t===g||t instanceof T||t instanceof A?t:(this.value=t instanceof O?t.value:t,t)},e.getValue=function(){return this.value},t}();M.version="0.0.3",M.eval=u,M.Function=c,M.ecmaVersion=5,M.globalContextInFunction=void 0,M.global=Object.create(null)},function(t,e,n){t.exports=!n(30)&&!n(23)(function(){return 7!=Object.defineProperty(n(311)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(27)},function(t,e,n){var r=n(57),i=n(58),o=n(214)(!1),a=n(313)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(33),i=n(17),o=n(121);t.exports=n(30)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(58),i=n(124).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){"use strict";var r=n(30),i=n(121),o=n(215),a=n(168),s=n(34),u=n(167),c=Object.assign;t.exports=!c||n(23)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=s(t),c=arguments.length,l=1,f=o.f,h=a.f;c>l;)for(var p,d=u(arguments[l++]),v=f?i(d).concat(f(d)):i(d),m=v.length,g=0;m>g;)p=v[g++],r&&!h.call(d,p)||(n[p]=d[p]);return n}:c},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(44),i=n(24),o=n(524),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(21).parseInt,i=n(148).trim,o=n(317),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(21).parseFloat,i=n(148).trim;t.exports=1/r(n(317)+"-0")!==-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(68);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(24),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(320),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126),c=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),l=r(t);return i<u?l*c(i/u/a)*u*a:(e=(1+a/o)*i,n=e-(e-i),n>s||n!=n?l*(1/0):l*n)}},function(t,e,n){var r=n(17);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(44),i=n(34),o=n(167),a=n(29);t.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),f=a(c.length),h=u?f-1:0,p=u?-1:1;if(n<2)for(;;){if(h in l){s=l[h],h+=p;break}if(h+=p,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=p)h in l&&(s=e(s,l[h],h,c));return s}},function(t,e,n){"use strict";var r=n(34),i=n(122),o=n(29);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){"use strict";var r=n(332);n(5)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){n(30)&&"g"!=/./g.flags&&n(33).f(RegExp.prototype,"flags",{configurable:!0,get:n(169)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(17),i=n(24),o=n(336);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(540),i=n(129);t.exports=n(223)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(33).f,i=n(123),o=n(128),a=n(67),s=n(126),u=n(127),c=n(322),l=n(534),f=n(125),h=n(30),p=n(97).fastKey,d=n(129),v=h?"_s":"size",m=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&u(r,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=m(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(d(this,e),t)}}),h&&r(l.prototype,"size",{get:function(){return d(this,e)[v]}}),l},def:function(t,e,n){var r,i,o=m(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(540),i=n(129);t.exports=n(223)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(21),o=n(79)(0),a=n(51),s=n(97),u=n(521),c=n(543),l=n(24),f=n(129),h=n(129),p=!i.ActiveXObject&&"ActiveXObject"in i,d=s.getWeak,v=Object.isExtensible,m=c.ufstore,g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(l(t)){var e=d(t);return!0===e?m(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return c.def(f(this,"WeakMap"),t,e)}},_=t.exports=n(223)("WeakMap",g,y,c,!0,!0);h&&p&&(r=c.getConstructor(g,"WeakMap"),u(r.prototype,y),s.NEED=!0,o(["delete","has","get","set"],function(t){var e=_.prototype,n=e[t];a(e,t,function(e,i){if(l(e)&&!v(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(128),i=n(97).getWeak,o=n(17),a=n(24),s=n(126),u=n(127),c=n(79),l=n(57),f=n(129),h=c(5),p=c(6),d=0,v=function(t){return t._l||(t._l=new m)},m=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};m.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,void 0!=r&&u(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(f(this,e)).delete(t):n&&l(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return!0===n?v(f(this,e)).has(t):n&&l(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return!0===r?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){var r=n(69),i=n(29);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(124),i=n(215),o=n(17),a=n(21).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";function r(t,e,n,c,l,f,h,p){for(var d,v,m=l,g=0,y=!!h&&s(h,p,3);g<c;){if(g in n){if(d=y?y(n[g],g,e):n[g],v=!1,o(d)&&(v=d[u],v=void 0!==v?!!v:i(d)),v&&f>0)m=r(t,e,d,a(d.length),m,f-1)-1;else{if(m>=9007199254740991)throw TypeError();t[m]=d}m++}g++}return m}var i=n(216),o=n(24),a=n(29),s=n(67),u=n(27)("isConcatSpreadable");t.exports=r},function(t,e,n){var r=n(29),i=n(319),o=n(77);t.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},function(t,e,n){var r=n(30),i=n(121),o=n(58),a=n(168).f;t.exports=function(t){return function(e){for(var n,s=o(e),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(t?[n,s[n]]:s[n]);return f}}},function(t,e,n){var r=n(147),i=n(550);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(127);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){n(553),t.exports=n(558)},function(t,e,n){"use strict";"undefined"===typeof Promise&&(n(554).enable(),window.Promise=n(556)),n(557),Object.assign=n(28)},function(t,e,n){"use strict";function r(){c=!1,s._47=null,s._71=null}function i(t){function e(e){(t.allRejections||a(f[e].error,t.whitelist||u))&&(f[e].displayId=l++,t.onUnhandled?(f[e].logged=!0,t.onUnhandled(f[e].displayId,f[e].error)):(f[e].logged=!0,o(f[e].displayId,f[e].error)))}function n(e){f[e].logged&&(t.onHandled?t.onHandled(f[e].displayId,f[e].error):f[e].onUnhandled||(console.warn("Promise Rejection Handled (id: "+f[e].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+f[e].displayId+".")))}t=t||{},c&&r(),c=!0;var i=0,l=0,f={};s._47=function(t){2===t._83&&f[t._56]&&(f[t._56].logged?n(t._56):clearTimeout(f[t._56].timeout),delete f[t._56])},s._71=function(t,n){0===t._75&&(t._56=i++,f[t._56]={displayId:null,error:n,timeout:setTimeout(e.bind(null,t._56),a(n,u)?100:2e3),logged:!1})}}function o(t,e){console.warn("Possible Unhandled Promise Rejection (id: "+t+"):"),((e&&(e.stack||e))+"").split("\n").forEach(function(t){console.warn("  "+t)})}function a(t,e){return e.some(function(e){return t instanceof e})}var s=n(338),u=[ReferenceError,TypeError,RangeError],c=!1;e.disable=r,e.enable=i},function(t,e,n){"use strict";(function(e){function n(t){a.length||(o(),s=!0),a[a.length]=t}function r(){for(;u<a.length;){var t=u;if(u+=1,a[t].call(),u>c){for(var e=0,n=a.length-u;e<n;e++)a[e]=a[e+u];a.length-=u,u=0}}a.length=0,u=0,s=!1}function i(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}t.exports=n;var o,a=[],s=!1,u=0,c=1024,l="undefined"!==typeof e?e:self,f=l.MutationObserver||l.WebKitMutationObserver;o="function"===typeof f?function(t){var e=1,n=new f(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(e,n(80))},function(t,e,n){"use strict";function r(t){var e=new i(i._44);return e._83=1,e._18=t,e}var i=n(338);t.exports=i;var o=r(!0),a=r(!1),s=r(null),u=r(void 0),c=r(0),l=r("");i.resolve=function(t){if(t instanceof i)return t;if(null===t)return s;if(void 0===t)return u;if(!0===t)return o;if(!1===t)return a;if(0===t)return c;if(""===t)return l;if("object"===typeof t||"function"===typeof t)try{var e=t.then;if("function"===typeof e)return new i(e.bind(t))}catch(t){return new i(function(e,n){n(t)})}return r(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i(function(t,n){function r(a,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(a,s._18):(2===s._83&&n(s._18),void s.then(function(t){r(a,t)},n))}var u=s.then;if("function"===typeof u){return void new i(u.bind(s)).then(function(t){r(a,t)},n)}}e[a]=s,0===--o&&t(e)}if(0===e.length)return t([]);for(var o=e.length,a=0;a<e.length;a++)r(a,e[a])})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){t.forEach(function(t){i.resolve(t).then(e,n)})})},i.prototype.catch=function(t){return this.then(null,t)}},function(t,e){!function(t){"use strict";function e(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!==typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"===typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g.arrayBuffer&&g.blob&&_(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return x.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(g.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&y.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var w=[301,302,303,307,308];m.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new m(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),i=n.n(r),o=n(229),a=n.n(o),s=n(652),u=(n.n(s),n(655)),c=n(1269),l=(n.n(c),n(1471));a.a.render(i.a.createElement(u.a,null),document.getElementById("root")),Object(l.a)()},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){"use strict";function r(t){return(""+t).replace(b,"$&/")}function i(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,n){var r=t.func,i=t.context;r.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var r=i.getPooled(e,n);g(t,o,r),i.release(r)}function s(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function u(t,e,n){var i=t.result,o=t.keyPrefix,a=t.func,s=t.context,u=a.call(s,e,t.count++);Array.isArray(u)?c(u,i,n,m.thatReturnsArgument):null!=u&&(v.isValidElement(u)&&(u=v.cloneAndReplaceKey(u,o+(!u.key||e&&e.key===u.key?"":r(u.key)+"/")+n)),i.push(u))}function c(t,e,n,i,o){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(e,a,i,o);g(t,u,c),s.release(c)}function l(t,e,n){if(null==t)return t;var r=[];return c(t,r,null,e,n),r}function f(t,e,n){return null}function h(t,e){return g(t,f,null)}function p(t){var e=[];return c(t,e,null,m.thatReturnsArgument),e}var d=n(561),v=n(131),m=n(71),g=n(562),y=d.twoArgumentPooler,_=d.fourArgumentPooler,b=/\/+/g;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},d.addPoolingTo(i,y),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},d.addPoolingTo(s,_);var x={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:h,toArray:p};t.exports=x},function(t,e,n){"use strict";var r=n(150),i=(n(18),function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)}),o=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},a=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},s=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},u=function(t){var e=this;t instanceof e||r("25"),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},c=i,l=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||c,n.poolSize||(n.poolSize=10),n.release=u,n},f={addPoolingTo:l,oneArgumentPooler:i,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s};t.exports=f},function(t,e,n){"use strict";function r(t,e){return t&&"object"===typeof t&&null!=t.key?c.escape(t.key):e.toString(36)}function i(t,e,n,o){var h=typeof t;if("undefined"!==h&&"boolean"!==h||(t=null),null===t||"string"===h||"number"===h||"object"===h&&t.$$typeof===s)return n(o,t,""===e?l+r(t,0):e),1;var p,d,v=0,m=""===e?l:e+f;if(Array.isArray(t))for(var g=0;g<t.length;g++)p=t[g],d=m+r(p,g),v+=i(p,d,n,o);else{var y=u(t);if(y){var _,b=y.call(t);if(y!==t.entries)for(var x=0;!(_=b.next()).done;)p=_.value,d=m+r(p,x++),v+=i(p,d,n,o);else for(;!(_=b.next()).done;){var w=_.value;w&&(p=w[1],d=m+c.escape(w[0])+f+r(p,0),v+=i(p,d,n,o))}}else if("object"===h){var E="",S=String(t);a("31","[object Object]"===S?"object with keys {"+Object.keys(t).join(", ")+"}":S,E)}}return v}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=n(150),s=(n(81),n(342)),u=n(563),c=(n(18),n(564)),l=(n(26),"."),f=":";t.exports=o},function(t,e,n){"use strict";function r(t){var e=t&&(i&&t[i]||t[o]);if("function"===typeof e)return e}var i="function"===typeof Symbol&&Symbol.iterator,o="@@iterator";t.exports=r},function(t,e,n){"use strict";function r(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function i(t){var e=/(=0|=2)/g,n={"=0":"=","=2":":"};return(""+("."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1))).replace(e,function(t){return n[t]})}var o={escape:r,unescape:i};t.exports=o},function(t,e,n){"use strict";var r=n(131),i=r.createFactory,o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};t.exports=o},function(t,e,n){"use strict";var r=n(131),i=r.isValidElement,o=n(343);t.exports=o(i)},function(t,e,n){"use strict";function r(){return null}var i=n(568),o=n(28),a=n(344),s=n(570),u=n(571),c=function(){};t.exports=function(t,e){function n(t){var e=t&&(C&&t[C]||t[k]);if("function"===typeof e)return e}function l(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function f(t,e){this.message=t,this.data=e&&"object"===typeof e?e:{},this.stack=""}function h(t){function n(n,r,i,o,s,u,c){if(o=o||M,u=u||i,c!==a){if(e){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}return null==r[i]?n?new f(null===r[i]?"The "+s+" `"+u+"` is marked as required in `"+o+"`, but its value is `null`.":"The "+s+" `"+u+"` is marked as required in `"+o+"`, but its value is `undefined`."):null:t(r,i,o,s,u)}var r=n.bind(null,!1);return r.isRequired=n.bind(null,!0),r}function p(t){function e(e,n,r,i,o,a){var s=e[n];if(S(s)!==t)return new f("Invalid "+i+" `"+o+"` of type `"+O(s)+"` supplied to `"+r+"`, expected `"+t+"`.",{expectedType:t});return null}return h(e)}function d(t){function e(e,n,r,i,o){if("function"!==typeof t)return new f("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){return new f("Invalid "+i+" `"+o+"` of type `"+S(s)+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<s.length;u++){var c=t(s,u,r,i,o+"["+u+"]",a);if(c instanceof Error)return c}return null}return h(e)}function v(t){function e(e,n,r,i,o){if(!(e[n]instanceof t)){var a=t.name||M;return new f("Invalid "+i+" `"+o+"` of type `"+A(e[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null}return h(e)}function m(t){function e(e,n,r,i,o){for(var a=e[n],s=0;s<t.length;s++)if(l(a,t[s]))return null;var u=JSON.stringify(t,function(t,e){return"symbol"===O(e)?String(e):e});return new f("Invalid "+i+" `"+o+"` of value `"+String(a)+"` supplied to `"+r+"`, expected one of "+u+".")}return Array.isArray(t)?h(e):r}function g(t){function e(e,n,r,i,o){if("function"!==typeof t)return new f("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var u=e[n],c=S(u);if("object"!==c)return new f("Invalid "+i+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var l in u)if(s(u,l)){var h=t(u,l,r,i,o+"."+l,a);if(h instanceof Error)return h}return null}return h(e)}function y(t){function e(e,n,r,i,o){for(var u=[],c=0;c<t.length;c++){var l=t[c],h=l(e,n,r,i,o,a);if(null==h)return null;h.data&&s(h.data,"expectedType")&&u.push(h.data.expectedType)}return new f("Invalid "+i+" `"+o+"` supplied to `"+r+"`"+(u.length>0?", expected one of type ["+u.join(", ")+"]":"")+".")}if(!Array.isArray(t))return r;for(var n=0;n<t.length;n++){var i=t[n];if("function"!==typeof i)return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+T(i)+" at index "+n+"."),r}return h(e)}function _(t,e,n,r,i){return new f((t||"React class")+": "+e+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+i+"`.")}function b(t){function e(e,n,r,i,o){var s=e[n],u=S(s);if("object"!==u)return new f("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var c in t){var l=t[c];if("function"!==typeof l)return _(r,i,o,c,O(l));var h=l(s,c,r,i,o+"."+c,a);if(h)return h}return null}return h(e)}function x(t){function e(e,n,r,i,u){var c=e[n],l=S(c);if("object"!==l)return new f("Invalid "+i+" `"+u+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var h=o({},e[n],t);for(var p in h){var d=t[p];if(s(t,p)&&"function"!==typeof d)return _(r,i,u,p,O(d));if(!d)return new f("Invalid "+i+" `"+u+"` key `"+p+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(e[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(t),null,"  "));var v=d(c,p,r,i,u+"."+p,a);if(v)return v}return null}return h(e)}function w(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(w);if(null===e||t(e))return!0;var r=n(e);if(!r)return!1;var i,o=r.call(e);if(r!==e.entries){for(;!(i=o.next()).done;)if(!w(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!w(a[1]))return!1}return!0;default:return!1}}function E(t,e){return"symbol"===t||!!e&&("Symbol"===e["@@toStringTag"]||"function"===typeof Symbol&&e instanceof Symbol)}function S(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":E(e,t)?"symbol":e}function O(t){if("undefined"===typeof t||null===t)return""+t;var e=S(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function T(t){var e=O(t);switch(e){case"array":case"object":return"an "+e;case"boolean":case"date":case"regexp":return"a "+e;default:return e}}function A(t){return t.constructor&&t.constructor.name?t.constructor.name:M}var C="function"===typeof Symbol&&Symbol.iterator,k="@@iterator",M="<<anonymous>>",P={array:p("array"),bigint:p("bigint"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return h(r)}(),arrayOf:d,element:function(){function e(e,n,r,i,o){var a=e[n];if(!t(a)){return new f("Invalid "+i+" `"+o+"` of type `"+S(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return h(e)}(),elementType:function(){function t(t,e,n,r,o){var a=t[e];if(!i.isValidElementType(a)){return new f("Invalid "+r+" `"+o+"` of type `"+S(a)+"` supplied to `"+n+"`, expected a single ReactElement type.")}return null}return h(t)}(),instanceOf:v,node:function(){function t(t,e,n,r,i){return w(t[e])?null:new f("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}return h(t)}(),objectOf:g,oneOf:m,oneOfType:y,shape:b,exact:x};return f.prototype=Error.prototype,P.checkPropTypes=u,P.resetWarningCache=u.resetWarningCache,P.PropTypes=P,P}},function(t,e,n){"use strict";t.exports=n(569)},function(t,e,n){"use strict";function r(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case a:switch(t=t.type){case p:case d:case u:case l:case c:case m:return t;default:switch(t=t&&t.$$typeof){case h:case v:case _:case y:case f:return t;default:return e}}case s:return e}}}function i(t){return r(t)===d}var o="function"===typeof Symbol&&Symbol.for,a=o?Symbol.for("react.element"):60103,s=o?Symbol.for("react.portal"):60106,u=o?Symbol.for("react.fragment"):60107,c=o?Symbol.for("react.strict_mode"):60108,l=o?Symbol.for("react.profiler"):60114,f=o?Symbol.for("react.provider"):60109,h=o?Symbol.for("react.context"):60110,p=o?Symbol.for("react.async_mode"):60111,d=o?Symbol.for("react.concurrent_mode"):60111,v=o?Symbol.for("react.forward_ref"):60112,m=o?Symbol.for("react.suspense"):60113,g=o?Symbol.for("react.suspense_list"):60120,y=o?Symbol.for("react.memo"):60115,_=o?Symbol.for("react.lazy"):60116,b=o?Symbol.for("react.block"):60121,x=o?Symbol.for("react.fundamental"):60117,w=o?Symbol.for("react.responder"):60118,E=o?Symbol.for("react.scope"):60119;e.AsyncMode=p,e.ConcurrentMode=d,e.ContextConsumer=h,e.ContextProvider=f,e.Element=a,e.ForwardRef=v,e.Fragment=u,e.Lazy=_,e.Memo=y,e.Portal=s,e.Profiler=l,e.StrictMode=c,e.Suspense=m,e.isAsyncMode=function(t){return i(t)||r(t)===p},e.isConcurrentMode=i,e.isContextConsumer=function(t){return r(t)===h},e.isContextProvider=function(t){return r(t)===f},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===a},e.isForwardRef=function(t){return r(t)===v},e.isFragment=function(t){return r(t)===u},e.isLazy=function(t){return r(t)===_},e.isMemo=function(t){return r(t)===y},e.isPortal=function(t){return r(t)===s},e.isProfiler=function(t){return r(t)===l},e.isStrictMode=function(t){return r(t)===c},e.isSuspense=function(t){return r(t)===m},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===u||t===d||t===l||t===c||t===m||t===g||"object"===typeof t&&null!==t&&(t.$$typeof===_||t.$$typeof===y||t.$$typeof===f||t.$$typeof===h||t.$$typeof===v||t.$$typeof===x||t.$$typeof===w||t.$$typeof===E||t.$$typeof===b)},e.typeOf=r},function(t,e){t.exports=Function.call.bind(Object.prototype.hasOwnProperty)},function(t,e,n){"use strict";function r(t,e,n,r,i){}r.resetWarningCache=function(){},t.exports=r},function(t,e,n){"use strict";t.exports="15.7.0"},function(t,e,n){"use strict";var r=n(339),i=r.Component,o=n(131),a=o.isValidElement,s=n(340),u=n(574);t.exports=u(i,a,s)},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){if(u(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],f=0;c=new Error(e.replace(/%s/g,function(){return l[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}function i(t){return t}function o(t,e,n){function o(t,e){var n=y.hasOwnProperty(e)?y[e]:null;E.hasOwnProperty(e)&&r("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&r("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function u(t,n){if(n){r("function"!==typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),r(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var i=t.prototype,a=i.__reactAutoBindPairs;n.hasOwnProperty(c)&&b.mixins(t,n.mixins);for(var s in n)if(n.hasOwnProperty(s)&&s!==c){var u=n[s],l=i.hasOwnProperty(s);if(o(l,s),b.hasOwnProperty(s))b[s](t,u);else{var f=y.hasOwnProperty(s),d="function"===typeof u,v=d&&!f&&!l&&!1!==n.autobind;if(v)a.push(s,u),i[s]=u;else if(l){var m=y[s];r(f&&("DEFINE_MANY_MERGED"===m||"DEFINE_MANY"===m),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",m,s),"DEFINE_MANY_MERGED"===m?i[s]=h(i[s],u):"DEFINE_MANY"===m&&(i[s]=p(i[s],u))}else i[s]=u}}}else;}function l(t,e){if(e)for(var n in e){var i=e[n];if(e.hasOwnProperty(n)){var o=n in b;r(!o,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var a=n in t;if(a){var s=_.hasOwnProperty(n)?_[n]:null;return r("DEFINE_MANY_MERGED"===s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=h(t[n],i))}t[n]=i}}}function f(t,e){r(t&&e&&"object"===typeof t&&"object"===typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var n in e)e.hasOwnProperty(n)&&(r(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function h(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return f(i,n),f(i,r),i}}function p(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function d(t,e){var n=e.bind(t);return n}function v(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=d(t,i)}}function m(t){var e=i(function(t,i,o){this.__reactAutoBindPairs.length&&v(this),this.props=t,this.context=i,this.refs=s,this.updater=o||n,this.state=null;var a=this.getInitialState?this.getInitialState():null;r("object"===typeof a&&!Array.isArray(a),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=a});e.prototype=new S,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],g.forEach(u.bind(null,e)),u(e,x),u(e,t),u(e,w),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),r(e.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var o in y)e.prototype[o]||(e.prototype[o]=null);return e}var g=[],y={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},_={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},b={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)u(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=a({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=a({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=h(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=a({},t.propTypes,e)},statics:function(t,e){l(t,e)},autobind:function(){}},x={componentDidMount:function(){this.__isMounted=!0}},w={componentWillUnmount:function(){this.__isMounted=!1}},E={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},S=function(){};return a(S.prototype,t.prototype,E),m}var a=n(28),s={},u=function(t){},c="mixins";t.exports=o},function(t,e,n){"use strict";function r(t){return o.isValidElement(t)||i("143"),t}var i=n(150),o=n(131);n(18);t.exports=r},function(t,e,n){"use strict";var r=n(31),i=n(577),o=n(368),a=n(133),s=n(72),u=n(649),c=n(650),l=n(369),f=n(651);n(26);i.inject();var h={findDOMNode:c,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:f};"undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=l(t)),t?r.getNodeFromInstance(t):null}},Mount:o,Reconciler:a});t.exports=h},function(t,e,n){"use strict";function r(){E||(E=!0,y.EventEmitter.injectReactEventListener(g),y.EventPluginHub.injectEventPluginOrder(s),y.EventPluginUtils.injectComponentTree(h),y.EventPluginUtils.injectTreeTraversal(d),y.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:u,ChangeEventPlugin:a,SelectEventPlugin:x,BeforeInputEventPlugin:o}),y.HostComponent.injectGenericComponentClass(f),y.HostComponent.injectTextComponentClass(v),y.DOMProperty.injectDOMPropertyConfig(i),y.DOMProperty.injectDOMPropertyConfig(c),y.DOMProperty.injectDOMPropertyConfig(b),y.EmptyComponent.injectEmptyComponentFactory(function(t){return new p(t)}),y.Updates.injectReconcileTransaction(_),y.Updates.injectBatchingStrategy(m),y.Component.injectEnvironment(l))}var i=n(578),o=n(579),a=n(583),s=n(586),u=n(587),c=n(588),l=n(589),f=n(595),h=n(31),p=n(620),d=n(621),v=n(622),m=n(623),g=n(624),y=n(626),_=n(627),b=n(633),x=n(634),w=n(635),E=!1;t.exports={inject:r}},function(t,e,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};t.exports=r},function(t,e,n){"use strict";function r(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function i(t){switch(t){case"topCompositionStart":return O.compositionStart;case"topCompositionEnd":return O.compositionEnd;case"topCompositionUpdate":return O.compositionUpdate}}function o(t,e){return"topKeyDown"===t&&e.keyCode===y}function a(t,e){switch(t){case"topKeyUp":return-1!==g.indexOf(e.keyCode);case"topKeyDown":return e.keyCode!==y;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function s(t){var e=t.detail;return"object"===typeof e&&"data"in e?e.data:null}function u(t,e,n,r){var u,c;if(_?u=i(t):A?a(t,n)&&(u=O.compositionEnd):o(t,n)&&(u=O.compositionStart),!u)return null;w&&(A||u!==O.compositionStart?u===O.compositionEnd&&A&&(c=A.getData()):A=d.getPooled(r));var l=v.getPooled(u,e,n,r);if(c)l.data=c;else{var f=s(n);null!==f&&(l.data=f)}return h.accumulateTwoPhaseDispatches(l),l}function c(t,e){switch(t){case"topCompositionEnd":return s(e);case"topKeyPress":return e.which!==E?null:(T=!0,S);case"topTextInput":var n=e.data;return n===S&&T?null:n;default:return null}}function l(t,e){if(A){if("topCompositionEnd"===t||!_&&a(t,e)){var n=A.getData();return d.release(A),A=null,n}return null}switch(t){case"topPaste":return null;case"topKeyPress":return e.which&&!r(e)?String.fromCharCode(e.which):null;case"topCompositionEnd":return w?null:e.data;default:return null}}function f(t,e,n,r){var i;if(!(i=x?c(t,n):l(t,n)))return null;var o=m.getPooled(O.beforeInput,e,n,r);return o.data=i,h.accumulateTwoPhaseDispatches(o),o}var h=n(151),p=n(45),d=n(580),v=n(581),m=n(582),g=[9,13,27,32],y=229,_=p.canUseDOM&&"CompositionEvent"in window,b=null;p.canUseDOM&&"documentMode"in document&&(b=document.documentMode);var x=p.canUseDOM&&"TextEvent"in window&&!b&&!function(){var t=window.opera;return"object"===typeof t&&"function"===typeof t.version&&parseInt(t.version(),10)<=12}(),w=p.canUseDOM&&(!_||b&&b>8&&b<=11),E=32,S=String.fromCharCode(E),O={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},T=!1,A=null,C={eventTypes:O,extractEvents:function(t,e,n,r){return[u(t,e,n,r),f(t,e,n,r)]}};t.exports=C},function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=n(28),o=n(99),a=n(348);i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),o.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(82),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(82),o={data:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n){var r=T.getPooled(P.change,t,e,n);return r.type="change",w.accumulateTwoPhaseDispatches(r),r}function i(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function o(t){var e=r(I,t,C(t));O.batchedUpdates(a,e)}function a(t){x.enqueueEvents(t),x.processEventQueue(!1)}function s(t,e){j=t,I=e,j.attachEvent("onchange",o)}function u(){j&&(j.detachEvent("onchange",o),j=null,I=null)}function c(t,e){var n=A.updateValueIfChanged(t),r=!0===e.simulated&&D._allowSimulatedPassThrough;if(n||r)return t}function l(t,e){if("topChange"===t)return e}function f(t,e,n){"topFocus"===t?(u(),s(e,n)):"topBlur"===t&&u()}function h(t,e){j=t,I=e,j.attachEvent("onpropertychange",d)}function p(){j&&(j.detachEvent("onpropertychange",d),j=null,I=null)}function d(t){"value"===t.propertyName&&c(I,t)&&o(t)}function v(t,e,n){"topFocus"===t?(p(),h(e,n)):"topBlur"===t&&p()}function m(t,e,n){if("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)return c(I,n)}function g(t){var e=t.nodeName;return e&&"input"===e.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function y(t,e,n){if("topClick"===t)return c(e,n)}function _(t,e,n){if("topInput"===t||"topChange"===t)return c(e,n)}function b(t,e){if(null!=t){var n=t._wrapperState||e._wrapperState;if(n&&n.controlled&&"number"===e.type){var r=""+e.value;e.getAttribute("value")!==r&&e.setAttribute("value",r)}}}var x=n(152),w=n(151),E=n(45),S=n(31),O=n(72),T=n(82),A=n(351),C=n(233),k=n(234),M=n(352),P={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},j=null,I=null,R=!1;E.canUseDOM&&(R=k("change")&&(!document.documentMode||document.documentMode>8));var L=!1;E.canUseDOM&&(L=k("input")&&(!document.documentMode||document.documentMode>9));var D={eventTypes:P,_allowSimulatedPassThrough:!0,_isInputEventSupported:L,extractEvents:function(t,e,n,o){var a,s,u=e?S.getNodeFromInstance(e):window;if(i(u)?R?a=l:s=f:M(u)?L?a=_:(a=m,s=v):g(u)&&(a=y),a){var c=a(t,e,n);if(c){return r(c,n,o)}}s&&s(t,u,e),"topBlur"===t&&b(e,u)}};t.exports=D},function(t,e,n){"use strict";function r(t,e,n){"function"===typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"===typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=n(585),a={};a.attachRefs=function(t,e){if(null!==e&&"object"===typeof e){var n=e.ref;null!=n&&r(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null,r=null;null!==t&&"object"===typeof t&&(n=t.ref,r=t._owner);var i=null,o=null;return null!==e&&"object"===typeof e&&(i=e.ref,o=e._owner),n!==i||"string"===typeof i&&o!==r},a.detachRefs=function(t,e){if(null!==e&&"object"===typeof e){var n=e.ref;null!=n&&i(n,t,e._owner)}},t.exports=a},function(t,e,n){"use strict";function r(t){return!(!t||"function"!==typeof t.attachRef||"function"!==typeof t.detachRef)}var i=n(25),o=(n(18),{addComponentAsRefTo:function(t,e,n){r(n)||i("119"),n.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,n){r(n)||i("120");var o=n.getPublicInstance();o&&o.refs[e]===t.getPublicInstance()&&n.detachRef(e)}});t.exports=o},function(t,e,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];t.exports=r},function(t,e,n){"use strict";var r=n(151),i=n(31),o=n(172),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(t,e,n,s){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==t&&"topMouseOver"!==t)return null;var u;if(s.window===s)u=s;else{var c=s.ownerDocument;u=c?c.defaultView||c.parentWindow:window}var l,f;if("topMouseOut"===t){l=e;var h=n.relatedTarget||n.toElement;f=h?i.getClosestInstanceFromNode(h):null}else l=null,f=e;if(l===f)return null;var p=null==l?u:i.getNodeFromInstance(l),d=null==f?u:i.getNodeFromInstance(f),v=o.getPooled(a.mouseLeave,l,n,s);v.type="mouseleave",v.target=p,v.relatedTarget=d;var m=o.getPooled(a.mouseEnter,f,n,s);return m.type="mouseenter",m.target=d,m.relatedTarget=p,r.accumulateEnterLeaveDispatches(v,m,l,f),[v,m]}};t.exports=s},function(t,e,n){"use strict";var r=n(132),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,controlsList:0,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{},DOMMutationMethods:{value:function(t,e){if(null==e)return t.removeAttribute("value");"number"!==t.type||!1===t.hasAttribute("value")?t.setAttribute("value",""+e):t.validity&&!t.validity.badInput&&t.ownerDocument.activeElement!==t&&t.setAttribute("value",""+e)}}};t.exports=c},function(t,e,n){"use strict";var r=n(236),i=n(594),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};t.exports=o},function(t,e,n){"use strict";var r=n(25),i=n(134),o=n(45),a=n(591),s=n(71),u=(n(18),{dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM||r("56"),e||r("57"),"HTML"===t.nodeName&&r("58"),"string"===typeof e){var n=a(e,s)[0];t.parentNode.replaceChild(n,t)}else i.replaceChildWithTree(t,e)}});t.exports=u},function(t,e,n){"use strict";function r(t){var e=t.match(l);return e&&e[1].toLowerCase()}function i(t,e){var n=c;c||u(!1);var i=r(t),o=i&&s(i);if(o){n.innerHTML=o[1]+t+o[2];for(var l=o[0];l--;)n=n.lastChild}else n.innerHTML=t;var f=n.getElementsByTagName("script");f.length&&(e||u(!1),a(f).forEach(e));for(var h=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var o=n(45),a=n(592),s=n(593),u=n(18),c=o.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=i},function(t,e,n){"use strict";function r(t){var e=t.length;if((Array.isArray(t)||"object"!==typeof t&&"function"!==typeof t)&&a(!1),"number"!==typeof e&&a(!1),0===e||e-1 in t||a(!1),"function"===typeof t.callee&&a(!1),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(t){}for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}function i(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return i(t)?Array.isArray(t)?t.slice():r(t):[t]}var a=n(18);t.exports=o},function(t,e,n){"use strict";function r(t){return a||o(!1),h.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||(a.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?h[t]:null}var i=n(45),o=n(18),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],f=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(t){h[t]=f,s[t]=!0}),t.exports=r},function(t,e,n){"use strict";var r=n(236),i=n(31),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=i.getNodeFromInstance(t);r.processUpdates(n,e)}};t.exports=o},function(t,e,n){"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(t,e){e&&(Y[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&m("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&m("60"),"object"===typeof e.dangerouslySetInnerHTML&&G in e.dangerouslySetInnerHTML||m("61")),null!=e.style&&"object"!==typeof e.style&&m("62",r(t)))}function o(t,e,n,r){if(!(r instanceof R)){var i=t._hostContainerInfo,o=i._node&&i._node.nodeType===W,s=o?i._node:i._ownerDocument;B(e,s),r.getReactMountReady().enqueue(a,{inst:t,registrationName:e,listener:n})}}function a(){var t=this;S.putListener(t.inst,t.registrationName,t.listener)}function s(){var t=this;k.postMountWrapper(t)}function u(){var t=this;j.postMountWrapper(t)}function c(){var t=this;M.postMountWrapper(t)}function l(){D.track(this)}function f(){var t=this;t._rootNodeID||m("63");var e=F(t);switch(e||m("64"),t._tag){case"iframe":case"object":t._wrapperState.listeners=[T.trapBubbledEvent("topLoad","load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var n in q)q.hasOwnProperty(n)&&t._wrapperState.listeners.push(T.trapBubbledEvent(n,q[n],e));break;case"source":t._wrapperState.listeners=[T.trapBubbledEvent("topError","error",e)];break;case"img":t._wrapperState.listeners=[T.trapBubbledEvent("topError","error",e),T.trapBubbledEvent("topLoad","load",e)];break;case"form":t._wrapperState.listeners=[T.trapBubbledEvent("topReset","reset",e),T.trapBubbledEvent("topSubmit","submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[T.trapBubbledEvent("topInvalid","invalid",e)]}}function h(){P.postUpdateWrapper(this)}function p(t){Q.call(J,t)||(K.test(t)||m("65",t),J[t]=!0)}function d(t,e){return t.indexOf("-")>=0||null!=e.is}function v(t){var e=t.type;p(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=n(25),g=n(28),y=n(596),_=n(597),b=n(134),x=n(237),w=n(132),E=n(357),S=n(152),O=n(230),T=n(175),A=n(345),C=n(31),k=n(607),M=n(609),P=n(358),j=n(610),I=(n(61),n(611)),R=n(618),L=(n(71),n(174)),D=(n(18),n(234),n(241),n(351)),N=(n(245),n(26),A),z=S.deleteListener,F=C.getNodeFromInstance,B=T.listenTo,U=O.registrationNameModules,V={string:!0,number:!0},G="__html",H={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},W=11,q={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Z={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},X={listing:!0,pre:!0,textarea:!0},Y=g({menuitem:!0},Z),K=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,J={},Q={}.hasOwnProperty,$=1;v.displayName="ReactDOMComponent",v.Mixin={mountComponent:function(t,e,n,r){this._rootNodeID=$++,this._domID=n._idCounter++,this._hostParent=e,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(f,this);break;case"input":k.mountWrapper(this,o,e),o=k.getHostProps(this,o),t.getReactMountReady().enqueue(l,this),t.getReactMountReady().enqueue(f,this);break;case"option":M.mountWrapper(this,o,e),o=M.getHostProps(this,o);break;case"select":P.mountWrapper(this,o,e),o=P.getHostProps(this,o),t.getReactMountReady().enqueue(f,this);break;case"textarea":j.mountWrapper(this,o,e),o=j.getHostProps(this,o),t.getReactMountReady().enqueue(l,this),t.getReactMountReady().enqueue(f,this)}i(this,o);var a,h;null!=e?(a=e._namespaceURI,h=e._tag):n._tag&&(a=n._namespaceURI,h=n._tag),(null==a||a===x.svg&&"foreignobject"===h)&&(a=x.html),a===x.html&&("svg"===this._tag?a=x.svg:"math"===this._tag&&(a=x.mathml)),this._namespaceURI=a;var p;if(t.useCreateElement){var d,v=n._ownerDocument;if(a===x.html)if("script"===this._tag){var m=v.createElement("div"),g=this._currentElement.type;m.innerHTML="<"+g+"></"+g+">",d=m.removeChild(m.firstChild)}else d=o.is?v.createElement(this._currentElement.type,o.is):v.createElement(this._currentElement.type);else d=v.createElementNS(a,this._currentElement.type);C.precacheNode(this,d),this._flags|=N.hasCachedChildNodes,this._hostParent||E.setAttributeForRoot(d),this._updateDOMProperties(null,o,t);var _=b(d);this._createInitialChildren(t,o,r,_),p=_}else{var w=this._createOpenTagMarkupAndPutListeners(t,o),S=this._createContentMarkup(t,o,r);p=!S&&Z[this._tag]?w+"/>":w+">"+S+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(s,this),o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(u,this),o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"select":case"button":o.autoFocus&&t.getReactMountReady().enqueue(y.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(c,this)}return p},_createOpenTagMarkupAndPutListeners:function(t,e){var n="<"+this._currentElement.type;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i)if(U.hasOwnProperty(r))i&&o(this,r,i,t);else{"style"===r&&(i&&(i=this._previousStyleCopy=g({},e.style)),i=_.createMarkupForStyles(i,this));var a=null;null!=this._tag&&d(this._tag,e)?H.hasOwnProperty(r)||(a=E.createMarkupForCustomAttribute(r,i)):a=E.createMarkupForProperty(r,i),a&&(n+=" "+a)}}return t.renderToStaticMarkup?n:(this._hostParent||(n+=" "+E.createMarkupForRoot()),n+=" "+E.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,n){var r="",i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&(r=i.__html);else{var o=V[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)r=L(o);else if(null!=a){var s=this.mountChildren(a,t,n);r=s.join("")}}return X[this._tag]&&"\n"===r.charAt(0)?"\n"+r:r},_createInitialChildren:function(t,e,n,r){var i=e.dangerouslySetInnerHTML;if(null!=i)null!=i.__html&&b.queueHTML(r,i.__html);else{var o=V[typeof e.children]?e.children:null,a=null!=o?null:e.children;if(null!=o)""!==o&&b.queueText(r,o);else if(null!=a)for(var s=this.mountChildren(a,t,n),u=0;u<s.length;u++)b.queueChild(r,s[u])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,r){var o=e.props,a=this._currentElement.props;switch(this._tag){case"input":o=k.getHostProps(this,o),a=k.getHostProps(this,a);break;case"option":o=M.getHostProps(this,o),a=M.getHostProps(this,a);break;case"select":o=P.getHostProps(this,o),a=P.getHostProps(this,a);break;case"textarea":o=j.getHostProps(this,o),a=j.getHostProps(this,a)}switch(i(this,a),this._updateDOMProperties(o,a,t),this._updateDOMChildren(o,a,t,r),this._tag){case"input":k.updateWrapper(this),D.updateValueIfChanged(this);break;case"textarea":j.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(h,this)}},_updateDOMProperties:function(t,e,n){var r,i,a;for(r in t)if(!e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&null!=t[r])if("style"===r){var s=this._previousStyleCopy;for(i in s)s.hasOwnProperty(i)&&(a=a||{},a[i]="");this._previousStyleCopy=null}else U.hasOwnProperty(r)?t[r]&&z(this,r):d(this._tag,t)?H.hasOwnProperty(r)||E.deleteValueForAttribute(F(this),r):(w.properties[r]||w.isCustomAttribute(r))&&E.deleteValueForProperty(F(this),r);for(r in e){var u=e[r],c="style"===r?this._previousStyleCopy:null!=t?t[r]:void 0;if(e.hasOwnProperty(r)&&u!==c&&(null!=u||null!=c))if("style"===r)if(u?u=this._previousStyleCopy=g({},u):this._previousStyleCopy=null,c){for(i in c)!c.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(a=a||{},a[i]="");for(i in u)u.hasOwnProperty(i)&&c[i]!==u[i]&&(a=a||{},a[i]=u[i])}else a=u;else if(U.hasOwnProperty(r))u?o(this,r,u,n):c&&z(this,r);else if(d(this._tag,e))H.hasOwnProperty(r)||E.setValueForAttribute(F(this),r,u);else if(w.properties[r]||w.isCustomAttribute(r)){var l=F(this);null!=u?E.setValueForProperty(l,r,u):E.deleteValueForProperty(l,r)}}a&&_.setValueForStyles(F(this),a,this)},_updateDOMChildren:function(t,e,n,r){var i=V[typeof t.children]?t.children:null,o=V[typeof e.children]?e.children:null,a=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=null!=i?null:t.children,c=null!=o?null:e.children,l=null!=i||null!=a,f=null!=o||null!=s;null!=u&&null==c?this.updateChildren(null,n,r):l&&!f&&this.updateTextContent(""),null!=o?i!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=c&&this.updateChildren(c,n,r)},getHostNode:function(){return F(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var n=0;n<e.length;n++)e[n].remove();break;case"input":case"textarea":D.stopTracking(this);break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(t),C.uncacheNode(this),S.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return F(this)}},g(v.prototype,v.Mixin,I.Mixin),t.exports=v},function(t,e,n){"use strict";var r=n(31),i=n(355),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};t.exports=o},function(t,e,n){"use strict";var r=n(356),i=n(45),o=(n(61),n(598),n(600)),a=n(601),s=n(603),u=(n(26),s(function(t){return a(t)})),c=!1,l="cssFloat";if(i.canUseDOM){var f=document.createElement("div").style;try{f.font=""}catch(t){c=!0}void 0===document.documentElement.style.cssFloat&&(l="styleFloat")}var h={createMarkupForStyles:function(t,e){var n="";for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),a=t[r];null!=a&&(n+=u(r)+":",n+=o(r,a,e,i)+";")}return n||null},setValueForStyles:function(t,e,n){var i=t.style;for(var a in e)if(e.hasOwnProperty(a)){var s=0===a.indexOf("--"),u=o(a,e[a],n,s);if("float"!==a&&"cssFloat"!==a||(a=l),s)i.setProperty(a,u);else if(u)i[a]=u;else{var f=c&&r.shorthandPropertyExpansions[a];if(f)for(var h in f)i[h]="";else i[a]=""}}}};t.exports=h},function(t,e,n){"use strict";function r(t){return i(t.replace(o,"ms-"))}var i=n(599),o=/^-ms-/;t.exports=r},function(t,e,n){"use strict";function r(t){return t.replace(i,function(t,e){return e.toUpperCase()})}var i=/-(.)/g;t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){if(null==e||"boolean"===typeof e||""===e)return"";var i=isNaN(e);if(r||i||0===e||o.hasOwnProperty(t)&&o[t])return""+e;if("string"===typeof e){e=e.trim()}return e+"px"}var i=n(356),o=(n(26),i.isUnitlessNumber);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t).replace(o,"-ms-")}var i=n(602),o=/^ms-/;t.exports=r},function(t,e,n){"use strict";function r(t){return t.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=r},function(t,e,n){"use strict";function r(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}t.exports=r},function(t,e,n){"use strict";function r(t){return'"'+i(t)+'"'}var i=n(174);t.exports=r},function(t,e,n){"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=n(152),o={handleTopLevel:function(t,e,n,o){r(i.extractEvents(t,e,n,o))}};t.exports=o},function(t,e,n){"use strict";function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function i(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in u)return s[t]=e[n];return""}var o=n(45),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=i},function(t,e,n){"use strict";function r(){this._rootNodeID&&h.updateWrapper(this)}function i(t){return"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}function o(t){var e=this._currentElement.props,n=c.executeOnChange(e,t);f.asap(r,this);var i=e.name;if("radio"===e.type&&null!=i){for(var o=l.getNodeFromInstance(this),s=o;s.parentNode;)s=s.parentNode;for(var u=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),h=0;h<u.length;h++){var p=u[h];if(p!==o&&p.form===o.form){var d=l.getInstanceFromNode(p);d||a("90"),f.asap(r,d)}}}return n}var a=n(25),s=n(28),u=n(357),c=n(239),l=n(31),f=n(72),h=(n(18),n(26),{getHostProps:function(t,e){var n=c.getValue(e),r=c.getChecked(e);return s({type:void 0,step:void 0,min:void 0,max:void 0},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){var n=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:n,listeners:null,onChange:o.bind(t),controlled:i(e)}},updateWrapper:function(t){var e=t._currentElement.props,n=e.checked;null!=n&&u.setValueForProperty(l.getNodeFromInstance(t),"checked",n||!1);var r=l.getNodeFromInstance(t),i=c.getValue(e);if(null!=i)if(0===i&&""===r.value)r.value="0";else if("number"===e.type){var o=parseFloat(r.value,10)||0;(i!=o||i==o&&r.value!=i)&&(r.value=""+i)}else r.value!==""+i&&(r.value=""+i);else null==e.value&&null!=e.defaultValue&&r.defaultValue!==""+e.defaultValue&&(r.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(r.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}});t.exports=h},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";function r(t){var e="";return o.Children.forEach(t,function(t){null!=t&&("string"===typeof t||"number"===typeof t?e+=t:u||(u=!0))}),e}var i=n(28),o=n(130),a=n(31),s=n(358),u=(n(26),!1),c={mountWrapper:function(t,e,n){var i=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(i=s.getSelectValueContext(o))}var a=null;if(null!=i){var u;if(u=null!=e.value?e.value+"":r(e.children),a=!1,Array.isArray(i)){for(var c=0;c<i.length;c++)if(""+i[c]===u){a=!0;break}}else a=""+i===u}t._wrapperState={selected:a}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){a.getNodeFromInstance(t).setAttribute("value",e.value)}},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var o=r(e.children);return o&&(n.children=o),n}};t.exports=c},function(t,e,n){"use strict";function r(){this._rootNodeID&&l.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return c.asap(r,this),n}var o=n(25),a=n(28),s=n(239),u=n(31),c=n(72),l=(n(18),n(26),{getHostProps:function(t,e){return null!=e.dangerouslySetInnerHTML&&o("91"),a({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){var n=s.getValue(e),r=n;if(null==n){var a=e.defaultValue,u=e.children;null!=u&&(null!=a&&o("92"),Array.isArray(u)&&(u.length<=1||o("93"),u=u[0]),a=""+u),null==a&&(a=""),r=a}t._wrapperState={initialValue:""+r,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=u.getNodeFromInstance(t),r=s.getValue(e);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==e.defaultValue&&(n.defaultValue=i)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=u.getNodeFromInstance(t),n=e.textContent;n===t._wrapperState.initialValue&&(e.value=n)}});t.exports=l},function(t,e,n){"use strict";function r(t,e,n){return{type:"INSERT_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function i(t,e,n){return{type:"MOVE_EXISTING",content:null,fromIndex:t._mountIndex,fromNode:h.getHostNode(t),toIndex:n,afterNode:e}}function o(t,e){return{type:"REMOVE_NODE",content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:"SET_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:"TEXT_CONTENT",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(t,e){return e&&(t=t||[],t.push(e)),t}function c(t,e){f.processChildrenUpdates(t,e)}var l=n(25),f=n(240),h=(n(154),n(61),n(81),n(133)),p=n(612),d=(n(71),n(617)),v=(n(18),{Mixin:{_reconcilerInstantiateChildren:function(t,e,n){return p.instantiateChildren(t,e,n)},_reconcilerUpdateChildren:function(t,e,n,r,i,o){var a,s=0;return a=d(e,s),p.updateChildren(t,a,n,r,i,this,this._hostContainerInfo,o,s),a},mountChildren:function(t,e,n){var r=this._reconcilerInstantiateChildren(t,e,n);this._renderedChildren=r;var i=[],o=0;for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],u=0,c=h.mountComponent(s,e,this,this._hostContainerInfo,n,u);s._mountIndex=o++,i.push(c)}return i},updateTextContent:function(t){var e=this._renderedChildren;p.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&l("118");c(this,[s(t)])},updateMarkup:function(t){var e=this._renderedChildren;p.unmountChildren(e,!1);for(var n in e)e.hasOwnProperty(n)&&l("118");c(this,[a(t)])},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,n){var r=this._renderedChildren,i={},o=[],a=this._reconcilerUpdateChildren(r,t,o,i,e,n);if(a||r){var s,l=null,f=0,p=0,d=0,v=null;for(s in a)if(a.hasOwnProperty(s)){var m=r&&r[s],g=a[s];m===g?(l=u(l,this.moveChild(m,v,f,p)),p=Math.max(m._mountIndex,p),m._mountIndex=f):(m&&(p=Math.max(m._mountIndex,p)),l=u(l,this._mountChildAtIndex(g,o[d],v,f,e,n)),d++),f++,v=h.getHostNode(g)}for(s in i)i.hasOwnProperty(s)&&(l=u(l,this._unmountChild(r[s],i[s])));l&&c(this,l),this._renderedChildren=a}},unmountChildren:function(t){var e=this._renderedChildren;p.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,r){if(t._mountIndex<r)return i(t,e,n)},createChild:function(t,e,n){return r(n,e,t._mountIndex)},removeChild:function(t,e){return o(t,e)},_mountChildAtIndex:function(t,e,n,r,i,o){return t._mountIndex=r,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}});t.exports=v},function(t,e,n){"use strict";(function(e){function r(t,e,n,r){var i=void 0===t[n];null!=e&&i&&(t[n]=o(e,!0))}var i=n(133),o=n(359),a=(n(243),n(242)),s=n(363);n(26);"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"."});var u={instantiateChildren:function(t,e,n,i){if(null==t)return null;var o={};return s(t,r,o),o},updateChildren:function(t,e,n,r,s,u,c,l,f){if(e||t){var h,p;for(h in e)if(e.hasOwnProperty(h)){p=t&&t[h];var d=p&&p._currentElement,v=e[h];if(null!=p&&a(d,v))i.receiveComponent(p,v,s,l),e[h]=p;else{p&&(r[h]=i.getHostNode(p),i.unmountComponent(p,!1));var m=o(v,!0);e[h]=m;var g=i.mountComponent(m,s,u,c,l,f);n.push(g)}}for(h in t)!t.hasOwnProperty(h)||e&&e.hasOwnProperty(h)||(p=t[h],r[h]=i.getHostNode(p),i.unmountComponent(p,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i.unmountComponent(r,e)}}};t.exports=u}).call(e,n(135))},function(t,e,n){"use strict";function r(t){}function i(t){return!(!t.prototype||!t.prototype.isReactComponent)}function o(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}var a=n(25),s=n(28),u=n(130),c=n(240),l=n(81),f=n(232),h=n(154),p=(n(61),n(360)),d=n(133),v=n(228),m=(n(18),n(241)),g=n(242),y=(n(26),{ImpureClass:0,PureClass:1,StatelessFunctional:2});r.prototype.render=function(){var t=h.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return e};var _=1,b={construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(t,e,n,s){this._context=s,this._mountOrder=_++,this._hostParent=e,this._hostContainerInfo=n;var c,l=this._currentElement.props,f=this._processContext(s),p=this._currentElement.type,d=t.getUpdateQueue(),m=i(p),g=this._constructComponent(m,l,f,d);m||null!=g&&null!=g.render?o(p)?this._compositeType=y.PureClass:this._compositeType=y.ImpureClass:(c=g,null===g||!1===g||u.isValidElement(g)||a("105",p.displayName||p.name||"Component"),g=new r(p),this._compositeType=y.StatelessFunctional);g.props=l,g.context=f,g.refs=v,g.updater=d,this._instance=g,h.set(g,this);var b=g.state;void 0===b&&(g.state=b=null),("object"!==typeof b||Array.isArray(b))&&a("106",this.getName()||"ReactCompositeComponent"),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var x;return x=g.unstable_handleError?this.performInitialMountWithErrorHandling(c,e,n,t,s):this.performInitialMount(c,e,n,t,s),g.componentDidMount&&t.getReactMountReady().enqueue(g.componentDidMount,g),x},_constructComponent:function(t,e,n,r){return this._constructComponentWithoutOwner(t,e,n,r)},_constructComponentWithoutOwner:function(t,e,n,r){var i=this._currentElement.type;return t?new i(e,n,r):i(e,n,r)},performInitialMountWithErrorHandling:function(t,e,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(t,e,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(t,e,n,r,i)}return o},performInitialMount:function(t,e,n,r,i){var o=this._instance,a=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===t&&(t=this._renderValidatedComponent());var s=p.getType(t);this._renderedNodeType=s;var u=this._instantiateReactComponent(t,s!==p.EMPTY);this._renderedComponent=u;var c=d.mountComponent(u,r,e,n,this._processChildContext(i),a);return c},getHostNode:function(){return d.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var n=this.getName()+".componentWillUnmount()";f.invokeGuardedCallback(n,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(d.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,h.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return v;var r={};for(var i in n)r[i]=t[i];return r},_processContext:function(t){var e=this._maskContext(t);return e},_processChildContext:function(t){var e,n=this._currentElement.type,r=this._instance;if(r.getChildContext&&(e=r.getChildContext()),e){"object"!==typeof n.childContextTypes&&a("107",this.getName()||"ReactCompositeComponent");for(var i in e)i in n.childContextTypes||a("108",this.getName()||"ReactCompositeComponent",i);return s({},t,e)}return t},_checkContextTypes:function(t,e,n){},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?d.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,n,r,i){var o=this._instance;null==o&&a("136",this.getName()||"ReactCompositeComponent");var s,u=!1;this._context===i?s=o.context:(s=this._processContext(i),u=!0);var c=e.props,l=n.props;e!==n&&(u=!0),u&&o.componentWillReceiveProps&&o.componentWillReceiveProps(l,s);var f=this._processPendingState(l,s),h=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?h=o.shouldComponentUpdate(l,f,s):this._compositeType===y.PureClass&&(h=!m(c,l)||!m(o.state,f))),this._updateBatchNumber=null,h?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,l,f,s,t,i)):(this._currentElement=n,this._context=i,o.props=l,o.state=f,o.context=s)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=s({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var u=r[a];s(o,"function"===typeof u?u.call(n,o,t,e):u)}return o},_performComponentUpdate:function(t,e,n,r,i,o){var a,s,u,c=this._instance,l=Boolean(c.componentDidUpdate);l&&(a=c.props,s=c.state,u=c.context),c.componentWillUpdate&&c.componentWillUpdate(e,n,r),this._currentElement=t,this._context=o,c.props=e,c.state=n,c.context=r,this._updateRenderedComponent(i,o),l&&i.getReactMountReady().enqueue(c.componentDidUpdate.bind(c,a,s,u),c)},_updateRenderedComponent:function(t,e){var n=this._renderedComponent,r=n._currentElement,i=this._renderValidatedComponent(),o=0;if(g(r,i))d.receiveComponent(n,i,t,this._processChildContext(e));else{var a=d.getHostNode(n);d.unmountComponent(n,!1);var s=p.getType(i);this._renderedNodeType=s;var u=this._instantiateReactComponent(i,s!==p.EMPTY);this._renderedComponent=u;var c=d.mountComponent(u,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),o);this._replaceNodeWithMarkup(a,c,n)}},_replaceNodeWithMarkup:function(t,e,n){c.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t=this._instance;return t.render()},_renderValidatedComponent:function(){var t;if(this._compositeType!==y.StatelessFunctional){l.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{l.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||!1===t||u.isValidElement(t)||a("109",this.getName()||"ReactCompositeComponent"),t},attachRef:function(t,e){var n=this.getPublicInstance();null==n&&a("110");var r=e.getPublicInstance();(n.refs===v?n.refs={}:n.refs)[t]=r},detachRef:function(t){delete this.getPublicInstance().refs[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===y.StatelessFunctional?null:t},_instantiateReactComponent:null};t.exports=b},function(t,e,n){"use strict";function r(){return i++}var i=1;t.exports=r},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;t.exports=r},function(t,e,n){"use strict";function r(t){var e=t&&(i&&t[i]||t[o]);if("function"===typeof e)return e}var i="function"===typeof Symbol&&Symbol.iterator,o="@@iterator";t.exports=r},function(t,e,n){"use strict";(function(e){function r(t,e,n,r){if(t&&"object"===typeof t){var i=t,o=void 0===i[n];o&&null!=e&&(i[n]=e)}}function i(t,e){if(null==t)return t;var n={};return o(t,r,n),n}var o=(n(243),n(363));n(26);"undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"."}),t.exports=i}).call(e,n(135))},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new s(this)}var i=n(28),o=n(99),a=n(171),s=(n(61),n(619)),u=[],c={enqueue:function(){}},l={getTransactionWrappers:function(){return u},getReactMountReady:function(){return c},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,l),o.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(244),o=(n(26),function(){function t(e){r(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&i.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()&&i.enqueueForceUpdate(t)},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()&&i.enqueueReplaceState(t,e)},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()&&i.enqueueSetState(t,e)},t}());t.exports=o},function(t,e,n){"use strict";var r=n(28),i=n(134),o=n(31),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(t,e,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var u=n._ownerDocument,c=u.createComment(s);return o.precacheNode(this,c),i(c)}return t.renderToStaticMarkup?"":"\x3c!--"+s+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},function(t,e,n){"use strict";function r(t,e){"_hostNode"in t||u("33"),"_hostNode"in e||u("33");for(var n=0,r=t;r;r=r._hostParent)n++;for(var i=0,o=e;o;o=o._hostParent)i++;for(;n-i>0;)t=t._hostParent,n--;for(;i-n>0;)e=e._hostParent,i--;for(var a=n;a--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function i(t,e){"_hostNode"in t||u("35"),"_hostNode"in e||u("35");for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function o(t){return"_hostNode"in t||u("36"),t._hostParent}function a(t,e,n){for(var r=[];t;)r.push(t),t=t._hostParent;var i;for(i=r.length;i-- >0;)e(r[i],"captured",n);for(i=0;i<r.length;i++)e(r[i],"bubbled",n)}function s(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var u=[];e&&e!==a;)u.push(e),e=e._hostParent;var c;for(c=0;c<s.length;c++)n(s[c],"bubbled",i);for(c=u.length;c-- >0;)n(u[c],"captured",o)}var u=n(25);n(18);t.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},function(t,e,n){"use strict";var r=n(25),i=n(28),o=n(236),a=n(134),s=n(31),u=n(174),c=(n(18),n(245),function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});i(c.prototype,{mountComponent:function(t,e,n,r){var i=n._idCounter++,o=" react-text: "+i+" ";if(this._domID=i,this._hostParent=e,t.useCreateElement){var c=n._ownerDocument,l=c.createComment(o),f=c.createComment(" /react-text "),h=a(c.createDocumentFragment());return a.queueChild(h,a(l)),this._stringText&&a.queueChild(h,a(c.createTextNode(this._stringText))),a.queueChild(h,a(f)),s.precacheNode(this,l),this._closingComment=f,h}var p=u(this._stringText);return t.renderToStaticMarkup?p:"\x3c!--"+o+"--\x3e"+p+"\x3c!-- /react-text --\x3e"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),n=e.nextSibling;;){if(null==n&&r("67",this._domID),8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=c},function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var i=n(28),o=n(72),a=n(171),s=n(71),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},c={initialize:s,close:o.flushBatchedUpdates.bind(o)},l=[c,u];i(r.prototype,a,{getTransactionWrappers:function(){return l}});var f=new r,h={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i,o){var a=h.isBatchingUpdates;return h.isBatchingUpdates=!0,a?t(e,n,r,i,o):f.perform(t,null,e,n,r,i,o)}};t.exports=h},function(t,e,n){"use strict";function r(t){for(;t._hostParent;)t=t._hostParent;var e=f.getNodeFromInstance(t),n=e.parentNode;return f.getClosestInstanceFromNode(n)}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){var e=p(t.nativeEvent),n=f.getClosestInstanceFromNode(e),i=n;do{t.ancestors.push(i),i=i&&r(i)}while(i);for(var o=0;o<t.ancestors.length;o++)n=t.ancestors[o],v._handleTopLevel(t.topLevelType,n,t.nativeEvent,p(t.nativeEvent))}function a(t){t(d(window))}var s=n(28),u=n(365),c=n(45),l=n(99),f=n(31),h=n(72),p=n(233),d=n(625);s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(i,l.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,e,n){return n?u.listen(n,e,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){return n?u.capture(n,e,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(v._enabled){var n=i.getPooled(t,e);try{h.batchedUpdates(o,n)}finally{i.release(n)}}}};t.exports=v},function(t,e,n){"use strict";function r(t){return t.Window&&t instanceof t.Window?{x:t.pageXOffset||t.document.documentElement.scrollLeft,y:t.pageYOffset||t.document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}t.exports=r},function(t,e,n){"use strict";var r=n(132),i=n(152),o=n(231),a=n(240),s=n(361),u=n(175),c=n(362),l=n(72),f={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:l.injection};t.exports=f},function(t,e,n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=t}var i=n(28),o=n(349),a=n(99),s=n(175),u=n(366),c=(n(61),n(171)),l=n(244),f={initialize:u.getSelectionInformation,close:u.restoreSelection},h={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d=[f,h,p],v={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return l},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,c,v),a.addPoolingTo(r),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length;return{start:o,end:o+r}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(t){return null}var u=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(t),l.setEnd(s.startContainer,s.startOffset);var f=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=f?0:l.toString().length,p=h+c,d=document.createRange();d.setStart(n,i),d.setEnd(o,a);var v=d.collapsed;return{start:v?p:h,end:v?h:p}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[l()].length,i=Math.min(e.start,r),o=void 0===e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(t,i),u=c(t,o);if(s&&u){var f=document.createRange();f.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(f),n.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),n.addRange(f))}}}var u=n(45),c=n(629),l=n(348),f=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:f?i:o,setOffsets:f?a:s};t.exports=h},function(t,e,n){"use strict";function r(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function o(t,e){for(var n=r(t),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,o<=e&&a>=e)return{node:n,offset:e-o};o=a}n=r(i(n))}}t.exports=o},function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=n(631);t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=n(632);t.exports=r},function(t,e,n){"use strict";function r(t){var e=t?t.ownerDocument||t:document,n=e.defaultView||window;return!(!t||!("function"===typeof n.Node?t instanceof n.Node:"object"===typeof t&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName))}t.exports=r},function(t,e,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(i).forEach(function(t){o.Properties[t]=0,i[t]&&(o.DOMAttributeNames[t]=i[t])}),t.exports=o},function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(y||null==v||v!==l())return null;var n=r(v);if(!g||!h(g,n)){g=n;var i=c.getPooled(d.select,m,t,e);return i.type="select",i.target=v,o.accumulateTwoPhaseDispatches(i),i}return null}var o=n(151),a=n(45),s=n(31),u=n(366),c=n(82),l=n(367),f=n(352),h=n(241),p=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,d={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},v=null,m=null,g=null,y=!1,_=!1,b={eventTypes:d,extractEvents:function(t,e,n,r){if(!_)return null;var o=e?s.getNodeFromInstance(e):window;switch(t){case"topFocus":(f(o)||"true"===o.contentEditable)&&(v=o,m=e,g=null);break;case"topBlur":v=null,m=null,g=null;break;case"topMouseDown":y=!0;break;case"topContextMenu":case"topMouseUp":return y=!1,i(n,r);case"topSelectionChange":if(p)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(t,e,n){"onSelect"===e&&(_=!0)}};t.exports=b},function(t,e,n){"use strict";function r(t){return"."+t._rootNodeID}function i(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}var o=n(25),a=n(365),s=n(151),u=n(31),c=n(636),l=n(637),f=n(82),h=n(638),p=n(639),d=n(172),v=n(641),m=n(642),g=n(643),y=n(153),_=n(644),b=n(71),x=n(246),w=(n(18),{}),E={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(t){var e=t[0].toUpperCase()+t.slice(1),n="on"+e,r="top"+e,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};w[t]=i,E[r]=i});var S={},O={eventTypes:w,extractEvents:function(t,e,n,r){var i=E[t];if(!i)return null;var a;switch(t){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":a=f;break;case"topKeyPress":if(0===x(n))return null;case"topKeyDown":case"topKeyUp":a=p;break;case"topBlur":case"topFocus":a=h;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":a=d;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":a=v;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":a=m;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":a=c;break;case"topTransitionEnd":a=g;break;case"topScroll":a=y;break;case"topWheel":a=_;break;case"topCopy":case"topCut":case"topPaste":a=l}a||o("86",t);var u=a.getPooled(i,e,n,r);return s.accumulateTwoPhaseDispatches(u),u},didPutListener:function(t,e,n){if("onClick"===e&&!i(t._tag)){var o=r(t),s=u.getNodeFromInstance(t);S[o]||(S[o]=a.listen(s,"click",b))}},willDeleteListener:function(t,e){if("onClick"===e&&!i(t._tag)){var n=r(t);S[n].remove(),delete S[n]}}};t.exports=O},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(82),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(82),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(153),o={relatedTarget:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(153),o=n(246),a=n(640),s=n(235),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,u),t.exports=r},function(t,e,n){"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=n(246),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(172),o={dataTransfer:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(153),o=n(235),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(82),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=n(172),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),t.exports=r},function(t,e,n){"use strict";function r(t,e){var n={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?e.nodeType===i?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return n}var i=(n(245),9);t.exports=r},function(t,e,n){"use strict";var r={useCreateElement:!0,useFiber:!1};t.exports=r},function(t,e,n){"use strict";var r=n(648),i=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return o.test(t)?t:t.replace(i," "+a.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(a.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(t)===n}};t.exports=a},function(t,e,n){"use strict";function r(t){for(var e=1,n=0,r=0,o=t.length,a=-4&o;r<a;){for(var s=Math.min(r+4096,a);r<s;r+=4)n+=(e+=t.charCodeAt(r))+(e+=t.charCodeAt(r+1))+(e+=t.charCodeAt(r+2))+(e+=t.charCodeAt(r+3));e%=i,n%=i}for(;r<o;r++)n+=e+=t.charCodeAt(r);return e%=i,n%=i,e|n<<16}var i=65521;t.exports=r},function(t,e,n){"use strict";t.exports="15.6.2"},function(t,e,n){"use strict";function r(t){if(null==t)return null;if(1===t.nodeType)return t;var e=a.get(t);if(e)return e=s(e),e?o.getNodeFromInstance(e):null;"function"===typeof t.render?i("44"):i("45",Object.keys(t))}var i=n(25),o=(n(81),n(31)),a=n(154),s=n(369);n(18),n(26);t.exports=r},function(t,e,n){"use strict";var r=n(368);t.exports=r.renderSubtreeIntoContainer},function(t,e,n){var r=n(653);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,"body {\r\n  margin: 0;\r\n  padding: 0;\r\n  font-family: sans-serif;\r\n}\r\n* {\r\n  -webkit-overflow-scrolling:touch;\r\n}",""])},function(t,e){t.exports=function(t){var e="undefined"!==typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!==typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(656),s=(n.n(a),n(662)),u=n.n(s),c=n(713),l=(n.n(c),n(716)),f=n.n(l),h=n(35),p=n.n(h),d=n(717),v=n(1265),m=n(1266),g=n.n(m),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_=[{title:p.a.createElement(f.a,null,"\u5730\u56fe")},{title:p.a.createElement(f.a,null,"\u8bf4\u660e")}],b=function(){return p.a.createElement("div",null,p.a.createElement(u.a,{tabs:_,initialPage:0,swipeable:!1,prerenderingSiblingsNumber:0,style:{paddingBottom:10}},p.a.createElement("div",null,p.a.createElement(d.a,null)),p.a.createElement("div",null,p.a.createElement(v.a,null))))},x=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),y(e,[{key:"render",value:function(){return p.a.createElement("div",{id:"header"},p.a.createElement("div",null,p.a.createElement("img",{src:n(1268),alt:"banner",className:g.a.banner})),p.a.createElement(b,null))}}]),e}(h.Component);e.a=x},function(t,e,n){"use strict";n(247),n(660)},function(t,e){},function(t,e,n){var r=n(659);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,"/*do not import this file except components/style/index.less*/\n.am-fade-enter,\n.am-fade-appear {\n  opacity: 0;\n  -webkit-animation-duration: .2s;\n          animation-duration: .2s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n          animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.am-fade-leave {\n  -webkit-animation-duration: .2s;\n          animation-duration: .2s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n          animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.am-fade-enter.am-fade-enter-active,\n.am-fade-appear.am-fade-appear-active {\n  -webkit-animation-name: amFadeIn;\n          animation-name: amFadeIn;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.am-fade-leave.am-fade-leave-active {\n  -webkit-animation-name: amFadeOut;\n          animation-name: amFadeOut;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n@-webkit-keyframes amFadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes amFadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@-webkit-keyframes amFadeOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n@keyframes amFadeOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.am-slide-up-enter,\n.am-slide-up-appear {\n  -webkit-transform: translate(0, 100%);\n      -ms-transform: translate(0, 100%);\n          transform: translate(0, 100%);\n}\n.am-slide-up-enter,\n.am-slide-up-appear,\n.am-slide-up-leave {\n  -webkit-animation-duration: .2s;\n          animation-duration: .2s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n          animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.am-slide-up-enter.am-slide-up-enter-active,\n.am-slide-up-appear.am-slide-up-appear-active {\n  -webkit-animation-name: amSlideUpIn;\n          animation-name: amSlideUpIn;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.am-slide-up-leave.am-slide-up-leave-active {\n  -webkit-animation-name: amSlideUpOut;\n          animation-name: amSlideUpOut;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n@-webkit-keyframes amSlideUpIn {\n  0% {\n    -webkit-transform: translate(0, 100%);\n            transform: translate(0, 100%);\n  }\n  100% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n}\n@keyframes amSlideUpIn {\n  0% {\n    -webkit-transform: translate(0, 100%);\n            transform: translate(0, 100%);\n  }\n  100% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n}\n@-webkit-keyframes amSlideUpOut {\n  0% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n  100% {\n    -webkit-transform: translate(0, 100%);\n            transform: translate(0, 100%);\n  }\n}\n@keyframes amSlideUpOut {\n  0% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n  100% {\n    -webkit-transform: translate(0, 100%);\n            transform: translate(0, 100%);\n  }\n}\n.am.am-zoom-enter,\n.am.am-zoom-leave {\n  display: block;\n}\n.am-zoom-enter,\n.am-zoom-appear {\n  opacity: 0;\n  -webkit-animation-duration: .2s;\n          animation-duration: .2s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n          animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n  -webkit-animation-timing-function: cubic-bezier(0.18, 0.89, 0.32, 1.28);\n          animation-timing-function: cubic-bezier(0.18, 0.89, 0.32, 1.28);\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.am-zoom-leave {\n  -webkit-animation-duration: .2s;\n          animation-duration: .2s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n          animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n  -webkit-animation-timing-function: cubic-bezier(0.6, -0.3, 0.74, 0.05);\n          animation-timing-function: cubic-bezier(0.6, -0.3, 0.74, 0.05);\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.am-zoom-enter.am-zoom-enter-active,\n.am-zoom-appear.am-zoom-appear-active {\n  -webkit-animation-name: amZoomIn;\n          animation-name: amZoomIn;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.am-zoom-leave.am-zoom-leave-active {\n  -webkit-animation-name: amZoomOut;\n          animation-name: amZoomOut;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n@-webkit-keyframes amZoomIn {\n  0% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@keyframes amZoomIn {\n  0% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n  100% {\n    opacity: 1;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n}\n@-webkit-keyframes amZoomOut {\n  0% {\n    opacity: 1;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n}\n@keyframes amZoomOut {\n  0% {\n    opacity: 1;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(1, 1);\n            transform: scale(1, 1);\n  }\n  100% {\n    opacity: 0;\n    -webkit-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scale(0, 0);\n            transform: scale(0, 0);\n  }\n}\n.am-slide-down-enter,\n.am-slide-down-appear {\n  -webkit-transform: translate(0, -100%);\n      -ms-transform: translate(0, -100%);\n          transform: translate(0, -100%);\n}\n.am-slide-down-enter,\n.am-slide-down-appear,\n.am-slide-down-leave {\n  -webkit-animation-duration: .2s;\n          animation-duration: .2s;\n  -webkit-animation-fill-mode: both;\n          animation-fill-mode: both;\n  -webkit-animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n          animation-timing-function: cubic-bezier(0.55, 0, 0.55, 0.2);\n  -webkit-animation-play-state: paused;\n          animation-play-state: paused;\n}\n.am-slide-down-enter.am-slide-down-enter-active,\n.am-slide-down-appear.am-slide-down-appear-active {\n  -webkit-animation-name: amSlideDownIn;\n          animation-name: amSlideDownIn;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n.am-slide-down-leave.am-slide-down-leave-active {\n  -webkit-animation-name: amSlideDownOut;\n          animation-name: amSlideDownOut;\n  -webkit-animation-play-state: running;\n          animation-play-state: running;\n}\n@-webkit-keyframes amSlideDownIn {\n  0% {\n    -webkit-transform: translate(0, -100%);\n            transform: translate(0, -100%);\n  }\n  100% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n}\n@keyframes amSlideDownIn {\n  0% {\n    -webkit-transform: translate(0, -100%);\n            transform: translate(0, -100%);\n  }\n  100% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n}\n@-webkit-keyframes amSlideDownOut {\n  0% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n  100% {\n    -webkit-transform: translate(0, -100%);\n            transform: translate(0, -100%);\n  }\n}\n@keyframes amSlideDownOut {\n  0% {\n    -webkit-transform: translate(0, 0);\n            transform: translate(0, 0);\n  }\n  100% {\n    -webkit-transform: translate(0, -100%);\n            transform: translate(0, -100%);\n  }\n}\n*,\n*:before,\n*:after {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\nbody {\n  background-color: #f5f5f9;\n  font-size: 14px;\n}\n*[contenteditable] {\n  -webkit-user-select: auto !important;\n}\n*:focus {\n  outline: none;\n}\na {\n  background: transparent;\n  text-decoration: none;\n  outline: none;\n}\n",""])},function(t,e,n){var r=n(661);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,".am-tabs {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex: 1 1;\n      flex: 1 1;\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n}\n.am-tabs * {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n.am-tabs-content-wrap {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex: 1 1;\n      flex: 1 1;\n  width: 100%;\n  height: 100%;\n  min-height: 0;\n}\n.am-tabs-content-wrap-animated {\n  -webkit-transition: left 0.3s cubic-bezier(0.35, 0, 0.25, 1), top 0.3s cubic-bezier(0.35, 0, 0.25, 1), -webkit-transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: left 0.3s cubic-bezier(0.35, 0, 0.25, 1), top 0.3s cubic-bezier(0.35, 0, 0.25, 1), -webkit-transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  -o-transition: transform 0.3s cubic-bezier(0.35, 0, 0.25, 1), left 0.3s cubic-bezier(0.35, 0, 0.25, 1), top 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: transform 0.3s cubic-bezier(0.35, 0, 0.25, 1), left 0.3s cubic-bezier(0.35, 0, 0.25, 1), top 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: transform 0.3s cubic-bezier(0.35, 0, 0.25, 1), left 0.3s cubic-bezier(0.35, 0, 0.25, 1), top 0.3s cubic-bezier(0.35, 0, 0.25, 1), -webkit-transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  will-change: transform, left, top;\n}\n.am-tabs-pane-wrap {\n  width: 100%;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  overflow-y: auto;\n}\n.am-tabs-tab-bar-wrap {\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n}\n.am-tabs-horizontal .am-tabs-pane-wrap-active {\n  height: auto;\n}\n.am-tabs-horizontal .am-tabs-pane-wrap-inactive {\n  height: 0;\n  overflow: visible;\n}\n.am-tabs-vertical .am-tabs-content-wrap {\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.am-tabs-vertical .am-tabs-tab-bar-wrap {\n  height: 100%;\n}\n.am-tabs-vertical .am-tabs-pane-wrap {\n  height: 100%;\n}\n.am-tabs-vertical .am-tabs-pane-wrap-active {\n  overflow: auto;\n}\n.am-tabs-vertical .am-tabs-pane-wrap-inactive {\n  overflow: hidden;\n}\n.am-tabs-top,\n.am-tabs-bottom {\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.am-tabs-left,\n.am-tabs-right {\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.am-tabs-default-bar {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  width: 100%;\n  height: 100%;\n  overflow: visible;\n  z-index: 1;\n}\n.am-tabs-default-bar-tab {\n  position: relative;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  font-size: 15px;\n  height: 43.5px;\n  line-height: 43.5px;\n}\n.am-tabs-default-bar-tab .am-badge .am-badge-text {\n  top: -13px;\n  -webkit-transform: translateX(-5px);\n      -ms-transform: translateX(-5px);\n          transform: translateX(-5px);\n}\n.am-tabs-default-bar-tab .am-badge .am-badge-dot {\n  top: -6px;\n  -webkit-transform: translateX(0);\n      -ms-transform: translateX(0);\n          transform: translateX(0);\n}\n.am-tabs-default-bar-tab-active {\n  color: #1DA57A;\n}\n.am-tabs-default-bar-underline {\n  position: absolute;\n  border: 1px #1DA57A solid;\n  -webkit-transform: translate3d(0, 0, 0);\n          transform: translate3d(0, 0, 0);\n}\n.am-tabs-default-bar-animated .am-tabs-default-bar-content {\n  -webkit-transition: -webkit-transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: -webkit-transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  -o-transition: transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: transform 0.3s cubic-bezier(0.35, 0, 0.25, 1), -webkit-transform 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  will-change: transform;\n}\n.am-tabs-default-bar-animated .am-tabs-default-bar-underline {\n  -webkit-transition: top 0.3s cubic-bezier(0.35, 0, 0.25, 1), left 0.3s cubic-bezier(0.35, 0, 0.25, 1), color 0.3s cubic-bezier(0.35, 0, 0.25, 1), width 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  -o-transition: top 0.3s cubic-bezier(0.35, 0, 0.25, 1), left 0.3s cubic-bezier(0.35, 0, 0.25, 1), color 0.3s cubic-bezier(0.35, 0, 0.25, 1), width 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  transition: top 0.3s cubic-bezier(0.35, 0, 0.25, 1), left 0.3s cubic-bezier(0.35, 0, 0.25, 1), color 0.3s cubic-bezier(0.35, 0, 0.25, 1), width 0.3s cubic-bezier(0.35, 0, 0.25, 1);\n  will-change: top, left, width, color;\n}\n.am-tabs-default-bar-top,\n.am-tabs-default-bar-bottom {\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.am-tabs-default-bar-top .am-tabs-default-bar-content,\n.am-tabs-default-bar-bottom .am-tabs-default-bar-content {\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.am-tabs-default-bar-top .am-tabs-default-bar-prevpage,\n.am-tabs-default-bar-bottom .am-tabs-default-bar-prevpage {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 59px;\n  height: 100%;\n  content: ' ';\n  z-index: 999;\n  left: 0;\n  background: -webkit-gradient(linear, left top, right top, from(#ffffff), to(rgba(255, 255, 255, 0)));\n  background: -webkit-linear-gradient(left, #ffffff, rgba(255, 255, 255, 0));\n  background: -o-linear-gradient(left, #ffffff, rgba(255, 255, 255, 0));\n  background: linear-gradient(to right, #ffffff, rgba(255, 255, 255, 0));\n}\n.am-tabs-default-bar-top .am-tabs-default-bar-nextpage,\n.am-tabs-default-bar-bottom .am-tabs-default-bar-nextpage {\n  pointer-events: none;\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 59px;\n  height: 100%;\n  content: ' ';\n  z-index: 999;\n  right: 0;\n  background: -webkit-gradient(linear, left top, right top, from(rgba(255, 255, 255, 0)), to(#ffffff));\n  background: -webkit-linear-gradient(left, rgba(255, 255, 255, 0), #ffffff);\n  background: -o-linear-gradient(left, rgba(255, 255, 255, 0), #ffffff);\n  background: linear-gradient(to right, rgba(255, 255, 255, 0), #ffffff);\n}\n.am-tabs-default-bar-top .am-tabs-default-bar-tab,\n.am-tabs-default-bar-bottom .am-tabs-default-bar-tab {\n  padding: 8px 0;\n}\n.am-tabs-default-bar-top .am-tabs-default-bar-underline,\n.am-tabs-default-bar-bottom .am-tabs-default-bar-underline {\n  bottom: 0;\n}\n.am-tabs-default-bar-top .am-tabs-default-bar-tab {\n  border-bottom: 1PX solid #ddd;\n}\n@media (-webkit-min-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 2/1), (min-resolution: 2dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-top .am-tabs-default-bar-tab {\n    border-bottom: none;\n  }\n  html:not([data-scale]) .am-tabs-default-bar-top .am-tabs-default-bar-tab::after {\n    content: '';\n    position: absolute;\n    background-color: #ddd;\n    display: block;\n    z-index: 1;\n    top: auto;\n    right: auto;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 1PX;\n    -webkit-transform-origin: 50% 100%;\n        -ms-transform-origin: 50% 100%;\n            transform-origin: 50% 100%;\n    -webkit-transform: scaleY(0.5);\n        -ms-transform: scaleY(0.5);\n            transform: scaleY(0.5);\n  }\n}\n@media (-webkit-min-device-pixel-ratio: 2) and (-webkit-min-device-pixel-ratio: 3), (-o-min-device-pixel-ratio: 2/1) and (-o-min-device-pixel-ratio: 3/1), (min-resolution: 2dppx) and (min-resolution: 3dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-top .am-tabs-default-bar-tab::after {\n    -webkit-transform: scaleY(0.33);\n        -ms-transform: scaleY(0.33);\n            transform: scaleY(0.33);\n  }\n}\n.am-tabs-default-bar-bottom .am-tabs-default-bar-tab {\n  border-top: 1PX solid #ddd;\n}\n@media (-webkit-min-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 2/1), (min-resolution: 2dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-bottom .am-tabs-default-bar-tab {\n    border-top: none;\n  }\n  html:not([data-scale]) .am-tabs-default-bar-bottom .am-tabs-default-bar-tab::before {\n    content: '';\n    position: absolute;\n    background-color: #ddd;\n    display: block;\n    z-index: 1;\n    top: 0;\n    right: auto;\n    bottom: auto;\n    left: 0;\n    width: 100%;\n    height: 1PX;\n    -webkit-transform-origin: 50% 50%;\n        -ms-transform-origin: 50% 50%;\n            transform-origin: 50% 50%;\n    -webkit-transform: scaleY(0.5);\n        -ms-transform: scaleY(0.5);\n            transform: scaleY(0.5);\n  }\n}\n@media (-webkit-min-device-pixel-ratio: 2) and (-webkit-min-device-pixel-ratio: 3), (-o-min-device-pixel-ratio: 2/1) and (-o-min-device-pixel-ratio: 3/1), (min-resolution: 2dppx) and (min-resolution: 3dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-bottom .am-tabs-default-bar-tab::before {\n    -webkit-transform: scaleY(0.33);\n        -ms-transform: scaleY(0.33);\n            transform: scaleY(0.33);\n  }\n}\n.am-tabs-default-bar-left,\n.am-tabs-default-bar-right {\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.am-tabs-default-bar-left .am-tabs-default-bar-content,\n.am-tabs-default-bar-right .am-tabs-default-bar-content {\n  display: -ms-flexbox;\n  display: flex;\n  height: 100%;\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.am-tabs-default-bar-left .am-tabs-default-bar-tab,\n.am-tabs-default-bar-right .am-tabs-default-bar-tab {\n  padding: 0 8px;\n}\n.am-tabs-default-bar-left .am-tabs-default-bar-underline {\n  right: 0;\n}\n.am-tabs-default-bar-left .am-tabs-default-bar-tab {\n  border-right: 1PX solid #ddd;\n}\n@media (-webkit-min-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 2/1), (min-resolution: 2dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-left .am-tabs-default-bar-tab {\n    border-right: none;\n  }\n  html:not([data-scale]) .am-tabs-default-bar-left .am-tabs-default-bar-tab::after {\n    content: '';\n    position: absolute;\n    background-color: #ddd;\n    display: block;\n    z-index: 1;\n    top: 0;\n    right: 0;\n    bottom: auto;\n    left: auto;\n    width: 1PX;\n    height: 100%;\n    background: #ddd;\n    -webkit-transform-origin: 100% 50%;\n        -ms-transform-origin: 100% 50%;\n            transform-origin: 100% 50%;\n    -webkit-transform: scaleX(0.5);\n        -ms-transform: scaleX(0.5);\n            transform: scaleX(0.5);\n  }\n}\n@media (-webkit-min-device-pixel-ratio: 2) and (-webkit-min-device-pixel-ratio: 3), (-o-min-device-pixel-ratio: 2/1) and (-o-min-device-pixel-ratio: 3/1), (min-resolution: 2dppx) and (min-resolution: 3dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-left .am-tabs-default-bar-tab::after {\n    -webkit-transform: scaleX(0.33);\n        -ms-transform: scaleX(0.33);\n            transform: scaleX(0.33);\n  }\n}\n.am-tabs-default-bar-right .am-tabs-default-bar-underline {\n  left: 0;\n}\n.am-tabs-default-bar-right .am-tabs-default-bar-tab {\n  border-left: 1PX solid #ddd;\n}\n@media (-webkit-min-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 2/1), (min-resolution: 2dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-right .am-tabs-default-bar-tab {\n    border-left: none;\n  }\n  html:not([data-scale]) .am-tabs-default-bar-right .am-tabs-default-bar-tab::before {\n    content: '';\n    position: absolute;\n    background-color: #ddd;\n    display: block;\n    z-index: 1;\n    top: 0;\n    right: auto;\n    bottom: auto;\n    left: 0;\n    width: 1PX;\n    height: 100%;\n    -webkit-transform-origin: 100% 50%;\n        -ms-transform-origin: 100% 50%;\n            transform-origin: 100% 50%;\n    -webkit-transform: scaleX(0.5);\n        -ms-transform: scaleX(0.5);\n            transform: scaleX(0.5);\n  }\n}\n@media (-webkit-min-device-pixel-ratio: 2) and (-webkit-min-device-pixel-ratio: 3), (-o-min-device-pixel-ratio: 2/1) and (-o-min-device-pixel-ratio: 3/1), (min-resolution: 2dppx) and (min-resolution: 3dppx) {\n  html:not([data-scale]) .am-tabs-default-bar-right .am-tabs-default-bar-tab::before {\n    -webkit-transform: scaleX(0.33);\n        -ms-transform: scaleX(0.33);\n            transform: scaleX(0.33);\n  }\n}\n",""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultTabBar=void 0;var i=n(53),o=r(i),a=n(73),s=r(a),u=n(54),c=r(u),l=n(55),f=r(l),h=n(56),p=r(h),d=n(35),v=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(d),m=n(701),g=e.DefaultTabBar=function(t){function e(){return(0,c.default)(this,e),(0,f.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return(0,p.default)(e,t),e}(m.DefaultTabBar);g.defaultProps=(0,s.default)({},m.DefaultTabBar.defaultProps,{prefixCls:"am-tabs-default-bar"});var y=function(t){function e(){(0,c.default)(this,e);var t=(0,f.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.renderTabBar=function(e){var n=t.props.renderTab;return v.createElement(g,(0,s.default)({},e,{renderTab:n}))},t}return(0,p.default)(e,t),(0,o.default)(e,[{key:"render",value:function(){return v.createElement(m.Tabs,(0,s.default)({renderTabBar:this.renderTabBar},this.props))}}]),e}(v.PureComponent);e.default=y,y.DefaultTabBar=g,y.defaultProps={prefixCls:"am-tabs"}},function(t,e,n){n(664);var r=n(62).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(102);r(r.S+r.F*!n(89),"Object",{defineProperty:n(103).f})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){t.exports={default:n(667),__esModule:!0}},function(t,e,n){n(668),t.exports=n(62).Object.assign},function(t,e,n){var r=n(102);r(r.S+r.F,"Object",{assign:n(669)})},function(t,e,n){"use strict";var r=n(89),i=n(177),o=n(254),a=n(180),s=n(181),u=n(375),c=Object.assign;t.exports=!c||n(138)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=r})?function(t,e){for(var n=s(t),c=arguments.length,l=1,f=o.f,h=a.f;c>l;)for(var p,d=u(arguments[l++]),v=f?i(d).concat(f(d)):i(d),m=v.length,g=0;m>g;)p=v[g++],r&&!h.call(d,p)||(n[p]=d[p]);return n}:c},function(t,e,n){var r=n(105),i=n(671),o=n(672);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(250),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(250),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){t.exports={default:n(674),__esModule:!0}},function(t,e,n){n(675),n(680),t.exports=n(259).f("iterator")},function(t,e,n){"use strict";var r=n(676)(!0);n(377)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(250),i=n(249);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(257),i=n(176),o=n(258),a={};n(136)(a,n(139)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(103),i=n(155),o=n(177);t.exports=n(89)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(88).document;t.exports=r&&r.documentElement},function(t,e,n){n(681);for(var r=n(88),i=n(136),o=n(256),a=n(139)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(t,e,n){"use strict";var r=n(682),i=n(683),o=n(256),a=n(105);t.exports=n(377)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){t.exports={default:n(685),__esModule:!0}},function(t,e,n){n(686),n(691),n(692),n(693),t.exports=n(62).Symbol},function(t,e,n){"use strict";var r=n(88),i=n(104),o=n(89),a=n(102),s=n(378),u=n(687).KEY,c=n(138),l=n(252),f=n(258),h=n(179),p=n(139),d=n(259),v=n(260),m=n(688),g=n(689),y=n(155),_=n(137),b=n(181),x=n(105),w=n(248),E=n(176),S=n(257),O=n(690),T=n(261),A=n(254),C=n(103),k=n(177),M=T.f,P=C.f,j=O.f,I=r.Symbol,R=r.JSON,L=R&&R.stringify,D=p("_hidden"),N=p("toPrimitive"),z={}.propertyIsEnumerable,F=l("symbol-registry"),B=l("symbols"),U=l("op-symbols"),V=Object.prototype,G="function"==typeof I&&!!A.f,H=r.QObject,W=!H||!H.prototype||!H.prototype.findChild,q=o&&c(function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(V,e);r&&delete V[e],P(t,e,n),r&&t!==V&&P(V,e,r)}:P,Z=function(t){var e=B[t]=S(I.prototype);return e._k=t,e},X=G&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},Y=function(t,e,n){return t===V&&Y(U,e,n),y(t),e=w(e,!0),y(n),i(B,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=S(n,{enumerable:E(0,!1)})):(i(t,D)||P(t,D,E(1,{})),t[D][e]=!0),q(t,e,n)):P(t,e,n)},K=function(t,e){y(t);for(var n,r=m(e=x(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},J=function(t,e){return void 0===e?S(t):K(S(t),e)},Q=function(t){var e=z.call(this,t=w(t,!0));return!(this===V&&i(B,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(B,t)||i(this,D)&&this[D][t])||e)},$=function(t,e){if(t=x(t),e=w(e,!0),t!==V||!i(B,e)||i(U,e)){var n=M(t,e);return!n||!i(B,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=j(x(t)),r=[],o=0;n.length>o;)i(B,e=n[o++])||e==D||e==u||r.push(e);return r},et=function(t){for(var e,n=t===V,r=j(n?U:x(t)),o=[],a=0;r.length>a;)!i(B,e=r[a++])||n&&!i(V,e)||o.push(B[e]);return o};G||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(U,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),q(this,t,E(1,n))};return o&&W&&q(V,t,{configurable:!0,set:e}),Z(t)},s(I.prototype,"toString",function(){return this._k}),T.f=$,C.f=Y,n(380).f=O.f=tt,n(180).f=Q,A.f=et,o&&!n(178)&&s(V,"propertyIsEnumerable",Q,!0),d.f=function(t){return Z(p(t))}),a(a.G+a.W+a.F*!G,{Symbol:I});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)p(nt[rt++]);for(var it=k(p.store),ot=0;it.length>ot;)v(it[ot++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=I(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!G,"Object",{create:J,defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=c(function(){A.f(1)});a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return A.f(b(t))}}),R&&a(a.S+a.F*(!G||c(function(){var t=I();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,L.apply(R,r)}}),I.prototype[N]||n(136)(I.prototype,N,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(179)("meta"),i=n(137),o=n(104),a=n(103).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(138)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return c&&d.NEED&&u(t)&&!o(t,r)&&l(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},function(t,e,n){var r=n(177),i=n(254),o=n(180);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(376);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(105),i=n(380).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e){},function(t,e,n){n(260)("asyncIterator")},function(t,e,n){n(260)("observable")},function(t,e,n){t.exports={default:n(695),__esModule:!0}},function(t,e,n){n(696),t.exports=n(62).Object.setPrototypeOf},function(t,e,n){var r=n(102);r(r.S,"Object",{setPrototypeOf:n(697).set})},function(t,e,n){var r=n(137),i=n(155),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(371)(Function.call,n(261).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(699),__esModule:!0}},function(t,e,n){n(700);var r=n(62).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(102);r(r.S,"Object",{create:n(257)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(702);n.d(e,"Tabs",function(){return r.a});var i=n(384);n.d(e,"DefaultTabBar",function(){return i.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return S});var r=n(73),i=n.n(r),o=n(53),a=n.n(o),s=n(703),u=n.n(s),c=n(54),l=n.n(c),f=n(55),h=n.n(f),p=n(56),d=n.n(p),v=n(35),m=n.n(v),g=n(382),y=n(711),_=n(384),b=n(262),x=n(712),w=function(t){switch(t){case 2:case 4:return"horizontal";case 8:case 16:return"vertical";default:return"none"}},E=function(t){function e(){l()(this,e);var t=h()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.contentPos="",t.isMoving=!1,t}return d()(e,t),e}(x.a),S=function(t){function e(t){l()(this,e);var n=h()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.onPan=function(){var t=0,e=0,r=void 0,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.isTabVertical(),r=+(""+t).replace("%","");return(""+t).indexOf("%")>=0&&(r/=100,r*=e?n.layout.clientHeight:n.layout.clientWidth),r};return{onPanStart:function(t){n.props.swipeable&&n.props.animated&&(r=w(t.direction),n.setState({isMoving:!0}))},onPanMove:function(t){var o=n.props,a=o.swipeable,s=o.animated,u=o.useLeftInsteadTransform;if(t.moveStatus&&n.layout&&a&&s){var c=n.isTabVertical(),l=i();l+=c?"horizontal"===r?0:t.moveStatus.y:"vertical"===r?0:t.moveStatus.x;var f=c?-n.layout.scrollHeight+n.layout.clientHeight:-n.layout.scrollWidth+n.layout.clientWidth;l=Math.min(l,0),l=Math.max(l,f),Object(b.c)(n.layout,l,"px",c,u),e=l}},onPanEnd:function(){if(n.props.swipeable&&n.props.animated){t=e;var r=n.isTabVertical(),i=n.getOffsetIndex(e,r?n.layout.clientHeight:n.layout.clientWidth);n.setState({isMoving:!1}),i===n.state.currentTab?n.props.usePaged&&Object(b.d)(n.layout.style,n.getContentPosByIndex(i,n.isTabVertical(),n.props.useLeftInsteadTransform)):n.goToTab(i)}},setCurrentOffset:function(e){return t=e}}}(),n.onSwipe=function(t){var e=n.props,r=e.tabBarPosition,i=e.swipeable,o=e.usePaged;if(i&&o&&!n.isTabVertical())switch(r){case"top":case"bottom":switch(t.direction){case 2:n.isTabVertical()||n.goToTab(n.prevCurrentTab+1);case 8:n.isTabVertical()&&n.goToTab(n.prevCurrentTab+1);break;case 4:n.isTabVertical()||n.goToTab(n.prevCurrentTab-1);case 16:n.isTabVertical()&&n.goToTab(n.prevCurrentTab-1)}}},n.setContentLayout=function(t){n.layout=t},n.state=i()({},n.state,new E,{contentPos:n.getContentPosByIndex(n.getTabIndex(t),n.isTabVertical(t.tabDirection),t.useLeftInsteadTransform)}),n}return d()(e,t),a()(e,[{key:"goToTab",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.usePaged,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,o=i.tabDirection,a=i.useLeftInsteadTransform,s={};return r&&(s={contentPos:this.getContentPosByIndex(t,this.isTabVertical(o),a)}),u()(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"goToTab",this).call(this,t,n,s,i)}},{key:"tabClickGoToTab",value:function(t){this.goToTab(t,!1,!0)}},{key:"getContentPosByIndex",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=100*-t+"%";return this.onPan.setCurrentOffset(r),n?""+r:"translate3d("+(e?"0px, "+r:r+", 0px")+", 1px)"}},{key:"renderContent",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSubElements(),n=this.props,r=n.prefixCls,o=n.tabs,a=n.animated,s=n.destroyInactiveTab,u=n.useLeftInsteadTransform,c=this.state,l=c.currentTab,f=c.isMoving,h=c.contentPos,p=this.isTabVertical(),d=r+"-content-wrap";a&&!f&&(d+=" "+d+"-animated");var v=a?u?i()({position:"relative"},this.isTabVertical()?{top:h}:{left:h}):Object(b.b)(h):i()({position:"relative"},this.isTabVertical()?{top:100*-l+"%"}:{left:100*-l+"%"}),g=this.getTabBarBaseProps(),_=g.instanceId;return m.a.createElement("div",{className:d,style:v,ref:this.setContentLayout},o.map(function(n,i){var o=r+"-pane-wrap";t.state.currentTab===i?o+=" "+o+"-active":o+=" "+o+"-inactive";var a=n.key||"tab_"+i;return t.shouldRenderTab(i)?t.tabCache[i]=t.getSubElement(n,i,e):s&&(t.tabCache[i]=void 0),m.a.createElement(y.a,{key:a,className:o,active:l===i,role:"tabpanel","aria-hidden":l!==i,"aria-labelledby":"m-tabs-"+_+"-"+i,fixX:p,fixY:!p},t.tabCache[i])}))}},{key:"render",value:function(){var t=this.props,e=t.prefixCls,n=t.tabBarPosition,r=t.tabDirection,o=t.useOnPan,a=t.noRenderContent,s=this.isTabVertical(r),u=i()({},this.getTabBarBaseProps()),c=!s&&o?this.onPan:{},l=[m.a.createElement("div",{key:"tabBar",className:e+"-tab-bar-wrap"},this.renderTabBar(u,_.a)),!a&&m.a.createElement(g.a,i()({key:"$content",onSwipe:this.onSwipe},c),this.renderContent())];return m.a.createElement("div",{className:e+" "+e+"-"+r+" "+e+"-"+n},"top"===n||"left"===n?l:l.reverse())}}]),e}(x.b);S.DefaultTabBar=_.a,S.defaultProps=i()({},x.b.defaultProps,{prefixCls:"rmc-tabs",useOnPan:!0})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(704),o=r(i),a=n(707),s=r(a);e.default=function t(e,n,r){null===e&&(e=Function.prototype);var i=(0,s.default)(e,n);if(void 0===i){var a=(0,o.default)(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)}},function(t,e,n){t.exports={default:n(705),__esModule:!0}},function(t,e,n){n(706),t.exports=n(62).Object.getPrototypeOf},function(t,e,n){var r=n(181),i=n(379);n(381)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){t.exports={default:n(708),__esModule:!0}},function(t,e,n){n(709);var r=n(62).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(105),i=n(261).f;n(381)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){"use strict";function r(t,e){return Math.sqrt(t*t+e*e)}function i(t,e){var n=Math.atan2(e,t);return 180/(Math.PI/n)}function o(){return Date.now()}function a(t){if(!(t.length<2)){var e=t[0],n=e.x,o=e.y,a=t[1],s=a.x,u=a.y,c=s-n,l=u-o;return{x:c,y:l,z:r(c,l),angle:i(c,l)}}}function s(t,e,n){var o=t[0],a=o.x,s=o.y,u=e[0],c=u.x,l=u.y,f=c-a,h=l-s,p=r(f,h);return{x:f,y:h,z:p,time:n,velocity:p/n,angle:i(f,h)}}function u(t,e){var n=t.angle;return e.angle-n}function c(t,e){return t+e[0].toUpperCase()+e.slice(1)}function l(t,e){return Math.abs(t)>=d.j.threshold&&Math.abs(e)>d.j.velocity}function f(t,e){return!!(e&t)}function h(t,e){var n=t.x,r=t.y,i=e.x,o=e.y,a=i-n,s=o-r;return 0===a&&0===s?d.e:Math.abs(a)>=Math.abs(s)?a<0?d.d:d.f:s<0?d.g:d.b}function p(t){var e=void 0;switch(t){case d.e:break;case d.d:e="left";break;case d.f:e="right";break;case d.g:e="up";break;case d.b:e="down"}return e}e.g=o,e.b=a,e.a=s,e.c=u,e.e=c,e.i=l,e.h=f,e.f=h,e.d=p;var d=n(383)},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n(73),i=n.n(r),o=n(54),a=n.n(o),s=n(53),u=n.n(s),c=n(55),l=n.n(c),f=n(56),h=n.n(f),p=n(35),d=n.n(p),v=n(262),m=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},g=function(t){function e(){a()(this,e);var t=l()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));return t.offsetX=0,t.offsetY=0,t.setLayout=function(e){t.layout=e},t}return h()(e,t),u()(e,[{key:"componentWillReceiveProps",value:function(t){this.props.active!==t.active&&(t.active?(this.offsetX=0,this.offsetY=0):(this.offsetX=this.layout.scrollLeft,this.offsetY=this.layout.scrollTop))}},{key:"render",value:function(){var t=this.props,e=(t.active,t.fixX),n=t.fixY,r=m(t,["active","fixX","fixY"]),o=i()({},e&&this.offsetX?Object(v.b)(Object(v.a)(-this.offsetX,"px",!1)):{},n&&this.offsetY?Object(v.b)(Object(v.a)(-this.offsetY,"px",!0)):{});return d.a.createElement("div",i()({},r,{style:o,ref:this.setLayout}),r.children)}}]),e}(d.a.PureComponent);g.defaultProps={fixX:!0,fixY:!0}},function(t,e,n){"use strict";n.d(e,"a",function(){return v}),n.d(e,"b",function(){return g});var r=n(73),i=n.n(r),o=n(53),a=n.n(o),s=n(55),u=n.n(s),c=n(56),l=n.n(c),f=n(54),h=n.n(f),p=n(35),d=n.n(p),v=function t(){h()(this,t)},m=0,g=function(t){function e(t){h()(this,e);var n=u()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.tabCache={},n.isTabVertical=function(){return"vertical"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.tabDirection)},n.shouldRenderTab=function(t){var e=n.props.prerenderingSiblingsNumber,r=void 0===e?0:e,i=n.state.currentTab,o=void 0===i?0:i;return o-r<=t&&t<=o+r},n.getOffsetIndex=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.props.distanceToChangeTab||0,i=Math.abs(t/e),o=i>n.state.currentTab?"<":">",a=Math.floor(i);switch(o){case"<":return i-a>r?a+1:a;case">":return 1-i+a>r?a:a+1;default:return Math.round(i)}},n.getSubElements=function(){var t=n.props.children,e={};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$i$-",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$ALL$";return Array.isArray(t)?t.forEach(function(t,r){t.key&&(e[t.key]=t),e[""+n+r]=t}):t&&(e[r]=t),e}},n.state={currentTab:n.getTabIndex(t)},n.nextCurrentTab=n.state.currentTab,n.instanceId=m++,n}return l()(e,t),a()(e,[{key:"getTabIndex",value:function(t){var e=t.page,n=t.initialPage,r=t.tabs,i=(void 0!==e?e:n)||0,o=0;return"string"===typeof i?r.forEach(function(t,e){t.key===i&&(o=e)}):o=i||0,o<0?0:o}},{key:"componentWillReceiveProps",value:function(t){this.props.page!==t.page&&void 0!==t.page&&this.goToTab(this.getTabIndex(t),!0,{},t)}},{key:"componentDidMount",value:function(){this.prevCurrentTab=this.state.currentTab}},{key:"componentDidUpdate",value:function(){this.prevCurrentTab=this.state.currentTab}},{key:"goToTab",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props;if(!e&&this.nextCurrentTab===t)return!1;this.nextCurrentTab=t;var o=r.tabs,a=r.onChange;if(t>=0&&t<o.length){if(!e&&(a&&a(o[t],t),void 0!==r.page))return!1;this.setState(i()({currentTab:t},n))}return!0}},{key:"tabClickGoToTab",value:function(t){this.goToTab(t)}},{key:"getTabBarBaseProps",value:function(){var t=this.state.currentTab,e=this.props,n=e.animated,r=e.onTabClick,i=e.tabBarActiveTextColor,o=e.tabBarBackgroundColor,a=e.tabBarInactiveTextColor,s=e.tabBarPosition,u=e.tabBarTextStyle,c=e.tabBarUnderlineStyle,l=e.tabs;return{activeTab:t,animated:!!n,goToTab:this.tabClickGoToTab.bind(this),onTabClick:r,tabBarActiveTextColor:i,tabBarBackgroundColor:o,tabBarInactiveTextColor:a,tabBarPosition:s,tabBarTextStyle:u,tabBarUnderlineStyle:c,tabs:l,instanceId:this.instanceId}}},{key:"renderTabBar",value:function(t,e){var n=this.props.renderTabBar;return!1===n?null:n?n(t):d.a.createElement(e,t)}},{key:"getSubElement",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"$i$-",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"$ALL$",o=t.key||""+r+e,a=n(r,i),s=a[o]||a[i];return s instanceof Function&&(s=s(t,e)),s||null}}]),e}(d.a.PureComponent);g.defaultProps={tabBarPosition:"top",initialPage:0,swipeable:!0,animated:!0,prerenderingSiblingsNumber:1,tabs:[],destroyInactiveTab:!1,usePaged:!0,tabDirection:"horizontal",distanceToChangeTab:.3}},function(t,e,n){"use strict";n(247),n(714)},function(t,e,n){var r=n(715);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,'.am-badge {\n  position: relative;\n  display: inline-block;\n  line-height: 1;\n  vertical-align: middle;\n}\n.am-badge-text {\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  position: absolute;\n  top: -6px;\n  height: 18px;\n  line-height: 18px;\n  min-width: 9px;\n  border-radius: 12px;\n  padding: 0 5px;\n  text-align: center;\n  font-size: 12px;\n  color: #fff;\n  background-color: #ff5b05;\n  white-space: nowrap;\n  -webkit-transform: translateX(-45%);\n      -ms-transform: translateX(-45%);\n          transform: translateX(-45%);\n  -webkit-transform-origin: -10% center;\n      -ms-transform-origin: -10% center;\n          transform-origin: -10% center;\n  z-index: 10;\n  font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "\\5FAE\\8F6F\\96C5\\9ED1", SimSun, sans-serif;\n}\n.am-badge-text a {\n  color: #fff;\n}\n.am-badge-text p {\n  margin: 0;\n  padding: 0;\n}\n.am-badge-hot .am-badge-text {\n  background-color: #f96268;\n}\n.am-badge-dot {\n  position: absolute;\n  -webkit-transform: translateX(-50%);\n      -ms-transform: translateX(-50%);\n          transform: translateX(-50%);\n  -webkit-transform-origin: 0 center;\n      -ms-transform-origin: 0 center;\n          transform-origin: 0 center;\n  top: -4px;\n  height: 8px;\n  width: 8px;\n  border-radius: 100%;\n  background: #ff5b05;\n  z-index: 10;\n}\n.am-badge-dot-large {\n  height: 16px;\n  width: 16px;\n}\n.am-badge-not-a-wrapper .am-badge-text,\n.am-badge-not-a-wrapper .am-badge-dot {\n  top: auto;\n  display: block;\n  position: relative;\n  -webkit-transform: translateX(0);\n      -ms-transform: translateX(0);\n          transform: translateX(0);\n}\n.am-badge-corner {\n  width: 80px;\n  padding: 8px;\n  position: absolute;\n  right: -32px;\n  top: 8px;\n  background-color: #ff5b05;\n  color: #fff;\n  white-space: nowrap;\n  -webkit-transform: rotate(45deg);\n      -ms-transform: rotate(45deg);\n          transform: rotate(45deg);\n  text-align: center;\n  font-size: 15px;\n}\n.am-badge-corner-wrapper {\n  overflow: hidden;\n}\n',""])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(73),o=r(i),a=n(156),s=r(a),u=n(54),c=r(u),l=n(53),f=r(l),h=n(55),p=r(h),d=n(56),v=r(d),m=n(157),g=r(m),y=n(35),_=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(y),b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},x=function(t){function e(){return(0,c.default)(this,e),(0,p.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return(0,v.default)(e,t),(0,f.default)(e,[{key:"render",value:function(){var t,e,n=this.props,r=n.className,i=n.prefixCls,a=n.children,u=n.text,c=n.size,l=n.overflowCount,f=n.dot,h=n.corner,p=n.hot,d=b(n,["className","prefixCls","children","text","size","overflowCount","dot","corner","hot"]);l=l,u="number"===typeof u&&u>l?l+"+":u,f&&(u="");var v=(0,g.default)((t={},(0,s.default)(t,i+"-dot",f),(0,s.default)(t,i+"-dot-large",f&&"large"===c),(0,s.default)(t,i+"-text",!f&&!h),(0,s.default)(t,i+"-corner",h),(0,s.default)(t,i+"-corner-large",h&&"large"===c),t)),m=(0,g.default)(i,r,(e={},(0,s.default)(e,i+"-not-a-wrapper",!a),(0,s.default)(e,i+"-corner-wrapper",h),(0,s.default)(e,i+"-hot",!!p),(0,s.default)(e,i+"-corner-wrapper-large",h&&"large"===c),e));return _.createElement("span",{className:m},a,(u||f)&&_.createElement("sup",(0,o.default)({className:v},d),u))}}]),e}(_.Component);e.default=x,x.defaultProps={prefixCls:"am-badge",size:"small",overflowCount:99,dot:!1,corner:!1},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(385),s=(n.n(a),n(386)),u=n.n(s),c=n(35),l=n.n(c),f=n(389),h=n(738),p=n(91),d=n(1264),v=n.n(d),m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),g=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return o(e,t),m(e,[{key:"getLocationData",value:function(){var t=new h.d({id:"map",map:new p.a({style:"normal",rotateEnable:!1,center:[108.323,22.82],zoom:10,token:"ff533602d57df6f8ab3b0fea226ae52f"})}),e=(new h.b).source(v.a).shape("fill").color("#f50").style({opacity:.2});t.on("loaded",function(){var n=new h.e({position:"topright"});Object(f.a)({url:"/v2/asir/list"}).then(function(r){r.data.map(function(e){var n="<img src="+e.img+' style="width: 100%" />',r=new h.c({offsets:[0,20],html:n,closeOnClick:!0,maxWidth:"100%"}).setLngLat({lng:e.lng,lat:e.lat}),i=new h.a({color:"#f50"}).setLnglat([e.lng,e.lat]).setPopup(r);t.addMarker(i),u.a.hide()}),t.addControl(n),t.addLayer(e)}).catch(function(){u.a.info("\u8bf7\u5237\u65b0\u9875\u9762",2),u.a.hide()})})}},{key:"componentDidMount",value:function(){u.a.loading("\u52a0\u8f7d\u4e2d",0),this.getLocationData()}},{key:"render",value:function(){var t=document.documentElement.clientHeight-180;return l.a.createElement("div",{id:"map",style:{minHeight:t,touchAction:"none",position:"relative"}})}}]),e}(c.Component);e.a=g},function(t,e,n){"use strict";n(719)},function(t,e,n){var r=n(720);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,".am-icon {\n  fill: currentColor;\n  background-size: cover;\n  width: 22px;\n  height: 22px;\n}\n.am-icon-xxs {\n  width: 15px;\n  height: 15px;\n}\n.am-icon-xs {\n  width: 18px;\n  height: 18px;\n}\n.am-icon-sm {\n  width: 21px;\n  height: 21px;\n}\n.am-icon-md {\n  width: 22px;\n  height: 22px;\n}\n.am-icon-lg {\n  width: 36px;\n  height: 36px;\n}\n.am-icon-loading {\n  -webkit-animation: cirle-anim 1s linear infinite;\n          animation: cirle-anim 1s linear infinite;\n}\n@-webkit-keyframes cirle-anim {\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes cirle-anim {\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n",""])},function(t,e,n){var r=n(722);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,".am-toast {\n  position: fixed;\n  width: 100%;\n  z-index: 1999;\n  font-size: 14px;\n  text-align: center;\n}\n.am-toast > span {\n  max-width: 50%;\n}\n.am-toast.am-toast-mask {\n  height: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  left: 0;\n  top: 0;\n  -webkit-transform: translateZ(1px);\n          transform: translateZ(1px);\n}\n.am-toast.am-toast-nomask {\n  position: fixed;\n  max-width: 50%;\n  width: auto;\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translateZ(1px);\n          transform: translateZ(1px);\n}\n.am-toast.am-toast-nomask .am-toast-notice {\n  -webkit-transform: translateX(-50%) translateY(-50%);\n      -ms-transform: translateX(-50%) translateY(-50%);\n          transform: translateX(-50%) translateY(-50%);\n}\n.am-toast-notice-content .am-toast-text {\n  min-width: 60px;\n  border-radius: 3px;\n  color: #fff;\n  background-color: rgba(58, 58, 58, 0.9);\n  line-height: 1.5;\n  padding: 9px 15px;\n}\n.am-toast-notice-content .am-toast-text.am-toast-text-icon {\n  border-radius: 5px;\n  padding: 15px 15px;\n}\n.am-toast-notice-content .am-toast-text.am-toast-text-icon .am-toast-text-info {\n  margin-top: 6px;\n}\n",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(724);e.default=r.a},function(t,e,n){"use strict";function r(){return"rcNotification_"+M+"_"+k++}var i=n(725),o=n.n(i),a=n(156),s=n.n(a),u=n(73),c=n.n(u),l=n(54),f=n.n(l),h=n(53),p=n.n(h),d=n(55),v=n.n(d),m=n(56),g=n.n(m),y=n(35),_=n.n(y),b=n(182),x=n.n(b),w=n(229),E=n.n(w),S=n(727),O=n(734),T=n(157),A=n.n(T),C=n(735),k=0,M=Date.now(),P=function(t){function e(){var t,n,i,o;f()(this,e);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return n=i=v()(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),i.state={notices:[]},i.add=function(t){var e=t.key=t.key||r();i.setState(function(n){var r=n.notices;if(!r.filter(function(t){return t.key===e}).length)return{notices:r.concat(t)}})},i.remove=function(t){i.setState(function(e){return{notices:e.notices.filter(function(e){return e.key!==t})}})},o=n,v()(i,o)}return g()(e,t),p()(e,[{key:"getTransitionName",value:function(){var t=this.props,e=t.transitionName;return!e&&t.animation&&(e=t.prefixCls+"-"+t.animation),e}},{key:"render",value:function(){var t,e=this,n=this.props,r=this.state.notices.map(function(t){var r=Object(O.a)(e.remove.bind(e,t.key),t.onClose);return _.a.createElement(C.a,c()({prefixCls:n.prefixCls},t,{onClose:r}),t.content)}),i=(t={},s()(t,n.prefixCls,1),s()(t,n.className,!!n.className),t);return _.a.createElement("div",{className:A()(i),style:n.style},_.a.createElement(S.a,{transitionName:this.getTransitionName()},r))}}]),e}(y.Component);P.propTypes={prefixCls:x.a.string,transitionName:x.a.string,animation:x.a.oneOfType([x.a.string,x.a.object]),style:x.a.object},P.defaultProps={prefixCls:"rmc-notification",animation:"fade",style:{top:65,left:"50%"}},P.newInstance=function(t,e){function n(t){u||(u=!0,e({notice:function(e){t.add(e)},removeNotice:function(e){t.remove(e)},component:t,destroy:function(){E.a.unmountComponentAtNode(s),i||document.body.removeChild(s)}}))}var r=t||{},i=r.getContainer,a=o()(r,["getContainer"]),s=void 0;i?s=i():(s=document.createElement("div"),document.body.appendChild(s));var u=!1;E.a.render(_.a.createElement(P,c()({},a,{ref:n})),s)},e.a=P},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}},function(t,e,n){"use strict";function r(){}function i(){}var o=n(344);i.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,i,a){if(a!==o){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";function r(t){var e=t.children;return y.a.isValidElement(e)&&!e.key?y.a.cloneElement(e,{key:O}):e}function i(){}var o=n(73),a=n.n(o),s=n(156),u=n.n(s),c=n(54),l=n.n(c),f=n(53),h=n.n(f),p=n(55),d=n.n(p),v=n(56),m=n.n(v),g=n(35),y=n.n(g),_=n(182),b=n.n(_),x=n(728),w=n(729),E=n(730),S=n(388),O="rc_animate_"+Date.now(),T=function(t){function e(t){l()(this,e);var n=d()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return A.call(n),n.currentlyAnimatingKeys={},n.keysToEnter=[],n.keysToLeave=[],n.state={children:Object(w.e)(r(t))},n.childrenRefs={},n}return m()(e,t),h()(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.showProp,n=this.state.children;e&&(n=n.filter(function(t){return!!t.props[e]})),n.forEach(function(e){e&&t.performAppear(e.key)})}},{key:"componentWillReceiveProps",value:function(t){var e=this;this.nextProps=t;var n=Object(w.e)(r(t)),i=this.props;i.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(t){e.stop(t)});var o=i.showProp,a=this.currentlyAnimatingKeys,s=i.exclusive?Object(w.e)(r(i)):this.state.children,c=[];o?(s.forEach(function(t){var e=t&&Object(w.a)(n,t.key),r=void 0;(r=e&&e.props[o]||!t.props[o]?e:y.a.cloneElement(e||t,u()({},o,!0)))&&c.push(r)}),n.forEach(function(t){t&&Object(w.a)(s,t.key)||c.push(t)})):c=Object(w.d)(s,n),this.setState({children:c}),n.forEach(function(t){var n=t&&t.key;if(!t||!a[n]){var r=t&&Object(w.a)(s,n);if(o){var i=t.props[o];if(r){!Object(w.b)(s,n,o)&&i&&e.keysToEnter.push(n)}else i&&e.keysToEnter.push(n)}else r||e.keysToEnter.push(n)}}),s.forEach(function(t){var r=t&&t.key;if(!t||!a[r]){var i=t&&Object(w.a)(n,r);if(o){var s=t.props[o];if(i){!Object(w.b)(n,r,o)&&s&&e.keysToLeave.push(r)}else s&&e.keysToLeave.push(r)}else i||e.keysToLeave.push(r)}})}},{key:"componentDidUpdate",value:function(){var t=this.keysToEnter;this.keysToEnter=[],t.forEach(this.performEnter);var e=this.keysToLeave;this.keysToLeave=[],e.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(t,e){var n=this.props.showProp;return n?Object(w.b)(t,e,n):Object(w.a)(t,e)}},{key:"stop",value:function(t){delete this.currentlyAnimatingKeys[t];var e=this.childrenRefs[t];e&&e.stop()}},{key:"render",value:function(){var t=this,e=this.props;this.nextProps=e;var n=this.state.children,r=null;n&&(r=n.map(function(n){if(null===n||void 0===n)return n;if(!n.key)throw new Error("must set key for <rc-animate> children");return y.a.createElement(E.a,{key:n.key,ref:function(e){t.childrenRefs[n.key]=e},animation:e.animation,transitionName:e.transitionName,transitionEnter:e.transitionEnter,transitionAppear:e.transitionAppear,transitionLeave:e.transitionLeave},n)}));var i=e.component;if(i){var o=e;return"string"===typeof i&&(o=a()({className:e.className,style:e.style},e.componentProps)),y.a.createElement(i,o,r)}return r[0]||null}}]),e}(y.a.Component);T.isAnimate=!0,T.propTypes={className:b.a.string,style:b.a.object,component:b.a.any,componentProps:b.a.object,animation:b.a.object,transitionName:b.a.oneOfType([b.a.string,b.a.object]),transitionEnter:b.a.bool,transitionAppear:b.a.bool,exclusive:b.a.bool,transitionLeave:b.a.bool,onEnd:b.a.func,onEnter:b.a.func,onLeave:b.a.func,onAppear:b.a.func,showProp:b.a.string,children:b.a.node},T.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:i,onEnter:i,onLeave:i,onAppear:i};var A=function(){var t=this;this.performEnter=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillEnter(t.handleDoneAdding.bind(t,e,"enter")))},this.performAppear=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillAppear(t.handleDoneAdding.bind(t,e,"appear")))},this.handleDoneAdding=function(e,n){var i=t.props;if(delete t.currentlyAnimatingKeys[e],!i.exclusive||i===t.nextProps){var o=Object(w.e)(r(i));t.isValidChildByKey(o,e)?"appear"===n?S.a.allowAppearCallback(i)&&(i.onAppear(e),i.onEnd(e,!0)):S.a.allowEnterCallback(i)&&(i.onEnter(e),i.onEnd(e,!0)):t.performLeave(e)}},this.performLeave=function(e){t.childrenRefs[e]&&(t.currentlyAnimatingKeys[e]=!0,t.childrenRefs[e].componentWillLeave(t.handleDoneLeaving.bind(t,e)))},this.handleDoneLeaving=function(e){var n=t.props;if(delete t.currentlyAnimatingKeys[e],!n.exclusive||n===t.nextProps){var i=Object(w.e)(r(n));if(t.isValidChildByKey(i,e))t.performEnter(e);else{var o=function(){S.a.allowLeaveCallback(n)&&(n.onLeave(e),n.onEnd(e,!1))};Object(w.c)(t.state.children,i,n.showProp)?o():t.setState({children:i},o)}}}};e.a=Object(x.a)(T)},function(t,e,n){"use strict";var r=n(35),i=n.n(r),o=function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");return"function"!==typeof e.componentWillReceiveProps?t:i.a.Profiler?(e.UNSAFE_componentWillReceiveProps=e.componentWillReceiveProps,delete e.componentWillReceiveProps,t):t};e.a=o},function(t,e,n){"use strict";function r(t){var e=[];return c.a.Children.forEach(t,function(t){e.push(t)}),e}function i(t,e){var n=null;return t&&t.forEach(function(t){n||t&&t.key===e&&(n=t)}),n}function o(t,e,n){var r=null;return t&&t.forEach(function(t){if(t&&t.key===e&&t.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=t}}),r}function a(t,e,n){var r=t.length===e.length;return r&&t.forEach(function(t,i){var o=e[i];t&&o&&(t&&!o||!t&&o?r=!1:t.key!==o.key?r=!1:n&&t.props[n]!==o.props[n]&&(r=!1))}),r}function s(t,e){var n=[],r={},o=[];return t.forEach(function(t){t&&i(e,t.key)?o.length&&(r[t.key]=o,o=[]):o.push(t)}),e.forEach(function(t){t&&Object.prototype.hasOwnProperty.call(r,t.key)&&(n=n.concat(r[t.key])),n.push(t)}),n=n.concat(o)}e.e=r,e.a=i,e.b=o,e.c=a,e.d=s;var u=n(35),c=n.n(u)},function(t,e,n){"use strict";var r=n(54),i=n.n(r),o=n(53),a=n.n(o),s=n(55),u=n.n(s),c=n(56),l=n.n(c),f=n(35),h=n.n(f),p=n(229),d=n.n(p),v=n(182),m=n.n(v),g=n(731),y=n(388),_={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},b=function(t){function e(){return i()(this,e),u()(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return l()(e,t),a()(e,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(t){y.a.isEnterSupported(this.props)?this.transition("enter",t):t()}},{key:"componentWillAppear",value:function(t){y.a.isAppearSupported(this.props)?this.transition("appear",t):t()}},{key:"componentWillLeave",value:function(t){y.a.isLeaveSupported(this.props)?this.transition("leave",t):t()}},{key:"transition",value:function(t,e){var n=this,r=d.a.findDOMNode(this),i=this.props,o=i.transitionName,a="object"===typeof o;this.stop();var s=function(){n.stopper=null,e()};if((g.b||!i.animation[t])&&o&&i[_[t]]){var u=a?o[t]:o+"-"+t,c=u+"-active";a&&o[t+"Active"]&&(c=o[t+"Active"]),this.stopper=Object(g.a)(r,{name:u,active:c},s)}else this.stopper=i.animation[t](r,s)}},{key:"stop",value:function(){var t=this.stopper;t&&(this.stopper=null,t.stop())}},{key:"render",value:function(){return this.props.children}}]),e}(h.a.Component);b.propTypes={children:m.a.any,animation:m.a.any,transitionName:m.a.any},e.a=b},function(t,e,n){"use strict";function r(t,e){for(var n=window.getComputedStyle(t,null),r="",i=0;i<p.length&&!(r=n.getPropertyValue(p[i]+e));i++);return r}function i(t){if(f){var e=parseFloat(r(t,"transition-delay"))||0,n=parseFloat(r(t,"transition-duration"))||0,i=parseFloat(r(t,"animation-delay"))||0,o=parseFloat(r(t,"animation-duration"))||0,a=Math.max(n+e,o+i);t.rcEndAnimTimeout=setTimeout(function(){t.rcEndAnimTimeout=null,t.rcEndListener&&t.rcEndListener()},1e3*a+200)}}function o(t){t.rcEndAnimTimeout&&(clearTimeout(t.rcEndAnimTimeout),t.rcEndAnimTimeout=null)}n.d(e,"b",function(){return f});var a=n(255),s=n.n(a),u=n(732),c=n(733),l=n.n(c),f=0!==u.a.endEvents.length,h=["Webkit","Moz","O","ms"],p=["-webkit-","-moz-","-o-","ms-",""],d=function(t,e,n){var r="object"===("undefined"===typeof e?"undefined":s()(e)),a=r?e.name:e,c=r?e.active:e+"-active",f=n,h=void 0,p=void 0,d=l()(t);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(f=n.end,h=n.start,p=n.active),t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(e){e&&e.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),o(t),d.remove(a),d.remove(c),u.a.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,f&&f())},u.a.addEndEventListener(t,t.rcEndListener),h&&h(),d.add(a),t.rcAnimTimeout=setTimeout(function(){t.rcAnimTimeout=null,d.add(c),p&&setTimeout(p,0),i(t)},30),{stop:function(){t.rcEndListener&&t.rcEndListener()}}};d.style=function(t,e,n){t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(e){e&&e.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),o(t),u.a.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,n&&n())},u.a.addEndEventListener(t,t.rcEndListener),t.rcAnimTimeout=setTimeout(function(){for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);t.rcAnimTimeout=null,i(t)},0)},d.setTransition=function(t,e,n){var r=e,i=n;void 0===n&&(i=r,r=""),r=r||"",h.forEach(function(e){t.style[e+"Transition"+r]=i})},d.isCssAnimationSupported=f,e.a=d},function(t,e,n){"use strict";function r(t,e,n){t.addEventListener(e,n,!1)}function i(t,e,n){t.removeEventListener(e,n,!1)}var o={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[],u=[];"undefined"!==typeof window&&"undefined"!==typeof document&&function(){function t(t,e){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];for(var o in i)if(o in n){e.push(i[o]);break}}}var e=document.createElement("div"),n=e.style;"AnimationEvent"in window||(delete o.animationstart.animation,delete a.animationend.animation),"TransitionEvent"in window||(delete o.transitionstart.transition,delete a.transitionend.transition),t(o,s),t(a,u)}();var c={startEvents:s,addStartEventListener:function(t,e){if(0===s.length)return void window.setTimeout(e,0);s.forEach(function(n){r(t,n,e)})},removeStartEventListener:function(t,e){0!==s.length&&s.forEach(function(n){i(t,n,e)})},endEvents:u,addEndEventListener:function(t,e){if(0===u.length)return void window.setTimeout(e,0);u.forEach(function(n){r(t,n,e)})},removeEndEventListener:function(t,e){0!==u.length&&u.forEach(function(n){i(t,n,e)})}};e.a=c},function(t,e,n){function r(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}try{var i=n(387)}catch(t){var i=n(387)}var o=/\s+/,a=Object.prototype.toString;t.exports=function(t){return new r(t)},r.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array();return~i(e,t)||e.push(t),this.el.className=e.join(" "),this},r.prototype.remove=function(t){if("[object RegExp]"==a.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=i(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},r.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},r.prototype.toggle=function(t,e){return this.list?("undefined"!==typeof e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!==typeof e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},r.prototype.array=function(){var t=this.el.getAttribute("class")||"",e=t.replace(/^\s+|\s+$/g,""),n=e.split(o);return""===n[0]&&n.shift(),n},r.prototype.has=r.prototype.contains=function(t){return this.list?this.list.contains(t):!!~i(this.array(),t)}},function(t,e,n){"use strict";function r(){var t=[].slice.call(arguments,0);return 1===t.length?t[0]:function(){for(var e=0;e<t.length;e++)t[e]&&t[e].apply&&t[e].apply(this,arguments)}}e.a=r},function(t,e,n){"use strict";var r=n(156),i=n.n(r),o=n(54),a=n.n(o),s=n(53),u=n.n(s),c=n(55),l=n.n(c),f=n(56),h=n.n(f),p=n(35),d=n.n(p),v=n(157),m=n.n(v),g=n(182),y=n.n(g),_=function(t){function e(){var t,n,r,i;a()(this,e);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return n=r=l()(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(s))),r.close=function(){r.clearCloseTimer(),r.props.onClose()},r.startCloseTimer=function(){r.props.duration&&(r.closeTimer=setTimeout(function(){r.close()},1e3*r.props.duration))},r.clearCloseTimer=function(){r.closeTimer&&(clearTimeout(r.closeTimer),r.closeTimer=null)},i=n,l()(r,i)}return h()(e,t),u()(e,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"render",value:function(){var t,e=this.props,n=e.prefixCls+"-notice",r=(t={},i()(t,""+n,1),i()(t,n+"-closable",e.closable),i()(t,e.className,!!e.className),t);return d.a.createElement("div",{className:m()(r),style:e.style},d.a.createElement("div",{className:n+"-content"},e.children),e.closable?d.a.createElement("a",{tabIndex:"0",onClick:this.close,className:n+"-close"},d.a.createElement("span",{className:n+"-close-x"})):null)}}]),e}(p.Component);_.propTypes={duration:y.a.number,onClose:y.a.func,children:y.a.any},_.defaultProps={onEnd:function(){},onClose:function(){},duration:1.5,style:{right:"50%"}},e.a=_},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(73),o=r(i),a=n(54),s=r(a),u=n(53),c=r(u),l=n(55),f=r(l),h=n(56),p=r(h),d=n(157),v=r(d),m=n(35),g=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(m),y=n(737),_=r(y),b=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]]);return n},x=function(t){function e(){return(0,s.default)(this,e),(0,f.default)(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return(0,p.default)(e,t),(0,c.default)(e,[{key:"componentDidMount",value:function(){(0,_.default)()}},{key:"render",value:function(){var t=this.props,e=t.type,n=t.className,r=t.size,i=b(t,["type","className","size"]),a=(0,v.default)(n,"am-icon","am-icon-"+e,"am-icon-"+r);return g.createElement("svg",(0,o.default)({className:a},i),g.createElement("use",{xlinkHref:"#"+e}))}}]),e}(g.Component);e.default=x,x.defaultProps={size:"md"},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return'\n  <svg\n    xmlns="http://www.w3.org/2000/svg"\n    xmlns:xlink="http://www.w3.org/1999/xlink"\n    id="__ANTD_MOBILE_SVG_SPRITE_NODE__"\n    style="display:none;overflow:hidden;width:0;height:0"\n  >\n    <defs>\n      '+t+"\n    </defs>\n  </svg>\n"},i={check:'<svg viewBox="0 0 44 44"><path fill-rule="evenodd" d="M34.538 8L38 11.518 17.808 32 8 22.033l3.462-3.518 6.346 6.45z"/></svg>',"check-circle":'<svg viewBox="0 0 48 48"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zM13.1 23.2l-2.2 2.1 10 9.9L38.1 15l-2.2-2-15.2 17.8-7.6-7.6z" fill-rule="evenodd"/></svg>',"check-circle-o":'<svg viewBox="0 0 48 48"><g fill-rule="evenodd"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm0-3c11.598 0 21-9.402 21-21S35.598 3 24 3 3 12.402 3 24s9.402 21 21 21z"/><path d="M12.2 23.2L10 25.3l10 9.9L37.2 15 35 13 19.8 30.8z"/></g></svg>',cross:'<svg viewBox="0 0 44 44"><path fill-rule="evenodd" d="M24.008 21.852l8.97-8.968L31.092 11l-8.97 8.968L13.157 11l-1.884 1.884 8.968 8.968-9.24 9.24 1.884 1.885 9.24-9.24 9.24 9.24 1.885-1.884-9.24-9.24z"/></svg>',"cross-circle":'<svg viewBox="0 0 48 48"><g fill-rule="evenodd"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm0-3c11.598 0 21-9.402 21-21S35.598 3 24 3 3 12.402 3 24s9.402 21 21 21z"/><path d="M24.34 22.22l-7.775-7.775a1.5 1.5 0 1 0-2.12 2.12l7.773 7.775-7.774 7.775a1.5 1.5 0 1 0 2.12 2.12l7.775-7.773 7.774 7.774a1.5 1.5 0 1 0 2.12-2.12L26.46 24.34l7.774-7.774a1.5 1.5 0 1 0-2.12-2.12l-7.776 7.773z"/></g></svg>',"cross-circle-o":'<svg viewBox="0 0 48 48"><path d="M24 48c13.255 0 24-10.745 24-24S37.255 0 24 0 0 10.745 0 24s10.745 24 24 24zm.353-25.77l-7.593-7.593c-.797-.8-1.538-.822-2.263-.207-.724.614-.56 1.617-.124 2.067l7.852 7.847-7.72 7.723c-.727.728-.56 1.646-.066 2.177.493.532 1.553.683 2.31-.174l7.588-7.584 7.644 7.623c.796.798 1.608.724 2.21.145.605-.58.72-1.442-.074-2.24l-7.657-7.67 7.545-7.52c.81-.697.9-1.76.297-2.34-.92-.885-1.85-.338-2.264.078l-7.685 7.667z" fill-rule="evenodd"/></svg>',left:'<svg viewBox="0 0 44 44"><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M16.247 21.4L28.48 9.165l2.12 2.12-10.117 10.12L30.6 31.524l-2.12 2.12-12.233-12.232.007-.006z"/></svg>',right:'<svg viewBox="0 0 44 44"><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M30.6 21.4L18.37 9.165l-2.12 2.12 10.117 10.12-10.118 10.118 2.12 2.12 12.234-12.232-.005-.006z"/></svg>',down:'<svg viewBox="0 0 44 44"><path d="M22.355 28.237l-11.483-10.9c-.607-.576-1.714-.396-2.48.41l.674-.71c-.763.802-.73 2.07-.282 2.496l11.37 10.793-.04.04 2.088 2.195L23.3 31.52l12.308-11.682c.447-.425.48-1.694-.282-2.496l.674.71c-.766-.806-1.873-.986-2.48-.41L22.355 28.237z" fill-rule="evenodd"/></svg>',up:'<svg viewBox="0 0 44 44"><path fill="none" d="M-1-1h46v46H-1z"/><defs><path id="a" d="M-129-845h24v24h-24z"/></defs><clipPath id="b"><use xlink:href="#a"/></clipPath><g clip-path="url(#b)"><defs><path id="c" d="M-903-949H947V996H-903z"/></defs></g><path d="M23.417 14.23L11.184 26.46l2.12 2.12 10.12-10.117 10.118 10.118 2.12-2.12L23.43 14.228l-.006.005z"/></svg>',loading:'<svg viewBox="0 -2 59.75 60.25"><path fill="#ccc" d="M29.69-.527C14.044-.527 1.36 12.158 1.36 27.806S14.043 56.14 29.69 56.14c15.65 0 28.334-12.686 28.334-28.334S45.34-.527 29.69-.527zm.185 53.75c-14.037 0-25.417-11.38-25.417-25.417S15.838 2.39 29.875 2.39s25.417 11.38 25.417 25.417-11.38 25.416-25.417 25.416z"/><path fill="none" stroke="#108ee9" stroke-width="3" stroke-linecap="round" stroke-miterlimit="10" d="M56.587 29.766c.37-7.438-1.658-14.7-6.393-19.552"/></svg>',search:'<svg viewBox="0 0 44 44"><path d="M32.98 29.255l8.915 8.293L39.603 40l-8.86-8.242a15.952 15.952 0 0 1-10.753 4.147C11.16 35.905 4 28.763 4 19.952 4 11.142 11.16 4 19.99 4s15.99 7.142 15.99 15.952c0 3.472-1.112 6.685-3 9.303zm.05-9.21c0 7.123-5.7 12.918-12.88 12.918-7.176 0-13.015-5.795-13.015-12.918 0-7.12 5.84-12.917 13.017-12.917 7.178 0 12.88 5.797 12.88 12.917z" fill-rule="evenodd"/></svg>',ellipsis:'<svg viewBox="0 0 44 44"><circle cx="21.888" cy="22" r="4.045"/><circle cx="5.913" cy="22" r="4.045"/><circle cx="37.863" cy="22" r="4.045"/></svg>',"ellipsis-circle":'<svg viewBox="0 0 44 44"><g fill-rule="evenodd"><path d="M22.13.11C10.05.11.255 9.902.255 21.983S10.05 43.86 22.13 43.86s21.875-9.795 21.875-21.876S34.21.11 22.13.11zm0 40.7c-10.396 0-18.825-8.43-18.825-18.826S11.735 3.16 22.13 3.16c10.396 0 18.825 8.428 18.825 18.824S32.525 40.81 22.13 40.81z"/><circle cx="21.888" cy="22.701" r="2.445"/><circle cx="12.23" cy="22.701" r="2.445"/><circle cx="31.546" cy="22.701" r="2.445"/></g></svg>',"exclamation-circle":'<svg viewBox="0 0 64 64"><path d="M59.58 40.89L41.193 9.11C39.135 5.382 35.723 3 31.387 3c-3.11 0-6.52 2.382-8.58 6.11L4.42 40.89c-2.788 4.635-3.126 8.81-1.225 12.22C5.015 56.208 7.572 58 13 58h36.773c5.428 0 9.21-1.792 11.03-4.89 1.9-3.41 1.565-7.583-1.224-12.22zm-2.452 11c-.635 1.694-3.802 2.443-7.354 2.443H13c-3.59 0-5.493-.75-6.13-2.444-1.71-2.41-1.374-5.263 0-8.557l18.387-31.777c2.116-3.168 4.394-4.89 6.13-4.89 2.96 0 5.238 1.722 7.354 4.89l18.387 31.777c1.374 3.294 1.713 6.146 0 8.556zm-25.74-33c-.405 0-1.227.835-1.227 2.443v15.89c0 1.608.823 2.444 1.227 2.444 1.628 0 2.452-.836 2.452-2.445v-15.89c0-1.607-.825-2.443-2.453-2.443zm0 23.22c-.405 0-1.227.79-1.227 1.223v2.445c0 .434.823 1.222 1.227 1.222 1.628 0 2.452-.788 2.452-1.222v-2.445c0-.434-.825-1.222-2.453-1.222z" fill-rule="evenodd"/></svg>',"info-circle":'<svg viewBox="0 0 44 44"><circle cx="13.828" cy="19.63" r="1.938"/><circle cx="21.767" cy="19.63" r="1.938"/><circle cx="29.767" cy="19.63" r="1.938"/><path d="M22.102 4.16c-9.918 0-17.958 7.147-17.958 15.962 0 4.935 2.522 9.345 6.48 12.273v5.667l.04.012a2.627 2.627 0 1 0 4.5 1.455h.002l5.026-3.54c.628.06 1.265.094 1.91.094 9.92 0 17.96-7.146 17.96-15.96C40.06 11.306 32.02 4.16 22.1 4.16zm-.04 29.902c-.902 0-1.78-.08-2.642-.207l-5.882 4.234c-.024.024-.055.04-.083.06l-.008.005a.51.51 0 0 1-.284.095.525.525 0 0 1-.525-.525l.005-6.375c-3.91-2.516-6.456-6.544-6.456-11.1 0-7.628 7.107-13.812 15.875-13.812s15.875 6.184 15.875 13.812-7.107 13.812-15.875 13.812z"/></svg>',"question-circle":'<svg viewBox="0 0 44 44"><g fill-rule="evenodd"><path d="M21.186 3c-10.853 0-19.36 8.506-19.36 19.358C1.827 32.494 10.334 41 21.187 41c10.133 0 18.64-8.506 18.64-18.642C39.827 11.506 31.32 3 21.187 3m15.64 19c0 8.823-7.178 16-16 16s-16-7.177-16-16 7.178-16 16-16 16 7.177 16 16z"/><path d="M22.827 31.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m4-15.48c0 .957-.203 1.822-.61 2.593-.427.792-1.117 1.612-2.073 2.457-.867.734-1.453 1.435-1.754 2.096-.302.7-.453 1.693-.453 2.98a.828.828 0 0 1-.823.854.828.828 0 0 1-.584-.22.877.877 0 0 1-.24-.635c0-1.305.168-2.38.506-3.227.336-.883.93-1.682 1.78-2.4 1.01-.883 1.71-1.692 2.1-2.428.336-.645.503-1.38.503-2.21-.02-.935-.3-1.7-.85-2.288-.655-.717-1.62-1.075-2.897-1.075-1.506 0-2.596.535-3.27 1.6-.46.754-.688 1.645-.688 2.677a.92.92 0 0 1-.266.66.747.747 0 0 1-.56.25.73.73 0 0 1-.584-.194c-.16-.164-.24-.393-.24-.69 0-1.82.585-3.272 1.755-4.357C18.645 11.486 19.928 11 21.434 11h.293c1.452 0 2.638.414 3.56 1.24 1.028.903 1.54 2.163 1.54 3.78z"/></g></svg>',voice:'<svg viewBox="0 0 38 33"><g fill-rule="evenodd"><path d="M17.838 28.8c-.564-.468-1.192-.983-1.836-1.496-4.244-3.385-5.294-3.67-6.006-3.67-.014 0-.027.005-.04.005-.015 0-.028-.006-.042-.006H3.562c-.734 0-.903-.203-.903-.928v-12.62c0-.49.057-.8.66-.8H9.1c.694 0 1.76-.28 6.4-3.63.83-.596 1.638-1.196 2.337-1.722V28.8zM19.682.19c-.463-.22-1.014-.158-1.417.157-.02.016-1.983 1.552-4.152 3.125C10.34 6.21 9.243 6.664 9.02 6.737H3.676c-.027 0-.053.003-.08.004H1.183c-.608 0-1.1.487-1.1 1.086V25.14c0 .598.492 1.084 1.1 1.084h8.71c.22.08 1.257.55 4.605 3.24 1.947 1.562 3.694 3.088 3.712 3.103.25.22.568.333.89.333.186 0 .373-.038.55-.116.48-.213.79-.684.79-1.204V1.38c0-.506-.294-.968-.758-1.19z" mask="url(#mask-2)"/><path d="M31.42 16.475c0-3.363-1.854-6.297-4.606-7.876-.125-.067-.42-.193-.625-.193-.613 0-1.11.488-1.11 1.09 0 .404.22.764.55.952 2.13 1.19 3.566 3.44 3.566 6.024 0 2.627-1.486 4.913-3.677 6.087-.32.19-.53.54-.53.935 0 .602.495 1.09 1.106 1.09.26.002.568-.15.568-.15 2.835-1.556 4.754-4.538 4.754-7.96" mask="url(#mask-4)"/><path d="M30.14 3.057c-.205-.122-.41-.22-.658-.22-.608 0-1.1.485-1.1 1.084 0 .434.26.78.627.978 4.042 2.323 6.76 6.636 6.76 11.578 0 4.938-2.715 9.248-6.754 11.572-.354.19-.66.55-.66.993 0 .6.494 1.085 1.102 1.085.243 0 .438-.092.65-.213 4.692-2.695 7.848-7.7 7.848-13.435 0-5.723-3.142-10.718-7.817-13.418" mask="url(#mask-6)"/></g></svg>',plus:'<svg viewBox="0 0 30 30"><path d="M14 14H0v2h14v14h2V16h14v-2H16V0h-2v14z" fill-rule="evenodd"/></svg>',minus:'<svg viewBox="0 0 30 2"><path d="M0 0h30v2H0z" fill-rule="evenodd"/></svg>',dislike:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path fill="#FFF" d="M47 22h2v6h-2zm-24 0h2v6h-2z"/><path d="M21 51s4.6-7 15-7 15 7 15 7" stroke="#FFF" stroke-width="2"/></g></svg>',fail:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path d="M22 22l28.304 28.304m-28.304 0L50.304 22" stroke="#FFF" stroke-width="2"/></g></svg>',success:'<svg viewBox="0 0 72 72"><g fill="none" fill-rule="evenodd"><path d="M36 72c19.882 0 36-16.118 36-36S55.882 0 36 0 0 16.118 0 36s16.118 36 36 36zm0-2c18.778 0 34-15.222 34-34S54.778 2 36 2 2 17.222 2 36s15.222 34 34 34z" fill="#FFF"/><path stroke="#FFF" stroke-width="2" d="M19 34.54l11.545 11.923L52.815 24"/></g></svg>'},o=function(){var t=Object.keys(i).map(function(t){return"<symbol id="+t+i[t].split("svg")[1]+"symbol>"}).join("");return r(t)},a=function(){if(document){var t=document.getElementById("__ANTD_MOBILE_SVG_SPRITE_NODE__"),e=document.body;t||e.insertAdjacentHTML("afterbegin",o())}};e.default=a,t.exports=e.default},function(t,e,n){"use strict";var r=(n(183),n(434));n.d(e,"a",function(){return r.b}),n.d(e,"c",function(){return r.c}),n.d(e,"e",function(){return r.d});var i=(n(11),n(438));n.d(e,"b",function(){return i.b});var o=(n(91),n(1247));n.d(e,"d",function(){return o.a});n(9),n(1263)},function(t,e,n){"use strict";function r(t,e){var n=Object(i.a)(t);return Object(o.a)(n,e)}e.a=r;var i=n(740),o=n(390)},function(t,e,n){"use strict";var r=(n(264),n(741));n.d(e,"a",function(){return r.a});n(742),n(743)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(264),i=Object(r.a)(","),o=i.parse;i.parseRows,i.format,i.formatBody,i.formatRows,i.formatRow,i.formatValue},function(t,e,n){"use strict";var r=n(264),i=Object(r.a)("\t");i.parse,i.parseRows,i.format,i.formatBody,i.formatRows,i.formatRow,i.formatValue},function(t,e,n){"use strict";new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return Object(i.a)(t)}e.a=r;var i=n(391)},function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}e.a=r},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.a=r},function(t,e,n){"use strict";function r(t,e){if("object"!==Object(i.a)(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Object(i.a)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}e.a=r;var i=n(83)},function(t,e,n){"use strict";function r(t){for(var e=t.toString(),n=5381,r=e.length;r;)n=33*n^e.charCodeAt(--r);return n>>>0}function i(t,e){return void 0===e?null:1*Object(s.a)(t.properties[e])==="number"?1*t.properties[e]:t.properties&&t.properties[e]?r(t.properties[e]+"")%1000019:null}function o(t,e){var n=[],r={};return t.features?(t.features=t.features.filter(function(t){var e=t.geometry;return null!=t&&e&&e.type&&e.coordinates&&e.coordinates.length>0}),c()(t,!0),0===t.features.length?{dataArray:[],featureKeys:r}:(Object(f.b)(t,function(t,r){var o=i(t,null===e||void 0===e?void 0:e.featureId);null===o&&(o=r);var s=o,u=Object(l.a)(t),c=Object(a.a)(Object(a.a)({},t.properties),{},{coordinates:u,_id:s});n.push(c)}),{dataArray:n,featureKeys:r})):(t.features=[],{dataArray:[]})}e.a=o;var a=n(10),s=n(83),u=n(394),c=n.n(u),l=n(265),f=n(266)},function(t,e,n){"use strict";function r(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}function i(t){var e=t.length;if(e<=1)return[t];for(var n,i,o=[],a=0;a<e;a++){var s=r(t[a]);0!==s&&(void 0===i&&(i=s<0),i===s<0?(n&&o.push(n),n=[t[a]]):n.push(t[a]))}return n&&o.push(n),o}function o(t,e,n,r,o){function a(t){for(var e=0;e<t.length;e++){var n=t[e];if(n[3])break;var r=180-360*(n[1]+m)/p,i=360*(n[0]+d)/p-180,o=360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90;t[e]=[i,o,0,1]}}var s,u,c=o.geometry,l=o.type,f=o.tags,h=o.id,p=t*Math.pow(2,r),d=t*e,m=t*n,g=v[l];switch(l){case 1:var y=[];for(s=0;s<c.length;s++)y[s]=c[s][0];c=y,a(c);break;case 2:for(s=0;s<c.length;s++)a(c[s]);break;case 3:for(c=i(c),s=0;s<c.length;s++)for(u=0;u<c[s].length;u++)a(c[s][u])}return 1===c.length?c=c[0]:g="Multi"+g,{type:"Feature",geometry:{type:g,coordinates:c},properties:f,id:h,tileOrigin:[0,0],coord:""}}function a(t){var e={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return void 0===t||"undefined"===typeof t.geojsonvtOptions?e:Object(u.a)(Object(u.a)({},e),t.geojsonvtOptions)}function s(t,e){var n=a(e),r=n.extent||4096,i=Object(h.a)(t,n),o=function(t,e){return m(e,i,t,r)};return{data:t,dataArray:[],tilesetOptions:Object(u.a)(Object(u.a)(Object(u.a)({},d),e),{},{getTileData:o}),isTile:!0}}e.a=s;var u=n(10),c=n(7),l=n(8),f=n.n(l),h=n(752),p=n(758),d={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},v=["Unknown","Point","LineString","Polygon"],m=function(){var t=Object(c.a)(f.a.mark(function t(e,n,r,i){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var a=n.getTile(e.z,e.x,e.y),s=a?a.features.map(function(t){return o(i,r.x,r.y,r.z,t)}):[],u={layers:{defaultLayer:{features:s}}};t(new p.a(u,e.x,e.y,e.z))}));case 1:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}()},function(t,e,n){function r(){"use strict";function e(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}function n(t,e,n,r){var i=e&&e.prototype instanceof a?e:a,o=Object.create(i.prototype),s=new v(r||[]);return x(o,"_invoke",{value:f(t,n,s)}),o}function o(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function a(){}function s(){}function u(){}function c(t){["next","throw","return"].forEach(function(n){e(t,n,function(t){return this._invoke(n,t)})})}function l(t,e){function n(r,a,s,u){var c=o(t[r],t,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&b.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,s,u)},function(t){n("throw",t,s,u)}):e.resolve(f).then(function(t){l.value=t,s(l)},function(t){return n("throw",t,s,u)})}u(c.arg)}var r;x(this,"_invoke",{value:function(t,i){function o(){return new e(function(e,r){n(t,i,e,r)})}return r=r?r.then(o,o):o()}})}function f(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return g()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=h(s,n);if(u){if(u===T)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=o(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===T)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function h(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,h(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),T;var i=o(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,T;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,T):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T)}function p(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function d(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(p,this),this.reset(!0)}function m(t){if(t){var e=t[E];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(b.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:g}}function g(){return{value:void 0,done:!0}}t.exports=r=function(){return y},t.exports.__esModule=!0,t.exports.default=t.exports;var y={},_=Object.prototype,b=_.hasOwnProperty,x=Object.defineProperty||function(t,e,n){t[e]=n.value},w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",S=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(t,e,n){return t[e]=n}}y.wrap=n;var T={},A={};e(A,E,function(){return this});var C=Object.getPrototypeOf,k=C&&C(C(m([])));k&&k!==_&&b.call(k,E)&&(A=k);var M=u.prototype=a.prototype=Object.create(A);return s.prototype=u,x(M,"constructor",{value:u,configurable:!0}),x(u,"constructor",{value:s,configurable:!0}),s.displayName=e(u,O,"GeneratorFunction"),y.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},y.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,O,"GeneratorFunction")),t.prototype=Object.create(M),t},y.awrap=function(t){return{__await:t}},c(l.prototype),e(l.prototype,S,function(){return this}),y.AsyncIterator=l,y.async=function(t,e,r,i,o){void 0===o&&(o=Promise);var a=new l(n(t,e,r,i),o);return y.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},c(M),e(M,O,"Generator"),e(M,E,function(){return this}),e(M,"toString",function(){return"[object Generator]"}),y.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},y.values=m,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!t)for(var e in this)"t"===e.charAt(0)&&b.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=void 0),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),s=b.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),T},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),d(n),T}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:m(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),T}},y}var i=n(751).default;t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e){"@babel/helpers - typeof";return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";function r(t,e){return new i(t,e)}function i(t,e){e=this.options=a(Object.create(this.options),e);var n=e.debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=Object(s.a)(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=Object(c.a)(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(t,e,n){return 32*((1<<t)*n+e)+t}function a(t,e){for(var n in e)t[n]=e[n];return t}e.a=r;var s=n(753),u=n(395),c=n(755),l=n(756),f=n(757);i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},i.prototype.splitTile=function(t,e,n,r,i,a,s){for(var c=[t,e,n,r],l=this.options,h=l.debug;c.length;){r=c.pop(),n=c.pop(),e=c.pop(),t=c.pop();var p=1<<e,d=o(e,n,r),v=this.tiles[d];if(!v&&(h>1&&console.time("creation"),v=this.tiles[d]=Object(f.a)(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,v.numFeatures,v.numPoints,v.numSimplified),console.timeEnd("creation"));var m="z"+e;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(v.source=t,i){if(e===l.maxZoom||e===i)continue;var g=1<<i-e;if(n!==Math.floor(a/g)||r!==Math.floor(s/g))continue}else if(e===l.indexMaxZoom||v.numPoints<=l.indexMaxPoints)continue;if(v.source=null,0!==t.length){h>1&&console.time("clipping");var y,_,b,x,w,E,S=.5*l.buffer/l.extent,O=.5-S,T=.5+S,A=1+S;y=_=b=x=null,w=Object(u.a)(t,p,n-S,n+T,0,v.minX,v.maxX,l),E=Object(u.a)(t,p,n+O,n+A,0,v.minX,v.maxX,l),t=null,w&&(y=Object(u.a)(w,p,r-S,r+T,1,v.minY,v.maxY,l),_=Object(u.a)(w,p,r+O,r+A,1,v.minY,v.maxY,l),w=null),E&&(b=Object(u.a)(E,p,r-S,r+T,1,v.minY,v.maxY,l),x=Object(u.a)(E,p,r+O,r+A,1,v.minY,v.maxY,l),E=null),h>1&&console.timeEnd("clipping"),c.push(y||[],e+1,2*n,2*r),c.push(_||[],e+1,2*n,2*r+1),c.push(b||[],e+1,2*n+1,2*r),c.push(x||[],e+1,2*n+1,2*r+1)}}},i.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,a=r.debug;if(t<0||t>24)return null;var s=1<<t;e=(e%s+s)%s;var u=o(t,e,n);if(this.tiles[u])return Object(l.a)(this.tiles[u],i);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var c,f=t,h=e,p=n;!c&&f>0;)f--,h=Math.floor(h/2),p=Math.floor(p/2),c=this.tiles[o(f,h,p)];return c&&c.source?(a>1&&console.log("found parent tile z%d-%d-%d",f,h,p),a>1&&console.time("drilling down"),this.splitTile(c.source,f,h,p,t,e,n),a>1&&console.timeEnd("drilling down"),this.tiles[u]?Object(l.a)(this.tiles[u],i):null):null}},function(t,e,n){"use strict";function r(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)i(n,t.features[r],e,r);else"Feature"===t.type?i(n,t,e):i(n,{geometry:t},e);return n}function i(t,e,n,r){if(e.geometry){var u=e.geometry.coordinates,c=e.geometry.type,l=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),h=[],p=e.id;if(n.promoteId?p=e.properties[n.promoteId]:n.generateId&&(p=r||0),"Point"===c)o(u,h);else if("MultiPoint"===c)for(var d=0;d<u.length;d++)o(u[d],h);else if("LineString"===c)a(u,h,l,!1);else if("MultiLineString"===c){if(n.lineMetrics){for(d=0;d<u.length;d++)h=[],a(u[d],h,l,!1),t.push(Object(f.a)(p,"LineString",h,e.properties));return}s(u,h,l,!1)}else if("Polygon"===c)s(u,h,l,!0);else{if("MultiPolygon"!==c){if("GeometryCollection"===c){for(d=0;d<e.geometry.geometries.length;d++)i(t,{id:p,geometry:e.geometry.geometries[d],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(d=0;d<u.length;d++){var v=[];s(u[d],v,l,!0),h.push(v)}}t.push(Object(f.a)(p,c,h,e.properties))}}function o(t,e){e.push(u(t[0])),e.push(c(t[1])),e.push(0)}function a(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var f=u(t[s][0]),h=c(t[s][1]);e.push(f),e.push(h),e.push(0),s>0&&(a+=r?(i*h-f*o)/2:Math.sqrt(Math.pow(f-i,2)+Math.pow(h-o,2))),i=f,o=h}var p=e.length-3;e[2]=1,Object(l.a)(e,0,p,n),e[p+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function s(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];a(t[i],o,n,r),e.push(o)}}function u(t){return t/360+.5}function c(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}e.a=r;var l=n(754),f=n(267)},function(t,e,n){"use strict";function r(t,e,n,o){for(var a,s=o,u=n-e>>1,c=n-e,l=t[e],f=t[e+1],h=t[n],p=t[n+1],d=e+3;d<n;d+=3){var v=i(t[d],t[d+1],l,f,h,p);if(v>s)a=d,s=v;else if(v===s){var m=Math.abs(d-u);m<c&&(a=d,c=m)}}s>o&&(a-e>3&&r(t,e,a,o),t[a+2]=s,n-a>3&&r(t,a,n,o))}function i(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return a=t-n,s=e-r,a*a+s*s}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=e.buffer/e.extent,r=t,o=Object(a.a)(t,1,-1-n,n,0,-1,2,e),s=Object(a.a)(t,1,1-n,2+n,0,-1,2,e);return(o||s)&&(r=Object(a.a)(t,1,-n,1+n,0,-1,2,e)||[],o&&(r=i(o,1).concat(r)),s&&(r=r.concat(i(s,-1)))),r}function i(t,e){for(var n=[],r=0;r<t.length;r++){var i,a=t[r],u=a.type;if("Point"===u||"MultiPoint"===u||"LineString"===u)i=o(a.geometry,e);else if("MultiLineString"===u||"Polygon"===u){i=[];for(var c=0;c<a.geometry.length;c++)i.push(o(a.geometry[c],e))}else if("MultiPolygon"===u)for(i=[],c=0;c<a.geometry.length;c++){for(var l=[],f=0;f<a.geometry[c].length;f++)l.push(o(a.geometry[c][f],e));i.push(l)}n.push(Object(s.a)(a.id,u,i,a.tags))}return n}function o(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}e.a=r;var a=n(395),s=n(267)},function(t,e,n){"use strict";function r(t,e){if(t.transformed)return t;var n,r,o,a=1<<t.z,s=t.x,u=t.y;for(n=0;n<t.features.length;n++){var c=t.features[n],l=c.geometry,f=c.type;if(c.geometry=[],1===f)for(r=0;r<l.length;r+=2)c.geometry.push(i(l[r],l[r+1],e,a,s,u));else for(r=0;r<l.length;r++){var h=[];for(o=0;o<l[r].length;o+=2)h.push(i(l[r][o],l[r][o+1],e,a,s,u));c.geometry.push(h)}}return t.transformed=!0,t}function i(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}e.a=r},function(t,e,n){"use strict";function r(t,e,n,r,o){for(var a=e===o.maxZoom?0:o.tolerance/((1<<e)*o.extent),s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},u=0;u<t.length;u++){s.numFeatures++,i(s,t[u],a,o);var c=t[u].minX,l=t[u].minY,f=t[u].maxX,h=t[u].maxY;c<s.minX&&(s.minX=c),l<s.minY&&(s.minY=l),f>s.maxX&&(s.maxX=f),h>s.maxY&&(s.maxY=h)}return s}function i(t,e,n,r){var i=e.geometry,a=e.type,s=[];if("Point"===a||"MultiPoint"===a)for(var u=0;u<i.length;u+=3)s.push(i[u]),s.push(i[u+1]),t.numPoints++,t.numSimplified++;else if("LineString"===a)o(s,i,t,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(u=0;u<i.length;u++)o(s,i[u],t,n,"Polygon"===a,0===u);else if("MultiPolygon"===a)for(var c=0;c<i.length;c++){var l=i[c];for(u=0;u<l.length;u++)o(s,l[u],t,n,!0,0===u)}if(s.length){var f=e.tags||null;if("LineString"===a&&r.lineMetrics){f={};for(var h in e.tags)f[h]=e.tags[h];f.mapbox_clip_start=i.start/i.size,f.mapbox_clip_end=i.end/i.size}var p={geometry:s,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:f};null!==e.id&&(p.id=e.id),t.features.push(p)}}function o(t,e,n,r,i,o){var s=r*r;if(r>0&&e.size<(i?s:r))return void(n.numPoints+=e.length/3);for(var u=[],c=0;c<e.length;c+=3)(0===r||e[c+2]>s)&&(n.numSimplified++,u.push(e[c]),u.push(e[c+1])),n.numPoints++;i&&a(u,o),t.push(u)}function a(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(6),a=function(){function t(e,n,i,a){Object(r.a)(this,t),Object(o.a)(this,"vectorLayerCache",{}),this.x=n,this.y=i,this.z=a,this.vectorTile=e}return Object(i.a)(t,[{key:"getTileData",value:function(t){return t&&this.vectorTile.layers[t]?this.vectorLayerCache[t]?this.vectorLayerCache[t]:this.vectorTile.layers[t].features:[]}},{key:"getFeatureById",value:function(){throw new Error("Method not implemented.")}}]),t}()},function(t,e,n){"use strict";function r(t,e){var n=e.extent,r=void 0===n?[121.168,30.2828,121.384,30.4219]:n,a=new Promise(function(e){t instanceof HTMLImageElement||Object(o.J)(t)?e([t]):i(t,function(t){e(t)})});return{originData:t,images:a,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]}}function i(t,e){var n=t,i=[];if("string"===typeof n)Object(o.F)({url:n},function(t,n){n&&(i.push(n),e(i))});else{var a=n.length,s=0;n.forEach(function(t){Object(o.F)({url:t},function(t,n){s++,n&&i.push(n),s===a&&e(i)})})}return r}e.a=r;var o=n(9)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,e){var n=new g.a,r=Array.isArray(t.url)?t.url[0]:t.url;n.open(t.method||"GET",r,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer");for(var i in t.headers)t.headers.hasOwnProperty(i)&&n.setRequestHeader(i,t.headers[i]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var i=n.response;if("json"===t.type)try{i=JSON.parse(n.response)}catch(t){return e(t)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"),n)}else{var o=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new y(n.status,n.statusText,r.toString(),o))}},n.send(t.body),n}function a(t){return new Promise(function(e,n){o(t,function(t,r,i,o,a){t?n({err:t,data:null,xhr:a}):e({err:null,data:r,cacheControl:i,expires:o,xhr:a})})})}function s(t,e){return o(t,e)}function u(t,e){var n=new g.b.Image,r=g.b.URL||g.b.webkitURL;n.crossOrigin="anonymous",n.onload=function(){e(null,n),r.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame(function(){n.src=x})},n.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?r.createObjectURL(i):x}function c(t,e){var n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then(function(t){e(null,t)}).catch(function(t){e(new Error("Could not load image because of ".concat(t.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}e.d=a,n.d(e,"b",function(){return b}),n.d(e,"c",function(){return w}),n.d(e,"a",function(){return E});var l=n(10),f=n(1),h=n(0),p=n(3),d=n(4),v=n(2),m=n(761),g=n(184),y=function(t){function e(t,r,i,o){var a;return Object(h.a)(this,e),a=n.call(this,"AJAXError: ".concat(r," (").concat(t,"): ").concat(i)),a.status=t,a.statusText=r,a.url=i,a.body=o,a}Object(p.a)(e,t);var n=r(e);return Object(f.a)(e)}(Object(m.a)(Error)),_=function(t,e){return s(Object(l.a)(Object(l.a)({},t),{},{type:"json"}),e)},b=function(t,e){return s(Object(l.a)(Object(l.a)({},t),{},{type:"arrayBuffer"}),e)},x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",w=function(t,e,n){var r=function(t,r){if(t)e(t);else if(r){var i="function"===typeof createImageBitmap,o=n?n(r):r;i?c(o,e):u(o,e)}};return"json"===t.type?_(t,r):b(t,r)},E=function(t,e){"function"===typeof createImageBitmap?c(t,e):u(t,e)}},function(t,e,n){"use strict";function r(t){var e="function"===typeof Map?new Map:void 0;return(r=function(t){function n(){return Object(s.a)(t,arguments,Object(i.a)(this).constructor)}if(null===t||!Object(a.a)(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(o.a)(n,t)})(t)}e.a=r;var i=n(2),o=n(268),a=n(762),s=n(269)},function(t,e,n){"use strict";function r(t){return-1!==Function.toString.call(t).indexOf("[native code]")}e.a=r},function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(e,n){Object(r.a)(this,t),this.buffers=e,this.type=n}return Object(i.a)(t,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(t,e,n){throw new Error("not implemented")}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Object},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(83),i=n(0),o=n(1),a=function(){function t(){Object(i.a)(this,t);var e=arguments.length;if(2===e){if("number"===typeof arguments[0]&&"number"===typeof arguments[1])return this._w=arguments[0],this._h=arguments[1],void(this._data=new Uint8ClampedArray(this._w*this._h*4))}else 3===e&&"object"===Object(r.a)(arguments[0])&&"number"===typeof arguments[1]&&"number"===typeof arguments[2]&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return Object(o.a)(t,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return p});var r,i,o,a=n(185),s="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;if(s){var u=my.getSystemInfoSync();r=u.system,i=u.platform,o=u.language}else{var c={versions:function(){var t=a.a.navigator.userAgent;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1===t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1===t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,qq:" qq"===t.match(/\sQQ/i)}}(),language:(a.a.navigator.browserLanguage||a.a.navigator.language).toLowerCase()};c.versions.android?i="android":c.versions.trident?i="IE":c.versions.presto?i="Opera":c.versions.webKit?i="webKit":c.versions.gecko?i="Firefox":c.versions.mobile?i="mobile":c.versions.ios?i="ios":c.versions.iPhone?i="iPhone":c.versions.iPad?i="ipad":c.versions.webApp?i="webApp":c.versions.weixin?i="weixin":c.versions.qq&&(i="qq"),r=a.a.navigator.userAgent,o=c.language}var l=-1!==r.toLowerCase().indexOf("android"),f=l?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",h="Mozilla/5.0 (".concat(f,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(o),p={platform:i,language:o,appVersion:"5.0 (".concat(f,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:h}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,n){return{duration:0}},now:function(){}}},function(t,e,n){"use strict";function r(t){var e=Date.now(),n=Math.max(s+23,e);return u=setTimeout(function(){t(s=n)},n-e)}function i(t){var e=Object(a.a)();return e.requestAnimationFrame?e.requestAnimationFrame(t):r(t)}function o(t){var e=Object(a.a)();return e.cancelAnimationFrame?e.cancelAnimationFrame(t):clearTimeout(t)}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var a=n(187),s=0,u=0},function(t,e,n){"use strict";function r(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return Object(a.b)(e)}n.d(e,"a",function(){return s});var i=n(0),o=n(1),a=n(396),s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Object(i.a)(this,t),0==e.indexOf("http://")||0==e.indexOf("https://"))return void(this.href=e);this.href=n+e}return Object(o.a)(t,null,[{key:"createObjectURL",value:function(t){var e=t.buffers[0],n=t.type,i=r(e);return"data:".concat(n,";base64, ")+i}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:0x10000000000000000,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={}},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return d});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(271),f=new Map,h=new Map,p=new Map,d=function(t){function e(){var t;return Object(o.a)(this,e),t=n.call(this),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,f.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=p.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=h.get("responseHeader");return Object.keys(t).map(function(e){return"".concat(e,": ").concat(t[e])}).join("\n")}},{key:"getResponseHeader",value:function(t){return h.get("responseHeader")[t]}},{key:"open",value:function(t,e,n){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"setRequestHeader",value:function(t,e){var n=f.get("requestHeader");n[t]=e,f.set("requestHeader",n)}},{key:"addEventListener",value:function(t,e){var n=this;"function"===typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||n,e.call(n,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),e}(l.a);d.UNSEND=0,d.OPENED=1,d.HEADERS_RECEIVED=2,d.LOADING=3,d.DONE=4},function(t,e,n){"use strict";n(775),n(776),n(777)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){return function(e){e.type=t,f.a.dispatchEvent(e)}}var a=n(1),s=n(0),u=n(3),c=n(4),l=n(2),f=n(186),h=n(158);h.a,o("mousedown"),o("mousemove"),o("mouseup")},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,e,n){for(var r=new _(t),i=0;i<b.length;i++){var o=b[i];r[o]=e[o]||x[i]}return r.type=t,r.target=Object(y.a)(),r.currentTarget=Object(y.a)(),r.buttons=a(t),r.which=r.buttons,r.pointerId=(e.identifier||0)+2,r.bubbles=!0,r.cancelable=!0,r.button=0,r.width=2*(e.radiusX||.5),r.height=2*(e.radiusY||.5),r.pressure=e.force||.5,r.isPrimary=s(e),r.pointerType=w,r.altKey=n.altKey,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,n.preventDefault&&(r.preventDefault=function(){n.preventDefault()}),r}function a(t){var e=0;return"touchstart"!==t&&"touchmove"!==t&&"pointerdown"!==t&&"pointermove"!==t||(e=1),e}function s(t){return E===t.identifier}function u(t){null===E&&(E=t.identifier)}function c(t){E===t.identifier&&(E=null)}function l(t){return function(e){for(var n=e.changedTouches,r=0;r<n.length;r++){var i=n[r];0===r&&"pointerdown"===t?u(i):"pointerup"!==t&&"pointercancel"!==t||c(i);var a=o(t,i,e);m.a.dispatchEvent(a)}}}var f=n(1),h=n(0),p=n(3),d=n(4),v=n(2),m=n(186),g=n(158),y=n(187),_=function(t){function e(t){var r;return Object(h.a)(this,e),r=n.call(this,t),r.target=Object(y.a)(),r.currentTarget=Object(y.a)(),r}Object(p.a)(e,t);var n=r(e);return Object(f.a)(e)}(g.a),b=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","pageX","pageY","timeStamp"],x=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,0,0,0],w="touch",E=null;l("pointerdown"),l("pointermove"),l("pointerup")},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){var e=t||{},n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.clientX,s=void 0===a?0:a,u=e.clientY,c=void 0===u?0:u;-1!==Object.keys(t).indexOf("x")?(t.pageX=t.clientX=r,t.pageY=t.clientY=o):(t.x=s,t.y=c)}function a(t){return function(e){var n=new v(t);n.changedTouches=e.changedTouches,n.touches=e.touches,n.targetTouches=Array.prototype.slice.call(e.touches),n.timeStamp=e.timeStamp,n.changedTouches.forEach(function(t){return o(t)}),n.touches.forEach(function(t){return o(t)}),n.targetTouches.forEach(function(t){return o(t)}),h.a.dispatchEvent(n)}}var s=n(1),u=n(0),c=n(3),l=n(4),f=n(2),h=n(186),p=n(158),d=n(187),v=function(t){function e(t){var r;return Object(u.a)(this,e),r=n.call(this,t),r.touches=[],r.targetTouches=[],r.changedTouches=[],r.target=Object(d.a)(),r.currentTarget=Object(d.a)(),r}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e)}(p.a);a("touchstart"),a("touchmove"),a("touchend")},function(t,e,n){"use strict";function r(t,e,n){var r=t.classList;for(var i in o)o.hasOwnProperty(i)&&r.remove("l7-".concat(n,"-anchor-").concat(i));r.add("l7-".concat(n,"-anchor-").concat(e))}n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o}),e.c=r;var i=function(t){return t.CENTER="center",t.TOP="top",t["TOP-LEFT"]="top-left",t["TOP-RIGHT"]="top-right",t.BOTTOM="bottom",t["BOTTOM-LEFT"]="bottom-left",t["BOTTOM-RIGHT"]="bottom-right",t.LEFT="left",t.RIGHT="right",t}({}),o={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"}},function(t,e,n){"use strict";function r(t){if(t instanceof o)return new o(t.l,t.a,t.b,t.opacity);if(t instanceof h)return p(t);t instanceof v.b||(t=Object(v.h)(t));var e,n,r=c(t.r),i=c(t.g),s=c(t.b),u=a((.2225045*r+.7168786*i+.0606169*s)/y);return r===i&&i===s?e=n=u:(e=a((.4360747*r+.3850649*i+.1430804*s)/g),n=a((.0139322*r+.0971045*i+.7141733*s)/_)),new o(116*u-16,500*(e-u),200*(u-n),t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new o(t,e,n,null==i?1:i)}function o(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function a(t){return t>E?Math.pow(t,1/3):t/w+b}function s(t){return t>x?t*t*t:w*(t-b)}function u(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function c(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function l(t){if(t instanceof h)return new h(t.h,t.c,t.l,t.opacity);if(t instanceof o||(t=r(t)),0===t.a&&0===t.b)return new h(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*m.b;return new h(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function f(t,e,n,r){return 1===arguments.length?l(t):new h(t,e,n,null==r?1:r)}function h(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function p(t){if(isNaN(t.h))return new o(t.l,0,0,t.opacity);var e=t.h*m.a;return new o(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}e.a=i,e.b=f;var d=n(274),v=n(273),m=n(405),g=.96422,y=1,_=.82521,b=4/29,x=6/29,w=3*x*x,E=x*x*x;Object(d.a)(o,i,Object(d.b)(v.a,{brighter:function(t){return new o(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new o(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=g*s(e),t=y*s(t),n=_*s(n),new v.b(u(3.1338561*e-1.6168667*t-.4906146*n),u(-.9787684*e+1.9161415*t+.033454*n),u(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Object(d.a)(h,f,Object(d.b)(v.a,{brighter:function(t){return new h(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new h(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return p(this).rgb()}}))},function(t,e,n){"use strict";function r(t){if(t instanceof o)return new o(t.h,t.s,t.l,t.opacity);t instanceof s.b||(t=Object(s.h)(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(m*r+d*e-v*n)/(m+d-v),a=r-i,c=(p*(n-i)-f*a)/h,l=Math.sqrt(c*c+a*a)/(p*i*(1-i)),g=l?Math.atan2(c,a)*u.b-120:NaN;return new o(g<0?g+360:g,l,i,t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new o(t,e,n,null==i?1:i)}function o(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e.a=i;var a=n(274),s=n(273),u=n(405),c=-.14861,l=1.78277,f=-.29227,h=-.90649,p=1.97294,d=p*h,v=p*l,m=l*f-h*c;Object(a.a)(o,i,Object(a.b)(s.a,{brighter:function(t){return t=null==t?s.c:Math.pow(s.c,t),new o(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?s.d:Math.pow(s.d,t),new o(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*u.a,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new s.b(255*(e+n*(c*r+l*i)),255*(e+n*(f*r+h*i)),255*(e+n*(p*r)),this.opacity)}}))},function(t,e,n){"use strict";function r(t){switch(t){case"GAODE1.x":case"GAODE2.x":return i.BACK;case"MAPBOX":case"SIMPLE":return i.FRONT;case"GLOBEL":return i.BACK;case"DEBAULT":default:return i.FRONT}}e.a=r;var i={BACK:1029,FRONT:1028}},function(t,e,n){"use strict";function r(t){var e=t;return"string"===typeof t&&(e=M.b.document.getElementById(t)),e}function i(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function o(t){return i(t).split(/\s+/)}function a(t,e,n){var r=M.b.document.createElement(t);return e&&(r.className=e||""),n&&n.appendChild(r),r}function s(t){var e=t.parentNode;e&&e.removeChild(t)}function u(t,e){if(void 0!==t.classList)for(var n=o(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!l(t,e)){var a=h(t);f(t,(a?a+" ":"")+e)}}function c(t,e){if(void 0!==t.classList){o(e).forEach(function(e){t.classList.remove(e)})}else f(t,i((" "+h(t)+" ").replace(" "+e+" "," ")))}function l(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=h(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function f(t,e){t instanceof HTMLElement?t.className=e:t.className.baseVal=e}function h(t){return t instanceof SVGElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function p(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function d(t,e){t.style[P]=e}function v(){if("function"===typeof Event)M.b.dispatchEvent(new Event("resize"));else{var t=M.b.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,M.b,0),M.b.dispatchEvent(t)}}function m(t){var e=["padding: "+(t.height/2-8)+"px "+t.width/2+"px;","line-height: "+t.height+"px;","background-image: url("+t.toDataURL()+");"];console.log("%c\n",e.join(""))}function g(){var t,e=M.b.document.querySelector('meta[name="viewport"]');if(!e)return 1;var n=null===(t=e.content)||void 0===t?void 0:t.split(","),r=n.find(function(t){var e=t.split("=");return"initial-scale"===Object(C.a)(e,1)[0]});return r?1*r.split("=")[1]:1}function y(t,e){t.setAttribute("style","".concat(t.style.cssText).concat(e))}function _(t){return t.split(";").map(function(t){return t.trim()}).filter(function(t){return t})}function b(t,e){var n,r=_(null!==(n=t.getAttribute("style"))&&void 0!==n?n:""),i=_(e),o=k.pull.apply(void 0,[r].concat(Object(A.a)(i)));t.setAttribute("style",o.join(";"))}function x(t){return Object.entries(t).map(function(t){var e=Object(C.a)(t,2),n=e[0],r=e[1];return"".concat(n,": ").concat(r)}).join(";")}function w(t,e){return{left:t.left-e.left,top:t.top-e.top,right:e.left+e.width-t.left-t.width,bottom:e.top+e.height-t.top-t.height}}function E(t,e){t.checked=e,e?t.setAttribute("checked","true"):t.removeAttribute("checked")}function S(t){t.innerHTML=""}function O(t){t.setAttribute("draggable","false")}function T(t,e){if("string"===typeof e){var n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild)}else Array.isArray(e)?t.append.apply(t,Object(A.a)(e)):t.append(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.getContainer=r,e.trim=i,e.splitWords=o,e.create=a,e.remove=s,e.addClass=u,e.removeClass=c,e.hasClass=l,e.setClass=f,e.getClass=h,e.empty=p,e.setTransform=d,e.triggerResize=v,e.printCanvas=m,e.getViewPortScale=g,n.d(e,"DPR",function(){return j}),e.addStyle=y,e.getStyleList=_,e.removeStyle=b,e.css2Style=x,e.getDiffRect=w,e.setChecked=E,e.clearChildren=S,e.setUnDraggable=O,e.appendElementType=T;var A=n(20),C=n(15),k=n(19),M=(n.n(k),n(184)),P=function(t){var e,n,r=null===M.b||void 0===M.b?void 0:null===(e=M.b.document)||void 0===e?void 0:null===(n=e.documentElement)||void 0===n?void 0:n.style;if(!r)return t[0];for(var i in t)if(t[i]&&t[i]in r)return t[i];return t[0]}(["transform","WebkitTransform"]),j=g()<1?1:M.b.devicePixelRatio},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}e.a=r},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e.a=r},function(t,e,n){"use strict";function r(t){return"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap}function i(){for(var t=a,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,r=0,i=e;r<i.length;r++){var o=i[r];if(t.indexOf(o)>0){n=!1;break}}return n}e.a=r,e.b=i;var o,a=(function(){}(),null===(o=navigator)||void 0===o?void 0:o.userAgent);a.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),a.indexOf("Android")>-1||a.indexOf("Adr")},function(t,e,n){"use strict";function r(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}e.b=r,n.d(e,"a",function(){return s});var i=n(0),o=n(1),a=n(6),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16;Object(i.a)(this,t),Object(a.a)(this,"duration",16),Object(a.a)(this,"timestamp",(new Date).getTime()),this.duration=e}return Object(o.a)(t,[{key:"run",value:function(t){var e=(new Date).getTime(),n=e-this.timestamp;this.timestamp=e,n>=this.duration&&t()}}]),t}()},function(t,e,n){"use strict";function r(t){var e=[1/0,1/0,-1/0,-1/0];return Object(i.a)(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}var i=n(266);r.default=r,e.a=r},function(t,e,n){"use strict";function r(t){return"number"===typeof t}e.a=r},function(t,e,n){"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}e.a=r},function(t,e,n){"use strict";n(15),n(10),n(792),n(794),n(795)},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30,a=arguments.length>6?arguments[6]:void 0,u=n;return a&&(u=Math.round(n*(o-1))/(o-1)),r?s(t,e,u,r,i):s(t,e,u,.314,i)}function i(t,e){var n=1-e;return(t[0]*n+t[1]*e)*n+(t[1]*n+t[2]*e)*e}function o(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function a(t,e,n){var r=[e[0]-t[0],e[1]-t[1]],i=o(r,[0,0]),a=Math.atan2(r[1],r[0]),s=i/2/Math.cos(n),u=a+n;return[s*Math.cos(u)+t[0],s*Math.sin(u)+t[1]]}function s(t,e,n,r,o){if(o===l.a["GAODE2.x"]){var s=Object(c.b)(t[0],t[1]),f=Object(c.b)(e[0],e[1]),h=a(s,f,r),p=[s[0],h[0],f[0]],d=[s[1],h[1],f[1]];return[].concat(Object(u.a)(Object(c.c)(i(p,n),i(d,n))),[0])}var v=a(t,e,r),m=[t[0],v[0],e[0]],g=[t[1],v[1],e[1]];return[i(m,n),i(g,n),0]}e.a=r;var u=n(20),c=n(140),l=n(793)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t["GAODE1.x"]="GAODE1.x",t["GAODE2.x"]="GAODE2.x",t.MAPBOX="MAPBOX",t.DEFAULT="DEFAUlTMAP",t.SIMPLE="SIMPLE",t.GLOBEL="GLOBEL",t}({})},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6?arguments[6]:void 0),a=n;return o&&(a=Math.round(29*n)/29),s(t,e,a,i)}function i(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=Object(c.f)(n,[0,0]),i=Math.atan2(n[1],n[0]),o=r/2/Math.cos(.314),a=i+.314;return[o*Math.cos(a)+t[0],o*Math.sin(a)+t[1]]}function o(t,e){var n=1-e;return(t[0]*n+t[1]*e)*n+(t[1]*n+t[2]*e)*e}function a(t,e){var n=[t[0]-e[0],t[1]-e[1]],r=[Math.sin(n[0]/2),Math.sin(n[1]/2)],i=r[1]*r[1]+Math.cos(t[1])*Math.cos(e[1])*r[0]*r[0];return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))}function s(t,e,n,r){var s=[Object(u.a)(t[0]),Object(u.a)(t[1])],c=[Object(u.a)(e[0]),Object(u.a)(e[1])];if("GAODE2.x"===r){var l=i(s,c),f=[s[0],l[0],c[0]],h=[s[1],l[1],c[1]];return[o(f,n),o(h,n),0]}var p=a(s,c);if(Math.abs(p-Math.PI)<.001)return[(1-n)*s[0]+n*c[0],(1-n)*s[1]+n*c[1]];var d=Math.sin((1-n)*p)/Math.sin(p),v=Math.sin(n*p)/Math.sin(p),m=[Math.sin(s[0]),Math.sin(s[1])],g=[Math.cos(s[0]),Math.cos(s[1])],y=[Math.sin(c[0]),Math.sin(c[1])],_=[Math.cos(c[0]),Math.cos(c[1])],b=d*g[1]*g[0]+v*_[1]*_[0],x=d*g[1]*m[0]+v*_[1]*y[0],w=d*m[1]+v*y[1];return[Object(u.j)(Math.atan2(x,b)),Object(u.j)(Math.atan2(w,Math.sqrt(b*b+x*x)))]}e.a=r;var u=n(106),c=n(140)},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=[],a=0;a<t.length-1;a++){var s=t[a],u=t[a+1],c=o(s,u),l=n;n+=c,r.push({p1:s,p2:u,totalDistance:n,distance:c,lastTotalDistance:l})}for(var f,h,p=n*e,d=0,v=r;d<v.length;d++){var m=v[d];if(m.totalDistance>p){var g=m.p1,y=m.p2,_=(p-m.lastTotalDistance)/m.distance,b=i(y,g,_);f=b[0],h=b[1];break}}return{lng:f,lat:h,height:0}}function i(t,e,n){return[t[0]*n+e[0]*(1-n),t[1]*n+e[1]*(1-n)]}function o(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;Object(r.a)(this,t),this.limit=e,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return Object(i.a)(t,[{key:"clear",value:function(){var t=this;this.order.forEach(function(e){t.delete(e)}),this.cache={},this.order=[]}},{key:"get",value:function(t){var e=this.cache[t];return e&&(this.deleteOrder(t),this.appendOrder(t)),e}},{key:"set",value:function(t,e){this.cache[t]?(this.delete(t),this.cache[t]=e,this.appendOrder(t)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[t]=e,this.appendOrder(t))}},{key:"delete",value:function(t){var e=this.cache[t];e&&(this.deleteCache(t),this.deleteOrder(t),this.destroy(e,t))}},{key:"deleteCache",value:function(t){delete this.cache[t]}},{key:"deleteOrder",value:function(t){var e=this.order.findIndex(function(e){return e===t});e>=0&&this.order.splice(e,1)}},{key:"appendOrder",value:function(t){this.order.push(t)}},{key:"defaultDestroy",value:function(t,e){return null}}]),t}()},function(t,e,n){"use strict";function r(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return 1*e}function i(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return 1*e}function o(t){if(0===t.length)return 0;for(var e=1*t[0],n=1;n<t.length;n++)e+=1*t[n];return e}function a(t){if(0===t.length)throw new Error("mean requires at least one data point");return o(t)/t.length}function s(t){if(0===t.length)throw new Error("mean requires at least one data point");if(t.length<3)return t[0];t.sort();for(var e=t[0],n=NaN,r=0,i=1,o=1;o<t.length+1;o++)t[o]!==e?(i>r&&(r=i,n=e),i=1,e=t[o]):i++;return 1*n}function u(t,e){return t.map(function(t){return t[e]})}function c(t,e){return l[t](e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"sum",function(){return o}),n.d(e,"max",function(){return r}),n.d(e,"min",function(){return i}),n.d(e,"mean",function(){return a}),n.d(e,"mode",function(){return s}),n.d(e,"statMap",function(){return l}),e.getColumn=u,e.getSatByColumn=c;var l={min:i,max:r,mean:a,sum:o,mode:s}},function(t,e,n){"use strict";var r=(n(406),n(801));n.d(e,"a",function(){return r.a});var i=(n(190),n(191),n(803));n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return i.b})},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e={});var n=Number(t[0]),r=Number(t[1]),o=Number(t[2]),a=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[n,r],u=[n,a],c=[o,a],l=[o,r];return Object(i.i)([[s,l,c,u,s]],e.properties,{bbox:t,id:e.id})}e.a=r;var i=n(106)},function(t,e,n){"use strict";function r(t){t.forEach(function(t){t.isCurrent&&(t.isVisible=t.isLoaded)})}function i(t){t.forEach(function(t){t.properties.state=u}),t.forEach(function(t){t.isCurrent&&!a(t)&&s(t)}),t.forEach(function(t){t.isVisible=Boolean(t.properties.state&l)})}function o(t){t.forEach(function(t){t.properties.state=u}),t.forEach(function(t){t.isCurrent&&a(t)}),t.slice().sort(function(t,e){return t.z-e.z}).forEach(function(t){t.isVisible=Boolean(t.properties.state&l),t.children.length&&(t.isVisible||t.properties.state&c)?t.children.forEach(function(t){t.properties.state=c}):t.isCurrent&&s(t)})}function a(t){for(;t;){if(t.isLoaded)return t.properties.state|=l,!0;t=t.parent}return!1}function s(t){t.children.forEach(function(t){t.isLoaded?t.properties.state|=l:s(t)})}e.b=r,e.a=i,e.c=o;var u=0,c=1,l=2},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=s();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return T});var u=n(15),c=n(10),l=n(0),f=n(1),h=n(12),p=n(3),d=n(4),v=n(2),m=n(6),g=n(37),y=n.n(g),_=n(19),b=(n.n(_),n(407)),x=n(406),w=n(190),E=n(802),S=n(191),O=function(t){return t.TilesLoadStart="tiles-load-start",t.TileLoaded="tile-loaded",t.TileError="tile-error",t.TileUnload="tile-unload",t.TileUpdate="tile-update",t.TilesLoadFinished="tiles-load-finished",t}({}),T=function(t){function e(t){var r;return Object(l.a)(this,e),r=n.call(this),Object(m.a)(Object(h.a)(r),"currentTiles",[]),Object(m.a)(Object(h.a)(r),"cacheTiles",new Map),Object(m.a)(Object(h.a)(r),"throttleUpdate",Object(_.throttle)(function(t,e){r.update(t,e)},16)),Object(m.a)(Object(h.a)(r),"onTileLoad",function(t){r.emit(O.TileLoaded,t),r.updateTileVisible(),r.loadFinished()}),Object(m.a)(Object(h.a)(r),"onTileError",function(t,e){r.emit(O.TileError,{error:t,tile:e}),r.updateTileVisible(),r.loadFinished()}),Object(m.a)(Object(h.a)(r),"onTileUnload",function(t){r.emit(O.TileUnload,t),r.loadFinished()}),r.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:b.c,getTileData:b.d,warp:!0,updateStrategy:w.b.Overlap},r.updateOptions(t),r}Object(p.a)(e,t);var n=a(e);return Object(f.a)(e,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(t){return t.isDone})}},{key:"tiles",get:function(){return Array.from(this.cacheTiles.values()).sort(function(t,e){return t.z-e.z})}},{key:"updateOptions",value:function(t){var e=void 0===t.minZoom?this.options.minZoom:Math.ceil(t.minZoom),n=void 0===t.maxZoom?this.options.maxZoom:Math.floor(t.maxZoom);this.options=Object(c.a)(Object(c.a)(Object(c.a)({},this.options),t),{},{minZoom:e,maxZoom:n})}},{key:"update",value:function(t,e){var n=this,r=Math.max(0,Math.ceil(t));if(!this.lastViewStates||this.lastViewStates.zoom!==r||!Object(E.b)(this.lastViewStates.latLonBoundsBuffer,e)){var i=Object(E.a)(e,b.a);this.lastViewStates={zoom:r,latLonBounds:e,latLonBoundsBuffer:i},this.currentZoom=r;var o=!1,a=this.getTileIndices(r,i).filter(function(t){return n.options.warp||t.x>=0&&t.x<Math.pow(2,r)});this.emit(O.TilesLoadStart),this.currentTiles=a.map(function(t){var e=t.x,r=t.y,i=t.z,a=n.getTile(e,r,i);if(a){var s,u;return((null===(s=a)||void 0===s?void 0:s.isFailure)||(null===(u=a)||void 0===u?void 0:u.isCancelled))&&a.loadData({getData:n.options.getTileData,onLoad:n.onTileLoad,onError:n.onTileError}),a}return a=n.createTile(e,r,i),o=!0,a}),o&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var t,e=r(this.cacheTiles);try{for(e.s();!(t=e.n()).done;){var n=Object(u.a)(t.value,2),i=n[0],o=n[1];if(!this.currentTiles.includes(o))return this.cacheTiles.delete(i),void this.onTileUnload(o);this.onTileUnload(o),o.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(t){e.e(t)}finally{e.f()}}},{key:"reloadTileById",value:function(t,e,n){var r=this.cacheTiles.get("".concat(e,",").concat(n,",").concat(t));r&&(this.onTileUnload(r),r.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}},{key:"reloadTileByLnglat",value:function(t,e,n){var r=this.getTileByLngLat(t,e,n);r&&this.reloadTileById(r.z,r.x,r.y)}},{key:"reloadTileByExtent",value:function(t,e){var n=this;this.getTileIndices(e,t).forEach(function(t){n.reloadTileById(t.z,t.x,t.y)})}},{key:"pruneRequests",value:function(){var t,e=[],n=r(this.cacheTiles.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;i.isLoading&&(i.isCurrent||i.isVisible||e.push(i))}}catch(t){n.e(t)}finally{n.f()}for(;e.length>0;){e.shift().abortLoad()}}},{key:"getTileByLngLat",value:function(t,e,n){var r=this.options.zoomOffset,i=Math.ceil(n)+r,o=Object(S.c)(t,e,i);return this.tiles.filter(function(t){return t.key==="".concat(o[0],"_").concat(o[1],"_").concat(i)})[0]}},{key:"getTileExtent",value:function(t,e){return this.getTileIndices(e,t)}},{key:"getTileByZXY",value:function(t,e,n){return this.tiles.filter(function(r){return r.key==="".concat(e,"_").concat(n,"_").concat(t)})[0]}},{key:"clear",value:function(){var t,e=r(this.cacheTiles.values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isLoading?n.abortLoad():this.onTileUnload(n)}}catch(t){e.e(t)}finally{e.f()}this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var t,e=this.options.updateStrategy,n=new Map,i=r(this.cacheTiles.values());try{for(i.s();!(t=i.n()).done;){var o=t.value;n.set(o.key,o.isVisible),o.isCurrent=!1,o.isVisible=!1}}catch(t){i.e(t)}finally{i.f()}var a,s=r(this.currentTiles);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.isCurrent=!0,u.isVisible=!0}}catch(t){s.e(t)}finally{s.f()}var c=Array.from(this.cacheTiles.values());"function"===typeof e?e(c):b.e[e](c);var l=!1;Array.from(this.cacheTiles.values()).forEach(function(t){t.isVisible!==n.get(t.key)?(t.isVisibleChange=!0,l=!0):t.isVisibleChange=!1}),l&&this.emit(O.TileUpdate)}},{key:"getTileIndices",value:function(t,e){var n=this.options,r=n.tileSize,i=n.extent,o=n.zoomOffset,a=Math.floor(this.options.maxZoom),s=Math.ceil(this.options.minZoom);return Object(S.a)({maxZoom:a,minZoom:s,zoomOffset:o,tileSize:r,zoom:t,latLonBounds:e,extent:i})}},{key:"getTileId",value:function(t,e,n){return"".concat(t,",").concat(e,",").concat(n)}},{key:"loadFinished",value:function(){var t=!this.currentTiles.some(function(t){return!t.isDone});return t&&this.emit(O.TilesLoadFinished),t}},{key:"getTile",value:function(t,e,n){var r=this.getTileId(t,e,n);return this.cacheTiles.get(r)}},{key:"createTile",value:function(t,e,n){var r=this.getTileId(t,e,n),i=new x.a({x:t,y:e,z:n,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(r,i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),i}},{key:"resizeCacheTiles",value:function(){var t=b.b*this.currentTiles.length;if(this.cacheTiles.size>t){var e,n=r(this.cacheTiles);try{for(n.s();!(e=n.n()).done;){var i=Object(u.a)(e.value,2),o=i[0],a=i[1];if(a.isVisible||this.currentTiles.includes(a)||(this.cacheTiles.delete(o),this.onTileUnload(a)),this.cacheTiles.size<=t)break}}catch(t){n.e(t)}finally{n.f()}}this.rebuildTileTree()}},{key:"rebuildTileTree",value:function(){var t,e=r(this.cacheTiles.values());try{for(e.s();!(t=e.n()).done;){var n=t.value;n.parent=null,n.children.length=0}}catch(t){e.e(t)}finally{e.f()}var i,o=r(this.cacheTiles.values());try{for(o.s();!(i=o.n()).done;){var a=i.value,s=this.getNearestAncestor(a.x,a.y,a.z);a.parent=s,null!==s&&void 0!==s&&s.children&&s.children.push(a)}}catch(t){o.e(t)}finally{o.f()}}},{key:"getNearestAncestor",value:function(t,e,n){for(;n>this.options.minZoom;){t=Math.floor(t/2),e=Math.floor(e/2),n-=1;var r=this.getTile(t,e,n);if(r)return r}return null}}]),e}(y.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n(140),i=function(t,e){var n=Object(r.d)(t),i=Object(r.o)(n,e);return[Math.max(i[0][0],-900),Math.max(i[0][1],-85.0511287798065),Math.min(i[1][0],900),Math.min(i[1][1],85.0511287798065)]},o=function(t,e){var n=Object(r.d)(t),i=Object(r.d)(e);return Object(r.e)(n,i)}},function(t,e,n){"use strict";function r(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var r,i=n[1].charCodeAt(0),o=n[2].charCodeAt(0);for(r=i;r<=o;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}function i(t,e){if(!t||!t.length)throw new Error("url is not allowed to be empty");var n=e.x,i=e.y,o=e.z,s=r(t);return s[Math.abs(n+i)%s.length].replace(/\{x\}/g,n.toString()).replace(/\{y\}/g,i.toString()).replace(/\{z\}/g,o.toString()).replace(/\{bbox\}/g,Object(a.d)(n,i,o).join(",")).replace(/\{-y\}/g,(Math.pow(2,o)-i-1).toString())}function o(t,e){var n=e.x,r=e.y,i=e.z,o=e.layer,a=e.version,s=void 0===a?"1.0.0":a,u=e.style,c=void 0===u?"default":u,l=e.format,f=e.service,h=void 0===f?"WMTS":f,p=e.tileMatrixset;return"".concat(t,"&SERVICE=").concat(h,"&REQUEST=GetTile&VERSION=").concat(s,"&LAYER=").concat(o,"&STYLE=").concat(c,"&TILEMATRIXSET=").concat(p,"&FORMAT=").concat(l,"&TILECOL=").concat(n,"&TILEROW=").concat(r,"&TILEMATRIX=").concat(i)}e.a=i,e.b=o;var a=n(191)},function(t,e,n){"use strict";var r=(n(7),n(8)),i=(n.n(r),n(408),n(810),n(818)),o="l7-worker";!function(t){Object(i.b)(o,t)}('var L7=function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),u=new T(n||[]);return o(a,"_invoke",{value:E(t,r,u)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function v(){}function d(){}var y={};c(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(k([])));m&&m!==e&&n.call(m,a)&&(y=m);var b=d.prototype=p.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var r;o(this,"_invoke",{value:function(o,i){function a(){return new e((function(r,a){!function r(o,i,a,u){var s=l(t[o],t,i);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(o,i,r,a)}))}return r=r?r.then(a,a):a()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return I()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=A(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function A(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a \'"+r+"\' method")),h;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return v.prototype=d,o(b,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=c(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(w.prototype),c(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new w(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(b),c(b,s,"Generator"),c(b,a,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function n(t,e,r,n,o,i,a){try{var u=t[i](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,s,"next",t)}function s(t){n(a,o,i,u,s,"throw",t)}u(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b(n.key),n)}}function u(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=b(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function p(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){c=!0,o=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(t,e)||g(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(t,e){return t(e={exports:{}},e.exports),e.exports}var E,A,O=function(t){return t&&t.Math==Math&&t},S=O("object"==typeof globalThis&&globalThis)||O("object"==typeof window&&window)||O("object"==typeof self&&self)||O("object"==typeof x&&x)||function(){return this}()||x||Function("return this")(),T=Object.defineProperty,k=function(t,e){try{T(S,t,{value:e,configurable:!0,writable:!0})}catch(r){S[t]=e}return e},I=S["__core-js_shared__"]||k("__core-js_shared__",{}),j=w((function(t){(t.exports=function(t,e){return I[t]||(I[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})})),P=function(t){try{return!!t()}catch(t){return!0}},_=!P((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),M=Function.prototype,L=M.call,R=_&&M.bind.bind(L,L),N=_?R:function(t){return function(){return L.apply(t,arguments)}},C=function(t){return null==t},D=TypeError,F=function(t){if(C(t))throw D("Can\'t call method on "+t);return t},W=Object,z=function(t){return W(F(t))},B=N({}.hasOwnProperty),U=Object.hasOwn||function(t,e){return B(z(t),e)},G=0,V=Math.random(),H=N(1..toString),q=function(t){return"Symbol("+(void 0===t?"":t)+")_"+H(++G+V,36)},Z="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Y=S.process,$=S.Deno,K=Y&&Y.versions||$&&$.version,Q=K&&K.v8;Q&&(A=(E=Q.split("."))[0]>0&&E[0]<4?1:+(E[0]+E[1])),!A&&Z&&(!(E=Z.match(/Edge\\/(\\d+)/))||E[1]>=74)&&(E=Z.match(/Chrome\\/(\\d+)/))&&(A=+E[1]);var X=A,J=S.String,tt=!!Object.getOwnPropertySymbols&&!P((function(){var t=Symbol();return!J(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&X&&X<41})),et=tt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,rt=S.Symbol,nt=j("wks"),ot=et?rt.for||rt:rt&&rt.withoutSetter||q,it=function(t){return U(nt,t)||(nt[t]=tt&&U(rt,t)?rt[t]:ot("Symbol."+t)),nt[t]},at={};at[it("toStringTag")]="z";var ut="[object z]"===String(at),st="object"==typeof document&&document.all,ct={all:st,IS_HTMLDDA:void 0===st&&void 0!==st},ft=ct.all,lt=ct.IS_HTMLDDA?function(t){return"function"==typeof t||t===ft}:function(t){return"function"==typeof t},ht=!P((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),pt=ct.all,vt=ct.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:lt(t)||t===pt}:function(t){return"object"==typeof t?null!==t:lt(t)},dt=S.document,yt=vt(dt)&&vt(dt.createElement),gt=function(t){return yt?dt.createElement(t):{}},mt=!ht&&!P((function(){return 7!=Object.defineProperty(gt("div"),"a",{get:function(){return 7}}).a})),bt=ht&&P((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),xt=String,wt=TypeError,Et=function(t){if(vt(t))return t;throw wt(xt(t)+" is not an object")},At=Function.prototype.call,Ot=_?At.bind(At):function(){return At.apply(At,arguments)},St=function(t){return lt(t)?t:void 0},Tt=function(t,e){return arguments.length<2?St(S[t]):S[t]&&S[t][e]},kt=N({}.isPrototypeOf),It=Object,jt=et?function(t){return"symbol"==typeof t}:function(t){var e=Tt("Symbol");return lt(e)&&kt(e.prototype,It(t))},Pt=String,_t=function(t){try{return Pt(t)}catch(t){return"Object"}},Mt=TypeError,Lt=function(t){if(lt(t))return t;throw Mt(_t(t)+" is not a function")},Rt=function(t,e){var r=t[e];return C(r)?void 0:Lt(r)},Nt=TypeError,Ct=TypeError,Dt=it("toPrimitive"),Ft=function(t,e){if(!vt(t)||jt(t))return t;var r,n=Rt(t,Dt);if(n){if(void 0===e&&(e="default"),r=Ot(n,t,e),!vt(r)||jt(r))return r;throw Ct("Can\'t convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var r,n;if("string"===e&&lt(r=t.toString)&&!vt(n=Ot(r,t)))return n;if(lt(r=t.valueOf)&&!vt(n=Ot(r,t)))return n;if("string"!==e&&lt(r=t.toString)&&!vt(n=Ot(r,t)))return n;throw Nt("Can\'t convert object to primitive value")}(t,e)},Wt=function(t){var e=Ft(t,"string");return jt(e)?e:e+""},zt=TypeError,Bt=Object.defineProperty,Ut=Object.getOwnPropertyDescriptor,Gt={f:ht?bt?function(t,e,r){if(Et(t),e=Wt(e),Et(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=Ut(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return Bt(t,e,r)}:Bt:function(t,e,r){if(Et(t),e=Wt(e),Et(r),mt)try{return Bt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw zt("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},Vt=Function.prototype,Ht=ht&&Object.getOwnPropertyDescriptor,qt=U(Vt,"name"),Zt={EXISTS:qt,PROPER:qt&&"something"===function(){}.name,CONFIGURABLE:qt&&(!ht||ht&&Ht(Vt,"name").configurable)},Yt=N(Function.toString);lt(I.inspectSource)||(I.inspectSource=function(t){return Yt(t)});var $t,Kt,Qt,Xt=I.inspectSource,Jt=S.WeakMap,te=lt(Jt)&&/native code/.test(String(Jt)),ee=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},re=ht?function(t,e,r){return Gt.f(t,e,ee(1,r))}:function(t,e,r){return t[e]=r,t},ne=j("keys"),oe=function(t){return ne[t]||(ne[t]=q(t))},ie={},ae=S.TypeError,ue=S.WeakMap;if(te||I.state){var se=I.state||(I.state=new ue);se.get=se.get,se.has=se.has,se.set=se.set,$t=function(t,e){if(se.has(t))throw ae("Object already initialized");return e.facade=t,se.set(t,e),e},Kt=function(t){return se.get(t)||{}},Qt=function(t){return se.has(t)}}else{var ce=oe("state");ie[ce]=!0,$t=function(t,e){if(U(t,ce))throw ae("Object already initialized");return e.facade=t,re(t,ce,e),e},Kt=function(t){return U(t,ce)?t[ce]:{}},Qt=function(t){return U(t,ce)}}var fe={set:$t,get:Kt,has:Qt,enforce:function(t){return Qt(t)?Kt(t):$t(t,{})},getterFor:function(t){return function(e){var r;if(!vt(e)||(r=Kt(e)).type!==t)throw ae("Incompatible receiver, "+t+" required");return r}}},le=w((function(t){var e=Zt.CONFIGURABLE,r=fe.enforce,n=fe.get,o=String,i=Object.defineProperty,a=N("".slice),u=N("".replace),s=N([].join),c=ht&&!P((function(){return 8!==i((function(){}),"length",{value:8}).length})),f=String(String).split("String"),l=t.exports=function(t,n,l){"Symbol("===a(o(n),0,7)&&(n="["+u(o(n),/^Symbol\\(([^)]*)\\)/,"$1")+"]"),l&&l.getter&&(n="get "+n),l&&l.setter&&(n="set "+n),(!U(t,"name")||e&&t.name!==n)&&(ht?i(t,"name",{value:n,configurable:!0}):t.name=n),c&&l&&U(l,"arity")&&t.length!==l.arity&&i(t,"length",{value:l.arity});try{l&&U(l,"constructor")&&l.constructor?ht&&i(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var h=r(t);return U(h,"source")||(h.source=s(f,"string"==typeof n?n:"")),t};Function.prototype.toString=l((function(){return lt(this)&&n(this).source||Xt(this)}),"toString")})),he=function(t,e,r,n){n||(n={});var o=n.enumerable,i=void 0!==n.name?n.name:e;if(lt(r)&&le(r,i,n),n.global)o?t[e]=r:k(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:Gt.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},pe=N({}.toString),ve=N("".slice),de=function(t){return ve(pe(t),8,-1)},ye=it("toStringTag"),ge=Object,me="Arguments"==de(function(){return arguments}()),be=ut?de:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ge(t),ye))?r:me?de(e):"Object"==(n=de(e))&&lt(e.callee)?"Arguments":n},xe=ut?{}.toString:function(){return"[object "+be(this)+"]"};ut||he(Object.prototype,"toString",xe,{unsafe:!0});var we={}.propertyIsEnumerable,Ee=Object.getOwnPropertyDescriptor,Ae={f:Ee&&!we.call({1:2},1)?function(t){var e=Ee(this,t);return!!e&&e.enumerable}:we},Oe=Object,Se=N("".split),Te=P((function(){return!Oe("z").propertyIsEnumerable(0)}))?function(t){return"String"==de(t)?Se(t,""):Oe(t)}:Oe,ke=function(t){return Te(F(t))},Ie=Object.getOwnPropertyDescriptor,je={f:ht?Ie:function(t,e){if(t=ke(t),e=Wt(e),mt)try{return Ie(t,e)}catch(t){}if(U(t,e))return ee(!Ot(Ae.f,t,e),t[e])}},Pe=Math.ceil,_e=Math.floor,Me=Math.trunc||function(t){var e=+t;return(e>0?_e:Pe)(e)},Le=function(t){var e=+t;return e!=e||0===e?0:Me(e)},Re=Math.max,Ne=Math.min,Ce=function(t,e){var r=Le(t);return r<0?Re(r+e,0):Ne(r,e)},De=Math.min,Fe=function(t){return t>0?De(Le(t),9007199254740991):0},We=function(t){return Fe(t.length)},ze=function(t){return function(e,r,n){var o,i=ke(e),a=We(i),u=Ce(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},Be={includes:ze(!0),indexOf:ze(!1)},Ue=Be.indexOf,Ge=N([].push),Ve=function(t,e){var r,n=ke(t),o=0,i=[];for(r in n)!U(ie,r)&&U(n,r)&&Ge(i,r);for(;e.length>o;)U(n,r=e[o++])&&(~Ue(i,r)||Ge(i,r));return i},He=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qe=He.concat("length","prototype"),Ze={f:Object.getOwnPropertyNames||function(t){return Ve(t,qe)}},Ye={f:Object.getOwnPropertySymbols},$e=N([].concat),Ke=Tt("Reflect","ownKeys")||function(t){var e=Ze.f(Et(t)),r=Ye.f;return r?$e(e,r(t)):e},Qe=function(t,e,r){for(var n=Ke(e),o=Gt.f,i=je.f,a=0;a<n.length;a++){var u=n[a];U(t,u)||r&&U(r,u)||o(t,u,i(e,u))}},Xe=/#|\\.prototype\\./,Je=function(t,e){var r=er[tr(t)];return r==nr||r!=rr&&(lt(e)?P(e):!!e)},tr=Je.normalize=function(t){return String(t).replace(Xe,".").toLowerCase()},er=Je.data={},rr=Je.NATIVE="N",nr=Je.POLYFILL="P",or=Je,ir=je.f,ar=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,c=t.stat;if(r=s?S:c?S[u]||k(u,{}):(S[u]||{}).prototype)for(n in e){if(i=e[n],o=t.dontCallGetSet?(a=ir(r,n))&&a.value:r[n],!or(s?n:u+(c?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Qe(i,o)}(t.sham||o&&o.sham)&&re(i,"sham",!0),he(r,n,i,t)}},ur="undefined"!=typeof process&&"process"==de(process),sr=String,cr=TypeError,fr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=function(t,e,r){try{return N(Lt(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return Et(r),function(t){if("object"==typeof t||lt(t))return t;throw cr("Can\'t set "+sr(t)+" as a prototype")}(n),e?t(r,n):r.__proto__=n,r}}():void 0),lr=Gt.f,hr=it("toStringTag"),pr=function(t,e,r){t&&!r&&(t=t.prototype),t&&!U(t,hr)&&lr(t,hr,{configurable:!0,value:e})},vr=function(t,e,r){return r.get&&le(r.get,e,{getter:!0}),r.set&&le(r.set,e,{setter:!0}),Gt.f(t,e,r)},dr=it("species"),yr=function(t){var e=Tt(t);ht&&e&&!e[dr]&&vr(e,dr,{configurable:!0,get:function(){return this}})},gr=TypeError,mr=function(t,e){if(kt(e,t))return t;throw gr("Incorrect invocation")},br=function(){},xr=[],wr=Tt("Reflect","construct"),Er=/^\\s*(?:class|function)\\b/,Ar=N(Er.exec),Or=!Er.exec(br),Sr=function(t){if(!lt(t))return!1;try{return wr(br,xr,t),!0}catch(t){return!1}},Tr=function(t){if(!lt(t))return!1;switch(be(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Or||!!Ar(Er,Xt(t))}catch(t){return!0}};Tr.sham=!0;var kr,Ir,jr,Pr,_r=!wr||P((function(){var t;return Sr(Sr.call)||!Sr(Object)||!Sr((function(){t=!0}))||t}))?Tr:Sr,Mr=TypeError,Lr=function(t){if(_r(t))return t;throw Mr(_t(t)+" is not a constructor")},Rr=it("species"),Nr=function(t,e){var r,n=Et(t).constructor;return void 0===n||C(r=Et(n)[Rr])?e:Lr(r)},Cr=Function.prototype,Dr=Cr.apply,Fr=Cr.call,Wr="object"==typeof Reflect&&Reflect.apply||(_?Fr.bind(Dr):function(){return Fr.apply(Dr,arguments)}),zr=function(t){if("Function"===de(t))return N(t)},Br=zr(zr.bind),Ur=function(t,e){return Lt(t),void 0===e?t:_?Br(t,e):function(){return t.apply(e,arguments)}},Gr=Tt("document","documentElement"),Vr=N([].slice),Hr=TypeError,qr=function(t,e){if(t<e)throw Hr("Not enough arguments");return t},Zr=/(?:ipad|iphone|ipod).*applewebkit/i.test(Z),Yr=S.setImmediate,$r=S.clearImmediate,Kr=S.process,Qr=S.Dispatch,Xr=S.Function,Jr=S.MessageChannel,tn=S.String,en=0,rn={};P((function(){kr=S.location}));var nn=function(t){if(U(rn,t)){var e=rn[t];delete rn[t],e()}},on=function(t){return function(){nn(t)}},an=function(t){nn(t.data)},un=function(t){S.postMessage(tn(t),kr.protocol+"//"+kr.host)};Yr&&$r||(Yr=function(t){qr(arguments.length,1);var e=lt(t)?t:Xr(t),r=Vr(arguments,1);return rn[++en]=function(){Wr(e,void 0,r)},Ir(en),en},$r=function(t){delete rn[t]},ur?Ir=function(t){Kr.nextTick(on(t))}:Qr&&Qr.now?Ir=function(t){Qr.now(on(t))}:Jr&&!Zr?(Pr=(jr=new Jr).port2,jr.port1.onmessage=an,Ir=Ur(Pr.postMessage,Pr)):S.addEventListener&&lt(S.postMessage)&&!S.importScripts&&kr&&"file:"!==kr.protocol&&!P(un)?(Ir=un,S.addEventListener("message",an,!1)):Ir="onreadystatechange"in gt("script")?function(t){Gr.appendChild(gt("script")).onreadystatechange=function(){Gr.removeChild(this),nn(t)}}:function(t){setTimeout(on(t),0)});var sn={set:Yr,clear:$r},cn=function(){this.head=null,this.tail=null};cn.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var fn,ln,hn,pn,vn,dn=cn,yn=/ipad|iphone|ipod/i.test(Z)&&"undefined"!=typeof Pebble,gn=/web0s(?!.*chrome)/i.test(Z),mn=je.f,bn=sn.set,xn=S.MutationObserver||S.WebKitMutationObserver,wn=S.document,En=S.process,An=S.Promise,On=mn(S,"queueMicrotask"),Sn=On&&On.value;if(!Sn){var Tn=new dn,kn=function(){var t,e;for(ur&&(t=En.domain)&&t.exit();e=Tn.get();)try{e()}catch(t){throw Tn.head&&fn(),t}t&&t.enter()};Zr||ur||gn||!xn||!wn?!yn&&An&&An.resolve?((pn=An.resolve(void 0)).constructor=An,vn=Ur(pn.then,pn),fn=function(){vn(kn)}):ur?fn=function(){En.nextTick(kn)}:(bn=Ur(bn,S),fn=function(){bn(kn)}):(ln=!0,hn=wn.createTextNode(""),new xn(kn).observe(hn,{characterData:!0}),fn=function(){hn.data=ln=!ln}),Sn=function(t){Tn.head||fn(),Tn.add(t)}}var In,jn,Pn,_n=Sn,Mn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ln=S.Promise,Rn="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Nn=!Rn&&!ur&&"object"==typeof window&&"object"==typeof document,Cn=(Ln&&Ln.prototype,it("species")),Dn=!1,Fn=lt(S.PromiseRejectionEvent),Wn={CONSTRUCTOR:or("Promise",(function(){var t=Xt(Ln),e=t!==String(Ln);if(!e&&66===X)return!0;if(!X||X<51||!/native code/.test(t)){var r=new Ln((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Cn]=n,!(Dn=r.then((function(){}))instanceof n))return!0}return!e&&(Nn||Rn)&&!Fn})),REJECTION_EVENT:Fn,SUBCLASSING:Dn},zn=TypeError,Bn=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw zn("Bad Promise constructor");e=t,r=n})),this.resolve=Lt(e),this.reject=Lt(r)},Un={f:function(t){return new Bn(t)}},Gn=sn.set,Vn=Wn.CONSTRUCTOR,Hn=Wn.REJECTION_EVENT,qn=Wn.SUBCLASSING,Zn=fe.getterFor("Promise"),Yn=fe.set,$n=Ln&&Ln.prototype,Kn=Ln,Qn=$n,Xn=S.TypeError,Jn=S.document,to=S.process,eo=Un.f,ro=eo,no=!!(Jn&&Jn.createEvent&&S.dispatchEvent),oo=function(t){var e;return!(!vt(t)||!lt(e=t.then))&&e},io=function(t,e){var r,n,o,i=e.value,a=1==e.state,u=a?t.ok:t.fail,s=t.resolve,c=t.reject,f=t.domain;try{u?(a||(2===e.rejection&&fo(e),e.rejection=1),!0===u?r=i:(f&&f.enter(),r=u(i),f&&(f.exit(),o=!0)),r===t.promise?c(Xn("Promise-chain cycle")):(n=oo(r))?Ot(n,r,s,c):s(r)):c(i)}catch(t){f&&!o&&f.exit(),c(t)}},ao=function(t,e){t.notified||(t.notified=!0,_n((function(){for(var r,n=t.reactions;r=n.get();)io(r,t);t.notified=!1,e&&!t.rejection&&so(t)})))},uo=function(t,e,r){var n,o;no?((n=Jn.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),S.dispatchEvent(n)):n={promise:e,reason:r},!Hn&&(o=S["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(t){}}("Unhandled promise rejection",r)},so=function(t){Ot(Gn,S,(function(){var e,r=t.facade,n=t.value;if(co(t)&&(e=Mn((function(){ur?to.emit("unhandledRejection",n,r):uo("unhandledrejection",r,n)})),t.rejection=ur||co(t)?2:1,e.error))throw e.value}))},co=function(t){return 1!==t.rejection&&!t.parent},fo=function(t){Ot(Gn,S,(function(){var e=t.facade;ur?to.emit("rejectionHandled",e):uo("rejectionhandled",e,t.value)}))},lo=function(t,e,r){return function(n){t(e,n,r)}},ho=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,ao(t,!0))},po=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw Xn("Promise can\'t be resolved itself");var n=oo(e);n?_n((function(){var r={done:!1};try{Ot(n,e,lo(po,r,t),lo(ho,r,t))}catch(e){ho(r,e,t)}})):(t.value=e,t.state=1,ao(t,!1))}catch(e){ho({done:!1},e,t)}}};if(Vn&&(Qn=(Kn=function(t){mr(this,Qn),Lt(t),Ot(In,this);var e=Zn(this);try{t(lo(po,e),lo(ho,e))}catch(t){ho(e,t)}}).prototype,(In=function(t){Yn(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new dn,rejection:!1,state:0,value:void 0})}).prototype=he(Qn,"then",(function(t,e){var r=Zn(this),n=eo(Nr(this,Kn));return r.parent=!0,n.ok=!lt(t)||t,n.fail=lt(e)&&e,n.domain=ur?to.domain:void 0,0==r.state?r.reactions.add(n):_n((function(){io(n,r)})),n.promise})),jn=function(){var t=new In,e=Zn(t);this.promise=t,this.resolve=lo(po,e),this.reject=lo(ho,e)},Un.f=eo=function(t){return t===Kn||void 0===t?new jn(t):ro(t)},lt(Ln)&&$n!==Object.prototype)){Pn=$n.then,qn||he($n,"then",(function(t,e){var r=this;return new Kn((function(t,e){Ot(Pn,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete $n.constructor}catch(t){}fr&&fr($n,Qn)}ar({global:!0,constructor:!0,wrap:!0,forced:Vn},{Promise:Kn}),pr(Kn,"Promise",!1),yr("Promise");var vo={},yo=it("iterator"),go=Array.prototype,mo=function(t){return void 0!==t&&(vo.Array===t||go[yo]===t)},bo=it("iterator"),xo=function(t){if(!C(t))return Rt(t,bo)||Rt(t,"@@iterator")||vo[be(t)]},wo=TypeError,Eo=function(t,e){var r=arguments.length<2?xo(t):e;if(Lt(r))return Et(Ot(r,t));throw wo(_t(t)+" is not iterable")},Ao=function(t,e,r){var n,o;Et(t);try{if(!(n=Rt(t,"return"))){if("throw"===e)throw r;return r}n=Ot(n,t)}catch(t){o=!0,n=t}if("throw"===e)throw r;if(o)throw n;return Et(n),r},Oo=TypeError,So=function(t,e){this.stopped=t,this.result=e},To=So.prototype,ko=function(t,e,r){var n,o,i,a,u,s,c,f=r&&r.that,l=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_RECORD),p=!(!r||!r.IS_ITERATOR),v=!(!r||!r.INTERRUPTED),d=Ur(e,f),y=function(t){return n&&Ao(n,"normal",t),new So(!0,t)},g=function(t){return l?(Et(t),v?d(t[0],t[1],y):d(t[0],t[1])):v?d(t,y):d(t)};if(h)n=t.iterator;else if(p)n=t;else{if(!(o=xo(t)))throw Oo(_t(t)+" is not iterable");if(mo(o)){for(i=0,a=We(t);a>i;i++)if((u=g(t[i]))&&kt(To,u))return u;return new So(!1)}n=Eo(t,o)}for(s=h?t.next:n.next;!(c=Ot(s,n)).done;){try{u=g(c.value)}catch(t){Ao(n,"throw",t)}if("object"==typeof u&&u&&kt(To,u))return u}return new So(!1)},Io=it("iterator"),jo=!1;try{var Po=0,_o={next:function(){return{done:!!Po++}},return:function(){jo=!0}};_o[Io]=function(){return this},Array.from(_o,(function(){throw 2}))}catch(t){}var Mo=function(t,e){if(!e&&!jo)return!1;var r=!1;try{var n={};n[Io]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},Lo=Wn.CONSTRUCTOR||!Mo((function(t){Ln.all(t).then(void 0,(function(){}))}));ar({target:"Promise",stat:!0,forced:Lo},{all:function(t){var e=this,r=Un.f(e),n=r.resolve,o=r.reject,i=Mn((function(){var r=Lt(e.resolve),i=[],a=0,u=1;ko(t,(function(t){var s=a++,c=!1;u++,Ot(r,e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise}});var Ro=Wn.CONSTRUCTOR,No=Ln&&Ln.prototype;if(ar({target:"Promise",proto:!0,forced:Ro,real:!0},{catch:function(t){return this.then(void 0,t)}}),lt(Ln)){var Co=Tt("Promise").prototype.catch;No.catch!==Co&&he(No,"catch",Co,{unsafe:!0})}ar({target:"Promise",stat:!0,forced:Lo},{race:function(t){var e=this,r=Un.f(e),n=r.reject,o=Mn((function(){var o=Lt(e.resolve);ko(t,(function(t){Ot(o,e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}}),ar({target:"Promise",stat:!0,forced:Wn.CONSTRUCTOR},{reject:function(t){var e=Un.f(this);return Ot(e.reject,void 0,t),e.promise}});var Do=Wn.CONSTRUCTOR;Tt("Promise");function Fo(t,e){if(!t)throw new Error(e||"web worker helper assertion failed.")}ar({target:"Promise",stat:!0,forced:Do},{resolve:function(t){return function(t,e){if(Et(t),vt(e)&&e.constructor===t)return e;var r=Un.f(t);return(0,r.resolve)(e),r.promise}(this,t)}});var Wo="undefined"!=typeof window&&void 0!==window.orientation,zo=function(){function t(t,e){var r=this;this.name=t,this.workerThread=e,this.isRunning=!0,this.resolve=function(){},this.reject=function(){},this.result=new Promise((function(t,e){r.resolve=t,r.reject=e}))}return t.prototype.postMessage=function(t,e){this.workerThread.postMessage({source:"Main thread",type:t,payload:e})},t.prototype.done=function(t){Fo(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.resolve(t)},t.prototype.error=function(t){Fo(this.isRunning,"WorkerJob isRunning false."),this.isRunning=!1,this.reject(t)},t}(),Bo=new Map;function Uo(t){Fo(t.source&&!t.url||!t.source&&t.url);var e=Bo.get(t.source||t.url);return e||(t.url&&(e=function(t){if(!t.startsWith("http"))return t;return Go((e=t,"try {\\n  importScripts(\'"+e+"\');\\n} catch (error) {\\n  console.error(error);\\n  throw error;\\n}"));var e}(t.url),Bo.set(t.url,e)),t.source&&(e=Go(t.source),Bo.set(t.source,e))),Fo(e),e}function Go(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Vo(t,e,r){void 0===e&&(e=!0);var n=r||new Set;if(t){if(Ho(t))n.add(t);else if(Ho(t.buffer))n.add(t.buffer);else if(ArrayBuffer.isView(t));else if(e&&"object"==typeof t)for(var o in t)Vo(t[o],e,n)}else;return void 0===r?Array.from(n):[]}function Ho(t){return!!t&&(t instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&t instanceof MessagePort||("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas)))}var qo=function(){},Zo=function(){function t(t){this.terminated=!1,this.loadableURL="";var e=t.name,r=t.source,n=t.url;Fo(r||n),this.name=e,this.source=r,this.url=n,this.onMessage=qo,this.onError=function(t){return console.log(t)},this.worker=this.createBrowserWorker()}return t.isSupported=function(){return"undefined"!=typeof Worker},t.prototype.destroy=function(){this.onMessage=qo,this.onError=qo,this.worker.terminate(),this.terminated=!0},Object.defineProperty(t.prototype,"isRunning",{get:function(){return Boolean(this.onMessage)},enumerable:!1,configurable:!0}),t.prototype.postMessage=function(t,e){e=e||Vo(t),this.worker.postMessage(t,e)},t.prototype.getErrorFromErrorEvent=function(t){var e="Failed to load ";return e+="worker "+this.name+" from "+this.url+". ",t.message&&(e+=t.message+" in "),t.lineno&&(e+=":"+t.lineno+":"+t.colno),new Error(e)},t.prototype.createBrowserWorker=function(){var t=this;this.loadableURL=Uo({source:this.source,url:this.url});var e=new Worker(this.loadableURL,{name:this.name});return e.onmessage=function(e){e.data?t.onMessage(e.data):t.onError(new Error("No data received"))},e.onerror=function(e){t.onError(t.getErrorFromErrorEvent(e)),t.terminated=!0},e.onmessageerror=function(e){return console.error("worker "+t.name+", message error: "+e)},e},t}(),Yo=self&&self.__assign||function(){return(Yo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},$o=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},Ko=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Qo=function(){function t(t){this.name="unnamed",this.maxConcurrency=1,this.maxMobileConcurrency=1,this.onDebug=function(){},this.reuseWorkers=!0,this.props={},this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1,this.source=t.source,this.url=t.url,this.setProps(t)}return t.prototype.destroy=function(){this.idleQueue.forEach((function(t){return t.destroy()})),this.isDestroyed=!0},t.prototype.setProps=function(t){this.props=Yo(Yo({},this.props),t),void 0!==t.name&&(this.name=t.name),void 0!==t.maxConcurrency&&(this.maxConcurrency=t.maxConcurrency),void 0!==t.maxMobileConcurrency&&(this.maxMobileConcurrency=t.maxMobileConcurrency),void 0!==t.reuseWorkers&&(this.reuseWorkers=t.reuseWorkers),void 0!==t.onDebug&&(this.onDebug=t.onDebug)},t.prototype.startJob=function(t,e,r){return void 0===e&&(e=function(t,e,r){return t.done(r)}),void 0===r&&(r=function(t,e){return t.error(e)}),$o(this,void 0,void 0,(function(){var n,o=this;return Ko(this,(function(i){switch(i.label){case 0:return n=new Promise((function(n){return o.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),o})),this.startQueuedJob(),[4,n];case 1:return[2,i.sent()]}}))}))},t.prototype.startQueuedJob=function(){return $o(this,void 0,void 0,(function(){var t,e,r;return Ko(this,(function(n){switch(n.label){case 0:if(!this.jobQueue.length)return[2];if(!(t=this.getAvailableWorker()))return[2];if(!(e=this.jobQueue.shift()))return[3,4];this.onDebug({message:"Starting job",name:e.name,backlog:this.jobQueue.length,workerThread:t}),r=new zo(e.name,t),t.onMessage=function(t){return e.onMessage(r,t.type,t.payload)},t.onError=function(t){return e.onError(r,t)},e.onStart(r),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,r.result];case 2:return n.sent(),[3,4];case 3:return this.returnWorkerToQueue(t),[7];case 4:return[2]}}))}))},t.prototype.returnWorkerToQueue=function(t){this.isDestroyed||!this.reuseWorkers||this.count>this.getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this.startQueuedJob()},t.prototype.getAvailableWorker=function(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this.getMaxConcurrency()){this.count++;var t=this.name.toLowerCase()+" (#"+this.count+" of "+this.maxConcurrency+")";return new Zo({name:t,source:this.source,url:this.url})}return null},t.prototype.getMaxConcurrency=function(){return Wo?this.maxMobileConcurrency:this.maxConcurrency},t}(),Xo=self&&self.__assign||function(){return(Xo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},Jo=self&&self.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ti={maxConcurrency:3,maxMobileConcurrency:1,onDebug:function(){},reuseWorkers:!0},ei=(function(){function t(t){this.workerPools=new Map,this.props=Xo({},ti),this.setProps(t),this.workerPools=new Map}t.isSupported=function(){return Zo.isSupported()},t.getWorkerFarm=function(e){return void 0===e&&(e={}),t.workerFarm=t.workerFarm||new t({}),t.workerFarm.setProps(e),t.workerFarm},t.prototype.destroy=function(){var t,e;try{for(var r=Jo(this.workerPools.values()),n=r.next();!n.done;n=r.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.setProps=function(t){var e,r;this.props=Xo(Xo({},this.props),t);try{for(var n=Jo(this.workerPools.values()),o=n.next();!o.done;o=n.next()){o.value.setProps(this.getWorkerPoolProps())}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.getWorkerPool=function(t){var e=t.name,r=t.source,n=t.url,o=this.workerPools.get(e);return o||((o=new Qo({name:e,source:r,url:n})).setProps(this.getWorkerPoolProps()),this.workerPools.set(e,o)),o},t.prototype.getWorkerPoolProps=function(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}(),new Map),ri=function(){function t(){}return Object.defineProperty(t,"onmessage",{set:function(t){self.onmessage=function(e){if(ni(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}},enumerable:!1,configurable:!0}),t.addEventListener=function(t){var e=ei.get(t);e||(e=function(e){if(ni(e)){var r=e.data,n=r.type,o=r.payload;t(n,o)}}),self.addEventListener("message",e)},t.removeEventListener=function(t){var e=ei.get(t);ei.delete(t),self.removeEventListener("message",e)},t.postMessage=function(t,e){if(self){var r={source:"Worker thread",type:t,payload:e},n=Vo(e);self.postMessage(r,n)}},t}();function ni(t){var e=t.type,r=t.data;return"message"===e&&r&&"string"==typeof r.source&&"Main thread"===r.source}self&&self.__awaiter,self&&self.__generator;var oi,ii,ai=function(){function t(){this._values=[],this._settlers=[],this._closed=!1}return t.prototype[Symbol.asyncIterator]=function(){return this},t.prototype.push=function(t){return this.enqueue(t)},t.prototype.enqueue=function(t){if(this._closed)throw new Error("Closed");if(this._settlers.length>0){if(this._values.length>0)throw new Error("Illegal internal state");var e=this._settlers.shift();t instanceof Error?e.reject(t):e.resolve({value:t})}else this._values.push(t)},t.prototype.close=function(){for(;this._settlers.length>0;){this._settlers.shift().resolve({done:!0})}this._closed=!0},t.prototype.next=function(){var t=this;if(this._values.length>0){var e=this._values.shift();return e instanceof Error?Promise.reject(e):Promise.resolve({done:!1,value:e})}if(this._closed){if(this._settlers.length>0)throw new Error("Illegal internal state");return Promise.resolve({done:!0,value:void 0})}return new Promise((function(e,r){t._settlers.push({resolve:e,reject:r})}))},t}(),ui=self&&self.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},si=self&&self.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},ci=self&&self.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(e=t[r](e)).done,e.value)}))}}},fi=0;function li(t,e){var r=this;if("undefined"!=typeof self){var n={process:hi};ri.onmessage=function(o,i){return ui(r,void 0,void 0,(function(){var r,a,u,s,c,f,l,h,p,v;return si(this,(function(d){switch(d.label){case 0:switch(d.trys.push([0,19,,20]),o){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(i.input,i.options||{},n)];case 2:return r=d.sent(),ri.postMessage("done",{result:r}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");oi=new ai,ii=i.options||{},a=e(oi,ii,n),d.label=4;case 4:d.trys.push([4,9,10,15]),u=ci(a),d.label=5;case 5:return[4,u.next()];case 6:if((s=d.sent()).done)return[3,8];c=s.value,ri.postMessage("output-batch",{result:c}),d.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return f=d.sent(),p={error:f},[3,15];case 10:return d.trys.push([10,,13,14]),s&&!s.done&&(v=u.return)?[4,v.call(u)]:[3,12];case 11:d.sent(),d.label=12;case 12:return[3,14];case 13:if(p)throw p.error;return[7];case 14:return[7];case 15:return ri.postMessage("done",{}),[3,18];case 16:return oi.push(i.input),[3,18];case 17:return oi.close(),[3,18];case 18:return[3,20];case 19:return l=d.sent(),h=l instanceof Error?l.message:"",ri.postMessage("error",{error:h}),[3,20];case 20:return[2]}}))}))}}}function hi(t,e){return void 0===e&&(e={}),new Promise((function(r,n){var o=fi++,i=function(t,e){if(e.id===o)switch(t){case"done":ri.removeEventListener(i),r(e.result);break;case"error":ri.removeEventListener(i),n(e.error)}};ri.addEventListener(i);var a={id:o,input:t,options:e};ri.postMessage("process",a)}))}self&&self.__awaiter,self&&self.__generator;var pi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},vi=gt("span").classList,di=vi&&vi.constructor&&vi.constructor.prototype,yi=di===Object.prototype?void 0:di,gi=Array.isArray||function(t){return"Array"==de(t)},mi=it("species"),bi=Array,xi=function(t,e){return new(function(t){var e;return gi(t)&&(e=t.constructor,(_r(e)&&(e===bi||gi(e.prototype))||vt(e)&&null===(e=e[mi]))&&(e=void 0)),void 0===e?bi:e}(t))(0===e?0:e)},wi=N([].push),Ei=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var h,p,v=z(s),d=Te(v),y=Ur(c,f),g=We(d),m=0,b=l||xi,x=e?b(s,g):r||a?b(s,0):void 0;g>m;m++)if((u||m in d)&&(p=y(h=d[m],m,v),t))if(e)x[m]=p;else if(p)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:wi(x,h)}else switch(t){case 4:return!1;case 7:wi(x,h)}return i?-1:n||o?o:x}},Ai={forEach:Ei(0),map:Ei(1),filter:Ei(2),some:Ei(3),every:Ei(4),find:Ei(5),findIndex:Ei(6),filterReject:Ei(7)},Oi=function(t,e){var r=[][t];return!!r&&P((function(){r.call(null,e||function(){return 1},1)}))},Si=Ai.forEach,Ti=Oi("forEach")?[].forEach:function(t){return Si(this,t,arguments.length>1?arguments[1]:void 0)},ki=function(t){if(t&&t.forEach!==Ti)try{re(t,"forEach",Ti)}catch(e){t.forEach=Ti}};for(var Ii in pi)pi[Ii]&&ki(S[Ii]&&S[Ii].prototype);ki(yi);var ji=function(t,e,r){var n=Wt(e);n in t?Gt.f(t,n,ee(0,r)):t[n]=r},Pi=it("species"),_i=function(t){return X>=51||!P((function(){var e=[];return(e.constructor={})[Pi]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Mi=_i("slice"),Li=it("species"),Ri=Array,Ni=Math.max;ar({target:"Array",proto:!0,forced:!Mi},{slice:function(t,e){var r,n,o,i=ke(this),a=We(i),u=Ce(t,a),s=Ce(void 0===e?a:e,a);if(gi(i)&&(r=i.constructor,(_r(r)&&(r===Ri||gi(r.prototype))||vt(r)&&null===(r=r[Li]))&&(r=void 0),r===Ri||void 0===r))return Vr(i,u,s);for(n=new(void 0===r?Ri:r)(Ni(s-u,0)),o=0;u<s;u++,o++)u in i&&ji(n,o,i[u]);return n.length=o,n}});var Ci=Zt.EXISTS,Di=Function.prototype,Fi=N(Di.toString),Wi=/function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/,zi=N(Wi.exec);ht&&!Ci&&vr(Di,"name",{configurable:!0,get:function(){try{return zi(Wi,Fi(this))[1]}catch(t){return""}}});var Bi,Ui=Object.keys||function(t){return Ve(t,He)},Gi={f:ht&&!bt?Object.defineProperties:function(t,e){Et(t);for(var r,n=ke(e),o=Ui(e),i=o.length,a=0;i>a;)Gt.f(t,r=o[a++],n[r]);return t}},Vi=oe("IE_PROTO"),Hi=function(){},qi=function(t){return"<script>"+t+"<\\/script>"},Zi=function(t){t.write(qi("")),t.close();var e=t.parentWindow.Object;return t=null,e},Yi=function(){try{Bi=new ActiveXObject("htmlfile")}catch(t){}var t,e;Yi="undefined"!=typeof document?document.domain&&Bi?Zi(Bi):((e=gt("iframe")).style.display="none",Gr.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(qi("document.F=Object")),t.close(),t.F):Zi(Bi);for(var r=He.length;r--;)delete Yi.prototype[He[r]];return Yi()};ie[Vi]=!0;var $i=Object.create||function(t,e){var r;return null!==t?(Hi.prototype=Et(t),r=new Hi,Hi.prototype=null,r[Vi]=t):r=Yi(),void 0===e?r:Gi.f(r,e)},Ki=Gt.f,Qi=it("unscopables"),Xi=Array.prototype;null==Xi[Qi]&&Ki(Xi,Qi,{configurable:!0,value:$i(null)});var Ji,ta,ea,ra=function(t){Xi[Qi][t]=!0},na=!P((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),oa=oe("IE_PROTO"),ia=Object,aa=ia.prototype,ua=na?ia.getPrototypeOf:function(t){var e=z(t);if(U(e,oa))return e[oa];var r=e.constructor;return lt(r)&&e instanceof r?r.prototype:e instanceof ia?aa:null},sa=it("iterator"),ca=!1;[].keys&&("next"in(ea=[].keys())?(ta=ua(ua(ea)))!==Object.prototype&&(Ji=ta):ca=!0),(!vt(Ji)||P((function(){var t={};return Ji[sa].call(t)!==t})))&&(Ji={}),lt(Ji[sa])||he(Ji,sa,(function(){return this}));var fa={IteratorPrototype:Ji,BUGGY_SAFARI_ITERATORS:ca},la=fa.IteratorPrototype,ha=function(){return this},pa=Zt.PROPER,va=Zt.CONFIGURABLE,da=fa.IteratorPrototype,ya=fa.BUGGY_SAFARI_ITERATORS,ga=it("iterator"),ma=function(){return this},ba=function(t,e,r,n,o,i,a){!function(t,e,r,n){var o=e+" Iterator";t.prototype=$i(la,{next:ee(+!n,r)}),pr(t,o,!1),vo[o]=ha}(r,e,n);var u,s,c,f=function(t){if(t===o&&d)return d;if(!ya&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},l=e+" Iterator",h=!1,p=t.prototype,v=p[ga]||p["@@iterator"]||o&&p[o],d=!ya&&v||f(o),y="Array"==e&&p.entries||v;if(y&&(u=ua(y.call(new t)))!==Object.prototype&&u.next&&(ua(u)!==da&&(fr?fr(u,da):lt(u[ga])||he(u,ga,ma)),pr(u,l,!0)),pa&&"values"==o&&v&&"values"!==v.name&&(va?re(p,"name","values"):(h=!0,d=function(){return Ot(v,this)})),o)if(s={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},a)for(c in s)(ya||h||!(c in p))&&he(p,c,s[c]);else ar({target:e,proto:!0,forced:ya||h},s);return p[ga]!==d&&he(p,ga,d,{name:o}),vo[e]=d,s},xa=function(t,e){return{value:t,done:e}},wa=Gt.f,Ea=fe.set,Aa=fe.getterFor("Array Iterator"),Oa=ba(Array,"Array",(function(t,e){Ea(this,{type:"Array Iterator",target:ke(t),index:0,kind:e})}),(function(){var t=Aa(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,xa(void 0,!0)):xa("keys"==r?n:"values"==r?e[n]:[n,e[n]],!1)}),"values"),Sa=vo.Arguments=vo.Array;if(ra("keys"),ra("values"),ra("entries"),ht&&"values"!==Sa.name)try{wa(Sa,"name",{value:"values"})}catch(t){}var Ta,ka,Ia,ja="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Pa=fe.enforce,_a=fe.get,Ma=S.Int8Array,La=Ma&&Ma.prototype,Ra=S.Uint8ClampedArray,Na=Ra&&Ra.prototype,Ca=Ma&&ua(Ma),Da=La&&ua(La),Fa=Object.prototype,Wa=S.TypeError,za=it("toStringTag"),Ba=q("TYPED_ARRAY_TAG"),Ua=ja&&!!fr&&"Opera"!==be(S.opera),Ga=!1,Va={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ha={BigInt64Array:8,BigUint64Array:8},qa=function(t){var e=ua(t);if(vt(e)){var r=_a(e);return r&&U(r,"TypedArrayConstructor")?r.TypedArrayConstructor:qa(e)}},Za=function(t){if(!vt(t))return!1;var e=be(t);return U(Va,e)||U(Ha,e)};for(Ta in Va)(Ia=(ka=S[Ta])&&ka.prototype)?Pa(Ia).TypedArrayConstructor=ka:Ua=!1;for(Ta in Ha)(Ia=(ka=S[Ta])&&ka.prototype)&&(Pa(Ia).TypedArrayConstructor=ka);if((!Ua||!lt(Ca)||Ca===Function.prototype)&&(Ca=function(){throw Wa("Incorrect invocation")},Ua))for(Ta in Va)S[Ta]&&fr(S[Ta],Ca);if((!Ua||!Da||Da===Fa)&&(Da=Ca.prototype,Ua))for(Ta in Va)S[Ta]&&fr(S[Ta].prototype,Da);if(Ua&&ua(Na)!==Da&&fr(Na,Da),ht&&!U(Da,za))for(Ta in Ga=!0,vr(Da,za,{configurable:!0,get:function(){return vt(this)?this[Ba]:void 0}}),Va)S[Ta]&&re(S[Ta],Ba,Ta);var Ya={NATIVE_ARRAY_BUFFER_VIEWS:Ua,TYPED_ARRAY_TAG:Ga&&Ba,aTypedArray:function(t){if(Za(t))return t;throw Wa("Target is not a typed array")},aTypedArrayConstructor:function(t){if(lt(t)&&(!fr||kt(Ca,t)))return t;throw Wa(_t(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(ht){if(r)for(var o in Va){var i=S[o];if(i&&U(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}Da[t]&&!r||he(Da,t,r?e:Ua&&La[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(ht){if(fr){if(r)for(n in Va)if((o=S[n])&&U(o,t))try{delete o[t]}catch(t){}if(Ca[t]&&!r)return;try{return he(Ca,t,r?e:Ua&&Ca[t]||e)}catch(t){}}for(n in Va)!(o=S[n])||o[t]&&!r||he(o,t,e)}},getTypedArrayConstructor:qa,isView:function(t){if(!vt(t))return!1;var e=be(t);return"DataView"===e||U(Va,e)||U(Ha,e)},isTypedArray:Za,TypedArray:Ca,TypedArrayPrototype:Da},$a=Ya.NATIVE_ARRAY_BUFFER_VIEWS,Ka=S.ArrayBuffer,Qa=S.Int8Array,Xa=!$a||!P((function(){Qa(1)}))||!P((function(){new Qa(-1)}))||!Mo((function(t){new Qa,new Qa(null),new Qa(1.5),new Qa(t)}),!0)||P((function(){return 1!==new Qa(new Ka(2),1,void 0).length})),Ja=function(t,e,r){for(var n in e)he(t,n,e[n],r);return t},tu=RangeError,eu=function(t){if(void 0===t)return 0;var e=Le(t),r=Fe(e);if(e!==r)throw tu("Wrong length or index");return r},ru=Array,nu=Math.abs,ou=Math.pow,iu=Math.floor,au=Math.log,uu=Math.LN2,su=function(t,e,r){var n,o,i,a=ru(r),u=8*r-e-1,s=(1<<u)-1,c=s>>1,f=23===e?ou(2,-24)-ou(2,-77):0,l=t<0||0===t&&1/t<0?1:0,h=0;for((t=nu(t))!=t||t===1/0?(o=t!=t?1:0,n=s):(n=iu(au(t)/uu),t*(i=ou(2,-n))<1&&(n--,i*=2),(t+=n+c>=1?f/i:f*ou(2,1-c))*i>=2&&(n++,i/=2),n+c>=s?(o=0,n=s):n+c>=1?(o=(t*i-1)*ou(2,e),n+=c):(o=t*ou(2,c-1)*ou(2,e),n=0));e>=8;)a[h++]=255&o,o/=256,e-=8;for(n=n<<e|o,u+=e;u>0;)a[h++]=255&n,n/=256,u-=8;return a[--h]|=128*l,a},cu=function(t,e){var r,n=t.length,o=8*n-e-1,i=(1<<o)-1,a=i>>1,u=o-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;)f=256*f+t[s--],u-=8;for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;)r=256*r+t[s--],u-=8;if(0===f)f=1-a;else{if(f===i)return r?NaN:c?-1/0:1/0;r+=ou(2,e),f-=a}return(c?-1:1)*r*ou(2,f-e)},fu=function(t){for(var e=z(this),r=We(e),n=arguments.length,o=Ce(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:Ce(i,r);a>o;)e[o++]=t;return e},lu=Array,hu=Math.max,pu=function(t,e,r){for(var n=We(t),o=Ce(e,n),i=Ce(void 0===r?n:r,n),a=lu(hu(i-o,0)),u=0;o<i;o++,u++)ji(a,u,t[o]);return a.length=u,a},vu=Ze.f,du=Zt.PROPER,yu=Zt.CONFIGURABLE,gu=fe.getterFor("ArrayBuffer"),mu=fe.getterFor("DataView"),bu=fe.set,xu=S.ArrayBuffer,wu=xu,Eu=wu&&wu.prototype,Au=S.DataView,Ou=Au&&Au.prototype,Su=Object.prototype,Tu=S.Array,ku=S.RangeError,Iu=N(fu),ju=N([].reverse),Pu=su,_u=cu,Mu=function(t){return[255&t]},Lu=function(t){return[255&t,t>>8&255]},Ru=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},Nu=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Cu=function(t){return Pu(t,23,4)},Du=function(t){return Pu(t,52,8)},Fu=function(t,e,r){vr(t.prototype,e,{configurable:!0,get:function(){return r(this)[e]}})},Wu=function(t,e,r,n){var o=eu(r),i=mu(t);if(o+e>i.byteLength)throw ku("Wrong index");var a=i.bytes,u=o+i.byteOffset,s=pu(a,u,u+e);return n?s:ju(s)},zu=function(t,e,r,n,o,i){var a=eu(r),u=mu(t);if(a+e>u.byteLength)throw ku("Wrong index");for(var s=u.bytes,c=a+u.byteOffset,f=n(+o),l=0;l<e;l++)s[c+l]=f[i?l:e-l-1]};if(ja){var Bu=du&&"ArrayBuffer"!==xu.name;if(P((function(){xu(1)}))&&P((function(){new xu(-1)}))&&!P((function(){return new xu,new xu(1.5),new xu(NaN),1!=xu.length||Bu&&!yu})))Bu&&yu&&re(xu,"name","ArrayBuffer");else{(wu=function(t){return mr(this,Eu),new xu(eu(t))}).prototype=Eu;for(var Uu,Gu=vu(xu),Vu=0;Gu.length>Vu;)(Uu=Gu[Vu++])in wu||re(wu,Uu,xu[Uu]);Eu.constructor=wu}fr&&ua(Ou)!==Su&&fr(Ou,Su);var Hu=new Au(new wu(2)),qu=N(Ou.setInt8);Hu.setInt8(0,2147483648),Hu.setInt8(1,2147483649),!Hu.getInt8(0)&&Hu.getInt8(1)||Ja(Ou,{setInt8:function(t,e){qu(this,t,e<<24>>24)},setUint8:function(t,e){qu(this,t,e<<24>>24)}},{unsafe:!0})}else Eu=(wu=function(t){mr(this,Eu);var e=eu(t);bu(this,{type:"ArrayBuffer",bytes:Iu(Tu(e),0),byteLength:e}),ht||(this.byteLength=e,this.detached=!1)}).prototype,Ou=(Au=function(t,e,r){mr(this,Ou),mr(t,Eu);var n=gu(t),o=n.byteLength,i=Le(e);if(i<0||i>o)throw ku("Wrong offset");if(i+(r=void 0===r?o-i:Fe(r))>o)throw ku("Wrong length");bu(this,{type:"DataView",buffer:t,byteLength:r,byteOffset:i,bytes:n.bytes}),ht||(this.buffer=t,this.byteLength=r,this.byteOffset=i)}).prototype,ht&&(Fu(wu,"byteLength",gu),Fu(Au,"buffer",mu),Fu(Au,"byteLength",mu),Fu(Au,"byteOffset",mu)),Ja(Ou,{getInt8:function(t){return Wu(this,1,t)[0]<<24>>24},getUint8:function(t){return Wu(this,1,t)[0]},getInt16:function(t){var e=Wu(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Wu(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return Nu(Wu(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return Nu(Wu(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return _u(Wu(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return _u(Wu(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){zu(this,1,t,Mu,e)},setUint8:function(t,e){zu(this,1,t,Mu,e)},setInt16:function(t,e){zu(this,2,t,Lu,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){zu(this,2,t,Lu,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){zu(this,4,t,Ru,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){zu(this,4,t,Ru,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){zu(this,4,t,Cu,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){zu(this,8,t,Du,e,arguments.length>2?arguments[2]:void 0)}});pr(wu,"ArrayBuffer"),pr(Au,"DataView");var Zu={ArrayBuffer:wu,DataView:Au},Yu=Math.floor,$u=Number.isInteger||function(t){return!vt(t)&&isFinite(t)&&Yu(t)===t},Ku=RangeError,Qu=RangeError,Xu=function(t,e){var r=function(t){var e=Le(t);if(e<0)throw Ku("The argument can\'t be less than 0");return e}(t);if(r%e)throw Qu("Wrong offset");return r},Ju=function(t){var e=be(t);return"BigInt64Array"==e||"BigUint64Array"==e},ts=TypeError,es=function(t){var e=Ft(t,"number");if("number"==typeof e)throw ts("Can\'t convert number to bigint");return BigInt(e)},rs=Ya.aTypedArrayConstructor,ns=function(t){var e,r,n,o,i,a,u,s,c=Lr(this),f=z(t),l=arguments.length,h=l>1?arguments[1]:void 0,p=void 0!==h,v=xo(f);if(v&&!mo(v))for(s=(u=Eo(f,v)).next,f=[];!(a=Ot(s,u)).done;)f.push(a.value);for(p&&l>2&&(h=Ur(h,arguments[2])),r=We(f),n=new(rs(c))(r),o=Ju(n),e=0;r>e;e++)i=p?h(f[e],e):f[e],n[e]=o?es(i):+i;return n},os=function(t,e,r){var n,o;return fr&&lt(n=e.constructor)&&n!==r&&vt(o=n.prototype)&&o!==r.prototype&&fr(t,o),t},is=w((function(t){var e=Ze.f,r=Ai.forEach,n=fe.get,o=fe.set,i=fe.enforce,a=Gt.f,u=je.f,s=Math.round,c=S.RangeError,f=Zu.ArrayBuffer,l=f.prototype,h=Zu.DataView,p=Ya.NATIVE_ARRAY_BUFFER_VIEWS,v=Ya.TYPED_ARRAY_TAG,d=Ya.TypedArray,y=Ya.TypedArrayPrototype,g=Ya.aTypedArrayConstructor,m=Ya.isTypedArray,b=function(t,e){g(t);for(var r=0,n=e.length,o=new t(n);n>r;)o[r]=e[r++];return o},x=function(t,e){vr(t,e,{configurable:!0,get:function(){return n(this)[e]}})},w=function(t){var e;return kt(l,t)||"ArrayBuffer"==(e=be(t))||"SharedArrayBuffer"==e},E=function(t,e){return m(t)&&!jt(e)&&e in t&&$u(+e)&&e>=0},A=function(t,e){return e=Wt(e),E(t,e)?ee(2,t[e]):u(t,e)},O=function(t,e,r){return e=Wt(e),!(E(t,e)&&vt(r)&&U(r,"value"))||U(r,"get")||U(r,"set")||r.configurable||U(r,"writable")&&!r.writable||U(r,"enumerable")&&!r.enumerable?a(t,e,r):(t[e]=r.value,t)};ht?(p||(je.f=A,Gt.f=O,x(y,"buffer"),x(y,"byteOffset"),x(y,"byteLength"),x(y,"length")),ar({target:"Object",stat:!0,forced:!p},{getOwnPropertyDescriptor:A,defineProperty:O}),t.exports=function(t,u,l){var g=t.match(/\\d+/)[0]/8,x=t+(l?"Clamped":"")+"Array",E="get"+t,A="set"+t,O=S[x],T=O,k=T&&T.prototype,I={},j=function(t,e){a(t,e,{get:function(){return function(t,e){var r=n(t);return r.view[E](e*g+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var o=n(t);l&&(r=(r=s(r))<0?0:r>255?255:255&r),o.view[A](e*g+o.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};p?Xa&&(T=u((function(t,e,r,n){return mr(t,k),os(vt(e)?w(e)?void 0!==n?new O(e,Xu(r,g),n):void 0!==r?new O(e,Xu(r,g)):new O(e):m(e)?b(T,e):Ot(ns,T,e):new O(eu(e)),t,T)})),fr&&fr(T,d),r(e(O),(function(t){t in T||re(T,t,O[t])})),T.prototype=k):(T=u((function(t,e,r,n){mr(t,k);var i,a,u,s=0,l=0;if(vt(e)){if(!w(e))return m(e)?b(T,e):Ot(ns,T,e);i=e,l=Xu(r,g);var p=e.byteLength;if(void 0===n){if(p%g)throw c("Wrong length");if((a=p-l)<0)throw c("Wrong length")}else if((a=Fe(n)*g)+l>p)throw c("Wrong length");u=a/g}else u=eu(e),i=new f(a=u*g);for(o(t,{buffer:i,byteOffset:l,byteLength:a,length:u,view:new h(i)});s<u;)j(t,s++)})),fr&&fr(T,d),k=T.prototype=$i(y)),k.constructor!==T&&re(k,"constructor",T),i(k).TypedArrayConstructor=T,v&&re(k,v,x);var P=T!=O;I[x]=T,ar({global:!0,constructor:!0,forced:P,sham:!p},I),"BYTES_PER_ELEMENT"in T||re(T,"BYTES_PER_ELEMENT",g),"BYTES_PER_ELEMENT"in k||re(k,"BYTES_PER_ELEMENT",g),yr(x)}):t.exports=function(){}}));is("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0);var as=TypeError,us=function(t,e){if(!delete t[e])throw as("Cannot delete property "+_t(e)+" of "+_t(t))},ss=Math.min,cs=N([].copyWithin||function(t,e){var r=z(this),n=We(r),o=Ce(t,n),i=Ce(e,n),a=arguments.length>2?arguments[2]:void 0,u=ss((void 0===a?n:Ce(a,n))-i,n-o),s=1;for(i<o&&o<i+u&&(s=-1,i+=u-1,o+=u-1);u-- >0;)i in r?r[o]=r[i]:us(r,o),o+=s,i+=s;return r}),fs=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("copyWithin",(function(t,e){return cs(fs(this),t,e,arguments.length>2?arguments[2]:void 0)}));var ls=Ai.every,hs=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("every",(function(t){return ls(hs(this),t,arguments.length>1?arguments[1]:void 0)}));var ps=Ya.aTypedArray,vs=Ya.exportTypedArrayMethod,ds=N("".slice);vs("fill",(function(t){var e=arguments.length;ps(this);var r="Big"===ds(be(this),0,3)?es(t):+t;return Ot(fu,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),P((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var ys=Ya.aTypedArrayConstructor,gs=Ya.getTypedArrayConstructor,ms=function(t){return ys(Nr(t,gs(t)))},bs=function(t,e){return function(t,e){for(var r=0,n=We(e),o=new t(n);n>r;)o[r]=e[r++];return o}(ms(t),e)},xs=Ai.filter,ws=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("filter",(function(t){var e=xs(ws(this),t,arguments.length>1?arguments[1]:void 0);return bs(this,e)}));var Es=Ai.find,As=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("find",(function(t){return Es(As(this),t,arguments.length>1?arguments[1]:void 0)}));var Os=Ai.findIndex,Ss=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("findIndex",(function(t){return Os(Ss(this),t,arguments.length>1?arguments[1]:void 0)}));var Ts=Ai.forEach,ks=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("forEach",(function(t){Ts(ks(this),t,arguments.length>1?arguments[1]:void 0)}));var Is=Be.includes,js=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("includes",(function(t){return Is(js(this),t,arguments.length>1?arguments[1]:void 0)}));var Ps=Be.indexOf,_s=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("indexOf",(function(t){return Ps(_s(this),t,arguments.length>1?arguments[1]:void 0)}));var Ms=it("iterator"),Ls=S.Uint8Array,Rs=N(Oa.values),Ns=N(Oa.keys),Cs=N(Oa.entries),Ds=Ya.aTypedArray,Fs=Ya.exportTypedArrayMethod,Ws=Ls&&Ls.prototype,zs=!P((function(){Ws[Ms].call([1])})),Bs=!!Ws&&Ws.values&&Ws[Ms]===Ws.values&&"values"===Ws.values.name,Us=function(){return Rs(Ds(this))};Fs("entries",(function(){return Cs(Ds(this))}),zs),Fs("keys",(function(){return Ns(Ds(this))}),zs),Fs("values",Us,zs||!Bs,{name:"values"}),Fs(Ms,Us,zs||!Bs,{name:"values"});var Gs=Ya.aTypedArray,Vs=Ya.exportTypedArrayMethod,Hs=N([].join);Vs("join",(function(t){return Hs(Gs(this),t)}));var qs=Math.min,Zs=[].lastIndexOf,Ys=!!Zs&&1/[1].lastIndexOf(1,-0)<0,$s=Oi("lastIndexOf"),Ks=Ys||!$s?function(t){if(Ys)return Wr(Zs,this,arguments)||0;var e=ke(this),r=We(e),n=r-1;for(arguments.length>1&&(n=qs(n,Le(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Zs,Qs=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("lastIndexOf",(function(t){var e=arguments.length;return Wr(Ks,Qs(this),e>1?[t,arguments[1]]:[t])}));var Xs=Ai.map,Js=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("map",(function(t){return Xs(Js(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(ms(t))(e)}))}));var tc=TypeError,ec=function(t){return function(e,r,n,o){Lt(r);var i=z(e),a=Te(i),u=We(i),s=t?u-1:0,c=t?-1:1;if(n<2)for(;;){if(s in a){o=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw tc("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(o=r(o,a[s],s,i));return o}},rc={left:ec(!1),right:ec(!0)},nc=rc.left,oc=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("reduce",(function(t){var e=arguments.length;return nc(oc(this),t,e,e>1?arguments[1]:void 0)}));var ic=rc.right,ac=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("reduceRight",(function(t){var e=arguments.length;return ic(ac(this),t,e,e>1?arguments[1]:void 0)}));var uc=Ya.aTypedArray,sc=Ya.exportTypedArrayMethod,cc=Math.floor;sc("reverse",(function(){for(var t,e=uc(this).length,r=cc(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this}));var fc=S.RangeError,lc=S.Int8Array,hc=lc&&lc.prototype,pc=hc&&hc.set,vc=Ya.aTypedArray,dc=Ya.exportTypedArrayMethod,yc=!P((function(){var t=new Uint8ClampedArray(2);return Ot(pc,t,{length:1,0:3},1),3!==t[1]})),gc=yc&&Ya.NATIVE_ARRAY_BUFFER_VIEWS&&P((function(){var t=new lc(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));dc("set",(function(t){vc(this);var e=Xu(arguments.length>1?arguments[1]:void 0,1),r=z(t);if(yc)return Ot(pc,this,r,e);var n=this.length,o=We(r),i=0;if(o+e>n)throw fc("Wrong length");for(;i<o;)this[e+i]=r[i++]}),!yc||gc);var mc=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("slice",(function(t,e){for(var r=Vr(mc(this),t,e),n=ms(this),o=0,i=r.length,a=new n(i);i>o;)a[o]=r[o++];return a}),P((function(){new Int8Array(1).slice()})));var bc=Ai.some,xc=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("some",(function(t){return bc(xc(this),t,arguments.length>1?arguments[1]:void 0)}));var wc=Math.floor,Ec=function(t,e){var r=t.length,n=wc(r/2);return r<8?Ac(t,e):Oc(t,Ec(pu(t,0,n),e),Ec(pu(t,n),e),e)},Ac=function(t,e){for(var r,n,o=t.length,i=1;i<o;){for(n=i,r=t[i];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==i++&&(t[n]=r)}return t},Oc=function(t,e,r,n){for(var o=e.length,i=r.length,a=0,u=0;a<o||u<i;)t[a+u]=a<o&&u<i?n(e[a],r[u])<=0?e[a++]:r[u++]:a<o?e[a++]:r[u++];return t},Sc=Ec,Tc=Z.match(/firefox\\/(\\d+)/i),kc=!!Tc&&+Tc[1],Ic=/MSIE|Trident/.test(Z),jc=Z.match(/AppleWebKit\\/(\\d+)\\./),Pc=!!jc&&+jc[1],_c=Ya.aTypedArray,Mc=Ya.exportTypedArrayMethod,Lc=S.Uint16Array,Rc=Lc&&zr(Lc.prototype.sort),Nc=!(!Rc||P((function(){Rc(new Lc(2),null)}))&&P((function(){Rc(new Lc(2),{})}))),Cc=!!Rc&&!P((function(){if(X)return X<74;if(kc)return kc<67;if(Ic)return!0;if(Pc)return Pc<602;var t,e,r=new Lc(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(Rc(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));Mc("sort",(function(t){return void 0!==t&&Lt(t),Cc?Rc(this,t):Sc(_c(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!Cc||Nc);var Dc=Ya.aTypedArray;(0,Ya.exportTypedArrayMethod)("subarray",(function(t,e){var r=Dc(this),n=r.length,o=Ce(t,n);return new(ms(r))(r.buffer,r.byteOffset+o*r.BYTES_PER_ELEMENT,Fe((void 0===e?n:Ce(e,n))-o))}));var Fc=S.Int8Array,Wc=Ya.aTypedArray,zc=Ya.exportTypedArrayMethod,Bc=[].toLocaleString,Uc=!!Fc&&P((function(){Bc.call(new Fc(1))}));zc("toLocaleString",(function(){return Wr(Bc,Uc?Vr(Wc(this)):Wc(this),Vr(arguments))}),P((function(){return[1,2].toLocaleString()!=new Fc([1,2]).toLocaleString()}))||!P((function(){Fc.prototype.toLocaleString.call([1,2])})));var Gc=Ya.exportTypedArrayMethod,Vc=S.Uint8Array,Hc=Vc&&Vc.prototype||{},qc=[].toString,Zc=N([].join);P((function(){qc.call({})}))&&(qc=function(){return Zc(this)});var Yc=Hc.toString!=qc;Gc("toString",qc,Yc),ar({target:"Array",proto:!0},{fill:fu}),ra("fill");var $c,Kc,Qc=String,Xc=function(t){if("Symbol"===be(t))throw TypeError("Cannot convert a Symbol value to a string");return Qc(t)},Jc=function(){var t=Et(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},tf=S.RegExp,ef=P((function(){var t=tf("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),rf=ef||P((function(){return!tf("a","y").sticky})),nf={BROKEN_CARET:ef||P((function(){var t=tf("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:rf,UNSUPPORTED_Y:ef},of=S.RegExp,af=P((function(){var t=of(".","s");return!(t.dotAll&&t.exec("\\n")&&"s"===t.flags)})),uf=S.RegExp,sf=P((function(){var t=uf("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),cf=fe.get,ff=j("native-string-replace",String.prototype.replace),lf=RegExp.prototype.exec,hf=lf,pf=N("".charAt),vf=N("".indexOf),df=N("".replace),yf=N("".slice),gf=(Kc=/b*/g,Ot(lf,$c=/a/,"a"),Ot(lf,Kc,"a"),0!==$c.lastIndex||0!==Kc.lastIndex),mf=nf.BROKEN_CARET,bf=void 0!==/()??/.exec("")[1];(gf||bf||mf||af||sf)&&(hf=function(t){var e,r,n,o,i,a,u,s=this,c=cf(s),f=Xc(t),l=c.raw;if(l)return l.lastIndex=s.lastIndex,e=Ot(hf,l,f),s.lastIndex=l.lastIndex,e;var h=c.groups,p=mf&&s.sticky,v=Ot(Jc,s),d=s.source,y=0,g=f;if(p&&(v=df(v,"y",""),-1===vf(v,"g")&&(v+="g"),g=yf(f,s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\\n"!==pf(f,s.lastIndex-1))&&(d="(?: "+d+")",g=" "+g,y++),r=new RegExp("^(?:"+d+")",v)),bf&&(r=new RegExp("^"+d+"$(?!\\\\s)",v)),gf&&(n=s.lastIndex),o=Ot(lf,p?r:s,g),p?o?(o.input=yf(o.input,y),o[0]=yf(o[0],y),o.index=s.lastIndex,s.lastIndex+=o[0].length):s.lastIndex=0:gf&&o&&(s.lastIndex=s.global?o.index+o[0].length:n),bf&&o&&o.length>1&&Ot(ff,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=$i(null),i=0;i<h.length;i++)a[(u=h[i])[0]]=o[u[1]];return o});var xf=hf;ar({target:"RegExp",proto:!0,forced:/./.exec!==xf},{exec:xf});var wf,Ef=it("species"),Af=RegExp.prototype,Of=function(t,e,r,n){var o=it(t),i=!P((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!P((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[Ef]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||r){var u=zr(/./[o]),s=e(o,""[t],(function(t,e,r,n,o){var a=zr(t),s=e.exec;return s===xf||s===Af.exec?i&&!o?{done:!0,value:u(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));he(String.prototype,t,s[0]),he(Af,o,s[1])}n&&re(Af[o],"sham",!0)},Sf=N("".charAt),Tf=N("".charCodeAt),kf=N("".slice),If=function(t){return function(e,r){var n,o,i=Xc(F(e)),a=Le(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=Tf(i,a))<55296||n>56319||a+1===u||(o=Tf(i,a+1))<56320||o>57343?t?Sf(i,a):n:t?kf(i,a,a+2):o-56320+(n-55296<<10)+65536}},jf={codeAt:If(!1),charAt:If(!0)},Pf=jf.charAt,_f=function(t,e,r){return e+(r?Pf(t,e).length:1)},Mf=Math.floor,Lf=N("".charAt),Rf=N("".replace),Nf=N("".slice),Cf=/\\$([$&\'`]|\\d{1,2}|<[^>]*>)/g,Df=/\\$([$&\'`]|\\d{1,2})/g,Ff=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=Df;return void 0!==o&&(o=z(o),s=Cf),Rf(i,s,(function(i,s){var c;switch(Lf(s,0)){case"$":return"$";case"&":return t;case"`":return Nf(e,0,r);case"\'":return Nf(e,a);case"<":c=o[Nf(s,1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=Mf(f/10);return 0===l?i:l<=u?void 0===n[l-1]?Lf(s,1):n[l-1]+Lf(s,1):i}c=n[f-1]}return void 0===c?"":c}))},Wf=TypeError,zf=function(t,e){var r=t.exec;if(lt(r)){var n=Ot(r,t,e);return null!==n&&Et(n),n}if("RegExp"===de(t))return Ot(xf,t,e);throw Wf("RegExp#exec called on incompatible receiver")},Bf=it("replace"),Uf=Math.max,Gf=Math.min,Vf=N([].concat),Hf=N([].push),qf=N("".indexOf),Zf=N("".slice),Yf="$0"==="a".replace(/./,"$0"),$f=!!/./[Bf]&&""===/./[Bf]("a","$0");function Kf(t){this.message=t}Of("replace",(function(t,e,r){var n=$f?"$":"$0";return[function(t,r){var n=F(this),o=C(t)?void 0:Rt(t,Bf);return o?Ot(o,t,n,r):Ot(e,Xc(n),t,r)},function(t,o){var i=Et(this),a=Xc(t);if("string"==typeof o&&-1===qf(o,n)&&-1===qf(o,"$<")){var u=r(e,i,a,o);if(u.done)return u.value}var s=lt(o);s||(o=Xc(o));var c=i.global;if(c){var f=i.unicode;i.lastIndex=0}for(var l=[];;){var h=zf(i,a);if(null===h)break;if(Hf(l,h),!c)break;""===Xc(h[0])&&(i.lastIndex=_f(a,Fe(i.lastIndex),f))}for(var p,v="",d=0,y=0;y<l.length;y++){for(var g=Xc((h=l[y])[0]),m=Uf(Gf(Le(h.index),a.length),0),b=[],x=1;x<h.length;x++)Hf(b,void 0===(p=h[x])?p:String(p));var w=h.groups;if(s){var E=Vf([g],b,m,a);void 0!==w&&Hf(E,w);var A=Xc(Wr(o,void 0,E))}else A=Ff(g,a,m,b,w,o);m>=d&&(v+=Zf(a,d,m)+A,d=m+g.length)}return v+Zf(a,d)}]}),!!P((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Yf||$f),Kf.prototype=new Error,Kf.prototype.name="InvalidCharacterError",ar({global:!0,forced:S.globalThis!==S},{globalThis:S}),wf="undefined"==typeof window?{devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,e,r){return{duration:0}},now:function(){return(new Date).getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,e){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:window,"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM?my.getSystemInfoSync().pixelRatio:wf.devicePixelRatio;var Qf=TypeError,Xf=Object.getOwnPropertyDescriptor,Jf=ht&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(gi(t)&&!Xf(t,"length").writable)throw Qf("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},tl=TypeError,el=function(t){if(t>9007199254740991)throw tl("Maximum allowed index exceeded");return t},rl=_i("splice"),nl=Math.max,ol=Math.min;ar({target:"Array",proto:!0,forced:!rl},{splice:function(t,e){var r,n,o,i,a,u,s=z(this),c=We(s),f=Ce(t,c),l=arguments.length;for(0===l?r=n=0:1===l?(r=0,n=c-f):(r=l-2,n=ol(nl(Le(e),0),c-f)),el(c+r-n),o=xi(s,n),i=0;i<n;i++)(a=f+i)in s&&ji(o,i,s[a]);if(o.length=n,r<n){for(i=f;i<c-n;i++)u=i+r,(a=i+n)in s?s[u]=s[a]:us(s,u);for(i=c;i>c-n+r;i--)us(s,i-1)}else if(r>n)for(i=c-n;i>f;i--)u=i+r-1,(a=i+n-1)in s?s[u]=s[a]:us(s,u);for(i=0;i<r;i++)s[i+f]=arguments[i+2];return Jf(s,c-n+r),o}});var il=u((function t(e,r){i(this,t),s(this,"cancelBubble",void 0),s(this,"cancelable",void 0),s(this,"target",void 0),s(this,"currentTarget",void 0),s(this,"preventDefault",void 0),s(this,"stopPropagation",void 0),s(this,"type",void 0),s(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=e,this.timeStamp=Date.now()})),al=Object.assign,ul=Object.defineProperty,sl=N([].concat),cl=!al||P((function(){if(ht&&1!==al({b:1},al(ul({},"a",{enumerable:!0,get:function(){ul(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=al({},t)[r]||"abcdefghijklmnopqrst"!=Ui(al({},e)).join("")}))?function(t,e){for(var r=z(t),n=arguments.length,o=1,i=Ye.f,a=Ae.f;n>o;)for(var u,s=Te(arguments[o++]),c=i?sl(Ui(s),i(s)):Ui(s),f=c.length,l=0;f>l;)u=c[l++],ht&&!Ot(a,s,u)||(r[u]=s[u]);return r}:al;ar({target:"Object",stat:!0,arity:2,forced:Object.assign!==cl},{assign:cl});var fl=Ai.findIndex,ll=!0;"findIndex"in[]&&Array(1).findIndex((function(){ll=!1})),ar({target:"Array",proto:!0,forced:ll},{findIndex:function(t){return fl(this,t,arguments.length>1?arguments[1]:void 0)}}),ra("findIndex");var hl=jf.charAt,pl=fe.set,vl=fe.getterFor("String Iterator");ba(String,"String",(function(t){pl(this,{type:"String Iterator",string:Xc(t),index:0})}),(function(){var t,e=vl(this),r=e.string,n=e.index;return n>=r.length?xa(void 0,!0):(t=hl(r,n),e.index+=t.length,xa(t,!1))}));var dl=!P((function(){return Object.isExtensible(Object.preventExtensions({}))})),yl=Ze.f,gl="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ml={f:function(t){return gl&&"Window"==de(t)?function(t){try{return yl(t)}catch(t){return pu(gl)}}(t):yl(ke(t))}},bl=P((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),xl=Object.isExtensible,wl=P((function(){xl(1)}))||bl?function(t){return!!vt(t)&&((!bl||"ArrayBuffer"!=de(t))&&(!xl||xl(t)))}:xl,El=w((function(t){var e=Gt.f,r=!1,n=q("meta"),o=0,i=function(t){e(t,n,{value:{objectID:"O"+o++,weakData:{}}})},a=t.exports={enable:function(){a.enable=function(){},r=!0;var t=Ze.f,e=N([].splice),o={};o[n]=1,t(o).length&&(Ze.f=function(r){for(var o=t(r),i=0,a=o.length;i<a;i++)if(o[i]===n){e(o,i,1);break}return o},ar({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:ml.f}))},fastKey:function(t,e){if(!vt(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!U(t,n)){if(!wl(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!U(t,n)){if(!wl(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return dl&&r&&wl(t)&&!U(t,n)&&i(t),t}};ie[n]=!0})),Al=(El.enable,El.fastKey,El.getWeakData,El.onFreeze,function(t,e,r){var n=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=n?"set":"add",a=S[t],u=a&&a.prototype,s=a,c={},f=function(t){var e=N(u[t]);he(u,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!vt(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return o&&!vt(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!vt(t))&&e(this,0===t?0:t)}:function(t,r){return e(this,0===t?0:t,r),this})};if(or(t,!lt(a)||!(o||u.forEach&&!P((function(){(new a).entries().next()})))))s=r.getConstructor(e,t,n,i),El.enable();else if(or(t,!0)){var l=new s,h=l[i](o?{}:-0,1)!=l,p=P((function(){l.has(1)})),v=Mo((function(t){new a(t)})),d=!o&&P((function(){for(var t=new a,e=5;e--;)t[i](e,e);return!t.has(-0)}));v||((s=e((function(t,e){mr(t,u);var r=os(new a,t,s);return C(e)||ko(e,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=u,u.constructor=s),(p||d)&&(f("delete"),f("has"),n&&f("get")),(d||h)&&f(i),o&&u.clear&&delete u.clear}return c[t]=s,ar({global:!0,constructor:!0,forced:s!=a},c),pr(s,t),o||r.setStrong(s,t,n),s}),Ol=El.getWeakData,Sl=fe.set,Tl=fe.getterFor,kl=Ai.find,Il=Ai.findIndex,jl=N([].splice),Pl=0,_l=function(t){return t.frozen||(t.frozen=new Ml)},Ml=function(){this.entries=[]},Ll=function(t,e){return kl(t.entries,(function(t){return t[0]===e}))};Ml.prototype={get:function(t){var e=Ll(this,t);if(e)return e[1]},has:function(t){return!!Ll(this,t)},set:function(t,e){var r=Ll(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Il(this.entries,(function(e){return e[0]===t}));return~e&&jl(this.entries,e,1),!!~e}};var Rl,Nl={getConstructor:function(t,e,r,n){var o=t((function(t,o){mr(t,i),Sl(t,{type:e,id:Pl++,frozen:void 0}),C(o)||ko(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=Tl(e),u=function(t,e,r){var n=a(t),o=Ol(Et(e),!0);return!0===o?_l(n).set(e,r):o[n.id]=r,t};return Ja(i,{delete:function(t){var e=a(this);if(!vt(t))return!1;var r=Ol(t);return!0===r?_l(e).delete(t):r&&U(r,e.id)&&delete r[e.id]},has:function(t){var e=a(this);if(!vt(t))return!1;var r=Ol(t);return!0===r?_l(e).has(t):r&&U(r,e.id)}}),Ja(i,r?{get:function(t){var e=a(this);if(vt(t)){var r=Ol(t);return!0===r?_l(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return u(this,t,e)}}:{add:function(t){return u(this,t,!0)}}),o}},Cl=fe.enforce,Dl=Object,Fl=Array.isArray,Wl=Dl.isExtensible,zl=Dl.isFrozen,Bl=Dl.isSealed,Ul=Dl.freeze,Gl=Dl.seal,Vl={},Hl={},ql=!S.ActiveXObject&&"ActiveXObject"in S,Zl=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Yl=Al("WeakMap",Zl,Nl),$l=Yl.prototype,Kl=N($l.set);if(te)if(ql){Rl=Nl.getConstructor(Zl,"WeakMap",!0),El.enable();var Ql=N($l.delete),Xl=N($l.has),Jl=N($l.get);Ja($l,{delete:function(t){if(vt(t)&&!Wl(t)){var e=Cl(this);return e.frozen||(e.frozen=new Rl),Ql(this,t)||e.frozen.delete(t)}return Ql(this,t)},has:function(t){if(vt(t)&&!Wl(t)){var e=Cl(this);return e.frozen||(e.frozen=new Rl),Xl(this,t)||e.frozen.has(t)}return Xl(this,t)},get:function(t){if(vt(t)&&!Wl(t)){var e=Cl(this);return e.frozen||(e.frozen=new Rl),Xl(this,t)?Jl(this,t):e.frozen.get(t)}return Jl(this,t)},set:function(t,e){if(vt(t)&&!Wl(t)){var r=Cl(this);r.frozen||(r.frozen=new Rl),Xl(this,t)?Kl(this,t,e):r.frozen.set(t,e)}else Kl(this,t,e);return this}})}else dl&&P((function(){var t=Ul([]);return Kl(new Yl,t,1),!zl(t)}))&&Ja($l,{set:function(t,e){var r;return Fl(t)&&(zl(t)?r=Vl:Bl(t)&&(r=Hl)),Kl(this,t,e),r==Vl&&Ul(t),r==Hl&&Gl(t),this}});var th=it("iterator"),eh=it("toStringTag"),rh=Oa.values,nh=function(t,e){if(t){if(t[th]!==rh)try{re(t,th,rh)}catch(e){t[th]=rh}if(t[eh]||re(t,eh,e),pi[e])for(var r in Oa)if(t[r]!==Oa[r])try{re(t,r,Oa[r])}catch(e){t[r]=Oa[r]}}};for(var oh in pi)nh(S[oh]&&S[oh].prototype,oh);nh(yi,"DOMTokenList");var ih,ah,uh,sh,ch=new WeakMap,fh=function(){function t(){i(this,t),ch.set(this,{})}return u(t,[{key:"addEventListener",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=ch.get(this);n||(n={}),n[t]||(n[t]=[]),n[t].push(e),ch.set(this,n),r.capture,r.once,r.passive}},{key:"removeEventListener",value:function(t,e){var r=ch.get(this);if(r){var n=r[t];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===e){n.splice(o,1);break}}}},{key:"dispatchEvent",value:function(t){var e=ch.get(this)[t.type];if(e){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=g(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(n.s();!(r=n.n()).done;){(0,r.value)(t)}}catch(t){n.e(t)}finally{n.f()}}}}]),t}(),lh=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),t.className="",t.children=[],t}return u(r,[{key:"setAttribute",value:function(t,e){this[t]=e}},{key:"getAttribute",value:function(t){return this[t]}},{key:"setAttributeNS",value:function(t,e){this[t]=e}},{key:"getAttributeNS",value:function(t){return this[t]}}]),r}(function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"childNodes",void 0),t.childNodes=[],t}return u(r,[{key:"appendChild",value:function(t){this.childNodes.push(t)}},{key:"cloneNode",value:function(){var t=Object.create(this);return Object.assign(t,this),t}},{key:"removeChild",value:function(t){var e=this.childNodes.findIndex((function(e){return e===t}));return e>-1?this.childNodes.splice(e,1):null}}]),r}(fh));if("undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var hh=my.getSystemInfoSync();ih=hh.screenWidth,ah=hh.screenHeight,uh=hh.windowWidth,sh=hh.windowHeight}else{var ph=wf.innerWidth,vh=wf.innerHeight;ih=ph,ah=vh,uh=ph,sh=vh}var dh={width:ih,height:ah,availWidth:uh,availHeight:sh,availLeft:0,availTop:0},yh=dh.availWidth,gh=dh.availHeight,mh={style:[]};function bh(t,e){var r,n;"parentNode"in t||(r=0===e?function(){return null}:1===e?function(){return mh}:function(){return null},Object.defineProperty(t,"parentNode",{enumerable:!0,get:r}));"parentElement"in t||(n=0===e?function(){return null}:1===e?function(){return mh}:function(){return null},Object.defineProperty(t,"parentElement",{enumerable:!0,get:n}))}function xh(t){t.style=t.style||{},Object.assign(t.style,{top:"0px",left:"0px",width:yh+"px",height:gh+"px",margin:"0px",padding:"0px"})}function wh(t){"clientLeft"in t||(t.clientLeft=0,t.clientTop=0),"clientWidth"in t||(t.clientWidth=yh,t.clientHeight=gh),"getBoundingClientRect"in t||(t.getBoundingClientRect=function(){return{x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight}})}function Eh(t){"offsetLeft"in t||(t.offsetLeft=0,t.offsetTop=0),"offsetWidth"in t||(t.offsetWidth=yh,t.offsetHeight=gh)}function Ah(t){"scrollLeft"in t||(t.scrollLeft=0,t.scrollTop=0),"scrollWidth"in t||(t.scrollWidth=yh,t.scrollHeight=gh)}function Oh(t){var e=function(){return!0};t.classList=[],t.classList.add=e,t.classList.remove=e,t.classList.contains=e,t.classList.toggle=e}function Sh(){}var Th=function(t){c(r,t);var e=v(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1?arguments[1]:void 0;return i(this,r),s(h(t=e.call(this)),"className",void 0),s(h(t),"children",void 0),s(h(t),"focus",void 0),s(h(t),"blur",void 0),s(h(t),"insertBefore",void 0),s(h(t),"appendChild",void 0),s(h(t),"removeChild",void 0),s(h(t),"remove",void 0),s(h(t),"innerHTML",void 0),s(h(t),"tagName",void 0),t.className="",t.children=[],t.focus=Sh,t.blur=Sh,t.insertBefore=Sh,t.appendChild=Sh,t.removeChild=Sh,t.remove=Sh,t.innerHTML="",t.tagName=n.toUpperCase(),bh(h(t),o),xh(h(t)),Oh(h(t)),wh(h(t)),Eh(h(t)),Ah(h(t)),t}return u(r)}(lh),kh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"video")}return u(r)}(function(t){c(r,t);var e=v(r);function r(t){return i(this,r),e.call(this,t)}return u(r,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),r}(Th)),Ih={};function jh(){return Ih}var Ph=u((function t(){i(this,t);var e=jh(),r=e.createImage&&e.createImage()||{};return"tagName"in r||(r.tagName="IMG",r.__proto__=t.prototype),bh(r),Oh(r),Object.assign(r,{addEventListener:function(t,e){r["on".concat(t)]=e.bind(r)},removeEventListener:function(t){r["on".concat(t)]=null}}),r})),_h={href:"",protocol:"",host:""},Mh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"body",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e,r){}},{key:"dispatchEvent",value:function(t){}}]),r}(Th),Lh=function(t){c(r,t);var e=v(r);function r(){return i(this,r),e.call(this,"html",0)}return u(r,[{key:"addEventListener",value:function(t,e){}},{key:"removeEventListener",value:function(t,e){}},{key:"dispatchEvent",value:function(t){}}]),r}(Th),Rh={},Nh={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:_h,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return"canvas"===(t=t.toLowerCase())?my.createOffscreenCanvas(1024,128,"2d"):"img"===t?new Ph:"video"===t?new kh:new Th(t)},createElementNS:function(t,e){return this.createElement(e)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,e){return this.getElementsByTagName(e)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,e,r){Rh[t]||(Rh[t]=[]),Rh[t].push(e)},removeEventListener:function(t,e){var r=Rh[t];if(r&&r.length>0)for(var n=r.length;n--;n>0)if(r[n]===e){r.splice(n,1);break}},dispatchEvent:function(t){var e=t.type,r=Rh[e];if(r)for(var n=0;n<r.length;n++)r[n](t);t.target&&"function"==typeof t.target["on"+e]&&t.target["on"+e](t)},createEvent:function(t){return new il(t)}};Nh.documentElement=new Lh,Nh.head=new Th("head"),Nh.body=new Mh,Of("match",(function(t,e,r){return[function(e){var r=F(this),n=C(e)?void 0:Rt(e,t);return n?Ot(n,e,r):new RegExp(e)[t](Xc(r))},function(t){var n=Et(this),o=Xc(t),i=r(e,n,o);if(i.done)return i.value;if(!n.global)return zf(n,o);var a=n.unicode;n.lastIndex=0;for(var u,s=[],c=0;null!==(u=zf(n,o));){var f=Xc(u[0]);s[c]=f,""===f&&(n.lastIndex=_f(o,Fe(n.lastIndex),a)),c++}return 0===c?null:s}]}));var Ch,Dh,Fh=it("isConcatSpreadable"),Wh=X>=51||!P((function(){var t=[];return t[Fh]=!1,t.concat()[0]!==t})),zh=function(t){if(!vt(t))return!1;var e=t[Fh];return void 0!==e?!!e:gi(t)},Bh=!Wh||!_i("concat");if(ar({target:"Array",proto:!0,arity:1,forced:Bh},{concat:function(t){var e,r,n,o,i,a=z(this),u=xi(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(zh(i=-1===e?a:arguments[e]))for(o=We(i),el(s+o),r=0;r<o;r++,s++)r in i&&ji(u,s,i[r]);else el(s+1),ji(u,s++,i);return u.length=s,u}}),"undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM){var Uh=my.getSystemInfoSync();Ch=Uh.system,Uh.platform,Uh.language}else{var Gh={versions:(Dh=wf.navigator.userAgent,{trident:Dh.indexOf("Trident")>-1,presto:Dh.indexOf("Presto")>-1,webKit:Dh.indexOf("AppleWebKit")>-1,gecko:Dh.indexOf("Gecko")>-1&&-1===Dh.indexOf("KHTML"),mobile:!!Dh.match(/AppleWebKit.*Mobile.*/),ios:!!Dh.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/),android:Dh.indexOf("Android")>-1||Dh.indexOf("Linux")>-1,iPhone:Dh.indexOf("iPhone")>-1,iPad:Dh.indexOf("iPad")>-1,webApp:-1===Dh.indexOf("Safari"),weixin:Dh.indexOf("MicroMessenger")>-1,qq:" qq"===Dh.match(/\\sQQ/i)}),language:(wf.navigator.browserLanguage||wf.navigator.language).toLowerCase()};Gh.versions.android?"android":Gh.versions.trident?"IE":Gh.versions.presto?"Opera":Gh.versions.webKit?"webKit":Gh.versions.gecko?"Firefox":Gh.versions.mobile?"mobile":Gh.versions.ios?"ios":Gh.versions.iPhone?"iPhone":Gh.versions.iPad?"ipad":Gh.versions.webApp?"webApp":Gh.versions.weixin?"weixin":Gh.versions.qq&&"qq",Ch=wf.navigator.userAgent,Gh.language}Ch.toLowerCase().indexOf("android");is("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var Vh=El.fastKey,Hh=fe.set,qh=fe.getterFor;Al("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,r,n){var o=t((function(t,o){mr(t,i),Hh(t,{type:e,index:$i(null),first:void 0,last:void 0,size:0}),ht||(t.size=0),C(o)||ko(o,t[n],{that:t,AS_ENTRIES:r})})),i=o.prototype,a=qh(e),u=function(t,e,r){var n,o,i=a(t),u=s(t,e);return u?u.value=r:(i.last=u={index:o=Vh(e,!0),key:e,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=u),n&&(n.next=u),ht?i.size++:t.size++,"F"!==o&&(i.index[o]=u)),t},s=function(t,e){var r,n=a(t),o=Vh(e);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==e)return r};return Ja(i,{clear:function(){for(var t=a(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,ht?t.size=0:this.size=0},delete:function(t){var e=a(this),r=s(this,t);if(r){var n=r.next,o=r.previous;delete e.index[r.index],r.removed=!0,o&&(o.next=n),n&&(n.previous=o),e.first==r&&(e.first=n),e.last==r&&(e.last=o),ht?e.size--:this.size--}return!!r},forEach:function(t){for(var e,r=a(this),n=Ur(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Ja(i,r?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return u(this,0===t?0:t,e)}}:{add:function(t){return u(this,t=0===t?0:t,t)}}),ht&&vr(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(t,e,r){var n=e+" Iterator",o=qh(e),i=qh(n);ba(t,e,(function(t,e){Hh(this,{type:n,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?xa("keys"==e?r.key:"values"==e?r.value:[r.key,r.value],!1):(t.target=void 0,xa(void 0,!0))}),r?"entries":"values",!r,!0),yr(e)}});var Zh=N([].join),Yh=Te!=Object||!Oi("join",",");ar({target:"Array",proto:!0,forced:Yh},{join:function(t){return Zh(ke(this),void 0===t?",":t)}});var $h=Ai.map,Kh=_i("map");ar({target:"Array",proto:!0,forced:!Kh},{map:function(t){return $h(this,t,arguments.length>1?arguments[1]:void 0)}});var Qh=P((function(){Ui(1)}));ar({target:"Object",stat:!0,forced:Qh},{keys:function(t){return Ui(z(t))}});var Xh=new Map,Jh=new Map,tp=new Map,ep=function(t){c(r,t);var e=v(r);function r(){var t;return i(this,r),s(h(t=e.call(this)),"onabort",void 0),s(h(t),"onerror",void 0),s(h(t),"onload",void 0),s(h(t),"onloadstart",void 0),s(h(t),"onprogress",void 0),s(h(t),"ontimeout",void 0),s(h(t),"onloadend",void 0),s(h(t),"onreadystatechange",void 0),s(h(t),"readyState",void 0),s(h(t),"response",void 0),s(h(t),"responseText",void 0),s(h(t),"_responseType",void 0),s(h(t),"responseXML",void 0),s(h(t),"status",void 0),s(h(t),"statusText",void 0),s(h(t),"upload",void 0),s(h(t),"withCredentials",void 0),s(h(t),"timeout",void 0),s(h(t),"_url",void 0),s(h(t),"_method",void 0),t.onabort=null,t.onerror=null,t.onload=null,t.onloadstart=null,t.onprogress=null,t.ontimeout=null,t.onloadend=null,t.onreadystatechange=null,t.readyState=0,t.response=null,t.responseText=null,t._responseType="text",t.responseXML=null,t.status=0,t.statusText="",t.upload={},t.withCredentials=!1,Xh.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),t}return u(r,[{key:"responseType",set:function(t){this._responseType=t}},{key:"abort",value:function(){var t=tp.get("requestTask");t&&t.abort()}},{key:"getAllResponseHeaders",value:function(){var t=Jh.get("responseHeader");return Object.keys(t).map((function(e){return"".concat(e,": ").concat(t[e])})).join("\\n")}},{key:"getResponseHeader",value:function(t){return Jh.get("responseHeader")[t]}},{key:"open",value:function(t,e,r){this._method=t,this._url=e}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(t,e){var r=Xh.get("requestHeader");r[t]=e,Xh.set("requestHeader",r)}},{key:"addEventListener",value:function(t,e){var r=this;"function"==typeof e&&(this["on"+t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.target=t.target||r,e.call(r,t)})}},{key:"removeEventListener",value:function(t,e){this["on"+t]===e&&(this["on"+t]=null)}}]),r}(fh);s(ep,"UNSEND",void 0),s(ep,"OPENED",void 0),s(ep,"HEADERS_RECEIVED",void 0),s(ep,"LOADING",void 0),s(ep,"DONE",void 0),ep.UNSEND=0,ep.OPENED=1,ep.HEADERS_RECEIVED=2,ep.LOADING=3,ep.DONE=4;var rp="undefined"!=typeof my&&!!my&&"function"==typeof my.showToast&&!0!==my.isFRM,np="undefined"!=typeof wx&&null!==wx&&(void 0!==wx.request||void 0!==wx.miniProgram),op=(rp||np)&&!1;op||wf.XMLHttpRequest,op||wf.location;function ip(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}var ap=Ai.filter,up=_i("filter");function sp(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}function cp(t,e,r){return 2===r.length?[r[0],r[1],0]:[r[0],r[1],r[2]]}function fp(t){return t.filter?[1]:[0]}function lp(t,e){return[e]}ar({target:"Array",proto:!0,forced:!up},{filter:function(t){return ap(this,t,arguments.length>1?arguments[1]:void 0)}});var hp=vp,pp=vp;function vp(t,e,r){r=r||2;var n,o,i,a,u,s,c,f=e&&e.length,l=f?e[0]*r:t.length,h=dp(t,0,l,r,!0),p=[];if(!h||h.next===h.prev)return p;if(f&&(h=function(t,e,r,n){var o,i,a,u,s,c=[];for(o=0,i=e.length;o<i;o++)a=e[o]*n,u=o<i-1?e[o+1]*n:t.length,(s=dp(t,a,u,n,!1))===s.next&&(s.steiner=!0),c.push(Tp(s));for(c.sort(Ep),o=0;o<c.length;o++)r=Ap(c[o],r);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],o=a=t[1];for(var v=r;v<l;v+=r)(u=t[v])<n&&(n=u),(s=t[v+1])<o&&(o=s),u>i&&(i=u),s>a&&(a=s);c=0!==(c=Math.max(i-n,a-o))?32767/c:0}return gp(h,p,r,n,o,c,0),p}function dp(t,e,r,n,o){var i,a;if(o===Wp(t,e,r,n)>0)for(i=e;i<r;i+=n)a=Cp(i,t[i],t[i+1],a);else for(i=r-n;i>=e;i-=n)a=Cp(i,t[i],t[i+1],a);return a&&Pp(a,a.next)&&(Dp(a),a=a.next),a}function yp(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!Pp(n,n.next)&&0!==jp(n.prev,n,n.next))n=n.next;else{if(Dp(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function gp(t,e,r,n,o,i,a){if(t){!a&&i&&function(t,e,r,n){var o=t;do{0===o.z&&(o.z=Sp(o.x,o.y,e,r,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,r,n,o,i,a,u,s,c=1;do{for(r=t,t=null,i=null,a=0;r;){for(a++,n=r,u=0,e=0;e<c&&(u++,n=n.nextZ);e++);for(s=c;u>0||s>0&&n;)0!==u&&(0===s||!n||r.z<=n.z)?(o=r,r=r.nextZ,u--):(o=n,n=n.nextZ,s--),i?i.nextZ=o:t=o,o.prevZ=i,i=o;r=n}i.nextZ=null,c*=2}while(a>1)}(o)}(t,n,o,i);for(var u,s,c=t;t.prev!==t.next;)if(u=t.prev,s=t.next,i?bp(t,n,o,i):mp(t))e.push(u.i/r|0),e.push(t.i/r|0),e.push(s.i/r|0),Dp(t),t=s.next,c=s.next;else if((t=s)===c){a?1===a?gp(t=xp(yp(t),e,r),e,r,n,o,i,2):2===a&&wp(t,e,r,n,o,i):gp(yp(t),e,r,n,o,i,1);break}}}function mp(t){var e=t.prev,r=t,n=t.next;if(jp(e,r,n)>=0)return!1;for(var o=e.x,i=r.x,a=n.x,u=e.y,s=r.y,c=n.y,f=o<i?o<a?o:a:i<a?i:a,l=u<s?u<c?u:c:s<c?s:c,h=o>i?o>a?o:a:i>a?i:a,p=u>s?u>c?u:c:s>c?s:c,v=n.next;v!==e;){if(v.x>=f&&v.x<=h&&v.y>=l&&v.y<=p&&kp(o,u,i,s,a,c,v.x,v.y)&&jp(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function bp(t,e,r,n){var o=t.prev,i=t,a=t.next;if(jp(o,i,a)>=0)return!1;for(var u=o.x,s=i.x,c=a.x,f=o.y,l=i.y,h=a.y,p=u<s?u<c?u:c:s<c?s:c,v=f<l?f<h?f:h:l<h?l:h,d=u>s?u>c?u:c:s>c?s:c,y=f>l?f>h?f:h:l>h?l:h,g=Sp(p,v,e,r,n),m=Sp(d,y,e,r,n),b=t.prevZ,x=t.nextZ;b&&b.z>=g&&x&&x.z<=m;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&kp(u,f,s,l,c,h,b.x,b.y)&&jp(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&kp(u,f,s,l,c,h,x.x,x.y)&&jp(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b.x>=p&&b.x<=d&&b.y>=v&&b.y<=y&&b!==o&&b!==a&&kp(u,f,s,l,c,h,b.x,b.y)&&jp(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=m;){if(x.x>=p&&x.x<=d&&x.y>=v&&x.y<=y&&x!==o&&x!==a&&kp(u,f,s,l,c,h,x.x,x.y)&&jp(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function xp(t,e,r){var n=t;do{var o=n.prev,i=n.next.next;!Pp(o,i)&&_p(o,n,n.next,i)&&Rp(o,i)&&Rp(i,o)&&(e.push(o.i/r|0),e.push(n.i/r|0),e.push(i.i/r|0),Dp(n),Dp(n.next),n=t=i),n=n.next}while(n!==t);return yp(n)}function wp(t,e,r,n,o,i){var a=t;do{for(var u=a.next.next;u!==a.prev;){if(a.i!==u.i&&Ip(a,u)){var s=Np(a,u);return a=yp(a,a.next),s=yp(s,s.next),gp(a,e,r,n,o,i,0),void gp(s,e,r,n,o,i,0)}u=u.next}a=a.next}while(a!==t)}function Ep(t,e){return t.x-e.x}function Ap(t,e){var r=function(t,e){var r,n=e,o=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var u=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(u<=o&&u>a&&(a=u,r=n.x<n.next.x?n:n.next,u===o))return r}n=n.next}while(n!==e);if(!r)return null;var s,c=r,f=r.x,l=r.y,h=1/0;n=r;do{o>=n.x&&n.x>=f&&o!==n.x&&kp(i<l?o:a,i,f,l,i<l?a:o,i,n.x,n.y)&&(s=Math.abs(i-n.y)/(o-n.x),Rp(n,t)&&(s<h||s===h&&(n.x>r.x||n.x===r.x&&Op(r,n)))&&(r=n,h=s)),n=n.next}while(n!==c);return r}(t,e);if(!r)return e;var n=Np(r,t);return yp(n,n.next),yp(r,r.next)}function Op(t,e){return jp(t.prev,t,e.prev)<0&&jp(e.next,t,t.next)<0}function Sp(t,e,r,n,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Tp(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function kp(t,e,r,n,o,i,a,u){return(o-a)*(e-u)>=(t-a)*(i-u)&&(t-a)*(n-u)>=(r-a)*(e-u)&&(r-a)*(i-u)>=(o-a)*(n-u)}function Ip(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&_p(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(Rp(t,e)&&Rp(e,t)&&function(t,e){var r=t,n=!1,o=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&o<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(jp(t.prev,t,e.prev)||jp(t,e.prev,e))||Pp(t,e)&&jp(t.prev,t,t.next)>0&&jp(e.prev,e,e.next)>0)}function jp(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Pp(t,e){return t.x===e.x&&t.y===e.y}function _p(t,e,r,n){var o=Lp(jp(t,e,r)),i=Lp(jp(t,e,n)),a=Lp(jp(r,n,t)),u=Lp(jp(r,n,e));return o!==i&&a!==u||(!(0!==o||!Mp(t,r,e))||(!(0!==i||!Mp(t,n,e))||(!(0!==a||!Mp(r,t,n))||!(0!==u||!Mp(r,e,n)))))}function Mp(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Lp(t){return t>0?1:t<0?-1:0}function Rp(t,e){return jp(t.prev,t,t.next)<0?jp(t,e,t.next)>=0&&jp(t,t.prev,e)>=0:jp(t,e,t.prev)<0||jp(t,t.next,e)<0}function Np(t,e){var r=new Fp(t.i,t.x,t.y),n=new Fp(e.i,e.x,e.y),o=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function Cp(t,e,r,n){var o=new Fp(t,e,r);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function Dp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Fp(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wp(t,e,r,n){for(var o=0,i=e,a=r-n;i<r;i+=n)o+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return o}vp.deviation=function(t,e,r,n){var o=e&&e.length,i=o?e[0]*r:t.length,a=Math.abs(Wp(t,0,i,r));if(o)for(var u=0,s=e.length;u<s;u++){var c=e[u]*r,f=u<s-1?e[u+1]*r:t.length;a-=Math.abs(Wp(t,c,f,r))}var l=0;for(u=0;u<n.length;u+=3){var h=n[u]*r,p=n[u+1]*r,v=n[u+2]*r;l+=Math.abs((t[h]-t[v])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[v+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},vp.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,o=0;o<t.length;o++){for(var i=0;i<t[o].length;i++)for(var a=0;a<e;a++)r.vertices.push(t[o][i][a]);o>0&&(n+=t[o-1].length,r.holes.push(n))}return r},hp.default=pp;var zp=S,Bp=N(1..valueOf),Up="\\t\\n\\v\\f\\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\\u2028\\u2029\\ufeff",Gp=N("".replace),Vp=RegExp("^["+Up+"]+"),Hp=RegExp("(^|[^"+Up+"])["+Up+"]+$"),qp=function(t){return function(e){var r=Xc(F(e));return 1&t&&(r=Gp(r,Vp,"")),2&t&&(r=Gp(r,Hp,"$1")),r}},Zp={start:qp(1),end:qp(2),trim:qp(3)},Yp=Ze.f,$p=je.f,Kp=Gt.f,Qp=Zp.trim,Xp=S.Number,Jp=(zp.Number,Xp.prototype),tv=S.TypeError,ev=N("".slice),rv=N("".charCodeAt),nv=function(t){var e=Ft(t,"number");return"bigint"==typeof e?e:ov(e)},ov=function(t){var e,r,n,o,i,a,u,s,c=Ft(t,"number");if(jt(c))throw tv("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Qp(c),43===(e=rv(c,0))||45===e){if(88===(r=rv(c,2))||120===r)return NaN}else if(48===e){switch(rv(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=ev(c,2)).length,u=0;u<a;u++)if((s=rv(i,u))<48||s>o)return NaN;return parseInt(i,n)}return+c},iv=or("Number",!Xp(" 0o1")||!Xp("0b1")||Xp("+0x1")),av=function(t){return kt(Jp,t)&&P((function(){Bp(t)}))},uv=function(t){var e=arguments.length<1?0:Xp(nv(t));return av(this)?os(Object(e),this,uv):e};uv.prototype=Jp,iv&&(Jp.constructor=uv),ar({global:!0,constructor:!0,wrap:!0,forced:iv},{Number:uv});iv&&function(t,e){for(var r,n=ht?Yp(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),o=0;n.length>o;o++)U(e,r=n[o])&&!U(t,r)&&Kp(t,r,$p(e,r))}(zp.Number,Xp);var sv=RangeError,cv=RangeError,fv=String,lv=Math.floor,hv=N((function(t){var e=Xc(F(this)),r="",n=Le(t);if(n<0||n==1/0)throw sv("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),pv=N("".slice),vv=N(1..toFixed),dv=function(t,e,r){return 0===e?r:e%2==1?dv(t,e-1,r*t):dv(t*t,e/2,r)},yv=function(t,e,r){for(var n=-1,o=r;++n<6;)o+=e*t[n],t[n]=o%1e7,o=lv(o/1e7)},gv=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=lv(n/e),n=n%e*1e7},mv=function(t){for(var e=6,r="";--e>=0;)if(""!==r||0===e||0!==t[e]){var n=fv(t[e]);r=""===r?n:r+hv("0",7-n.length)+n}return r},bv=P((function(){return"0.000"!==vv(8e-5,3)||"1"!==vv(.9,0)||"1.25"!==vv(1.255,2)||"1000000000000000128"!==vv(0xde0b6b3a7640080,0)}))||!P((function(){vv({})}));function xv(t){return"number"==typeof t}function wv(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),r=Math.PI/180,n=t[0]*r,o=e*r;o=Math.log(Math.tan(Math.PI/4+o/2));return n=(256<<20)*(.5/Math.PI*n+.5),o=(256<<20)*(-.5/Math.PI*o+(r=.5)),[Math.floor(n),Math.floor(o)]}ar({target:"Number",proto:!0,forced:bv},{toFixed:function(t){var e,r,n,o,i=Bp(this),a=Le(t),u=[0,0,0,0,0,0],s="",c="0";if(a<0||a>20)throw cv("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return fv(i);if(i<0&&(s="-",i=-i),i>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(i*dv(2,69,1))-69)<0?i*dv(2,-e,1):i/dv(2,e,1),r*=4503599627370496,(e=52-e)>0){for(yv(u,0,r),n=a;n>=7;)yv(u,1e7,0),n-=7;for(yv(u,dv(10,n,1),0),n=e-1;n>=23;)gv(u,1<<23),n-=23;gv(u,1<<n),yv(u,1,1),gv(u,2),c=mv(u)}else yv(u,0,r),yv(u,1<<-e,0),c=mv(u)+hv("0",a);return c=a>0?s+((o=c.length)<=a?"0."+hv("0",a-o)+c:pv(c,0,o-a)+"."+pv(c,o-a)):s+c}});var Ev,Av=/"/g,Ov=N("".replace);ar({target:"String",proto:!0,forced:(Ev="sub",P((function(){var t=""[Ev](\'"\');return t!==t.toLowerCase()||t.split(\'"\').length>3})))},{sub:function(){return t="sub",e="",r="",n=Xc(F(this)),o="<"+t,""!==e&&(o+=" "+e+\'="\'+Ov(Xc(r),Av,"&quot;")+\'"\'),o+">"+n+"</"+t+">";var t,e,r,n,o}});var Sv=RegExp.prototype,Tv=Zt.PROPER,kv=RegExp.prototype.toString,Iv=P((function(){return"/a/b"!=kv.call({source:"a",flags:"b"})})),jv=Tv&&"toString"!=kv.name;(Iv||jv)&&he(RegExp.prototype,"toString",(function(){var t=Et(this);return"/"+Xc(t.source)+"/"+Xc(function(t){var e=t.flags;return void 0!==e||"flags"in Sv||U(t,"flags")||!kt(Sv,t)?e:Ot(Jc,t)}(t))}),{unsafe:!0});var Pv="undefined"!=typeof Float32Array?Float32Array:Array;function _v(){var t=new Pv(2);return Pv!=Float32Array&&(t[0]=0,t[1]=0),t}function Mv(t,e){var r=new Pv(2);return r[0]=t,r[1]=e,r}function Lv(t,e){return t[0]=e[0],t[1]=e[1],t}function Rv(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function Nv(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function Cv(t,e){var r=e[0],n=e[1],o=r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function Dv(t,e){return t[0]*e[0]+t[1]*e[1]}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var Fv,Wv=Nv,zv=(Fv=_v(),_v()),Bv=(_v(),_v()),Uv=_v(),Gv=_v();function Vv(t,e,r,n,o){return Rv(t,r,n),Cv(t,t),[o/Dv(e=Mv(-t[1],t[0]),Mv(-r[1],r[0])),e]}function Hv(t,e){return function(t,e,r){return t[0]=e,t[1]=r,t}(t,-e[1],e[0])}function qv(t,e,r){return Wv(t,e,r),Cv(t,t),t}function Zv(t,e){return t[0]===e[0]&&t[1]===e[1]}var Yv=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t),s(this,"complex",void 0),s(this,"join",void 0),s(this,"cap",void 0),s(this,"miterLimit",void 0),s(this,"thickness",void 0),s(this,"normal",void 0),s(this,"lastFlip",-1),s(this,"miter",Mv(0,0)),s(this,"started",!1),s(this,"dash",!1),s(this,"totalDistance",0),s(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return u(t,[{key:"extrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.segment_gaode2(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude_gaode2",value:function(t,e){var r=this.complex;if(t.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,o=r.startIndex,i=1;i<n;i++){var a,u,s,c=t[i-1];c.push(null!==(a=e[i-1][2])&&void 0!==a?a:0);var f=e[i-1],l=t[i];l.push(null!==(u=e[i][2])&&void 0!==u?u:0);var h=e[i],p=i<t.length-1?[].concat(y(t[i+1]),[null!==(s=e[i+1][2])&&void 0!==s?s:0]):null,v=i<e.length-1?e[i+1]:null;o+=this.simpleSegment(r,o,c,l,p,f,h,v)}if(this.dash)for(var d=0;d<r.positions.length/6;d++)r.positions[6*d+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.segment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,n=e.startIndex,o=1;o<r;o++){var i=t[o-1],a=t[o],u=o<t.length-1?t[o+1]:null;n+=this.simpleSegment(e,n,i,a,u)}if(this.dash)for(var s=0;s<e.positions.length/6;s++)e.positions[6*s+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,r,n,o,i,a,u){var s=0,c=t.indices,f=t.positions,l=t.normals,h="square"===this.cap,p="bevel"===this.join,v=wv([a[0],a[1]]),g=wv([i[0],i[1]]);qv(Bv,n,r);var m=0;if(this.dash&&(m=this.lineSegmentDistance(v,g),this.totalDistance+=m),this.normal||(this.normal=_v(),Hv(this.normal,Bv)),!this.started)if(this.started=!0,h){var b=_v(),x=_v();Rv(b,this.normal,Bv),Rv(x,this.normal,Bv),l.push(x[0],x[1],0),l.push(b[0],b[1],0),f.push(r[0],r[1],0|r[2],this.totalDistance-m,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),f.push(r[0],r[1],0|r[2],this.totalDistance-m,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,r,this.normal,this.thickness,this.totalDistance-m);if(c.push(e+0,e+1,e+2),o){Zv(n,o)&&Rv(o,n,Cv(o,Nv(o,n,r))),qv(Uv,o,n);var w=d(Vv(Gv,_v(),Bv,Uv,this.thickness),2),E=w[0],A=w[1],O=Dv(Gv,this.normal)<0?-1:1,S=p;if(!S&&"miter"===this.join)E>this.miterLimit&&(S=!0);S?(l.push(this.normal[0],this.normal[1],0),l.push(A[0],A[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c.push.apply(c,y(this.lastFlip!==-O?[e,e+2,e+3]:[e+2,e+1,e+3])),c.push(e+2,e+3,e+4),Hv(zv,Uv),Lv(this.normal,zv),l.push(this.normal[0],this.normal[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*O,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(f,l,n,A,E,this.totalDistance),c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),O=-1,Lv(this.normal,A),s+=2),this.lastFlip=O}else{if(Hv(this.normal,Bv),h){var T=_v(),k=_v();Wv(k,Bv,this.normal),Rv(T,Bv,this.normal),l.push(k[0],k[1],0),l.push(T[0],T[1],0),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),f.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(f,l,n,this.normal,this.thickness,this.totalDistance);c.push.apply(c,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),s+=2}return s}},{key:"simpleSegment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c=wv([n[0],n[1]]),f=wv([r[0],r[1]]);qv(Bv,c,f);var l=0;if(this.dash&&(l=this.lineSegmentDistance(c,f),this.totalDistance+=l),this.normal||(this.normal=_v(),Hv(this.normal,Bv)),this.started||(this.started=!0,this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-l)),a.push(e+0,e+1,e+2),o){var h=wv([o[0],o[1]]);Zv(c,h)&&Rv(h,c,Cv(h,Nv(h,c,f))),qv(Uv,h,c);var p=d(Vv(Gv,_v(),Bv,Uv,this.thickness),2),v=p[0],g=p[1];Dv(Gv,this.normal);this.extrusions(u,s,n,g,v,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),-1,Lv(this.normal,g),i+=2,this.lastFlip=-1}else Hv(this.normal,Bv),this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2;return i}},{key:"segment",value:function(t,e,r,n,o){var i=0,a=t.indices,u=t.positions,s=t.normals,c="square"===this.cap,f="bevel"===this.join,l=wv([n[0],n[1]]),h=wv([r[0],r[1]]);qv(Bv,l,h);var p=0;if(this.dash&&(p=this.lineSegmentDistance(l,h),this.totalDistance+=p),this.normal||(this.normal=_v(),Hv(this.normal,Bv)),!this.started)if(this.started=!0,c){var v=_v(),g=_v();Rv(v,this.normal,Bv),Rv(g,this.normal,Bv),s.push(g[0],g[1],0),s.push(v[0],v[1],0),u.push(r[0],r[1],0|r[2],this.totalDistance-p,-this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),u.push(r[0],r[1],0|r[2],this.totalDistance-p,this.thickness,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,r,this.normal,this.thickness,this.totalDistance-p);if(a.push(e+0,e+1,e+2),o){var m=wv([o[0],o[1]]);Zv(l,m)&&Rv(m,l,Cv(m,Nv(m,l,h))),qv(Uv,m,l);var b=d(Vv(Gv,_v(),Bv,Uv,this.thickness),2),x=b[0],w=b[1],E=Dv(Gv,this.normal)<0?-1:1,A=f;if(!A&&"miter"===this.join)x>this.miterLimit&&(A=!0);A?(s.push(this.normal[0],this.normal[1],0),s.push(w[0],w[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,a.push.apply(a,y(this.lastFlip!==-E?[e,e+2,e+3]:[e+2,e+1,e+3])),a.push(e+2,e+3,e+4),Hv(zv,Uv),Lv(this.normal,zv),s.push(this.normal[0],this.normal[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,-this.thickness*E,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,i+=3):(this.extrusions(u,s,n,w,x,this.totalDistance),a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),E=-1,Lv(this.normal,w),i+=2),this.lastFlip=E}else{if(Hv(this.normal,Bv),c){var O=_v(),S=_v();Wv(S,Bv,this.normal),Rv(O,Bv,this.normal),s.push(S[0],S[1],0),s.push(O[0],O[1],0),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),u.push(n[0],n[1],0|n[2],this.totalDistance,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,s,n,this.normal,this.thickness,this.totalDistance);a.push.apply(a,y(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),i+=2}return i}},{key:"extrusions",value:function(t,e,r,n,o,i){e.push(n[0],n[1],0),e.push(n[0],n[1],0),t.push(r[0],r[1],0|r[2],i,-o,0|r[2]),this.complex.indexes.push(this.currentIndex),t.push(r[0],r[1],0|r[2],i,o,0|r[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}}]),t}();function $v(t){var e=t.coordinates,r=t.originCoordinates,n=t.version,o=new Yv({dash:!0,join:"bevel"});if("GAODE2.x"===n){var i=e;Array.isArray(i[0][0])||(i=[e]);var a=r;Array.isArray(a[0][0])||(a=[r]);for(var u=0;u<i.length;u++){var s=i[u],c=a[u];o.extrude_gaode2(s,c)}}else{var f=e;f[0]&&!Array.isArray(f[0][0])&&(f=[e]),f.forEach((function(t){o.extrude(t)}))}var l=o.complex;return{vertices:l.positions,indices:l.indices,normals:l.normals,indexes:l.indexes,size:6}}function Kv(t){var e=function(t){if(xv(t[0]))return t;if(xv(t[0][0]))throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8");if(xv(t[0][0][0])){var e=0,r=0,n=0;return t.forEach((function(t){t.forEach((function(t){e+=t[0],r+=t[1],n++}))})),[e/n,r/n,0]}throw new Error("\u5f53\u524d\u6570\u636e\u4e0d\u652f\u6301\u6807\u6ce8")}(t.coordinates);return{vertices:[].concat(y(e),y(e),y(e),y(e)),indices:[0,1,2,2,3,0],size:e.length}}function Qv(t){var e=t.coordinates,r=hp.flatten(e),n=r.vertices,o=r.dimensions,i=r.holes;return{indices:hp(n,i,o),vertices:n,size:o}}var Xv=function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.iconMap,u={a_Color:sp,a_Position:cp,filter:fp,a_vertexId:lp,a_PickingColor:function(t){var e=t.id;return i?ip(e):[0,0,0]},a_DistanceAndIndex:function(t,e,r,n,o,i){return void 0===i?[r[3],10]:[r[3],i]},a_Total_Distance:function(t,e,r){return[r[5]]},a_Size:function(t){var e=t.size,r=void 0===e?1:e;return Array.isArray(r)?[r[0],r[1]]:[r,0]},a_Normal:function(t,e,r,n,o){return o},a_Miter:function(t,e,r){return[r[4]]},a_iconMapUV:function(t){var e=t.texture,r=a[e]||{x:0,y:0};return[r.x,r.y]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=$v(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size,p=r.indexes;o.forEach((function(t){f.push(t+c)})),l=h;var v=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=v;for(var d=function(r){var o=(null==a?void 0:a.slice(3*r,3*r+3))||[],s=i.slice(r*h,r*h+h),c=0;p&&void 0!==p[r]&&(c=p[r]),n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,s,r,o,c)))}))},g=0;g<v;g++)d(g)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Jv={pointFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a=e.shape2d,u={a_Color:sp,a_Position:cp,filter:fp,a_vertexId:lp,a_PickingColor:function(t){var e=t.id;return i?ip(e):[0,0,0]},a_Shape:function(t){var e=t.shape,r=void 0===e?2:e;return[a.indexOf(r)]},a_Extrude:function(t,e,r,n){var o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],i=n%4*3;return[o[i],o[i+1],o[i+2]]},a_Size:function(t){var e=t.size,r=void 0===e?5:e;return Array.isArray(r)?[r[0]]:[r]}},s={sizePerElement:0,elements:[]},c=0,f=[],l=3,o.forEach((function(t,e){var r=Kv(t),o=r.indices,i=r.vertices,a=r.normals,h=r.size;o.forEach((function(t){f.push(t+c)})),l=h;var p=i.length/h;s.sizePerElement=l,s.elements.push({featureIdx:e,vertices:i,normals:a,offset:c}),c+=p;for(var v=function(r){var o=[],a=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&u[n.name]&&(i=n.buffer.data).push.apply(i,y(u[n.name](t,e,a,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:s,indices:f});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),line:Xv,polygonFill:function(){var t=o(r().mark((function t(e){var n,o,i,a,u,s,c,f;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,o=e.features,i=e.enablePicking,a={a_Color:sp,a_Position:cp,filter:fp,a_vertexId:lp,a_PickingColor:function(t){var e=t.id;return i?ip(e):[0,0,0]}},u={sizePerElement:0,elements:[]},s=0,c=[],f=3,o.forEach((function(t,e){var r=Qv(t),o=r.indices,i=r.vertices,l=r.normals,h=r.size;o.forEach((function(t){c.push(t+s)})),f=h;var p=i.length/h;u.sizePerElement=f,u.elements.push({featureIdx:e,vertices:i,normals:l,offset:s}),s+=p;for(var v=function(r){var o=[],u=i.slice(r*h,r*h+h);n.forEach((function(n){var i;n&&a[n.name]&&(i=n.buffer.data).push.apply(i,y(a[n.name](t,e,u,r,o,0)))}))},d=0;d<p;d++)v(d)})),t.abrupt("return",{descriptors:n,featureLayout:u,indices:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},td=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Jv);function ed(t){return rd.apply(this,arguments)}function rd(){return(rd=o(r().mark((function t(e){var n,o;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,o=e.data,!td[n]){t.next=3;break}return t.abrupt("return",td[n](o));case 3:return t.abrupt("return",Promise.reject(new Error(\'Worker with type "\'.concat(n,\'" non-existent.\'))));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return li(ed),t.WorkerSourceMap=Jv,t.createWorker=li,t.worker=ed,t}({});\n')},function(t,e,n){"use strict";function r(t){Object(s.a)(t.source&&!t.url||!t.source&&t.url);var e=u.get(t.source||t.url);return e||(t.url&&(e=i(t.url),u.set(t.url,e)),t.source&&(e=o(t.source),u.set(t.source,e))),Object(s.a)(e),e}function i(t){return t.startsWith("http")?o(a(t)):t}function o(t){var e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function a(t){return"try {\n  importScripts('"+t+"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}"}e.a=r;var s=n(141),u=new Map},function(t,e,n){"use strict";n(410),n(807),n(413),this&&this.__awaiter,this&&this.__generator},function(t,e,n){"use strict";function r(t){return JSON.parse(i(t))}function i(t){var e=new Set;return JSON.stringify(t,function(t,n){if("object"===typeof n&&null!==n){if(e.has(n))try{return JSON.parse(JSON.stringify(n))}catch(t){return}e.add(n)}return n})}e.a=r},function(t,e,n){"use strict";function r(t,e){var n=this;if("undefined"!==typeof self){var r={process:i};u.a.onmessage=function(i,h){return c(n,void 0,void 0,function(){var n,c,p,d,v,m,g,y,_,b,x;return l(this,function(l){switch(l.label){case 0:switch(l.trys.push([0,19,,20]),n=i){case"process":return[3,1];case"process-in-batches":return[3,3];case"input-batch":return[3,16];case"input-done":return[3,17]}return[3,18];case 1:if(!t)throw new Error("Worker does not support atomic processing");return[4,t(h.input,h.options||{},r)];case 2:return c=l.sent(),u.a.postMessage("done",{result:c}),[3,18];case 3:if(!e)throw new Error("Worker does not support batched processing");o=new s.a,a=h.options||{},p=e(o,a,r),l.label=4;case 4:l.trys.push([4,9,10,15]),d=f(p),l.label=5;case 5:return[4,d.next()];case 6:if(v=l.sent(),!!v.done)return[3,8];m=v.value,u.a.postMessage("output-batch",{result:m}),l.label=7;case 7:return[3,5];case 8:return[3,15];case 9:return g=l.sent(),b={error:g},[3,15];case 10:return l.trys.push([10,,13,14]),v&&!v.done&&(x=d.return)?[4,x.call(d)]:[3,12];case 11:l.sent(),l.label=12;case 12:return[3,14];case 13:if(b)throw b.error;return[7];case 14:return[7];case 15:return u.a.postMessage("done",{}),[3,18];case 16:return o.push(h.input),[3,18];case 17:return o.close(),[3,18];case 18:return[3,20];case 19:return y=l.sent(),_=y instanceof Error?y.message:"",u.a.postMessage("error",{error:_}),[3,20];case 20:return[2]}})})}}}function i(t,e){return void 0===e&&(e={}),new Promise(function(n,r){var i=h++,o=function(t,e){if(e.id===i)switch(t){case"done":u.a.removeEventListener(o),n(e.result);break;case"error":u.a.removeEventListener(o),r(e.error)}};u.a.addEventListener(o);var a={id:i,input:t,options:e};u.a.postMessage("process",a)})}e.a=r;var o,a,s=n(414),u=n(412),c=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},l=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},f=this&&this.__asyncValues||function(t){function e(e){r[e]=t[e]&&function(r){return new Promise(function(i,o){r=t[e](r),n(i,o,r.done,r.value)})}}function n(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"===typeof __values?__values(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r)},h=0},function(t,e,n){"use strict";n(275),n(141),this&&this.__awaiter,this&&this.__generator},function(t,e,n){"use strict";function r(t){return i.apply(this,arguments)}function i(){return i=Object(o.a)(u.a.mark(function t(e){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.workerType,r=e.data,!d[n]){t.next=3;break}return t.abrupt("return",d[n](r));case 3:return t.abrupt("return",Promise.reject(new Error('Worker with type "'.concat(n,'" non-existent.'))));case 4:case"end":return t.stop()}},t)})),i.apply(this,arguments)}var o=n(7),a=n(10),s=n(8),u=n.n(s),c=n(408),l=n(811),f=n(816),h=n(817),p={pointFill:f.a,line:l.a,polygonFill:h.a},d=Object(a.a)({},p);Object(c.b)(r)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(20),i=n(7),o=n(8),a=n.n(o),s=n(188),u=n(278),c=n(192),l=function(){var t=Object(i.a)(a.a.mark(function t(e){var n,i,o,l,f,h,p,d,v;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,i=e.features,o=e.enablePicking,l=e.iconMap,f={a_Color:u.a,a_Position:u.b,filter:u.c,a_vertexId:u.d,a_PickingColor:function(t){var e=t.id;return o?Object(s.b)(e):[0,0,0]},a_DistanceAndIndex:function(t,e,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]},a_Total_Distance:function(t,e,n){return[n[5]]},a_Size:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]},a_Normal:function(t,e,n,r,i){return i},a_Miter:function(t,e,n){return[n[4]]},a_iconMapUV:function(t){var e=t.texture,n=l[e]||{x:0,y:0};return[n.x,n.y]}},h={sizePerElement:0,elements:[]},p=0,d=[],v=3,i.forEach(function(t,e){var i=Object(c.a)(t),o=i.indices,a=i.vertices,s=i.normals,u=i.size,l=i.indexes;o.forEach(function(t){d.push(t+p)}),v=u;var m=a.length/u;h.sizePerElement=v,h.elements.push({featureIdx:e,vertices:a,normals:s,offset:p}),p+=m;for(var g=0;g<m;g++)!function(i){var o=(null===s||void 0===s?void 0:s.slice(3*i,3*i+3))||[],c=a.slice(i*u,i*u+u),h=0;l&&void 0!==l[i]&&(h=l[i]),n.forEach(function(n){if(n&&f[n.name]){var a;(a=n.buffer.data).push.apply(a,Object(r.a)(f[n.name](t,e,c,i,o,h)))}})}(g)}),t.abrupt("return",{descriptors:n,featureLayout:h,indices:d});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";function r(t,e,n,r,i){h.c.add(t,n,r),h.c.normalize(t,t),e=h.c.fromValues(-t[1],t[0]);var o=h.c.fromValues(-n[1],n[0]);return[i/h.c.dot(e,o),e]}function i(t,e){return h.c.set(t,-e[1],e[0])}function o(t,e,n){return h.c.sub(t,e,n),h.c.normalize(t,t),t}function a(t,e){return t[0]===e[0]&&t[1]===e[1]}n.d(e,"a",function(){return y});var s=n(15),u=n(20),c=n(0),l=n(1),f=n(6),h=n(36),p=n(140),d=h.c.create(),v=(h.c.create(),h.c.create()),m=h.c.create(),g=h.c.create(),y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),Object(f.a)(this,"lastFlip",-1),Object(f.a)(this,"miter",h.c.fromValues(0,0)),Object(f.a)(this,"started",!1),Object(f.a)(this,"dash",!1),Object(f.a)(this,"totalDistance",0),Object(f.a)(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(l.a)(t,[{key:"extrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,c,l=t[o-1];l.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var f=e[o-1],h=t[o];h.push(null!==(s=e[o][2])&&void 0!==s?s:0);var p=e[o],d=o<t.length-1?[].concat(Object(u.a)(t[o+1]),[null!==(c=e[o+1][2])&&void 0!==c?c:0]):null,v=o<e.length-1?e[o+1]:null;i+=this.segment_gaode2(n,i,l,h,d,f,p,v)}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"simpleExtrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,c,l=t[o-1];l.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var f=e[o-1],h=t[o];h.push(null!==(s=e[o][2])&&void 0!==s?s:0);var p=e[o],d=o<t.length-1?[].concat(Object(u.a)(t[o+1]),[null!==(c=e[o+1][2])&&void 0!==c?c:0]):null,v=o<e.length-1?e[o+1]:null;i+=this.simpleSegment(n,i,l,h,d,f,p,v)}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null;r+=this.segment(e,r,o,a,s)}if(this.dash)for(var u=0;u<e.positions.length/6;u++)e.positions[6*u+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null;r+=this.simpleSegment(e,r,o,a,s)}if(this.dash)for(var u=0;u<e.positions.length/6;u++)e.positions[6*u+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"segment_gaode2",value:function(t,e,n,c,l,f,y,_){var b=0,x=t.indices,w=t.positions,E=t.normals,S="square"===this.cap,O="bevel"===this.join,T=Object(p.a)([y[0],y[1]]),A=Object(p.a)([f[0],f[1]]);o(v,c,n);var C=0;if(this.dash&&(C=this.lineSegmentDistance(T,A),this.totalDistance+=C),this.normal||(this.normal=h.c.create(),i(this.normal,v)),!this.started)if(this.started=!0,S){var k=h.c.create(),M=h.c.create();h.c.add(k,this.normal,v),h.c.add(M,this.normal,v),E.push(M[0],M[1],0),E.push(k[0],k[1],0),w.push(n[0],n[1],0|n[2],this.totalDistance-C,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),w.push(n[0],n[1],0|n[2],this.totalDistance-C,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,E,n,this.normal,this.thickness,this.totalDistance-C);if(x.push(e+0,e+1,e+2),l){a(c,l)&&h.c.add(l,c,h.c.normalize(l,h.c.subtract(l,c,n))),o(m,l,c);var P=r(g,h.c.create(),v,m,this.thickness),j=Object(s.a)(P,2),I=j[0],R=j[1],L=h.c.dot(g,this.normal)<0?-1:1,D=O;if(!D&&"miter"===this.join){I>this.miterLimit&&(D=!0)}D?(E.push(this.normal[0],this.normal[1],0),E.push(R[0],R[1],0),w.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*L,0|c[2]),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness*L,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,x.push.apply(x,Object(u.a)(this.lastFlip!==-L?[e,e+2,e+3]:[e+2,e+1,e+3])),x.push(e+2,e+3,e+4),i(d,m),h.c.copy(this.normal,d),E.push(this.normal[0],this.normal[1],0),w.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*L,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,b+=3):(this.extrusions(w,E,c,R,I,this.totalDistance),x.push.apply(x,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),L=-1,h.c.copy(this.normal,R),b+=2),this.lastFlip=L}else{if(i(this.normal,v),S){var N=h.c.create(),z=h.c.create();h.c.sub(z,v,this.normal),h.c.add(N,v,this.normal),E.push(z[0],z[1],0),E.push(N[0],N[1],0),w.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,E,c,this.normal,this.thickness,this.totalDistance);x.push.apply(x,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),b+=2}return b}},{key:"simpleSegment",value:function(t,e,n,c,l){var f=0,d=t.indices,y=t.positions,_=t.normals,b=Object(p.a)([c[0],c[1]]),x=Object(p.a)([n[0],n[1]]);o(v,b,x);var w=0;if(this.dash&&(w=this.lineSegmentDistance(b,x),this.totalDistance+=w),this.normal||(this.normal=h.c.create(),i(this.normal,v)),this.started||(this.started=!0,this.extrusions(y,_,n,this.normal,this.thickness,this.totalDistance-w)),d.push(e+0,e+1,e+2),l){var E=Object(p.a)([l[0],l[1]]);a(b,E)&&h.c.add(E,b,h.c.normalize(E,h.c.subtract(E,b,x))),o(m,E,b);var S=r(g,h.c.create(),v,m,this.thickness),O=Object(s.a)(S,2),T=O[0],A=O[1],C=h.c.dot(g,this.normal)<0?-1:1;this.extrusions(y,_,c,A,T,this.totalDistance),d.push.apply(d,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),C=-1,h.c.copy(this.normal,A),f+=2,this.lastFlip=C}else i(this.normal,v),this.extrusions(y,_,c,this.normal,this.thickness,this.totalDistance),d.push.apply(d,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),f+=2;return f}},{key:"segment",value:function(t,e,n,c,l){var f=0,y=t.indices,_=t.positions,b=t.normals,x="square"===this.cap,w="bevel"===this.join,E=Object(p.a)([c[0],c[1]]),S=Object(p.a)([n[0],n[1]]);o(v,E,S);var O=0;if(this.dash&&(O=this.lineSegmentDistance(E,S),this.totalDistance+=O),this.normal||(this.normal=h.c.create(),i(this.normal,v)),!this.started)if(this.started=!0,x){var T=h.c.create(),A=h.c.create();h.c.add(T,this.normal,v),h.c.add(A,this.normal,v),b.push(A[0],A[1],0),b.push(T[0],T[1],0),_.push(n[0],n[1],0|n[2],this.totalDistance-O,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),_.push(n[0],n[1],0|n[2],this.totalDistance-O,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(_,b,n,this.normal,this.thickness,this.totalDistance-O);if(y.push(e+0,e+1,e+2),l){var C=Object(p.a)([l[0],l[1]]);a(E,C)&&h.c.add(C,E,h.c.normalize(C,h.c.subtract(C,E,S))),o(m,C,E);var k=r(g,h.c.create(),v,m,this.thickness),M=Object(s.a)(k,2),P=M[0],j=M[1],I=h.c.dot(g,this.normal)<0?-1:1,R=w;if(!R&&"miter"===this.join){P>this.miterLimit&&(R=!0)}R?(b.push(this.normal[0],this.normal[1],0),b.push(j[0],j[1],0),_.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*I,0|c[2]),this.complex.indexes.push(this.currentIndex),_.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness*I,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,Object(u.a)(this.lastFlip!==-I?[e,e+2,e+3]:[e+2,e+1,e+3])),y.push(e+2,e+3,e+4),i(d,m),h.c.copy(this.normal,d),b.push(this.normal[0],this.normal[1],0),_.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*I,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,f+=3):(this.extrusions(_,b,c,j,P,this.totalDistance),y.push.apply(y,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),I=-1,h.c.copy(this.normal,j),f+=2),this.lastFlip=I}else{if(i(this.normal,v),x){var L=h.c.create(),D=h.c.create();h.c.sub(D,v,this.normal),h.c.add(L,v,this.normal),b.push(D[0],D[1],0),b.push(L[0],L[1],0),_.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),_.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(_,b,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),f+=2}return f}},{key:"extrusions",value:function(t,e,n,r,i,o){e.push(r[0],r[1],0),e.push(r[0],r[1],0),t.push(n[0],n[1],0|n[2],o,-i,0|n[2]),this.complex.indexes.push(this.currentIndex),t.push(n[0],n[1],0|n[2],o,i,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}}]),t}()},function(t,e,n){"use strict";function r(){var t=new A.a(4);return A.a!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function i(t){var e=new A.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n,r){var i=new A.a(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function u(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function c(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function l(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function f(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function h(t){return t[0]*t[3]-t[2]*t[1]}function p(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t}function d(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function m(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function y(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function _(t){return Math.hypot(t[0],t[1],t[2],t[3])}function b(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function x(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function w(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function E(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function S(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=A.b*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=A.b*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=A.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=A.b*Math.max(1,Math.abs(o),Math.abs(c))}function O(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function T(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=i,e.copy=o,e.identity=a,e.fromValues=s,e.set=u,e.transpose=c,e.invert=l,e.adjoint=f,e.determinant=h,e.multiply=p,e.rotate=d,e.scale=v,e.fromRotation=m,e.fromScaling=g,e.str=y,e.frob=_,e.LDU=b,e.add=x,e.subtract=w,e.exactEquals=E,e.equals=S,e.multiplyScalar=O,e.multiplyScalarAndAdd=T,n.d(e,"mul",function(){return C}),n.d(e,"sub",function(){return k});var A=n(74),C=p,k=w},function(t,e,n){"use strict";n(74)},function(t,e,n){"use strict";var r=(n(74),n(416));n(193),r.a,r.a,r.c,r.d,r.h},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(20),i=n(7),o=n(8),a=n.n(o),s=n(188),u=n(278),c=n(192),l=function(){var t=Object(i.a)(a.a.mark(function t(e){var n,i,o,l,f,h,p,d,v;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,i=e.features,o=e.enablePicking,l=e.shape2d,f={a_Color:u.a,a_Position:u.b,filter:u.c,a_vertexId:u.d,a_PickingColor:function(t){var e=t.id;return o?Object(s.b)(e):[0,0,0]},a_Shape:function(t){var e=t.shape,n=void 0===e?2:e;return[l.indexOf(n)]},a_Extrude:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]},a_Size:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}},h={sizePerElement:0,elements:[]},p=0,d=[],v=3,i.forEach(function(t,e){var i=Object(c.b)(t),o=i.indices,a=i.vertices,s=i.normals,u=i.size,l=i.indexes;o.forEach(function(t){d.push(t+p)}),v=u;var m=a.length/u;h.sizePerElement=v,h.elements.push({featureIdx:e,vertices:a,normals:s,offset:p}),p+=m;for(var g=0;g<m;g++)!function(i){var o=(null===s||void 0===s?void 0:s.slice(3*i,3*i+3))||[],c=a.slice(i*u,i*u+u),h=0;l&&void 0!==l[i]&&(h=l[i]),n.forEach(function(n){if(n&&f[n.name]){var a;(a=n.buffer.data).push.apply(a,Object(r.a)(f[n.name](t,e,c,i,o,h)))}})}(g)}),t.abrupt("return",{descriptors:n,featureLayout:h,indices:d});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(20),i=n(7),o=n(8),a=n.n(o),s=n(188),u=n(278),c=n(192),l=function(){var t=Object(i.a)(a.a.mark(function t(e){var n,i,o,l,f,h,p,d;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.descriptors,i=e.features,o=e.enablePicking,l={a_Color:u.a,a_Position:u.b,filter:u.c,a_vertexId:u.d,a_PickingColor:function(t){var e=t.id;return o?Object(s.b)(e):[0,0,0]}},f={sizePerElement:0,elements:[]},h=0,p=[],d=3,i.forEach(function(t,e){var i=Object(c.c)(t),o=i.indices,a=i.vertices,s=i.normals,u=i.size,v=i.indexes;o.forEach(function(t){p.push(t+h)}),d=u;var m=a.length/u;f.sizePerElement=d,f.elements.push({featureIdx:e,vertices:a,normals:s,offset:h}),h+=m;for(var g=0;g<m;g++)!function(i){var o=(null===s||void 0===s?void 0:s.slice(3*i,3*i+3))||[],c=a.slice(i*u,i*u+u),f=0;v&&void 0!==v[i]&&(f=v[i]),n.forEach(function(n){if(n&&l[n.name]){var a;(a=n.buffer.data).push.apply(a,Object(r.a)(l[n.name](t,e,c,i,o,f)))}})}(g)}),t.abrupt("return",{descriptors:n,featureLayout:f,indices:p});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";function r(t,e){o.set(t,e)}function i(t){return o.get(t)}e.b=r,e.a=i;var o=new Map},function(t,e,n){"use strict";function r(t,e){var n=Array.isArray(t)?t[0]:t,r=function(t,r){return f(n,t,r,null===e||void 0===e?void 0:e.requestParameters,null===e||void 0===e?void 0:e.getCustomData)},o=Object(i.a)(Object(i.a)(Object(i.a)({},l),e),{},{getTileData:r});return{data:n,dataArray:[],tilesetOptions:o,isTile:!0}}e.a=r;var i=n(10),o=n(7),a=n(8),s=n.n(a),u=n(9),c=n(417),l={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},f=function(){var t=Object(o.a)(s.a.mark(function t(e,n,r,o,a){var l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=Object(u.G)(e,n),t.abrupt("return",new Promise(function(t){if(a)a({x:r.x,y:r.y,z:r.z},function(e,n){if(e||!n)t(void 0);else{var i=new c.a(n,r.x,r.y,r.z);t(i)}});else{var e=Object(u.B)(Object(i.a)(Object(i.a)({},o),{},{url:l}),function(e,n){if(e||!n)t(void 0);else{var i=new c.a(n,r.x,r.y,r.z);t(i)}});r.xhrCancel=function(){return e.abort()}}}));case 2:case"end":return t.stop()}},t)}));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},function(t,e,n){t.exports.VectorTile=n(821),t.exports.VectorTileFeature=n(419),t.exports.VectorTileLayer=n(418)},function(t,e,n){"use strict";function r(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,n){if(3===t){var r=new o(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var o=n(418);t.exports=r},function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.x+n*(this.x-e.x)-r*(this.y-e.y),o=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},function(t,e,n){"use strict";function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return a(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return a(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return a(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return a(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return a(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return a(t,r,e);throw new Error("Expected varint not more than 10 bytes")}function o(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(n=~(-t%4294967296),r=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),u(n,r,e),c(r,e)}function u(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function c(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function l(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function f(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function _(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function E(t,e,n){for(var r="",i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s>n)break;var u,c,l;1===s?o<128&&(a=o):2===s?128===(192&(u=t[i+1]))&&(a=(31&o)<<6|63&u)<=127&&(a=null):3===s?(u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&((a=(15&o)<<12|(63&u)<<6|63&c)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&((a=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),i+=s}return r}function S(t,e,n){return A.decode(t.subarray(e,n))}function O(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}t.exports=r;var T=n(824);r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var A="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=T.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=T.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return n=r[this.pos++],e=127&n,n<128?e:(n=r[this.pos++],e|=(127&n)<<7,n<128?e:(n=r[this.pos++],e|=(127&n)<<14,n<128?e:(n=r[this.pos++],e|=(127&n)<<21,n<128?e:(n=r[this.pos],e|=(15&n)<<28,i(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&A?S(this.buf,e,t):E(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e));var n=o(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t||0)>268435455||t<0)return void s(t,this);this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=O(this.buf,t,this.pos);var n=this.pos-e;n>=128&&l(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),T.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),T.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&l(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,_,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},function(t,e,n){"use strict";function r(t,e){var n,r,a,s=e.extent,u=e.width,c=e.height,l=e.min,f=e.max,h=e.format,p=e.operation;if(void 0===h||Object(o.b)(t))n=Array.from(t),r=u,a=c;else{var d=Array.isArray(t)?t:[t];n=Object(i.a)(d,h,p)}return{_id:1,dataArray:[{_id:1,data:n,width:r,height:a,min:l,max:f,coordinates:[[s[0],s[1]],[s[2],s[3]]]}]}}e.a=r;var i=n(195),o=n(282)},function(t,e,n){"use strict";function r(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"^":return Math.pow(e,n);case"abs":return Math.abs(e);case"floor":return Math.floor(e);case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"sin":return Math.sin(e);case"cos":return Math.cos(e);case"atan":return-1===n?Math.atan(e):Math.atan2(e,n);case"min":return Math.min(e,n);case"max":return Math.max(e,n);case"log10":return Math.log(e);case"log2":return Math.log2(e);default:return console.warn("Calculate symbol err! Return default 0"),0}}function i(t,e){for(var n=e[0],r=n.width,i=n.height,a=e.map(function(t){return t.rasterData}),u=r*i,c=[],l=JSON.stringify(t),f=0;f<u;f++){var h=JSON.parse(l),p=o(h,a,f);if("number"===typeof p)c.push(p);else{var d=s(h);c.push(d)}}return c}function o(t,e,n){if(2===t.length&&"band"===t[0]&&"number"===typeof t[1])try{return e[t[1]][n]}catch(t){return console.warn("Raster Data err!"),0}t.map(function(r,i){if(Array.isArray(r)&&r.length>0)switch(r[0]){case"band":try{t[i]=e[r[1]][n]}catch(e){console.warn("Raster Data err!"),t[i]=0}break;default:o(r,e,n)}})}function a(t){var e=Object(u.a)(t,3),n=e[0],r=e[1],i=void 0===r?-1:r,o=e[2],a=void 0===o?-1:o;return void 0===n?(console.warn("Express err!"),["+",0,0]):[n.replace(/\s+/g,""),i,a]}function s(t){var e=a(t),n=e[0],i=e[1],o=e[2];return Array.isArray(i)&&(i=s(t[1])),Array.isArray(o)&&(o=s(t[2])),r(n,i,o)}e.a=i;var u=n(15)},function(t,e,n){"use strict";function r(t,e){for(var n=t[0].rasterData,r=t[1].rasterData,a=t[2].rasterData,s=[],u=(null===e||void 0===e?void 0:e.countCut)||[2,98],c=Object(o.a)(u,2),l=c[0],f=c[1],h=(null===e||void 0===e?void 0:e.RMinMax)||i(n,l,f),p=(null===e||void 0===e?void 0:e.GMinMax)||i(r,l,f),d=(null===e||void 0===e?void 0:e.BMinMax)||i(a,l,f),v=0;v<n.length;v++)s.push(Math.max(0,n[v]-h[0])),s.push(Math.max(0,r[v]-p[0])),s.push(Math.max(0,a[v]-d[0]));return{rasterData:s,rMinMax:h,gMinMax:p,bMinMax:d}}function i(t,e,n){var r=t.slice().sort(function(t,e){return t-e}),i=r.length;return[r[Math.ceil(i*e/100)],r[Math.ceil(i*n/100)]]}n.d(e,"a",function(){return a});var o=n(15),a={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:r}}},function(t,e,n){"use strict";function r(t){return!(!Array.isArray(t)||0!==t.length)||!Array.isArray(t)&&"string"!==typeof t}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r(t))throw new Error("tile server url is error");var n=(null===e||void 0===e?void 0:e.dataType)||a.k.IMAGE;n===a.k.RGB&&(n=a.k.ARRAYBUFFER);var i=function(r,i){switch(n){case a.k.IMAGE:return Object(u.c)(t,r,i,e);case a.k.CUSTOMIMAGE:case a.k.CUSTOMTERRAINRGB:return Object(s.b)(i,null===e||void 0===e?void 0:e.getCustomData);case a.k.ARRAYBUFFER:return Object(u.b)(t,r,i,(null===e||void 0===e?void 0:e.format)||u.a,null===e||void 0===e?void 0:e.operation);case a.k.CUSTOMARRAYBUFFER:case a.k.CUSTOMRGB:return Object(s.a)(i,null===e||void 0===e?void 0:e.getCustomData,(null===e||void 0===e?void 0:e.format)||u.a,null===e||void 0===e?void 0:e.operation);default:return Object(u.c)(t,r,i,e)}},l=Object(o.a)(Object(o.a)(Object(o.a)({},c),e),{},{getTileData:i});return{data:t,dataArray:[],tilesetOptions:l,isTile:!0}}e.a=i;var o=n(10),a=n(11),s=n(925),u=n(926),c={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};a.k.ARRAYBUFFER,a.k.RGB},function(t,e,n){"use strict";function r(){var t=new s.Container;return t.parent=U,t.bind(l.a.SceneID).toConstantValue("".concat(H++)),t.bind(l.a.IShaderModuleService).to(O.a).inSingletonScope(),t.bind(l.a.ILayerService).to(w.a).inSingletonScope(),t.bind(l.a.IDebugService).to(_.a).inSingletonScope(),t.bind(l.a.ISceneService).to(S.a).inSingletonScope(),t.bind(l.a.ICameraService).to(p.a).inSingletonScope(),t.bind(l.a.ICoordinateSystemService).to(y.a).inSingletonScope(),t.bind(l.a.IInteractionService).to(b.a).inSingletonScope(),t.bind(l.a.IPickingService).to(x.a).inSingletonScope(),t.bind(l.a.IControlService).to(d.a).inSingletonScope(),t.bind(l.a.IMarkerService).to(v.a).inSingletonScope(),t.bind(l.a.IIconService).to(h.a).inSingletonScope(),t.bind(l.a.IFontService).to(f.a).inSingletonScope(),t.bind(l.a.IPopupService).to(m.a).inSingletonScope(),t.bind(l.a.INormalPass).to(T.a).whenTargetNamed("clear"),t.bind(l.a.INormalPass).to(C.a).whenTargetNamed("pixelPicking"),t.bind(l.a.INormalPass).to(F.a).whenTargetNamed("render"),t.bind(l.a.INormalPass).to(B.a).whenTargetNamed("taa"),t.bind(l.a.IFactoryNormalPass).toFactory(function(t){return function(e){return t.container.getNamed(l.a.INormalPass,e)}}),t.bind(l.a.IPostProcessingPass).to(I.a).whenTargetNamed("copy"),t.bind(l.a.IPostProcessingPass).to(k.a).whenTargetNamed("bloom"),t.bind(l.a.IPostProcessingPass).to(M.a).whenTargetNamed("blurH"),t.bind(l.a.IPostProcessingPass).to(P.a).whenTargetNamed("blurV"),t.bind(l.a.IPostProcessingPass).to(D.a).whenTargetNamed("noise"),t.bind(l.a.IPostProcessingPass).to(N.a).whenTargetNamed("sepia"),t.bind(l.a.IPostProcessingPass).to(j.a).whenTargetNamed("colorHalftone"),t.bind(l.a.IPostProcessingPass).to(R.a).whenTargetNamed("hexagonalPixelate"),t.bind(l.a.IPostProcessingPass).to(L.a).whenTargetNamed("ink"),t.bind(l.a.IFactoryPostProcessingPass).toFactory(function(t){return function(e){var n=t.container.getNamed(l.a.IPostProcessingPass,e);return n.setName(e),n}}),t}function i(t){var e=new s.Container;return e.parent=t,e.bind(l.a.IStyleAttributeService).to(E.a).inSingletonScope(),e.bind(l.a.IMultiPassRenderer).to(A.a).inSingletonScope(),e.bind(l.a.IPostProcessor).to(z.a).inSingletonScope(),e}n.d(e,"d",function(){return G}),e.b=r,e.a=i;var o=n(14),a=(n.n(o),n(37)),s=(n.n(a),n(13)),u=(n.n(s),n(856)),c=n.n(u),l=n(42),f=n(858),h=n(860),p=n(861),d=n(862),v=n(863),m=n(864),g=n(865),y=n(867),_=n(869),b=n(870),x=n(872),w=n(873),E=n(875),S=n(878),O=n(882),T=n(884),A=n(886),C=n(887),k=n(888),M=n(889),P=n(890),j=n(891),I=n(892),R=n(893),L=n(894),D=n(895),N=n(896),z=n(897),F=n(898),B=n(899),U=new s.Container;U.bind(l.a.IGlobalConfigService).to(g.a).inSingletonScope(),Object(s.decorate)(Object(s.injectable)(),a.EventEmitter),U.bind(l.a.IEventEmitter).to(a.EventEmitter);var V=c()(U,!1),G=function(t){var e=V.lazyInject(t);return function(t,n,r){e.call(this,t,n),r&&(r.initializer=function(){return t[n]})}};e.c=U;var H=0},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){function i(t){return t instanceof n?t:new n(function(e){e(t)})}return new(n||(n=Promise))(function(n,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?n(t.value):i(t.value).then(a,s)}u((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},o=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(831),s=n(48),u=n(84),c=n(38),l=n(420),f=n(832),h=n(839),p=n(841),d=n(108),v=n(159),m=n(844),g=n(845),y=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!==typeof e)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=u.BindingScopeEnum.Transient;else if(e.defaultScope!==u.BindingScopeEnum.Singleton&&e.defaultScope!==u.BindingScopeEnum.Transient&&e.defaultScope!==u.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!==typeof e.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!==typeof e.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=d.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new l.MetadataReader}return t.merge=function(e,n){function r(t,e){t.traverse(function(t,n){n.forEach(function(t){e.add(t.serviceIdentifier,t.clone())})})}for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=new t,u=o([e,n],i).map(function(t){return f.getBindingDictionary(t)}),c=f.getBindingDictionary(s);return u.forEach(function(t){r(t,c)}),s},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(this,void 0,void 0,function(){var e,n,r,o,a;return i(this,function(i){switch(i.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,r=t,i.label=1;case 1:return n<r.length?(o=r[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach(function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)})},t.prototype.bind=function(t){var e=this.options.defaultScope||u.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new p.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(s.CANNOT_UNBIND+" "+v.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,c.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=f.createMockRequest(this,t,e,n);r=i.some(function(t){return t.constraint(o)})}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(m.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(t,e){return e(t)},n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,u.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,c.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,u.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,u.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,c.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach(function(t){e.applyMiddleware(t)}),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.bind.bind(t),o=i(r);return e(o,n),o}},r=function(e){return function(e){t.unbind.bind(t)(e)}},i=function(e){return function(e){return t.isBound.bind(t)(e)}},o=function(n){return function(r){var i=t.rebind.bind(t),o=i(r);return e(o,n),o}};return function(t){return{bindFunction:n(t),isboundFunction:i(),rebindFunction:o(t),unbindFunction:r()}}},t.prototype._get=function(t,e,n,r,i,o){var a=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(void 0===(a=this._middleware(u))||null===a)throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=f.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),h.resolve(n)}},t}();e.Container=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var r=n(84),i=n(108),o=function(){function t(t,e){this.id=i.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=r.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===r.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=o},function(t,e,n){"use strict";function r(t){return t._bindingDictionary}function i(t,e,n,r,i,o){var a=t?d.MULTI_INJECT_TAG:d.INJECT_TAG,s=new y.Metadata(a,n),u=new w.Target(e,r,n,s);if(void 0!==i){var c=new y.Metadata(i,o);u.metadata.push(c)}return u}function o(t,e,n,r,i){var o=u(n.container,i.serviceIdentifier),s=[];return o.length===f.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"===typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),o=u(n.container,i.serviceIdentifier)),s=e?o:o.filter(function(t){var e=new x.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)}),a(i.serviceIdentifier,s,i,n.container),s}function a(t,e,n,r){switch(e.length){case f.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var i=m.getServiceIdentifierAsString(t),o=h.NOT_REGISTERED;throw o+=m.listMetadataForTarget(i,n),o+=m.listRegisteredBindingsForServiceIdentifier(r,i,u),new Error(o);case f.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case f.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;var i=m.getServiceIdentifierAsString(t),o=h.AMBIGUOUS_MATCH+" "+i;throw o+=m.listRegisteredBindingsForServiceIdentifier(r,i,u),new Error(o)}}function s(t,e,n,r,i,a){var u,c;if(null===i){u=o(t,e,r,null,a),c=new x.Request(n,r,null,u,a);var l=new _.Plan(r,c);r.addPlan(l)}else u=o(t,e,r,i,a),c=i.addChildRequest(a.serviceIdentifier,u,a);u.forEach(function(e){var n=null;if(a.isArray())n=c.addChildRequest(e.serviceIdentifier,e,a);else{if(e.cache)return;n=c}if(e.type===p.BindingTypeEnum.Instance&&null!==e.implementationType){var i=b.getDependencies(t,e.implementationType);if(!r.container.options.skipBaseClassChecks){var o=b.getBaseClassDependencyCount(t,e.implementationType);if(i.length<o){var u=h.ARGUMENTS_LENGTH_MISMATCH(b.getFunctionName(e.implementationType));throw new Error(u)}}i.forEach(function(e){s(t,!1,e.serviceIdentifier,r,n,e)})}})}function u(t,e){var n=[],i=r(t);return i.hasKey(e)?n=i.get(e):null!==t.parent&&(n=u(t.parent,e)),n}function c(t,e,n,r,o,a,u,c){void 0===c&&(c=!1);var l=new g.Context(e),f=i(n,r,o,"",a,u);try{return s(t,c,o,l,null,f),l}catch(t){throw v.isStackOverflowExeption(t)&&l.plan&&m.circularDependencyToException(l.plan.rootRequest),t}}function l(t,e,n,r){var i=new w.Target(p.TargetTypeEnum.Variable,"",e,new y.Metadata(n,r)),o=new g.Context(t);return new x.Request(e,o,null,[],i)}Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var f=n(833),h=n(48),p=n(84),d=n(38),v=n(421),m=n(159),g=n(834),y=n(63),_=n(835),b=n(836),x=n(838),w=n(423);e.getBindingDictionary=r,e.plan=c,e.createMockRequest=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;var r={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};e.BindingCount=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var r=n(108),i=function(){function t(t){this.id=r.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var r=function(){function t(t,e){this.parentContext=t,this.rootRequest=e}return t}();e.Plan=r},function(t,e,n){"use strict";function r(t,e){return i(t,v.getFunctionName(e),e,!1)}function i(t,e,n,r){var i=t.getConstructorMetadata(n),o=i.compilerGeneratedMetadata;if(void 0===o){var u=h.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(u)}var c=i.userGeneratedMetadata,f=Object.keys(c),p=0===n.length&&f.length>0,d=f.length>n.length,v=p||d?f.length:n.length,m=a(r,e,o,c,v),g=s(t,n);return l(l([],m),g)}function o(t,e,n,r,i){var o=i[t.toString()]||[],a=c(o),s=!0!==a.unmanaged,u=r[t],l=a.inject||a.multiInject;if(u=l||u,u instanceof f.LazyServiceIdentifer&&(u=u.unwrap()),s){var d=u===Object,v=u===Function,g=void 0===u,y=d||v||g;if(!e&&y){var _=h.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(_)}var b=new m.Target(p.TargetTypeEnum.ConstructorArgument,a.targetName,u);return b.metadata=o,b}return null}function a(t,e,n,r,i){for(var a=[],s=0;s<i;s++){var u=s,c=o(u,t,e,n,r);null!==c&&a.push(c)}return a}function s(t,e){for(var n=t.getPropertiesMetadata(e),r=[],i=Object.keys(n),o=0,a=i;o<a.length;o++){var u=a[o],f=n[u],h=c(n[u]),d=h.targetName||u,v=h.inject||h.multiInject,g=new m.Target(p.TargetTypeEnum.ClassProperty,d,v);g.metadata=f,r.push(g)}var y=Object.getPrototypeOf(e.prototype).constructor;if(y!==Object){var _=s(t,y);r=l(l([],r),_)}return r}function u(t,e){var n=Object.getPrototypeOf(e.prototype).constructor;if(n!==Object){var r=v.getFunctionName(n),o=i(t,r,n,!0),a=o.map(function(t){return t.metadata.filter(function(t){return t.key===d.UNMANAGED_TAG})}),s=[].concat.apply([],a).length,c=o.length-s;return c>0?c:u(t,n)}return 0}function c(t){var e={};return t.forEach(function(t){e[t.key.toString()]=t.value}),{inject:e[d.INJECT_TAG],multiInject:e[d.MULTI_INJECT_TAG],targetName:e[d.NAME_TAG],unmanaged:e[d.UNMANAGED_TAG]}}var l=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var f=n(422),h=n(48),p=n(84),d=n(38),v=n(159);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return v.getFunctionName}});var m=n(423);e.getDependencies=r,e.getBaseClassDependencyCount=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var r=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e="",n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var r=n(108),i=function(){function t(t,e,n,i,o){this.id=r.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=i},function(t,e,n){"use strict";function r(t){return l(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var i=n(48),o=n(84),a=n(421),s=n(159),u=n(840),c=function(t,e,n){try{return n()}catch(n){throw a.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},l=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,r=e.childRequests,a=e.target&&e.target.isArray(),f=!e.parentRequest||!e.parentRequest.target||!e.target||!e.parentRequest.target.matchesArray(e.target.serviceIdentifier);if(a&&f)return r.map(function(e){return l(t)(e)});var h=null;if(!e.target.isOptional()||0!==n.length){var p=n[0],d=p.scope===o.BindingScopeEnum.Singleton,v=p.scope===o.BindingScopeEnum.Request;if(d&&p.activated)return p.cache;if(v&&null!==t&&t.has(p.id))return t.get(p.id);if(p.type===o.BindingTypeEnum.ConstantValue)h=p.cache,p.activated=!0;else if(p.type===o.BindingTypeEnum.Function)h=p.cache,p.activated=!0;else if(p.type===o.BindingTypeEnum.Constructor)h=p.implementationType;else if(p.type===o.BindingTypeEnum.DynamicValue&&null!==p.dynamicValue)h=c("toDynamicValue",p.serviceIdentifier,function(){return p.dynamicValue(e.parentContext)});else if(p.type===o.BindingTypeEnum.Factory&&null!==p.factory)h=c("toFactory",p.serviceIdentifier,function(){return p.factory(e.parentContext)});else if(p.type===o.BindingTypeEnum.Provider&&null!==p.provider)h=c("toProvider",p.serviceIdentifier,function(){return p.provider(e.parentContext)});else{if(p.type!==o.BindingTypeEnum.Instance||null===p.implementationType){var m=s.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+m)}h=u.resolveInstance(p.implementationType,r,l(t))}return"function"===typeof p.onActivation&&(h=p.onActivation(e.parentContext,h)),d&&(p.cache=h,p.activated=!0),v&&null!==t&&!t.has(p.id)&&t.set(p.id,h),h}}};e.resolve=r},function(t,e,n){"use strict";function r(t,e,n){var r=e.filter(function(t){return null!==t.target&&t.target.type===c.TargetTypeEnum.ClassProperty}),i=r.map(n);return r.forEach(function(e,n){var r="";r=e.target.name.value();var o=i[n];t[r]=o}),t}function i(t,e){return new(t.bind.apply(t,s([void 0],e)))}function o(t,e){if(Reflect.hasMetadata(l.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(l.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(u.POST_CONSTRUCT_ERROR(t.name,e.message))}}}function a(t,e,n){var a=null;if(e.length>0){a=i(t,e.filter(function(t){return null!==t.target&&t.target.type===c.TargetTypeEnum.ConstructorArgument}).map(n)),a=r(a,e,n)}else a=new t;return o(t,a),a}var s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var u=n(48),c=n(84),l=n(38);e.resolveInstance=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var r=n(48),i=n(84),o=n(842),a=n(424),s=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=i.BindingTypeEnum.Instance,this._binding.implementationType=t,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!==typeof this._binding.serviceIdentifier)throw new Error(""+r.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=i.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=i.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=i.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!==typeof t)throw new Error(r.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=i.BindingTypeEnum.Function,this._binding.scope=i.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=i.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=i.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=i.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue(function(e){return e.container.get(t)})},t}();e.BindingToSyntax=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var r=n(843),i=n(283),o=n(284),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding),this._bindingInSyntax=new r.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var r=n(84),i=n(424),o=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=r.BindingScopeEnum.Request,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=r.BindingScopeEnum.Singleton,new i.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=r.BindingScopeEnum.Transient,new i.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var r=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var r=n(48),i=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(null===e||void 0===e)throw new Error(r.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(r.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(r.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach(function(n,r){var i=n.filter(function(e){return!t(e)});i.length>0?e._map.set(r,i):e._map.delete(r)})},t.prototype.hasKey=function(t){if(null===t||void 0===t)throw new Error(r.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach(function(t,n){t.forEach(function(t){return e.add(n,t.clone())})}),e},t.prototype.traverse=function(t){this._map.forEach(function(e,n){t(n,e)})},t}();e.Lookup=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var r=n(108),i=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.ContainerModule=i;var o=function(){function t(t){this.id=r.id(),this.registry=t}return t}();e.AsyncContainerModule=o},function(t,e,n){"use strict";function r(){return function(t){if(Reflect.hasOwnMetadata(o.PARAM_TYPES,t))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(o.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(o.PARAM_TYPES,e,t),t}}Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var i=n(48),o=n(38);e.injectable=r},function(t,e,n){"use strict";function r(t,e){return function(n,r,a){var s=new i.Metadata(t,e);"number"===typeof a?o.tagParameter(n,r,a,s):o.tagProperty(n,r,s)}}Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var i=n(63),o=n(90);e.tagged=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){var s=new o.Metadata(i.NAMED_TAG,t);"number"===typeof r?a.tagParameter(e,n,r,s):a.tagProperty(e,n,s)}}Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var i=n(38),o=n(63),a=n(90);e.named=r},function(t,e,n){"use strict";function r(){return function(t,e,n){var r=new o.Metadata(i.OPTIONAL_TAG,!0);"number"===typeof n?a.tagParameter(t,e,n,r):a.tagProperty(t,e,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var i=n(38),o=n(63),a=n(90);e.optional=r},function(t,e,n){"use strict";function r(){return function(t,e,n){var r=new o.Metadata(i.UNMANAGED_TAG,!0);a.tagParameter(t,e,n,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var i=n(38),o=n(63),a=n(90);e.unmanaged=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){var s=new o.Metadata(i.MULTI_INJECT_TAG,t);"number"===typeof r?a.tagParameter(e,n,r,s):a.tagProperty(e,n,s)}}Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var i=n(38),o=n(63),a=n(90);e.multiInject=r},function(t,e,n){"use strict";function r(t){return function(e,n,r){var s=new o.Metadata(i.NAME_TAG,t);a.tagParameter(e,n,r,s)}}Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var i=n(38),o=n(63),a=n(90);e.targetName=r},function(t,e,n){"use strict";function r(){return function(t,e,n){var r=new a.Metadata(o.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(o.POST_CONSTRUCT,t.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(o.POST_CONSTRUCT,r,t.constructor)}}Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var i=n(48),o=n(38),a=n(63);e.postConstruct=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0;var r=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach(function(n){return t.bind(n).toService(e)})}}};e.multiBindToService=r},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=!0),{lazyInject:i.makePropertyInjectDecorator(t,e),lazyInjectNamed:i.makePropertyInjectNamedDecorator(t,e),lazyInjectTagged:i.makePropertyInjectTaggedDecorator(t,e),lazyMultiInject:i.makePropertyMultiInjectDecorator(t,e)}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(857);e.default=r},function(t,e,n){"use strict";function r(t,e,n,r){function i(){return r&&!Reflect.hasMetadata(u,this,e)&&Reflect.defineMetadata(u,n(),this,e),Reflect.hasMetadata(u,this,e)?Reflect.getMetadata(u,this,e):n()}function o(t){Reflect.defineMetadata(u,t,this,e)}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:o})}function i(t,e){return function(n){return function(i,o){r(i,o,function(){return t.get(n)},e)}}}function o(t,e){return function(n,i){return function(o,a){r(o,a,function(){return t.getNamed(n,i)},e)}}}function a(t,e){return function(n,i,o){return function(a,s){r(a,s,function(){return t.getTagged(n,i,o)},e)}}}function s(t,e){return function(n){return function(i,o){r(i,o,function(){return t.getAll(n)},e)}}}Object.defineProperty(e,"__esModule",{value:!0});var u=Symbol.for("INJECTION");e.makePropertyInjectDecorator=i,e.makePropertyInjectNamedDecorator=o,e.makePropertyInjectTaggedDecorator=a,e.makePropertyMultiInjectDecorator=s},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=s();return function(){var n,r=Object(y.a)(t);if(e){var i=Object(y.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(g.a)(this,n)}}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function u(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="black",t.textBaseline="middle"}function c(t,e){for(var n=0;n<t.length;n++)e.data[4*n+3]=t[n]}n.d(e,"a",function(){return k});var l,f,h=n(10),p=n(0),d=n(1),v=n(12),m=n(3),g=n(4),y=n(2),_=n(6),b=n(9),x=n(37),w=(n.n(x),n(13)),E=(n.n(w),n(859)),S=n.n(E),O=n(14),T=(n.n(O),n(426)),A=function(){for(var t=[],e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),C=3,k=(l=Object(w.injectable)())(f=function(t){function e(){var t;Object(p.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(_.a)(Object(v.a)(t),"fontAtlas",void 0),Object(_.a)(Object(v.a)(t),"iconFontMap",void 0),Object(_.a)(Object(v.a)(t),"iconFontGlyphs",{}),Object(_.a)(Object(v.a)(t),"fontOptions",void 0),Object(_.a)(Object(v.a)(t),"key",void 0),Object(_.a)(Object(v.a)(t),"cache",new b.d(C)),t}Object(m.a)(e,t);var n=a(e);return Object(d.a)(e,[{key:"scale",get:function(){return 1}},{key:"canvas",get:function(){var t=this.cache.get(this.key);return t&&t.data}},{key:"mapping",get:function(){var t=this.cache.get(this.key);return t&&t.mapping||{}}},{key:"getCanvasByKey",value:function(t){var e=this.cache.get(t);return e&&e.data}},{key:"getMappingByKey",value:function(t){var e=this.cache.get(t);return e&&e.mapping||{}}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:"sans-serif",fontWeight:"normal",characterSet:A,fontSize:24,buffer:3,sdf:!0,cutoff:.25,radius:8,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(t){var e=this;t.forEach(function(t){e.iconFontGlyphs[t.name]=t.unicode})}},{key:"addIconFont",value:function(t,e){this.iconFontMap.set(t,e)}},{key:"getIconFontKey",value:function(t){return this.iconFontMap.get(t)||t}},{key:"getGlyph",value:function(t){return this.iconFontGlyphs[t]?String.fromCharCode(parseInt(this.iconFontGlyphs[t],16)):""}},{key:"setFontOptions",value:function(t){this.fontOptions=Object(h.a)(Object(h.a)({},this.fontOptions),t),this.key=this.getKey();var e=this.getNewChars(this.key,this.fontOptions.characterSet),n=this.cache.get(this.key);if(!n||0!==e.length){var r=this.generateFontAtlas(this.key,e,n);this.fontAtlas=r,this.cache.set(this.key,r)}}},{key:"addFontFace",value:function(t,e){var n=this,r=document.createElement("style");r.type="text/css",r.innerText="\n        @font-face{\n            font-family: '".concat(t,"';\n            src: url('").concat(e,"') format('woff2'),\n            url('").concat(e,"') format('woff'),\n            url('").concat(e,"') format('truetype');\n        }"),r.onload=function(){if(document.fonts)try{document.fonts.load("24px ".concat(t),"L7text"),document.fonts.ready.then(function(){n.emit("fontloaded",{fontFamily:t})})}catch(t){console.warn("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 document.fonts !"),console.warn("\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301 iconfont !"),console.warn(t)}},document.getElementsByTagName("head")[0].appendChild(r)}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(t,e,n){var i=this.fontOptions,o=i.fontFamily,a=i.fontWeight,s=i.fontSize,l=i.buffer,f=i.sdf,p=i.radius,d=i.cutoff,v=i.iconfont,m=n&&n.data;m||(m=b.a.document.createElement("canvas"),m.width=1024);var g=m.getContext("2d",{willReadFrequently:!0});u(g,o,s,a);var y=Object(T.b)(Object(h.a)({getFontWidth:function(t){return g.measureText(t).width},fontHeight:1*s,buffer:l,characterSet:e,maxCanvasWidth:1024},n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset})),_=y.mapping,x=y.canvasHeight,w=y.xOffset,E=y.yOffset,O=g.getImageData(0,0,m.width,m.height);if(m.height=x,g.putImageData(O,0,0),u(g,o,s,a),f){var A,C=new S.a(s,l,p,d,o,a),k=g.getImageData(0,0,C.size,C.size),M=r(e);try{for(M.s();!(A=M.n()).done;){var P=A.value;if(v){var j=String.fromCharCode(parseInt(P.replace("&#x","").replace(";",""),16));c(C.draw(j),k)}else c(C.draw(P),k);g.putImageData(k,_[P].x,_[P].y)}}catch(t){M.e(t)}finally{M.f()}}else{var I,R=r(e);try{for(R.s();!(I=R.n()).done;){var L=I.value;g.fillText(L,_[L].x,_[L].y+1*s)}}catch(t){R.e(t)}finally{R.f()}}return{xOffset:w,yOffset:E,mapping:_,data:m,width:m.width,height:m.height}}},{key:"getKey",value:function(){var t=this.fontOptions,e=t.fontFamily,n=t.fontWeight;return"".concat(e,"_").concat(n)}},{key:"getNewChars",value:function(t,e){var n=this.cache.get(t);if(!n)return e;var r=[],i=n.mapping,o=new Set(Object.keys(i));return new Set(e).forEach(function(t){o.has(t)||r.push(t)}),r}}]),e}(x.EventEmitter))||f},function(t,e,n){"use strict";function r(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer,s=a+2*this.buffer,u="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;u?this.canvas=my.createOffscreenCanvas(a,a,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=u?Math.round(a/2*1):Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,o,a){o.fill(u,0,e*n),a.fill(0,0,e*n);for(var s=(e-r)/2,c=0;c<i;c++)for(var l=0;l<r;l++){var f=(c+s)*e+l+s,h=t.data[4*(c*r+l)+3]/255;if(1===h)o[f]=0,a[f]=u;else if(0===h)o[f]=u,a[f]=0;else{var p=Math.max(0,.5-h),d=Math.max(0,h-.5);o[f]=p*p,a[f]=d*d}}}function o(t,e,n,r,i,o,a){for(var s=0;s<e*n;s++){var u=Math.sqrt(r[s])-Math.sqrt(i[s]);t[s]=Math.round(255-255*(u/o+a))}}function a(t,e,n,r,i,o){for(var a=0;a<e;a++)s(t,a,e,n,r,i,o);for(var u=0;u<n;u++)s(t,u*e,1,e,r,i,o)}function s(t,e,n,r,i,o,a){var s,c,l,f;for(o[0]=0,a[0]=-u,a[1]=u,s=0;s<r;s++)i[s]=t[e+s*n];for(s=1,c=0,l=0;s<r;s++){do{f=o[c],l=(i[s]-i[f]+s*s-f*f)/(s-f)/2}while(l<=a[c]&&--c>-1);c++,o[c]=s,a[c]=l,a[c+1]=u}for(s=0,c=0;s<r;s++){for(;a[c+1]<s;)c++;f=o[c],t[e+s*n]=i[f]+(s-f)*(s-f)}}t.exports=r,t.exports.default=r;var u=1e20;r.prototype._draw=function(t,e){var n,r,s,u,c,l,f,h,p=this.ctx.measureText(t),d=p.width,v=2*this.buffer;e&&this.useMetrics?(c=Math.floor(p.actualBoundingBoxAscent),h=this.buffer+Math.ceil(p.actualBoundingBoxAscent),l=this.buffer,f=this.buffer,r=Math.min(this.size,Math.ceil(p.actualBoundingBoxRight-p.actualBoundingBoxLeft)),u=Math.min(this.size-l,Math.ceil(p.actualBoundingBoxAscent+p.actualBoundingBoxDescent)),n=r+v,s=u+v,this.ctx.textBaseline="alphabetic"):(n=r=this.size,s=u=this.size,c=19*this.fontSize/24,l=f=0,h=this.middle,this.ctx.textBaseline="middle");var m;r&&u&&(this.ctx.clearRect(f,l,r,u),this.ctx.fillText(t,this.buffer,h),m=this.ctx.getImageData(f,l,r,u));var g=new Uint8ClampedArray(n*s);return i(m,n,s,r,u,this.gridOuter,this.gridInner),a(this.gridOuter,n,s,this.f,this.v,this.z),a(this.gridInner,n,s,this.f,this.v,this.z),o(g,n,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:g,metrics:{width:r,height:u,sdfWidth:n,sdfHeight:s,top:c,left:0,advance:d}}},r.prototype.draw=function(t){return this._draw(t,!1).data},r.prototype.drawWithMetrics=function(t){return this._draw(t,!0)}},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return w});var o,a,s=n(7),u=n(0),c=n(1),l=n(12),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(9),y=n(37),_=(n.n(y),n(13)),b=(n.n(_),n(14)),x=(n.n(b),n(426)),w=(o=Object(_.injectable)())(a=function(t){function e(){var t;Object(u.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(d.a)(Object(l.a)(t),"canvasHeight",128),Object(d.a)(Object(l.a)(t),"texture",void 0),Object(d.a)(Object(l.a)(t),"canvas",void 0),Object(d.a)(Object(l.a)(t),"iconData",void 0),Object(d.a)(Object(l.a)(t),"iconMap",void 0),Object(d.a)(Object(l.a)(t),"ctx",void 0),Object(d.a)(Object(l.a)(t),"loadingImageCount",0),t}Object(f.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"isLoading",value:function(){return 0===this.loadingImageCount}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=g.a.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(){function t(t,n){return e.apply(this,arguments)}var e=Object(s.a)(m.a.mark(function t(e,n){var r,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Image,this.loadingImageCount++,this.hasImage(e)?console.warn("Image Id already exists"):this.iconData.push({id:e,size:64}),this.updateIconMap(),t.next=6,this.loadImage(n);case 6:r=t.sent,i=this.iconData.find(function(t){return t.id===e}),i&&(i.image=r,i.width=r.width,i.height=r.height),this.update();case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"addImageMini",value:function(t,e,n){var r=this,i=n.getSceneConfig().canvas,o=i.createImage();if(this.loadingImageCount++,this.hasImage(t))throw new Error("Image Id already exists");this.iconData.push({id:t,size:64}),this.updateIconMap(),this.loadImageMini(e,i).then(function(e){o=e;var n=r.iconData.find(function(e){return e.id===t});n&&(n.image=o,n.width=o.width,n.height=o.height),r.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(t){return this.iconMap.hasOwnProperty(t)}},{key:"removeImage",value:function(t){this.hasImage(t)&&(this.iconData=this.iconData.filter(function(e){return e.id!==t}),delete this.iconMap[t],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(t){return new Promise(function(e,n){if(t instanceof HTMLImageElement)return void e(t);var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e(r)},r.onerror=function(){n(new Error("Could not load image at "+t))},r.src=t instanceof File?URL.createObjectURL(t):t})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),0===--this.loadingImageCount&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var t=this;this.canvas.width=1024,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(e){var n=t.iconMap[e],r=n.x,i=n.y,o=n.image,a=n.width,s=void 0===a?64:a,u=n.height,c=void 0===u?64:u,l=Math.max(s,c),f=l/64,h=c/f,p=s/f;o&&t.ctx.drawImage(o,r+(64-p)/2,i+(64-h)/2,p,h)})}},{key:"updateIconMap",value:function(){var t=Object(x.a)(this.iconData,3,1024),e=t.mapping,n=t.canvasHeight;this.iconMap=e,this.canvasHeight=n}},{key:"loadImageMini",value:function(t,e){return new Promise(function(n,r){var i=e.createImage();i.crossOrigin="anonymous",i.onload=function(){n(i)},i.onerror=function(){r(new Error("Could not load image at "+t))},i.src=t})}}]),e}(y.EventEmitter))||a},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o=n(15),a=n(0),s=n(1),u=n(6),c=n(36),l=n(13),f=(n.n(l),n(14)),h=(n.n(f),(r=Object(l.injectable)())(i=function(){function t(){Object(a.a)(this,t),Object(u.a)(this,"viewport",void 0),Object(u.a)(this,"overridedViewProjectionMatrix",void 0),Object(u.a)(this,"jitteredViewProjectionMatrix",void 0),Object(u.a)(this,"jitteredProjectionMatrix",void 0),Object(u.a)(this,"viewMatrixInverse",void 0),Object(u.a)(this,"cameraPosition",void 0)}return Object(s.a)(t,[{key:"init",value:function(){}},{key:"update",value:function(t){this.viewport=t,this.viewMatrixInverse=c.b.create(),c.b.invert(this.viewMatrixInverse,t.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var t=this.viewport.getCenter(),e=Object(o.a)(t,2);return[e[0],e[1]]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}},{key:"setViewProjectionMatrix",value:function(t){this.overridedViewProjectionMatrix=t}},{key:"jitterProjectionMatrix",value:function(t,e){var n=c.b.fromTranslation(c.b.create(),[t,e,0]);this.jitteredProjectionMatrix=c.b.multiply(c.b.create(),n,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=c.b.multiply(c.b.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),t}())||i)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",function(){return _});var a,s,u=n(15),c=n(20),l=n(0),f=n(1),h=n(6),p=n(9),d=n(13),v=(n.n(d),n(14)),m=(n.n(v),n(42)),g=n(427),y={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"},_=(a=Object(d.injectable)())(s=function(){function t(){Object(l.a)(this,t),Object(h.a)(this,"container",void 0),Object(h.a)(this,"controlCorners",void 0),Object(h.a)(this,"controlContainer",void 0),Object(h.a)(this,"scene",void 0),Object(h.a)(this,"mapsService",void 0),Object(h.a)(this,"controls",[]),Object(h.a)(this,"unAddControls",[])}return Object(f.a)(t,[{key:"init",value:function(t,e){this.container=t.container,this.scene=e,this.mapsService=e.get(m.a.IMapService),this.initControlPos()}},{key:"addControl",value:function(t,e){e.get(m.a.IMapService).map?(t.addTo(this.scene),this.controls.push(t)):this.unAddControls.push(t)}},{key:"getControlByName",value:function(t){return this.controls.find(function(e){return e.controlOption.name===t})}},{key:"removeControl",value:function(t){var e=this.controls.indexOf(t);return e>-1&&this.controls.splice(e,1),t.remove(),this}},{key:"addControls",value:function(){var t=this;this.unAddControls.forEach(function(e){e.addTo(t.scene),t.controls.push(e)}),this.unAddControls=[]}},{key:"destroy",value:function(){var t,e=r(this.controls);try{for(e.s();!(t=e.n()).done;){t.value.remove()}}catch(t){e.e(t)}finally{e.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map(function(t){return r+t}).join(" ");n[t.filter(function(t){return!["row","column"].includes(t)}).join("")]=p.b.create("div",e,i)}function e(t){var e=t.replace(/^(top|bottom|left|right|center)/,"$1-").split("-");return[].concat(Object(c.a)(e),[y[t]])}var n=this.controlCorners={},r="l7-",i=this.controlContainer=p.b.create("div",r+"control-container",this.container);Object.values(g.a).forEach(function(n){t(e(n))}),this.checkCornerOverlap()}},{key:"clearControlPos",value:function(){for(var t in this.controlCorners)this.controlCorners[t]&&p.b.remove(this.controlCorners[t]);this.controlContainer&&p.b.remove(this.controlContainer)}},{key:"checkCornerOverlap",value:function(){var t=this,e=window.MutationObserver;if(e)for(var n=0,r=Object.keys(this.controlCorners);n<r.length;n++)!function(){var i=r[n],o=i.match(/^(top|bottom)(left|right)$/);if(o){var a=Object(u.a)(o,3),s=a[1],c=a[2],l=t.controlCorners["".concat(s).concat(c)];new e(function(t){var e=Object(u.a)(t,1),n=e[0].target;l&&(l.style[s]=n.clientHeight+"px")}).observe(t.controlCorners["".concat(c).concat(s)],{childList:!0,attributes:!0})}}()}}]),t}())||s},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,i,o=n(0),a=n(1),s=n(6),u=n(13),c=(n.n(u),n(14)),l=(n.n(c),n(42)),f=(r=Object(u.injectable)())(i=function(){function t(){Object(o.a)(this,t),Object(s.a)(this,"container",void 0),Object(s.a)(this,"scene",void 0),Object(s.a)(this,"mapsService",void 0),Object(s.a)(this,"markers",[]),Object(s.a)(this,"markerLayers",[]),Object(s.a)(this,"unAddMarkers",[]),Object(s.a)(this,"unAddMarkerLayers",[])}return Object(a.a)(t,[{key:"addMarkerLayer",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(t),t.addTo(this.scene)):this.unAddMarkerLayers.push(t)}},{key:"removeMarkerLayer",value:function(t){t.destroy(),this.markerLayers.indexOf(t);var e=this.markerLayers.indexOf(t);e>-1&&this.markerLayers.splice(e,1)}},{key:"addMarker",value:function(t){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(t),t.addTo(this.scene)):this.unAddMarkers.push(t)}},{key:"addMarkers",value:function(){var t=this;this.unAddMarkers.forEach(function(e){e.addTo(t.scene),t.markers.push(e)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var t=this;this.unAddMarkerLayers.forEach(function(e){t.markerLayers.push(e),e.addTo(t.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(t){t.remove(),this.markers.indexOf(t);var e=this.markers.indexOf(t);e>-1&&this.markers.splice(e,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(l.a.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(t){t.remove()}),this.markers=[],this.markerLayers.forEach(function(t){t.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(t){t.destroy()}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o=n(20),a=n(0),s=n(1),u=n(6),c=n(13),l=(n.n(c),n(14)),f=(n.n(l),n(42)),h=(r=Object(c.injectable)())(i=function(){function t(){Object(a.a)(this,t),Object(u.a)(this,"scene",void 0),Object(u.a)(this,"mapsService",void 0),Object(u.a)(this,"popups",[]),Object(u.a)(this,"unAddPopups",[])}return Object(s.a)(t,[{key:"isMarkerReady",get:function(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}},{key:"removePopup",value:function(t){null!==t&&void 0!==t&&t.isOpen()&&t.remove();var e=this.popups.indexOf(t);e>-1&&this.popups.splice(e,1);var n=this.unAddPopups.indexOf(t);n>-1&&this.unAddPopups.splice(n,1)}},{key:"destroy",value:function(){this.popups.forEach(function(t){return t.remove()})}},{key:"addPopup",value:function(t){var e=this;t&&t.getOptions().autoClose&&[].concat(Object(o.a)(this.popups),Object(o.a)(this.unAddPopups)).forEach(function(t){t.getOptions().autoClose&&e.removePopup(t)}),this.isMarkerReady?(t.addTo(this.scene),this.popups.push(t)):this.unAddPopups.push(t),t.on("close",function(){e.removePopup(t)})}},{key:"initPopup",value:function(){var t=this;this.unAddPopups.length&&this.unAddPopups.forEach(function(e){t.addPopup(e),t.unAddPopups=[]})}},{key:"init",value:function(t){this.scene=t,this.mapsService=t.get(f.a.IMapService)}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r,i,o=n(10),a=n(0),s=n(1),u=n(6),c=n(13),l=(n.n(c),n(19)),f=(n.n(l),n(14)),h=(n.n(f),n(285)),p=n(866),d={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,isMini:!1,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},v={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:h.c.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},m=(r=Object(c.injectable)())(i=function(){function t(){Object(a.a)(this,t),Object(u.a)(this,"sceneConfigCache",{}),Object(u.a)(this,"layerConfigCache",{}),Object(u.a)(this,"layerAttributeConfigCache",{})}return Object(s.a)(t,[{key:"getSceneConfig",value:function(t){return this.sceneConfigCache[t]}},{key:"getSceneWarninfo",value:function(t){return p.a[t]}},{key:"setSceneConfig",value:function(t,e){this.sceneConfigCache[t]=Object(o.a)(Object(o.a)({},d),e)}},{key:"getLayerConfig",value:function(t){return this.layerConfigCache[t]}},{key:"setLayerConfig",value:function(t,e,n){this.layerConfigCache[e]=Object(o.a)({},Object(l.merge)({},this.sceneConfigCache[t],v,n))}},{key:"getAttributeConfig",value:function(t){return this.layerAttributeConfigCache[t]}},{key:"setAttributeConfig",value:function(t,e){this.layerAttributeConfigCache[t]=Object(o.a)(Object(o.a)({},this.layerAttributeConfigCache[t]),e)}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),t}())||i},function(t,e,n){"use strict";var r={MapToken:"\u60a8\u6b63\u5728\u4f7f\u7528 Demo \u6d4b\u8bd5 Token, \u751f\u4ea7\u73af\u5883\u52a1\u5fc5\u81ea\u884c\u6ce8\u518c Token \u786e\u4fdd\u670d\u52a1\u7a33\u5b9a",SDK:"\u8bf7\u786e\u8ba4\u5f15\u5165\u4e86mapbox-gl api\u4e14\u5728L7\u4e4b\u524d\u5f15\u5165"};e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return b});var r,i,o,a,s,u=n(39),c=n(0),l=n(1),f=n(6),h=n(40),p=(n(41),n(36)),d=n(13),v=(n.n(d),n(14)),m=(n.n(v),n(42)),g=n(868),y=n(428),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],b=(r=Object(d.injectable)(),i=Object(d.inject)(m.a.ICameraService),r((a=function(){function t(){Object(c.a)(this,t),Object(f.a)(this,"needRefresh",!0),Object(u.a)(this,"cameraService",s,this),Object(f.a)(this,"coordinateSystem",void 0),Object(f.a)(this,"viewportCenter",void 0),Object(f.a)(this,"viewportCenterProjection",void 0),Object(f.a)(this,"pixelsPerDegree",void 0),Object(f.a)(this,"pixelsPerDegree2",void 0),Object(f.a)(this,"pixelsPerMeter",void 0)}return Object(l.a)(t,[{key:"refresh",value:function(t){var e=this.cameraService.getZoom(),n=this.cameraService.getZoomScale(),r=t||this.cameraService.getCenter(),i=Object(g.a)({latitude:r[1],zoom:e}),o=i.pixelsPerMeter,a=i.pixelsPerDegree;this.viewportCenter=r,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=o,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===y.a.LNGLAT||this.coordinateSystem===y.a.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===y.a.LNGLAT_OFFSET?this.calculateLnglatOffset(r,e):this.coordinateSystem===y.a.P20_OFFSET&&this.calculateLnglatOffset(r,e,n,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(t){this.coordinateSystem=t}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(t,e,n,r){var i=Object(g.a)({latitude:t[1],zoom:e,scale:n,flipY:r,highPrecision:!0}),o=i.pixelsPerMeter,a=i.pixelsPerDegree,s=i.pixelsPerDegree2,u=this.cameraService.getViewMatrix(),c=this.cameraService.getProjectionMatrix(),l=p.b.multiply([],c,u),f=this.cameraService.projectFlat([Math.fround(t[0]),Math.fround(t[1])],Math.pow(2,e));this.viewportCenterProjection=p.e.transformMat4([],[f[0],f[1],0,1],l),u=this.cameraService.getViewMatrixUncentered()||u,l=p.b.multiply([],c,u),l=p.b.multiply([],l,_),this.cameraService.setViewProjectionMatrix(l),this.pixelsPerMeter=o,this.pixelsPerDegree=a,this.pixelsPerDegree2=s}}]),t}(),s=Object(h.a)(a.prototype,"cameraService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=a))||o)},function(t,e,n){"use strict";function r(t){var e=t.latitude,n=void 0===e?0:e,r=t.zoom,s=void 0===r?0:r,u=t.scale,c=t.highPrecision,l=void 0!==c&&c,f=t.flipY,h=void 0!==f&&f;u=void 0!==u?u:Math.pow(2,s);var p={},d=o*u,v=Math.cos(n*i),m=d/360,g=m/v,y=d/a/v;if(p.pixelsPerMeter=[y,-y,y],p.metersPerPixel=[1/y,-1/y,1/y],p.pixelsPerDegree=[m,-g,y],p.degreesPerPixel=[1/m,-1/g,1/y],l){var _=i*Math.tan(n*i)/v,b=m*_/2,x=d/a*_,w=x/g*y;p.pixelsPerDegree2=[0,-b,x],p.pixelsPerMeter2=[w,0,w],h&&(p.pixelsPerDegree2[1]=-p.pixelsPerDegree2[1],p.pixelsPerMeter2[1]=-p.pixelsPerMeter2[1])}return h&&(p.pixelsPerMeter[1]=-p.pixelsPerMeter[1],p.metersPerPixel[1]=-p.metersPerPixel[1],p.pixelsPerDegree[1]=-p.pixelsPerDegree[1],p.degreesPerPixel[1]=-p.degreesPerPixel[1]),p}e.a=r;var i=Math.PI/180,o=512,a=4003e4},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return _});var o,a,s=n(83),u=n(10),c=n(0),l=n(1),f=n(12),h=n(3),p=n(4),d=n(2),v=n(6),m=n(9),g=n(37),y=(n.n(g),n(13)),_=(n.n(y),(o=Object(y.injectable)())(a=function(t){function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(v.a)(Object(f.a)(t),"renderMap",new Map),Object(v.a)(Object(f.a)(t),"enable",!1),Object(v.a)(Object(f.a)(t),"renderEnable",!1),Object(v.a)(Object(f.a)(t),"cacheLogs",{}),t}Object(h.a)(e,t);var n=r(e);return Object(l.a)(e,[{key:"setEnable",value:function(t){this.enable=!!t}},{key:"log",value:function(t,e){var n=this;if(this.enable){var r=t.split("."),i=null;r.forEach(function(t,o){null!==i?(i[t]||(i[t]={}),o!==r.length-1&&(i=i[t])):(n.cacheLogs[t]||(n.cacheLogs[t]={}),o!==r.length-1&&(i=n.cacheLogs[t])),o===r.length-1&&(i[t]=Object(u.a)(Object(u.a)({time:Date.now()},i[t]),e))})}}},{key:"getLog",value:function(t){var e=this;switch(Object(s.a)(t)){case"string":return this.cacheLogs[t];case"object":return t.map(function(t){return e.cacheLogs[t]}).filter(function(t){return void 0!==t});case"undefined":return this.cacheLogs}}},{key:"removeLog",value:function(t){delete this.cacheLogs[t]}},{key:"generateRenderUid",value:function(){return this.renderEnable?Object(m.I)():""}},{key:"renderDebug",value:function(t){this.renderEnable=t}},{key:"renderStart",value:function(t){if(this.renderEnable&&this.enable){var e=this.renderMap.get(t)||{};this.renderMap.set(t,Object(u.a)(Object(u.a)({},e),{},{renderUid:t,renderStart:Date.now()}))}}},{key:"renderEnd",value:function(t){if(this.renderEnable&&this.enable){var e=this.renderMap.get(t);if(e){var n=e.renderStart,r=Date.now();this.emit("renderEnd",Object(u.a)(Object(u.a)({},e),{},{renderEnd:r,renderDuration:r-n})),this.renderMap.delete(t)}}}},{key:"destroy",value:function(){this.cacheLogs=null,this.renderMap.clear()}}]),e}(g.EventEmitter))||a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return k});var o,a,s,u,c,l=n(39),f=n(0),h=n(1),p=n(12),d=n(3),v=n(4),m=n(2),g=n(6),y=n(40),_=(n(41),n(9)),b=n(37),x=n.n(b),w=n(13),E=(n.n(w),n(871)),S=n.n(E),O=n(14),T=(n.n(O),n(42)),A=n(160),C={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},k=(o=Object(w.injectable)(),a=Object(w.inject)(T.a.IMapService),o((u=function(t){function e(){var t;Object(f.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(g.a)(Object(p.a)(t),"indragging",!1),Object(l.a)(Object(p.a)(t),"mapService",c,Object(p.a)(t)),Object(g.a)(Object(p.a)(t),"hammertime",void 0),Object(g.a)(Object(p.a)(t),"lastClickTime",0),Object(g.a)(Object(p.a)(t),"lastClickXY",[-1,-1]),Object(g.a)(Object(p.a)(t),"clickTimer",void 0),Object(g.a)(Object(p.a)(t),"$containter",void 0),Object(g.a)(Object(p.a)(t),"onDrag",function(e){var n=t.interactionEvent(e);n.type=C[n.type],"dragging"===n.type?t.indragging=!0:t.indragging=!1,t.emit(A.a.Drag,n)}),Object(g.a)(Object(p.a)(t),"onHammer",function(e){e.srcEvent.stopPropagation();var n=t.interactionEvent(e);t.emit(A.a.Hover,n)}),Object(g.a)(Object(p.a)(t),"onTouch",function(e){var n=e.touches[0];t.onHover({x:n.pageX,y:n.pageY,type:"touch"})}),Object(g.a)(Object(p.a)(t),"onHover",function(e){var n=e.clientX,r=e.clientY,i=n,o=r,a=e.type,s=t.mapService.getMapContainer();if(s)if(_.K)i=i-s.left-0,o=o-s.top-0;else{var u=s.getBoundingClientRect(),c=u.top,l=u.left;i=i-l-s.clientLeft,o=o-c-s.clientTop}var f=t.mapService.containerToLngLat([i,o]);if("click"===a){if(!_.K&&"ontouchstart"in document.documentElement===!0)return;return void t.isDoubleTap(i,o,f)}if("touch"===a)return void t.isDoubleTap(i,o,f);"click"!==a&&"dblclick"!==a&&t.emit(A.a.Hover,{x:i,y:o,lngLat:f,type:a,target:e})}),t}Object(d.a)(e,t);var n=r(e);return Object(h.a)(e,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(A.a.Hover)}},{key:"triggerHover",value:function(t){var e=t.x,n=t.y;this.emit(A.a.Hover,{x:e,y:n})}},{key:"triggerSelect",value:function(t){this.emit(A.a.Select,{featureId:t})}},{key:"triggerActive",value:function(t){this.emit(A.a.Active,{featureId:t})}},{key:"handleMiniEvent",value:function(t){this.onHover({clientX:t.touches[0].pageX,clientY:t.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var t=this.mapService.getMapContainer();if(t)if(_.K)_.a.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var e=new S.a.Manager(t);e.add(new S.a.Tap({event:"dblclick",taps:2})),e.add(new S.a.Tap({event:"click"})),e.add(new S.a.Pan({threshold:0,pointers:0})),e.add(new S.a.Press({})),e.on("dblclick click",this.onHammer),e.on("panstart panmove panend pancancel",this.onDrag),t.addEventListener("mousemove",this.onHover),t.addEventListener("mousedown",this.onHover,!0),t.addEventListener("mouseup",this.onHover),t.addEventListener("contextmenu",this.onHover),this.hammertime=e}}},{key:"removeEventListenerOnMap",value:function(){if(_.K)_.a.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var t=this.mapService.getMapContainer();t&&(t.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),t.removeEventListener("mousedown",this.onHover),t.removeEventListener("mouseup",this.onHover),t.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(t){var e,n,r=t.type,i=t.pointerType;"touch"===i?(n=Math.floor(t.pointers[0].clientY),e=Math.floor(t.pointers[0].clientX)):(n=Math.floor(t.srcEvent.y),e=Math.floor(t.srcEvent.x));var o=this.mapService.getMapContainer();if(o){var a=o.getBoundingClientRect(),s=a.top;e-=a.left,n-=s}return{x:e,y:n,lngLat:this.mapService.containerToLngLat([e,n]),type:r,target:t.srcEvent}}},{key:"isDoubleTap",value:function(t,e,n){var r=this,i=(new Date).getTime(),o="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-t)<10&&Math.abs(this.lastClickXY[1]-e)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),o="dblclick",this.emit(A.a.Hover,{x:t,y:e,lngLat:n,type:o})):(this.lastClickTime=i,this.lastClickXY=[t,e],this.clickTimer=setTimeout(function(){o="click",r.emit(A.a.Hover,{x:t,y:e,lngLat:n,type:o})},400))}}]),e}(x.a),c=Object(y.a)(u.prototype,"mapService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=u))||s)},function(t,e,n){var r;!function(i,o,a,s){"use strict";function u(t,e,n){return setTimeout(p(t,n),e)}function c(t,e,n){return!!Array.isArray(t)&&(l(t,n[e],n),!0)}function l(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function f(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}function h(t,e,n){var r,i=e.prototype;r=t.prototype=Object.create(i),r.constructor=t,r._super=i,n&&dt(r,n)}function p(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==bt?t.apply(e?e[0]||s:s,e):t}function v(t,e){return t===s?e:t}function m(t,e,n){l(b(e),function(e){t.addEventListener(e,n,!1)})}function g(t,e,n){l(b(e),function(e){t.removeEventListener(e,n,!1)})}function y(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function x(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function w(t){return Array.prototype.slice.call(t,0)}function E(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];x(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function S(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<yt.length;){if(n=yt[o],(r=n?n+i:e)in t)return r;o++}return s}function O(){return Tt++}function T(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}function A(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&n.handler(e)},this.init()}function C(t){var e=t.options.inputClass;return new(e||(kt?V:Mt?W:Ct?Z:U))(t,k)}function k(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=e&jt&&r-i===0,a=e&(Rt|Lt)&&r-i===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,M(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function M(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=I(e)),i>1&&!n.firstMultiple?n.firstMultiple=I(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,u=e.center=R(r);e.timeStamp=Et(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=z(s,u),e.distance=N(s,u),P(n,e),e.offsetDirection=D(e.deltaX,e.deltaY);var c=L(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=wt(c.x)>wt(c.y)?c.x:c.y,e.scale=a?B(a.pointers,r):1,e.rotation=a?F(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,j(n,e);var l=t.element;y(e.srcEvent.target,l)&&(l=e.srcEvent.target),e.target=l}function P(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};e.eventType!==jt&&o.eventType!==Rt||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}function j(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(e.eventType!=Lt&&(u>Pt||a.velocity===s)){var c=e.deltaX-a.deltaX,l=e.deltaY-a.deltaY,f=L(u,c,l);r=f.x,i=f.y,n=wt(f.x)>wt(f.y)?f.x:f.y,o=D(c,l),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}function I(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:xt(t.pointers[n].clientX),clientY:xt(t.pointers[n].clientY)},n++;return{timeStamp:Et(),pointers:e,center:R(e),deltaX:t.deltaX,deltaY:t.deltaY}}function R(t){var e=t.length;if(1===e)return{x:xt(t[0].clientX),y:xt(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:xt(n/e),y:xt(r/e)}}function L(t,e,n){return{x:e/t||0,y:n/t||0}}function D(t,e){return t===e?Dt:wt(t)>=wt(e)?t<0?Nt:zt:e<0?Ft:Bt}function N(t,e,n){n||(n=Ht);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function z(t,e,n){n||(n=Ht);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}function F(t,e){return z(e[1],e[0],Wt)+z(t[1],t[0],Wt)}function B(t,e){return N(e[0],e[1],Wt)/N(t[0],t[1],Wt)}function U(){this.evEl=Zt,this.evWin=Xt,this.pressed=!1,A.apply(this,arguments)}function V(){this.evEl=Jt,this.evWin=Qt,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function G(){this.evTarget=te,this.evWin=ee,this.started=!1,A.apply(this,arguments)}function H(t,e){var n=w(t.touches),r=w(t.changedTouches);return e&(Rt|Lt)&&(n=E(n.concat(r),"identifier",!0)),[n,r]}function W(){this.evTarget=re,this.targetIds={},A.apply(this,arguments)}function q(t,e){var n=w(t.touches),r=this.targetIds;if(e&(jt|It)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=w(t.changedTouches),s=[],u=this.target;if(o=n.filter(function(t){return y(t.target,u)}),e===jt)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),e&(Rt|Lt)&&delete r[a[i].identifier],i++;return s.length?[E(o.concat(s),"identifier",!0),s]:void 0}function Z(){A.apply(this,arguments);var t=p(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new U(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function X(t,e){t&jt?(this.primaryTouch=e.changedPointers[0].identifier,Y.call(this,e)):t&(Rt|Lt)&&Y.call(this,e)}function Y(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches,i=function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)};setTimeout(i,ie)}}function K(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=oe&&a<=oe)return!0}return!1}function J(t,e){this.manager=t,this.set(e)}function Q(t){if(_(t,le))return le;var e=_(t,fe),n=_(t,he);return e&&n?le:e||n?e?fe:he:_(t,ce)?ce:ue}function $(t){this.options=dt({},this.defaults,t||{}),this.id=O(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=de,this.simultaneous={},this.requireFail=[]}function tt(t){return t&_e?"cancel":t&ge?"end":t&me?"move":t&ve?"start":""}function et(t){return t==Bt?"down":t==Ft?"up":t==Nt?"left":t==zt?"right":""}function nt(t,e){var n=e.manager;return n?n.get(t):t}function rt(){$.apply(this,arguments)}function it(){rt.apply(this,arguments),this.pX=null,this.pY=null}function ot(){rt.apply(this,arguments)}function at(){$.apply(this,arguments),this._timer=null,this._input=null}function st(){rt.apply(this,arguments)}function ut(){rt.apply(this,arguments)}function ct(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function lt(t,e){return e=e||{},e.recognizers=v(e.recognizers,lt.defaults.preset),new ft(t,e)}function ft(t,e){this.options=dt({},lt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new J(this,this.options.touchAction),ht(this,!0),l(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ht(t,e){var n=t.element;if(n.style){var r;l(t.options.cssProps,function(i,o){r=S(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={})}}function pt(t,e){if(!gt){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}}var dt,vt="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,mt="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram),gt=vt||mt,yt=["","webkit","Moz","MS","ms","o"],_t=gt?"":o.createElement("div"),bt="function",xt=Math.round,wt=Math.abs,Et=Date.now;dt="function"!==typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var St=f(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),Ot=f(function(t,e){return St(t,e,!0)},"merge","Use `assign`."),Tt=1,At=/mobile|tablet|ip(ad|hone|od)|android/i,Ct="ontouchstart"in i,kt=S(i,"PointerEvent")!==s,Mt=Ct&&At.test(navigator.userAgent),Pt=25,jt=1,It=2,Rt=4,Lt=8,Dt=1,Nt=2,zt=4,Ft=8,Bt=16,Ut=Nt|zt,Vt=Ft|Bt,Gt=Ut|Vt,Ht=["x","y"],Wt=["clientX","clientY"];A.prototype={handler:function(){},init:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&g(this.element,this.evEl,this.domHandler),this.evTarget&&g(this.target,this.evTarget,this.domHandler),this.evWin&&g(T(this.element),this.evWin,this.domHandler)}};var qt={mousedown:jt,mousemove:It,mouseup:Rt},Zt="mousedown",Xt="mousemove mouseup";h(U,A,{handler:function(t){var e=qt[t.type];e&jt&&0===t.button&&(this.pressed=!0),e&It&&1!==t.which&&(e=Rt),this.pressed&&(e&Rt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Yt={pointerdown:jt,pointermove:It,pointerup:Rt,pointercancel:Lt,pointerout:Lt},Kt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Jt="pointerdown",Qt="pointermove pointerup pointercancel";gt||!i.MSPointerEvent||i.PointerEvent||(Jt="MSPointerDown",Qt="MSPointerMove MSPointerUp MSPointerCancel"),h(V,A,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=Yt[r],o=Kt[t.pointerType]||t.pointerType,a="touch"==o,s=x(e,t.pointerId,"pointerId");i&jt&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):i&(Rt|Lt)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var $t={touchstart:jt,touchmove:It,touchend:Rt,touchcancel:Lt},te="touchstart",ee="touchstart touchmove touchend touchcancel";h(G,A,{handler:function(t){var e=$t[t.type];if(e===jt&&(this.started=!0),this.started){var n=H.call(this,t,e);e&(Rt|Lt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var ne={touchstart:jt,touchmove:It,touchend:Rt,touchcancel:Lt},re="touchstart touchmove touchend touchcancel";h(W,A,{handler:function(t){var e=ne[t.type],n=q.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var ie=2500,oe=25;h(Z,A,{handler:function(t,e,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)X.call(this,e,n);else if(i&&K.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ae=gt?s:S(_t.style,"touchAction"),se=ae!==s,ue="auto",ce="manipulation",le="none",fe="pan-x",he="pan-y",pe=function(){if(!se)return!1;var t={};if(gt)return t;var e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();J.prototype={set:function(t){"compute"==t&&(t=this.compute()),se&&this.manager.element.style&&pe[t]&&(this.manager.element.style[ae]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return l(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),Q(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var r=this.actions,i=_(r,le)&&!pe[le],o=_(r,he)&&!pe[he],a=_(r,fe)&&!pe[fe];if(i){var s=1===t.pointers.length,u=t.distance<2,c=t.deltaTime<250;if(s&&u&&c)return}return a&&o?void 0:i||o&&n&Ut||a&&n&Vt?this.preventSrc(e):void 0},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var de=1,ve=2,me=4,ge=8,ye=ge,_e=16;$.prototype={defaults:{},set:function(t){return dt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(c(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=nt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return c(t,"dropRecognizeWith",this)?this:(t=nt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(c(t,"requireFailure",this))return this;var e=this.requireFail;return t=nt(t,this),-1===x(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(c(t,"dropRequireFailure",this))return this;t=nt(t,this);var e=x(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,r=this.state;r<ge&&e(n.options.event+tt(r)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),r>=ge&&e(n.options.event+tt(r))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|de)))return!1;t++}return!0},recognize:function(t){var e=dt({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ye|_e|32)&&(this.state=de),this.state=this.process(e),this.state&(ve|me|ge|_e)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},h(rt,$,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=e&(ve|me),i=this.attrTest(t);return r&&(n&Lt||!i)?e|_e:r||i?n&Rt?e|ge:e&ve?e|me:ve:32}}),h(it,rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Gt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ut&&e.push(he),t&Vt&&e.push(fe),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(e.direction&Ut?(i=0===o?Dt:o<0?Nt:zt,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?Dt:a<0?Ft:Bt,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return rt.prototype.attrTest.call(this,t)&&(this.state&ve||!(this.state&ve)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=et(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),h(ot,rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[le]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ve)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),h(at,$,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ue]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(Rt|Lt)&&!i)this.reset();else if(t.eventType&jt)this.reset(),this._timer=u(function(){this.state=ye,this.tryEmit()},e.time,this);else if(t.eventType&Rt)return ye;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ye&&(t&&t.eventType&Rt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Et(),this.manager.emit(this.options.event,this._input)))}}),h(st,rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[le]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ve)}}),h(ut,rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ut|Vt,pointers:1},getTouchAction:function(){return it.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Ut|Vt)?e=t.overallVelocity:n&Ut?e=t.overallVelocityX:n&Vt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&wt(e)>this.options.velocity&&t.eventType&Rt},emit:function(t){var e=et(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),h(ct,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ce]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),t.eventType&jt&&0===this.count)return this.failTimeout();if(r&&i&&n){if(t.eventType!=Rt)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;if(0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=u(function(){this.state=ye,this.tryEmit()},e.interval,this),ve):ye}return 32},failTimeout:function(){return this._timer=u(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ye&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),lt.VERSION="2.0.7",lt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[ot,{enable:!1},["rotate"]],[ut,{direction:Ut}],[it,{direction:Ut},["swipe"]],[ct],[ct,{event:"doubletap",taps:2},["tap"]],[at]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};if(ft.prototype={set:function(t){return dt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,r=this.recognizers,i=e.curRecognizer;(!i||i&&i.state&ye)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&n.state&(ve|me|ge)&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof $)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(c(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(c(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=x(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return l(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==s){var n=this.handlers;return l(b(t),function(t){e?n[t]&&n[t].splice(x(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&pt(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&ht(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},!gt){dt(lt,{INPUT_START:jt,INPUT_MOVE:It,INPUT_END:Rt,INPUT_CANCEL:Lt,STATE_POSSIBLE:de,STATE_BEGAN:ve,STATE_CHANGED:me,STATE_ENDED:ge,STATE_RECOGNIZED:ye,STATE_CANCELLED:_e,STATE_FAILED:32,DIRECTION_NONE:Dt,DIRECTION_LEFT:Nt,DIRECTION_RIGHT:zt,DIRECTION_UP:Ft,DIRECTION_DOWN:Bt,DIRECTION_HORIZONTAL:Ut,DIRECTION_VERTICAL:Vt,DIRECTION_ALL:Gt,Manager:ft,Input:A,TouchAction:J,TouchInput:W,MouseInput:U,PointerEventInput:V,TouchMouseInput:Z,SingleTouchInput:G,Recognizer:$,AttrRecognizer:rt,Tap:ct,Pan:it,Swipe:ut,Pinch:ot,Rotate:st,Press:at,on:m,off:g,each:l,merge:Ot,extend:St,assign:dt,inherit:h,bindFn:p,prefixed:S});("undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Hammer=lt,(r=function(){return lt}.call(e,n,e,t))!==s&&(t.exports=r)}}("undefined"!==typeof window?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document)},function(t,e,n){"use strict";n.d(e,"a",function(){return I});var r,i,o,a,s,u,c,l,f,h,p,d,v,m=n(15),g=n(7),y=n(10),_=n(39),b=n(0),x=n(1),w=n(6),E=n(40),S=(n(41),n(8)),O=n.n(S),T=n(9),A=n(13),C=(n.n(A),n(14)),k=(n.n(C),n(42)),M=n(429),P=n(160),j=n(109),I=(r=Object(A.injectable)(),i=Object(A.inject)(k.a.IMapService),o=Object(A.inject)(k.a.IRendererService),a=Object(A.inject)(k.a.IGlobalConfigService),s=Object(A.inject)(k.a.IInteractionService),u=Object(A.inject)(k.a.ILayerService),r((l=function(){function t(){var e=this;Object(b.a)(this,t),Object(w.a)(this,"pickedColors",void 0),Object(w.a)(this,"pickedTileLayers",[]),Object(_.a)(this,"mapService",f,this),Object(_.a)(this,"rendererService",h,this),Object(_.a)(this,"configService",p,this),Object(_.a)(this,"interactionService",d,this),Object(_.a)(this,"layerService",v,this),Object(w.a)(this,"pickingFBO",void 0),Object(w.a)(this,"width",0),Object(w.a)(this,"height",0),Object(w.a)(this,"alreadyInPicking",!1),Object(w.a)(this,"pickBufferScale",1),Object(w.a)(this,"pickFromPickingFBO",function(t,n){var r=n.x,i=n.y,o=n.lngLat,a=n.type,s=n.target,u=!1,c=e.rendererService,l=c.readPixels,f=c.getContainer,h=e.getContainerSize(f()),p=h.width,d=h.height;p*=T.b.DPR,d*=T.b.DPR;var v=t.getLayerConfig(),m=v.enableHighlight,g=v.enableSelect,_=r*T.b.DPR,b=i*T.b.DPR;if(_>p-1*T.b.DPR||_<0||b>d-1*T.b.DPR||b<0)return!1;var x=l({x:Math.floor(_/e.pickBufferScale),y:Math.floor((d-(i+1)*T.b.DPR)/e.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:e.pickingFBO});if(e.pickedColors=x,0!==x[0]||0!==x[1]||0!==x[2]){var w=Object(T.s)(x),E=t.layerPickService.getFeatureById(w);w!==t.getCurrentPickId()&&"mousemove"===a&&(a="mouseenter");var S={x:r,y:i,type:a,lngLat:o,featureId:w,feature:E,target:s};E&&(u=!0,t.setCurrentPickId(w),e.triggerHoverOnLayer(t,S))}else{var O={x:r,y:i,lngLat:o,type:null!==t.getCurrentPickId()&&"mousemove"===a?"mouseout":"un"+a,featureId:null,target:s,feature:null};e.triggerHoverOnLayer(t,Object(y.a)(Object(y.a)({},O),{},{type:"unpick"})),e.triggerHoverOnLayer(t,O),t.setCurrentPickId(null)}if(m&&t.layerPickService.highlightPickedFeature(x),g&&"click"===a&&(null===x||void 0===x?void 0:x.toString())!==[0,0,0,0].toString()){var A=Object(T.s)(x);null===t.getCurrentSelectedId()||A!==t.getCurrentSelectedId()?(t.layerPickService.selectFeature(x),t.setCurrentSelectedId(A)):(t.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),t.setCurrentSelectedId(null))}return u})}return Object(x.a)(t,[{key:"init",value:function(t){var e=this.rendererService,n=e.createTexture2D,r=e.createFramebuffer,i=e.getContainer,o=this.getContainerSize(i()),a=o.width,s=o.height;a*=T.b.DPR,s*=T.b.DPR,this.pickBufferScale=this.configService.getSceneConfig(t).pickBufferScale||1,this.pickingFBO=r({color:n({width:Math.round(a/this.pickBufferScale),height:Math.round(s/this.pickBufferScale),wrapS:j.a.CLAMP_TO_EDGE,wrapT:j.a.CLAMP_TO_EDGE})}),this.interactionService.on(P.a.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=Object(g.a)(O.a.mark(function t(e,n,r){var i,o,a,s=this;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.rendererService,o=i.useFramebuffer,a=i.clear,this.resizePickingFBO(),o(this.pickingFBO,function(){a({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),e.hooks.beforePickingEncode.call(),e.renderModels({ispick:!0}),e.hooks.afterPickingEncode.call();var t=s.pickBox(e,n);r(t)});case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"pickBox",value:function(t,e){var n=this,r=e.map(function(t){var e=t<0?0:t;return Math.floor(e*T.b.DPR/n.pickBufferScale)}),i=Object(m.a)(r,4),o=i[0],a=i[1],s=i[2],u=i[3],c=this.rendererService,l=c.readPixels,f=c.getContainer,h=this.getContainerSize(f()),p=h.width,d=h.height;if(p*=T.b.DPR,d*=T.b.DPR,o>(p-1)*T.b.DPR/this.pickBufferScale||s<0||a>(d-1)*T.b.DPR/this.pickBufferScale||u<0)return[];for(var v=Math.min(p/this.pickBufferScale,s)-o,g=Math.min(d/this.pickBufferScale,u)-a,_=l({x:o,y:Math.floor(d/this.pickBufferScale-(u+1)),width:v,height:g,data:new Uint8Array(v*g*4),framebuffer:this.pickingFBO}),b=[],x={},w=0;w<_.length/4;w+=1){var E=_.slice(4*w,4*w+4),S=Object(T.s)(E);if(-1!==S&&!x[S]){var O=t.layerPickService.getFeatureById(S);b.push(Object(y.a)(Object(y.a)({},O),{},{pickedFeatureIdx:S})),x[S]=!0}}return b}},{key:"handleCursor",value:function(t,e){var n=t.getLayerConfig(),r=n.cursor,i=void 0===r?"":r;if(n.cursorEnabled){var o=this.mapService.version,a="GAODE2.x"===o?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),s=null===a||void 0===a?void 0:a.style.getPropertyValue("cursor");"unmousemove"===e&&""!==s?null===a||void 0===a||a.style.setProperty("cursor",""):"mousemove"===e&&(null===a||void 0===a||a.style.setProperty("cursor",i))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(t){return t.getContext?{width:t.width/T.b.DPR,height:t.height/T.b.DPR}:t.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(g.a)(O.a.mark(function t(e){return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.layerService.needPick(e.type)&&this.isPickingAllLayer()){t.next=2;break}return t.abrupt("return");case 2:return this.alreadyInPicking=!0,t.next=5,this.pickingLayers(e);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"isPickingAllLayer",value:function(){return!this.alreadyInPicking&&(!this.layerService.alreadyInRendering&&(!this.interactionService.indragging&&!!this.layerService.getShaderPickStat()))}},{key:"resizePickingFBO",value:function(){var t=this.rendererService.getContainer,e=this.getContainerSize(t()),n=e.width,r=e.height;n*=T.b.DPR,r*=T.b.DPR,this.width===n&&this.height===r||(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(r/this.pickBufferScale)}),this.width=n,this.height=r)}},{key:"pickingLayers",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(g.a)(O.a.mark(function t(e){var n,r,i,o=this;return O.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.rendererService,r=n.useFramebuffer,i=n.clear,this.resizePickingFBO(),r(this.pickingFBO,function(){o.layerService.getRenderList().filter(function(t){return t.needPick(e.type)}).reverse().some(function(t){i({framebuffer:o.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),t.layerPickService.pickRender(e);var n=o.pickFromPickingFBO(t,e);return o.layerService.pickedLayerId=n?+t.id:-1,n&&!t.getLayerConfig().enablePropagation})});case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"triggerHoverOnLayer",value:function(t,e){Object(M.b)(e)&&(this.handleCursor(t,e.type),t.emit(e.type,e))}}]),t}(),f=Object(E.a)(l.prototype,"mapService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(E.a)(l.prototype,"rendererService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(E.a)(l.prototype,"configService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=Object(E.a)(l.prototype,"interactionService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(E.a)(l.prototype,"layerService",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=l))||c)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=s();return function(){var n,r=Object(S.a)(t);if(e){var i=Object(S.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(E.a)(this,n)}}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return N});var u,c,l,f,h,p,d,v,m,g=n(7),y=n(39),_=n(0),b=n(1),x=n(12),w=n(3),E=n(4),S=n(2),O=n(6),T=n(40),A=(n(41),n(8)),C=n.n(A),k=n(9),M=n(37),P=(n.n(M),n(13)),j=(n.n(P),n(19)),I=(n.n(j),n(14)),R=(n.n(I),n(42)),L=n(874),D=n(285),N=(u=Object(P.injectable)(),c=Object(P.inject)(R.a.IRendererService),l=Object(P.inject)(R.a.IMapService),f=Object(P.inject)(R.a.IDebugService),u((p=function(t){function e(){var t;Object(_.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(O.a)(Object(x.a)(t),"pickedLayerId",-1),Object(O.a)(Object(x.a)(t),"clock",new L.a),Object(O.a)(Object(x.a)(t),"alreadyInRendering",!1),Object(O.a)(Object(x.a)(t),"layers",[]),Object(O.a)(Object(x.a)(t),"layerList",[]),Object(O.a)(Object(x.a)(t),"layerRenderID",void 0),Object(O.a)(Object(x.a)(t),"sceneInited",!1),Object(O.a)(Object(x.a)(t),"animateInstanceCount",0),Object(O.a)(Object(x.a)(t),"shaderPicking",!0),Object(O.a)(Object(x.a)(t),"enableRender",!0),Object(y.a)(Object(x.a)(t),"renderService",d,Object(x.a)(t)),Object(y.a)(Object(x.a)(t),"mapService",v,Object(x.a)(t)),Object(y.a)(Object(x.a)(t),"debugService",m,Object(x.a)(t)),Object(O.a)(Object(x.a)(t),"reRender",Object(j.throttle)(function(){t.renderLayers()},32)),Object(O.a)(Object(x.a)(t),"throttleRenderLayers",Object(j.throttle)(function(){t.renderLayers()},16)),t}Object(w.a)(e,t);var n=a(e);return Object(b.a)(e,[{key:"needPick",value:function(t){return this.layerList.some(function(e){return e.needPick(t)})}},{key:"add",value:function(t){var e=this;this.layers.push(t),this.sceneInited&&t.init().then(function(){e.renderLayers()})}},{key:"addMask",value:function(t){var e=this;this.sceneInited&&t.init().then(function(){e.renderLayers()})}},{key:"initLayers",value:function(){function t(){return e.apply(this,arguments)}var e=Object(g.a)(C.a.mark(function t(){var e=this;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.sceneInited=!0,this.layers.forEach(function(){var t=Object(g.a)(C.a.mark(function t(n){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.startInit){t.next=4;break}return t.next=3,n.init();case 3:e.updateLayerRenderList();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(t){return this.layers.find(function(e){return e.id===t})}},{key:"getLayerByName",value:function(t){return this.layers.find(function(e){return e.name===t})}},{key:"remove",value:function(){function t(t,n){return e.apply(this,arguments)}var e=Object(g.a)(C.a.mark(function t(e,n){var r,i;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n?(r=n.layerChildren.indexOf(e))>-1&&n.layerChildren.splice(r,1):(i=this.layers.indexOf(e))>-1&&this.layers.splice(i,1),e.destroy(),this.reRender(),this.emit("layerChange",this.layers);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"removeAllLayers",value:function(){function t(){return e.apply(this,arguments)}var e=Object(g.a)(C.a.mark(function t(){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.destroy(),this.reRender();case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"setEnableRender",value:function(t){this.enableRender=t}},{key:"renderLayers",value:function(){function t(){return e.apply(this,arguments)}var e=Object(g.a)(C.a.mark(function t(){var e,n,i,o,a,s;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.alreadyInRendering&&this.enableRender){t.next=2;break}return t.abrupt("return");case 2:this.updateLayerRenderList(),e=this.debugService.generateRenderUid(),this.debugService.renderStart(e),this.alreadyInRendering=!0,this.clear(),n=r(this.layerList),t.prev=8,n.s();case 10:if((i=n.n()).done){t.next=23;break}if(o=i.value,a=o.getLayerConfig(),s=a.enableMask,o.masks.filter(function(t){return t.inited}).length>0&&s&&this.renderMask(o.masks),!o.getLayerConfig().enableMultiPassRenderer){t.next=19;break}return t.next=17,o.renderMultiPass();case 17:t.next=21;break;case 19:return t.next=21,o.render();case 21:t.next=10;break;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t.catch(8),n.e(t.t0);case 28:return t.prev=28,n.f(),t.finish(28);case 31:this.debugService.renderEnd(e),this.alreadyInRendering=!1;case 33:case"end":return t.stop()}},t,this,[[8,25,28,31]])}));return t}()},{key:"renderMask",value:function(t){var e=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});var n,i=t.length>1?D.d.MULTIPLE:D.d.SINGLE,o=r(t);try{for(o.s();!(n=o.n()).done;){n.value.render({isStencil:!0,stencilType:i,stencilIndex:e++})}}catch(t){o.e(t)}finally{o.f()}}},{key:"beforeRenderData",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(g.a)(C.a.mark(function t(e){var n;return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.hooks.beforeRenderData.promise();case 2:n=t.sent,n&&this.renderLayers();case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"renderTileLayerMask",value:function(t){var e=0,n=t.getLayerConfig(),i=n.enableMask,o=void 0===i||i,a=t.tileMask?1:0,s=t.masks.filter(function(t){return t.inited});a+=o?s.length:1;var u=a>1?D.d.MULTIPLE:D.d.SINGLE;if((t.tileMask||s.length&&o)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),s.length&&o){var c,l=r(s);try{for(l.s();!(c=l.n()).done;){c.value.render({isStencil:!0,stencilType:u,stencilIndex:e++})}}catch(t){l.e(t)}finally{l.f()}}t.tileMask&&t.tileMask.render({isStencil:!0,stencilType:u,stencilIndex:e++,stencilOperation:D.c.OR})}},{key:"renderTileLayer",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(g.a)(C.a.mark(function t(e){return C.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.renderTileLayerMask(e),!e.getLayerConfig().enableMultiPassRenderer){t.next=6;break}return t.next=4,e.renderMultiPass();case 4:t.next=8;break;case 6:return t.next=8,e.render();case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"updateLayerRenderList",value:function(){var t=this;this.layerList=[],this.layers.filter(function(t){return t.inited}).filter(function(t){return t.isVisible()}).sort(function(t,e){return t.zIndex-e.zIndex}).forEach(function(e){t.layerList.push(e)})}},{key:"destroy",value:function(){this.layers.forEach(function(t){t.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}},{key:"startAnimate",value:function(){0===this.animateInstanceCount++&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){0===--this.animateInstanceCount&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var t=Object(k.T)(this.mapService.bgColor);this.renderService.clear({color:t,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=k.a.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){k.a.cancelAnimationFrame(this.layerRenderID)}}]),e}(M.EventEmitter),d=Object(T.a)(p.prototype,"renderService",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=Object(T.a)(p.prototype,"mapService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(T.a)(p.prototype,"debugService",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=p))||h)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(6),a=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(r.a)(this,t),Object(o.a)(this,"autoStart",void 0),Object(o.a)(this,"startTime",0),Object(o.a)(this,"oldTime",0),Object(o.a)(this,"running",!1),Object(o.a)(this,"elapsedTime",0),this.autoStart=e}return Object(i.a)(t,[{key:"start",value:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return O});var r,i,o,a,s,u,c=n(49),l=n(20),f=n(10),h=n(39),p=n(0),d=n(1),v=n(40),m=(n(41),n(6)),g=n(13),y=(n.n(g),n(14)),_=(n.n(y),n(42)),b=n(109),x=n(877),w=["buffer","update","name"],E=["buffer","update","name"],S=(r={},Object(m.a)(r,b.a.FLOAT,4),Object(m.a)(r,b.a.UNSIGNED_BYTE,1),Object(m.a)(r,b.a.UNSIGNED_SHORT,2),r),O=(i=Object(g.injectable)(),o=Object(g.inject)(_.a.IRendererService),i((s=function(){function t(){Object(p.a)(this,t),Object(m.a)(this,"attributesAndIndices",void 0),Object(h.a)(this,"rendererService",u,this),Object(m.a)(this,"attributes",[]),Object(m.a)(this,"triangulation",void 0),Object(m.a)(this,"featureLayout",{sizePerElement:0,elements:[]})}return Object(d.a)(t,[{key:"registerStyleAttribute",value:function(t){var e=this.getLayerStyleAttribute(t.name||"");return e?e.setProps(t):(e=new x.a(t),this.attributes.push(e)),e}},{key:"unRegisterStyleAttribute",value:function(t){var e=this.attributes.findIndex(function(e){return e.name===t});e>-1&&this.attributes.splice(e,1)}},{key:"updateScaleAttribute",value:function(t){this.attributes.forEach(function(e){var n,r=e.name,i=null===(n=e.scale)||void 0===n?void 0:n.field;(t[r]||i&&t[i])&&(e.needRescale=!0,e.needRemapping=!0,e.needRegenerateVertices=!0)})}},{key:"updateStyleAttribute",value:function(t,e,n){var r=this.getLayerStyleAttribute(t);r||(r=this.registerStyleAttribute(Object(f.a)(Object(f.a)({},e),{},{name:t})));var i=e.scale;i&&r&&(r.scale=i,r.needRescale=!0,r.needRemapping=!0,r.needRegenerateVertices=!0,n&&n.featureRange&&(r.featureRange=n.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(t){return this.attributes.find(function(e){return e.name===t})}},{key:"getLayerAttributeScale",value:function(t){var e,n=this.getLayerStyleAttribute(t),r=null===n||void 0===n?void 0:null===(e=n.scale)||void 0===e?void 0:e.scalers;return r&&r[0]?r[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=this.attributes.find(function(e){return e.name===t});if(o&&o.descriptor){var a=o.descriptor,s=a.update,u=a.buffer,c=a.size,f=void 0===c?0:c,h=S[u.type||b.a.FLOAT];if(s){var p=this.featureLayout,d=p.elements,v=p.sizePerElement,m=d.slice(n,r);if(!m.length)return;var g=m[0].offset,y=g*f*h,_=m.map(function(t,n){for(var r=t.featureIdx,i=t.vertices,o=t.normals,a=i.length/v,u=[],c=0;c<a;c++){var f=o?o.slice(3*c,3*c+3):[];u.push.apply(u,Object(l.a)(s(e[r],r,i.slice(c*v,c*v+v),n,f)))}return u}).reduce(function(t,e){return t.push.apply(t,Object(l.a)(e)),t},[]);o.vertexAttribute.updateBuffer({data:_,offset:y}),null===i||void 0===i||i.emit("legend:".concat(t),{type:t,attr:o})}}}},{key:"createAttributesAndIndices",value:function(t,e,n){var r=this;this.featureLayout={sizePerElement:0,elements:[]},e&&(this.triangulation=e);var i=this.attributes.map(function(t){return t.resetDescriptor(),t.descriptor}),o=0,a=0,s=[],u=3;t.forEach(function(t,e){var c=r.triangulation(t,n),f=c.indices,h=c.vertices,p=c.normals,d=c.size,v=c.indexes,m=c.count;"number"===typeof m&&(a+=m),f.forEach(function(t){s.push(t+o)}),u=d;var g=h.length/d;r.featureLayout.sizePerElement=u,r.featureLayout.elements.push({featureIdx:e,vertices:h,normals:p,offset:o}),o+=g;for(var y=0;y<g;y++)!function(n){var r=(null===p||void 0===p?void 0:p.slice(3*n,3*n+3))||[],o=h.slice(n*d,n*d+d),a=0;v&&void 0!==v[n]&&(a=v[n]),i.forEach(function(i,s){if(i&&i.update){var u;(u=i.buffer.data).push.apply(u,Object(l.a)(i.update(t,e,o,n,r,a)))}})}(y)});var h=this.rendererService,p=h.createAttribute,d=h.createBuffer,v=h.createElements,m={};i.forEach(function(t,e){if(t){var n=t.buffer,i=(t.update,t.name,Object(c.a)(t,w)),o=p(Object(f.a)({buffer:d(n)},i));m[t.name||""]=o,r.attributes[e].vertexAttribute=o}});var g=v({data:s,type:b.a.UNSIGNED_INT,count:s.length});return this.attributesAndIndices={attributes:m,elements:g,count:a},this.attributesAndIndices}},{key:"createAttributes",value:function(t,e){var n=this;this.featureLayout={sizePerElement:0,elements:[]},e&&(this.triangulation=e);var r=this.attributes.map(function(t){return t.resetDescriptor(),t.descriptor}),i=0,o=[],a=3;t.forEach(function(t,e){var s=n.triangulation(t),u=s.indices,c=s.vertices,f=s.normals,h=s.size,p=s.indexes;u.forEach(function(t){o.push(t+i)}),a=h;var d=c.length/h;n.featureLayout.sizePerElement=a,n.featureLayout.elements.push({featureIdx:e,vertices:c,normals:f,offset:i}),i+=d;for(var v=0;v<d;v++)!function(n){var i=(null===f||void 0===f?void 0:f.slice(3*n,3*n+3))||[],o=c.slice(n*h,n*h+h),a=0;p&&void 0!==p[n]&&(a=p[n]),r.forEach(function(r,s){if(r&&r.update){var u;(u=r.buffer.data).push.apply(u,Object(l.a)(r.update(t,e,o,n,i,a)))}})}(v)});var s=this.rendererService,u=s.createAttribute,h=s.createBuffer,p={};return r.forEach(function(t,e){if(t){var r=t.buffer,i=(t.update,t.name,Object(c.a)(t,E)),o=u(Object(f.a)({buffer:h(r)},i));p[t.name||""]=o,n.attributes[e].vertexAttribute=o}}),{attributes:p}}},{key:"clearAllAttributes",value:function(){var t;this.attributes.forEach(function(t){t.vertexAttribute&&t.vertexAttribute.destroy()}),null===(t=this.attributesAndIndices)||void 0===t||t.elements.destroy(),this.attributes=[]}}]),t}(),u=Object(v.a)(s.prototype,"rendererService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(20),i=n(0),o=n(1),a=n(6),s=n(19),u=(n.n(s),function(){function t(e){var n=this;Object(i.a)(this,t),Object(a.a)(this,"name",void 0),Object(a.a)(this,"type",void 0),Object(a.a)(this,"scale",void 0),Object(a.a)(this,"descriptor",void 0),Object(a.a)(this,"featureBufferLayout",[]),Object(a.a)(this,"needRescale",!1),Object(a.a)(this,"needRemapping",!1),Object(a.a)(this,"needRegenerateVertices",!1),Object(a.a)(this,"featureRange",{startIndex:0,endIndex:1/0}),Object(a.a)(this,"vertexAttribute",void 0),Object(a.a)(this,"defaultCallback",function(t){if(0===t.length){var e;return(null===(e=n.scale)||void 0===e?void 0:e.defaultValues)||[]}return t.map(function(t,e){var r;return(null===(r=n.scale)||void 0===r?void 0:r.scalers[e].func)(t)})}),this.setProps(e)}return Object(o.a)(t,[{key:"setProps",value:function(t){Object.assign(this,t)}},{key:"mapping",value:function(t){var e;if(null!==(e=this.scale)&&void 0!==e&&e.callback){var n,i=null===(n=this.scale)||void 0===n?void 0:n.callback.apply(n,Object(r.a)(t));if(!Object(s.isNil)(i))return[i]}return this.defaultCallback(t)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),t}())},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(Z.a)(t);if(e){var i=Object(Z.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(q.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return ut});var o,a,s,u,c,l,f,h,p,d,v,m,g,y,_,b,x,w,E,S,O,T,A,C,k,M,P,j,I,R,L,D,N,z,F,B=n(7),U=n(39),V=n(0),G=n(1),H=n(12),W=n(3),q=n(4),Z=n(2),X=n(6),Y=n(40),K=(n(41),n(8)),J=n.n(K),Q=n(286),$=n(9),tt=n(881),et=n.n(tt),nt=n(37),rt=(n.n(nt),n(13)),it=(n.n(rt),n(14)),ot=(n.n(it),n(42)),at=n(429),st=n(160),ut=(o=Object(rt.injectable)(),a=Object(rt.inject)(ot.a.SceneID),s=Object(rt.inject)(ot.a.IIconService),u=Object(rt.inject)(ot.a.IFontService),c=Object(rt.inject)(ot.a.IControlService),l=Object(rt.inject)(ot.a.IGlobalConfigService),f=Object(rt.inject)(ot.a.IMapService),h=Object(rt.inject)(ot.a.ICoordinateSystemService),p=Object(rt.inject)(ot.a.IRendererService),d=Object(rt.inject)(ot.a.ILayerService),v=Object(rt.inject)(ot.a.IDebugService),m=Object(rt.inject)(ot.a.ICameraService),g=Object(rt.inject)(ot.a.IInteractionService),y=Object(rt.inject)(ot.a.IPickingService),_=Object(rt.inject)(ot.a.IShaderModuleService),b=Object(rt.inject)(ot.a.IMarkerService),x=Object(rt.inject)(ot.a.IPopupService),o((E=function(t){function e(){var t;return Object(V.a)(this,e),t=n.call(this),Object(X.a)(Object(H.a)(t),"destroyed",!1),Object(X.a)(Object(H.a)(t),"loaded",!1),Object(U.a)(Object(H.a)(t),"id",S,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"iconService",O,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"fontService",T,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"controlService",A,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"configService",C,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"map",k,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"coordinateSystemService",M,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"rendererService",P,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"layerService",j,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"debugService",I,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"cameraService",R,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"interactionService",L,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"pickingService",D,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"shaderModuleService",N,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"markerService",z,Object(H.a)(t)),Object(U.a)(Object(H.a)(t),"popupService",F,Object(H.a)(t)),Object(X.a)(Object(H.a)(t),"inited",!1),Object(X.a)(Object(H.a)(t),"initPromise",void 0),Object(X.a)(Object(H.a)(t),"rendering",!1),Object(X.a)(Object(H.a)(t),"$container",void 0),Object(X.a)(Object(H.a)(t),"canvas",void 0),Object(X.a)(Object(H.a)(t),"markerContainer",void 0),Object(X.a)(Object(H.a)(t),"hooks",void 0),Object(X.a)(Object(H.a)(t),"handleWindowResized",function(){t.emit("resize"),t.$container&&(t.initContainer(),$.b.triggerResize(),t.coordinateSystemService.needRefresh=!0,t.render())}),Object(X.a)(Object(H.a)(t),"handleMapCameraChanged",function(e){t.cameraService.update(e),t.render()}),t.hooks={init:new Q.b},t}Object(W.a)(e,t);var n=r(e);return Object(G.a)(e,[{key:"init",value:function(t){var e=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return e.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(B.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.debugService.log("map.mapInitStart",{type:e.map.version}),t.next=3,new Promise(function(t){e.map.onCameraChanged(function(n){e.cameraService.init(),e.cameraService.update(n),t()}),e.map.init()});case 3:e.map.onCameraChanged(e.handleMapCameraChanged),e.map.addMarkerContainer(),e.markerService.addMarkers(),e.markerService.addMarkerLayers(),e.popupService.initPopup(),e.interactionService.init(),e.interactionService.on(st.a.Drag,e.addSceneEvent.bind(e));case 10:case"end":return t.stop()}},t)}))),this.hooks.init.tapPromise("initRenderer",Object(B.a)(J.a.mark(function n(){var r,i;return J.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.map.getOverlayContainer(),e.$container=r||Object(at.a)(e.configService.getSceneConfig(e.id).id||""),!e.$container){n.next=13;break}return e.canvas=$.b.create("canvas","",e.$container),e.setCanvas(),n.next=7,e.rendererService.init(e.canvas,e.configService.getSceneConfig(e.id),t.gl);case 7:e.registerContextLost(),e.initContainer(),et()(e.$container,e.handleWindowResized),$.a.matchMedia&&(null===(i=$.a.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))||void 0===i||i.addListener(e.handleWindowResized)),n.next=14;break;case 13:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 14:e.pickingService.init(e.id);case 15:case"end":return n.stop()}},n)}))),this.render()}},{key:"registerContextLost",value:function(){var t=this,e=this.rendererService.getCanvas();e&&e.addEventListener("webglcontextlost",function(){return t.emit("webglcontextlost")})}},{key:"initMiniScene",value:function(t){var e=this;this.configService.setSceneConfig(this.id,t),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return e.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",Object(B.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t){e.map.onCameraChanged(function(n){e.cameraService.init(),e.cameraService.update(n),"GAODE2.x"!==e.map.version&&t()}),e.map.initMiniMap()});case 2:e.map.onCameraChanged(e.handleMapCameraChanged),e.interactionService.init(),e.interactionService.on(st.a.Drag,e.addSceneEvent.bind(e));case 5:case"end":return t.stop()}},t)}))),this.hooks.init.tapPromise("initRenderer",Object(B.a)(J.a.mark(function n(){var r;return J.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.canvas,e.$container=r||null,!e.$container){n.next=7;break}return n.next=5,e.rendererService.init(t.canvas,e.configService.getSceneConfig(e.id),void 0);case 5:n.next=8;break;case 7:console.error("\u5bb9\u5668 id \u4e0d\u5b58\u5728");case 8:e.pickingService.init(e.id);case 9:case"end":return n.stop()}},n)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(t){this.layerService.sceneService=this,this.layerService.add(t)}},{key:"addMask",value:function(t){this.layerService.sceneService=this,this.layerService.addMask(t)}},{key:"render",value:function(){function t(){return e.apply(this,arguments)}var e=Object(B.a)(J.a.mark(function t(){return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.rendering&&!this.destroyed){t.next=2;break}return t.abrupt("return");case 2:if(this.rendering=!0,this.inited){t.next=16;break}return t.next=6,this.hooks.init.promise();case 6:return this.destroyed&&this.destroy(),t.next=9,this.layerService.initLayers();case 9:this.layerService.renderLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0,t.next=20;break;case 16:return t.next=18,this.layerService.initLayers();case 18:return t.next=20,this.layerService.renderLayers();case 20:this.rendering=!1;case 21:case"end":return t.stop()}},t,this)}));return t}()},{key:"addFontFace",value:function(t,e){this.fontService.addFontFace(t,e)}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(B.a)(J.a.mark(function t(e){var n,r,i;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null===(n=this.$container)||void 0===n?void 0:n.getElementsByTagName("canvas")[0],t.next=3,this.render();case 3:return i="jpg"===e?null===r||void 0===r?void 0:r.toDataURL("image/jpeg"):null===r||void 0===r?void 0:r.toDataURL("image/png"),t.abrupt("return",i);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var t=this.$container.parentElement;null!==t&&(this.markerContainer=$.b.create("div","l7-marker-container",t))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var t,e,n=this;if(!this.inited)return void(this.destroyed=!0);if(Object(tt.unbind)(this.$container,this.handleWindowResized),$.a.matchMedia){var r;null===(r=$.a.matchMedia("screen and (min-resolution: 2dppx)"))||void 0===r||r.removeListener(this.handleWindowResized)}this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(function(){var t;null===(t=n.$container)||void 0===t||t.removeChild(n.canvas),n.canvas=null,n.rendererService.destroy()}),null===(t=this.$container)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.$container),this.emit("destroy")}},{key:"initContainer",value:function(){var t,e,n=$.b.DPR,r=(null===(t=this.$container)||void 0===t?void 0:t.clientWidth)||400,i=(null===(e=this.$container)||void 0===e?void 0:e.clientHeight)||300,o=this.canvas;o&&(o.width=r*n,o.height=i*n),this.rendererService.viewport({x:0,y:0,width:n*r,height:n*i})}},{key:"setCanvas",value:function(){var t,e,n=$.b.DPR,r=(null===(t=this.$container)||void 0===t?void 0:t.clientWidth)||400,i=(null===(e=this.$container)||void 0===e?void 0:e.clientHeight)||300,o=this.canvas;o.width=r*n,o.height=i*n,o.style.width="100%",o.style.height="100%"}},{key:"addSceneEvent",value:function(t){this.emit(t.type,t)}}]),e}(nt.EventEmitter),S=Object(Y.a)(E.prototype,"id",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=Object(Y.a)(E.prototype,"iconService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(Y.a)(E.prototype,"fontService",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=Object(Y.a)(E.prototype,"controlService",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=Object(Y.a)(E.prototype,"configService",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=Object(Y.a)(E.prototype,"map",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=Object(Y.a)(E.prototype,"coordinateSystemService",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=Object(Y.a)(E.prototype,"rendererService",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=Object(Y.a)(E.prototype,"layerService",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=Object(Y.a)(E.prototype,"debugService",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=Object(Y.a)(E.prototype,"cameraService",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=Object(Y.a)(E.prototype,"interactionService",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=Object(Y.a)(E.prototype,"pickingService",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=Object(Y.a)(E.prototype,"shaderModuleService",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=Object(Y.a)(E.prototype,"markerService",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=Object(Y.a)(E.prototype,"popupService",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=E))||w)},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(880),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(80))},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,s(u),u++}function i(t){delete c[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(l)setTimeout(a,0,t);else{var e=c[t];if(e){l=!0;try{o(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var s,u=1,c={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(e){var n=f.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){s=function(t){setTimeout(a,0,t)}}(),h.setImmediate=r,h.clearImmediate=i}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(e,n(80),n(135))},function(t,e){function n(t){var e=t.target||t.srcElement;e.__resizeRAF__&&cancelAnimationFrame(e.__resizeRAF__),e.__resizeRAF__=requestAnimationFrame(function(){var n=e.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach(function(e){e.call(n,t)})})}var r=function(t,e){function r(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",n)}var i,o=this,a=o.document,s=a.attachEvent;if("undefined"!==typeof navigator&&(i=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/)),!t.__resizeListeners__)if(t.__resizeListeners__=[],s)t.__resizeTrigger__=t,t.attachEvent("onresize",n);else{"static"===getComputedStyle(t).position&&(t.style.position="relative");var u=t.__resizeTrigger__=a.createElement("object");u.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),u.setAttribute("class","resize-sensor"),u.setAttribute("tabindex","-1"),u.setAttribute("title",""),u.__resizeElement__=t,u.onload=r,u.type="text/html",i&&t.appendChild(u),u.data="about:blank",i||t.appendChild(u)}t.__resizeListeners__.push(e)};t.exports="undefined"===typeof window?r:r.bind(window),t.exports.unbind=function(t,e){var r=document.attachEvent,i=t.__resizeListeners__||[];if(e){var o=i.indexOf(e);-1!==o&&i.splice(o,1)}else i=t.__resizeListeners__=[];if(!i.length){if(r)t.detachEvent("onresize",n);else if(t.__resizeTrigger__){var a=t.__resizeTrigger__.contentDocument,s=a&&a.defaultView;s&&(s.removeEventListener("resize",n),delete s.__resizeTrigger__),t.__resizeTrigger__=!t.removeChild(t.__resizeTrigger__)}delete t.__resizeListeners__}}},function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r,i,o=n(10),a=n(0),s=n(1),u=n(6),c=n(13),l=(n.n(c),n(19)),f=(n.n(l),n(14)),h=(n.n(f),n(883)),p="#define PI 3.14159265359",d=/precision\s+(high|low|medium)p\s+float/,v=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,m=/void\s+main\s*\([^)]*\)\s*\{\n?/,g=(r=Object(c.injectable)())(i=function(){function t(){Object(a.a)(this,t),Object(u.a)(this,"moduleCache",{}),Object(u.a)(this,"rawContentCache",{})}return Object(s.a)(t,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:p,fs:p}),this.registerModule("decode",{vs:"#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}\n",fs:""}),this.registerModule("projection",{vs:"#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0           // amap\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\n#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\nuniform vec3 u_CameraPosition;\n\n// uniform mat4 u_Mvp;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec3 project_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01\n    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // normals generated by the polygon tesselator are in lnglat offsets instead of meters\n    return normalize(vector * u_PixelsPerDegree);\n  }\n  return project_normal(vector);\n}\n// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01\n// reverse Y\nvec3 reverse_offset_normal(vec3 vector) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {\n    return vector * vec3(1.0, -1.0, 1.0);\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0\n    return vector;\n  }\n  return vector;\n}\n\nvec4 project_mvt_offset_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    return project_offset(vec4(0.0, 0.0, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n  return position;\n}\n\nvec4 project_position(vec4 position) {\n  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;\n  float b = COORDINATE_SYSTEM_P20_OFFSET;\n  float c = COORDINATE_SYSTEM_LNGLAT;\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // return vec4(\n    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), \n    //   project_scale(position.z), \n    //   position.w);\n\n     return vec4(\n      position.xy, \n      project_scale(position.z), \n      position.w);\n  }\n  return position;\n\n  // TODO: \u74e6\u7247\u5750\u6807\u7cfb & \u5e38\u89c4\u4e16\u754c\u5750\u6807\u7cfb\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nfloat project_pixel_allmap(float pixel) {\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return pixel * pow(2.0, u_Zoom);\n  }\n  return pixel * u_FocalDistance ;\n}\n\n// \u9002\u914d\u7eb9\u7406\u8d34\u56fe\u7684\u7b49\u50cf\u7d20\u5927\u5c0f\nfloat project_pixel_texture(float pixel) {\n  // mapbox zoom > 12\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    return pixel * pow(0.5, u_Zoom) * u_FocalDistance ;\n  }\n\n  // amap2 zoom > 12\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;\n  }\n\n  // amap zoom > 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    return pixel * pow(0.5, u_Zoom)* u_FocalDistance ;\n  }\n  \n  // amap zoom < 12\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return pixel * pow(2.0, (20.0 - u_Zoom))* u_FocalDistance ;\n  }\n  return pixel * 2.0 *  u_FocalDistance;;\n}\n\n// \u5728\u4e0d\u8bba\u4ec0\u4e48\u5e95\u56fe\u4e0b\u9700\u8981\u7edf\u4e00\u5904\u7406\u7684\u65f6\u5019\u4f7f\u7528\nfloat project_float_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // mapbox P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom))  * u_FocalDistance ;\n  }\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // amap P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // amap2 P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))* u_FocalDistance ;\n  }\n  return pixel * u_FocalDistance;\n}\n\nfloat project_pixel(float pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // amap P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // amap2 P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  return pixel * u_FocalDistance;\n}\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom)) * u_FocalDistance ;\n  }\n  return pixel * -1. * u_FocalDistance;\n}\nvec3 project_pixel(vec3 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n    return pixel * pow(2.0, (19.0 - u_Zoom)) *  u_FocalDistance ;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom))  * u_FocalDistance ;\n  }\n  return pixel * -1. * u_FocalDistance;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}\n\nvec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {\n  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n     pos.w = pos.w / u_PixelsPerMeter.z;\n  }\n  return pos;\n}\n\n\nbool isEqual( float a,  float b) {\n    return  a< b + 0.001 && a > b - 0.001;\n}",fs:""}),this.registerModule("project",{vs:"\n#define E 2.718281828459045\nvec2 ProjectFlat(vec2 lnglat){\n  float maxs=85.0511287798;\n  float lat=max(min(maxs,lnglat.y),-maxs);\n  float scale= 268435456.;\n  float d=PI/180.;\n  float x=lnglat.x*d;\n  float y=lat*d;\n  y=log(tan((PI/4.)+(y/2.)));\n\n  float a=.5/PI,\n  b=.5,\n  c=-.5/PI;\n  d=.5;\n  x=scale*(a*x+b);\n  y=scale*(c*y+d);\n  return vec2(x,y);\n}\n\nvec2 unProjectFlat(vec2 px){\n  float a=.5/PI;\n  float b=.5;\n  float c=-.5/PI;\n  float d=.5;\n  float scale = 268435456.;\n  float x=(px.x/scale-b)/a;\n  float y=(px.y/scale-d)/c;\n  y=(atan(pow(E,y))-(PI/4.))*2.;\n  d=PI/180.;\n  float lat=y/d;\n  float lng=x/d;\n  return vec2(lng,lat);\n}\n\nfloat pixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}\n\n// gaode2.0\nvec2 customProject(vec2 lnglat) { // \u7ecf\u7eac\u5ea6 => \u5e73\u9762\u5750\u6807\n  float t = lnglat.x;\n  float e = lnglat.y;\n  float Sm = 180.0 / PI;\n  float Tm = 6378137.0;\n  float Rm = PI / 180.0;\n  float r = 85.0511287798;\n  e = max(min(r, e), -r);\n  t *= Rm;\n  e *= Rm;\n  e = log(tan(PI / 4.0 + e / 2.0));\n  return vec2(t * Tm, e * Tm);\n}\n\nvec2 unProjCustomCoord(vec2 point) { // \u5e73\u9762\u5750\u6807 => \u7ecf\u7eac\u5ea6\n  float Sm = 57.29577951308232; //180 / Math.PI\n  float Tm = 6378137.0;\n  float t = point.x;\n  float e = point.y;\n  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);\n}\n\n\nfloat customPixelDistance(vec2 from, vec2 to) {\n vec2 a1 = ProjectFlat(from);\n vec2 b1 = ProjectFlat(to);\n return distance(a1, b1);\n}",fs:""}),this.registerModule("sdf_2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b)\n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}\n"}),this.registerModule("lighting",{vs:"// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_Ambient : 1.0;\nuniform float u_Diffuse : 1.0;\nuniform float u_Specular : 1.0;\nuniform int u_NumOfDirectionalLights : 1;\nuniform int u_NumOfSpotLights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_Ambient;\n  vec3 diffuse = light.diffuse * diff * u_Diffuse;\n  vec3 specular = light.specular * spec * u_Specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance +\n//           light.quadratic * (distance * distance));\n\n//   vec3 ambient = light.ambient * u_Ambient;\n//   vec3 diffuse = light.diffuse * diff * u_Diffuse;\n//   vec3 specular = light.specular * spec * u_Specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_NumOfDirectionalLights) {\n      break;\n    }\n    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_NumOfSpotLights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);\n  // }\n  return weight;\n}\n",fs:""}),this.registerModule("light",{vs:"#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n      // //cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(vec3(1, -10.5, 12));\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n      // //lambert\n    float lambert = dot(worldNormal, lightDir);\n        //specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n        //sum to light weight\n    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;\n\n    return lightWeight;\n}\n",fs:""}),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec3 u_CurrentSelectedId : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform vec4 u_SelectColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\nuniform float u_PickingBuffer: 0.0;\nuniform float u_shaderPick;\nuniform float u_EnableSelect: 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define NORMAL 0.0\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\n// \u5224\u65ad\u5f53\u524d\u70b9\u662f\u5426\u5df2\u7ecf\u88ab select \u9009\u4e2d\nbool isVertexSelected(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  if(u_shaderPick < 0.5) {\n    return;\n  }\n  // compares only in highlight stage\n\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {\n  //   // \u9009\u4e2d\u6001\n  //   v_PickingResult.a = SELECT;\n  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {\n  //   // \u9ad8\u4eae\u6001\n  //   v_PickingResult.a = HIGHLIGHT;\n  // } else {\n  //   v_PickingResult.a = NORMAL;\n  // }\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n\nfloat setPickingSize(float x) {\n   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;\n}\n\nfloat setPickingOrder(float z) {\n   bool selected = bool(v_PickingResult.a);\n   return selected ? z + 1. : 0.;\n}\n",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform vec4 u_SelectColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_shaderPick;\n\nuniform float u_activeMix: 0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n#define HIGHLIGHT 1.0\n#define SELECT 2.0\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color, float weight) {\n  // float selected = v_PickingResult.a;\n  bool selected = bool(v_PickingResult.a);\n\n  // if (selected == SELECT) {\n  if (selected) {\n  //   // \u70b9\u51fb\u9009\u4e2d\u72b6\u6001\n  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;\n  //   return selectColor;\n  // } else if (selected == HIGHLIGHT) {\n  //   // hover \u9ad8\u4eae\u72b6\u6001\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  // \u8fc7\u6ee4\u591a\u4f59\u7684 shader \u8ba1\u7b97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65f6\u53bb\u9664 \u76f4\u63a5\u53d6\u6d88\u8ba1\u7b97\u5728\u9009\u4e2d\u65f6\u62d6\u62fd\u5730\u56fe\u4f1a\u6709\u95ee\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, 1.0));\n  }\n  \n}\n\nvec4 filterColorAlpha(vec4 color, float alpha) {\n  // \u8fc7\u6ee4\u591a\u4f59\u7684 shader \u8ba1\u7b97\n  // return color;\n  if(u_shaderPick < 0.5) {\n    return color; // \u6682\u65f6\u53bb\u9664 \u76f4\u63a5\u53d6\u6d88\u8ba1\u7b97\u5728\u9009\u4e2d\u65f6\u62d6\u62fd\u5730\u56fe\u4f1a\u6709\u95ee\u9898\n  } else {\n    return filterPickingColor(filterHighlightColor(color, alpha));\n  }\n}\n\n"}),this.registerModule("commom_attr_vert",{vs:"#ifdef USE_ATTRIBUTE_OPACITY\n  attribute float a_Opacity;\n#endif\n\n#ifdef USE_ATTRIBUTE_OFFSETS\n  attribute vec2 a_Offsets;\n#endif\n\n#ifdef USE_ATTRIBUTE_STROKE\n  attribute vec4 a_Stroke;\n#endif",fs:""}),this.registerModule("opacity_attr_vert",{vs:"float opacity = u_opacity;\n\n#ifdef USE_ATTRIBUTE_OPACITY\n    opacity = a_Opacity;\n#endif",fs:""})}},{key:"registerModule",value:function(t,e){var n=e.vs,r=e.fs,i=e.uniforms,a=e.inject,s=Object(h.a)(n),u=s.content,c=s.uniforms,l=Object(h.a)(r),f=l.content,p=l.uniforms;this.rawContentCache[t]={fs:f,inject:a,uniforms:Object(o.a)(Object(o.a)(Object(o.a)({},c),p),i),vs:u}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(t){var e=this,n=this.rawContentCache[t].vs,r=this.rawContentCache[t].fs,i=this.rawContentCache[t].inject,a={};null!==i&&void 0!==i&&i["vs:#decl"]&&(n=(null===i||void 0===i?void 0:i["vs:#decl"])+n,a=Object(h.a)(null===i||void 0===i?void 0:i["vs:#decl"]).uniforms),null!==i&&void 0!==i&&i["vs:#main-start"]&&(n=n.replace(m,function(t){return t+(null===i||void 0===i?void 0:i["vs:#main-start"])}));var s=this.processModule(n,[],"vs"),u=s.content,c=s.includeList,f=this.processModule(r,[],"fs"),p=f.content,v=f.includeList,g="",y=Object(l.uniq)(c.concat(v).concat(t)).reduce(function(t,n){return Object(o.a)(Object(o.a)({},t),e.rawContentCache[n].uniforms)},Object(o.a)({},a));return d.test(p)||(g+="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"),g+=p,this.moduleCache[t]={fs:g.trim(),uniforms:y,vs:u.trim()},this.moduleCache[t]}},{key:"processModule",value:function(t,e,n){var r=this;return{content:t.replace(v,function(t,i){var o=i.split(" "),a=o[0].replace(/"/g,"");if(e.indexOf(a)>-1)return"";var s=r.rawContentCache[a][n];return e.push(a),r.processModule(s,e,n).content}),includeList:e}}},{key:"injectDefines",value:function(t){return Object.keys(t).reduce(function(e,n){return e+"#define ".concat(n.toUpperCase()," ").concat(t[n],";\n")},"\n")}}]),t}())||i},function(t,e,n){"use strict";function r(t){var e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16}return e}function i(t){var e={};return t=t.replace(o,function(t,n,i){var o=i.split(":"),a=o[0].trim(),s="";switch(o.length>1&&(s=o[1].trim()),n){case"bool":s="true"===s;break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s=s?s.replace("[","").replace("]","").split(",").reduce(function(t,e){return t.push(Number(e.trim())),t},[]):new Array(r(n)).fill(0)}return e[a]=s,"uniform ".concat(n," ").concat(a,";\n")}),{content:t,uniforms:e}}e.a=i;var o=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o,a,s=n(0),u=n(1),c=n(32),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(14)),v=(n.n(d),n(196)),m=(o=Object(p.injectable)())(a=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(t,n){Object(c.a)(Object(h.a)(e.prototype),"init",this).call(this,t,n)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),e}(v.a))||a},function(t,e,n){"use strict";function r(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(i.a)(t)););return t}e.a=r;var i=n(2)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",function(){return E});var a,s,u,c,l,f=n(7),h=n(39),p=n(0),d=n(1),v=n(6),m=n(40),g=(n(41),n(8)),y=n.n(g),_=n(13),b=(n.n(_),n(14)),x=(n.n(b),n(42)),w=n(110),E=(a=Object(_.injectable)(),s=Object(_.inject)(x.a.IPostProcessor),a((c=function(){function t(){Object(p.a)(this,t),Object(v.a)(this,"passes",[]),Object(h.a)(this,"postProcessor",l,this),Object(v.a)(this,"layer",void 0),Object(v.a)(this,"renderFlag",void 0),Object(v.a)(this,"width",0),Object(v.a)(this,"height",0)}return Object(d.a)(t,[{key:"setLayer",value:function(t){this.layer=t}},{key:"setRenderFlag",value:function(t){this.renderFlag=t}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){function t(){return e.apply(this,arguments)}var e=Object(f.a)(y.a.mark(function t(){var e,n,i;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=r(this.passes),t.prev=1,e.s();case 3:if((n=e.n()).done){t.next=9;break}return i=n.value,t.next=7,i.render(this.layer);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:return t.next=19,this.postProcessor.render(this.layer);case 19:case"end":return t.stop()}},t,this,[[1,11,14,17]])}));return t}()},{key:"resize",value:function(t,e){this.width===t&&this.height===e||(this.postProcessor.resize(t,e),this.width=t,this.height=e)}},{key:"add",value:function(t,e){t.getType()===w.a.PostProcessing?this.postProcessor.add(t,this.layer,e):(t.init(this.layer,e),this.passes.push(t))}},{key:"insert",value:function(t,e,n){t.init(this.layer,e),this.passes.splice(n,0,t)}},{key:"destroy",value:function(){this.passes.length=0}}]),t}(),l=Object(m.a)(c.prototype,"postProcessor",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return S});var o,a,s=n(15),u=n(10),c=n(0),l=n(1),f=n(12),h=n(32),p=n(3),d=n(4),v=n(2),m=n(6),g=n(9),y=n(13),_=(n.n(y),n(14)),b=(n.n(_),n(160)),x=n(109),w=n(110),E=n(196),S=(o=Object(y.injectable)())(a=function(t){function e(){var t;Object(c.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(m.a)(Object(f.a)(t),"pickingFBO",void 0),Object(m.a)(Object(f.a)(t),"layer",void 0),Object(m.a)(Object(f.a)(t),"width",0),Object(m.a)(Object(f.a)(t),"height",0),Object(m.a)(Object(f.a)(t),"alreadyInRendering",!1),Object(m.a)(Object(f.a)(t),"pickFromPickingFBO",function(e){var n=e.x,r=e.y,i=e.lngLat,o=e.type;if(t.layer.isVisible()&&t.layer.needPick(o)){var a=t.rendererService,s=a.getViewportSize,c=a.readPixels,l=a.useFramebuffer,f=s(),h=f.width,p=f.height,d=t.layer.getLayerConfig(),v=d.enableHighlight,m=d.enableSelect,y=n*g.b.DPR,_=r*g.b.DPR;if(!(y>h||y<0||_>p||_<0)){var b;l(t.pickingFBO,function(){var e;if(b=c({x:Math.round(y),y:Math.round(p-(r+1)*g.b.DPR),width:1,height:1,data:new Uint8Array(4),framebuffer:t.pickingFBO}),0!==b[0]||0!==b[1]||0!==b[2]){var a=Object(g.s)(b),s=t.layer.getSource().getFeatureById(a),l={x:n,y:r,type:o,lngLat:i,featureId:a,feature:s};s&&(t.layer.setCurrentPickId(a),t.triggerHoverOnLayer(l))}else{var f={x:n,y:r,lngLat:i,type:null===t.layer.getCurrentPickId()?"un"+o:"mouseout",featureId:null,feature:null};t.triggerHoverOnLayer(Object(u.a)(Object(u.a)({},f),{},{type:"unpick"})),t.triggerHoverOnLayer(f),t.layer.setCurrentPickId(null)}v&&t.highlightPickedFeature(b),m&&"click"===o&&(null===(e=b)||void 0===e?void 0:e.toString())!==[0,0,0,0].toString()&&t.selectFeature(b)})}}}),t}Object(p.a)(e,t);var n=r(e);return Object(l.a)(e,[{key:"getType",value:function(){return w.a.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(t,n){Object(h.a)(Object(v.a)(e.prototype),"init",this).call(this,t,n),this.layer=t;var r=this.rendererService,i=r.createTexture2D,o=r.createFramebuffer,a=r.getViewportSize,s=a(),u=s.width,c=s.height;this.pickingFBO=o({color:i({width:u,height:c,wrapS:x.a.CLAMP_TO_EDGE,wrapT:x.a.CLAMP_TO_EDGE})}),this.interactionService.on(b.a.Hover,this.pickFromPickingFBO),this.interactionService.on(b.a.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(b.a.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(t){var e=this;if(!this.alreadyInRendering){var n=this.rendererService,r=n.getViewportSize,i=n.useFramebuffer,o=n.clear,a=r(),s=a.width,u=a.height;this.alreadyInRendering=!0,this.width===s&&this.height===u||(this.pickingFBO.resize({width:s,height:u}),this.width=s,this.height=u),i(this.pickingFBO,function(){o({framebuffer:e.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var n=e.layer.multiPassRenderer.getRenderFlag();e.layer.multiPassRenderer.setRenderFlag(!1),t.hooks.beforePickingEncode.call(),t.render(),t.hooks.afterPickingEncode.call(),e.layer.multiPassRenderer.setRenderFlag(n),e.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(t){this.layer.emit(t.type,t)}},{key:"highlightPickedFeature",value:function(t){var e=Object(s.a)(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(t){var e=Object(s.a)(t,3),n=e[0],r=e[1],i=e[2];this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(t){var e=t.featureId,n=Object(g.t)(e);this.selectFeature(new Uint8Array(n))}},{key:"highlightFeatureHandle",value:function(t){var e=t.featureId,n=Object(g.t)(e);this.highlightPickedFeature(new Uint8Array(n))}}]),e}(E.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o,a,s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(19)),v=(n.n(d),n(14)),m=(n.n(v),n(75)),g=(o=Object(p.injectable)())(a=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform float u_BloomFinal: 0.0;\nuniform sampler2D u_Texture;\nuniform sampler2D u_Texture2;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_radius: 5.0;\nuniform float u_intensity: 0.3;\nuniform float u_baseRadio: 0.5;\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nfloat luminance(vec4 color) {\n  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;\n}\n\nvoid main() {\n  // vec4 baseColor = texture2D(u_Texture, v_UV);\n\n  float r = sqrt(u_radius);\n\n  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));\n  // c1 *= luminance(c1);\n  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));\n  // c2 *= luminance(c2);\n  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));\n  // c3 *= luminance(c3);\n  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));\n  // c4 *= luminance(c4);\n  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;\n\n  // float lum = luminance(inbloomColor);\n  // inbloomColor.rgb *= lum;\n\n  if(u_BloomFinal > 0.0) {\n    vec4 baseColor = texture2D(u_Texture2, v_UV);\n    float baselum = luminance(baseColor);\n    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);\n    if(baselum <= 0.2) {\n      gl_FragColor = inbloomColor * u_intensity;\n    }\n  } else {\n    gl_FragColor = inbloomColor;\n  }\n}"});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(s.a)(Object(s.a)({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object(d.isNil)(t.bloomRadius)||(e.u_radius=t.bloomRadius),Object(d.isNil)(t.bloomIntensity)||(e.u_intensity=t.bloomIntensity),Object(d.isNil)(t.bloomBaseRadio)||(e.u_baseRadio=t.bloomBaseRadio),e}}]),e}(m.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o,a,s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(19)),v=(n.n(d),n(14)),m=(n.n(v),n(75)),g=(o=Object(p.injectable)())(a=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(s.a)(Object(s.a)({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object(d.isNil)(t.blurRadius)||(e.u_BlurDir=[t.blurRadius,0]),e}}]),e}(m.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o,a,s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(19)),v=(n.n(d),n(75)),m=(o=Object(p.injectable)())(a=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});var t=this.shaderModuleService.getModule("blur-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(s.a)(Object(s.a)({},r),{},{u_ViewportSize:[o,a]})}}},{key:"convertOptionsToUniforms",value:function(t){var e={};return Object(d.isNil)(t.blurRadius)||(e.u_BlurDir=[0,t.blurRadius]),e}}]),e}(v.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o,a,s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(14)),v=(n.n(d),n(75)),m=(o=Object(p.injectable)())(a=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:'varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}'});var t=this.shaderModuleService.getModule("colorhalftone-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(s.a)(Object(s.a)({},r),{},{u_ViewportSize:[o,a]})}}}]),e}(v.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return v});var o,a,s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(13),p=(n.n(h),n(14)),d=(n.n(p),n(75)),v=(o=Object(h.injectable)())(a=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}"}),this.shaderModuleService.getModule("copy-pass")}}]),e}(d.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o,a,s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(14)),v=(n.n(d),n(75)),m=(o=Object(p.injectable)())(a=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});var t=this.shaderModuleService.getModule("hexagonalpixelate-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(s.a)(Object(s.a)({},r),{},{u_ViewportSize:[o,a]})}}}]),e}(v.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o,a,s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(14)),v=(n.n(d),n(75)),m=(o=Object(p.injectable)())(a=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});var t=this.shaderModuleService.getModule("ink-pass"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService.getViewportSize(),o=i.width,a=i.height;return{vs:e,fs:n,uniforms:Object(s.a)(Object(s.a)({},r),{},{u_ViewportSize:[o,a]})}}}]),e}(v.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return v});var o,a,s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(13),p=(n.n(h),n(14)),d=(n.n(p),n(75)),v=(o=Object(h.injectable)())(a=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}"}),this.shaderModuleService.getModule("noise-pass")}}]),e}(d.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return v});var o,a,s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(13),p=(n.n(h),n(14)),d=(n.n(p),n(75)),v=(o=Object(h.injectable)())(a=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}"}),this.shaderModuleService.getModule("sepia-pass")}}]),e}(d.a))||a},function(t,e,n){"use strict";n.d(e,"a",function(){return x});var r,i,o,a,s,u,c=n(7),l=n(39),f=n(0),h=n(1),p=n(6),d=n(40),v=(n(41),n(8)),m=n.n(v),g=n(13),y=(n.n(g),n(14)),_=(n.n(y),n(42)),b=n(109),x=(r=Object(g.injectable)(),i=Object(g.inject)(_.a.IRendererService),o=Object(g.postConstruct)(),r((s=function(){function t(){Object(f.a)(this,t),Object(l.a)(this,"rendererService",u,this),Object(p.a)(this,"passes",[]),Object(p.a)(this,"readFBO",void 0),Object(p.a)(this,"writeFBO",void 0)}return Object(h.a)(t,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var t=this.rendererService,e=t.getViewportSize,n=t.createTexture2D,r=e();return n({x:0,y:0,width:r.width,height:r.height,copy:!0})}},{key:"getReadFBOTex",value:function(){var t=this,e=this.rendererService.useFramebuffer;return new Promise(function(n){e(t.readFBO,Object(c.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n(t.getCurrentFBOTex());case 1:case"end":return e.stop()}},e)})))})}},{key:"renderBloomPass",value:function(){function t(t,n){return e.apply(this,arguments)}var e=Object(c.a)(m.a.mark(function t(e,n){var r,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getReadFBOTex();case 2:r=t.sent,i=0;case 4:if(!(i<4)){t.next=11;break}return t.next=7,n.render(e,r);case 7:this.swap(),i++,t.next=4;break;case 11:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(c.a)(m.a.mark(function t(e){var n,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<this.passes.length)){t.next=15;break}if(r=this.passes[n],r.setRenderToScreen(this.isLastEnabledPass(n)),"bloom"!==r.getName()){t.next=9;break}return t.next=7,this.renderBloomPass(e,r);case 7:t.next=12;break;case 9:return t.next=11,r.render(e);case 11:n!==this.passes.length-1&&this.swap();case 12:n++,t.next=1;break;case 15:case"end":return t.stop()}},t,this)}));return t}()},{key:"resize",value:function(t,e){this.readFBO.resize({width:t,height:e}),this.writeFBO.resize({width:t,height:e})}},{key:"add",value:function(t,e,n){t.init(e,n),this.passes.push(t)}},{key:"insert",value:function(t,e,n,r){t.init(n,r),this.passes.splice(e,0,t)}},{key:"getPostProcessingPassByName",value:function(t){return this.passes.find(function(e){return e.getName()===t})}},{key:"init",value:function(){var t=this.rendererService,e=t.createFramebuffer,n=t.createTexture2D;this.readFBO=e({color:n({width:1,height:1,wrapS:b.a.CLAMP_TO_EDGE,wrapT:b.a.CLAMP_TO_EDGE})}),this.writeFBO=e({color:n({width:1,height:1,wrapS:b.a.CLAMP_TO_EDGE,wrapT:b.a.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].isEnabled())return!1;return!0}},{key:"swap",value:function(){var t=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=t}}]),t}(),u=Object(d.a)(s.prototype,"rendererService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(d.a)(s.prototype,"init",[o],Object.getOwnPropertyDescriptor(s.prototype,"init"),s.prototype),a=s))||a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o,a,s=n(0),u=n(1),c=n(32),l=n(3),f=n(4),h=n(2),p=n(13),d=(n.n(p),n(14)),v=(n.n(d),n(110)),m=n(196),g=(o=Object(p.injectable)())(a=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getType",value:function(){return v.a.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(t,n){Object(c.a)(Object(h.a)(e.prototype),"init",this).call(this,t,n)}},{key:"render",value:function(t){var e=this.rendererService,n=e.useFramebuffer,r=e.clear,i=t.multiPassRenderer.getPostProcessor().getReadFBO();n(i,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),t.multiPassRenderer.setRenderFlag(!1),t.models.forEach(function(e){e.draw({uniforms:t.layerModel.getUninforms()})}),t.multiPassRenderer.setRenderFlag(!0)})}}]),e}(m.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(_.a)(t);if(e){var i=Object(_.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,e){for(var n=0,r=1/e,i=t;i>0;)n+=r*(i%e),i=Math.floor(i/e),r/=e;return n}n.d(e,"a",function(){return P});var a,s,u,c,l,f=n(10),h=n(39),p=n(0),d=n(1),v=n(12),m=n(32),g=n(3),y=n(4),_=n(2),b=n(6),x=n(40),w=(n(41),n(9)),E=n(13),S=(n.n(E),n(14)),O=(n.n(S),n(42)),T=n(109),A=n(110),C=n(196),k="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}",M=1,P=(a=Object(E.injectable)(),s=Object(E.inject)(O.a.IShaderModuleService),a((c=function(t){function e(){var t;Object(p.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(v.a)(t),"shaderModuleService",l,Object(v.a)(t)),Object(b.a)(Object(v.a)(t),"haltonSequence",[]),Object(b.a)(Object(v.a)(t),"accumulatingId",0),Object(b.a)(Object(v.a)(t),"frame",0),Object(b.a)(Object(v.a)(t),"timer",void 0),Object(b.a)(Object(v.a)(t),"sampleRenderTarget",void 0),Object(b.a)(Object(v.a)(t),"prevRenderTarget",void 0),Object(b.a)(Object(v.a)(t),"outputRenderTarget",void 0),Object(b.a)(Object(v.a)(t),"copyRenderTarget",void 0),Object(b.a)(Object(v.a)(t),"blendModel",void 0),Object(b.a)(Object(v.a)(t),"outputModel",void 0),Object(b.a)(Object(v.a)(t),"copyModel",void 0),t}Object(g.a)(e,t);var n=r(e);return Object(d.a)(e,[{key:"getType",value:function(){return A.a.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(t,n){Object(m.a)(Object(_.a)(e.prototype),"init",this).call(this,t,n);var r=this.rendererService,i=r.createFramebuffer,a=r.createTexture2D;this.sampleRenderTarget=i({color:a({width:1,height:1,wrapS:T.a.CLAMP_TO_EDGE,wrapT:T.a.CLAMP_TO_EDGE})}),this.prevRenderTarget=i({color:a({width:1,height:1,wrapS:T.a.CLAMP_TO_EDGE,wrapT:T.a.CLAMP_TO_EDGE})}),this.outputRenderTarget=i({color:a({width:1,height:1,wrapS:T.a.CLAMP_TO_EDGE,wrapT:T.a.CLAMP_TO_EDGE})}),this.copyRenderTarget=i({color:a({width:1,height:1,wrapS:T.a.CLAMP_TO_EDGE,wrapT:T.a.CLAMP_TO_EDGE})});for(var s=0;s<30;s++)this.haltonSequence.push([o(s,2),o(s,3)]);this.blendModel=this.createTriangleModel("blend-pass","uniform float u_opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);\n}\n"),this.outputModel=this.createTriangleModel("copy-pass",k,{blend:{enable:!0,func:{srcRGB:T.a.ONE,dstRGB:T.a.ONE_MINUS_SRC_ALPHA,srcAlpha:T.a.ONE,dstAlpha:T.a.ONE_MINUS_SRC_ALPHA},equation:{rgb:T.a.FUNC_ADD,alpha:T.a.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",k)}},{key:"render",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height;this.sampleRenderTarget.resize({width:s,height:u}),this.prevRenderTarget.resize({width:s,height:u}),this.outputRenderTarget.resize({width:s,height:u}),this.copyRenderTarget.resize({width:s,height:u}),this.resetFrame(),this.stopAccumulating();var c=t.multiPassRenderer.getPostProcessor().getReadFBO();o(c,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:c}),t.multiPassRenderer.setRenderFlag(!1),t.render(),t.multiPassRenderer.setRenderFlag(!0)});var l=function n(r){e.accumulatingId&&r===e.accumulatingId&&(e.isFinished()||(e.doRender(t),w.a.requestAnimationFrame(function(){n(r)})))};this.accumulatingId=M++,this.timer=w.a.setTimeout(function(){l(e.accumulatingId)},50)}},{key:"doRender",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.getViewportSize,o=n.useFramebuffer,a=i(),s=a.width,u=a.height,c=t.getLayerConfig(),l=c.jitterScale,f=void 0===l?1:l,h=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*h[0]-1)/s*f,(2*h[1]-1)/u*f),t.multiPassRenderer.setRenderFlag(!1),t.hooks.beforeRender.call(),o(this.sampleRenderTarget,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:e.sampleRenderTarget}),t.render()}),t.hooks.afterRender.call(),t.multiPassRenderer.setRenderFlag(!0);var p=t.getLayerConfig();o(this.outputRenderTarget,function(){e.blendModel.draw({uniforms:{u_opacity:p.opacity||1,u_MixRatio:0===e.frame?1:.9,u_Diffuse1:e.sampleRenderTarget,u_Diffuse2:0===e.frame?t.multiPassRenderer.getPostProcessor().getReadFBO():e.prevRenderTarget}})}),0===this.frame&&r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(o(this.copyRenderTarget,function(){e.outputModel.draw({uniforms:{u_Texture:e.outputRenderTarget}})}),o(t.multiPassRenderer.getPostProcessor().getReadFBO(),function(){e.copyModel.draw({uniforms:{u_Texture:e.copyRenderTarget}})}),t.multiPassRenderer.getPostProcessor().render(t));var d=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=d,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,w.a.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(t,e,n){this.shaderModuleService.registerModule(t,{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:e});var r=this.shaderModuleService.getModule(t),i=r.vs,o=r.fs,a=r.uniforms,s=this.rendererService,u=s.createAttribute,c=s.createBuffer;return(0,s.createModel)(Object(f.a)({vs:i,fs:o,attributes:{a_Position:u({buffer:c({data:[-4,-4,4,-4,0,4],type:T.a.FLOAT}),size:2})},uniforms:Object(f.a)({},a),depth:{enable:!1},count:3},n))}}]),e}(C.a),l=Object(x.a)(c.prototype,"shaderModuleService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u)},function(t,e,n){"use strict";var r=(n(15),n(19));n.n(r),n(901)},function(t,e,n){"use strict";function r(t){return i.indexOf(t)}e.a=r;var i=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"]},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"}},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o});var r;!function(t){t.LINEAR="linear",t.SEQUENTIAL="sequential",t.POWER="power",t.LOG="log",t.IDENTITY="identity",t.TIME="time",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.CAT="cat",t.DIVERGING="diverging"}(r||(r={}));var i;!function(t){t.CONSTANT="constant",t.VARIABLE="variable"}(i||(i={}));var o;!function(t){t[t.Attribute=0]="Attribute",t[t.InstancedAttribute=1]="InstancedAttribute",t[t.Uniform=2]="Uniform"}(o||(o={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["mapload","mapchange","mapAfterFrameChange"]},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"]},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r;!function(t){t.IMAGE="image",t.CUSTOMIMAGE="customImage",t.ARRAYBUFFER="arraybuffer",t.RGB="rgb",t.TERRAINRGB="terrainRGB",t.CUSTOMRGB="customRGB",t.CUSTOMARRAYBUFFER="customArrayBuffer",t.CUSTOMTERRAINRGB="customTerrainRGB"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",function(){return u}),n.d(e,"b",function(){return c});var r=n(7),i=n(8),o=n.n(i),a=n(9),s=n(195),u=function(){var t=Object(r.a)(o.a.mark(function t(e,n,r,i){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,o){n({x:e.x,y:e.y,z:e.z},function(e,n){if(e||0===n.length)return void o(e);n&&Object(s.b)([{data:n,bands:[0]}],r,i,function(e,n){e?o(e):n&&t(n)})})}));case 1:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}(),c=function(){var t=Object(r.a)(o.a.mark(function t(e,n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){n({x:e.x,y:e.y,z:e.z},function(e,n){if(e||!n)return void r(e);n instanceof ArrayBuffer?Object(a.v)(n,function(e,n){e&&r(e),t(n)}):n instanceof HTMLImageElement?t(n):r(e)})}));case 1:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"c",function(){return f}),n.d(e,"a",function(){return h});var r=n(10),i=n(7),o=n(8),a=n.n(o),s=n(9),u=n(927),c=n(430),l=function(){var t=Object(i.a)(a.a.mark(function t(e,n,r,i,o){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={url:Object(c.c)(e,n)},t.abrupt("return",new Promise(function(t,e){Object(u.a)(r,s,function(n,r){n?e(n):r&&t(r)},i,o)}));case 2:case"end":return t.stop()}},t)}));return function(e,n,r,i,o){return t.apply(this,arguments)}}(),f=function(){var t=Object(i.a)(a.a.mark(function t(e,n,i,o){var u,c,l,f;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=Array.isArray(e)?e[0]:e,o.wmtsOptions?(l=(null===o||void 0===o?void 0:o.getURLFromTemplate)||s.H,u=l(c,Object(r.a)(Object(r.a)({},n),o.wmtsOptions))):(f=(null===o||void 0===o?void 0:o.getURLFromTemplate)||s.G,u=f(c,n)),t.abrupt("return",new Promise(function(t,e){var n,r=Object(s.F)({url:u,type:(null===o||void 0===o?void 0:null===(n=o.requestParameters)||void 0===n?void 0:n.type)||"arrayBuffer"},function(n,r){n?e(n):r&&t(r)},o.transformResponse);i.xhrCancel=function(){return r.abort()}}));case 3:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}(),h=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}}},function(t,e,n){"use strict";function r(t,e){return i.apply(this,arguments)}function i(){return i=Object(a.a)(u.a.mark(function t(e,n){var r,i,a,s,l,f,h,p,d,v,m;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[],i=[],a=[],s=0;case 4:if(!(s<e.length)){t.next=20;break}return l=e[s],f=Object(o.a)(Object(o.a)({},n),{},{url:l.url}),h=l.bands,t.next=10,Object(c.P)(Object(o.a)(Object(o.a)({},f),{},{type:"arrayBuffer"}));case 10:p=t.sent,d=p.err,v=p.data,m=p.xhr,d&&a.push(d),i.push(m),r.push({data:v,bands:h});case 17:s++,t.next=4;break;case 20:return t.abrupt("return",{rasterFiles:r,xhrList:i,errList:a});case 21:case"end":return t.stop()}},t)})),i.apply(this,arguments)}n.d(e,"a",function(){return h});var o=n(10),a=n(7),s=n(8),u=n.n(s),c=n(9),l=n(195),f=n(430),h=function(){var t=Object(a.a)(u.a.mark(function t(e,n,i,o,a){var s,h,p,d,v,m;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Object(f.b)(n.url),!(s.length>1)){t.next=15;break}return t.next=4,r(s,n);case 4:if(h=t.sent,p=h.rasterFiles,d=h.xhrList,v=h.errList,Object(f.a)(e,d),!(v.length>0)){t.next=12;break}return i(v,null),t.abrupt("return");case 12:Object(l.b)(p,o,a,i),t.next=17;break;case 15:m=Object(c.B)(n,function(t,e){if(t)i(t);else if(e){var n=[{data:e,bands:s[0].bands}];Object(l.b)(n,o,a,i)}}),Object(f.a)(e,[m]);case 17:case"end":return t.stop()}},t)}));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";function r(t,e){var n,r=e.extent,c=e.min,l=e.max,f=e.width,h=e.height,p=e.format,d=e.operation,v=Object(o.a)(e,u);if(void 0===p||Object(s.b)(t))n=Array.from(t);else{var m=Array.isArray(t)?t:[t];n=Object(a.a)(m,p,d)}return{_id:1,dataArray:[Object(i.a)(Object(i.a)({_id:1,data:n,width:f,height:h},v),{},{min:c,max:l,coordinates:[[r[0],r[1]],[r[2],r[3]]]})]}}e.a=r;var i=n(10),o=n(49),a=n(195),s=n(282),u=["extent","min","max","width","height","format","operation"]},function(t,e,n){"use strict";function r(t,e){var n=function(t){return l(t)};return{data:t,dataArray:[],tilesetOptions:Object(i.a)(Object(i.a)(Object(i.a)({},c),e),{},{getTileData:n}),isTile:!0}}e.a=r;var i=n(10),o=n(15),a=n(7),s=n(8),u=n.n(s),c={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},l=function(){var t=Object(a.a)(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=Object(o.a)(e.bounds,4),r=n[0],i=n[1],a=n[2],s=n[3];t({layers:{testTile:{features:[{type:"Feature",properties:{key:e.x+"/"+e.y+"/"+e.z,x:(r+a)/2,y:(i+s)/2},geometry:{type:"LineString",coordinates:[[a,s],[a,i],[r,i],[r,i]]}}]}}})}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,e){if(Array.isArray(e))return e}n.d(e,"a",function(){return O});var a=n(7),s=n(10),u=n(0),c=n(1),l=n(12),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(286),y=n(9),_=n(37),b=(n.n(_),n(19)),x=(n.n(b),n(263)),w=n(431),E=n(931),S=n(282),O=function(t){function e(t,r){var i;return Object(u.a)(this,e),i=n.call(this),Object(d.a)(Object(l.a)(i),"type","source"),Object(d.a)(Object(l.a)(i),"isTile",!1),Object(d.a)(Object(l.a)(i),"inited",!1),Object(d.a)(Object(l.a)(i),"hooks",{init:new g.e}),Object(d.a)(Object(l.a)(i),"parser",{type:"geojson"}),Object(d.a)(Object(l.a)(i),"transforms",[]),Object(d.a)(Object(l.a)(i),"cluster",!1),Object(d.a)(Object(l.a)(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),Object(d.a)(Object(l.a)(i),"invalidExtent",!1),Object(d.a)(Object(l.a)(i),"dataArrayChanged",!1),Object(d.a)(Object(l.a)(i),"cfg",{autoRender:!0}),i.originData=t,i.initCfg(r),i.init().then(function(){i.inited=!0,i.emit("update",{type:"inited"})}),i}Object(f.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"getSourceCfg",value:function(){return this.cfg}},{key:"getClusters",value:function(t){return this.clusterIndex.getClusters(this.caculClusterExtent(2),t)}},{key:"getClustersLeaves",value:function(t){return this.clusterIndex.getLeaves(t,1/0)}},{key:"getParserType",value:function(){return this.parser.type}},{key:"updateClusterData",value:function(t){var e=this,n=this.clusterOptions,r=n.method,i=void 0===r?"sum":r,o=n.field,a=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(t));this.clusterOptions.zoom=t,a.forEach(function(t){t.id||(t.properties.point_count=1)}),(o||Object(b.isFunction)(i))&&(a=a.map(function(t){var n=t.id;if(n){var r,a=e.clusterIndex.getLeaves(n,1/0),s=a.map(function(t){return t.properties});if(Object(b.isString)(i)&&o){var u=Object(S.a)(s,o);r=E.a[i](u)}Object(b.isFunction)(i)&&(r=i(s)),t.properties.stat=r}else t.properties.point_count=1;return t})),this.data=Object(x.a)("geojson")({type:"FeatureCollection",features:a}),this.executeTrans()}},{key:"getFeatureById",value:function(t){var e=this.parser,n=e.type,r=void 0===n?"geojson":n,i=e.geometry;if("geojson"!==r||this.cluster)return"json"===r&&i?this.data.dataArray.find(function(e){return e._id===t}):t<this.data.dataArray.length?this.data.dataArray[t]:"null";var o=t<this.originData.features.length?this.originData.features[t]:"null",a=Object(b.cloneDeep)(o);if(null!==a&&void 0!==a&&a.properties&&(0!==this.transforms.length||this.dataArrayChanged)){var s=this.data.dataArray.find(function(e){return e._id===t});a.properties=s}return a}},{key:"updateFeaturePropertiesById",value:function(t,e){this.data.dataArray=this.data.dataArray.map(function(n){return n._id===t?Object(s.a)(Object(s.a)({},n),e):n}),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}},{key:"getFeatureId",value:function(t,e){var n=this.data.dataArray.find(function(n){return n[t]===e});return null===n||void 0===n?void 0:n._id}},{key:"setData",value:function(t,e){var n=this;this.originData=t,this.dataArrayChanged=!1,this.initCfg(e),this.init().then(function(){n.emit("update",{type:"update"})})}},{key:"reloadAllTile",value:function(){var t;null===(t=this.tileset)||void 0===t||t.reloadAll()}},{key:"reloadTilebyId",value:function(t,e,n){var r;null===(r=this.tileset)||void 0===r||r.reloadTileById(t,e,n)}},{key:"reloadTileByLnglat",value:function(t,e,n){var r;null===(r=this.tileset)||void 0===r||r.reloadTileByLnglat(t,e,n)}},{key:"getTileExtent",value:function(t,e){var n;return null===(n=this.tileset)||void 0===n?void 0:n.getTileExtent(t,e)}},{key:"getTileByZXY",value:function(t,e,n){var r;return null===(r=this.tileset)||void 0===r?void 0:r.getTileByZXY(t,e,n)}},{key:"reloadTileByExtent",value:function(t,e){var n;null===(n=this.tileset)||void 0===n||n.reloadTileByExtent(t,e)}},{key:"destroy",value:function(){var t;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,null===(t=this.tileset)||void 0===t||t.destroy()}},{key:"processData",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(m.a.mark(function t(){var e=this;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{e.excuteParser(),e.initCluster(),e.executeTrans(),t({})}catch(t){n(t)}}));case 1:case"end":return t.stop()}},t)}));return t}()},{key:"initCfg",value:function(t){this.cfg=Object(b.mergeWith)(this.cfg,t,o);var e=this.cfg;e&&(e.parser&&(this.parser=e.parser),e.transforms&&(this.transforms=e.transforms),this.cluster=e.cluster||!1,e.clusterOptions&&(this.cluster=!0,this.clusterOptions=Object(s.a)(Object(s.a)({},this.clusterOptions),e.clusterOptions)))}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.inited=!1,t.next=3,this.processData();case 3:this.inited=!0;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"excuteParser",value:function(){var t=this.parser,e=t.type||"geojson",n=Object(x.a)(e);this.data=n(this.originData,t),this.tileset=this.initTileset(),t.cancelExtent||(this.extent=Object(y.u)(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}},{key:"setCenter",value:function(t){this.center=[(t[0]+t[2])/2,(t[1]+t[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var t=this.data.tilesetOptions;if(t){if(this.isTile=!0,this.tileset)return this.tileset.updateOptions(t),this.tileset;return new y.h(Object(s.a)({},t))}}},{key:"executeTrans",value:function(){var t=this;this.transforms.forEach(function(e){var n=e.type,r=Object(x.b)(n)(t.data,e);Object.assign(t.data,r)})}},{key:"initCluster",value:function(){if(this.cluster){var t=this.clusterOptions||{};this.clusterIndex=Object(w.a)(this.data,t)}}},{key:"caculClusterExtent",value:function(t){var e=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(e=Object(y.R)(Object(y.n)(this.extent),t)),e[0].concat(e[1])}}]),e}(_.EventEmitter)},function(t,e,n){"use strict";function r(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function i(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function o(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+1*t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+1*r}function a(t){if(0===t.length)throw new Error("mean requires at least one data point");return o(t)/t.length}n.d(e,"a",function(){return s});var s={min:i,max:r,mean:a,sum:o}},function(t,e,n){"use strict";function r(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.filter(n)),t}e.a=r},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){var n=t.dataArray,r=e.size,i=void 0===r?10:r,o=i/(2*Math.PI*p)*(256<<20)/2,a=s(n,i);return{yOffset:o,xOffset:o,radius:o,type:"grid",dataArray:f(a.gridHash,a.gridOffset,e)}}function s(t,e){var n,i,o=1/0,a=-1/0,s=r(t);try{for(s.s();!(i=s.n()).done;){n=i.value.coordinates[1],Number.isFinite(n)&&(o=n<o?n:o,a=n>a?n:a)}}catch(t){s.e(t)}finally{s.f()}var c=(o+a)/2,l=u(e,c);if(l.xOffset<=0||l.yOffset<=0)return{gridHash:{},gridOffset:l};var f,h={},p=r(t);try{for(p.s();!(f=p.n()).done;){var d=f.value,v=d.coordinates[1],m=d.coordinates[0];if(Number.isFinite(v)&&Number.isFinite(m)){var g=Math.floor((v+90)/l.yOffset),y=Math.floor((m+180)/l.xOffset),_="".concat(g,"-").concat(y);h[_]=h[_]||{count:0,points:[]},h[_].count+=1,h[_].points.push(d)}}}catch(t){p.e(t)}finally{p.f()}return{gridHash:h,gridOffset:l}}function u(t,e){return{yOffset:c(t),xOffset:l(e,t)}}function c(t){return t/p*(180/Math.PI)}function l(t,e){return e/p*(180/Math.PI)/Math.cos(t*Math.PI/180)}function f(t,e,n){return Object.keys(t).reduce(function(r,i,o){var a=i.split("-"),s=parseInt(a[0],10),u=parseInt(a[1],10),c={};if(n.field&&n.method){var l=h.g.getColumn(t[i].points,n.field);c[n.method]=h.g.statMap[n.method](l)}return Object.assign(c,{_id:o,coordinates:Object(h.i)([e.xOffset*(u+.5)-180,e.yOffset*(s+.5)-90]),rawData:t[i].points,count:t[i].count}),r.push(c),r},[])}e.a=a;var h=n(9),p=6378e3},function(t,e,n){"use strict";function r(t,e){var n=t.dataArray,r=e.size,l=void 0===r?10:r,f=e.method,h=void 0===f?"sum":f,p=l/(2*Math.PI*c)*(256<<20)/2,d=n.map(function(t){var e=Object(s.i)(t.coordinates),n=Object(a.a)(e,2),r=n[0],i=n[1];return Object(o.a)(Object(o.a)({},t),{},{coordinates:[r,i]})});return{dataArray:Object(u.a)().radius(p).x(function(t){return t.coordinates[0]}).y(function(t){return t.coordinates[1]})(d).map(function(t,n){var r;if(e.field&&h){var o=s.g.getColumn(t,e.field);t[h]=s.g.statMap[h](o)}return r={},Object(i.a)(r,e.method,t[h]),Object(i.a)(r,"count",t.length),Object(i.a)(r,"rawData",t),Object(i.a)(r,"coordinates",[t.x,t.y]),Object(i.a)(r,"_id",n),r}),radius:p,xOffset:p,yOffset:p,type:"hexagon"}}e.a=r;var i=n(6),o=n(10),a=n(15),s=n(9),u=n(935),c=6378e3},function(t,e,n){"use strict";var r=n(936);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(t){return t[0]}function i(t){return t[1]}var o=Math.PI/3,a=[0,o,2*o,3*o,4*o,5*o];e.a=function(){function t(t){var e,n={},r=[],i=t.length;for(e=0;e<i;++e)if(!isNaN(a=+p.call(null,o=t[e],e,t))&&!isNaN(c=+d.call(null,o,e,t))){var o,a,c,l=Math.round(c/=u),f=Math.round(a=a/s-(1&l)/2),h=c-l;if(3*Math.abs(h)>1){var v=a-f,m=f+(a<f?-1:1)/2,g=l+(c<l?-1:1),y=a-m,_=c-g;v*v+h*h>y*y+_*_&&(f=m+(1&l?1:-1)/2,l=g)}var b=f+"-"+l,x=n[b];x?x.push(o):(r.push(x=n[b]=[o]),x.x=(f+(1&l)/2)*s,x.y=l*u)}return r}function e(t){var e=0,n=0;return a.map(function(r){var i=Math.sin(r)*t,o=-Math.cos(r)*t,a=i-e,s=o-n;return e=i,n=o,[a,s]})}var n,s,u,c=0,l=0,f=1,h=1,p=r,d=i;return t.hexagon=function(t){return"m"+e(null==t?n:+t).join("l")+"z"},t.centers=function(){for(var t=[],e=Math.round(l/u),r=Math.round(c/s),i=e*u;i<h+n;i+=u,++e)for(var o=r*s+(1&e)*s/2;o<f+s/2;o+=s)t.push([o,i]);return t},t.mesh=function(){var r=e(n).slice(0,4).join("l");return t.centers().map(function(t){return"M"+t+"m"+r}).join("")},t.x=function(e){return arguments.length?(p=e,t):p},t.y=function(e){return arguments.length?(d=e,t):d},t.radius=function(e){return arguments.length?(n=+e,s=2*n*Math.sin(o),u=1.5*n,t):n},t.size=function(e){return arguments.length?(c=l=0,f=+e[0],h=+e[1],t):[f-c,h-l]},t.extent=function(e){return arguments.length?(c=+e[0][0],l=+e[0][1],f=+e[1][0],h=+e[1][1],t):[[c,l],[f,h]]},t.radius(1)}},function(t,e,n){"use strict";function r(t,e){var n=e.sourceField,r=e.targetField,o=e.data,a={};return o.forEach(function(t){a[t[n]]=t}),t.dataArray=t.dataArray.map(function(t){var e=t[r];return Object(i.a)(Object(i.a)({},t),a[e])}),t}e.a=r;var i=n(10)},function(t,e,n){"use strict";function r(t,e){var n=e.callback;return n&&(t.dataArray=t.dataArray.map(n)),t}e.a=r},function(t,e,n){"use strict";n(433),n(417)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(10),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(11),d=n(9),v=n(37),m=(n.n(v),n(19)),g=(n.n(m),n(432)),y=n.n(g),_=n(435);v.EventEmitter},function(t,e){window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',function(t){function e(){c||(c=!0,s())}function n(){try{u.documentElement.doScroll("left")}catch(t){return void setTimeout(n,50)}e()}try{var r=(r=document.getElementsByTagName("script"))[r.length-1],i=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var o,a,s,u,c,l=function(t,e){e.parentNode.insertBefore(t,e)};if(i&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(r){console&&console.log(r)}}o=function(){var e,n=document.createElement("div");n.innerHTML=t._iconfont_svg_string_3580659,(n=n.getElementsByTagName("svg")[0])&&(n.setAttribute("aria-hidden","true"),n.style.position="absolute",n.style.width=0,n.style.height=0,n.style.overflow="hidden",n=n,(e=document.body).firstChild?l(n,e.firstChild):e.appendChild(n))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(o,0):(a=function(){document.removeEventListener("DOMContentLoaded",a,!1),o()},document.addEventListener("DOMContentLoaded",a,!1)):document.attachEvent&&(s=o,u=t.document,c=!1,n(),u.onreadystatechange=function(){"complete"==u.readyState&&(u.onreadystatechange=null,e())})}}catch(t){}}(window)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return v});var o=n(15),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(9),d=n(37),v=(n.n(d),function(t){function e(t,r){var i;return Object(a.a)(this,e),i=n.call(this),Object(h.a)(Object(u.a)(i),"isShow",!1),Object(h.a)(Object(u.a)(i),"timeout",null),Object(h.a)(Object(u.a)(i),"show",function(){return i.isShow||!i.contentDOM.innerHTML?Object(u.a)(i):(i.resetPopperPosition(),p.b.removeClass(i.popperDOM,"l7-popper-hide"),i.isShow=!0,i.option.unique&&e.conflictPopperList.forEach(function(t){t!==Object(u.a)(i)&&t.isShow&&t.hide()}),i.emit("show"),Object(u.a)(i))}),Object(h.a)(Object(u.a)(i),"hide",function(){return i.isShow?(p.b.addClass(i.popperDOM,"l7-popper-hide"),i.isShow=!1,i.emit("hide"),Object(u.a)(i)):Object(u.a)(i)}),Object(h.a)(Object(u.a)(i),"setHideTimeout",function(){i.timeout||(i.timeout=window.setTimeout(function(){i.isShow&&(i.hide(),i.timeout=null)},300))}),Object(h.a)(Object(u.a)(i),"clearHideTimeout",function(){i.timeout&&(window.clearTimeout(i.timeout),i.timeout=null)}),Object(h.a)(Object(u.a)(i),"onBtnClick",function(){i.isShow?i.hide():i.show()}),Object(h.a)(Object(u.a)(i),"onBtnMouseLeave",function(){i.setHideTimeout()}),Object(h.a)(Object(u.a)(i),"onBtnMouseMove",function(){i.clearHideTimeout(),i.isShow||i.show()}),i.button=t,i.option=r,i.init(),r.unique&&e.conflictPopperList.push(Object(u.a)(i)),i}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"buttonRect",get:function(){return this.button.getBoundingClientRect()}},{key:"getPopperDOM",value:function(){return this.popperDOM}},{key:"getIsShow",value:function(){return this.isShow}},{key:"getContent",value:function(){return this.content}},{key:"setContent",value:function(t){"string"===typeof t?this.contentDOM.innerHTML=t:t instanceof HTMLElement&&(p.b.clearChildren(this.contentDOM),this.contentDOM.appendChild(t)),this.content=t}},{key:"init",value:function(){var t=this.option.trigger;this.popperDOM=this.createPopper(),"click"===t?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}},{key:"destroy",value:function(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),p.b.remove(this.popperDOM)}},{key:"resetPopperPosition",value:function(){var t={},e=this.option,n=e.container,r=e.offset,i=void 0===r?[0,0]:r,a=e.placement,s=Object(o.a)(i,2),u=s[0],c=s[1],l=this.button.getBoundingClientRect(),f=n.getBoundingClientRect(),h=p.b.getDiffRect(l,f),d=h.left,v=h.right,m=h.top,g=h.bottom,y=!1,_=!1;/^(left|right)/.test(a)?(a.includes("left")?t.right="".concat(l.width+v,"px"):a.includes("right")&&(t.left="".concat(l.width+d,"px")),a.includes("start")?t.top="".concat(m,"px"):a.includes("end")?t.bottom="".concat(g,"px"):(t.top="".concat(m+l.height/2,"px"),_=!0,t.transform="translate(".concat(u,"px, calc(").concat(c,"px - 50%))"))):/^(top|bottom)/.test(a)&&(a.includes("top")?t.bottom="".concat(l.height+g,"px"):a.includes("bottom")&&(t.top="".concat(l.height+m,"px")),a.includes("start")?t.left="".concat(d,"px"):a.includes("end")?t.right="".concat(v,"px"):(t.left="".concat(d+l.width/2,"px"),y=!0,t.transform="translate(calc(".concat(u,"px - 50%), ").concat(c,"px)"))),t.transform="translate(calc(".concat(u,"px - ").concat(y?"50%":"0%","), calc(").concat(c,"px - ").concat(_?"50%":"0%",")");var b=a.split("-");b.length&&p.b.addClass(this.popperDOM,b.map(function(t){return"l7-popper-".concat(t)}).join(" ")),p.b.addStyle(this.popperDOM,p.b.css2Style(t))}},{key:"createPopper",value:function(){var t=this.option,e=t.container,n=t.className,r=void 0===n?"":n,i=t.content,o=p.b.create("div","l7-popper l7-popper-hide ".concat(r)),a=p.b.create("div","l7-popper-content"),s=p.b.create("div","l7-popper-arrow");return o.appendChild(a),o.appendChild(s),e.appendChild(o),this.popperDOM=o,this.contentDOM=a,i&&this.setContent(i),o}}]),e}(d.EventEmitter));Object(h.a)(v,"conflictPopperList",[])},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(20),a=n(10),s=n(7),u=n(0),c=n(1),l=n(12),f=n(32),h=n(3),p=n(4),d=n(2),v=n(6),m=n(8),g=n.n(m),y=n(111),_=n(161);_.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(10),a=n(7),s=n(0),u=n(1),c=n(12),l=n(32),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(9),y=n(111),_=n(945),b=n(161);b.a},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=n(15),s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=function(){if("undefined"===typeof document)return!1;for(var t=s[0],e={},n=0,i=s;n<i.length;n++){var o=i[n];if((null===o||void 0===o?void 0:o[1])in document){var u,c=r(o.entries());try{for(c.s();!(u=c.n()).done;){var l=Object(a.a)(u.value,2),f=l[0],h=l[1];e[t[f]]=h}}catch(t){c.e(t)}finally{c.f()}return e}}return!1}(),c={change:u.fullscreenchange,error:u.fullscreenerror},l={request:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,e=arguments.length>1?arguments[1]:void 0;return new Promise(function(n,r){var i=function t(){l.off("change",t),n()};l.on("change",i);var o=t[u.requestFullscreen](e);o instanceof Promise&&o.then(i).catch(r)})},exit:function(){return new Promise(function(t,e){if(!l.isFullscreen)return void t();var n=function e(){l.off("change",e),t()};l.on("change",n);var r=document[u.exitFullscreen]();r instanceof Promise&&r.then(n).catch(e)})},toggle:function(t,e){return l.isFullscreen?l.exit():l.request(t,e)},onchange:function(t){l.on("change",t)},onerror:function(t){l.on("error",t)},on:function(t,e){var n=c[t];n&&document.addEventListener(n,e,!1)},off:function(t,e){var n=c[t];n&&document.removeEventListener(n,e,!1)},raw:u};Object.defineProperties(l,{isFullscreen:{get:function(){return Boolean(document[u.fullscreenElement])}},element:{enumerable:!0,get:function(){var t;return null!==(t=document[u.fullscreenElement])&&void 0!==t?t:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[u.fullscreenEnabled])}}}),u||(l={isEnabled:!1}),e.a=l},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(10),a=n(7),s=n(0),u=n(1),c=n(12),l=n(32),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(19),y=(n.n(g),n(111)),_=n(161);_.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(10),a=n(0),s=n(1),u=n(12),c=n(32),l=n(3),f=n(4),h=n(2),p=n(6),d=n(111),v=n(288);v.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return p});var o=n(0),a=n(1),s=n(32),u=n(3),c=n(4),l=n(2),f=n(9),h=n(197),p=function(t){function e(){return Object(o.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"getDefault",value:function(){return{position:h.b.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}},{key:"onAdd",value:function(){var t=f.b.create("div","l7-control-logo");return this.setLogoContent(t),t}},{key:"onRemove",value:function(){return null}},{key:"setOptions",value:function(t){Object(s.a)(Object(l.a)(e.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["img","href"])&&(f.b.clearChildren(this.container),this.setLogoContent(this.container))}},{key:"setLogoContent",value:function(t){var e=this.controlOption,n=e.href,r=e.img,i=f.b.create("img");if(i.setAttribute("src",r),i.setAttribute("aria-label","AntV logo"),f.b.setUnDraggable(i),n){var o=f.b.create("a","l7-control-logo-link");o.target="_blank",o.href=n,o.rel="noopener nofollow",o.setAttribute("rel","noopener nofollow"),o.appendChild(i),t.appendChild(o)}else t.appendChild(i)}}]),e}(h.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(15),a=n(10),s=n(0),u=n(1),c=n(12),l=n(32),f=n(3),h=n(4),p=n(2),d=n(6),v=n(950),m=n(111),g=n(288);g.a},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r={normal:{text:"\u6807\u51c6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*qdFDSbvIalgAAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u6708\u5149\u94f6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d-vcRLzu8WIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u5e7b\u5f71\u9ed1",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*HMbRTI3XnpIAAAAAAAAAAAAADmJ7AQ/original"},fresh:{text:"\u8349\u8272\u9752",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kqaGQ5kjSiAAAAAAAAAAAAAADmJ7AQ/original"},grey:{text:"\u96c5\u58eb\u7070",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*XegrTpZIbqAAAAAAAAAAAAAADmJ7AQ/original"},graffiti:{text:"\u6d82\u9e26",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*G5g9SZ_Jg4cAAAAAAAAAAAAADmJ7AQ/original"},macaron:{text:"\u9a6c\u5361\u9f99",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*irVvQbDpQMwAAAAAAAAAAAAADmJ7AQ/original"},darkblue:{text:"\u6781\u591c\u84dd",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*lKRzQYB4iR0AAAAAAAAAAAAADmJ7AQ/original"},wine:{text:"\u9171\u7c7d",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*orY0T7QL-lwAAAAAAAAAAAAADmJ7AQ/original"}},i={normal:{text:"\u6807\u51c6",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*kIyZTok4Uk0AAAAAAAAAAAAADmJ7AQ/original"},light:{text:"\u4eae",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*Z3JRQKDI-cIAAAAAAAAAAAAADmJ7AQ/original"},dark:{text:"\u6697",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*d7HCQbfmyaoAAAAAAAAAAAAADmJ7AQ/original"},satellite:{text:"\u536b\u661f",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*TytUT6pS9okAAAAAAAAAAAAADmJ7AQ/original"},outdoors:{text:"\u6237\u5916",img:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*hWwFSYJEFWsAAAAAAAAAAAAADmJ7AQ/original"}}},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(15),a=n(10),s=n(0),u=n(1),c=n(12),l=n(32),f=n(3),h=n(4),p=n(2),d=n(6),v=n(11),m=n(9),g=n(287);g.c},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(10),a=n(0),s=n(1),u=n(12),c=n(32),l=n(3),f=n(4),h=n(2),p=n(6),d=n(9),v=n(197);v.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(10),a=n(0),s=n(1),u=n(12),c=n(32),l=n(3),f=n(4),h=n(2),p=n(6),d=n(11),v=n(9),m=n(111),g=n(197),y=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(u.a)(t),"zoomIn",function(){!t.disabled&&t.mapsService.getZoom()<t.mapsService.getMaxZoom()&&t.mapsService.zoomIn()}),Object(p.a)(Object(u.a)(t),"zoomOut",function(){!t.disabled&&t.mapsService.getZoom()>t.mapsService.getMinZoom()&&t.mapsService.zoomOut()}),Object(p.a)(Object(u.a)(t),"updateDisabled",function(){var e=t.mapsService;t.zoomInButton.removeAttribute("disabled"),t.zoomOutButton.removeAttribute("disabled"),(t.disabled||e.getZoom()<=e.getMinZoom())&&t.zoomOutButton.setAttribute("disabled","true"),(t.disabled||e.getZoom()>=e.getMaxZoom())&&t.zoomInButton.setAttribute("disabled","true")}),t}Object(l.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getDefault",value:function(t){return Object(o.a)(Object(o.a)({},Object(c.a)(Object(h.a)(e.prototype),"getDefault",this).call(this,t)),{},{position:d.j.BOTTOMRIGHT,name:"zoom",zoomInText:Object(m.a)("l7-icon-enlarge"),zoomInTitle:"Zoom in",zoomOutText:Object(m.a)("l7-icon-narrow"),zoomOutTitle:"Zoom out"})}},{key:"setOptions",value:function(t){Object(c.a)(Object(h.a)(e.prototype),"setOptions",this).call(this,t),this.checkUpdateOption(t,["zoomInText","zoomInTitle","zoomOutText","zoomOutTitle"])&&this.resetButtonGroup(this.container)}},{key:"onAdd",value:function(){var t=v.b.create("div","l7-control-zoom");return this.resetButtonGroup(t),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),t}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"resetButtonGroup",value:function(t){v.b.clearChildren(t),this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-button-control",t,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-button-control",t,this.zoomOut),this.updateDisabled()}},{key:"createButton",value:function(t,e,n,r,i){var o=v.b.create("button",n,r);return"string"===typeof t?o.innerHTML=t:o.append(t),o.title=e,o.addEventListener("click",i),o}}]),e}(g.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(10),a=n(0),s=n(1),u=n(12),c=n(32),l=n(3),f=n(4),h=n(2),p=n(6),d=n(9),v=n(19),m=(n.n(v),n(437));m.b},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1082);v.a},function(t,e,n){"use strict";function r(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=Object(h.Q)(n);return[t[0]+1e-4*r[0],t[1]+1e-4*r[1]]}function i(t,e,n){if(t.length>0&&e.version===l.b["GAODE2.x"]){var r=n.coordCenter;t[0].coordinates[0],t.filter(function(t){return!t.originCoordinates}).map(function(t){t.version=l.b["GAODE2.x"],t.originCoordinates=Object(p.cloneDeep)(t.coordinates),t.coordinates=e.coordToAMap2RelativeCoordinates(t.coordinates,r)})}}function o(t,e){t.length>0&&e.version===l.b.SIMPLE&&t.map(function(t){t.simpleCoordinate||(t.coordinates=a(t.coordinates,e),t.simpleCoordinate=!0)})}function a(t,e){if("number"===typeof t[0])return e.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){var n=[];return t.map(function(t){var r=[];t.map(function(t){r.push(e.simpleMapCoord.unproject(t))}),n.push(r)}),n}var r=[];return t.map(function(t){r.push(e.simpleMapCoord.unproject(t))}),r}function s(t,e){var n;if(!t.scale)return[];var r=(null===t||void 0===t?void 0:null===(n=t.scale)||void 0===n?void 0:n.scalers)||[],i=[];return r.forEach(function(n){var r,o=n.field;(e.hasOwnProperty(o)||"variable"===(null===(r=t.scale)||void 0===r?void 0:r.type))&&i.push(e[o])}),t.mapping?t.mapping(i):[]}function u(t,e,n,a,u){var c=null===u||void 0===u?void 0:u.getLayerConfig(),l=c.arrow,f=void 0===l?{enable:!1}:l,p=e.map(function(e){var i={id:e._id,coordinates:e.coordinates};if(t.filter(function(t){return void 0!==t.scale}).forEach(function(t){var r=s(t,e);t.needRemapping=!1,"color"===t.name&&(r=r.map(function(t){return Object(h.T)(t)})),i[t.name]=Array.isArray(r)&&1===r.length?r[0]:r,"shape"===t.name&&(i.shape=n.getIconFontKey(i[t.name]))}),"line"===i.shape&&f.enable){var o=i.coordinates,a=r(o[0],o[1]);i.coordinates.splice(1,0,a,a)}return i});return i(p,a,u),o(p,a),p}function c(t,e,n,r,i,o){var a=new f.a(i,o),s=r.getLayerStyleAttributes()||[],c=a.data.dataArray,l=c,h=u(s,l,e,n,t);return a.destroy(),h}e.a=c;var l=n(91),f=n(183),h=n(9),p=n(19);n.n(p)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(142),f=n(959);l.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(y.a)(t);if(e){var i=Object(y.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(g.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return R});var o,a,s=n(15),u=n(269),c=n(20),l=n(10),f=n(49),h=n(7),p=n(0),d=n(1),v=n(12),m=n(3),g=n(4),y=n(2),_=n(6),b=n(8),x=n.n(b),w=n(11),E=n(36),S=n(13),O=(n.n(S),n(14)),T=(n.n(O),n(440)),A=n(965),C=n(92),k=n(966),M=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];window.forceWebGL=!0;var P=!1,j=[],I=12,R=(o=Object(S.injectable)())(a=function(t){function e(){var t;Object(p.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(_.a)(Object(v.a)(t),"version",C.a["GAODE1.x"]),Object(_.a)(Object(v.a)(t),"handleCameraChanged",function(e){var n=e.camera,r=n.fov,i=n.near,o=n.far,a=n.height,s=n.pitch,u=n.rotation,c=n.aspect,l=n.position,f=t.getCenter(),h=f.lng,p=f.lat;if(t.emit("mapchange"),t.cameraChangedCallback){t.viewport.syncWithMapCamera({aspect:c,bearing:360-u,far:o,fov:r,cameraHeight:a,near:i,pitch:s,zoom:t.map.getZoom()-1,center:[h,p],offsetOrigin:[l.x,l.y]});var d=t.config.offsetZoom,v=void 0===d?I:d;t.viewport.getZoom()>v?t.coordinateSystemService.setCoordinateSystem(w.d.P20_OFFSET):t.coordinateSystemService.setCoordinateSystem(w.d.P20),t.cameraChangedCallback(t.viewport)}}),t}Object(m.a)(e,t);var n=r(e);return Object(d.a)(e,[{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.viewport.projectFlat(t),o=E.b.create();return E.b.translate(o,o,E.d.fromValues(i[0],i[1],e)),E.b.scale(o,o,E.d.fromValues(r[0],r[1],r[2])),E.b.rotateX(o,o,n[0]),E.b.rotateY(o,o,n[1]),E.b.rotateZ(o,o,n[2]),o}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(h.a)(x.a.mark(function t(){var e,n,r,i,o,a,s,u,c,h,p,d,v,m,g=this;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.config,n=e.id,r=e.style,i=void 0===r?"light":r,o=e.minZoom,a=void 0===o?0:o,s=e.maxZoom,u=void 0===s?18:s,c=e.token,h=void 0===c?"15cd8a57710d40c9b7c0e3cc120f1200":c,p=e.mapInstance,d=e.plugin,v=void 0===d?[]:d,m=Object(f.a)(e,M),t.next=3,new Promise(function(t){var e=function(){if(p)g.map=p,g.$mapContainer=g.map.getContainer(),setTimeout(function(){g.map.on("camerachange",g.handleCameraChanged),t()},30);else{g.$mapContainer=g.creatMapContainer(n);var e=Object(l.a)({mapStyle:g.getMapStyleValue(i),zooms:[a,u],viewMode:"3D"},m);e.zoom&&(e.zoom+=1);var r=new AMap.Map(g.$mapContainer,e);r.on("camerachange",g.handleCameraChanged),r.on("camerachange",function(){setTimeout(function(){return g.handleAfterMapChange()})}),g.map=r,setTimeout(function(){t()},10)}};P||p?P&&window.AMap||p?e():j.push(e):("15cd8a57710d40c9b7c0e3cc120f1200"===h&&console.warn(g.configService.getSceneWarninfo("MapToken")),P=!0,v.push("Map3D"),A.a.load({key:h,version:"1.4.15",plugins:v}).then(function(t){e(),j.length&&(j.forEach(function(t){return t()}),j=[])}).catch(function(t){throw new Error(t)}))});case 3:this.viewport=new k.a;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"meterToCoord",value:function(t,e){var n=AMap.GeometryUtil.distance(Object(u.a)(AMap.LngLat,Object(c.a)(t)),Object(u.a)(AMap.LngLat,Object(c.a)(e))),r=this.lngLatToCoord(t),i=Object(s.a)(r,2),o=i[0],a=i[1],l=this.lngLatToCoord(e),f=Object(s.a)(l,2),h=f[0],p=f[1];return Math.sqrt(Math.pow(o-h,2)+Math.pow(a-p,2))/n}},{key:"updateView",value:function(t){}},{key:"getOverlayContainer",value:function(){}},{key:"exportMap",value:function(t){var e,n=null===(e=this.getContainer())||void 0===e?void 0:e.getElementsByClassName("amap-layer")[0];return"jpg"===t?null===n||void 0===n?void 0:n.toDataURL("image/jpeg"):null===n||void 0===n?void 0:n.toDataURL("image/png")}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}}]),e}(T.a))||a},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={top:0,right:0,bottom:0,left:0};if("number"===typeof t)return{top:t,right:t,bottom:t,left:t};if(Array.isArray(t)){if(4===t.length)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(2===t.length)return{top:t[0],right:t[1],bottom:t[0],left:t[1]}}return Object(i.a)(Object(i.a)({},e),t)}e.a=r;var i=n(10)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(15),i=n(0),o=n(1),a=n(198),s=n(163),u=n(193),c=Object(a.a)(),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,o=e.viewMatrix,s=void 0===o?c:o,l=e.projectionMatrix,f=void 0===l?c:l;Object(i.a)(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=s,this.projectionMatrix=f;var h=Object(a.a)();u.multiply(h,h,this.projectionMatrix),u.multiply(h,h,this.viewMatrix),this.viewProjectionMatrix=h;var p=Object(a.a)();u.scale(p,p,[this.width/2,-this.height/2,1]),u.translate(p,p,[1,-1,0]),u.multiply(p,p,this.viewProjectionMatrix);var d=u.invert(Object(a.a)(),p);if(!d)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=p,this.pixelUnprojectionMatrix=d,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(o.a)(t,[{key:"equals",value:function(e){return e instanceof t&&(e.width===this.width&&e.height===this.height&&u.equals(e.projectionMatrix,this.projectionMatrix)&&u.equals(e.viewMatrix,this.viewMatrix))}},{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,o=this.projectPosition(t),a=Object(s.h)(o,this.pixelProjectionMatrix),u=Object(r.a)(a,2),c=u[0],l=u[1],f=i?l:this.height-l;return 2===t.length?[c,f]:[c,f,a[2]]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,i=void 0===n||n,o=e.targetZ,a=Object(r.a)(t,3),u=a[0],c=a[1],l=a[2],f=i?c:this.height-c,h=o&&o*this.pixelsPerMeter,p=Object(s.e)([u,f,l],this.pixelUnprojectionMatrix,h),d=this.unprojectPosition(p),v=Object(r.a)(d,3),m=v[0],g=v[1],y=v[2];return Number.isFinite(l)?[m,g,y]:Number.isFinite(o)?[m,g,o]:[m,g]}},{key:"projectPosition",value:function(t){var e=this.projectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(t){var e=this.unprojectFlat(t),n=Object(r.a)(e,2);return[n[0],n[1],(t[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}},{key:"unprojectFlat",value:function(t){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return t}}]),t}()},function(t,e,n){"use strict";n(162),n(198)},function(t,e,n){"use strict";n(198),n(163),n(194)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"}},function(t,e,n){"use strict";function r(){delete window.AMap,u={key:"",AMap:{version:"1.4.15",plugins:[]}},c={AMap:s.notload},l={AMap:[]}}var i=n(7),o=n(8),a=n.n(o);if(!window)throw Error("AMap JSAPI can only be used in Browser.");var s=function(t){return t.notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed",t}(s||{}),u={key:"",AMap:{version:"2.0",plugins:[]}},c={AMap:s.notload},l={AMap:[]},f=[],h=function(t){if("function"===typeof t){if(c.AMap===s.loaded)return void t(window.AMap);f.push(t)}},p=function(){var t=Object(i.a)(a.a.mark(function t(e){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){if(c.AMap===s.failed)n("");else if(c.AMap===s.notload){var r=e.key,i=e.version,o=e.plugins;if(!r)return void n("\u8bf7\u586b\u5199key");window.AMap&&"lbs.amap.com"!==location.host&&n("\u7981\u6b62\u591a\u79cdAPI\u52a0\u8f7d\u65b9\u5f0f\u6df7\u7528"),u.key=r,u.AMap.version=i||u.AMap.version,u.AMap.plugins=o||u.AMap.plugins,c.AMap=s.loading;var a=document.body||document.head;window._onAPILoaded=function(e){e?(c.AMap=s.failed,n(e)):(c.AMap=s.loaded,t(null))};var l=document.createElement("script");l.type="text/javascript",l.async=!1,l.src="https://webapi.amap.com/maps?callback=_onAPILoaded&v="+u.AMap.version+"&key="+r+"&plugin="+u.AMap.plugins.join(","),l.onerror=function(t){c.AMap=s.failed,n(t)},a.appendChild(l)}else if(c.AMap===s.loaded){if(e.key&&e.key!==u.key)return void n("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");if(e.version&&e.version!==u.AMap.version)return void n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");var f=[];e.plugins&&e.plugins.forEach(function(t){-1===u.AMap.plugins.indexOf(t)&&f.push(t)}),f.length&&window.AMap.plugin(f,function(){t(window.AMap)})}else{if(e.key&&e.key!==u.key)return void n("\u591a\u4e2a\u4e0d\u4e00\u81f4\u7684 key");if(e.version&&e.version!==u.AMap.version)return void n("\u4e0d\u5141\u8bb8\u591a\u4e2a\u7248\u672c JSAPI \u6df7\u7528");var p=[];e.plugins&&e.plugins.forEach(function(t){-1===u.AMap.plugins.indexOf(t)&&p.push(t)}),h(function(){p.length&&window.AMap.plugin(p,function(){t(window.AMap)})})}}));case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();e.a={load:p,reset:r}},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(15),i=n(0),o=n(1),a=n(6),s=n(36),u=Math.PI/180,c=function(){function t(){Object(i.a)(this,t),Object(a.a)(this,"projectionMatrix",s.b.create()),Object(a.a)(this,"viewMatrix",s.b.create()),Object(a.a)(this,"viewProjectionMatrix",s.b.create()),Object(a.a)(this,"ViewProjectionMatrixUncentered",s.b.create()),Object(a.a)(this,"viewUncenteredMatrix",s.b.create())}return Object(o.a)(t,[{key:"syncWithMapCamera",value:function(t){var e=t.zoom,n=void 0===e?1:e,r=t.pitch,i=void 0===r?0:r,o=t.bearing,a=void 0===o?0:o,c=t.center,l=void 0===c?[0,0]:c,f=t.offsetOrigin,h=void 0===f?[0,0]:f,p=t.cameraHeight,d=void 0===p?1:p,v=t.aspect,m=void 0===v?1:v,g=t.near,y=void 0===g?.1:g,_=t.far,b=void 0===_?1e3:_,x=t.fov,w=void 0===x?0:x;this.zoom=n,this.center=l;var E=i*u,S=(360-a)*u;s.b.perspective(this.projectionMatrix,w,m,y,b);var O=s.d.fromValues(d*Math.sin(E)*Math.sin(S),-d*Math.sin(E)*Math.cos(S),d*Math.cos(E)),T=s.d.fromValues(-Math.cos(E)*Math.sin(S),Math.cos(E)*Math.cos(S),Math.sin(E));s.b.lookAt(this.viewMatrix,O,s.d.fromValues(0,0,0),T),this.viewUncenteredMatrix=s.b.clone(this.viewMatrix),s.b.translate(this.viewMatrix,this.viewMatrix,s.d.fromValues(-h[0],h[1],0)),s.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),s.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 524288}},{key:"getCenter",value:function(){var t=Object(r.a)(this.center,2);return[t[0],t[1]]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),n=Math.PI/180,r=t[0]*n,i=e*n;i=Math.log(Math.tan(Math.PI/4+i/2));var o=.5/Math.PI,a=-.5/Math.PI;return n=.5,r=(256<<20)*(o*r+.5)-215440491,i=-((256<<20)*(a*i+n)-106744817),[r,i]}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return h});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(142),f=n(968),h=function(t){function e(){return Object(o.a)(this,e),n.apply(this,arguments)}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"getServiceConstructor",value:function(){return f.a}}]),e}(l.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(m.a)(t);if(e){var i=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(v.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return j});var o,a,s=n(10),u=n(49),c=n(7),l=n(20),f=n(0),h=n(1),p=n(12),d=n(3),v=n(4),m=n(2),g=n(6),y=n(8),_=n.n(y),b=n(441),x=n.n(b),w=n(11),E=n(9),S=n(36),O=n(13),T=(n.n(O),n(14)),A=(n.n(T),n(440)),C=n(92),k=n(969),M=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"];!function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".amap-logo{\n display: none !important;\n}\n");var P=[108.92361,34.54083];window.forceWebGL=!0;var j=(o=Object(O.injectable)())(a=function(t){function e(){var t;Object(f.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(g.a)(Object(p.a)(t),"version",C.a["GAODE2.x"]),Object(g.a)(Object(p.a)(t),"handleViewChanged",function(e){var n=t.map.customCoords.getCameraParams(),r=n.fov,i=n.near,o=n.far,a=n.aspect,s=n.position,u=n.lookAt,c=n.up;t.emit("mapchange");var l=t.map.customCoords.getCenter();t.cameraChangedCallback&&(t.viewport.syncWithMapCamera({aspect:a,far:o,fov:r,cameraPosition:s,lookAt:u,up:c,near:i,zoom:t.map.getZoom()-1,center:l,offsetOrigin:[s[0],s[1]]}),t.coordinateSystemService.setCoordinateSystem(w.d.P20_2),t.cameraChangedCallback(t.viewport))}),t}Object(d.a)(e,t);var n=r(e);return Object(h.a)(e,[{key:"setCustomCoordCenter",value:function(t){this.sceneCenter=t,this.sceneCenterMercator=E.j.apply(void 0,Object(l.a)(t))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMercator}},{key:"lngLatToCoordByLayer",value:function(t,e){var n=e||this.sceneCenterMercator,r=this._sub(Object(E.j)(t[0],t[1]),n);return t[2]&&r.push(t[2]),r}},{key:"coordToAMap2RelativeCoordinates",value:function(t,e){var n=this,r=Object(E.j)(e[0],e[1]);return"number"===typeof t[0]?this.lngLatToCoordByLayer(t,r):t.map(function(t){return Array.isArray(t)&&"number"===typeof t[0]?n.lngLatToCoordByLayer(t,r):t.map(function(t){return n.lngLatToCoordByLayer(t,r)})})}},{key:"setCoordCenter",value:function(t){this.map.customCoords.setCenter(t||P),this.setCustomCoordCenter(t||P)}},{key:"lngLatToCoord",value:function(t){return this.sceneCenter||(this.map.customCoords.setCenter(t),this.setCustomCoordCenter(t)),this._sub(Object(E.j)(t[0],t[1]),this.sceneCenterMercator)}},{key:"lngLatToCoords",value:function(t){var e=this;return t.map(function(t){return"number"===typeof t[0]?e.lngLatToCoord(t):t.map(function(t){return e.lngLatToCoord(t)})})}},{key:"addMarkerContainer",value:function(){if(this.map){var t=this.map.getContainer();if(null!==t){var e=t.getElementsByClassName("amap-maps")[0];e.style.zIndex="auto",this.markerContainer=E.b.create("div","l7-marker-container2",e)}}}},{key:"updateView",value:function(t){}},{key:"getOverlayContainer",value:function(){}},{key:"getType",value:function(){return"amap2"}},{key:"getBounds",value:function(){var t=this.map.getBounds(),e=t.getNorthEast(),n=t.getSouthWest(),r=this.getCenter(),i=r.lng>e.getLng()||r.lng<n.getLng()?180-e.getLng():e.getLng();return[[r.lng<n.getLng()?n.getLng()-180:n.getLng(),n.getLat()],[i,e.getLat()]]}},{key:"getMinZoom",value:function(){return this.map.getZooms()[0]-1}},{key:"getMaxZoom",value:function(){return this.map.getZooms()[1]-1}},{key:"lngLatToContainer",value:function(t){var e=this.map.lngLatToContainer(t);return{x:e.getX(),y:e.getY()}}},{key:"lngLatToPixel",value:function(t){var e=this.map.lngLatToPixel(new AMap.LngLat(t[0],t[1]));return{x:e.getX(),y:e.getY()}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=this.map.customCoords.lngLatToCoord(t),o=S.b.create();return S.b.translate(o,o,S.d.fromValues(i[0],i[1],e)),S.b.scale(o,o,S.d.fromValues(r[0],r[1],r[2])),S.b.rotateX(o,o,n[0]),S.b.rotateY(o,o,n[1]),S.b.rotateZ(o,o,n[2]),o}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(_.a.mark(function t(){var e,n,r,i,o,a,c,l,f,h,p,d,v,m,g,y,b,w,E,S,O,T;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.config,n=e.id,r=e.style,i=void 0===r?"light":r,o=e.minZoom,a=void 0===o?0:o,c=e.maxZoom,l=void 0===c?18:c,f=e.token,h=void 0===f?"ff533602d57df6f8ab3b0fea226ae52f":f,p=e.mapInstance,d=e.plugin,v=void 0===d?[]:d,m=e.version,g=void 0===m?"2.0":m,y=Object(u.a)(e,M),this.viewport=new k.a,window.AMap||p){t.next=6;break}return v.push("Map3D"),t.next=6,x.a.load({key:h,version:"2.0",plugins:v});case 6:p?(this.map=p,this.$mapContainer=this.map.getContainer(),w=this.map.getCenter(),null===(b=this.map.customCoords)||void 0===b||b.setCenter([w.lng,w.lat]),this.setCustomCoordCenter([w.lng,w.lat]),this.map.on("viewchange",this.handleViewChanged)):(this.$mapContainer=this.creatMapContainer(n),S=Object(s.a)({mapStyle:this.getMapStyleValue(i),zooms:[a,l],viewMode:"3D"},y),S.zoom&&(S.zoom+=1),"ff533602d57df6f8ab3b0fea226ae52f"===h&&console.warn("%c".concat(this.configService.getSceneWarninfo("MapToken"),"!"),"color: #873bf4;font-weigh:900;font-size: 16px;"),O=new AMap.Map(this.$mapContainer,S),this.map=O,T=O.getCenter(),null===(E=this.map.customCoords)||void 0===E||E.setCenter([T.lng,T.lat]),this.setCustomCoordCenter([T.lng,T.lat]),O.on("viewchange",this.handleViewChanged)),this.initViewPort();case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"initViewPort",value:function(){var t,e=null===(t=this.map.customCoords)||void 0===t?void 0:t.getCameraParams(),n=e.fov,r=e.near,i=e.far,o=e.aspect,a=e.position,s=e.lookAt,u=e.up;this.emit("mapchange");var c=this.map.customCoords.getCenter(),l=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:o,far:i,fov:n,cameraPosition:a,lookAt:s,near:r,up:u,zoom:l-1,center:c,offsetOrigin:[a[0],a[1]]}),this.coordinateSystemService.setCoordinateSystem(w.d.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(t,e){var n=[0,0];return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}}]),e}(A.a))||a},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(15),i=n(20),o=n(0),a=n(1),s=n(6),u=n(36),c=function(){function t(){Object(o.a)(this,t),Object(s.a)(this,"projectionMatrix",u.b.create()),Object(s.a)(this,"viewMatrix",u.b.create()),Object(s.a)(this,"viewProjectionMatrix",u.b.create()),Object(s.a)(this,"ViewProjectionMatrixUncentered",u.b.create()),Object(s.a)(this,"viewUncenteredMatrix",u.b.create())}return Object(a.a)(t,[{key:"syncWithMapCamera",value:function(t){var e=t.zoom,n=void 0===e?1:e,r=t.center,o=void 0===r?[0,0]:r,a=t.offsetOrigin,s=void 0===a?[0,0]:a,c=t.cameraPosition,l=void 0===c?[0,0,0]:c,f=t.up,h=void 0===f?[0,1,0]:f,p=t.lookAt,d=void 0===p?[0,0,0]:p,v=t.aspect,m=void 0===v?1:v,g=t.near,y=void 0===g?.1:g,_=t.far,b=void 0===_?1e3:_,x=t.fov,w=void 0===x?45:x;this.zoom=n,this.center=o,u.b.perspective(this.projectionMatrix,w/180*Math.PI,m,y,b);var E=u.d.fromValues.apply(u.d,Object(i.a)(l)),S=u.d.fromValues.apply(u.d,Object(i.a)(d)),O=u.d.fromValues.apply(u.d,Object(i.a)(h));u.b.lookAt(this.viewMatrix,E,S,O),this.viewUncenteredMatrix=u.b.clone(this.viewMatrix),u.b.translate(this.viewMatrix,this.viewMatrix,u.d.fromValues(-s[0],s[1],0)),u.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),u.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var t=Object(r.a)(this.center,2);return[t[0],t[1]]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1.2}},{key:"projectFlat",value:function(t){var e=Math.max(Math.min(85.0511287798,t[1]),-85.0511287798),n=Math.PI/180,r=t[0]*n,i=e*n;i=Math.log(Math.tan(Math.PI/4+i/2));var o=.5/Math.PI,a=-.5/Math.PI;return n=.5,r=(256<<20)*(o*r+.5)-215440491,i=-((256<<20)*(a*i+n)-106744817),[r,i]}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(142),f=n(971);l.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return k});var o,a,s=n(10),u=n(49),c=n(7),l=n(0),f=n(1),h=n(12),p=n(3),d=n(4),v=n(2),m=n(6),g=n(8),y=n.n(g),_=n(11),b=n(446),x=n(13),w=(n.n(x),n(14)),E=(n.n(w),n(207)),S=n(92),O=n(1072),T=["id","style","rotation"],A={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},C=12,k=(o=Object(x.injectable)())(a=function(t){function e(){var t;Object(l.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(m.a)(Object(h.a)(t),"version",S.a.GLOBEL),Object(m.a)(Object(h.a)(t),"dragging",!1),Object(m.a)(Object(h.a)(t),"handleCameraChanged",function(e){t.emit("mapchange");t.handleCameraChanging=!0,t.handleCameraTimer&&clearTimeout(t.handleCameraTimer),t.handleCameraTimer=setTimeout(function(){t.handleCameraChanging=!1},2e3);e.type&&e.originalEvent&&("wheel"===e.originalEvent.type&&t.viewport.scaleZoom(.01*Math.sign(e.originalEvent.wheelDelta)*-1),Math.abs(e.originalEvent.movementX)>Math.abs(e.originalEvent.movementY)?e.originalEvent.movementX>0?t.viewport.rotateY(.02):e.originalEvent.movementX<0&&t.viewport.rotateY(-.02):e.originalEvent.movementY>0?t.viewport.rotateX(.02):e.originalEvent.movementY<0&&t.viewport.rotateX(-.02));var n=t.config.offsetCoordinate,r=void 0===n||n;t.viewport.syncWithMapCamera({viewportHeight:t.map.transform.height,viewportWidth:t.map.transform.width}),t.viewport.getZoom()>C&&r?t.coordinateSystemService.setCoordinateSystem(_.d.LNGLAT_OFFSET):t.coordinateSystemService.setCoordinateSystem(_.d.LNGLAT),t.cameraChangedCallback(t.viewport)}),t}Object(p.a)(e,t);var n=r(e);return Object(f.a)(e,[{key:"lngLatToMercator",value:function(t,e){throw new Error("Method not implemented.")}},{key:"getModelMatrix",value:function(t,e,n,r,i){throw new Error("Method not implemented.")}},{key:"on",value:function(t,e){-1!==_.h.indexOf(t)?this.eventEmitter.on(t,e):this.map.on(A[t]||t,e)}},{key:"off",value:function(t,e){this.map.off(A[t]||t,e),this.eventEmitter.off(t,e)}},{key:"getMapCanvasContainer",value:function(){return this.map.getCanvasContainer()}},{key:"getSize",value:function(){var t=this.map.transform;return[t.width,t.height]}},{key:"getType",value:function(){return"earth"}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(y.a.mark(function t(){var e,n,r,i,o,a,c,l;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,i=e.style,o=void 0===i?"light":i,a=e.rotation,c=void 0===a?0:a,l=Object(u.a)(e,T),this.viewport=new O.a,this.$mapContainer=this.creatMapContainer(r),this.map=new b.a(Object(s.a)({container:this.$mapContainer,style:this.getMapStyleValue(o),bearing:c},l)),this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged({});case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"destroy",value:function(){var t,e;null===(t=this.$mapContainer)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(t){this.cameraChangedCallback=t}},{key:"rotateY",value:function(t){var e=t||{},n=e.force,r=void 0!==n&&n,i=e.reg,o=void 0===i?.01:i;this.handleCameraChanging&&!r||this.viewport&&(this.viewport.rotateY(o),this.viewport.syncWithMapCamera({viewportHeight:this.map.transform.height,viewportWidth:this.map.transform.width}),this.cameraChangedCallback(this.viewport))}}]),e}(E.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return E});var o=n(0),a=n(1),s=n(12),u=n(3),c=n(4),l=n(2),f=n(6),h=n(9),p=n(19),d=(n.n(p),n(447)),v=n(112),m=n(199),g=n(64),y=n(465),_=n(93),b=n(470),x=n(471);!function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");var w={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},E=function(t){function e(t){var r;return Object(o.a)(this,e),r=n.call(this,Object(p.merge)({},w,t)),Object(f.a)(Object(s.a)(r),"renderTaskQueue",new x.a),Object(f.a)(Object(s.a)(r),"trackResize",!0),Object(f.a)(Object(s.a)(r),"onWindowOnline",function(){r.update()}),Object(f.a)(Object(s.a)(r),"onWindowResize",function(t){r.trackResize&&r.resize({originalEvent:t}).update()}),r.initContainer(),r.resize(),r.handlers=new y.a(Object(s.a)(r),r.options),"undefined"!==typeof window&&(window.addEventListener("online",r.onWindowOnline,!1),window.addEventListener("resize",r.onWindowResize,!1),window.addEventListener("orientationchange",r.onWindowResize,!1)),r}Object(u.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"resize",value:function(t){var e=this.containerDimensions(),n=e[0],r=e[1];this.transform.resize(n,r);var i=!this.moving;return i&&(this.stop(),this.emit("movestart",new Event("movestart",t)),this.emit("move",new Event("move",t))),this.emit("resize",new Event("resize",t)),i&&this.emit("moveend",new Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(v.a.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(g.a.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(m.a.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if((t=null===t||void 0===t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(-2," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null===t||void 0===t?0:t)<0)throw new Error("minPitch must be greater than or equal to ".concat(0));if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(0," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null===t||void 0===t?60:t)>60)throw new Error("maxPitch must be less than or equal to ".concat(60));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=Object(_.i)(function(e){b.a.frame(e),t.frame=null,t.update(e)}))}},{key:"update",value:function(t){var e=this;this.frame||(this.frame=Object(_.i)(function(n){b.a.frame(n),e.frame=null,e.renderTaskQueue.run(t)}))}},{key:"initContainer",value:function(){if("string"===typeof this.options.container){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else{if(!(this.options.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this.container=this.options.container}var t=this.container;t.classList.add("l7-map");var e=this.canvasContainer=h.b.create("div","l7-canvas-container",t);this.options.interactive&&e.classList.add("l7-interactive")}},{key:"containerDimensions",value:function(){var t=0,e=0;return this.container&&(t=this.container.clientWidth||400,e=this.container.clientHeight||300),[t,e]}},{key:"resizeCanvas",value:function(t,e){var n=h.b.DPR||1;this.canvas.width=n*t,this.canvas.height=n*e,this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(e,"px")}}]),e}(d.a)},function(t,e){function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=n,n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){"undefined"===typeof e&&(e=1e-6);var n,r,i,o,a;for(i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,(i=t)<n)return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",function(){return m});var a=n(0),s=n(1),u=n(9),c=n(36),l=n(64),f=n(93),h=n(975),p=n(112),d=n(199),v=n(448),m=function(){function t(e,n,r,i,o){Object(a.a)(this,t),this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=void 0===r||null===r?0:r,this._maxPitch=void 0===i||null===i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new p.a(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this.unmodified=!0,this.edgeInsets=new h.a,this.posMatrixCache={},this.alignedPosMatrixCache={}}return Object(s.a)(t,[{key:"minZoom",get:function(){return this._minZoom},set:function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}},{key:"minPitch",get:function(){return this._minPitch},set:function(t){this._minPitch!==t&&(this._minPitch=t,this._pitch=Math.max(this._pitch,t))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(t){this._maxPitch!==t&&(this._maxPitch=t,this._pitch=Math.min(this._pitch,t))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies},set:function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new l.a(this.width,this.height)}},{key:"bearing",get:function(){return-this.angle/Math.PI*180},set:function(t){var e=-Object(f.j)(t,-180,180)*Math.PI/180;this.angle!==e&&(this.unmodified=!1,this.angle=e,this.calcMatrices(),this.rotationMatrix=c.a.create(),c.a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var e=Object(f.b)(t,this._minPitch,this._maxPitch)/180*Math.PI;this._pitch!==e&&(this.unmodified=!1,this._pitch=e,this.calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this.unmodified=!1,this._fov=t/180*Math.PI,this.calcMatrices())}},{key:"zoom",get:function(){return this._zoom},set:function(t){var e=Math.min(Math.max(t,this._minZoom),this._maxZoom);this._zoom!==e&&(this.unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this.constrain(),this.calcMatrices())}},{key:"center",get:function(){return this._center},set:function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this.unmodified=!1,this._center=t,this.constrain(),this.calcMatrices())}},{key:"padding",get:function(){return this.edgeInsets.toJSON()},set:function(t){this.edgeInsets.equals(t)||(this.unmodified=!1,this.edgeInsets.interpolate(this.edgeInsets,t,1),this.calcMatrices())}},{key:"centerPoint",get:function(){return this.edgeInsets.getCenter(this.width,this.height)}},{key:"point",get:function(){return this.project(this.center)}},{key:"clone",value:function(){var e=new t(this._minZoom,this._maxZoom,this._minPitch,this._maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.center=this._center,e.zoom=this.zoom,e.angle=this.angle,e.fov=this._fov,e.pitch=this._pitch,e.unmodified=this.unmodified,e.edgeInsets=this.edgeInsets.clone(),e.calcMatrices(),e}},{key:"isPaddingEqual",value:function(t){return this.edgeInsets.equals(t)}},{key:"interpolatePadding",value:function(t,e,n){this.unmodified=!1,this.edgeInsets.interpolate(t,e,n),this.constrain(),this.calcMatrices()}},{key:"coveringZoomLevel",value:function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)}},{key:"resize",value:function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this.constrain(),this.calcMatrices()}},{key:"zoomScale",value:function(t){return Math.pow(2,t)}},{key:"scaleZoom",value:function(t){return Math.log(t)/Math.LN2}},{key:"project",value:function(t){var e=Object(f.b)(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.a(Object(v.c)(t.lng)*this.worldSize,Object(v.d)(e)*this.worldSize)}},{key:"unproject",value:function(t){return new v.b(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}},{key:"setLocationAtPoint",value:function(t,e){var n=this.pointCoordinate(e),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(t),o=new v.b(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}},{key:"pointCoordinate",value:function(t){var e=new Float64Array([t.x,t.y,0,1]),n=new Float64Array([t.x,t.y,1,1]);c.e.transformMat4(e,e,this.pixelMatrixInverse),c.e.transformMat4(n,n,this.pixelMatrixInverse);var r=e[3],i=n[3],o=e[0]/r,a=n[0]/i,s=e[1]/r,u=n[1]/i,l=e[2]/r,h=n[2]/i,p=l===h?0:(0-l)/(h-l);return new v.b(Object(f.e)(o,a,p)/this.worldSize,Object(f.e)(s,u,p)/this.worldSize)}},{key:"getBounds",value:function(){return(new d.a).extend(this.pointLocation(new l.a(0,0))).extend(this.pointLocation(new l.a(this.width,0))).extend(this.pointLocation(new l.a(this.width,this.height))).extend(this.pointLocation(new l.a(0,this.height)))}},{key:"getMaxBounds",value:function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new d.a([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}},{key:"setMaxBounds",value:function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this.constrain()):(this.lngRange=void 0,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"maxPitchScaleFactor",value:function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new l.a(0,0)),e=new Float32Array([t.x*this.worldSize,t.y*this.worldSize,0,1]);return c.e.transformMat4(e,e,this.pixelMatrix)[3]/this.cameraToCenterDistance}},{key:"getCameraPoint",value:function(){var t=this._pitch,e=Math.tan(t)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.a(0,e))}},{key:"getCameraQueryGeometry",value:function(t){var e=this.getCameraPoint();if(1===t.length)return[t[0],e];var n,i=e.x,o=e.y,a=e.x,s=e.y,u=r(t);try{for(u.s();!(n=u.n()).done;){var c=n.value;i=Math.min(i,c.x),o=Math.min(o,c.y),a=Math.max(a,c.x),s=Math.max(s,c.y)}}catch(t){u.e(t)}finally{u.f()}return[new l.a(i,o),new l.a(a,o),new l.a(a,s),new l.a(i,s),new l.a(i,o)]}},{key:"coordinatePoint",value:function(t){var e=c.e.fromValues(t.x*this.worldSize,t.y*this.worldSize,0,1);return c.e.transformMat4(e,e,this.pixelMatrix),new l.a(e[0]/e[3],e[1]/e[3])}},{key:"locationPoint",value:function(t){return this.coordinatePoint(this.locationCoordinate(t))}},{key:"pointLocation",value:function(t){return this.coordinateLocation(this.pointCoordinate(t))}},{key:"locationCoordinate",value:function(t){return v.b.fromLngLat(t)}},{key:"coordinateLocation",value:function(t){return t.toLngLat()}},{key:"getProjectionMatrix",value:function(){return this.projMatrix}},{key:"constrain",value:function(){if(this.center&&this.width&&this.height&&!this.constraining){this.constraining=!0;var t,e,n,r,i=-90,o=90,a=-180,s=180,c=this.size,f=this.unmodified;if(this.latRange){var h=this.latRange;i=Object(v.d)(h[1])*this.worldSize,o=Object(v.d)(h[0])*this.worldSize,t=o-i<c.y?c.y/(o-i):0}if(this.lngRange){var p=this.lngRange;a=Object(v.c)(p[0])*this.worldSize,s=Object(v.c)(p[1])*this.worldSize,e=s-a<c.x?c.x/(s-a):0}var d=this.point,m=Math.max(e||0,t||0);if(m)return this.center=this.unproject(new l.a(e?(s+a)/2:d.x,t?(o+i)/2:d.y)),u.K?this.zoom=Math.max(this.zoom,Math.max(-1,this.minZoom)):this.zoom+=this.scaleZoom(m),this.unmodified=f,void(this.constraining=!1);if(this.latRange){var g=d.y,y=c.y/2;g-y<i&&(r=i+y),g+y>o&&(r=o-y)}if(this.lngRange){var _=d.x,b=c.x/2;_-b<a&&(n=a+b),_+b>s&&(n=s-b)}void 0===n&&void 0===r||(this.center=this.unproject(new l.a(void 0!==n?n:d.x,void 0!==r?r:d.y))),this.unmodified=f,this.constraining=!1}}},{key:"calcMatrices",value:function(){if(this.height){var t=this._fov/2,e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(t)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(Object(f.b)(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,l=1.01*u,h=this.height/50,p=new Float64Array(16);c.b.perspective(p,this._fov,this.width/this.height,h,l),p[8]=2*-e.x/this.width,p[9]=2*e.y/this.height,c.b.scale(p,p,[1,-1,1]),c.b.translate(p,p,[0,0,-this.cameraToCenterDistance]),c.b.rotateX(p,p,this._pitch),c.b.rotateZ(p,p,this.angle),c.b.translate(p,p,[-a,-s,0]),this.mercatorMatrix=c.b.scale([],p,[this.worldSize,this.worldSize,this.worldSize]),c.b.scale(p,p,[1,1,Object(v.e)(1,this.center.lat)*this.worldSize,1]),this.projMatrix=p,this.invProjMatrix=c.b.invert([],this.projMatrix);var d=this.width%2/2,m=this.height%2/2,g=Math.cos(this.angle),y=Math.sin(this.angle),_=a-Math.round(a)+g*d+y*m,b=s-Math.round(s)+g*m+y*d,x=new Float64Array(p);if(c.b.translate(x,x,[_>.5?_-1:_,b>.5?b-1:b,0]),this.alignedProjMatrix=x,p=c.b.create(),c.b.scale(p,p,[this.width/2,-this.height/2,1]),c.b.translate(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=c.b.create(),c.b.scale(p,p,[1,-1,1]),c.b.translate(p,p,[-1,-1,0]),c.b.scale(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p,this.pixelMatrix=c.b.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(p=c.b.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this.posMatrixCache={},this.alignedPosMatrixCache={}}}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(93),a=n(64),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Object(r.a)(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(i)||i<0||isNaN(o)||o<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=i,this.right=o}return Object(i.a)(t,[{key:"interpolate",value:function(t,e,n){return null!=e.top&&null!=t.top&&(this.top=Object(o.e)(t.top,e.top,n)),null!=e.bottom&&null!=t.bottom&&(this.bottom=Object(o.e)(t.bottom,e.bottom,n)),null!=e.left&&null!=t.left&&(this.left=Object(o.e)(t.left,e.left,n)),null!=e.right&&null!=t.right&&(this.right=Object(o.e)(t.right,e.right,n)),this}},{key:"getCenter",value:function(t,e){var n=Object(o.b)((this.left+t-this.right)/2,0,t),r=Object(o.b)((this.top+e-this.bottom)/2,0,e);return new a.a(n,r)}},{key:"equals",value:function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}()},function(t,e,n){function r(t,e,n,f,h){t!==e&&a(e,function(a,c){if(h||(h=new i),u(a))s(t,e,c,n,r,f,h);else{var p=f?f(l(t,c),a,c+"",t,e,h):void 0;void 0===p&&(p=a),o(t,c,p)}},c)}var i=n(977),o=n(452),a=n(1008),s=n(1010),u=n(114),c=n(462),l=n(461);t.exports=r},function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=n(200),o=n(983),a=n(984),s=n(985),u=n(986),c=n(987);r.prototype.clear=o,r.prototype.delete=a,r.prototype.get=s,r.prototype.has=u,r.prototype.set=c,t.exports=r},function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)}var i=n(201),o=Array.prototype,a=o.splice;t.exports=r},function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=n(201);t.exports=r},function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=n(201);t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var i=n(201);t.exports=r},function(t,e,n){function r(){this.__data__=new i,this.size=0}var i=n(200);t.exports=r},function(t,e){function n(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}t.exports=n},function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},function(t,e,n){function r(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<s-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}var i=n(200),o=n(449),a=n(995),s=200;t.exports=r},function(t,e,n){function r(t){return!(!a(t)||o(t))&&(i(t)?d:c).test(s(t))}var i=n(292),o=n(991),a=n(114),s=n(993),u=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,l=Function.prototype,f=Object.prototype,h=l.toString,p=f.hasOwnProperty,d=RegExp("^"+h.call(p).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){var e=a.call(t,u),n=t[u];try{t[u]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(e?t[u]=n:delete t[u]),i}var i=n(450),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,u=i?i.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return i.call(t)}var r=Object.prototype,i=r.toString;t.exports=n},function(t,e,n){function r(t){return!!o&&o in t}var i=n(992),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(143),i=r["__core-js_shared__"];t.exports=i},function(t,e){function n(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,i=r.toString;t.exports=n},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(996),o=n(1003),a=n(1005),s=n(1006),u=n(1007);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.size=0,this.__data__={hash:new i,map:new(a||o),string:new i}}var i=n(997),o=n(200),a=n(449);t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(998),o=n(999),a=n(1e3),s=n(1001),u=n(1002);r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=a,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){function r(){this.__data__=i?i(null):{},this.size=0}var i=n(204);t.exports=r},function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=n(204),o="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:a.call(e,t)}var i=n(204),o=Object.prototype,a=o.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?o:e,this}var i=n(204),o="__lodash_hash_undefined__";t.exports=r},function(t,e,n){function r(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}var i=n(205);t.exports=r},function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},function(t,e,n){function r(t){return i(this,t).get(t)}var i=n(205);t.exports=r},function(t,e,n){function r(t){return i(this,t).has(t)}var i=n(205);t.exports=r},function(t,e,n){function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var i=n(205);t.exports=r},function(t,e,n){var r=n(1009),i=r();t.exports=i},function(t,e){function n(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}t.exports=n},function(t,e,n){function r(t,e,n,r,_,b,x){var w=g(t,n),E=g(e,n),S=x.get(E);if(S)return void i(t,n,S);var O=b?b(w,E,n+"",t,e,x):void 0,T=void 0===O;if(T){var A=l(E),C=!A&&h(E),k=!A&&!C&&m(E);O=E,A||C||k?l(w)?O=w:f(w)?O=s(w):C?(T=!1,O=o(E,!0)):k?(T=!1,O=a(E,!0)):O=[]:v(E)||c(E)?(O=w,c(w)?O=y(w):d(w)&&!p(w)||(O=u(E))):T=!1}T&&(x.set(E,O),_(O,E,r,b,x),x.delete(E)),i(t,n,O)}var i=n(452),o=n(1011),a=n(1012),s=n(1015),u=n(1016),c=n(456),l=n(457),f=n(1020),h=n(459),p=n(292),d=n(114),v=n(1022),m=n(460),g=n(461),y=n(1026);t.exports=r},function(t,e,n){(function(t){function r(t,e){if(e)return t.slice();var n=t.length,r=c?c(n):new t.constructor(n);return t.copy(r),r}var i=n(143),o="object"==typeof e&&e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,u=s?i.Buffer:void 0,c=u?u.allocUnsafe:void 0;t.exports=r}).call(e,n(189)(t))},function(t,e,n){function r(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var i=n(1013);t.exports=r},function(t,e,n){function r(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}var i=n(1014);t.exports=r},function(t,e,n){var r=n(143),i=r.Uint8Array;t.exports=i},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e,n){function r(t){return"function"!=typeof t.constructor||a(t)?{}:i(o(t))}var i=n(1017),o=n(454),a=n(455);t.exports=r},function(t,e,n){var r=n(114),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e,n){function r(t){return o(t)&&i(t)==a}var i=n(203),o=n(164),a="[object Arguments]";t.exports=r},function(t,e,n){function r(t){return o(t)&&i(t)}var i=n(294),o=n(164);t.exports=r},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function r(t){if(!a(t)||i(t)!=s)return!1;var e=o(t);if(null===e)return!0;var n=f.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==h}var i=n(203),o=n(454),a=n(164),s="[object Object]",u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,h=l.call(Object);t.exports=r},function(t,e,n){function r(t){return a(t)&&o(t.length)&&!!s[i(t)]}var i=n(203),o=n(458),a=n(164),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=r},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){(function(t){var r=n(451),i="object"==typeof e&&e&&!e.nodeType&&e,o=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a&&r.process,u=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u}).call(e,n(189)(t))},function(t,e,n){function r(t){return i(t,o(t))}var i=n(1027),o=n(462);t.exports=r},function(t,e,n){function r(t,e,n,r){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var c=e[s],l=r?r(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),a?o(n,c,l):i(n,c,l)}return n}var i=n(1028),o=n(293);t.exports=r},function(t,e,n){function r(t,e,n){var r=t[e];s.call(t,e)&&o(r,n)&&(void 0!==n||e in t)||i(t,e,n)}var i=n(293),o=n(202),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){var n=a(t),r=!n&&o(t),l=!n&&!r&&s(t),h=!n&&!r&&!l&&c(t),p=n||r||l||h,d=p?i(t.length,String):[],v=d.length;for(var m in t)!e&&!f.call(t,m)||p&&("length"==m||l&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||d.push(m);return d}var i=n(1030),o=n(456),a=n(457),s=n(459),u=n(463),c=n(460),l=Object.prototype,f=l.hasOwnProperty;t.exports=r},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e,n){function r(t){if(!i(t))return a(t);var e=o(t),n=[];for(var r in t)("constructor"!=r||!e&&u.call(t,r))&&n.push(r);return n}var i=n(114),o=n(455),a=n(1032),s=Object.prototype,u=s.hasOwnProperty;t.exports=r},function(t,e){function n(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}t.exports=n},function(t,e,n){function r(t){return i(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}var i=n(1034),o=n(1041);t.exports=r},function(t,e,n){function r(t,e){return a(o(t,e,i),t+"")}var i=n(464),o=n(1035),a=n(1037);t.exports=r},function(t,e,n){function r(t,e,n){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),u=Array(s);++a<s;)u[a]=r[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=r[a];return c[e]=n(u),i(t,this,c)}}var i=n(1036),o=Math.max;t.exports=r},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},function(t,e,n){var r=n(1038),i=n(1040),o=i(r);t.exports=o},function(t,e,n){var r=n(1039),i=n(453),o=n(464),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o;t.exports=a},function(t,e){function n(t){return function(){return t}}t.exports=n},function(t,e){function n(t){var e=0,n=0;return function(){var a=o(),s=i-(a-n);if(n=a,s>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,i=16,o=Date.now;t.exports=n},function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;return!!("number"==r?o(n)&&a(e,n.length):"string"==r&&e in n)&&i(n[e],t)}var i=n(202),o=n(294),a=n(463),s=n(114);t.exports=r},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(466),a=function(){function t(e){Object(r.a)(this,t),this.map=e}return Object(i.a)(t,[{key:"reset",value:function(){this.delayContextMenu=!1,delete this.contextMenuEvent}},{key:"mousemove",value:function(t){this.map.emit(t.type,new o.a(t.type,this.map,t))}},{key:"mousedown",value:function(){this.delayContextMenu=!0}},{key:"mouseup",value:function(){this.delayContextMenu=!1,this.contextMenuEvent&&(this.map.emit("contextmenu",new o.a("contextmenu",this.map,this.contextMenuEvent)),delete this.contextMenuEvent)}},{key:"contextmenu",value:function(t){this.delayContextMenu?this.contextMenuEvent=t:this.map.emit(t.type,new o.a(t.type,this.map,t)),this.map.listeners("contextmenu")&&t.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!0}},{key:"disable",value:function(){return!1}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return d});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(290),f=n.n(l),h=n(115),p=n(113),d=function(t){function e(t,r,i){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(o.a)(this,e);var u=h.a.mousePos(r.getCanvasContainer(),i),c=r.unproject(u);return a=n.call(this,t,f()({point:u,lngLat:c,originalEvent:i},s)),a.defaultPrevented=!1,a.target=r,a}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(p.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return p});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(64),f=n(115),h=n(113),p=function(t){function e(t,r,i){var a;Object(o.a)(this,e);var s="touchend"===t?i.changedTouches:i.touches,u=f.a.touchPos(r.getCanvasContainer(),s),c=u.map(function(t){return r.unproject(t)}),h=u.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new l.a(0,0)),p=r.unproject(h);return a=n.call(this,t,{points:u,point:h,lngLats:c,lngLat:p,originalEvent:i}),a.defaultPrevented=!1,a}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(h.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return f});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(113),f=function(t){function e(t,r,i){var a;return Object(o.a)(this,e),a=n.call(this,t,{originalEvent:i}),a.defaultPrevented=!1,a}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(l.a)},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(115),a=n(113),s=function(){function t(e,n){Object(r.a)(this,t),this.map=e,this.el=e.getCanvasContainer(),this.container=e.getContainer(),this.clickTolerance=n.clickTolerance||1}return Object(i.a)(t,[{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active}},{key:"enable",value:function(){this.isEnabled()||(this.enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"mousedown",value:function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(o.a.disableDrag(),this.startPos=this.lastPos=e,this.active=!0)}},{key:"mousemoveWindow",value:function(t,e){if(this.active){var n=e;if(!(this.lastPos.equals(n)||!this.box&&n.dist(this.startPos)<this.clickTolerance)){var r=this.startPos;this.lastPos=n,this.box||(this.box=o.a.create("div","l7-boxzoom",this.container),this.container.classList.add("l7-crosshair"),this.fireEvent("boxzoomstart",t));var i=Math.min(r.x,n.x),a=Math.max(r.x,n.x),s=Math.min(r.y,n.y),u=Math.max(r.y,n.y);o.a.setTransform(this.box,"translate(".concat(i,"px,").concat(s,"px)")),this.box&&(this.box.style.width="".concat(a-i,"px"),this.box.style.height="".concat(u-s,"px"))}}}},{key:"mouseupWindow",value:function(t,e){var n=this;if(this.active&&0===t.button){var r=this.startPos,i=e;if(this.reset(),o.a.suppressClick(),r.x!==i.x||r.y!==i.y)return this.map.emit("boxzoomend",new a.a("boxzoomend",{originalEvent:t})),{cameraAnimation:function(t){return t.fitScreenCoordinates(r,i,n.map.getBearing(),{linear:!0})}};this.fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(t){this.active&&27===t.keyCode&&(this.reset(),this.fireEvent("boxzoomcancel",t))}},{key:"reset",value:function(){this.active=!1,this.container.classList.remove("l7-crosshair"),this.box&&(o.a.remove(this.box),this.box=null),o.a.enableDrag(),delete this.startPos,delete this.lastPos}},{key:"fireEvent",value:function(t,e){return this.map.emit(t,new a.a(t,{originalEvent:e}))}}]),t}();e.a=s},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(){Object(r.a)(this,t),this.reset()}return Object(i.a)(t,[{key:"reset",value:function(){this.active=!1}},{key:"dblclick",value:function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return p});var o=n(1),a=n(0),s=n(12),u=n(3),c=n(4),l=n(2),f=n(6),h=n(113),p=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(f.a)(Object(s.a)(t),"type","renderFrame"),t}Object(u.a)(e,t);var n=r(e);return Object(o.a)(e)}(h.a)},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function s(t,e,n){var r=n.maxSpeed,i=n.linearity,o=n.deceleration,a=Object(p.b)(t*i/(e/1e3),-r,r),s=Math.abs(a)/(o*i);return{easing:n.easing,duration:1e3*s,amount:a*(s/2)}}n.d(e,"a",function(){return _});var u=n(0),c=n(1),l=n(64),f=n(290),h=n.n(f),p=n(93),d={linearity:.3,easing:Object(p.a)(0,0,.3,1)},v=h()({deceleration:2500,maxSpeed:1400},d),m=h()({deceleration:20,maxSpeed:1400},d),g=h()({deceleration:1e3,maxSpeed:360},d),y=h()({deceleration:1e3,maxSpeed:90},d),_=function(){function t(e){Object(u.a)(this,t),this.map=e,this.clear()}return Object(c.a)(t,[{key:"clear",value:function(){this.inertiaBuffer=[]}},{key:"record",value:function(t){this.drainInertiaBuffer(),this.inertiaBuffer.push({time:Object(p.f)(),settings:t})}},{key:"drainInertiaBuffer",value:function(){for(var t=this.inertiaBuffer,e=Object(p.f)();t.length>0&&e-t[0].time>160;)t.shift()}},{key:"onMoveEnd",value:function(t){if(this.drainInertiaBuffer(),!(this.inertiaBuffer.length<2)){var e,n={zoom:0,bearing:0,pitch:0,pan:new l.a(0,0),pinchAround:void 0,around:void 0},i=r(this.inertiaBuffer);try{for(i.s();!(e=i.n()).done;){var o=e.value.settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}}catch(t){i.e(t)}finally{i.f()}var u=this.inertiaBuffer[this.inertiaBuffer.length-1],c=u.time-this.inertiaBuffer[0].time,f={};if(n.pan.mag()){var d=s(n.pan.mag(),c,h()({},v,t||{}));f.offset=n.pan.mult(d.amount/n.pan.mag()),f.center=this.map.transform.center,a(f,d)}if(n.zoom){var _=s(n.zoom,c,m);f.zoom=this.map.transform.zoom+_.amount,a(f,_)}if(n.bearing){var b=s(n.bearing,c,g);f.bearing=this.map.transform.bearing+Object(p.b)(b.amount,-179,179),a(f,b)}if(n.pitch){var x=s(n.pitch,c,y);f.pitch=this.map.transform.pitch+x.amount,a(f,x)}if(f.zoom||f.bearing){var w=void 0===n.pinchAround?n.around:n.pinchAround;f.around=w?this.map.unproject(w):this.map.getCenter()}return this.clear(),h()(f,{noMoveStart:!0})}}}]),t}()},function(t,e,n){"use strict";function r(t){return t*(2-t)}var i=n(0),o=n(1),a={panStep:100,bearingStep:15,pitchStep:10},s=function(){function t(){Object(i.a)(this,t);var e=a;this.panStep=e.panStep,this.bearingStep=e.bearingStep,this.pitchStep=e.pitchStep}return Object(o.a)(t,[{key:"reset",value:function(){this.active=!1}},{key:"keydown",value:function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,i=0,o=0,a=0,s=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?i=-1:(t.preventDefault(),a=-1);break;case 39:t.shiftKey?i=1:(t.preventDefault(),a=1);break;case 38:t.shiftKey?o=1:(t.preventDefault(),s=-1);break;case 40:t.shiftKey?o=-1:(t.preventDefault(),s=1);break;default:return}return{cameraAnimation:function(u){var c=u.getZoom();u.easeTo({duration:300,easeId:"keyboardHandler",easing:r,zoom:n?Math.round(c)+n*(t.shiftKey?2:1):c,bearing:u.getBearing()+i*e.bearingStep,pitch:u.getPitch()+o*e.pitchStep,offset:[-a*e.panStep,-s*e.panStep],center:u.getCenter()},{originalEvent:t})}}}}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}();e.a=s},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(466),a=function(){function t(e,n){Object(r.a)(this,t),this.map=e,this.clickTolerance=n.clickTolerance}return Object(i.a)(t,[{key:"reset",value:function(){delete this.mousedownPos}},{key:"wheel",value:function(t){return this.firePreventable(new o.c(t.type,this.map,t))}},{key:"mousedown",value:function(t,e){return this.mousedownPos=e,this.firePreventable(new o.a(t.type,this.map,t))}},{key:"mouseup",value:function(t){this.map.emit(t.type,new o.a(t.type,this.map,t))}},{key:"click",value:function(t,e){this.mousedownPos&&this.mousedownPos.dist(e)>=this.clickTolerance||this.map.emit(t.type,new o.a(t.type,this.map,t))}},{key:"dblclick",value:function(t){return this.firePreventable(new o.a(t.type,this.map,t))}},{key:"mouseover",value:function(t){this.map.emit(t.type,new o.a(t.type,this.map,t))}},{key:"mouseout",value:function(t){this.map.emit(t.type,new o.a(t.type,this.map,t))}},{key:"touchstart",value:function(t){return this.firePreventable(new o.b(t.type,this.map,t))}},{key:"touchmove",value:function(t){this.map.emit(t.type,new o.b(t.type,this.map,t))}},{key:"touchend",value:function(t){this.map.emit(t.type,new o.b(t.type,this.map,t))}},{key:"touchcancel",value:function(t){this.map.emit(t.type,new o.b(t.type,this.map,t))}},{key:"firePreventable",value:function(t){if(this.map.emit(t.type,t),t.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){return!1}},{key:"disable",value:function(){return!1}}]),t}()},function(t,e,n){"use strict";var r=n(1053),i=n(1054),o=n(1055);n.d(e,"a",function(){return r.a}),n.d(e,"c",function(){return i.a}),n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return p});var o=n(0),a=n(1),s=n(32),u=n(3),c=n(4),l=n(2),f=n(295),h=n(206),p=function(t){function e(){return Object(o.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"mousedown",value:function(t,n){Object(s.a)(Object(l.a)(e.prototype),"mousedown",this).call(this,t,n),this.lastPoint&&(this.active=!0)}},{key:"move",value:function(t,e){return{around:e,panDelta:e.sub(t)}}},{key:"correctButton",value:function(t,e){return e===h.a&&!t.ctrlKey}}]),e}(f.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return h});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(295),f=n(206),h=function(t){function e(){return Object(o.a)(this,e),n.apply(this,arguments)}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"correctButton",value:function(t,e){return e===f.a&&t.ctrlKey||e===f.b}},{key:"move",value:function(t,e){var n=-.5*(e.y-t.y);if(n)return this.active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(t){t.preventDefault()}}]),e}(l.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return h});var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(295),f=n(206),h=function(t){function e(){return Object(o.a)(this,e),n.apply(this,arguments)}Object(s.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"contextmenu",value:function(t){t.preventDefault()}},{key:"correctButton",value:function(t,e){return e===f.a&&t.ctrlKey||e===f.b}},{key:"move",value:function(t,e){var n=.8*(e.x-t.x);if(n)return this.active=!0,{bearingDelta:n}}}]),e}(l.a)},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(6),a=n(112),s=n(93),u=n(115),c=4.000244140625,l=.01,f=1/450,h=2,p=function(){function t(e,n){var i=this;Object(r.a)(this,t),Object(o.a)(this,"onScrollFrame",function(){if(i.frameId&&(i.frameId=null,i.isActive())){var t=i.map.transform;if(0!==i.delta){var e="wheel"===i.type&&Math.abs(i.delta)>c?i.wheelZoomRate:i.defaultZoomRate,n=h/(1+Math.exp(-Math.abs(i.delta*e)));i.delta<0&&0!==n&&(n=1/n);var r="number"===typeof i.targetZoom?t.zoomScale(i.targetZoom):t.scale;i.targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*n))),"wheel"===i.type&&(i.startZoom=t.zoom,i.easing=i.smoothOutEasing(200)),i.delta=0}var o,a="number"===typeof i.targetZoom?i.targetZoom:t.zoom,u=i.startZoom,l=i.easing,f=!1;if("wheel"===i.type&&u&&l){var p=Math.min((Object(s.f)()-i.lastWheelEventTime)/200,1),d=l(p);o=Object(s.e)(u,a,d),p<1?i.frameId||(i.frameId=!0):f=!0}else o=a,f=!0;return i.active=!0,f&&(i.active=!1,i.finishTimeout=setTimeout(function(){i.zooming=!1,i.handler.triggerRenderFrame(),delete i.targetZoom,delete i.finishTimeout},200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:o-t.zoom,around:i.aroundPoint,originalEvent:i.lastWheelEvent}}}),this.map=e,this.el=e.getCanvasContainer(),this.handler=n,this.delta=0,this.defaultZoomRate=l,this.wheelZoomRate=f}return Object(i.a)(t,[{key:"setZoomRate",value:function(t){this.defaultZoomRate=t}},{key:"setWheelZoomRate",value:function(t){this.wheelZoomRate=t}},{key:"isEnabled",value:function(){return!!this.enabled}},{key:"isActive",value:function(){return!!this.active||void 0!==this.finishTimeout}},{key:"isZooming",value:function(){return!!this.zooming}},{key:"enable",value:function(t){this.isEnabled()||(this.enabled=!0,this.aroundCenter=t&&"center"===t.around)}},{key:"disable",value:function(){this.isEnabled()&&(this.enabled=!1)}},{key:"wheel",value:function(t){if(this.isEnabled()){var e=t.deltaMode===window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,n=Object(s.f)(),r=n-(this.lastWheelEventTime||0);this.lastWheelEventTime=n,0!==e&&e%c===0?this.type="wheel":0!==e&&Math.abs(e)<4?this.type="trackpad":r>400?(this.type=null,this.lastValue=e,this.timeout=setTimeout(this.onTimeout,40,t)):this.type||(this.type=Math.abs(r*e)<200?"trackpad":"wheel",this.timeout&&(clearTimeout(this.timeout),this.timeout=null,e+=this.lastValue)),t.shiftKey&&e&&(e/=4),this.type&&(this.lastWheelEvent=t,this.delta-=e,this.active||this.start(t)),t.preventDefault()}}},{key:"renderFrame",value:function(){return this.onScrollFrame()}},{key:"reset",value:function(){this.active=!1}},{key:"onTimeout",value:function(t){this.type="wheel",this.delta-=this.lastValue,!this.active&&this.start&&this.start(t)}},{key:"start",value:function(t){if(this.delta){this.frameId&&(this.frameId=null),this.active=!0,this.isZooming()||(this.zooming=!0),this.finishTimeout&&(clearTimeout(this.finishTimeout),delete this.finishTimeout);var e=u.a.mousePos(this.el,t);this.around=a.a.convert(this.aroundCenter?this.map.getCenter():this.map.unproject(e)),this.aroundPoint=this.map.transform.locationPoint(this.around),this.frameId||(this.frameId=!0,this.handler.triggerRenderFrame())}}},{key:"smoothOutEasing",value:function(t){var e=s.c;if(this.prevEase){var n=this.prevEase,r=(Object(s.f)()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);e=Object(s.a)(o,a,.25,1)}return this.prevEase={start:Object(s.f)(),duration:t,easing:e},e}}]),t}();e.a=p},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(e,n){Object(r.a)(this,t),this.clickZoom=e,this.tapZoom=n}return Object(i.a)(t,[{key:"enable",value:function(){this.clickZoom.enable(),this.tapZoom.enable()}},{key:"disable",value:function(){this.clickZoom.disable(),this.tapZoom.disable()}},{key:"isEnabled",value:function(){return this.clickZoom.isEnabled()&&this.tapZoom.isEnabled()}},{key:"isActive",value:function(){return this.clickZoom.isActive()||this.tapZoom.isActive()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(9),a=function(){function t(e,n,i){Object(r.a)(this,t),this.el=e,this.mousePan=n,this.touchPan=i}return Object(i.a)(t,[{key:"enable",value:function(t){this.inertiaOptions=t||{},this.mousePan.enable(),this.touchPan.enable(),o.K||this.el.classList.add("l7-touch-drag-pan")}},{key:"disable",value:function(){this.mousePan.disable(),this.touchPan.disable(),o.K||this.el.classList.remove("l7-touch-drag-pan")}},{key:"isEnabled",value:function(){return this.mousePan.isEnabled()&&this.touchPan.isEnabled()}},{key:"isActive",value:function(){return this.mousePan.isActive()||this.touchPan.isActive()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(e,n,i){Object(r.a)(this,t),this.pitchWithRotate=e.pitchWithRotate,this.mouseRotate=n,this.mousePitch=i}return Object(i.a)(t,[{key:"enable",value:function(){this.mouseRotate.enable(),this.pitchWithRotate&&this.mousePitch.enable()}},{key:"disable",value:function(){this.mouseRotate.disable(),this.mousePitch.disable()}},{key:"isEnabled",value:function(){return this.mouseRotate.isEnabled()&&(!this.pitchWithRotate||this.mousePitch.isEnabled())}},{key:"isActive",value:function(){return this.mouseRotate.isActive()||this.mousePitch.isActive()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(9),a=function(){function t(e,n,i,o){Object(r.a)(this,t),this.el=e,this.touchZoom=n,this.touchRotate=i,this.tapDragZoom=o,this.rotationDisabled=!1,this.enabled=!0}return Object(i.a)(t,[{key:"enable",value:function(t){this.touchZoom.enable(t),this.rotationDisabled||this.touchRotate.enable(t),this.tapDragZoom.enable(),o.K||this.el.classList.add("l7-touch-zoom-rotate")}},{key:"disable",value:function(){this.touchZoom.disable(),this.touchRotate.disable(),this.tapDragZoom.disable(),o.K||this.el.classList.remove("l7-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this.touchZoom.isEnabled()&&(this.rotationDisabled||this.touchRotate.isEnabled())&&this.tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this.touchZoom.isActive()||this.touchRotate.isActive()||this.tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this.rotationDisabled=!0,this.touchRotate.disable()}},{key:"enableRotation",value:function(){this.rotationDisabled=!1,this.touchZoom.isEnabled()&&this.touchRotate.enable()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(467),a=n(469),s=function(){function t(){Object(r.a)(this,t),this.tap=new a.a({numTouches:1,numTaps:1}),this.reset()}return Object(i.a)(t,[{key:"reset",value:function(){this.active=!1,delete this.swipePoint,delete this.swipeTouch,delete this.tapTime,this.tap.reset()}},{key:"touchstart",value:function(t,e,n){this.swipePoint||(this.tapTime&&t.timeStamp-this.tapTime>o.b&&this.reset(),this.tapTime?n.length>0&&(this.swipePoint=e[0],this.swipeTouch=n[0].identifier):this.tap.touchstart(t,e,n))}},{key:"touchmove",value:function(t,e,n){if(this.tapTime){if(this.swipePoint){if(n[0].identifier!==this.swipeTouch)return;var r=e[0],i=r.y-this.swipePoint.y;return this.swipePoint=r,t.preventDefault(),this.active=!0,{zoomDelta:i/128}}}else this.tap.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){if(this.tapTime)this.swipePoint&&0===n.length&&this.reset();else{this.tap.touchend(t,e,n)&&(this.tapTime=t.timeStamp)}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(469),a=function(){function t(){Object(r.a)(this,t),this.zoomIn=new o.a({numTouches:1,numTaps:2}),this.zoomOut=new o.a({numTouches:2,numTaps:1}),this.reset()}return Object(i.a)(t,[{key:"reset",value:function(){this.active=!1,this.zoomIn.reset(),this.zoomOut.reset()}},{key:"touchstart",value:function(t,e,n){this.zoomIn.touchstart(t,e,n),this.zoomOut.touchstart(t,e,n)}},{key:"touchmove",value:function(t,e,n){this.zoomIn.touchmove(t,e,n),this.zoomOut.touchmove(t,e,n)}},{key:"touchend",value:function(t,e,n){var r=this,i=this.zoomIn.touchend(t,e,n),o=this.zoomOut.touchend(t,e,n);return i?(this.active=!0,t.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this.active=!0,t.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}}]),t}()},function(t,e,n){"use strict";var r=n(1064),i=n(1065),o=n(1066),a=n(1067);n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return i.a}),n.d(e,"c",function(){return o.a}),n.d(e,"d",function(){return a.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(64),a=n(468),s=function(){function t(e){Object(r.a)(this,t),this.minTouches=1,this.clickTolerance=e.clickTolerance||1,this.reset()}return Object(i.a)(t,[{key:"reset",value:function(){this.active=!1,this.touches={},this.sum=new o.a(0,0)}},{key:"touchstart",value:function(t,e,n){return this.calculateTransform(t,e,n)}},{key:"touchmove",value:function(t,e,n){if(this.active)return t.preventDefault(),this.calculateTransform(t,e,n)}},{key:"touchend",value:function(t,e,n){this.calculateTransform(t,e,n),this.active&&n.length<this.minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isActive",value:function(){return this.active}},{key:"calculateTransform",value:function(t,e,n){n.length>0&&(this.active=!0);var r=Object(a.a)(n,e),i=new o.a(0,0),s=new o.a(0,0),u=0;for(var c in r)if(r[c]){var l=r[c],f=this.touches[c];f&&(i._add(l),s._add(l.sub(f)),u++,r[c]=l)}if(this.touches=r,!(u<this.minTouches)&&s.mag()){var h=s.div(u);if(this.sum._add(h),!(this.sum.mag()<this.clickTolerance)){return{around:i.div(u),panDelta:h}}}}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){return Math.abs(t.y)>Math.abs(t.x)}n.d(e,"a",function(){return p});var a=n(0),s=n(1),u=n(32),c=n(3),l=n(4),f=n(2),h=n(296),p=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"reset",value:function(){Object(u.a)(Object(f.a)(e.prototype),"reset",this).call(this),this.valid=void 0,delete this.firstMove,delete this.lastPoints}},{key:"start",value:function(t){this.lastPoints=t,o(t[0].sub(t[1]))&&(this.valid=!1)}},{key:"move",value:function(t,e,n){var r=t[0].sub(this.lastPoints[0]),i=t[1].sub(this.lastPoints[1]);if(this.valid=this.gestureBeginsVertically(r,i,n.timeStamp),this.valid){this.lastPoints=t,this.active=!0;return{pitchDelta:-.5*((r.y+i.y)/2)}}}},{key:"gestureBeginsVertically",value:function(t,e,n){if(void 0!==this.valid)return this.valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this.firstMove&&(this.firstMove=n),n-this.firstMove<100&&void 0;var a=t.y>0===e.y>0;return o(t)&&o(e)&&a}}}]),e}(h.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,e){return 180*t.angleWith(e)/Math.PI}n.d(e,"a",function(){return p});var a=n(0),s=n(1),u=n(32),c=n(3),l=n(4),f=n(2),h=n(296),p=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"reset",value:function(){Object(u.a)(Object(f.a)(e.prototype),"reset",this).call(this),delete this.minDiameter,delete this.startVector,delete this.vector}},{key:"start",value:function(t){this.startVector=this.vector=t[0].sub(t[1]),this.minDiameter=t[0].dist(t[1])}},{key:"move",value:function(t,e){var n=this.vector;if(this.vector=t[0].sub(t[1]),this.active||!this.isBelowThreshold(this.vector))return this.active=!0,{bearingDelta:o(this.vector,n),pinchAround:e}}},{key:"isBelowThreshold",value:function(t){this.minDiameter=Math.min(this.minDiameter,t.mag());var e=Math.PI*this.minDiameter,n=25/e*360,r=o(t,this.startVector);return Math.abs(r)<n}}]),e}(h.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t,e){return Math.log(t/e)/Math.LN2}n.d(e,"a",function(){return p});var a=n(0),s=n(1),u=n(32),c=n(3),l=n(4),f=n(2),h=n(296),p=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"reset",value:function(){Object(u.a)(Object(f.a)(e.prototype),"reset",this).call(this),delete this.distance,delete this.startDistance}},{key:"start",value:function(t){this.startDistance=this.distance=t[0].dist(t[1])}},{key:"move",value:function(t,e){var n=this.distance;if(this.distance=t[0].dist(t[1]),this.active||!(Math.abs(o(this.distance,this.startDistance))<.1))return this.active=!0,{zoomDelta:o(this.distance,n),pinchAround:e}}}]),e}(h.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return O});var o=n(15),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(9),d=n(19),v=(n.n(d),n(447)),m=n(112),g=n(199),y=n(64),_=n(465),b=n(1070),x=n(93),w=n(470),E=n(471);!function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".l7-map {\n  font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;\n  overflow: hidden;\n  position: relative;\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.l7-canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.l7-map:-webkit-full-screen {\n  width: 100%;\n  height: 100%;\n}\n\n.l7-canary {\n  background-color: salmon;\n}\n\n.l7-canvas-container.l7-interactive,\n.l7-ctrl-group button.l7-ctrl-compass {\n  cursor: -webkit-grab;\n  cursor: grab;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.l7-canvas-container.l7-interactive.l7-track-pointer {\n  cursor: pointer;\n}\n\n.l7-canvas-container.l7-interactive:active,\n.l7-ctrl-group button.l7-ctrl-compass:active {\n  cursor: -webkit-grabbing;\n  cursor: grabbing;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate,\n.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {\n  -ms-touch-action: pan-x pan-y;\n      touch-action: pan-x pan-y;\n}\n\n.l7-canvas-container.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: pinch-zoom;\n      touch-action: pinch-zoom;\n}\n\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,\n.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {\n  -ms-touch-action: none;\n      touch-action: none;\n}\n\n.l7-ctrl-top-left,\n.l7-ctrl-top-right,\n.l7-ctrl-bottom-left,\n.l7-ctrl-bottom-right { position: absolute; pointer-events: none; z-index: 2; }\n.l7-ctrl-top-left     { top: 0; left: 0; }\n.l7-ctrl-top-right    { top: 0; right: 0; }\n.l7-ctrl-bottom-left  { bottom: 0; left: 0; }\n.l7-ctrl-bottom-right { right: 0; bottom: 0; }\n\n.l7-ctrl {\n  clear: both;\n  pointer-events: auto;\n\n  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */\n  -webkit-transform: translate(0, 0);\n          transform: translate(0, 0);\n}\n.l7-ctrl-top-left .l7-ctrl     { margin: 10px 0 0 10px; float: left; }\n.l7-ctrl-top-right .l7-ctrl    { margin: 10px 10px 0 0; float: right; }\n.l7-ctrl-bottom-left .l7-ctrl  { margin: 0 0 10px 10px; float: left; }\n.l7-ctrl-bottom-right .l7-ctrl { margin: 0 10px 10px 0; float: right; }\n\n\n.l7-crosshair,\n.l7-crosshair .l7-interactive,\n.l7-crosshair .l7-interactive:active {\n    cursor: crosshair;\n}\n\n.l7-boxzoom {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 0;\n    height: 0;\n    background: #fff;\n    border: 2px dotted #202020;\n    opacity: 0.5;\n    z-index: 10;\n}\n");var S={hash:!1,zoom:-1,center:[112,32],pitch:0,bearing:0,interactive:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,trackResize:!0,renderWorldCopies:!0,pitchEnabled:!0,rotateEnabled:!0},O=function(t){function e(t){var r;if(Object(a.a)(this,e),r=n.call(this,Object(d.merge)({},S,t)),Object(h.a)(Object(u.a)(r),"renderTaskQueue",new E.a),Object(h.a)(Object(u.a)(r),"trackResize",!0),Object(h.a)(Object(u.a)(r),"onWindowOnline",function(){r.update()}),Object(h.a)(Object(u.a)(r),"onWindowResize",function(t){r.trackResize&&r.resize({originalEvent:t}).update()}),p.K?r.initMiniContainer():r.initContainer(),r.resize(),r.handlers=new _.a(Object(u.a)(r),r.options),"undefined"!==typeof window&&(window.addEventListener("online",r.onWindowOnline,!1),window.addEventListener("resize",r.onWindowResize,!1),window.addEventListener("orientationchange",r.onWindowResize,!1)),!p.K){var i="string"===typeof t.hash&&t.hash||void 0;t.hash&&(r.hash=new b.a(i).addTo(Object(u.a)(r)))}return r.hash&&r.hash.onHashChange()||(r.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(r.resize(),r.fitBounds(t.bounds,Object(d.merge)({},t.fitBoundsOptions,{duration:0})))),r}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"resize",value:function(t){var e=this.containerDimensions(),n=Object(o.a)(e,2),r=n[0],i=n[1];if(this.transform.resize(r,i),p.K)return this;var a=!this.moving;return a&&(this.stop(),this.emit("movestart",new p.a.Event("movestart",t)),this.emit("move",new p.a.Event("move",t))),this.emit("resize",new p.a.Event("resize",t)),a&&this.emit("moveend",new p.a.Event("moveend",t)),this}},{key:"getContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"getCanvasContainer",value:function(){return this.canvasContainer}},{key:"project",value:function(t){return this.transform.locationPoint(m.a.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation(y.a.convert(t))}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()}},{key:"setMaxBounds",value:function(t){this.transform.setMaxBounds(g.a.convert(t))}},{key:"setStyle",value:function(t){}},{key:"setMinZoom",value:function(t){if((t=null===t||void 0===t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between ".concat(-2," and the current maxZoom, inclusive"))}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null===t||void 0===t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null===t||void 0===t?0:t)<0)throw new Error("minPitch must be greater than or equal to ".concat(0));if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between ".concat(0," and the current maxPitch, inclusive"))}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null===t||void 0===t?60:t)>60)throw new Error("maxPitch must be less than or equal to ".concat(60));if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(t){this.transform.renderWorldCopies=!!t}},{key:"remove",value:function(){this.container.removeChild(this.canvasContainer),this.canvasContainer=null,this.frame&&(this.frame.cancel(),this.frame=null),this.renderTaskQueue.clear()}},{key:"requestRenderFrame",value:function(t){return this.update(),this.renderTaskQueue.add(t)}},{key:"cancelRenderFrame",value:function(t){return this.renderTaskQueue.remove(t)}},{key:"triggerRepaint",value:function(){var t=this;this.frame||(this.frame=Object(x.i)(function(e){w.a.frame(e),t.frame=null,t.update(e)}))}},{key:"update",value:function(t){var e=this;this.frame||(this.frame=Object(x.i)(function(n){w.a.frame(n),e.frame=null,e.renderTaskQueue.run(t)}))}},{key:"initContainer",value:function(){if("string"===typeof this.options.container){if(this.container=window.document.getElementById(this.options.container),!this.container)throw new Error("Container '".concat(this.options.container,"' not found."))}else{if(!(this.options.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this.container=this.options.container}var t=this.container;t.classList.add("l7-map");var e=this.canvasContainer=p.b.create("div","l7-canvas-container",t);this.options.interactive&&e.classList.add("l7-interactive")}},{key:"initMiniContainer",value:function(){this.container=this.options.canvas,this.canvasContainer=this.container}},{key:"containerDimensions",value:function(){var t=0,e=0;return this.container&&(p.K?(t=this.container.width/p.a.devicePixelRatio,e=this.container.height/p.a.devicePixelRatio):(t=this.container.clientWidth,e=this.container.clientHeight,t=0===t?400:t,e=0===e?300:e)),[t,e]}}]),e}(v.a)},function(t,e,n){"use strict";var r=n(0),i=n(1),o=n(6),a=n(9),s=n(19),u=(n.n(s),function(){function t(e){var n=this;Object(r.a)(this,t),Object(o.a)(this,"onHashChange",function(){var t=n.getCurrentHash();if(t.length>=3&&!t.some(function(t){return isNaN(+t)})){var e=n.map.dragRotate.isEnabled()&&n.map.touchZoomRotate.isEnabled()?+(t[3]||0):n.map.getBearing();return n.map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1}),Object(o.a)(this,"getCurrentHash",function(){var t=window.location.hash.replace("#","");if(n.hashName){var e;return t.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===n.hashName&&(e=t)}),(e?e[1]||"":"").split("/")}return t.split("/")}),Object(o.a)(this,"updateHashUnthrottled",function(){var t=n.getHashString();try{window.history.replaceState(window.history.state,"",t)}catch(t){}}),this.hashName=e&&encodeURIComponent(e),this.updateHash=Object(s.throttle)(this.updateHashUnthrottled,300)}return Object(i.a)(t,[{key:"addTo",value:function(t){return this.map=t,a.a.addEventListener("hashchange",this.onHashChange,!1),this.map.on("moveend",this.updateHash),this}},{key:"remove",value:function(){return a.a.removeEventListener("hashchange",this.onHashChange,!1),this.map.off("moveend",this.updateHash),delete this.map,this}},{key:"getHashString",value:function(t){var e=this.map.getCenter(),n=Math.round(100*this.map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),o=Math.round(e.lng*i)/i,a=Math.round(e.lat*i)/i,s=this.map.getBearing(),u=this.map.getPitch(),c="";if(c+=t?"/".concat(o,"/").concat(a,"/").concat(n):"".concat(n,"/").concat(a,"/").concat(o),(s||u)&&(c+="/".concat(Math.round(10*s)/10)),u&&(c+="/".concat(Math.round(u))),this.hashName){var l=this.hashName,f=!1,h=window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===l?(f=!0,"".concat(e,"=").concat(c)):t}).filter(function(t){return t});return f||h.push("".concat(l,"=").concat(c)),"#".concat(h.join("&"))}return"#".concat(c)}}]),t}());e.a=u},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(6),a=n(36),s=function(){function t(){Object(r.a)(this,t),Object(o.a)(this,"xzReg",.6*-Math.PI),Object(o.a)(this,"yReg",.2*Math.PI),Object(o.a)(this,"earthCameraRadius",200),Object(o.a)(this,"earthCameraZoom",1),Object(o.a)(this,"cameraPosition",a.d.create()),Object(o.a)(this,"projectionMatrix",a.b.create()),Object(o.a)(this,"modelMatrix",a.b.create()),Object(o.a)(this,"viewMatrix",a.b.create()),Object(o.a)(this,"viewProjectionMatrix",a.b.create()),Object(o.a)(this,"ViewProjectionMatrixUncentered",a.b.create()),Object(o.a)(this,"viewUncenteredMatrix",a.b.create())}return Object(i.a)(t,[{key:"syncWithMapCamera",value:function(t){var e=t.viewportHeight,n=void 0===e?1:e,r=t.viewportWidth,i=void 0===r?1:r,o=i/n;a.b.perspective(this.projectionMatrix,20,o,.1,1e4);var s=this.earthCameraRadius*Math.cos(this.xzReg),u=this.earthCameraRadius*Math.sin(this.xzReg),c=this.earthCameraRadius*Math.sin(this.yReg);this.cameraPosition=a.d.fromValues(s,c,u),a.d.normalize(this.cameraPosition,this.cameraPosition),a.d.multiply(this.cameraPosition,this.cameraPosition,a.d.fromValues(this.earthCameraRadius,this.earthCameraRadius,this.earthCameraRadius)),a.d.scale(this.cameraPosition,this.cameraPosition,this.earthCameraZoom);var l=a.d.create();a.d.cross(l,this.cameraPosition,a.d.fromValues(0,1,0));var f=a.d.fromValues(0,1,0);a.d.cross(f,l,this.cameraPosition);var h=a.d.fromValues(0,0,0);a.b.lookAt(this.viewMatrix,this.cameraPosition,h,f),this.viewUncenteredMatrix=a.b.clone(this.viewMatrix),a.b.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),a.b.multiply(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"rotateY",value:function(t){this.xzReg+=t*Math.min(this.earthCameraZoom*this.earthCameraZoom,1)}},{key:"rotateX",value:function(t){this.yReg+=t*Math.min(this.earthCameraZoom*this.earthCameraZoom,1)}},{key:"scaleZoom",value:function(t){this.earthCameraZoom+=t,this.earthCameraZoom=Math.max(this.earthCameraZoom,.6)}},{key:"getZoom",value:function(){return 4}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[0,0]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return this.modelMatrix}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(142),f=n(1074);l.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return P});var o,a,s=n(10),u=n(49),c=n(7),l=n(0),f=n(1),h=n(12),p=n(3),d=n(4),v=n(2),m=n(6),g=n(8),y=n.n(g),_=n(11),b=n(446),x=n(9),w=n(36),E=n(13),S=(n.n(E),n(14)),O=(n.n(S),n(207)),T=n(289),A=n(92),C=["id","style","rotation","mapInstance","version","mapSize","interactive"],k=["id","style","rotation","mapInstance","canvas","hasBaseMap"],M=12,P=(o=Object(E.injectable)())(a=function(t){function e(){var t;Object(l.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(m.a)(Object(h.a)(t),"version",A.a.DEFUALT),Object(m.a)(Object(h.a)(t),"handleMiniCameraChanged",function(e,n,r,i,o){var a=t.config.offsetCoordinate,s=void 0===a||a;t.viewport.syncWithMapCamera({bearing:i,center:[e,n],viewportHeight:t.map.transform.height,pitch:o,viewportWidth:t.map.transform.width,zoom:r,cameraHeight:0}),t.viewport.getZoom()>M&&s?t.coordinateSystemService.setCoordinateSystem(_.d.LNGLAT_OFFSET):t.coordinateSystemService.setCoordinateSystem(_.d.LNGLAT),t.cameraChangedCallback(t.viewport)}),t}Object(p.a)(e,t);var n=r(e);return Object(f.a)(e,[{key:"lngLatToCoord",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},n=this.lngLatToMercator(t,0),r=n.x,i=n.y;return[r-e.x,i-e.y]}},{key:"lngLatToMercator",value:function(t,e){var n=b.c.fromLngLat(t,e),r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,s=n.z;return{x:i,y:a,z:void 0===s?0:s}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,z:0},o=b.c.fromLngLat(t,e),a=o.meterInMercatorCoordinateUnits(),s=w.b.create();return w.b.translate(s,s,w.d.fromValues(o.x-i.x,o.y-i.y,o.z||0-i.z)),w.b.scale(s,s,w.d.fromValues(a*r[0],-a*r[1],a*r[2])),w.b.rotateX(s,s,n[0]),w.b.rotateY(s,s,n[1]),w.b.rotateZ(s,s,n[2]),s}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(y.a.mark(function t(){var e,n,r,i,o,a,c,l,f,h,p,d,v,m,g,_=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,i=e.style,o=void 0===i?"light":i,a=e.rotation,c=void 0===a?0:a,l=e.mapInstance,f=e.version,h=void 0===f?"DEFAULTMAP":f,p=e.mapSize,d=void 0===p?1e4:p,v=e.interactive,m=void 0===v||v,g=Object(u.a)(e,C),this.viewport=new T.a,this.version=h,this.simpleMapCoord.setSize(d),h===A.a.SIMPLE&&g.center&&(g.center=this.simpleMapCoord.unproject(g.center)),l?(this.map=l,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(r),this.map=new b.b(Object(s.a)({container:this.$mapContainer,style:this.getMapStyleValue(o),bearing:c},g))),this.map.on("load",function(){_.handleCameraChanged()}),m&&this.map.on("move",this.handleCameraChanged),setTimeout(function(){_.handleCameraChanged()},100),this.handleCameraChanged();case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"initMiniMap",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(y.a.mark(function t(){var e,n,r,i,o,a,c,l,f,h,p,d,v,m,g=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,i=e.style,o=void 0===i?"light":i,a=e.rotation,c=void 0===a?0:a,l=e.mapInstance,f=e.canvas,h=void 0===f?null:f,p=e.hasBaseMap,d=void 0!==p&&p,v=Object(u.a)(e,k),this.viewport=new T.a,this.$mapContainer=h,this.map=new b.b(Object(s.a)({container:this.$mapContainer,style:this.getMapStyleValue(o),bearing:c,canvas:h},v)),d?(m=this.map.getCenter(),this.handleMiniCameraChanged(m.lng,m.lat,this.map.getZoom(),this.map.getBearing(),this.map.getPitch()),x.a.document.addEventListener("mapCameaParams",function(t){var e=t.e,n=e.longitude,r=e.latitude,i=e.scale,o=e.bearing,a=e.pitch;g.handleMiniCameraChanged(n,r,i-1.25,o,a)})):(this.map.on("load",this.handleCameraChanged),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged());case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"exportMap",value:function(t){var e=this.map.getCanvas();return"jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png")}}]),e}(O.a))||a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(c.a)(t);if(e){var i=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(0),a=n(1),s=n(3),u=n(4),c=n(2),l=n(142),f=n(1076);!function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".mapboxgl-ctrl-logo {\n display: none !important;\n}\n");l.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(v.a)(t);if(e){var i=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return M});var o,a,s=n(10),u=n(49),c=n(7),l=n(0),f=n(1),h=n(12),p=n(3),d=n(4),v=n(2),m=n(6),g=n(8),y=n.n(g),_=n(36),b=n(13),x=(n.n(b),n(1077)),w=n.n(x),E=n(14),S=(n.n(E),n(207)),O=n(92),T=n(1078),A=["id","attributionControl","style","token","rotation","mapInstance"];!function(t,e){var n="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,r="undefined"!==typeof wx&&null!==wx&&("undefined"!==typeof wx.request||"undefined"!==typeof wx.miniProgram);if(!n&&!r&&(e||(e=document),e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var o=e.body||e.getElementsByTagName("body")[0];o?o.parentNode.insertBefore(i,o):e.documentElement.appendChild(i)}var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),i.appendChild(a)}}(".mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{-ms-touch-action:pan-x pan-y;touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:pinch-zoom;touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{-ms-touch-action:none;touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;-webkit-transform:translate(0);transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){-webkit-box-shadow:0 0 0 2px ButtonText;box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{-webkit-box-shadow:0 0 2px 2px #0096ff;box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){-webkit-box-shadow:none;box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E\")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E\")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E\")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E\")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;-webkit-box-sizing:border-box;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;-ms-flex-item-align:start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;-ms-flex-item-align:end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;-webkit-box-shadow:0 1px 2px rgba(0,0,0,.1);box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:-webkit-box;display:-ms-flexbox;display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:\"\";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:\"\";height:19px;left:-2px;position:absolute;top:-2px;width:19px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 0 3px rgba(0,0,0,.35);box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);transform:scale(3);opacity:0}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}"),window.mapboxgl=w.a;var C=0,k="101MlGsZ2AmmA&access_token=pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p0MG01MXRqMW45cjQzb2R6b2ptc3J4MSJ9.zA2W0IkI0c6KaAhJfk9bWg",M=(o=Object(b.injectable)())(a=function(t){function e(){var t;Object(l.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(m.a)(Object(h.a)(t),"version",O.a.MAPBOX),t}Object(p.a)(e,t);var n=r(e);return Object(f.a)(e,[{key:"getType",value:function(){return"mapbox"}},{key:"lngLatToCoord",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0,z:0},n=this.lngLatToMercator(t,0),r=n.x,i=n.y;return[r-e.x,i-e.y]}},{key:"lngLatToMercator",value:function(t,e){var n=window.mapboxgl.MercatorCoordinate.fromLngLat(t,e),r=n.x,i=void 0===r?0:r,o=n.y,a=void 0===o?0:o,s=n.z;return{x:i,y:a,z:void 0===s?0:s}}},{key:"getModelMatrix",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0,z:0},o=window.mapboxgl.MercatorCoordinate.fromLngLat(t,e),a=o.meterInMercatorCoordinateUnits(),s=_.b.create();return _.b.translate(s,s,_.d.fromValues(o.x-i.x,o.y-i.y,o.z||0-i.z)),_.b.scale(s,s,_.d.fromValues(a*r[0],-a*r[1],a*r[2])),_.b.rotateX(s,s,n[0]),_.b.rotateY(s,s,n[1]),_.b.rotateZ(s,s,n[2]),s}},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(y.a.mark(function t(){var e,n,r,i,o,a,c,l,f,h,p,d,v,m=this;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.config,n=e.id,r=void 0===n?"map":n,i=e.attributionControl,o=void 0!==i&&i,a=e.style,c=void 0===a?"light":a,l=e.token,f=void 0===l?k:l,h=e.rotation,p=void 0===h?0:h,d=e.mapInstance,v=Object(u.a)(e,A),this.viewport=new T.a,d||window.mapboxgl||console.error(this.configService.getSceneWarninfo("SDK")),f!==k||"blank"===c||window.mapboxgl.accessToken||d||console.warn(this.configService.getSceneWarninfo("MapToken")),d||window.mapboxgl.accessToken||(window.mapboxgl.accessToken=f),d?(this.map=d,this.$mapContainer=this.map.getContainer()):(this.$mapContainer=this.creatMapContainer(r),this.map=new window.mapboxgl.Map(Object(s.a)({container:this.$mapContainer,style:this.getMapStyleValue(c),attributionControl:o,bearing:p},v))),this.map.on("load",function(){m.handleCameraChanged()}),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged();case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"destroy",value:function(){var t,e;null===(t=this.$mapContainer)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(this.$mapContainer),this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}},{key:"emit",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).emit.apply(e,[t].concat(r))}},{key:"once",value:function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=this.eventEmitter).once.apply(e,[t].concat(r))}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"meterToCoord",value:function(t,e){var n=new w.a.LngLat(t[0],t[1]),r=new w.a.LngLat(e[0],e[1]),i=n.distanceTo(r),o=w.a.MercatorCoordinate.fromLngLat({lng:t[0],lat:t[1]}),a=w.a.MercatorCoordinate.fromLngLat({lng:e[0],lat:e[1]}),s=o.x,u=o.y,c=a.x,l=a.y;return 4194304*Math.sqrt(Math.pow(s-c,2)+Math.pow(u-l,2))*2/i}},{key:"exportMap",value:function(t){var e=this.map.getCanvas();return"jpg"===t?null===e||void 0===e?void 0:e.toDataURL("image/jpeg"):null===e||void 0===e?void 0:e.toDataURL("image/png")}},{key:"creatMapContainer",value:function(t){var e=t;"string"===typeof t&&(e=document.getElementById(t));var n=document.createElement("div");return n.style.cssText+="\n      position: absolute;\n      top: 0;\n      height: 100%;\n      width: 100%;\n    ",n.id="l7_mapbox_div"+C++,e.appendChild(n),n}}]),e}(S.a))||a},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,i){if(e)if(n){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk);",a={};e(a),r=i(a),"undefined"!==typeof window&&(r.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else n=i;else e=i}var e,n,r;return t(["exports"],function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function r(t,e){this.x=t,this.y=e}function i(t,e,n,r){var i=new di(t,e,n,r);return function(t){return i.solve(t)}}function o(t,e,n){return Math.min(n,Math.max(e,t))}function a(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function s(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function u(){return Ei++}function c(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function l(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function f(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function h(t,e){return-1!==t.indexOf(e,t.length-e.length)}function p(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function d(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function v(t){return Array.isArray(t)?t.map(v):"object"==typeof t&&t?p(t,v):t}function m(t){Si[t]||("undefined"!=typeof console&&console.warn(t),Si[t]=!0)}function g(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function y(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e}function _(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function b(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}function x(t){if(null==Oi){var e=t.navigator?t.navigator.userAgent:null;Oi=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Oi}function w(t){try{var e=bi[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}function E(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,_i),t.isContextLost())return;Pi.supported=!0}catch(t){}t.deleteTexture(e),ji=!0}function S(t){return 0===t.indexOf("mapbox:")}function O(t){return Li.test(t)}function T(t){var e=t.match(Di);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function A(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function C(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(bi.atob(e[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(t){return null}}function k(){bi.caches&&!zi&&(zi=bi.caches.open("mapbox-tiles"))}function M(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}function P(){return null==Bi&&(Bi=bi.OffscreenCanvas&&new bi.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof bi.createImageBitmap),Bi}function j(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function I(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}function R(t){var e=t.value;return e?[new co(t.key,e,"constants have been deprecated as of v8")]:[]}function L(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function D(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function N(t){if(Array.isArray(t))return t.map(N);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=N(t[n]);return e}return D(t)}function z(t,e){return{kind:"array",itemType:t,N:e}}function F(t){if("array"===t.kind){var e=F(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}function B(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!B(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=Eo;n<r.length;n+=1)if(!B(r[n],e))return null}return"Expected "+F(t)+" but found "+F(e)+" instead."}function U(t,e){return e.some(function(e){return e.kind===t.kind})}function V(t,e){return e.some(function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t})}function G(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function H(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Oo)return!0;if(t instanceof To)return!0;if(t instanceof Co)return!0;if(t instanceof ko)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!H(n[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!H(t[r]))return!1;return!0}return!1}function W(t){if(null===t)return ho;if("string"==typeof t)return vo;if("boolean"==typeof t)return mo;if("number"==typeof t)return po;if(t instanceof Oo)return go;if(t instanceof To)return bo;if(t instanceof Co)return xo;if(t instanceof ko)return wo;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=W(i[r]);if(e){if(e===o)continue;e=_o;break}e=o}return z(e||_o,n)}return yo}function q(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Oo||t instanceof Co||t instanceof ko?t.toString():JSON.stringify(t)}function Z(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function X(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Y(t,e){var n=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,i=Math.pow(2,e.z);return[Math.round(n*i*8192),Math.round(r*i*8192)]}function K(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function J(t,e){for(var n,r,i,o,a,s,u,c=!1,l=0,f=e.length;l<f;l++)for(var h=e[l],p=0,d=h.length;p<d-1;p++){if((o=(n=t)[0]-(r=h[p])[0])*(u=n[1]-(i=h[p+1])[1])-(s=n[0]-i[0])*(a=n[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;K(t,h[p],h[p+1])&&(c=!c)}return c}function Q(t,e){for(var n=0;n<e.length;n++)if(J(t,e[n]))return!0;return!1}function $(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1],a=(t[0]-n[0])*o-i*(t[1]-n[1]),s=(e[0]-n[0])*o-i*(e[1]-n[1]);return a>0&&s<0||a<0&&s>0}function tt(t,e,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],a=0;a<o.length-1;++a)if(0!=(f=[(l=o[a+1])[0]-(c=o[a])[0],l[1]-c[1]])[0]*(h=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-f[1]*h[0]&&$(s,u,c,l)&&$(c,l,s,u))return!0;var s,u,c,l,f,h;return!1}function et(t,e){for(var n=0;n<t.length;++n)if(!J(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(tt(t[r],t[r+1],e))return!1;return!0}function nt(t,e){for(var n=0;n<e.length;n++)if(et(t,e[n]))return!0;return!1}function rt(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=Y(t[i][a],n);Z(e,s),o.push(s)}r.push(o)}return r}function it(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=rt(t[i],e,n);r.push(o)}return r}function ot(t,e,n,r){if(t[0]<n[0]||t[0]>n[2]){var i=.5*r,o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0;0===o&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o}Z(e,t)}function at(t,e,n,r){for(var i=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],a=[],s=0,u=t;s<u.length;s+=1)for(var c=0,l=u[s];c<l.length;c+=1){var f=l[c],h=[f.x+o[0],f.y+o[1]];ot(h,e,n,i),a.push(h)}return a}function st(t,e,n,r){for(var i,o=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],s=[],u=0,c=t;u<c.length;u+=1){for(var l=[],f=0,h=c[u];f<h.length;f+=1){var p=h[f],d=[p.x+a[0],p.y+a[1]];Z(e,d),l.push(d)}s.push(l)}if(e[2]-e[0]<=o/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var v=0,m=s;v<m.length;v+=1)for(var g=0,y=m[v];g<y.length;g+=1)ot(y[g],e,n,o)}return s}function ut(t){if(t instanceof Bo){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof Vo)return!1;var e=!0;return t.eachChild(function(t){e&&!ut(t)&&(e=!1)}),e}function ct(t){if(t instanceof Bo&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!ct(t)&&(e=!1)}),e}function lt(t,e){if(t instanceof Bo&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild(function(t){n&&!lt(t,e)&&(n=!1)}),n}function ft(t,e){for(var n,r=t.length-1,i=0,o=r,a=0;i<=o;)if((n=t[a=Math.floor((i+o)/2)])<=e){if(a===r||e<t[a+1])return a;i=a+1}else{if(!(n>e))throw new Po("Input is not a number.");o=a-1}return 0}function ht(t,e,n){return t*(1-n)+e*n}function pt(t){return t>.008856451679035631?Math.pow(t,1/3):t/Zo+4/29}function dt(t){return t>6/29?t*t*t:Zo*(t-4/29)}function vt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function mt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gt(t){var e=mt(t.r),n=mt(t.g),r=mt(t.b),i=pt((.4124564*e+.3575761*n+.1804375*r)/.95047),o=pt((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-pt((.0193339*e+.119192*n+.9503041*r)/1.08883)),alpha:t.a}}function yt(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*dt(e),n=.95047*dt(n),r=1.08883*dt(r),new Oo(vt(3.2404542*n-1.5371385*e-.4985314*r),vt(-.969266*n+1.8760108*e+.041556*r),vt(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function _t(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}function bt(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}function xt(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function wt(t,e,n,r){return 0===r.compare(e,n)}function Et(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=mo,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,_o);if(!o)return null;if(!xt(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+F(o.type)+"'.");var a=e.parse(t[2],2,_o);if(!a)return null;if(!xt(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+F(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+F(o.type)+"' and '"+F(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Io(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Io(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,bo)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=W(o),u=W(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Po('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var c=W(o),l=W(a);if("string"!==c.kind||"string"!==l.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},i}()}function St(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=G(n,r,i,a);if(s)throw new Po(s);return new Oo(n/255*a,r/255*a,i/255*a,a)}function Ot(t,e){return t in e}function Tt(t,e){var n=e[t];return void 0===n?null:n}function At(t){return{type:t}}function Ct(t){return{result:"success",value:t}}function kt(t){return{result:"error",value:t}}function Mt(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Pt(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function jt(t){return!!t.expression&&t.expression.interpolated}function It(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Rt(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Lt(t){return t}function Dt(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Nt(t,e,n,r,i){return Dt(typeof n===i?r[n]:void 0,t.default,e.default)}function zt(t,e,n){if("number"!==It(n))return Dt(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=ft(t.stops.map(function(t){return t[0]}),n);return t.stops[i][1]}function Ft(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==It(n))return Dt(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=ft(t.stops.map(function(t){return t[0]}),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],c=qo[e.type]||Lt;if(t.colorSpace&&"rgb"!==t.colorSpace){var l=Qo[t.colorSpace];c=function(t,e){return l.reverse(l.interpolate(l.forward(t),l.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return c(n,r,a)}}:c(s,u,a)}function Bt(t,e,n){return"color"===e.type?n=Oo.parse(n):"formatted"===e.type?n=Co.fromString(n.toString()):"resolvedImage"===e.type?n=ko.fromString(n.toString()):It(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Dt(n,t.default,e.default)}function Ut(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in ma}function Vt(t,e){var n=new Ho(ma,[],e?function(t){var e={color:go,string:vo,number:po,enum:vo,boolean:mo,formatted:xo,resolvedImage:wo};return"array"===t.type?z(e[t.value]||_o,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?Ct(new ga(r,e)):kt(n.errors)}function Gt(t,e){if("error"===(t=Vt(t,e)).result)return t;var n=t.value.expression,r=ut(n);if(!r&&!Mt(e))return kt([new lo("","data expressions not supported")]);var i=lt(n,["zoom"]);if(!i&&!Pt(e))return kt([new lo("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof ea)n=t(e.result);else if(e instanceof ta)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof Wo||e instanceof $o)&&e.input instanceof Bo&&"zoom"===e.input.name&&(n=e);return n instanceof lo||e.eachChild(function(e){var r=t(e);r instanceof lo?n=r:!n&&r?n=new lo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new lo("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return o||i?o instanceof lo?kt([o]):o instanceof $o&&!jt(e)?kt([new lo("",'"interpolate" expressions cannot be used with this property')]):Ct(o?new _a(r?"camera":"composite",t.value,o.labels,o instanceof $o?o.interpolation:void 0):new ya(r?"constant":"source",t.value)):kt([new lo("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Ht(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=It(n);if("object"!==u)return[new co(e,n,"object expected, "+u+" found")];for(var c in n){var l=c.split(".")[0],f=r[l]||r["*"],h=void 0;if(i[l])h=i[l];else if(r[l])h=he;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new co(e,n[c],'unknown property "'+c+'"'));continue}h=he}s=s.concat(h({key:(e?e+".":e)+c,value:n[c],valueSpec:f,style:o,styleSpec:a,object:n,objectKey:c},n))}for(var p in r)i[p]||r[p].required&&void 0===r[p].default&&void 0===n[p]&&s.push(new co(e,n,'missing required property "'+p+'"'));return s}function Wt(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||he;if("array"!==It(e))return[new co(o,e,"array expected, "+It(e)+" found")];if(n.length&&e.length!==n.length)return[new co(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new co(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===It(n.value)&&(s=n.value);for(var u=[],c=0;c<e.length;c++)u=u.concat(a({array:e,arrayIndex:c,value:e[c],valueSpec:s,style:r,styleSpec:i,key:o+"["+c+"]"}));return u}function qt(t){var e=t.key,n=t.value,r=t.valueSpec,i=It(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new co(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new co(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new co(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function Zt(t){function e(t){var e=[],r=t.value,s=t.key;if("array"!==It(r))return[new co(s,r,"array expected, "+It(r)+" found")];if(2!==r.length)return[new co(s,r,"array length 2 expected, length "+r.length+" found")];if(f){if("object"!==It(r[0]))return[new co(s,r,"object expected, "+It(r[0])+" found")];if(void 0===r[0].zoom)return[new co(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new co(s,r,"object stop key must have value")];if(o&&o>D(r[0].zoom))return[new co(s,r[0].zoom,"stop zoom values must appear in ascending order")];D(r[0].zoom)!==o&&(o=D(r[0].zoom),i=void 0,u={}),e=e.concat(Ht({key:s+"[0]",value:r[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:qt,value:n}}))}else e=e.concat(n({key:s+"[0]",value:r[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},r));return Ut(N(r[1]))?e.concat([new co(s+"[1]",r[1],"expressions are not allowed in function stops.")]):e.concat(he({key:s+"[1]",value:r[1],valueSpec:a,style:t.style,styleSpec:t.styleSpec}))}function n(t,e){var n=It(t.value),o=D(t.value),c=null!==t.value?t.value:e;if(r){if(n!==r)return[new co(t.key,c,n+" stop domain type must match previous stop domain type "+r)]}else r=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new co(t.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==s){var l="number expected, "+n+" found";return Mt(a)&&void 0===s&&(l+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new co(t.key,c,l)]}return"categorical"!==s||"number"!==n||isFinite(o)&&Math.floor(o)===o?"categorical"!==s&&"number"===n&&void 0!==i&&o<i?[new co(t.key,c,"stop domain values must appear in ascending order")]:(i=o,"categorical"===s&&o in u?[new co(t.key,c,"stop domain values must be unique")]:(u[o]=!0,[])):[new co(t.key,c,"integer expected, found "+o)]}var r,i,o,a=t.valueSpec,s=D(t.value.type),u={},c="categorical"!==s&&void 0===t.value.property,l=!c,f="array"===It(t.value.stops)&&"array"===It(t.value.stops[0])&&"object"===It(t.value.stops[0][0]),h=Ht({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===s)return[new co(t.key,t.value,'identity function may not have a "stops" property')];var n=[],r=t.value;return n=n.concat(Wt({key:t.key,value:r,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:e})),"array"===It(r)&&0===r.length&&n.push(new co(t.key,r,"array must have at least one stop")),n},default:function(t){return he({key:t.key,value:t.value,valueSpec:a,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===s&&c&&h.push(new co(t.key,t.value,'missing required property "property"')),"identity"===s||t.value.stops||h.push(new co(t.key,t.value,'missing required property "stops"')),"exponential"===s&&t.valueSpec.expression&&!jt(t.valueSpec)&&h.push(new co(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!Mt(t.valueSpec)?h.push(new co(t.key,t.value,"property functions not supported")):c&&!Pt(t.valueSpec)&&h.push(new co(t.key,t.value,"zoom functions not supported"))),"categorical"!==s&&!f||void 0!==t.value.property||h.push(new co(t.key,t.value,'"property" property is required')),h}function Xt(t){var e=("property"===t.expressionContext?Gt:Vt)(N(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new co(""+t.key+e.key,t.value,e.message)});var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new co(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ct(n))return[new co(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ct(n))return[new co(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!lt(n,["zoom","feature-state"]))return[new co(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!ut(n))return[new co(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Yt(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(D(n))&&i.push(new co(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(D(n))&&i.push(new co(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function Kt(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!Kt(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}function Jt(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};Kt(t)||(t=$t(t));var e=Vt(t,xa);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function Qt(t,e){return t<e?-1:t>e?1:0}function $t(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?te(t[1],t[2],"=="):"!="===n?re(te(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?te(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map($t))):"all"===n?["all"].concat(t.slice(1).map($t)):"none"===n?["all"].concat(t.slice(1).map($t).map(re)):"in"===n?ee(t[1],t.slice(2)):"!in"===n?re(ee(t[1],t.slice(2))):"has"===n?ne(t[1]):"!has"===n?re(ne(t[1])):"within"!==n||t}function te(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function ee(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Qt)]]:["filter-in-small",t,["literal",e]]}}function ne(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function re(t){return["!",t]}function ie(t){return Kt(N(t.value))?Xt(L({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==It(n))return[new co(r,n,"array expected, "+It(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new co(r,n,"filter array must have at least 1 element")];switch(a=a.concat(Yt({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),D(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===D(n[1])&&a.push(new co(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new co(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=It(n[1]))&&a.push(new co(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=It(n[s]),"$type"===D(n[1])?a=a.concat(Yt({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new co(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=It(n[1]),2!==n.length?a.push(new co(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new co(r+"[1]",n[1],"string expected, "+i+" found"));break;case"within":i=It(n[1]),2!==n.length?a.push(new co(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==i&&a.push(new co(r+"[1]",n[1],"object expected, "+i+" found"))}return a}(t)}function oe(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return he({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var c,l=t.valueSpec||s[a];if(!l)return[new co(n,o,'unknown property "'+a+'"')];if("string"===It(o)&&Mt(l)&&!l.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new co(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(c[1])+" }`.")];var f=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new co(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Rt(N(o))&&"identity"===D(o.type)&&f.push(new co(n,o,'"text-font" does not support identity functions'))),f.concat(he({key:t.key,value:o,valueSpec:l,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function ae(t){return oe(t,"paint")}function se(t){return oe(t,"layout")}function ue(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new co(r,n,'either "type" or "ref" is required'));var a,s=D(n.type),u=D(n.ref);if(n.id)for(var c=D(n.id),l=0;l<t.arrayIndex;l++){var f=i.layers[l];D(f.id)===c&&e.push(new co(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new co(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){D(t.id)===u&&(a=t)}),a?a.ref?e.push(new co(r,n.ref,"ref cannot reference another ref layer")):s=D(a.type):e.push(new co(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],p=h&&D(h.type);h?"vector"===p&&"raster"===s?e.push(new co(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===p&&"raster"!==s?e.push(new co(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==p||n["source-layer"]?"raster-dem"===p&&"hillshade"!==s?e.push(new co(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===p&&h.lineMetrics||e.push(new co(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new co(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new co(r,n.source,'source "'+n.source+'" not found'))}else e.push(new co(r,n,'missing required property "source"'));return e=e.concat(Ht({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return he({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:ie,layout:function(t){return Ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return se(L({layerType:s},t))}}})},paint:function(t){return Ht({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return ae(L({layerType:s},t))}}})}}}))}function ce(t){var e=t.value,n=t.key,r=It(e);return"string"!==r?[new co(n,e,"string expected, "+r+" found")]:[]}function le(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new co(n,e,'"type" is required')];var o,a=D(e.type);switch(a){case"vector":case"raster":case"raster-dem":return Ht({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:wa});case"geojson":if(o=Ht({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:wa}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],c=u[0],l="string"==typeof c?[c,["accumulated"],["get",s]]:c;o.push.apply(o,Xt({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,Xt({key:n+"."+s+".reduce",value:l,expressionContext:"cluster-reduce"}))}return o;case"video":return Ht({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return Ht({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new co(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yt({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function fe(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=It(e);if(void 0===e)return o;if("object"!==a)return o.concat([new co("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?he({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?he({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new co(s,e[s],'unknown property "'+s+'"')])}return o}function he(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Rt(D(e))?Zt(t):n.expression&&Ut(N(e))?Xt(t):n.type&&Ea[n.type]?Ea[n.type](t):Ht(L({},t,{valueSpec:n.type?r[n.type]:n}))}function pe(t){var e=t.value,n=t.key,r=ce(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new co(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new co(n,e,'"glyphs" url must include a "{range}" token'))),r}function de(t,e){void 0===e&&(e=uo);var n=[];return n=n.concat(he({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:pe,"*":function(){return[]}}})),t.constants&&(n=n.concat(R({key:"constants",value:t.constants,style:t,styleSpec:e}))),ve(n)}function ve(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function me(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return ve(t.apply(this,e))}}function ge(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new ao(new Error(i[r].message))),n=!0;return n}function ye(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var l=n/e*t;this.min=-l,this.max=t+l}function _e(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Pa[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}function be(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function xe(t){return Ma&&t instanceof Ma}function we(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(be(t)||xe(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof ka)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(we(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(Pa[s].omit.indexOf(c)>=0)){var l=t[c];u[c]=Pa[s].shallow.indexOf(c)>=0?l:we(l,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function Ee(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||be(t)||xe(t)||ArrayBuffer.isView(t)||t instanceof ka)return t;if(Array.isArray(t))return t.map(Ee);if("object"==typeof t){var e=t.$name||"Object",n=Pa[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=Pa[e].shallow.indexOf(a)>=0?s:Ee(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}function Se(t){for(var e=0,n=t;e<n.length;e+=1)if(Oe(n[e].charCodeAt(0)))return!0;return!1}function Oe(t){return!(746!==t&&747!==t&&(t<4352||!(Ra["Bopomofo Extended"](t)||Ra.Bopomofo(t)||Ra["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||Ra["CJK Compatibility Ideographs"](t)||Ra["CJK Compatibility"](t)||Ra["CJK Radicals Supplement"](t)||Ra["CJK Strokes"](t)||!(!Ra["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||Ra["CJK Unified Ideographs Extension A"](t)||Ra["CJK Unified Ideographs"](t)||Ra["Enclosed CJK Letters and Months"](t)||Ra["Hangul Compatibility Jamo"](t)||Ra["Hangul Jamo Extended-A"](t)||Ra["Hangul Jamo Extended-B"](t)||Ra["Hangul Jamo"](t)||Ra["Hangul Syllables"](t)||Ra.Hiragana(t)||Ra["Ideographic Description Characters"](t)||Ra.Kanbun(t)||Ra["Kangxi Radicals"](t)||Ra["Katakana Phonetic Extensions"](t)||Ra.Katakana(t)&&12540!==t||!(!Ra["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!Ra["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||Ra["Unified Canadian Aboriginal Syllabics"](t)||Ra["Unified Canadian Aboriginal Syllabics Extended"](t)||Ra["Vertical Forms"](t)||Ra["Yijing Hexagram Symbols"](t)||Ra["Yi Syllables"](t)||Ra["Yi Radicals"](t))))}function Te(t){return!(Oe(t)||function(t){return!!(Ra["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||Ra["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||Ra["Letterlike Symbols"](t)||Ra["Number Forms"](t)||Ra["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||Ra["Control Pictures"](t)&&9251!==t||Ra["Optical Character Recognition"](t)||Ra["Enclosed Alphanumerics"](t)||Ra["Geometric Shapes"](t)||Ra["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||Ra["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||Ra["CJK Symbols and Punctuation"](t)||Ra.Katakana(t)||Ra["Private Use Area"](t)||Ra["CJK Compatibility Forms"](t)||Ra["Small Form Variants"](t)||Ra["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Ae(t){return t>=1424&&t<=2303||Ra["Arabic Presentation Forms-A"](t)||Ra["Arabic Presentation Forms-B"](t)}function Ce(t,e){return!(!e&&Ae(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||Ra.Khmer(t))}function ke(t){for(var e=0,n=t;e<n.length;e+=1)if(Ae(n[e].charCodeAt(0)))return!0;return!1}function Me(){Fa.fire(new oo("pluginStateChange",{pluginStatus:Da,pluginURL:Na}))}function Pe(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map(function(t){var i=os[t.type].BYTES_PER_ELEMENT,o=n=je(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}}),size:je(n,Math.max(r,e)),alignment:e}}function je(t,e){return Math.ceil(t/e)*e}function Ie(t,e){return 256*(t=o(Math.floor(t),0,255))+o(Math.floor(e),0,255)}function Re(t){var e=+t;return!isNaN(e)&&e<=Xs?e:Ws(String(t))}function Le(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function De(t){return[Ie(255*t.r,255*t.g),Ie(255*t.b,255*t.a)]}function Ne(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function ze(t,e,n){var r={color:{source:hs,composite:ks},number:{source:Ss,composite:hs}},i=function(t){return{"line-pattern":{source:ps,composite:ps},"fill-pattern":{source:ps,composite:ps},"fill-extrusion-pattern":{source:ps,composite:ps}}[t]}(t);return i&&i[n]||r[e][n]}function Fe(t){for(var e=8192/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<i.length;a++){var s=i[a],u=Math.round(s.x*e),c=Math.round(s.y*e);s.x=o(u,hu,fu),s.y=o(c,hu,fu),(u<s.x||u>s.x+1||c<s.y||c>s.y+1)&&m("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Be(t,e){return{type:t.type,id:t.id,properties:t.properties,geometry:e?Fe(t):[]}}function Ue(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}function Ve(t,e){for(var n=0;n<t.length;n++)if(Je(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(Je(t,e[r]))return!0;return!!qe(t,e)}function Ge(t,e,n){return!!Je(t,e)||!!Xe(e,t,n)}function He(t,e){if(1===t.length)return Ke(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(Je(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(Ke(e,t[o]))return!0;for(var a=0;a<e.length;a++)if(qe(t,e[a]))return!0;return!1}function We(t,e,n){if(t.length>1){if(qe(t,e))return!0;for(var r=0;r<e.length;r++)if(Xe(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(Xe(t[i],e,n))return!0;return!1}function qe(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Ze(r,i,e[o],e[o+1]))return!0;return!1}function Ze(t,e,n,r){return g(t,n,r)!==g(e,n,r)&&g(t,e,n)!==g(t,e,r)}function Xe(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(Ye(t,e[i-1],e[i])<r)return!0;return!1}function Ye(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function Ke(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function Je(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Qe(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=g(t,e,n[0]);return o!==g(t,e,n[1])||o!==g(t,e,n[2])||o!==g(t,e,n[3])}function $e(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function tn(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function en(t,e,n,r,i){if(!e[0]&&!e[1])return t;var o=vi.convert(e)._mult(i);"viewport"===n&&o._rotate(-r);for(var a=[],s=0;s<t.length;s++)a.push(t[s].sub(o));return a}function nn(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rn(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],g=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*r+b*s+x*f+w*v,t[1]=_*i+b*u+x*h+w*m,t[2]=_*o+b*c+x*p+w*g,t[3]=_*a+b*l+x*d+w*y,t[4]=(_=n[4])*r+(b=n[5])*s+(x=n[6])*f+(w=n[7])*v,t[5]=_*i+b*u+x*h+w*m,t[6]=_*o+b*c+x*p+w*g,t[7]=_*a+b*l+x*d+w*y,t[8]=(_=n[8])*r+(b=n[9])*s+(x=n[10])*f+(w=n[11])*v,t[9]=_*i+b*u+x*h+w*m,t[10]=_*o+b*c+x*p+w*g,t[11]=_*a+b*l+x*d+w*y,t[12]=(_=n[12])*r+(b=n[13])*s+(x=n[14])*f+(w=n[15])*v,t[13]=_*i+b*u+x*h+w*m,t[14]=_*o+b*c+x*p+w*g,t[15]=_*a+b*l+x*d+w*y,t}function on(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function an(t,e){var n=on([],[t.x,t.y,0,1],e);return new vi(n[0]/n[3],n[1]/n[3])}function sn(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function un(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=sn({},{width:r,height:i},n);cn(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function cn(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var c=((n.y+u)*t.width+n.x)*o,l=((r.y+u)*e.width+r.x)*o,f=0;f<i.width*o;f++)s[l+f]=a[c+f];return e}function ln(t){var e={},n=t.resolution||256,r=t.clips?t.clips.length:1,i=t.image||new wu({width:n,height:r}),o=function(n,r,o){e[t.evaluationKey]=o;var a=t.expression.evaluate(e);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(t.clips)for(var a=0,s=0;a<r;++a,s+=4*n)for(var u=0,c=0;u<n;u++,c+=4){var l=u/(n-1),f=t.clips[a];o(s,c,f.start*(1-l)+f.end*l)}else for(var h=0,p=0;h<n;h++,p+=4)o(0,p,h/(n-1));return i}function fn(t,e,n){n=n||2;var r,i,o,a,s,u,c,l=e&&e.length,f=l?e[0]*n:t.length,h=hn(t,0,f,n,!0),p=[];if(!h||h.next===h.prev)return p;if(l&&(h=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=hn(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(En(a));for(s.sort(_n),i=0;i<s.length;i++)bn(s[i],n),n=pn(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<f;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return dn(h,p,n,r,i,c),p}function hn(t,e,n,r,i){var o,a;if(i===Dn(t,e,n,r)>0)for(o=e;o<n;o+=r)a=In(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=In(o,t[o],t[o+1],a);return a&&An(a,a.next)&&(Rn(a),a=a.next),a}function pn(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!An(r,r.next)&&0!==Tn(r.prev,r,r.next))r=r.next;else{if(Rn(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function dn(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=wn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?mn(t,r,i,o):vn(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Rn(t),t=u.next,c=u.next;else if((t=u)===c){a?1===a?dn(t=gn(pn(t),e,n),e,n,r,i,o,2):2===a&&yn(t,e,n,r,i,o):dn(pn(t),e,n,r,i,o,1);break}}}function vn(t){var e=t.prev,n=t,r=t.next;if(Tn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Sn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Tn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function mn(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Tn(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,c=wn(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),l=wn(s,u,e,n,r),f=t.prevZ,h=t.nextZ;f&&f.z>=c&&h&&h.z<=l;){if(f!==t.prev&&f!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Tn(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,h!==t.prev&&h!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Tn(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Tn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;h&&h.z<=l;){if(h!==t.prev&&h!==t.next&&Sn(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Tn(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function gn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!An(i,o)&&Cn(i,r,r.next,o)&&Pn(i,o)&&Pn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Rn(r),Rn(r.next),r=t=o),r=r.next}while(r!==t);return pn(r)}function yn(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&On(a,s)){var u=jn(a,s);return a=pn(a,a.next),u=pn(u,u.next),dn(a,e,n,r,i,o),void dn(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function _n(t,e){return t.x-e.x}function bn(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&Sn(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Pn(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&xn(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}(t,e)){var n=jn(e,t);pn(e,e.next),pn(n,n.next)}}function xn(t,e){return Tn(t.prev,t,e.prev)<0&&Tn(e.next,t,t.next)<0}function wn(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function En(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Sn(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function On(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Cn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Pn(t,e)&&Pn(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Tn(t.prev,t,e.prev)||Tn(t,e.prev,e))||An(t,e)&&Tn(t.prev,t,t.next)>0&&Tn(e.prev,e,e.next)>0)}function Tn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function An(t,e){return t.x===e.x&&t.y===e.y}function Cn(t,e,n,r){var i=Mn(Tn(t,e,n)),o=Mn(Tn(t,e,r)),a=Mn(Tn(n,r,t)),s=Mn(Tn(n,r,e));return i!==o&&a!==s||!(0!==i||!kn(t,n,e))||!(0!==o||!kn(t,r,e))||!(0!==a||!kn(n,t,r))||!(0!==s||!kn(n,e,r))}function kn(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Mn(t){return t>0?1:t<0?-1:0}function Pn(t,e){return Tn(t.prev,t,t.next)<0?Tn(t,e,t.next)>=0&&Tn(t,t.prev,e)>=0:Tn(t,e,t.prev)<0||Tn(t,t.next,e)<0}function jn(t,e){var n=new Ln(t.i,t.x,t.y),r=new Ln(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function In(t,e,n,r){var i=new Ln(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Rn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Ln(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Dn(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function Nn(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*c/a+l)),Math.min(i,Math.floor(n+(a-s)*c/a+l)),o)}var f=e[n],h=r,p=i;for(zn(e,r,n),o(e[i],f)>0&&zn(e,r,i);h<p;){for(zn(e,h,p),h++,p--;o(e[h],f)<0;)h++;for(;o(e[p],f)>0;)p--}0===o(e[r],f)?zn(e,r,p):zn(e,++p,i),p<=n&&(r=p+1),n<=p&&(i=p-1)}}(t,e,n||0,r||t.length-1,i||Fn)}function zn(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Fn(t,e){return t<e?-1:t>e?1:0}function Bn(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=y(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(Nn(o[u],e,1,o[u].length-1,Un),o[u]=o[u].slice(0,e));return o}function Un(t,e){return e.area-t.area}function Vn(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function Gn(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.paint.get(t+"-pattern").value;if("constant"!==c.kind){var l=c.evaluate({zoom:r-1},n,{},i.availableImages),f=c.evaluate({zoom:r},n,{},i.availableImages),h=c.evaluate({zoom:r+1},n,{},i.availableImages);f=f&&f.name?f.name:f,h=h&&h.name?h.name:h,o[l=l&&l.name?l.name:l]=!0,o[f]=!0,o[h]=!0,n.patterns[u.id]={min:l,mid:f,max:h}}}return n}function Hn(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(Wn,this,e)}function Wn(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function qn(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}function Zn(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(Xn,this,e),this.length=this._features.length}function Xn(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function Yn(t,e,n){if(3===t){var r=new Du(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}function Kn(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Fu)+a,i*Fu*2,o*Fu*2,Math.round(s))}function Jn(t,e){return t.x===e.x&&(t.x<0||t.x>8192)||t.y===e.y&&(t.y<0||t.y>8192)}function Qn(t,e){return t.x*e.x+t.y*e.y}function $n(t,e){if(1===t.length){for(var n,r=0,i=e[r++];!n||i.equals(n);)if(!(n=e[r++]))return 1/0;for(;r<e.length;r++){var o=e[r],a=t[0],s=n.sub(i),u=o.sub(i),c=a.sub(i),l=Qn(s,s),f=Qn(s,u),h=Qn(u,u),p=Qn(c,s),d=Qn(c,u),v=l*h-f*f,m=(h*p-f*d)/v,g=(l*d-f*p)/v,y=i.z*(1-m-g)+n.z*m+o.z*g;if(isFinite(y))return y}return 1/0}for(var _=1/0,b=0,x=e;b<x.length;b+=1)_=Math.min(_,x[b].z);return _}function tr(t,e){return e>0?e+2*t:t}function er(t,e,n){return t.sections.forEach(function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),Va.applyArabicShaping&&(t=Va.applyArabicShaping(t)),t}(t.text,e,n)}),t}function nr(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function rr(t){return t.type===nr.Bytes?t.readVarint()+t.pos:t.pos+1}function ir(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function or(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function ar(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function sr(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ur(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function cr(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function lr(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function fr(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function hr(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function pr(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function dr(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function vr(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function mr(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function gr(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function yr(t,e,n){1===t&&n.readMessage(_r,e)}function _r(t,e,n){if(3===t){var r=n.readMessage(br,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new xu({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function br(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function xr(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,c=0,l=t;c<l.length;c+=1)for(var f=l[c],h=a.length-1;h>=0;h--){var p=a[h];if(!(f.w>p.w||f.h>p.h)){if(f.x=p.x,f.y=p.y,u=Math.max(u,f.y+f.h),s=Math.max(s,f.x+f.w),f.w===p.w&&f.h===p.h){var d=a.pop();h<a.length&&(a[h]=d)}else f.h===p.h?(p.x+=f.w,p.w-=f.w):f.w===p.w?(p.y+=f.h,p.h-=f.h):(a.push({x:p.x+f.w,y:p.y,w:p.w-f.w,h:f.h}),p.y+=f.h,p.h-=f.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}function wr(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v){var m,g=dc.fromFeature(t,i);f===hc.vertical&&g.verticalizePunctuation();var y=Va.processBidirectionalText,_=Va.processStyledBidirectionalText;if(y&&1===g.sections.length){m=[];for(var b=0,x=y(g.toString(),Ar(g,c,o,e,r,p,d));b<x.length;b+=1){var w=x[b],E=new dc;E.text=w,E.sections=g.sections;for(var S=0;S<w.length;S++)E.sectionIndex.push(0);m.push(E)}}else if(_){m=[];for(var O=0,T=_(g.text,g.sectionIndex,Ar(g,c,o,e,r,p,d));O<T.length;O+=1){var A=T[O],C=new dc;C.text=A[0],C.sectionIndex=A[1],C.sections=g.sections,m.push(C)}}else m=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(g,Ar(g,c,o,e,r,p,d));var k=[],M={positionedLines:k,text:g.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:f,iconsInText:!1,verticalizable:!1};return function(t,e,n,r,i,o,a,s,u,c,l,f){for(var h=0,p=-17,d=0,v=0,m="right"===s?1:"left"===s?0:.5,g=0,y=0,_=i;y<_.length;y+=1){var b=_[y];b.trim();var x=b.getMaxScale(),w=24*(x-1),E={positionedGlyphs:[],lineOffset:0};t.positionedLines[g]=E;var S=E.positionedGlyphs,O=0;if(b.length()){for(var T=0;T<b.length();T++){var A=b.getSection(T),C=b.getSectionIndex(T),k=b.getCharCode(T),M=0,P=null,j=null,I=null,R=24,L=!(u===hc.horizontal||!l&&!Oe(k)||l&&(vc[k]||(H=k,Ra.Arabic(H)||Ra["Arabic Supplement"](H)||Ra["Arabic Extended-A"](H)||Ra["Arabic Presentation Forms-A"](H)||Ra["Arabic Presentation Forms-B"](H))));if(A.imageName){var D=r[A.imageName];if(!D)continue;I=A.imageName,t.iconsInText=t.iconsInText||!0,j=D.paddedRect;var N=D.displaySize;A.scale=24*A.scale/f,M=w+(24-N[1]*A.scale),R=(P={width:N[0],height:N[1],left:1,top:-3,advance:L?N[1]:N[0]}).advance;var z=L?N[0]*A.scale-24*x:N[1]*A.scale-24*x;z>0&&z>O&&(O=z)}else{var F=n[A.fontStack],B=F&&F[k];if(B&&B.rect)j=B.rect,P=B.metrics;else{var U=e[A.fontStack],V=U&&U[k];if(!V)continue;P=V.metrics}M=24*(x-A.scale)}L?(t.verticalizable=!0,S.push({glyph:k,imageName:I,x:h,y:p+M,vertical:L,scale:A.scale,fontStack:A.fontStack,sectionIndex:C,metrics:P,rect:j}),h+=R*A.scale+c):(S.push({glyph:k,imageName:I,x:h,y:p+M,vertical:L,scale:A.scale,fontStack:A.fontStack,sectionIndex:C,metrics:P,rect:j}),h+=P.advance*A.scale+c)}0!==S.length&&(d=Math.max(h-c,d),kr(S,0,S.length-1,m,O)),h=0;var G=o*x+O;E.lineOffset=Math.max(O,w),p+=G,v=Math.max(G,v),++g}else p+=o,++g}var H,W=p- -17,q=Cr(a),Z=q.horizontalAlign,X=q.verticalAlign;(function(t,e,n,r,i,o,a,s,u){var c,l=(e-n)*i;c=o!==a?-s*r- -17:(-r*u+.5)*a;for(var f=0,h=t;f<h.length;f+=1)for(var p=0,d=h[f].positionedGlyphs;p<d.length;p+=1){var v=d[p];v.x+=l,v.y+=c}})(t.positionedLines,m,Z,X,d,v,o,W,i.length),t.top+=-X*W,t.bottom=t.top+W,t.left+=-Z*d,t.right=t.left+d}(M,e,n,r,m,a,s,u,f,c,h,v),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(k)&&M}function Er(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*24/o+i:0}var s=n[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0}function Sr(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Or(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Tr(t,e,n,r,i,o){for(var a=null,s=Sr(e,n,i,o),u=0,c=r;u<c.length;u+=1){var l=c[u],f=Sr(e-l.x,n,i,o)+l.badness;f<=s&&(a=l,s=f)}return{index:t,x:e,priorBreak:a,badness:s}}function Ar(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],c=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=Er(t.getCharCode(s),u,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),l=t.text.indexOf("\u200b")>=0,f=0,h=0;h<t.length();h++){var p=t.getSection(h),d=t.getCharCode(h);if(vc[d]||(f+=Er(d,p,r,i,e,a)),h<t.length()-1){var v=!((s=d)<11904||!(Ra["Bopomofo Extended"](s)||Ra.Bopomofo(s)||Ra["CJK Compatibility Forms"](s)||Ra["CJK Compatibility Ideographs"](s)||Ra["CJK Compatibility"](s)||Ra["CJK Radicals Supplement"](s)||Ra["CJK Strokes"](s)||Ra["CJK Symbols and Punctuation"](s)||Ra["CJK Unified Ideographs Extension A"](s)||Ra["CJK Unified Ideographs"](s)||Ra["Enclosed CJK Letters and Months"](s)||Ra["Halfwidth and Fullwidth Forms"](s)||Ra.Hiragana(s)||Ra["Ideographic Description Characters"](s)||Ra["Kangxi Radicals"](s)||Ra["Katakana Phonetic Extensions"](s)||Ra.Katakana(s)||Ra["Vertical Forms"](s)||Ra["Yi Radicals"](s)||Ra["Yi Syllables"](s)));(mc[d]||v||p.imageName)&&u.push(Tr(h+1,f,c,u,Or(d,t.getCharCode(h+1),v&&l),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Tr(t.length(),f,c,u,0,!0))}function Cr(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function kr(t,e,n,r,i){if(r||i)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r,s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function Mr(t,e,n,r,i,o){var a,s=t.image;if(s.content){var u=s.content,c=s.pixelRatio||1;a=[u[0]/c,u[1]/c,s.displaySize[0]-u[2]/c,s.displaySize[1]-u[3]/c]}var l,f,h,p,d=e.left*o,v=e.right*o;"width"===n||"both"===n?(p=i[0]+d-r[3],f=i[0]+v+r[1]):f=(p=i[0]+(d+v-s.displaySize[0])/2)+s.displaySize[0];var m=e.top*o,g=e.bottom*o;return"height"===n||"both"===n?(l=i[1]+m-r[0],h=i[1]+g+r[2]):h=(l=i[1]+(m+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:l,right:f,bottom:h,left:p,collisionPadding:a}}function Pr(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Ga(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new Ga(s)),maxSize:n.evaluate(new Ga(u)),interpolationType:i}}function jr(t,e,n){var r=e.uSize,i=n.lowerSize;return"source"===t.kind?i/128:"composite"===t.kind?ht(i/128,n.upperSize/128,e.uSizeT):r}function Ir(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,a=i?o($o.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=ht(t.minSize,t.maxSize,a):n=a}return{uSizeT:n,uSize:r}}function Rr(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],c=0;s<n/2;){var l=t[a],f=t[a+1];if(!f)return!1;var h=t[a-1].angleTo(l)-l.angleTo(f);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:h}),c+=h;s-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;a++,s+=l.dist(f)}return!0}function Lr(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Dr(t,e,n){return t?.6*e*n:0}function Nr(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function zr(t,e,n,r,i,o){for(var a=Dr(n,i,o),s=Nr(n,r)*o,u=0,c=Lr(t)/2,l=0;l<t.length-1;l++){var f=t[l],h=t[l+1],p=f.dist(h);if(u+p>c){var d=(c-u)/p,v=ht(f.x,h.x,d),m=ht(f.y,h.y,d),g=new gc(v,m,h.angleTo(f),l);return g._round(),!a||Rr(t,g,s,a,e)?g:void 0}u+=p}}function Fr(t,e,n,r,i,o,a,s,u){var c=Dr(r,o,a),l=Nr(r,i),f=l*a,h=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-f<e/4&&(e=f+e/4),function t(e,n,r,i,o,a,s,u,c){for(var l=a/2,f=Lr(e),h=0,p=n-r,d=[],v=0;v<e.length-1;v++){for(var m=e[v],g=e[v+1],y=m.dist(g),_=g.angleTo(m);p+r<h+y;){var b=((p+=r)-h)/y,x=ht(m.x,g.x,b),w=ht(m.y,g.y,b);if(x>=0&&x<c&&w>=0&&w<c&&p-l>=0&&p+l<=f){var E=new gc(x,w,_,v);E._round(),i&&!Rr(e,E,a,i,o)||d.push(E)}}h+=y}return u||d.length||s||(d=t(e,h/2,r,i,o,a,s,!0,c)),d}(t,h?e/2*s%e:(l/2+2*o)*a*s%e,e,c,n,f,h,!1,u)}function Br(t,e,n,r,i){for(var o=[],a=0;a<t.length;a++)for(var s=t[a],u=void 0,c=0;c<s.length-1;c++){var l=s[c],f=s[c+1];l.x<e&&f.x<e||(l.x<e?l=new vi(e,l.y+(e-l.x)/(f.x-l.x)*(f.y-l.y))._round():f.x<e&&(f=new vi(e,l.y+(e-l.x)/(f.x-l.x)*(f.y-l.y))._round()),l.y<n&&f.y<n||(l.y<n?l=new vi(l.x+(n-l.y)/(f.y-l.y)*(f.x-l.x),n)._round():f.y<n&&(f=new vi(l.x+(n-l.y)/(f.y-l.y)*(f.x-l.x),n)._round()),l.x>=r&&f.x>=r||(l.x>=r?l=new vi(r,l.y+(r-l.x)/(f.x-l.x)*(f.y-l.y))._round():f.x>=r&&(f=new vi(r,l.y+(r-l.x)/(f.x-l.x)*(f.y-l.y))._round()),l.y>=i&&f.y>=i||(l.y>=i?l=new vi(l.x+(i-l.y)/(f.y-l.y)*(f.x-l.x),i)._round():f.y>=i&&(f=new vi(l.x+(i-l.y)/(f.y-l.y)*(f.x-l.x),i)._round()),u&&l.equals(u[u.length-1])||o.push(u=[l]),u.push(f)))))}return o}function Ur(t,e,n,r){var i=[],o=t.image,a=o.pixelRatio,s=o.paddedRect.w-2,u=o.paddedRect.h-2,c=t.right-t.left,l=t.bottom-t.top,f=o.stretchX||[[0,s]],h=o.stretchY||[[0,u]],p=function(t,e){return t+e[1]-e[0]},d=f.reduce(p,0),v=h.reduce(p,0),m=s-d,g=u-v,y=0,_=d,b=0,x=v,w=0,E=m,S=0,O=g;if(o.content&&r){var T=o.content;y=Vr(f,0,T[0]),b=Vr(h,0,T[1]),_=Vr(f,T[0],T[2]),x=Vr(h,T[1],T[3]),w=T[0]-y,S=T[1]-b,E=T[2]-T[0]-_,O=T[3]-T[1]-x}var A=function(r,i,s,u){var f=Hr(r.stretch-y,_,c,t.left),h=Wr(r.fixed-w,E,r.stretch,d),p=Hr(i.stretch-b,x,l,t.top),m=Wr(i.fixed-S,O,i.stretch,v),g=Hr(s.stretch-y,_,c,t.left),T=Wr(s.fixed-w,E,s.stretch,d),A=Hr(u.stretch-b,x,l,t.top),C=Wr(u.fixed-S,O,u.stretch,v),k=new vi(f,p),M=new vi(g,p),P=new vi(g,A),j=new vi(f,A),I=new vi(h/a,m/a),R=new vi(T/a,C/a),L=e*Math.PI/180;if(L){var D=Math.sin(L),N=Math.cos(L),z=[N,-D,D,N];k._matMult(z),M._matMult(z),j._matMult(z),P._matMult(z)}var F=r.stretch+r.fixed,B=i.stretch+i.fixed;return{tl:k,tr:M,bl:j,br:P,tex:{x:o.paddedRect.x+1+F,y:o.paddedRect.y+1+B,w:s.stretch+s.fixed-F,h:u.stretch+u.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:I,pixelOffsetBR:R,minFontScaleX:E/a/c,minFontScaleY:O/a/l,isSDF:n}};if(r&&(o.stretchX||o.stretchY))for(var C=Gr(f,m,d),k=Gr(h,g,v),M=0;M<C.length-1;M++)for(var P=C[M],j=C[M+1],I=0;I<k.length-1;I++)i.push(A(P,k[I],j,k[I+1]));else i.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i}function Vr(t,e,n){for(var r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];r+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return r}function Gr(t,e,n){for(var r=[{fixed:-1,stretch:0}],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],c=r[r.length-1];r.push({fixed:s-c.stretch,stretch:c.stretch}),r.push({fixed:s-c.stretch,stretch:c.stretch+(u-s)})}return r.push({fixed:e+1,stretch:n}),r}function Hr(t,e,n,r){return t/e*n+r}function Wr(t,e,n,r){return t-e*n/r}function qr(t,e){return t<e?-1:t>e?1:0}function Zr(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,i=1/0,o=-1/0,a=-1/0,s=t[0],u=0;u<s.length;u++){var c=s[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<i)&&(i=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>a)&&(a=c.y)}var l=Math.min(o-r,a-i),f=l/2,h=new bc([],Xr);if(0===l)return new vi(r,i);for(var p=r;p<o;p+=l)for(var d=i;d<a;d+=l)h.push(new Yr(p+f,d+f,f,t));for(var v=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],c=i[s],l=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*l,r+=(u.y+c.y)*l,e+=3*l}return new Yr(n/e,r/e,0,t)}(t),m=h.length;h.length;){var g=h.pop();(g.d>v.d||!v.d)&&(v=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,m)),g.max-v.d<=e||(h.push(new Yr(g.p.x-(f=g.h/2),g.p.y-f,f,t)),h.push(new Yr(g.p.x+f,g.p.y-f,f,t)),h.push(new Yr(g.p.x-f,g.p.y+f,f,t)),h.push(new Yr(g.p.x+f,g.p.y+f,f,t)),m+=4)}return n&&(console.log("num probes: "+m),console.log("best distance: "+v.d)),v.p}function Xr(t,e){return e.max-t.max}function Yr(t,e,n,r){this.p=new vi(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],l=o[u];c.y>t.y!=l.y>t.y&&t.x<(l.x-c.x)*(t.y-c.y)/(l.y-c.y)+c.x&&(n=!n),r=Math.min(r,Ye(t,c,l))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}function Kr(t,e){return e[1]!==xc?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function Jr(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Qr(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d){var v=function(t,e,n,r,i,o,a,s){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[],l=0,f=e.positionedLines;l<f.length;l+=1)for(var h=f[l],p=0,d=h.positionedGlyphs;p<d.length;p+=1){var v=d[p];if(v.rect){var m=v.rect||{},g=4,y=!0,_=1,b=0,x=(i||s)&&v.vertical,w=v.metrics.advance*v.scale/2;if(s&&e.verticalizable&&(b=h.lineOffset/2-(v.imageName?-(24-v.metrics.width*v.scale)/2:24*(v.scale-1))),v.imageName){var E=a[v.imageName];y=E.sdf,g=1/(_=E.pixelRatio)}var S=i?[v.x+w,v.y]:[0,0],O=i?[0,0]:[v.x+w+n[0],v.y+n[1]-b],T=[0,0];x&&(T=O,O=[0,0]);var A=(v.metrics.left-g)*v.scale-w+O[0],C=(-v.metrics.top-g)*v.scale+O[1],k=A+m.w*v.scale/_,M=C+m.h*v.scale/_,P=new vi(A,C),j=new vi(k,C),I=new vi(A,M),R=new vi(k,M);if(x){var L=new vi(-w,w- -17),D=-Math.PI/2,N=12-w,z=new vi(22-N,-(v.imageName?N:0)),F=new(Function.prototype.bind.apply(vi,[null].concat(T)));P._rotateAround(D,L)._add(z)._add(F),j._rotateAround(D,L)._add(z)._add(F),I._rotateAround(D,L)._add(z)._add(F),R._rotateAround(D,L)._add(z)._add(F)}if(u){var B=Math.sin(u),U=Math.cos(u),V=[U,-B,B,U];P._matMult(V),j._matMult(V),I._matMult(V),R._matMult(V)}var G=new vi(0,0),H=new vi(0,0);c.push({tl:P,tr:j,bl:I,br:R,tex:m,writingMode:e.writingMode,glyphOffset:S,sectionIndex:v.sectionIndex,isSDF:y,pixelOffsetTL:G,pixelOffsetBR:H,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,s,i,o,a,r,t.allowVerticalPlacement),g=t.textSizeData,y=null;"source"===g.kind?(y=[128*i.layout.get("text-size").evaluate(a,{})])[0]>32640&&m(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((y=[128*p.compositeTextSizes[0].evaluate(a,{},d),128*p.compositeTextSizes[1].evaluate(a,{},d)])[0]>32640||y[1]>32640)&&m(t.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),t.addSymbols(t.text,v,y,s,o,a,c,e,u.lineStartIndex,u.lineLength,h,d);for(var _=0,b=l;_<b.length;_+=1)f[b[_]]=t.text.placedSymbolArray.length-1;return 4*v.length}function $r(t){for(var e in t)return t[e];return null}function ti(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}function ei(t,e,n,r,i,o,a,s,u,c,l,f,h){var p=s?Math.min(32640,Math.round(s[0])):0,d=s?Math.min(32640,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(p<<1)+(u?1:0),d,16*c,16*l,256*f,256*h)}function ni(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function ri(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(ke(n[e].text))return!0;return!1}function ii(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}function oi(t){return Zc*Math.cos(t*Math.PI/180)}function ai(t){return(180+t)/360}function si(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function ui(t,e){return t/oi(e)}function ci(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}function li(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}function fi(t,e,n,r,i){return p(t,function(t,o){var a=e instanceof Ja?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a})}function hi(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function pi(t,e){return e-t}var di=n;n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var vi=r;r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t};var mi,gi,yi,_i,bi="undefined"!=typeof self?self:{},xi=Math.pow(2,53)-1,wi=i(.25,.1,.25,1),Ei=1,Si={},Oi=null,Ti=bi.performance&&bi.performance.now?bi.performance.now.bind(bi.performance):Date.now.bind(Date),Ai=bi.requestAnimationFrame||bi.mozRequestAnimationFrame||bi.webkitRequestAnimationFrame||bi.msRequestAnimationFrame,Ci=bi.cancelAnimationFrame||bi.mozCancelAnimationFrame||bi.webkitCancelAnimationFrame||bi.msCancelAnimationFrame,ki={now:Ti,frame:function(t){var e=Ai(t);return{cancel:function(){return Ci(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=bi.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return mi||(mi=bi.document.createElement("a")),mi.href=t,mi.href},hardwareConcurrency:bi.navigator&&bi.navigator.hardwareConcurrency||4,get devicePixelRatio(){return bi.devicePixelRatio},get prefersReducedMotion(){return!!bi.matchMedia&&(null==gi&&(gi=bi.matchMedia("(prefers-reduced-motion: reduce)")),gi.matches)}},Mi={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Pi={supported:!1,testSupport:function(t){!ji&&_i&&(Ii?E(t):yi=t)}},ji=!1,Ii=!1;bi.document&&((_i=bi.document.createElement("img")).onload=function(){yi&&E(yi),yi=null,Ii=!0},_i.onerror=function(){ji=!0,yi=null},_i.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ri=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};Ri.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1","01",t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},Ri.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ri.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},Ri.prototype.normalizeStyleURL=function(t,e){if(!S(t))return t;var n=T(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},Ri.prototype.normalizeGlyphsURL=function(t,e){if(!S(t))return t;var n=T(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},Ri.prototype.normalizeSourceURL=function(t,e){if(!S(t))return t;var n=T(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},Ri.prototype.normalizeSpriteURL=function(t,e,n,r){var i=T(t);return S(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+e+n,A(i))},Ri.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!S(t))return t;var n=T(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(ki.devicePixelRatio>=2||512===e?"@2x":"")+(Pi.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||Mi.ACCESS_TOKEN;return Mi.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},Ri.prototype.canonicalizeTileURL=function(t,e){var n=T(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return e&&(i=i.filter(function(t){return!t.match(/^access_token=/)})),i.length&&(r+="?"+i.join("&")),r},Ri.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&S(e),r=[],i=0,o=t.tiles||[];i<o.length;i+=1){var a=o[i];O(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},Ri.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=T(Mi.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"http"===t.protocol){var i=t.params.indexOf("secure");i>=0&&t.params.splice(i,1)}if("/"!==r.path&&(t.path=""+r.path+t.path),!Mi.REQUIRE_ACCESS_TOKEN)return A(t);if(!(e=e||Mi.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter(function(t){return-1===t.indexOf("access_token")}),t.params.push("access_token="+e),A(t)};var Li=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i,Di=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/,Ni=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ni.prototype.getStorageKey=function(t){var e,n=C(Mi.ACCESS_TOKEN);return e=n&&n.u?bi.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))})):Mi.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},Ni.prototype.fetchEventData=function(){var t=w("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=bi.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=bi.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){m("Unable to read from LocalStorage")}},Ni.prototype.saveEventData=function(){var t=w("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{bi.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&bi.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){m("Unable to write to LocalStorage")}},Ni.prototype.processRequests=function(t){},Ni.prototype.postEvent=function(t,e,n,r){var i=this;if(Mi.EVENTS_URL){var o=T(Mi.EVENTS_URL);o.params.push("access_token="+(r||Mi.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:"01",userId:this.anonId},u=e?s(a,e):a,c={url:A(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([u])};this.pendingRequest=no(c,function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)})}},Ni.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var zi,Fi,Bi,Ui=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,r){this.skuToken=n;var i=!(!r&&!Mi.ACCESS_TOKEN),o=Array.isArray(t)&&t.some(function(t){return S(t)||O(t)});Mi.EVENTS_URL&&i&&o&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),l(this.anonId)||(this.anonId=c()),this.postEvent(i,{skuToken:this.skuToken},function(t){t||r&&(e.success[r]=!0)},t))}},e}(Ni),Vi=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){Mi.EVENTS_URL&&Mi.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return S(t)||O(t)})&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=C(Mi.ACCESS_TOKEN),r=n?n.u:Mi.ACCESS_TOKEN,i=r!==this.eventData.tokenU;l(this.anonId)||(this.anonId=c(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)},t)}},e}(Ni)),Gi=Vi.postTurnstileEvent.bind(Vi),Hi=new Ui,Wi=Hi.postMapLoadEvent.bind(Hi),qi=500,Zi=50,Xi=1/0,Yi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Yi);var Ki,Ji,Qi=function(t){function e(e,n,r){401===n&&O(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),$i=_()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===bi.location.protocol?bi.parent:bi).location.href},to=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test($i())&&!/^\w+:/.test(n))){if(bi.fetch&&bi.Request&&bi.AbortController&&bi.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new bi.AbortController,i=new bi.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:$i(),signal:r.signal}),o=!1,a=!1,s=(n=i.url).indexOf("sku=")>0&&O(n);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&m(n),r&&o)return c(r);var u=Date.now();bi.fetch(i).then(function(n){if(n.ok){var r=s?n.clone():null;return c(n,r,u)}return e(new Qi(n.statusText,n.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))})}},c=function(n,r,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then(function(t){a||(r&&s&&function(t,e,n){if(k(),zi){var r={status:e.status,statusText:e.statusText,headers:new bi.Headers};e.headers.forEach(function(t,e){return r.headers.set(e,t)});var i=b(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===Fi)try{new Response(new ReadableStream),Fi=!0}catch(t){Fi=!1}Fi?e(t.body):t.blob().then(e)}(e,function(e){var n=new bi.Response(e,r);k(),zi&&zi.then(function(e){return e.put(M(t.url),n)}).catch(function(t){return m(t.message)})}))}}(i,r,s),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))}).catch(function(t){a||e(new Error(t.message))})};return s?function(t,e){if(k(),!zi)return e(null);var n=M(t.url);zi.then(function(t){t.match(n).then(function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=b(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)}).catch(e)}).catch(e)}(i,u):u(null,null),{cancel:function(){a=!0,o||r.abort()}}}(t,e);if(_()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new bi.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new Qi(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},eo=function(t,e){return to(s(t,{type:"arrayBuffer"}),e)},no=function(t,e){return to(s(t,{method:"POST"}),e)},ro="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ki=[],Ji=0;var io=function(t,e){if(Pi.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ji>=Mi.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ki.push(n),n}Ji++;var r=!1,i=function(){if(!r)for(r=!0,Ji--;Ki.length&&Ji<Mi.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Ki.shift();t.cancelled||(t.cancel=io(t.requestParameters,t.callback).cancel)}},o=eo(t,function(t,n,r,o){i(),t?e(t):n&&(P()?function(t,e){var n=new bi.Blob([new Uint8Array(t)],{type:"image/png"});bi.createImageBitmap(n).then(function(t){e(null,t)}).catch(function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(n,e):function(t,e,n,r){var i=new bi.Image,o=bi.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src),i.onload=null,bi.requestAnimationFrame(function(){i.src=ro})},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new bi.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(a):ro}(n,e,r,o))});return{cancel:function(){o.cancel(),i()}}},oo=function(t,e){void 0===e&&(e={}),s(this,e),this.type=t},ao=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",s({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(oo),so=function(){};so.prototype.on=function(t,e){return this._listeners=this._listeners||{},j(t,e,this._listeners),this},so.prototype.off=function(t,e){return I(t,e,this._listeners),I(t,e,this._oneTimeListeners),this},so.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},j(t,e,this._oneTimeListeners),this},so.prototype.fire=function(t,e){"string"==typeof t&&(t=new oo(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var u=a[o];I(n,u,this._oneTimeListeners),u.call(this,t)}var c=this._eventedParent;c&&(s(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(t))}else t instanceof ao&&console.error(t.error);return this},so.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},so.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var uo={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},co=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)},lo=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),fo=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};fo.prototype.concat=function(t){return new fo(this,t)},fo.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},fo.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var ho={kind:"null"},po={kind:"number"},vo={kind:"string"},mo={kind:"boolean"},go={kind:"color"},yo={kind:"object"},_o={kind:"value"},bo={kind:"collator"},xo={kind:"formatted"},wo={kind:"resolvedImage"},Eo=[ho,po,vo,mo,go,xo,yo,z(_o),wo],So=e(function(t,e){function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return n("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function i(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function o(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in a)return a[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),c=s.indexOf(")");if(-1!==u&&c+1===s.length){var l=s.substr(0,u),f=s.substr(u+1,c-(u+1)).split(","),h=1;switch(l){case"rgba":if(4!==f.length)return null;h=i(f.pop());case"rgb":return 3!==f.length?null:[r(f[0]),r(f[1]),r(f[2]),h];case"hsla":if(4!==f.length)return null;h=i(f.pop());case"hsl":if(3!==f.length)return null;var p=(parseFloat(f[0])%360+360)%360/360,d=i(f[1]),v=i(f[2]),m=v<=.5?v*(d+1):v+d-v*d,g=2*v-m;return[n(255*o(g,m,p+1/3)),n(255*o(g,m,p)),n(255*o(g,m,p-1/3)),h];default:return null}}return null}}catch(t){}}).parseCSSColor,Oo=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Oo.parse=function(t){if(t){if(t instanceof Oo)return t;if("string"==typeof t){var e=So(t);if(e)return new Oo(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Oo.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},Oo.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Oo.black=new Oo(0,0,0,1),Oo.white=new Oo(1,1,1,1),Oo.transparent=new Oo(0,0,0,0),Oo.red=new Oo(1,0,0,1);var To=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};To.prototype.compare=function(t,e){return this.collator.compare(t,e)},To.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ao=function(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i},Co=function(t){this.sections=t};Co.fromString=function(t){return new Co([new Ao(t,null,null,null,null)])},Co.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},Co.factory=function(t){return t instanceof Co?t:Co.fromString(t)},Co.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},Co.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}return t};var ko=function(t){this.name=t.name,this.available=t.available};ko.prototype.toString=function(){return this.name},ko.fromString=function(t){return t?new ko({name:t,available:!1}):null},ko.prototype.serialize=function(){return["image",this.name]};var Mo=function(t,e){this.type=t,this.value=e};Mo.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!H(t[1]))return e.error("invalid value");var n=t[1],r=W(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Mo(r,n)},Mo.prototype.evaluate=function(){return this.value},Mo.prototype.eachChild=function(){},Mo.prototype.outputDefined=function(){return!0},Mo.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Oo?["rgba"].concat(this.value.toArray()):this.value instanceof Co?this.value.serialize():this.value};var Po=function(t){this.name="ExpressionEvaluationError",this.message=t};Po.prototype.toJSON=function(){return this.message};var jo={string:vo,number:po,boolean:mo,object:yo},Io=function(t,e){this.type=t,this.args=e};Io.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in jo)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=jo[s],r++}else o=_o;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=z(o,a)}else n=jo[i];for(var u=[];r<t.length;r++){var c=e.parse(t[r],r,_o);if(!c)return null;u.push(c)}return new Io(n,u)},Io.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!B(this.type,W(n)))return n;if(e===this.args.length-1)throw new Po("Expected value to be of type "+F(this.type)+", but found "+F(W(n))+" instead.")}return null},Io.prototype.eachChild=function(t){this.args.forEach(t)},Io.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Io.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var Ro=function(t){this.type=xo,this.sections=t};Ro.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,po)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,z(vo))))return null;var c=null;if(a["text-color"]&&!(c=e.parse(a["text-color"],1,go)))return null;var l=r[r.length-1];l.scale=s,l.font=u,l.textColor=c}else{var f=e.parse(t[o],1,_o);if(!f)return null;var h=f.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:f,scale:null,font:null,textColor:null})}}return new Ro(r)},Ro.prototype.evaluate=function(t){return new Co(this.sections.map(function(e){var n=e.content.evaluate(t);return W(n)===wo?new Ao("",n,null,null,null):new Ao(q(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},Ro.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},Ro.prototype.outputDefined=function(){return!1},Ro.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};var Lo=function(t){this.type=wo,this.input=t};Lo.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,vo);return n?new Lo(n):e.error("No image name provided.")},Lo.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=ko.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},Lo.prototype.eachChild=function(t){t(this.input)},Lo.prototype.outputDefined=function(){return!1},Lo.prototype.serialize=function(){return["image",this.input.serialize()]};var Do={"to-boolean":mo,"to-color":go,"to-number":po,"to-string":vo},No=function(t,e){this.type=t,this.args=e};No.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=Do[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,_o);if(!a)return null;i.push(a)}return new No(r,i)},No.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof Oo)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":G(e[0],e[1],e[2],e[3])))return new Oo(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new Po(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var c=Number(a);if(!isNaN(c))return c}throw new Po("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Co.fromString(q(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ko.fromString(q(this.args[0].evaluate(t))):q(this.args[0].evaluate(t))},No.prototype.eachChild=function(t){this.args.forEach(t)},No.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},No.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ro([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Lo(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var zo=["Unknown","Point","LineString","Polygon"],Fo=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Fo.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Fo.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?zo[this.feature.type]:this.feature.type:null},Fo.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Fo.prototype.canonicalID=function(){return this.canonical},Fo.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Fo.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Oo.parse(t)),e};var Bo=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};Bo.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Bo.prototype.eachChild=function(t){this.args.forEach(t)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Bo.parse=function(t,e){var n,r=t[0],i=Bo.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1}),u=null,c=0,l=s;c<l.length;c+=1){var f=l[c],h=f[0],p=f[1];u=new Ho(e.registry,e.path,null,e.scope);for(var d=[],v=!1,m=1;m<t.length;m++){var g=t[m],y=Array.isArray(h)?h[m-1]:h.type,_=u.parse(g,1+d.length,y);if(!_){v=!0;break}d.push(_)}if(!v)if(Array.isArray(h)&&h.length!==d.length)u.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var x=Array.isArray(h)?h[b]:h.type,w=d[b];u.concat(b+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new Bo(r,o,p,d)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var E=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(F).join(", ")+")":"("+F(e.type)+"...)"}).join(" | "),S=[],O=1;O<t.length;O++){var T=e.parse(t[O],1+S.length);if(!T)return null;S.push(F(T.type))}e.error("Expected arguments of type "+E+", but found ("+S.join(", ")+") instead.")}return null},Bo.register=function(t,e){for(var n in Bo.definitions=e,e)t[n]=Bo};var Uo=function(t,e,n){this.type=bo,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};Uo.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,mo);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,mo);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,vo))?null:new Uo(r,i,o)},Uo.prototype.evaluate=function(t){return new To(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Uo.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Uo.prototype.outputDefined=function(){return!1},Uo.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Vo=function(t,e){this.type=mo,this.geojson=t,this.geometries=e};Vo.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(H(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Vo(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new Vo(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new Vo(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vo.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=rt(e.coordinates,r,i),a=at(t.geometry(),n,r,i);if(!X(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!J(u[s],o))return!1}if("MultiPolygon"===e.type){var c=it(e.coordinates,r,i),l=at(t.geometry(),n,r,i);if(!X(n,r))return!1;for(var f=0,h=l;f<h.length;f+=1)if(!Q(h[f],c))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=rt(e.coordinates,r,i),a=st(t.geometry(),n,r,i);if(!X(n,r))return!1;for(var s=0,u=a;s<u.length;s+=1)if(!et(u[s],o))return!1}if("MultiPolygon"===e.type){var c=it(e.coordinates,r,i),l=st(t.geometry(),n,r,i);if(!X(n,r))return!1;for(var f=0,h=l;f<h.length;f+=1)if(!nt(h[f],c))return!1}return!0}(t,this.geometries)}return!1},Vo.prototype.eachChild=function(){},Vo.prototype.outputDefined=function(){return!0},Vo.prototype.serialize=function(){return["within",this.geojson]};var Go=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Go.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new Go(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},Go.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Go.prototype.eachChild=function(){},Go.prototype.outputDefined=function(){return!1},Go.prototype.serialize=function(){return["var",this.name]};var Ho=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new fo),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};Ho.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Ho.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new Io(e,[t]):"coerce"===n?new No(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof Mo)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof Go)return t(e.boundExpression);if(e instanceof Bo&&"error"===e.name)return!1;if(e instanceof Uo)return!1;if(e instanceof Vo)return!1;var n=e instanceof No||e instanceof Io,r=!0;return e.eachChild(function(e){r=n?r&&t(e):r&&e instanceof Mo}),!!r&&ut(e)&&lt(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new Fo;try{o=new Mo(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ho.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Ho(this.registry,r,e||null,i,this.errors)},Ho.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new lo(r,t))},Ho.prototype.checkSubtype=function(t,e){var n=B(t,e);return n&&this.error(n),n};var Wo=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};Wo.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,po);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,c=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var l=e.parse(s,c,i);if(!l)return null;i=i||l.type,r.push([a,l])}return new Wo(i,n,r)},Wo.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[ft(e,r)].evaluate(t)},Wo.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Wo.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Wo.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var qo=Object.freeze({__proto__:null,number:ht,color:function(t,e,n){return new Oo(ht(t.r,e.r,n),ht(t.g,e.g,n),ht(t.b,e.b,n),ht(t.a,e.a,n))},array:function(t,e,n){return t.map(function(t,r){return ht(t,e[r],n)})}}),Zo=6/29*3*(6/29),Xo=Math.PI/180,Yo=180/Math.PI,Ko={forward:gt,reverse:yt,interpolate:function(t,e,n){return{l:ht(t.l,e.l,n),a:ht(t.a,e.a,n),b:ht(t.b,e.b,n),alpha:ht(t.alpha,e.alpha,n)}}},Jo={forward:function(t){var e=gt(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*Yo;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*Xo,n=t.c;return yt({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:_t(t.h,e.h,n),c:ht(t.c,e.c,n),l:ht(t.l,e.l,n),alpha:ht(t.alpha,e.alpha,n)}}},Qo=Object.freeze({__proto__:null,lab:Ko,hcl:Jo}),$o=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};$o.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=bt(e,t.base,n,r);else if("linear"===t.name)i=bt(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new di(o[0],o[1],o[2],o[3]).solve(bt(e,1,n,r))}return i},$o.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,po)))return null;var u=[],c=null;"interpolate-hcl"===n||"interpolate-lab"===n?c=go:e.expectedType&&"value"!==e.expectedType.kind&&(c=e.expectedType);for(var l=0;l<o.length;l+=2){var f=o[l],h=o[l+1],p=l+3,d=l+4;if("number"!=typeof f)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(u.length&&u[u.length-1][0]>=f)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var v=e.parse(h,d,c);if(!v)return null;c=c||v.type,u.push([f,v])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new $o(c,n,r,i,u):e.error("Type "+F(c)+" is not interpolatable.")},$o.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=ft(e,r),a=$o.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?qo[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?Jo.reverse(Jo.interpolate(Jo.forward(s),Jo.forward(u),a)):Ko.reverse(Ko.interpolate(Ko.forward(s),Ko.forward(u),a))},$o.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},$o.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},$o.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var ta=function(t,e){this.type=t,this.args=e};ta.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some(function(t){return B(r,t.type)});return new ta(u?_o:n,i)},ta.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(t))&&n instanceof ko&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null===n);i+=1);return n},ta.prototype.eachChild=function(t){this.args.forEach(t)},ta.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},ta.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ea=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};ea.prototype.evaluate=function(t){return this.result.evaluate(t)},ea.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},ea.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new ea(n,a):null},ea.prototype.outputDefined=function(){return this.result.outputDefined()},ea.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var na=function(t,e,n){this.type=t,this.index=e,this.input=n};na.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,po),r=e.parse(t[2],2,z(e.expectedType||_o));return n&&r?new na(r.type.itemType,n,r):null},na.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new Po("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new Po("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new Po("Array index must be an integer, but found "+e+" instead.");return n[e]},na.prototype.eachChild=function(t){t(this.index),t(this.input)},na.prototype.outputDefined=function(){return!1},na.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ra=function(t,e){this.type=mo,this.needle=t,this.haystack=e};ra.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,_o),r=e.parse(t[2],2,_o);return n&&r?U(n.type,[mo,vo,po,ho,_o])?new ra(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+F(n.type)+" instead"):null},ra.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!V(e,["boolean","string","number","null"]))throw new Po("Expected first argument to be of type boolean, string, number or null, but found "+F(W(e))+" instead.");if(!V(n,["string","array"]))throw new Po("Expected second argument to be of type array or string, but found "+F(W(n))+" instead.");return n.indexOf(e)>=0},ra.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},ra.prototype.outputDefined=function(){return!0},ra.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ia=function(t,e,n){this.type=po,this.needle=t,this.haystack=e,this.fromIndex=n};ia.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,_o),r=e.parse(t[2],2,_o);if(!n||!r)return null;if(!U(n.type,[mo,vo,po,ho,_o]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+F(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,po);return i?new ia(n,r,i):null}return new ia(n,r)},ia.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!V(e,["boolean","string","number","null"]))throw new Po("Expected first argument to be of type boolean, string, number or null, but found "+F(W(e))+" instead.");if(!V(n,["string","array"]))throw new Po("Expected second argument to be of type array or string, but found "+F(W(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)},ia.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var oa=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};oa.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var c=e.concat(a);if(0===s.length)return c.error("Expected at least one branch label.");for(var l=0,f=s;l<f.length;l+=1){var h=f[l];if("number"!=typeof h&&"string"!=typeof h)return c.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,W(h)))return null}else n=W(h);if(void 0!==i[String(h)])return c.error("Branch labels must be unique.");i[String(h)]=o.length}var p=e.parse(u,a,r);if(!p)return null;r=r||p.type,o.push(p)}var d=e.parse(t[1],1,_o);if(!d)return null;var v=e.parse(t[t.length-1],t.length-1,r);return v?"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new oa(n,r,d,i,o,v):null},oa.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(W(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},oa.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},oa.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},oa.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(f=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[f][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,c=n;u<c.length;u+=1){var l=c[u],f=l[0],h=l[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var aa=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};aa.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,mo);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new aa(n,r,s):null},aa.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},aa.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},aa.prototype.outputDefined=function(){return this.branches.every(function(t){return t[1].outputDefined()})&&this.otherwise.outputDefined()},aa.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var sa=function(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r};sa.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,_o),r=e.parse(t[2],2,po);if(!n||!r)return null;if(!U(n.type,[z(_o),vo,_o]))return e.error("Expected first argument to be of type array or string, but found "+F(n.type)+" instead");if(4===t.length){var i=e.parse(t[3],3,po);return i?new sa(n.type,n,r,i):null}return new sa(n.type,n,r)},sa.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!V(e,["string","array"]))throw new Po("Expected first argument to be of type array or string, but found "+F(W(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)},sa.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},sa.prototype.outputDefined=function(){return!1},sa.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ua=Et("==",function(t,e,n){return e===n},wt),ca=Et("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!wt(0,e,n,r)}),la=Et("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),fa=Et(">",function(t,e,n){return e>n},function(t,e,n,r){return r.compare(e,n)>0}),ha=Et("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),pa=Et(">=",function(t,e,n){return e>=n},function(t,e,n,r){return r.compare(e,n)>=0}),da=function(t,e,n,r,i){this.type=vo,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};da.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,po);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,vo)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,vo)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,po)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,po))?null:new da(n,i,o,a,s)},da.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},da.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},da.prototype.outputDefined=function(){return!1},da.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var va=function(t){this.type=po,this.input=t};va.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+F(n.type)+" instead."):new va(n):null},va.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new Po("Expected value to be of type string or array, but found "+F(W(e))+" instead.")},va.prototype.eachChild=function(t){t(this.input)},va.prototype.outputDefined=function(){return!1},va.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var ma={"==":ua,"!=":ca,">":fa,"<":la,">=":pa,"<=":ha,array:Io,at:na,boolean:Io,case:aa,coalesce:ta,collator:Uo,format:Ro,image:Lo,in:ra,"index-of":ia,interpolate:$o,"interpolate-hcl":$o,"interpolate-lab":$o,length:va,let:ea,literal:Mo,match:oa,number:Io,"number-format":da,object:Io,slice:sa,step:Wo,string:Io,"to-boolean":No,"to-color":No,"to-number":No,"to-string":No,var:Go,within:Vo};Bo.register(ma,{error:[{kind:"error"},[vo],function(t,e){throw new Po(e[0].evaluate(t))}],typeof:[vo,[_o],function(t,e){return F(W(e[0].evaluate(t)))}],"to-rgba":[z(po,4),[go],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[go,[po,po,po],St],rgba:[go,[po,po,po,po],St],has:{type:mo,overloads:[[[vo],function(t,e){return Ot(e[0].evaluate(t),t.properties())}],[[vo,yo],function(t,e){var n=e[1];return Ot(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:_o,overloads:[[[vo],function(t,e){return Tt(e[0].evaluate(t),t.properties())}],[[vo,yo],function(t,e){var n=e[1];return Tt(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[_o,[vo],function(t,e){return Tt(e[0].evaluate(t),t.featureState||{})}],properties:[yo,[],function(t){return t.properties()}],"geometry-type":[vo,[],function(t){return t.geometryType()}],id:[_o,[],function(t){return t.id()}],zoom:[po,[],function(t){return t.globals.zoom}],"heatmap-density":[po,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[po,[],function(t){return t.globals.lineProgress||0}],accumulated:[_o,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[po,At(po),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[po,At(po),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:po,overloads:[[[po,po],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[po],function(t,e){return-e[0].evaluate(t)}]]},"/":[po,[po,po],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[po,[po,po],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[po,[],function(){return Math.LN2}],pi:[po,[],function(){return Math.PI}],e:[po,[],function(){return Math.E}],"^":[po,[po,po],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[po,[po],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[po,[po],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[po,[po],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[po,[po],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[po,[po],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[po,[po],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[po,[po],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[po,[po],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[po,[po],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[po,[po],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[po,At(po),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[po,At(po),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[po,[po],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[po,[po],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[po,[po],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[po,[po],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[mo,[vo,_o],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[mo,[_o],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[mo,[vo],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[mo,[vo,_o],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[mo,[_o],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[mo,[vo,_o],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[mo,[_o],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[mo,[vo,_o],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[mo,[_o],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[mo,[vo,_o],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[mo,[_o],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[mo,[_o],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[mo,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[mo,[z(vo)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[mo,[z(_o)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[mo,[vo,z(_o)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[mo,[vo,z(_o)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:mo,overloads:[[[mo,mo],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[At(mo),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:mo,overloads:[[[mo,mo],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[At(mo),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[mo,[mo],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[mo,[vo],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[vo,[vo],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[vo,[vo],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[vo,At(_o),function(t,e){return e.map(function(e){return q(e.evaluate(t))}).join("")}],"resolved-locale":[vo,[bo],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var ga=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Fo,this._defaultValue=e?function(t){return"color"===t.type&&Rt(t.default)?new Oo(0,0,0,0):"color"===t.type?Oo.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};ga.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},ga.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new Po("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var ya=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ct(e.expression)};ya.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},ya.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var _a=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ct(e.expression),this.interpolationType=r};_a.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},_a.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},_a.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?$o.interpolationFactor(this.interpolationType,t,e,n):0};var ba=function(t,e){this._parameters=t,this._specification=e,L(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),c=e.type||(jt(n)?"exponential":"interval");if(a&&((e=L({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],Oo.parse(t[1])]})),e.default=Oo.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Qo[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)r=Ft;else if("interval"===c)r=zt;else if("categorical"===c){r=Nt,i=Object.create(null);for(var l=0,f=e.stops;l<f.length;l+=1){var h=f[l];i[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=Bt}if(s){for(var p={},d=[],v=0;v<e.stops.length;v++){var m=e.stops[v],g=m[0].zoom;void 0===p[g]&&(p[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},d.push(g)),p[g].stops.push([m[0].value,m[1]])}for(var y=[],_=0,b=d;_<b.length;_+=1){var x=b[_];y.push([p[x].zoom,t(p[x],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:$o.interpolationFactor.bind(void 0,w),zoomStops:y.map(function(t){return t[0]}),evaluate:function(t,r){var i=t.zoom;return Ft({stops:y,base:e.base},n,i).evaluate(i,r)}}}if(u){var E="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:$o.interpolationFactor.bind(void 0,E),zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){return r(e,n,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Dt(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};ba.deserialize=function(t){return new ba(t._parameters,t._specification)},ba.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var xa={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},wa={promoteId:function(t){var e=t.key,n=t.value;if("string"===It(n))return ce({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,ce({key:e+"."+i,value:n[i]}));return r}},Ea={"*":function(){return[]},array:Wt,boolean:function(t){var e=t.value,n=t.key,r=It(e);return"boolean"!==r?[new co(n,e,"boolean expected, "+r+" found")]:[]},number:qt,color:function(t){var e=t.key,n=t.value,r=It(n);return"string"!==r?[new co(e,n,"color expected, "+r+" found")]:null===So(n)?[new co(e,n,'color expected, "'+n+'" found')]:[]},constants:R,enum:Yt,filter:ie,function:Zt,layer:ue,object:Ht,source:le,light:fe,string:ce,formatted:function(t){return 0===ce(t).length?[]:Xt(t)},resolvedImage:function(t){return 0===ce(t).length?[]:Xt(t)}};de.source=me(le),de.light=me(fe),de.layer=me(ue),de.filter=me(ie),de.paintProperty=me(ae),de.layoutProperty=me(se);var Sa=de,Oa=Sa.light,Ta=Sa.paintProperty,Aa=Sa.layoutProperty,Ca=ye;ye.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},ye.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ye.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},ye.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},ye.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,f=0;f<u.length;f++){var h=u[f];if(void 0===a[h]){var p=4*h;(s?s(l[p+0],l[p+1],l[p+2],l[p+3]):t<=l[p+2]&&e<=l[p+3]&&n>=l[p+0]&&r>=l[p+1])?(a[h]=!0,o.push(c[h])):a[h]=!1}}},ye.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),c=this._convertToCellCoord(e),l=this._convertToCellCoord(n),f=this._convertToCellCoord(r),h=u;h<=l;h++)for(var p=c;p<=f;p++){var d=this.d*p+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(p),this._convertFromCellCoord(h+1),this._convertFromCellCoord(p+1)))&&i.call(this,t,e,n,r,d,o,a,s))return}},ye.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},ye.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},ye.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var ka=bi.ImageData,Ma=bi.ImageBitmap,Pa={};for(var ja in _e("Object",Object),Ca.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Ca.deserialize=function(t){return new Ca(t.buffer)},_e("Grid",Ca),_e("Color",Oo),_e("Error",Error),_e("ResolvedImage",ko),_e("StylePropertyFunction",ba),_e("StyleExpression",ga,{omit:["_evaluator"]}),_e("ZoomDependentExpression",_a),_e("ZoomConstantExpression",ya),_e("CompoundExpression",Bo,{omit:["_evaluate"]}),ma)ma[ja]._classRegistryKey||_e("Expression_"+ja,ma[ja]);var Ia=function(){this.first=!0};Ia.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var Ra={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}},La=null,Da="unavailable",Na=null,za=function(t){t&&"string"==typeof t&&t.indexOf("NetworkError")>-1&&(Da="error"),La&&La(t)},Fa=new so,Ba=function(){return Da},Ua=function(){if("deferred"!==Da||!Na)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Da="loading",Me(),Na&&eo({url:Na},function(t){t?za(t):(Da="loaded",Me())})},Va={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Da||null!=Va.applyArabicShaping},isLoading:function(){return"loading"===Da},setState:function(t){Da=t.pluginStatus,Na=t.pluginURL},isParsed:function(){return null!=Va.applyArabicShaping&&null!=Va.processBidirectionalText&&null!=Va.processStyledBidirectionalText},getPluginURL:function(){return Na}},Ga=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ia,this.transition={})};Ga.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!Ce(r[n].charCodeAt(0),e))return!1;return!0}(t,Va.isLoaded())},Ga.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ga.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var Ha=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Rt(t))return new ba(t,e);if(Ut(t)){var n=Gt(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Oo.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};Ha.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ha.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var Wa=function(t){this.property=t,this.value=new Ha(t,void 0)};Wa.prototype.transitioned=function(t,e){return new Za(this.property,this.value,e,s({},t.transition,this.transition),t.now)},Wa.prototype.untransitioned=function(){return new Za(this.property,this.value,null,{},0)};var qa=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};qa.prototype.getValue=function(t){return v(this._values[t].value.value)},qa.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wa(this._values[t].property)),this._values[t].value=new Ha(this._values[t].property,null===e?void 0:v(e))},qa.prototype.getTransition=function(t){return v(this._values[t].transition)},qa.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wa(this._values[t].property)),this._values[t].transition=v(e)||void 0},qa.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},qa.prototype.transitioned=function(t,e){for(var n=new Xa(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},qa.prototype.untransitioned=function(){for(var t=new Xa(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var Za=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Za.prototype.possiblyEvaluate=function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return i};var Xa=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Xa.prototype.possiblyEvaluate=function(t,e,n){for(var r=new Ja(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r},Xa.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var Ya=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Ya.prototype.getValue=function(t){return v(this._values[t].value)},Ya.prototype.setValue=function(t,e){this._values[t]=new Ha(this._values[t].property,null===e?void 0:v(e))},Ya.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},Ya.prototype.possiblyEvaluate=function(t,e,n){for(var r=new Ja(this._properties),i=0,o=Object.keys(this._values);i<o.length;i+=1){var a=o[i];r._values[a]=this._values[a].possiblyEvaluate(t,e,n)}return r};var Ka=function(t,e,n){this.property=t,this.value=e,this.parameters=n};Ka.prototype.isConstant=function(){return"constant"===this.value.kind},Ka.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Ka.prototype.evaluate=function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)};var Ja=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Ja.prototype.get=function(t){return this._values[t]};var Qa=function(t){this.specification=t};Qa.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Qa.prototype.interpolate=function(t,e,n){var r=qo[this.specification.type];return r?r(t,e,n):t};var $a=function(t,e){this.specification=t,this.overrides=e};$a.prototype.possiblyEvaluate=function(t,e,n,r){return new Ka(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)},$a.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Ka(this,{kind:"constant",value:void 0},t.parameters);var r=qo[this.specification.type];return r?new Ka(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},$a.prototype.evaluate=function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)};var ts=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0===t.value)return new Ka(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new Ka(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Ka(this,{kind:"constant",value:s},e)}return new Ka(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r,i,o){if("source"===t.kind){var a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}($a),es=function(t){this.specification=t};es.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new Ga(Math.floor(e.zoom-1),e)),t.expression.evaluate(new Ga(Math.floor(e.zoom),e)),t.expression.evaluate(new Ga(Math.floor(e.zoom+1),e)),e)}},es.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},es.prototype.interpolate=function(t){return t};var ns=function(t){this.specification=t};ns.prototype.possiblyEvaluate=function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)},ns.prototype.interpolate=function(){return!1};var rs=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new Ha(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new Wa(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};_e("DataDrivenProperty",$a),_e("DataConstantProperty",Qa),_e("CrossFadedDataDrivenProperty",ts),_e("CrossFadedProperty",es),_e("ColorRampProperty",ns);var is=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Ya(n.layout)),n.paint)){for(var r in this._transitionablePaint=new qa(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ja(n.paint)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(Aa,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return h(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Ta,"layers."+this.id+".paint."+t,t,e,n))return!1;if(h(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),d(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&ge(this,t.call(Sa,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:uo,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Ka&&Mt(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(so),os={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},as=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ss=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};ss.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},ss.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},ss.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ss.prototype.clear=function(){this.length=0},ss.prototype.resize=function(t){this.reserve(t),this.length=t},ss.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},ss.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var us=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(ss);us.prototype.bytesPerElement=4,_e("StructArrayLayout2i4",us);var cs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(ss);cs.prototype.bytesPerElement=8,_e("StructArrayLayout4i8",cs);var ls=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(ss);ls.prototype.bytesPerElement=12,_e("StructArrayLayout2i4i12",ls);var fs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(ss);fs.prototype.bytesPerElement=8,_e("StructArrayLayout2i4ub8",fs);var hs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(ss);hs.prototype.bytesPerElement=8,_e("StructArrayLayout2f8",hs);var ps=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,n,r,i,o,a,s,u,c)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l){var f=10*t;return this.uint16[f+0]=e,this.uint16[f+1]=n,this.uint16[f+2]=r,this.uint16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.uint16[f+8]=c,this.uint16[f+9]=l,t},e}(ss);ps.prototype.bytesPerElement=20,_e("StructArrayLayout10ui20",ps);var ds=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,f){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,r,i,o,a,s,u,c,l,f)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,f,h){var p=12*t;return this.int16[p+0]=e,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=u,this.int16[p+8]=c,this.int16[p+9]=l,this.int16[p+10]=f,this.int16[p+11]=h,t},e}(ss);ds.prototype.bytesPerElement=24,_e("StructArrayLayout4i4ui4i24",ds);var vs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(ss);vs.prototype.bytesPerElement=12,_e("StructArrayLayout3f12",vs);var ms=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(ss);ms.prototype.bytesPerElement=4,_e("StructArrayLayout1ul4",ms);var gs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,u)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c){var l=10*t,f=5*t;return this.int16[l+0]=e,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.int16[l+4]=o,this.int16[l+5]=a,this.uint32[f+3]=s,this.uint16[l+8]=u,this.uint16[l+9]=c,t},e}(ss);gs.prototype.bytesPerElement=20,_e("StructArrayLayout6i1ul2ui20",gs);var ys=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(ss);ys.prototype.bytesPerElement=12,_e("StructArrayLayout2i2i2i12",ys);var _s=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i){var o=this.length;return this.resize(o+1),this.emplace(o,t,e,n,r,i)},e.prototype.emplace=function(t,e,n,r,i,o){var a=4*t,s=8*t;return this.float32[a+0]=e,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,t},e}(ss);_s.prototype.bytesPerElement=16,_e("StructArrayLayout2f1f2i16",_s);var bs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t},e}(ss);bs.prototype.bytesPerElement=12,_e("StructArrayLayout2ub2f12",bs);var xs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(ss);xs.prototype.bytesPerElement=6,_e("StructArrayLayout3ui6",xs);var ws=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m,g){var y=24*t,_=12*t,b=48*t;return this.int16[y+0]=e,this.int16[y+1]=n,this.uint16[y+2]=r,this.uint16[y+3]=i,this.uint32[_+2]=o,this.uint32[_+3]=a,this.uint32[_+4]=s,this.uint16[y+10]=u,this.uint16[y+11]=c,this.uint16[y+12]=l,this.float32[_+7]=f,this.float32[_+8]=h,this.uint8[b+36]=p,this.uint8[b+37]=d,this.uint8[b+38]=v,this.uint32[_+10]=m,this.int16[y+22]=g,t},e}(ss);ws.prototype.bytesPerElement=48,_e("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ws);var Es=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m,g,y,_,b,x,w,E,S,O,T,A){var C=this.length;return this.resize(C+1),this.emplace(C,t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m,g,y,_,b,x,w,E,S,O,T,A)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m,g,y,_,b,x,w,E,S,O,T,A,C){var k=34*t,M=17*t;return this.int16[k+0]=e,this.int16[k+1]=n,this.int16[k+2]=r,this.int16[k+3]=i,this.int16[k+4]=o,this.int16[k+5]=a,this.int16[k+6]=s,this.int16[k+7]=u,this.uint16[k+8]=c,this.uint16[k+9]=l,this.uint16[k+10]=f,this.uint16[k+11]=h,this.uint16[k+12]=p,this.uint16[k+13]=d,this.uint16[k+14]=v,this.uint16[k+15]=m,this.uint16[k+16]=g,this.uint16[k+17]=y,this.uint16[k+18]=_,this.uint16[k+19]=b,this.uint16[k+20]=x,this.uint16[k+21]=w,this.uint16[k+22]=E,this.uint32[M+12]=S,this.float32[M+13]=O,this.float32[M+14]=T,this.float32[M+15]=A,this.float32[M+16]=C,t},e}(ss);Es.prototype.bytesPerElement=68,_e("StructArrayLayout8i15ui1ul4f68",Es);var Ss=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(ss);Ss.prototype.bytesPerElement=4,_e("StructArrayLayout1f4",Ss);var Os=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(ss);Os.prototype.bytesPerElement=6,_e("StructArrayLayout3i6",Os);var Ts=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(ss);Ts.prototype.bytesPerElement=8,_e("StructArrayLayout1ul2ui8",Ts);var As=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(ss);As.prototype.bytesPerElement=4,_e("StructArrayLayout2ui4",As);var Cs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(ss);Cs.prototype.bytesPerElement=2,_e("StructArrayLayout1ui2",Cs);var ks=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(ss);ks.prototype.bytesPerElement=16,_e("StructArrayLayout4f16",ks);var Ms=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.anchorPoint.get=function(){return new vi(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(as);Ms.prototype.size=20;var Ps=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Ms(this,t)},e}(gs);_e("CollisionBoxArray",Ps);var js=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(as);js.prototype.size=48;var Is=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new js(this,t)},e}(ws);_e("PlacedSymbolArray",Is);var Rs=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+12]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},n.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(e.prototype,n),e}(as);Rs.prototype.size=68;var Ls=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new Rs(this,t)},e}(Es);_e("SymbolInstanceArray",Ls);var Ds=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Ss);_e("GlyphOffsetArray",Ds);var Ns=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Os);_e("SymbolLineVertexArray",Ns);var zs=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(as);zs.prototype.size=8;var Fs=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new zs(this,t)},e}(Ts);_e("FeatureIndexArray",Fs);var Bs=Pe([{name:"a_pos",components:2,type:"Int16"}],4).members,Us=function(t){void 0===t&&(t=[]),this.segments=t};Us.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>Us.MAX_VERTEX_ARRAY_LENGTH&&m("Max vertices per segment is "+Us.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>Us.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},Us.prototype.get=function(){return this.segments},Us.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},Us.simpleSegment=function(t,e,n,r){return new Us([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},Us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_e("SegmentVector",Us);var Vs=Pe([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Gs=e(function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,c;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,c=0;c<r;)u=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(c+2))<<16;case 2:u^=(255&t.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}}),Hs=e(function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}}),Ws=Gs,qs=Hs;Ws.murmur3=Gs,Ws.murmur2=qs;var Zs=function(){this.ids=[],this.positions=[],this.indexed=!1};Zs.prototype.add=function(t,e,n,r){this.ids.push(Re(t)),this.positions.push(e,n,r)},Zs.prototype.getPositions=function(t){for(var e=Re(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},Zs.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){for(;r<i;){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Le(e,a,s),Le(n,3*a,3*s),Le(n,3*a+1,3*s+1),Le(n,3*a+2,3*s+2)}s-r<i-s?(t(e,n,r,s),r=s+1):(t(e,n,s+1,i),i=s)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},Zs.deserialize=function(t){var e=new Zs;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var Xs=Math.pow(2,53)-1;_e("FeaturePositionMap",Zs);var Ys=function(t,e){this.gl=t.gl,this.location=e},Ks=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Ys),Js=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Ys),Qs=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Ys),$s=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Ys),tu=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Ys),eu=function(t){function e(e,n){t.call(this,e,n),this.current=Oo.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Ys),nu=new Float32Array(16),ru=function(t){function e(e,n){t.call(this,e,n),this.current=nu}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Ys),iu=function(t,e,n){this.value=t,this.uniformNames=e.map(function(t){return"u_"+t}),this.type=n};iu.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},iu.prototype.getBinding=function(t,e,n){return"color"===this.type?new eu(t,e):new Js(t,e)};var ou=function(t,e){this.uniformNames=e.map(function(t){return"u_"+t}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};ou.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},ou.prototype.setUniform=function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)},ou.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new tu(t,e):new Js(t,e)};var au=function(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}}),this.paintVertexArray=new r};au.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new Ga(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},au.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)},au.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var r=De(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},au.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},au.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var su=function(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map(function(t){return"u_"+t+"_t"}),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}}),this.paintVertexArray=new o};su.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.expression.evaluate(new Ga(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new Ga(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},su.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)},su.prototype._setPaintValue=function(t,e,n,r){if("color"===this.type)for(var i=De(n),o=De(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},su.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},su.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},su.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=o(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)},su.prototype.getBinding=function(t,e,n){return new Js(t,e)};var uu=function(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};uu.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)},uu.prototype.updatePaintArray=function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)},uu.prototype._setPaintValues=function(t,e,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],a=r[n.max];if(i&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},uu.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Vs.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Vs.members,this.expression.isStateDependent))},uu.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var cu=function(t,e,n){this.binders={},this._buffers=[];var r=[];for(var i in t.paint._values)if(n(i)){var o=t.paint.get(i);if(o instanceof Ka&&Mt(o.property.specification)){var a=Ne(i,t.type),s=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,l=o.property.specification["property-type"],f="cross-faded"===l||"cross-faded-data-driven"===l;if("constant"===s.kind)this.binders[i]=f?new ou(s.value,a):new iu(s.value,a,u),r.push("/u_"+i);else if("source"===s.kind||f){var h=ze(i,u,"source");this.binders[i]=f?new uu(s,u,c,e,h,t.id):new au(s,a,u,h),r.push("/a_"+i)}else{var p=ze(i,u,"composite");this.binders[i]=new su(s,a,u,c,e,p),r.push("/z_"+i)}}}this.cacheKey=r.sort().join("")};cu.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof au||e instanceof su?e.maxValue:0},cu.prototype.populatePaintArrays=function(t,e,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof au||a instanceof su||a instanceof uu)&&a.populatePaintArray(t,e,n,r,i)}},cu.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof ou&&r.setConstantPatternPositions(t,e)}},cu.prototype.updatePaintArrays=function(t,e,n,r,i){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var c=u[s],l=n.feature(c.index);for(var f in this.binders){var h=this.binders[f];if((h instanceof au||h instanceof su||h instanceof uu)&&!0===h.expression.isStateDependent){var p=r.paint.get(f);h.expression=p.value,h.updatePaintArray(c.start,c.end,l,t[a],i),o=!0}}}return o},cu.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof iu||n instanceof ou)&&t.push.apply(t,n.uniformNames.map(function(t){return"#define HAS_UNIFORM_"+t}))}return t},cu.prototype.getBinderAttributes=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof au||n instanceof su)for(var r=0;r<n.paintVertexAttributes.length;r++)t.push(n.paintVertexAttributes[r].name);else if(n instanceof uu)for(var i=0;i<Vs.members.length;i++)t.push(Vs.members[i].name)}return t},cu.prototype.getBinderUniforms=function(){var t=[];for(var e in this.binders){var n=this.binders[e];if(n instanceof iu||n instanceof ou||n instanceof su)for(var r=0,i=n.uniformNames;r<i.length;r+=1)t.push(i[r])}return t},cu.prototype.getPaintVertexBuffers=function(){return this._buffers},cu.prototype.getUniforms=function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof iu||i instanceof ou||i instanceof su)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:u})}}}return n},cu.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,n.get(u),s)}},cu.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof uu){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof au||n instanceof su)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},cu.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof au||n instanceof su||n instanceof uu)&&n.upload(t)}this.updatePaintBuffers()},cu.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof au||e instanceof su||e instanceof uu)&&e.destroy()}};var lu=function(t,e,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=t;r<i.length;r+=1){var o=i[r];this.programConfigurations[o.id]=new cu(o,e,n)}this.needsUpload=!1,this._featureMap=new Zs,this._bufferOffset=0};lu.prototype.populatePaintArrays=function(t,e,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},lu.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},lu.prototype.get=function(t){return this.programConfigurations[t]},lu.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},lu.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},_e("ConstantBinder",iu),_e("CrossFadedConstantBinder",ou),_e("SourceExpressionBinder",au),_e("CrossFadedCompositeBinder",uu),_e("CompositeExpressionBinder",su),_e("ProgramConfiguration",cu,{omit:["_buffers"]}),_e("ProgramConfigurationSet",lu);var fu=Math.pow(2,14)-1,hu=-fu-1,pu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new us,this.indexArray=new xs,this.segments=new Us,this.programConfigurations=new lu(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};pu.prototype.populate=function(t,e,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],c=u.feature,l=u.id,f=u.index,h=u.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,d=Be(c,p);if(this.layers[0]._featureFilter.filter(new Ga(this.zoom),d,n)){var v=o?o.evaluate(d,{},n):void 0,m={id:l,properties:c.properties,type:c.type,sourceLayerIndex:h,index:f,geometry:p?d.geometry:Fe(c),patterns:{},sortKey:v};i.push(m)}}o&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var g=0,y=i;g<y.length;g+=1){var _=y[g],b=_.geometry,x=_.index,w=_.sourceLayerIndex,E=t[x].feature;this.addFeature(_,b,x,n),e.featureIndex.insert(E,b,x,w,this.index)}},pu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},pu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},pu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},pu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},pu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},pu.prototype.addFeature=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],c=u.x,l=u.y;if(!(c<0||c>=8192||l<0||l>=8192)){var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=f.vertexLength;Ue(this.layoutVertexArray,c,l,-1,-1),Ue(this.layoutVertexArray,c,l,1,-1),Ue(this.layoutVertexArray,c,l,1,1),Ue(this.layoutVertexArray,c,l,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),f.vertexLength+=4,f.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)},_e("CircleBucket",pu,{omit:["layers"]});var du=new rs({"circle-sort-key":new $a(uo.layout_circle["circle-sort-key"])}),vu={paint:new rs({"circle-radius":new $a(uo.paint_circle["circle-radius"]),"circle-color":new $a(uo.paint_circle["circle-color"]),"circle-blur":new $a(uo.paint_circle["circle-blur"]),"circle-opacity":new $a(uo.paint_circle["circle-opacity"]),"circle-translate":new Qa(uo.paint_circle["circle-translate"]),"circle-translate-anchor":new Qa(uo.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qa(uo.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qa(uo.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $a(uo.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $a(uo.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $a(uo.paint_circle["circle-stroke-opacity"])}),layout:du},mu="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)});var gu,yu=rn;gu=new mu(3),mu!=Float32Array&&(gu[0]=0,gu[1]=0,gu[2]=0),function(){var t=new mu(4);mu!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var _u=(function(){var t=new mu(2);mu!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,vu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new pu(t)},e.prototype.queryRadius=function(t){var e=t;return $e("circle-radius",this,e)+$e("circle-stroke-width",this,e)+tn(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=en(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),l="map"===this.paint.get("circle-pitch-alignment"),f=l?u:function(t,e){return t.map(function(t){return an(t,e)})}(u,s),h=l?c*a:c,p=0,d=r;p<d.length;p+=1)for(var v=0,m=d[p];v<m.length;v+=1){var g=m[v],y=l?g:an(g,s),_=h,b=on([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?_*=b[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(_*=o.cameraToCenterDistance/b[3]),Ge(f,y,_))return!0}return!1},e}(is)),bu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(pu);_e("HeatmapBucket",bu,{omit:["layers"]});var xu=function(t,e){sn(this,t,1,e)};xu.prototype.resize=function(t){un(this,t,1)},xu.prototype.clone=function(){return new xu({width:this.width,height:this.height},new Uint8Array(this.data))},xu.copy=function(t,e,n,r,i){cn(t,e,n,r,i,1)};var wu=function(t,e){sn(this,t,4,e)};wu.prototype.resize=function(t){un(this,t,4)},wu.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},wu.prototype.clone=function(){return new wu({width:this.width,height:this.height},new Uint8Array(this.data))},wu.copy=function(t,e,n,r,i){cn(t,e,n,r,i,4)},_e("AlphaImage",xu),_e("RGBAImage",wu);var Eu={paint:new rs({"heatmap-radius":new $a(uo.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $a(uo.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qa(uo.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ns(uo.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qa(uo.paint_heatmap["heatmap-opacity"])})},Su=function(t){function e(e){t.call(this,e,Eu),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new bu(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=ln({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(is),Ou={paint:new rs({"hillshade-illumination-direction":new Qa(uo.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qa(uo.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qa(uo.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qa(uo.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qa(uo.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qa(uo.paint_hillshade["hillshade-accent-color"])})},Tu=function(t){function e(e){t.call(this,e,Ou)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(is),Au=Pe([{name:"a_pos",components:2,type:"Int16"}],4).members,Cu=fn,ku=fn;fn.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(Dn(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(Dn(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,l=r[a+1]*n,f=r[a+2]*n;u+=Math.abs((t[c]-t[f])*(t[l+1]-t[c+1])-(t[c]-t[l])*(t[f+1]-t[c+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},fn.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Cu.default=ku;var Mu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new us,this.indexArray=new xs,this.indexArray2=new As,this.programConfigurations=new lu(t.layers,t.zoom),this.segments=new Us,this.segments2=new Us,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Mu.prototype.populate=function(t,e,n){this.hasPattern=Vn("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,c=s.id,l=s.index,f=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=Be(u,h);if(this.layers[0]._featureFilter.filter(new Ga(this.zoom),p,n)){var d=r?r.evaluate(p,{},n,e.availableImages):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:h?p.geometry:Fe(u),patterns:{},sortKey:d};i.push(v)}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=i;m<g.length;m+=1){var y=g[m],_=y.geometry,b=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=Gn("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,_,b,n,{});e.featureIndex.insert(t[b].feature,_,b,x,this.index)}},Mu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Mu.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Mu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Mu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Mu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Au),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Mu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Mu.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=Bn(e,500);o<a.length;o+=1){for(var s=a[o],u=0,c=0,l=s;c<l.length;c+=1)u+=l[c].length;for(var f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=f.vertexLength,p=[],d=[],v=0,m=s;v<m.length;v+=1){var g=m[v];if(0!==g.length){g!==s[0]&&d.push(p.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),_=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(_+g.length-1,_),p.push(g[0].x),p.push(g[0].y);for(var b=1;b<g.length;b++)this.layoutVertexArray.emplaceBack(g[b].x,g[b].y),this.indexArray2.emplaceBack(_+b-1,_+b),p.push(g[b].x),p.push(g[b].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var x=Cu(p,d),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(h+x[w],h+x[w+1],h+x[w+2]);f.vertexLength+=u,f.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},_e("FillBucket",Mu,{omit:["layers","patternFeatures"]});var Pu=new rs({"fill-sort-key":new $a(uo.layout_fill["fill-sort-key"])}),ju={paint:new rs({"fill-antialias":new Qa(uo.paint_fill["fill-antialias"]),"fill-opacity":new $a(uo.paint_fill["fill-opacity"]),"fill-color":new $a(uo.paint_fill["fill-color"]),"fill-outline-color":new $a(uo.paint_fill["fill-outline-color"]),"fill-translate":new Qa(uo.paint_fill["fill-translate"]),"fill-translate-anchor":new Qa(uo.paint_fill["fill-translate-anchor"]),"fill-pattern":new ts(uo.paint_fill["fill-pattern"])}),layout:Pu},Iu=function(t){function e(e){t.call(this,e,ju)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Mu(t)},e.prototype.queryRadius=function(){return tn(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return He(en(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(is),Ru=Pe([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Lu=Hn;Hn.types=["Unknown","Point","LineString","Polygon"],Hn.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(i<=0){var u=t.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new vi(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},Hn.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;t.pos<e;){if(r<=0){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},Hn.prototype.toGeoJSON=function(t,e,n){function r(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+s)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+u)/a)*Math.PI/180))-90]}}var i,o,a=this.extent*Math.pow(2,n),s=this.extent*t,u=this.extent*e,c=this.loadGeometry(),l=Hn.types[this.type];switch(this.type){case 1:var f=[];for(i=0;i<c.length;i++)f[i]=c[i][0];r(c=f);break;case 2:for(i=0;i<c.length;i++)r(c[i]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=qn(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(c),i=0;i<c.length;i++)for(o=0;o<c[i].length;o++)r(c[i][o])}1===c.length?c=c[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:c},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Du=Zn;Zn.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Lu(this._pbf,e,this.extent,this._keys,this._values)};var Nu={VectorTile:function(t,e){this.layers=t.readFields(Yn,{},e)},VectorTileFeature:Lu,VectorTileLayer:Du},zu=Nu.VectorTileFeature.types,Fu=Math.pow(2,13),Bu=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new ls,this.indexArray=new xs,this.programConfigurations=new lu(t.layers,t.zoom),this.segments=new Us,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Bu.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=Vn("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.id,u=o.index,c=o.sourceLayerIndex,l=this.layers[0]._featureFilter.needGeometry,f=Be(a,l);if(this.layers[0]._featureFilter.filter(new Ga(this.zoom),f,n)){var h={id:s,sourceLayerIndex:c,index:u,geometry:l?f.geometry:Fe(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(Gn("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,u,n,{}),e.featureIndex.insert(a,h.geometry,u,c,this.index,!0)}}},Bu.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Bu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Bu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Bu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Bu.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ru),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Bu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Bu.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=Bn(e,500);o<a.length;o+=1){for(var s=a[o],u=0,c=0,l=s;c<l.length;c+=1)u+=l[c].length;for(var f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,p=s;h<p.length;h+=1){var d=p[h];if(0!==d.length&&!((j=d).every(function(t){return t.x<0})||j.every(function(t){return t.x>8192})||j.every(function(t){return t.y<0})||j.every(function(t){return t.y>8192})))for(var v=0,m=0;m<d.length;m++){var g=d[m];if(m>=1){var y=d[m-1];if(!Jn(g,y)){f.vertexLength+4>Us.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _=g.sub(y)._perp()._unit(),b=y.dist(g);v+b>32768&&(v=0),Kn(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,0,v),Kn(this.layoutVertexArray,g.x,g.y,_.x,_.y,0,1,v),Kn(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,0,v+=b),Kn(this.layoutVertexArray,y.x,y.y,_.x,_.y,0,1,v);var x=f.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),f.vertexLength+=4,f.primitiveLength+=2}}}}if(f.vertexLength+u>Us.MAX_VERTEX_ARRAY_LENGTH&&(f=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===zu[t.type]){for(var w=[],E=[],S=f.vertexLength,O=0,T=s;O<T.length;O+=1){var A=T[O];if(0!==A.length){A!==s[0]&&E.push(w.length/2);for(var C=0;C<A.length;C++){var k=A[C];Kn(this.layoutVertexArray,k.x,k.y,0,0,1,1,0),w.push(k.x),w.push(k.y)}}}for(var M=Cu(w,E),P=0;P<M.length;P+=3)this.indexArray.emplaceBack(S+M[P],S+M[P+2],S+M[P+1]);f.primitiveLength+=M.length/3,f.vertexLength+=u}}var j;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},_e("FillExtrusionBucket",Bu,{omit:["layers","features"]});var Uu={paint:new rs({"fill-extrusion-opacity":new Qa(uo["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $a(uo["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qa(uo["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qa(uo["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ts(uo["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $a(uo["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $a(uo["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qa(uo["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Vu=function(t){function e(e){t.call(this,e,Uu)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new Bu(t)},e.prototype.queryRadius=function(){return tn(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){var u=en(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,a),c=this.paint.get("fill-extrusion-height").evaluate(e,n),l=this.paint.get("fill-extrusion-base").evaluate(e,n),f=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=[s.x,s.y,0,1];on(u,u,e),i.push(new vi(u[0]/u[3],u[1]/u[3]))}return i}(u,s),h=function(t,e,n,r){for(var i=[],o=[],a=r[8]*e,s=r[9]*e,u=r[10]*e,c=r[11]*e,l=r[8]*n,f=r[9]*n,h=r[10]*n,p=r[11]*n,d=0,v=t;d<v.length;d+=1){for(var m=[],g=[],y=0,_=v[d];y<_.length;y+=1){var b=_[y],x=b.x,w=b.y,E=r[0]*x+r[4]*w+r[12],S=r[1]*x+r[5]*w+r[13],O=r[2]*x+r[6]*w+r[14],T=r[3]*x+r[7]*w+r[15],A=O+u,C=T+c,k=E+l,M=S+f,P=O+h,j=T+p,I=new vi((E+a)/C,(S+s)/C);I.z=A/C,m.push(I);var R=new vi(k/j,M/j);R.z=P/j,g.push(R)}i.push(m),o.push(g)}return[i,o]}(r,l,c,s);return function(t,e,n){var r=1/0;He(n,e)&&(r=$n(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],c=[u,o[s+1],a[s+1],a[s],u];Ve(n,c)&&(r=Math.min(r,$n(n,c)))}return r!==1/0&&r}(h[0],h[1],f)},e}(is),Gu=Pe([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Hu=Pe([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Wu=Nu.VectorTileFeature.types,qu=Math.cos(Math.PI/180*37.5),Zu=Math.pow(2,14)/.5,Xu=function(t){var e=this;this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(t){e.gradients[t.id]={}}),this.layoutVertexArray=new fs,this.layoutVertexArray2=new hs,this.indexArray=new xs,this.programConfigurations=new lu(t.layers,t.zoom),this.segments=new Us,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Xu.prototype.populate=function(t,e,n){this.hasPattern=Vn("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,c=s.id,l=s.index,f=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,p=Be(u,h);if(this.layers[0]._featureFilter.filter(new Ga(this.zoom),p,n)){var d=r?r.evaluate(p,{},n):void 0,v={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:h?p.geometry:Fe(u),patterns:{},sortKey:d};i.push(v)}}r&&i.sort(function(t,e){return t.sortKey-e.sortKey});for(var m=0,g=i;m<g.length;m+=1){var y=g[m],_=y.geometry,b=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var w=Gn("line",this.layers,y,this.zoom,e);this.patternFeatures.push(w)}else this.addFeature(y,_,b,n,{});e.featureIndex.insert(t[b].feature,_,b,x,this.index)}},Xu.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Xu.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Xu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xu.prototype.upload=function(t){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Hu)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Gu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Xu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xu.prototype.lineFeatureClips=function(t){if(t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}},Xu.prototype.addFeature=function(t,e,n,r,i){var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(var l=0,f=e;l<f.length;l+=1)this.addLine(f[l],t,a,s,u,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Xu.prototype.addLine=function(t,e,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var a=0;a<t.length-1;a++)this.totalDistance+=t[a].dist(t[a+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Wu[e.type],u=t.length;u>=2&&t[u-1].equals(t[u-2]);)u--;for(var c=0;c<u-1&&t[c].equals(t[c+1]);)c++;if(!(u<(s?3:2))){"bevel"===n&&(i=1.05);var l,f=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*u,this.layoutVertexArray,this.indexArray),p=void 0,d=void 0,v=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=t[c].sub(l=t[u-2])._unit()._perp());for(var g=c;g<u;g++)if(!(d=g===u-1?s?t[c+1]:void 0:t[g+1])||!t[g].equals(d)){m&&(v=m),l&&(p=l),l=t[g],m=d?d.sub(l)._unit()._perp():v;var y=(v=v||m).add(m);0===y.x&&0===y.y||y._unit();var _=v.x*m.x+v.y*m.y,b=y.x*m.x+y.y*m.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),E=b<qu&&p&&d,S=v.x*m.y-v.y*m.x>0;if(E&&g>c){var O=l.dist(p);if(O>2*f){var T=l.sub(l.sub(p)._mult(f/O)._round());this.updateDistance(p,T),this.addCurrentVertex(T,v,0,0,h),p=T}}var A=p&&d,C=A?n:s?"butt":r;if(A&&"round"===C&&(x<o?C="miter":x<=2&&(C="fakeround")),"miter"===C&&x>i&&(C="bevel"),"bevel"===C&&(x>2&&(C="flipbevel"),x<i&&(C="miter")),p&&this.updateDistance(p,l),"miter"===C)y._mult(x),this.addCurrentVertex(l,y,0,0,h);else if("flipbevel"===C){if(x>100)y=m.mult(-1);else{var k=x*v.add(m).mag()/v.sub(m).mag();y._perp()._mult(k*(S?-1:1))}this.addCurrentVertex(l,y,0,0,h),this.addCurrentVertex(l,y.mult(-1),0,0,h)}else if("bevel"===C||"fakeround"===C){var M=-Math.sqrt(x*x-1),P=S?M:0,j=S?0:M;if(p&&this.addCurrentVertex(l,v,P,j,h),"fakeround"===C)for(var I=Math.round(180*w/Math.PI/20),R=1;R<I;R++){var L=R/I;if(.5!==L){var D=L-.5;L+=L*D*(L-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*D*D+(.848013+_*(.215638*_-1.06021)))}var N=m.sub(v)._mult(L)._add(v)._unit()._mult(S?-1:1);this.addHalfVertex(l,N.x,N.y,!1,S,0,h)}d&&this.addCurrentVertex(l,m,-P,-j,h)}else if("butt"===C)this.addCurrentVertex(l,y,0,0,h);else if("square"===C){var z=p?1:-1;this.addCurrentVertex(l,y,z,z,h)}else"round"===C&&(p&&(this.addCurrentVertex(l,v,0,0,h),this.addCurrentVertex(l,v,1,1,h,!0)),d&&(this.addCurrentVertex(l,m,-1,-1,h,!0),this.addCurrentVertex(l,m,0,0,h)));if(E&&g<u-1){var F=l.dist(d);if(F>2*f){var B=l.add(d.sub(l)._mult(f/F)._round());this.updateDistance(l,B),this.addCurrentVertex(B,m,0,0,h),l=B}}}}},Xu.prototype.addCurrentVertex=function(t,e,n,r,i,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Zu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))},Xu.prototype.addHalfVertex=function(t,e,n,r,i,o,a){var s=.5*(this.lineClips?this.scaledDistance*(Zu-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},Xu.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Xu.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},_e("LineBucket",Xu,{omit:["layers","patternFeatures"]});var Yu=new rs({"line-cap":new Qa(uo.layout_line["line-cap"]),"line-join":new $a(uo.layout_line["line-join"]),"line-miter-limit":new Qa(uo.layout_line["line-miter-limit"]),"line-round-limit":new Qa(uo.layout_line["line-round-limit"]),"line-sort-key":new $a(uo.layout_line["line-sort-key"])}),Ku={paint:new rs({"line-opacity":new $a(uo.paint_line["line-opacity"]),"line-color":new $a(uo.paint_line["line-color"]),"line-translate":new Qa(uo.paint_line["line-translate"]),"line-translate-anchor":new Qa(uo.paint_line["line-translate-anchor"]),"line-width":new $a(uo.paint_line["line-width"]),"line-gap-width":new $a(uo.paint_line["line-gap-width"]),"line-offset":new $a(uo.paint_line["line-offset"]),"line-blur":new $a(uo.paint_line["line-blur"]),"line-dasharray":new es(uo.paint_line["line-dasharray"]),"line-pattern":new ts(uo.paint_line["line-pattern"]),"line-gradient":new ns(uo.paint_line["line-gradient"])}),layout:Yu},Ju=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new Ga(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=s({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}($a))(Ku.paint.properties["line-width"].specification);Ju.useIntegerZoom=!0;var Qu=function(t){function e(e){t.call(this,e,Ku),this.gradientVersion=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Wo,this.gradientVersion=(this.gradientVersion+1)%xi)},e.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=Ju.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Xu(t)},e.prototype.queryRadius=function(t){var e=t,n=tr($e("line-width",this,e),$e("line-gap-width",this,e)),r=$e("line-offset",this,e);return n/2+Math.abs(r)+tn(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){var s=en(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,a),u=a/2*tr(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){for(var n=[],r=new vi(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var u=o[s],c=o[s+1],l=0===s?r:u.sub(o[s-1])._unit()._perp(),f=s===o.length-1?r:c.sub(u)._unit()._perp(),h=l._add(f)._unit();h._mult(1/(h.x*f.x+h.y*f.y)),a.push(h._mult(e)._add(u))}n.push(a)}return n}(r,c*a)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(Je(t,i[o]))return!0;if(We(t,i,n))return!0}return!1}(s,r,u)},e.prototype.isTileClipped=function(){return!0},e}(is),$u=Pe([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),tc=Pe([{name:"a_projected_pos",components:3,type:"Float32"}],4),ec=(Pe([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Pe([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),nc=(Pe([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Pe([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),rc=Pe([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Pe([{name:"triangle",components:3,type:"Uint16"}]),Pe([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pe([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Pe([{type:"Float32",name:"offsetX"}]),Pe([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var ic={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},oc=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},ac=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v},sc=nr;nr.Varint=0,nr.Fixed64=1,nr.Bytes=2,nr.Fixed32=5;var uc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");nr.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=vr(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=gr(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=vr(this.buf,this.pos)+4294967296*vr(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=vr(this.buf,this.pos)+4294967296*gr(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=oc(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=oc(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return ir(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return ir(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return ir(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return ir(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return ir(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return ir(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&uc?function(t,e,n){return uc.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==nr.Bytes)return t.push(this.readVarint(e));var n=rr(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==nr.Bytes)return t.push(this.readSVarint());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==nr.Bytes)return t.push(this.readBoolean());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==nr.Bytes)return t.push(this.readFloat());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==nr.Bytes)return t.push(this.readDouble());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==nr.Bytes)return t.push(this.readFixed32());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==nr.Bytes)return t.push(this.readSFixed32());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==nr.Bytes)return t.push(this.readFixed64());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==nr.Bytes)return t.push(this.readSFixed64());var e=rr(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===nr.Varint)for(;this.buf[this.pos++]>127;);else if(e===nr.Bytes)this.pos=this.readVarint()+this.pos;else if(e===nr.Fixed32)this.pos+=4;else{if(e!==nr.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),mr(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),mr(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),mr(this.buf,-1&t,this.pos),mr(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),mr(this.buf,-1&t,this.pos),mr(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&or(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),ac(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),ac(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&or(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,nr.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,ar,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,sr,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,lr,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ur,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,cr,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,fr,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,hr,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,pr,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,dr,e)},writeBytesField:function(t,e){this.writeTag(t,nr.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,nr.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,nr.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,nr.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,nr.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,nr.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,nr.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,nr.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,nr.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,nr.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var cc=function(t,e){var n=e.pixelRatio,r=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r},lc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};lc.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},lc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},lc.tlbr.get=function(){return this.tl.concat(this.br)},lc.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(cc.prototype,lc);var fc=function(t,e){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i),this.addImages(e,r,i);var o=xr(i),a=new wu({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],c=n[s].paddedRect;wu.copy(u.data,a,{x:0,y:0},{x:c.x+1,y:c.y+1},u.data)}for(var l in e){var f=e[l],h=r[l].paddedRect,p=h.x+1,d=h.y+1,v=f.data.width,m=f.data.height;wu.copy(f.data,a,{x:0,y:0},{x:p,y:d},f.data),wu.copy(f.data,a,{x:0,y:m-1},{x:p,y:d-1},{width:v,height:1}),wu.copy(f.data,a,{x:0,y:0},{x:p,y:d+m},{width:v,height:1}),wu.copy(f.data,a,{x:v-1,y:0},{x:p-1,y:d},{width:1,height:m}),wu.copy(f.data,a,{x:0,y:0},{x:p+v,y:d},{width:1,height:m})}this.image=a,this.iconPositions=n,this.patternPositions=r};fc.prototype.addImages=function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new cc(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},fc.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},fc.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;n.update(e.data,void 0,{x:r[0],y:r[1]})}},_e("ImagePosition",cc),_e("ImageAtlas",fc);var hc={horizontal:1,vertical:2,horizontalOnly:3},pc=function(){this.scale=1,this.fontStack="",this.imageName=null};pc.forText=function(t,e){var n=new pc;return n.scale=t||1,n.fontStack=e,n},pc.forImage=function(t){var e=new pc;return e.imageName=t,e};var dc=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};dc.fromFeature=function(t,e){for(var n=new dc,r=0;r<t.sections.length;r++){var i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n},dc.prototype.length=function(){return this.text.length},dc.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},dc.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},dc.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},dc.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&Te(r)&&!ic[t[n+1]]||i&&Te(i)&&!ic[t[n-1]]||!ic[t[n]]?t[n]:ic[t[n]]}return e}(this.text)},dc.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&vc[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&vc[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},dc.prototype.substring=function(t,e){var n=new dc;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},dc.prototype.toString=function(){return this.text},dc.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,n){return Math.max(e,t.sections[n].scale)},0)},dc.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(pc.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)},dc.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(pc.forImage(e)),this.sectionIndex.push(this.sections.length-1)):m("Reached maximum number of images 6401")}else m("Can't add FormattedSection with an empty image.")},dc.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var vc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},mc={};mc[10]=!0,mc[32]=!0,mc[38]=!0,mc[40]=!0,mc[41]=!0,mc[43]=!0,mc[45]=!0,mc[47]=!0,mc[173]=!0,mc[183]=!0,mc[8203]=!0,mc[8208]=!0,mc[8211]=!0,mc[8231]=!0;var gc=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(vi);_e("Anchor",gc);var yc=Object.freeze({__proto__:null,getSizeData:Pr,evaluateSizeForFeature:jr,evaluateSizeForZoom:Ir,SIZE_PACK_FACTOR:128}),_c=function(t,e,n,r,i,o,a,s,u,c){if(this.boxStartIndex=t.length,u){var l=o.top,f=o.bottom,h=o.collisionPadding;h&&(l-=h[1],f+=h[3]);var p=f-l;p>0&&(p=Math.max(10,p),this.circleDiameter=p)}else{var d=o.top*a-s,v=o.bottom*a+s,m=o.left*a-s,g=o.right*a+s,y=o.collisionPadding;if(y&&(m-=y[0]*a,d-=y[1]*a,g+=y[2]*a,v+=y[3]*a),c){var _=new vi(m,d),b=new vi(g,d),x=new vi(m,v),w=new vi(g,v),E=c*Math.PI/180;_._rotate(E),b._rotate(E),x._rotate(E),w._rotate(E),m=Math.min(_.x,b.x,x.x,w.x),g=Math.max(_.x,b.x,x.x,w.x),d=Math.min(_.y,b.y,x.y,w.y),v=Math.max(_.y,b.y,x.y,w.y)}t.emplaceBack(e.x,e.y,m,d,g,v,n,r,i)}this.boxEndIndex=t.length},bc=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=qr),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};bc.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},bc.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},bc.prototype.peek=function(){return this.data[0]},bc.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},bc.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var xc=Number.POSITIVE_INFINITY,wc=Nu.VectorTileFeature.types,Ec=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],Sc=function(t){this.layoutVertexArray=new ds,this.indexArray=new xs,this.programConfigurations=t,this.segments=new Us,this.dynamicLayoutVertexArray=new vs,this.opacityVertexArray=new ms,this.placedSymbolArray=new Is};Sc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Sc.prototype.upload=function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,$u.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,tc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Ec,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))},Sc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_e("SymbolBuffers",Sc);var Oc=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new Us,this.collisionVertexArray=new bs};Oc.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ec.members,!0)},Oc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_e("CollisionBuffers",Oc);var Tc=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nn([]),this.placementViewportMatrix=nn([]);var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Pr(this.zoom,e["text-size"]),this.iconSizeData=Pr(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map(function(t){return hc[t]})),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};Tc.prototype.createArrays=function(){this.text=new Sc(new lu(this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Sc(new lu(this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.glyphOffsetArray=new Ds,this.lineVertexArray=new Ns,this.symbolInstances=new Ls},Tc.prototype.calculateGlyphDependencies=function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var a=ic[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},Tc.prototype.populate=function(t,e,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof Co&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),c="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,l=i.get("symbol-sort-key");if(this.features=[],u||c){for(var f=e.iconDependencies,h=e.glyphDependencies,p=e.availableImages,d=new Ga(this.zoom),v=0,m=t;v<m.length;v+=1){var g=m[v],y=g.feature,_=g.id,b=g.index,x=g.sourceLayerIndex,w=r._featureFilter.needGeometry,E=Be(y,w);if(r._featureFilter.filter(d,E,n)){w||(E.geometry=Fe(y));var S=void 0;if(u){var O=r.getValueAndResolveTokens("text-field",E,n,p),T=Co.factory(O);ri(T)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ba()||this.hasRTLText&&Va.isParsed())&&(S=er(T,r,E))}var A=void 0;if(c){var C=r.getValueAndResolveTokens("icon-image",E,n,p);A=C instanceof ko?C:ko.fromString(C)}if(S||A){var k=this.sortFeaturesByKey?l.evaluate(E,{},n):void 0;if(this.features.push({id:_,text:S,icon:A,index:b,sourceLayerIndex:x,geometry:E.geometry,properties:y.properties,type:wc[y.type],sortKey:k}),A&&(f[A.name]=!0),S){var M=o.evaluate(E,{},n).join(","),P="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(hc.vertical)>=0;for(var j=0,I=S.sections;j<I.length;j+=1){var R=I[j];if(R.image)f[R.image.name]=!0;else{var L=Se(S.toString()),D=R.fontStack||M,N=h[D]=h[D]||{};this.calculateGlyphDependencies(R.text,N,P,this.allowVerticalPlacement,L)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,c=0;c<t.length;c++){var l=t[c],f=l.geometry,h=l.text?l.text.toString():null;if(h){var p=i(h,f),d=i(h,f,!0);if(p in a&&d in o&&a[p]!==o[d]){var v=r(p,d,f),m=n(p,d,s[v].geometry);delete o[p],delete a[d],a[i(h,s[m].geometry,!0)]=m,s[v].geometry=null}else p in a?n(p,d,f):d in o?r(p,d,f):(e(c),o[p]=u-1,a[d]=u-1)}else e(c)}return s.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Tc.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},Tc.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Tc.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Tc.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Tc.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Tc.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Tc.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var c=o[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},Tc.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,c,l,f){for(var h=t.indexArray,p=t.layoutVertexArray,d=t.segments.prepareSegment(4*e.length,p,h,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,m=d.vertexLength,g=this.allowVerticalPlacement&&a===hc.vertical?Math.PI/2:0,y=o.text&&o.text.sections,_=0;_<e.length;_++){var b=e[_],x=b.tl,w=b.tr,E=b.bl,S=b.br,O=b.tex,T=b.pixelOffsetTL,A=b.pixelOffsetBR,C=b.minFontScaleX,k=b.minFontScaleY,M=b.glyphOffset,P=b.isSDF,j=b.sectionIndex,I=d.vertexLength,R=M[1];ei(p,s.x,s.y,x.x,R+x.y,O.x,O.y,n,P,T.x,T.y,C,k),ei(p,s.x,s.y,w.x,R+w.y,O.x+O.w,O.y,n,P,A.x,T.y,C,k),ei(p,s.x,s.y,E.x,R+E.y,O.x,O.y+O.h,n,P,T.x,A.y,C,k),ei(p,s.x,s.y,S.x,R+S.y,O.x+O.w,O.y+O.h,n,P,A.x,A.y,C,k),ni(t.dynamicLayoutVertexArray,s,g),h.emplaceBack(I,I+1,I+2),h.emplaceBack(I+1,I+2,I+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),_!==e.length-1&&j===e[_+1].sectionIndex||t.programConfigurations.populatePaintArrays(p.length,o,o.index,{},f,y&&y[j])}t.placedSymbolArray.emplaceBack(s.x,s.y,v,this.glyphOffsetArray.length-v,m,u,c,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,l)},Tc.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},Tc.prototype.addCollisionDebugVertices=function(t,e,n,r,i,o,a){var s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=s.vertexLength,c=i.layoutVertexArray,l=i.collisionVertexArray,f=a.anchorX,h=a.anchorY;this._addCollisionDebugVertex(c,l,o,f,h,new vi(t,e)),this._addCollisionDebugVertex(c,l,o,f,h,new vi(n,e)),this._addCollisionDebugVertex(c,l,o,f,h,new vi(n,r)),this._addCollisionDebugVertex(c,l,o,f,h,new vi(t,r)),s.vertexLength+=4;var p=i.indexArray;p.emplaceBack(u,u+1),p.emplaceBack(u+1,u+2),p.emplaceBack(u+2,u+3),p.emplaceBack(u+3,u),s.primitiveLength+=4},Tc.prototype.addDebugCollisionBoxes=function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i);this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n)}},Tc.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Oc(ys,nc.members,As),this.iconCollisionBox=new Oc(ys,nc.members,As);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},Tc.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i,o,a,s,u){for(var c={},l=e;l<n;l++){var f=t.get(l);c.textBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},c.textFeatureIndex=f.featureIndex;break}for(var h=r;h<i;h++){var p=t.get(h);c.verticalTextBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},c.verticalTextFeatureIndex=p.featureIndex;break}for(var d=o;d<a;d++){var v=t.get(d);c.iconBox={x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,anchorPointX:v.anchorPointX,anchorPointY:v.anchorPointY},c.iconFeatureIndex=v.featureIndex;break}for(var m=s;m<u;m++){var g=t.get(m);c.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},c.verticalIconFeatureIndex=g.featureIndex;break}return c},Tc.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},Tc.prototype.hasTextData=function(){return this.text.segments.get().length>0},Tc.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Tc.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Tc.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Tc.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Tc.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},Tc.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort(function(t,e){return r[t]-r[e]||i[e]-i[t]}),o},Tc.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},Tc.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)}),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_e("SymbolBucket",Tc,{omit:["layers","collisionBoxArray","features","compareText"]}),Tc.MAX_GLYPHS=65535,Tc.addDynamicAttributes=ni;var Ac=new rs({"symbol-placement":new Qa(uo.layout_symbol["symbol-placement"]),"symbol-spacing":new Qa(uo.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qa(uo.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $a(uo.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qa(uo.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qa(uo.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qa(uo.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qa(uo.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qa(uo.layout_symbol["icon-rotation-alignment"]),"icon-size":new $a(uo.layout_symbol["icon-size"]),"icon-text-fit":new Qa(uo.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qa(uo.layout_symbol["icon-text-fit-padding"]),"icon-image":new $a(uo.layout_symbol["icon-image"]),"icon-rotate":new $a(uo.layout_symbol["icon-rotate"]),"icon-padding":new Qa(uo.layout_symbol["icon-padding"]),"icon-keep-upright":new Qa(uo.layout_symbol["icon-keep-upright"]),"icon-offset":new $a(uo.layout_symbol["icon-offset"]),"icon-anchor":new $a(uo.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qa(uo.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qa(uo.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qa(uo.layout_symbol["text-rotation-alignment"]),"text-field":new $a(uo.layout_symbol["text-field"]),"text-font":new $a(uo.layout_symbol["text-font"]),"text-size":new $a(uo.layout_symbol["text-size"]),"text-max-width":new $a(uo.layout_symbol["text-max-width"]),"text-line-height":new Qa(uo.layout_symbol["text-line-height"]),"text-letter-spacing":new $a(uo.layout_symbol["text-letter-spacing"]),"text-justify":new $a(uo.layout_symbol["text-justify"]),"text-radial-offset":new $a(uo.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qa(uo.layout_symbol["text-variable-anchor"]),"text-anchor":new $a(uo.layout_symbol["text-anchor"]),"text-max-angle":new Qa(uo.layout_symbol["text-max-angle"]),"text-writing-mode":new Qa(uo.layout_symbol["text-writing-mode"]),"text-rotate":new $a(uo.layout_symbol["text-rotate"]),"text-padding":new Qa(uo.layout_symbol["text-padding"]),"text-keep-upright":new Qa(uo.layout_symbol["text-keep-upright"]),"text-transform":new $a(uo.layout_symbol["text-transform"]),"text-offset":new $a(uo.layout_symbol["text-offset"]),"text-allow-overlap":new Qa(uo.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qa(uo.layout_symbol["text-ignore-placement"]),"text-optional":new Qa(uo.layout_symbol["text-optional"])}),Cc={paint:new rs({"icon-opacity":new $a(uo.paint_symbol["icon-opacity"]),"icon-color":new $a(uo.paint_symbol["icon-color"]),"icon-halo-color":new $a(uo.paint_symbol["icon-halo-color"]),"icon-halo-width":new $a(uo.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $a(uo.paint_symbol["icon-halo-blur"]),"icon-translate":new Qa(uo.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qa(uo.paint_symbol["icon-translate-anchor"]),"text-opacity":new $a(uo.paint_symbol["text-opacity"]),"text-color":new $a(uo.paint_symbol["text-color"],{runtimeType:go,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new $a(uo.paint_symbol["text-halo-color"]),"text-halo-width":new $a(uo.paint_symbol["text-halo-width"]),"text-halo-blur":new $a(uo.paint_symbol["text-halo-blur"]),"text-translate":new Qa(uo.paint_symbol["text-translate"]),"text-translate-anchor":new Qa(uo.paint_symbol["text-translate-anchor"])}),layout:Ac},kc=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:ho,this.defaultValue=t};kc.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},kc.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},kc.prototype.outputDefined=function(){return!1},kc.prototype.serialize=function(){return null},_e("FormatSectionOverride",kc,{omit:["defaultValue"]});var Mc=function(t){function e(e){t.call(this,e,Cc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var i=[],o=0,a=r;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Ut(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?String(t[n]):""})}(e.properties,i)},e.prototype.createBucket=function(t){return new Tc(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=Cc.paint.overridableProperties;t<n.length;t+=1){var r=n[t];if(e.hasPaintOverride(this.layout,r)){var i,o=this.paint.get(r),a=new kc(o),s=new ga(a,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new ya("source",s):new _a("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new Ka(o.property,i,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),r=Cc.paint.properties[e],i=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r.overrides&&r.overrides.hasOverride(n[e]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Co)o(n.value.value.sections);else if("source"===n.value.kind){var a=function(t){i||(t instanceof Mo&&W(t.value)===xo?o(t.value.sections):t instanceof Ro?o(t.sections):t.eachChild(a))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i},e}(is),Pc={paint:new rs({"background-color":new Qa(uo.paint_background["background-color"]),"background-pattern":new es(uo.paint_background["background-pattern"]),"background-opacity":new Qa(uo.paint_background["background-opacity"])})},jc=function(t){function e(e){t.call(this,e,Pc)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(is),Ic={paint:new rs({"raster-opacity":new Qa(uo.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qa(uo.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qa(uo.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qa(uo.paint_raster["raster-brightness-max"]),"raster-saturation":new Qa(uo.paint_raster["raster-saturation"]),"raster-contrast":new Qa(uo.paint_raster["raster-contrast"]),"raster-resampling":new Qa(uo.paint_raster["raster-resampling"]),"raster-fade-duration":new Qa(uo.paint_raster["raster-fade-duration"])})},Rc=function(t){function e(e){t.call(this,e,Ic)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(is),Lc=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(is),Dc={circle:_u,heatmap:Su,hillshade:Tu,fill:Iu,"fill-extrusion":Vu,line:Qu,symbol:Mc,background:jc,raster:Rc},Nc=bi.HTMLImageElement,zc=bi.HTMLCanvasElement,Fc=bi.HTMLVideoElement,Bc=bi.ImageData,Uc=bi.ImageBitmap,Vc=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};Vc.prototype.update=function(t,e,n){var r=t.width,i=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,i],t instanceof Nc||t instanceof zc||t instanceof Fc||t instanceof Bc||Uc&&t instanceof Uc?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=n||{x:0,y:0},c=u.x,l=u.y;t instanceof Nc||t instanceof zc||t instanceof Fc||t instanceof Bc||Uc&&t instanceof Uc?s.texSubImage2D(s.TEXTURE_2D,0,c,l,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,c,l,r,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Vc.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Vc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Vc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Gc=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Gc.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){t._triggered=!1,t._callback()},0))},Gc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Hc=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},f(["receive","process"],this),this.invoker=new Gc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=_()?t:bi};Hc.prototype.send=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=x(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:we(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},Hc.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else _()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},Hc.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},Hc.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Ee(e.error)):r(null,Ee(e.data)))}else{var i=!1,o=x(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?we(e):null,data:we(r,o)},o)}:function(t){i=!0},s=null,u=Ee(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var c=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,c[0],u.source)[c[1]](u,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},Hc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Wc=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};Wc.prototype.setNorthEast=function(t){return this._ne=t instanceof qc?new qc(t.lng,t.lat):qc.convert(t),this},Wc.prototype.setSouthWest=function(t){return this._sw=t instanceof qc?new qc(t.lng,t.lat):qc.convert(t),this},Wc.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof qc)e=t,n=t;else{if(!(t instanceof Wc))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(Wc.convert(t)):this.extend(qc.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new qc(e.lng,e.lat),this._ne=new qc(n.lng,n.lat)),this},Wc.prototype.getCenter=function(){return new qc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Wc.prototype.getSouthWest=function(){return this._sw},Wc.prototype.getNorthEast=function(){return this._ne},Wc.prototype.getNorthWest=function(){return new qc(this.getWest(),this.getNorth())},Wc.prototype.getSouthEast=function(){return new qc(this.getEast(),this.getSouth())},Wc.prototype.getWest=function(){return this._sw.lng},Wc.prototype.getSouth=function(){return this._sw.lat},Wc.prototype.getEast=function(){return this._ne.lng},Wc.prototype.getNorth=function(){return this._ne.lat},Wc.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Wc.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Wc.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Wc.prototype.contains=function(t){var e=qc.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},Wc.convert=function(t){return!t||t instanceof Wc?t:new Wc(t)};var qc=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};qc.prototype.wrap=function(){return new qc(a(this.lng,-180,180),this.lat)},qc.prototype.toArray=function(){return[this.lng,this.lat]},qc.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},qc.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},qc.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new Wc(new qc(this.lng-n,this.lat-e),new qc(this.lng+n,this.lat+e))},qc.convert=function(t){if(t instanceof qc)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new qc(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new qc(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Zc=2*Math.PI*6371008.8,Xc=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};Xc.fromLngLat=function(t,e){void 0===e&&(e=0);var n=qc.convert(t);return new Xc(ai(n.lng),si(n.lat),ui(e,n.lat))},Xc.prototype.toLngLat=function(){return new qc(360*this.x-180,ci(this.y))},Xc.prototype.toAltitude=function(){return this.z*oi(ci(this.y))},Xc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Zc*(t=ci(this.y),1/Math.cos(t*Math.PI/180));var t};var Yc=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=li(0,t,t,e,n)};Yc.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Yc.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=ii(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=ii(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Yc.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new vi(8192*(t.x*e-this.x),8192*(t.y*e-this.y))},Yc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Kc=function(t,e){this.wrap=t,this.canonical=e,this.key=li(t,e.z,e.z,e.x,e.y)},Jc=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Yc(n,+r,+i),this.key=li(e,t,n,r,i)};Jc.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Jc.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Jc(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Jc(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Jc.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?li(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):li(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Jc.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Jc.prototype.children=function(t){if(this.overscaledZ>=t)return[new Jc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Jc(e,this.wrap,e,n,r),new Jc(e,this.wrap,e,n+1,r),new Jc(e,this.wrap,e,n,r+1),new Jc(e,this.wrap,e,n+1,r+1)]},Jc.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Jc.prototype.wrapped=function(){return new Jc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Jc.prototype.unwrapTo=function(t){return new Jc(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Jc.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Jc.prototype.toUnwrapped=function(){return new Kc(this.wrap,this.canonical)},Jc.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Jc.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Xc(t.x-this.wrap,t.y))},_e("CanonicalTileID",Yc),_e("OverscaledTileID",Jc,{omit:["posMatrix"]});var Qc=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return m('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Qc.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Qc.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Qc.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Qc.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Qc.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Qc.prototype.getPixels=function(){return new wu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Qc.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,c=o;c<a;c++)for(var l=r;l<i;l++)this.data[this._idx(l,c)]=t.data[this._idx(l+s,c+u)]},_e("DEMData",Qc);var $c=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};$c.prototype.encode=function(t){return this._stringToNumber[t]},$c.prototype.decode=function(t){return this._numberToString[t]};var tl=function(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i},el={geometry:{configurable:!0}};el.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},el.geometry.set=function(t){this._geometry=t},tl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(tl.prototype,el);var nl=function(){this.state={},this.stateChanges={},this.deletedStates={}};nl.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},s(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},nl.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},nl.prototype.getState=function(t,e){var n=String(e),r=s({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},nl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},nl.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),s(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var u={};if(null===this.deletedStates[a])for(var c in this.state[a])u[c]={},this.state[a][c]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var f=0,h=Object.keys(this.deletedStates[a][l]);f<h.length;f+=1)delete this.state[a][l][h[f]];u[l]=this.state[a][l]}n[a]=n[a]||{},s(n[a],u)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var p in t)t[p].setFeatureState(n,e)};var rl=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Ca(8192,16,0),this.grid3D=new Ca(8192,16,0),this.featureIndexArray=new Fs,this.promoteId=e};rl.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var c=e[u],l=[1/0,1/0,-1/0,-1/0],f=0;f<c.length;f++){var h=c[f];l[0]=Math.min(l[0],h.x),l[1]=Math.min(l[1],h.y),l[2]=Math.max(l[2],h.x),l[3]=Math.max(l[3],h.y)}l[0]<8192&&l[1]<8192&&l[2]>=0&&l[3]>=0&&s.insert(a,l[0],l[1],l[2],l[3])}},rl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Nu.VectorTile(new sc(this.rawTileData)).layers,this.sourceLayerCoder=new $c(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},rl.prototype.query=function(t,e,n,r){var i=this;this.loadVTLayers();for(var o=t.params||{},a=8192/t.tileSize/t.scale,s=Jt(o.filter),u=t.queryGeometry,c=t.queryPadding*a,l=hi(u),f=this.grid.query(l.minX-c,l.minY-c,l.maxX+c,l.maxY+c),h=hi(t.cameraQueryGeometry),p=this.grid3D.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c,function(e,n,r,i){return function(t,e,n,r,i){for(var o=0,a=t;o<a.length;o+=1){var s=a[o];if(e<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}var u=[new vi(e,n),new vi(e,i),new vi(r,i),new vi(r,n)];if(t.length>2)for(var c=0,l=u;c<l.length;c+=1)if(Je(t,l[c]))return!0;for(var f=0;f<t.length-1;f++)if(Qe(t[f],t[f+1],u))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,r+c,i+c)}),d=0,v=p;d<v.length;d+=1)f.push(v[d]);f.sort(pi);for(var m,g={},y=0;y<f.length;y++)!function(c){var l=f[c];if(l!==m){m=l;var h=i.featureIndexArray.get(l),p=null;i.loadMatchingFeature(g,h.bucketIndex,h.sourceLayerIndex,h.featureIndex,s,o.layers,o.availableImages,e,n,r,function(e,n,r){return p||(p=Fe(e)),n.queryIntersectsFeature(u,e,r,p,i.z,t.transform,a,t.pixelPosMatrix)})}}(y);return g},rl.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,u,c,l,f){var h=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,h)){var p=this.sourceLayerCoder.decode(n),d=this.vtLayers[p].feature(r);if(i.needGeometry){var v=Be(d,!0);if(!i.filter(new Ga(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!i.filter(new Ga(this.tileID.overscaledZ),d))return;for(var m=this.getId(d,p),g=0;g<h.length;g++){var y=h[g];if(!(o&&o.indexOf(y)<0)){var _=u[y];if(_){var b={};void 0!==m&&l&&(b=l.getState(_.sourceLayer||"_geojsonTileLayer",m));var x=s({},c[y]);x.paint=fi(x.paint,_.paint,d,b,a),x.layout=fi(x.layout,_.layout,d,b,a);var w=!f||f(d,_,b);if(w){var E=new tl(d,this.z,this.x,this.y,m);E.layer=x;var S=t[y];void 0===S&&(S=t[y]=[]),S.push({featureIndex:r,feature:E,intersectionZ:w})}}}}}},rl.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o,a,s){var u={};this.loadVTLayers();for(var c=Jt(i),l=0,f=t;l<f.length;l+=1)this.loadMatchingFeature(u,n,r,f[l],c,o,a,s,e);return u},rl.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},rl.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},_e("FeatureIndex",rl,{omit:["rawTileData","sourceLayerCoder"]});var il=function(t,e){this.tileID=t,this.uid=u(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};il.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<ki.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},il.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},il.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=0,i=t;r<i.length;r+=1)!function(){var t=i[r],o=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==o.length){t.layers=o,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return o.filter(function(e){return e.id===t})[0]}));for(var a=0,s=o;a<s.length;a+=1)n[s[a].id]=t}}();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof Tc){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof Tc&&a.hasRTLText){this.hasRTLText=!0,Va.isLoading()||Va.isLoaded()||"deferred"!==Ba()||Ua();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Ps},il.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},il.prototype.getBucket=function(t){return this.buckets[t.id]},il.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Vc(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Vc(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},il.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},il.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,n):{}},il.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=Jt(e&&e.filter),s=this.tileID.canonical,u=s.z,c=s.x,l=s.y,f={z:u,x:c,y:l},h=0;h<o.length;h++){var p=o.feature(h);if(a.needGeometry){var d=Be(p,!0);if(!a.filter(new Ga(this.tileID.overscaledZ),d,this.tileID.canonical))continue}else if(!a.filter(new Ga(this.tileID.overscaledZ),p))continue;var v=n.getId(p,i),m=new tl(p,u,c,l,v);m.tile=f,t.push(m)}}},il.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},il.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},il.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=b(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},il.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},il.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];if(a&&s&&0!==Object.keys(s).length){i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});var u=e&&e.style&&e.style.getLayer(r);u&&(this.queryPadding=Math.max(this.queryPadding,u.queryRadius(i)))}}}},il.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},il.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ki.now()},il.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},il.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=ki.now()+t},il.prototype.setDependencies=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[t]=n},il.prototype.hasDependency=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,a=e;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var ol=bi.performance,al=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},ol.mark(this._marks.start)};al.prototype.finish=function(){ol.mark(this._marks.end);var t=ol.getEntriesByName(this._marks.measure);return 0===t.length&&(ol.measure(this._marks.measure,this._marks.start,this._marks.end),t=ol.getEntriesByName(this._marks.measure),ol.clearMarks(this._marks.start),ol.clearMarks(this._marks.end),ol.clearMeasures(this._marks.measure)),t},t.Actor=Hc,t.AlphaImage=xu,t.CanonicalTileID=Yc,t.CollisionBoxArray=Ps,t.Color=Oo,t.DEMData=Qc,t.DataConstantProperty=Qa,t.DictionaryCoder=$c,t.EXTENT=8192,t.ErrorEvent=ao,t.EvaluationParameters=Ga,t.Event=oo,t.Evented=so,t.FeatureIndex=rl,t.FillBucket=Mu,t.FillExtrusionBucket=Bu,t.ImageAtlas=fc,t.ImagePosition=cc,t.LineBucket=Xu,t.LngLat=qc,t.LngLatBounds=Wc,t.MercatorCoordinate=Xc,t.ONE_EM=24,t.OverscaledTileID=Jc,t.Point=vi,t.Point$1=vi,t.Properties=rs,t.Protobuf=sc,t.RGBAImage=wu,t.RequestManager=Ri,t.RequestPerformance=al,t.ResourceType=Yi,t.SegmentVector=Us,t.SourceFeatureState=nl,t.StructArrayLayout1ui2=Cs,t.StructArrayLayout2f1f2i16=_s,t.StructArrayLayout2i4=us,t.StructArrayLayout3ui6=xs,t.StructArrayLayout4i8=cs,t.SymbolBucket=Tc,t.Texture=Vc,t.Tile=il,t.Transitionable=qa,t.Uniform1f=Js,t.Uniform1i=Ks,t.Uniform2f=Qs,t.Uniform3f=$s,t.Uniform4f=tu,t.UniformColor=eu,t.UniformMatrix4f=ru,t.UnwrappedTileID=Kc,t.ValidationError=co,t.WritingMode=hc,t.ZoomHistory=Ia,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=ni,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)})})},t.bezier=i,t.bindAll=f,t.browser=ki,t.cacheEntryPossiblyAdded=function(t){++Xi>Zi&&(t.getActor().send("enforceCacheSizeLimit",qi),Xi=0)},t.clamp=o,t.clearTileCache=function(t){var e=bi.caches.delete("mapbox-tiles");t&&e.catch(t).then(function(){return t()})},t.clipLine=Br,t.clone=function(t){var e=new mu(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=v,t.clone$2=function(t){var e=new mu(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.collisionCircleLayout=rc,t.config=Mi,t.create=function(){var t=new mu(16);return mu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new mu(9);return mu!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new mu(4);return mu!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Vt,t.createLayout=Pe,t.createStyleLayer=function(t){return"custom"===t.type?new Lc(t):new Dc[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=wi,t.emitValidationErrors=ge,t.endsWith=h,t.enforceCacheSizeLimit=function(t){k(),zi&&zi.then(function(e){e.keys().then(function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])})})},t.evaluateSizeForFeature=jr,t.evaluateSizeForZoom=Ir,t.evaluateVariableOffset=Kr,t.evented=Fa,t.extend=s,t.featureFilter=Jt,t.filterObject=d,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Cr,t.getAnchorJustification=Jr,t.getArrayBuffer=eo,t.getImage=io,t.getJSON=function(t,e){return to(s(t,{type:"json"}),e)},t.getRTLTextPluginStatus=Ba,t.getReferrer=$i,t.getVideo=function(t,e){var n,r,i=bi.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=bi.document.createElement("source");n=t[o],r=void 0,(r=bi.document.createElement("a")).href=n,(r.protocol!==bi.document.location.protocol||r.host!==bi.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.identity=nn,t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],g=e[15],y=n*s-r*a,_=n*u-i*a,b=n*c-o*a,x=r*u-i*s,w=r*c-o*s,E=i*c-o*u,S=l*v-f*d,O=l*m-h*d,T=l*g-p*d,A=f*m-h*v,C=f*g-p*v,k=h*g-p*m,M=y*k-_*C+b*A+x*T-w*O+E*S;return M?(t[0]=(s*k-u*C+c*A)*(M=1/M),t[1]=(i*C-r*k-o*A)*M,t[2]=(v*E-m*w+g*x)*M,t[3]=(h*w-f*E-p*x)*M,t[4]=(u*T-a*k-c*O)*M,t[5]=(n*k-i*T+o*O)*M,t[6]=(m*b-d*E-g*_)*M,t[7]=(l*E-h*b+p*_)*M,t[8]=(a*C-s*T+c*S)*M,t[9]=(r*T-n*C-o*S)*M,t[10]=(d*w-v*b+g*y)*M,t[11]=(f*b-l*w-p*y)*M,t[12]=(s*O-a*A-u*S)*M,t[13]=(n*A-r*O+i*S)*M,t[14]=(v*_-d*x-m*y)*M,t[15]=(l*x-f*_+h*y)*M,t):null},t.isChar=Ra,t.isMapboxURL=S,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.makeRequest=to,t.mapObject=p,t.mercatorXfromLng=ai,t.mercatorYfromLat=si,t.mercatorZfromAltitude=ui,t.mul=yu,t.multiply=rn,t.mvt=Nu,t.nextPowerOfTwo=function(t){return t<=1?1:Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=ht,t.offscreenCanvasSupported=P,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},t.parseGlyphPBF=function(t){return new sc(t).readFields(yr,[])},t.pbf=sc,t.performSymbolLayout=function(t,e,n,r,i,o,a){t.createArrays(),t.tilePixelRatio=8192/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,u=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var l=t.textSizeData,f=l.maxZoom;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new Ga(l.minZoom),a),u["text-size"].possiblyEvaluate(new Ga(f),a)]}if("composite"===t.iconSizeData.kind){var h=t.iconSizeData,p=h.maxZoom;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new Ga(h.minZoom),a),u["icon-size"].possiblyEvaluate(new Ga(p),a)]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new Ga(t.zoom+1),a),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new Ga(t.zoom+1),a),c.textMaxSize=u["text-size"].possiblyEvaluate(new Ga(18));for(var d=24*s.get("text-line-height"),v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),y=s.get("text-size"),_=0,b=t.features;_<b.length;_+=1)!function(){var o=b[_],u=s.get("text-font").evaluate(o,{},a).join(","),l=y.evaluate(o,{},a),f=c.layoutTextSize.evaluate(o,{},a),h=c.layoutIconSize.evaluate(o,{},a),p={horizontal:{},vertical:void 0},x=o.text,w=[0,0];if(x){var E=x.toString(),S=24*s.get("text-letter-spacing").evaluate(o,{},a),O=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r=n[e].charCodeAt(0),Ra.Arabic(r)||Ra["Arabic Supplement"](r)||Ra["Arabic Extended-A"](r)||Ra["Arabic Presentation Forms-A"](r)||Ra["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(E)?S:0,T=s.get("text-anchor").evaluate(o,{},a),A=s.get("text-variable-anchor");if(!A){var C=s.get("text-radial-offset").evaluate(o,{},a);w=C?Kr(T,[24*C,xc]):s.get("text-offset").evaluate(o,{},a).map(function(t){return 24*t})}var k=v?"center":s.get("text-justify").evaluate(o,{},a),M=s.get("symbol-placement"),P="point"===M?24*s.get("text-max-width").evaluate(o,{},a):0,j=function(){t.allowVerticalPlacement&&Se(E)&&(p.vertical=wr(x,e,n,i,u,P,d,T,"left",O,w,hc.vertical,!0,M,f,l))};if(!v&&A){for(var I="auto"===k?A.map(function(t){return Jr(t)}):[k],R=!1,L=0;L<I.length;L++){var D=I[L];if(!p.horizontal[D])if(R)p.horizontal[D]=p.horizontal[0];else{var N=wr(x,e,n,i,u,P,d,"center",D,O,w,hc.horizontal,!1,M,f,l);N&&(p.horizontal[D]=N,R=1===N.positionedLines.length)}}j()}else{"auto"===k&&(k=Jr(T));var z=wr(x,e,n,i,u,P,d,T,k,O,w,hc.horizontal,!1,M,f,l);z&&(p.horizontal[k]=z),j(),Se(E)&&v&&g&&(p.vertical=wr(x,e,n,i,u,P,d,T,k,O,w,hc.vertical,!1,M,f,l))}}var F=void 0,B=!1;if(o.icon&&o.icon.name){var U=r[o.icon.name];U&&(F=function(t,e,n){var r=Cr(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(i[o.icon.name],s.get("icon-offset").evaluate(o,{},a),s.get("icon-anchor").evaluate(o,{},a)),B=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&m("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var V=$r(p.horizontal)||p.vertical;t.iconsInText=!!V&&V.iconsInText,(V||F)&&function(t,e,n,r,i,o,a,s,u,c,l){var f=o.textMaxSize.evaluate(e,{});void 0===f&&(f=a);var h,p=t.layers[0].layout,d=p.get("icon-offset").evaluate(e,{},l),v=$r(n.horizontal),g=a/24,y=t.tilePixelRatio*g,_=t.tilePixelRatio*f/24,b=t.tilePixelRatio*s,x=t.tilePixelRatio*p.get("symbol-spacing"),w=p.get("text-padding")*t.tilePixelRatio,E=p.get("icon-padding")*t.tilePixelRatio,S=p.get("text-max-angle")/180*Math.PI,O="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),T="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),A=p.get("symbol-placement"),C=x/2,k=p.get("icon-text-fit");r&&"none"!==k&&(t.allowVerticalPlacement&&n.vertical&&(h=Mr(r,n.vertical,k,p.get("icon-text-fit-padding"),d,g)),v&&(r=Mr(r,v,k,p.get("icon-text-fit-padding"),d,g)));var M=function(s,f){f.x<0||f.x>=8192||f.y<0||f.y>=8192||function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,g,y,_,b,x,w,E,S,O){var T,A,C,k,M,P=t.addToLineVertexArray(e,n),j=0,I=0,R=0,L=0,D=-1,N=-1,z={},F=Ws(""),B=0,U=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(B=(T=s.layout.get("text-offset").evaluate(x,{},S).map(function(t){return 24*t}))[0],U=T[1]):(B=24*s.layout.get("text-radial-offset").evaluate(x,{},S),U=xc),t.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(x,{},S)+90;k=new _c(u,e,c,l,f,r.vertical,h,p,d,V),a&&(M=new _c(u,e,c,l,f,a,g,y,d,V))}if(i){var G=s.layout.get("icon-rotate").evaluate(x,{}),H="none"!==s.layout.get("icon-text-fit"),W=Ur(i,G,E,H),q=a?Ur(a,G,E,H):void 0;C=new _c(u,e,c,l,f,i,g,y,!1,G),j=4*W.length;var Z=t.iconSizeData,X=null;"source"===Z.kind?(X=[128*s.layout.get("icon-size").evaluate(x,{})])[0]>32640&&m(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Z.kind&&((X=[128*w.compositeIconSizes[0].evaluate(x,{},S),128*w.compositeIconSizes[1].evaluate(x,{},S)])[0]>32640||X[1]>32640)&&m(t.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),t.addSymbols(t.icon,W,X,b,_,x,!1,e,P.lineStartIndex,P.lineLength,-1,S),D=t.icon.placedSymbolArray.length-1,q&&(I=4*q.length,t.addSymbols(t.icon,q,X,b,_,x,hc.vertical,e,P.lineStartIndex,P.lineLength,-1,S),N=t.icon.placedSymbolArray.length-1)}for(var Y in r.horizontal){var K=r.horizontal[Y];if(!A){F=Ws(K.text);var J=s.layout.get("text-rotate").evaluate(x,{},S);A=new _c(u,e,c,l,f,K,h,p,d,J)}var Q=1===K.positionedLines.length;if(R+=Qr(t,e,K,o,s,d,x,v,P,r.vertical?hc.horizontal:hc.horizontalOnly,Q?Object.keys(r.horizontal):[Y],z,D,w,S),Q)break}r.vertical&&(L+=Qr(t,e,r.vertical,o,s,d,x,v,P,hc.vertical,["vertical"],z,N,w,S));var $=A?A.boxStartIndex:t.collisionBoxArray.length,tt=A?A.boxEndIndex:t.collisionBoxArray.length,et=k?k.boxStartIndex:t.collisionBoxArray.length,nt=k?k.boxEndIndex:t.collisionBoxArray.length,rt=C?C.boxStartIndex:t.collisionBoxArray.length,it=C?C.boxEndIndex:t.collisionBoxArray.length,ot=M?M.boxStartIndex:t.collisionBoxArray.length,at=M?M.boxEndIndex:t.collisionBoxArray.length,st=-1,ut=function(t,e){return t&&t.circleDiameter?Math.max(t.circleDiameter,e):e};st=ut(A,st),st=ut(k,st),st=ut(C,st);var ct=(st=ut(M,st))>-1?1:0;ct&&(st*=O/24),t.glyphOffsetArray.length>=Tc.MAX_GLYPHS&&m("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical||-1,D,N,F,$,tt,et,nt,rt,it,ot,at,c,R,L,j,I,ct,0,h,B,U,st)}(t,f,s,n,r,i,h,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,y,w,O,u,b,E,T,d,e,o,c,l,a)};if("line"===A)for(var P=0,j=Br(e.geometry,0,0,8192,8192);P<j.length;P+=1)for(var I=j[P],R=0,L=Fr(I,x,S,n.vertical||v,r,24,_,t.overscaling,8192);R<L.length;R+=1){var D=L[R];v&&ti(t,v.text,C,D)||M(I,D)}else if("line-center"===A)for(var N=0,z=e.geometry;N<z.length;N+=1){var F=z[N];if(F.length>1){var B=zr(F,S,n.vertical||v,r,24,_);B&&M(F,B)}}else if("Polygon"===e.type)for(var U=0,V=Bn(e.geometry,0);U<V.length;U+=1){var G=V[U],H=Zr(G,16);M(G[0],new gc(H.x,H.y,0))}else if("LineString"===e.type)for(var W=0,q=e.geometry;W<q.length;W+=1){var Z=q[W];M(Z,new gc(Z[0].x,Z[0].y,0))}else if("Point"===e.type)for(var X=0,Y=e.geometry;X<Y.length;X+=1)for(var K=0,J=Y[X];K<J.length;K+=1){var Q=J[K];M([Q],new gc(Q.x,Q.y,0))}}(t,o,p,F,r,c,f,h,w,B,a)}();o&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=Va,t.polygonIntersectsPolygon=Ve,t.postMapLoadEvent=Wi,t.postTurnstileEvent=Gi,t.potpack=xr,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=_e,t.registerForPluginStateChange=function(t){return t({pluginStatus:Da,pluginURL:Na}),Fa.on("pluginStateChange",t),t},t.renderColorRamp=ln,t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){qi=t,Zi=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===Da||"loading"===Da||"loaded"===Da)throw new Error("setRTLTextPlugin cannot be called multiple times.");Na=ki.resolveURL(t),Da="deferred",La=e,Me(),n||Ua()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=uo,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=yc,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=on,t.translate=function(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,v=n[0],m=n[1],g=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*g+e[12],t[13]=e[1]*v+e[5]*m+e[9]*g+e[13],t[14]=e[2]*v+e[6]*m+e[10]*g+e[14],t[15]=e[3]*v+e[7]*m+e[11]*g+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*g+e[12],t[13]=i*v+u*m+h*g+e[13],t[14]=o*v+c*m+p*g+e[14],t[15]=a*v+l*m+d*g+e[15]),t},t.triggerPluginCompletionEvent=za,t.uniqueId=u,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Oa,t.validateStyle=Sa,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=Nu,t.version="1.13.3",t.warnOnce=m,t.webpSupported=Pi,t.window=bi,t.wrap=a}),t(["./shared"],function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}function r(e,n,r){for(var i=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(i,r)}function i(e,n){var r=t.getArrayBuffer(e.request,function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})});return function(){r.cancel(),n()}}function o(t,e){if(0!==t.length){a(t[0],e);for(var n=1;n<t.length;n++)a(t[n],!e)}}function a(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var s=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!=!!e&&t.reverse()}function s(t,e){this.options=e||{},this.features=t,this.length=t.length}function u(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}function c(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,l,t.layers[n])}(e,n),n.finish()}function l(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,f,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,m,o[n])}function f(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,h,t),e.writeVarintField(3,n.type),e.writeMessage(4,v,n)}function h(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var c=n.properties[s],l=typeof c;"string"!==l&&"boolean"!==l&&"number"!==l&&(c=JSON.stringify(c));var f=l+":"+c,h=a[f];void 0===h&&(i.push(c),a[f]=h=i.length-1),e.writeVarint(h)}}function p(t,e){return(e<<3)+(7&t)}function d(t){return t<<1^t>>31}function v(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],c=1;1===r&&(c=u.length),e.writeVarint(p(1,c));for(var l=3===r?u.length-1:u.length,f=0;f<l;f++){1===f&&1!==r&&e.writeVarint(p(2,l-1));var h=u[f].x-i,v=u[f].y-o;e.writeVarint(d(h)),e.writeVarint(d(v)),i+=h,o+=v}3===r&&e.writeVarint(p(7,1))}}function m(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function g(t,e,n,r){y(t,n,r),y(e,2*n,2*r),y(e,2*n+1,2*r+1)}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}function b(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function x(t,e){var n=t.geometry.coordinates,r=n[1];return{x:S(n[0]),y:O(r),zoom:1/0,index:e,parentId:-1}}function w(t){return{type:"Feature",id:t.id,properties:E(t),geometry:{type:"Point",coordinates:[360*(t.x-.5),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n}function E(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return T(T({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function S(t){return t/360+.5}function O(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function T(t,e){for(var n in e)t[n]=e[n];return t}function A(t){return t.x}function C(t){return t.y}function k(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function M(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)P(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)P(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)P(t,e[r][i])}(i),i}function P(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function j(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)I(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)I(i[c],s);else if("LineString"===o)R(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)R(i[c],s=[],a,!1),t.push(M(u,"LineString",s,e.properties));return}L(i,s,a,!1)}else if("Polygon"===o)L(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<e.geometry.geometries.length;c++)j(t,{id:u,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];L(i[c],l,a,!0),s.push(l)}}t.push(M(u,o,s,e.properties))}}function I(t,e){e.push(D(t[0])),e.push(N(t[1])),e.push(0)}function R(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=D(t[s][0]),c=N(t[s][1]);e.push(u),e.push(c),e.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,c=e[n],l=e[n+1],f=e[r],h=e[r+1],p=n+3;p<r;p+=3){var d=k(e[p],e[p+1],c,l,f,h);if(d>a)o=p,a=d;else if(d===a){var v=Math.abs(p-s);v<u&&(o=p,u=v)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,l,n),e[l+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function L(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];R(t[i],o,n,r),e.push(o)}}function D(t){return t/360+.5}function N(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function z(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],c=0;c<t.length;c++){var l=t[c],f=l.geometry,h=l.type,p=0===i?l.minX:l.minY,d=0===i?l.maxX:l.maxY;if(p>=n&&d<r)u.push(l);else if(!(d<n||p>=r)){var v=[];if("Point"===h||"MultiPoint"===h)F(f,v,n,r,i);else if("LineString"===h)B(f,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)V(f,v,n,r,i,!1);else if("Polygon"===h)V(f,v,n,r,i,!0);else if("MultiPolygon"===h)for(var m=0;m<f.length;m++){var g=[];V(f[m],g,n,r,i,!0),g.length&&v.push(g)}if(v.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<v.length;m++)u.push(M(l.id,h,v[m],l.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===v.length?(h="LineString",v=v[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===v.length?"Point":"MultiPoint"),u.push(M(l.id,h,v,l.tags))}}}return u.length?u:null}function F(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function B(t,e,n,r,i,o,a){for(var s,u,c=U(t),l=0===i?H:W,f=t.start,h=0;h<t.length-3;h+=3){var p=t[h],d=t[h+1],v=t[h+2],m=t[h+3],g=t[h+4],y=0===i?p:d,_=0===i?m:g,b=!1;a&&(s=Math.sqrt(Math.pow(p-m,2)+Math.pow(d-g,2))),y<n?_>n&&(u=l(c,p,d,m,g,n),a&&(c.start=f+s*u)):y>r?_<r&&(u=l(c,p,d,m,g,r),a&&(c.start=f+s*u)):G(c,p,d,v),_<n&&y>=n&&(u=l(c,p,d,m,g,n),b=!0),_>r&&y<=r&&(u=l(c,p,d,m,g,r),b=!0),!o&&b&&(a&&(c.end=f+s*u),e.push(c),c=U(t)),a&&(f+=s)}var x=t.length-3;p=t[x],d=t[x+1],v=t[x+2],(y=0===i?p:d)>=n&&y<=r&&G(c,p,d,v),x=c.length-3,o&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&G(c,c[0],c[1],c[2]),c.length&&e.push(c)}function U(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function V(t,e,n,r,i,o){for(var a=0;a<t.length;a++)B(t[a],e,n,r,i,o,!1)}function G(t,e,n,r){t.push(e),t.push(n),t.push(r)}function H(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function W(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function q(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=Z(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(Z(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(Z(o.geometry[s][c],e));i.push(u)}n.push(M(o.id,a,i,o.tags))}return n}function Z(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function X(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(Y(c[r],c[r+1],e,o,a,s));else for(r=0;r<c.length;r++){var f=[];for(i=0;i<c[r].length;i+=2)f.push(Y(c[r][i],c[r][i+1],e,o,a,s));u.geometry.push(f)}}return t.transformed=!0,t}function Y(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function K(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,J(a,t[s],o,i);var u=t[s].minX,c=t[s].minY,l=t[s].maxX,f=t[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),f>a.maxY&&(a.maxY=f)}return a}function J(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)Q(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)Q(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)Q(a,c[s],t,n,!0,0===s)}if(a.length){var l=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in l={},e.tags)l[f]=e.tags[f];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==e.id&&(h.id=e.id),t.features.push(h)}}function Q(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function $(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)j(n,t.features[r],e,r);else j(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=z(t,1,-1-n,n,0,-1,2,e),o=z(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=z(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=q(i,1).concat(r)),o&&(r=r.concat(q(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tt(t,e,n){return 32*((1<<t)*n+e)+t}function et(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new lt(r.features),o=pt(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}var nt=function(t){this.keyCache={},t&&this.replace(t)};nt.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},nt.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var c=0,l=r;c<l.length;c+=1){var f=l[c];delete this.keyCache[f],delete this._layerConfigs[f],delete this._layers[f]}this.familiesBySource={};for(var h=0,p=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var u in r)s.push(r[u]);return s}(t.values(this._layerConfigs),this.keyCache);h<p.length;h+=1){var d=p[h].map(function(t){return i._layers[t.id]}),v=d[0];if("none"!==v.visibility){var m=v.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var y=v.sourceLayer||"_geojsonTileLayer",_=g[y];_||(_=g[y]=[]),_.push(d)}}};var rt=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var c={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(c),a[s]={rect:c,metrics:u.metrics}}}}var l=t.potpack(r),f=new t.AlphaImage({width:l.w||1,height:l.h||1});for(var h in e){var p=e[h];for(var d in p){var v=p[+d];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var m=n[h][d].rect;t.AlphaImage.copy(v.bitmap,f,{x:0,y:0},{x:m.x+1,y:m.y+1},v.bitmap)}}}this.image=f,this.positions=n};t.register("GlyphAtlas",rt);var it=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};it.prototype.parse=function(e,n,i,o,a){function s(){if(f)return a(f);if(h&&p&&d){var e=new rt(h),n=new t.ImageAtlas(p,d);for(var o in v){var s=v[o];s instanceof t.SymbolBucket?(r(s.layers,this.zoom,i),t.performSymbolLayout(s,h,e.positions,p,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):s.hasPattern&&(s instanceof t.LineBucket||s instanceof t.FillBucket||s instanceof t.FillExtrusionBucket)&&(r(s.layers,this.zoom,i),s.addFeatures(m,this.tileID.canonical,n.patternPositions))}this.status="done",a(null,{buckets:t.values(v).filter(function(t){return!t.isEmpty()}),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var c=new t.DictionaryCoder(Object.keys(e.layers).sort()),l=new t.FeatureIndex(this.tileID,this.promoteId);l.bucketLayerIDs=[];var f,h,p,d,v={},m={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},g=n.familiesBySource[this.source];for(var y in g){var _=e.layers[y];if(_){1===_.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=c.encode(y),x=[],w=0;w<_.length;w++){var E=_.feature(w),S=l.getId(E,y);x.push({feature:E,id:S,index:w,sourceLayerIndex:b})}for(var O=0,T=g[y];O<T.length;O+=1){var A=T[O],C=A[0];C.minzoom&&this.zoom<Math.floor(C.minzoom)||C.maxzoom&&this.zoom>=C.maxzoom||"none"!==C.visibility&&(r(A,this.zoom,i),(v[C.id]=C.createBucket({index:l.bucketLayerIDs.length,layers:A,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,m,this.tileID.canonical),l.bucketLayerIDs.push(A.map(function(t){return t.id})))}}}var k=t.mapObject(m.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(k).length?o.send("getGlyphs",{uid:this.uid,stacks:k},function(t,e){f||(f=t,h=e,s.call(u))}):h={};var M=Object.keys(m.iconDependencies);M.length?o.send("getImages",{icons:M,source:this.source,tileID:this.tileID,type:"icons"},function(t,e){f||(f=t,p=e,s.call(u))}):p={};var P=Object.keys(m.patternDependencies);P.length?o.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"patterns"},function(t,e){f||(f=t,d=e,s.call(u))}):d={},s.call(this)};var ot=function(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||i,this.loading={},this.loaded={}};ot.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var o=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),a=this.loading[i]=new it(e);a.abort=this.loadVectorData(e,function(e,s){if(delete r.loading[i],e||!s)return a.status="done",r.loaded[i]=a,n(e);var u=s.rawData,c={};s.expires&&(c.expires=s.expires),s.cacheControl&&(c.cacheControl=s.cacheControl);var l={};if(o){var f=o.finish();f&&(l.resourceTiming=JSON.parse(JSON.stringify(f)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,r.layerIndex,r.availableImages,r.actor,function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,c,l))}),r.loaded=r.loaded||{},r.loaded[i]=a})},ot.prototype.reloadTile=function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},ot.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},ot.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var at=t.window.ImageBitmap,st=function(){this.loaded={}};st.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=at&&o instanceof at?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},st.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},st.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var ut=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,ct=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};ct.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],c=0,l=s[a];c<l.length;c+=1){var f=l[c];u.push(new t.Point$1(f[0],f[1]))}o.push(u)}return o},ct.prototype.toGeoJSON=function(t,e,n){return ut.call(this,t,e,n)};var lt=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};lt.prototype.feature=function(t){return new ct(this._features[t])};var ft=t.vectorTile.VectorTileFeature,ht=s;s.prototype.feature=function(t){return new u(this.features[t],this.options.extent)},u.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},u.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},u.prototype.toGeoJSON=ft.prototype.toGeoJSON;var pt=c,dt=ht;pt.fromVectorTileJs=c,pt.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new ht(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return c({layers:n})},pt.GeoJSONWrapper=dt;var vt=function(t){return t[0]},mt=function(t){return t[1]},gt=function(t,e,n,r,i){void 0===e&&(e=vt),void 0===n&&(n=mt),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,c=Math.log(s),l=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*l*(s-l)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*l/s+f)),Math.min(o,Math.floor(r+(s-u)*l/s+f)),a)}var h=n[2*r+a],p=i,d=o;for(g(e,n,i,r),n[2*o+a]>h&&g(e,n,i,o);p<d;){for(g(e,n,p,d),p++,d--;n[2*p+a]<h;)p++;for(;n[2*d+a]>h;)d--}n[2*i+a]===h?g(e,n,i,d):g(e,n,++d,o),d<=r&&(i=d+1),r<=d&&(o=d-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};gt.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,c=[0,t.length-1,0],l=[];c.length;){var f=c.pop(),h=c.pop(),p=c.pop();if(h-p<=a)for(var d=p;d<=h;d++)u=e[2*d+1],(s=e[2*d])>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((p+h)/2);u=e[2*v+1],(s=e[2*v])>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(p),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(h),c.push(m))}}return l}(this.ids,this.coords,t,e,n,r,this.nodeSize)},gt.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var c=a.pop(),l=a.pop(),f=a.pop();if(l-f<=o)for(var h=f;h<=l;h++)_(e[2*h],e[2*h+1],n,r)<=u&&s.push(t[h]);else{var p=Math.floor((f+l)/2),d=e[2*p],v=e[2*p+1];_(d,v,n,r)<=u&&s.push(t[p]);var m=(c+1)%2;(0===c?n-i<=d:r-i<=v)&&(a.push(f),a.push(p-1),a.push(m)),(0===c?n+i>=d:r+i>=v)&&(a.push(p+1),a.push(l),a.push(m))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},_t=function(t){this.options=T(Object.create(yt),t),this.trees=new Array(this.options.maxZoom+1)};_t.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(x(t[u],u));this.trees[i+1]=new gt(s,A,C,o,Float32Array),n&&console.timeEnd(a);for(var c=i;c>=r;c--){var l=+Date.now();s=this._cluster(s,c),this.trees[c]=new gt(s,A,C,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",c,s.length,+Date.now()-l)}return n&&console.timeEnd("total time"),this},_t.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],c=[],l=0,f=u.range(S(n),O(o),S(i),O(r));l<f.length;l+=1){var h=u.points[f[l]];c.push(h.numPoints?w(h):this.points[h.index])}return c},_t.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,c=i.within(o.x,o.y,a);u<c.length;u+=1){var l=i.points[c[u]];l.parentId===t&&s.push(l.numPoints?w(l):this.points[l.index])}if(0===s.length)throw new Error(r);return s},_t.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},_t.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,c),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,c),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,c),c.features.length?c:null},_t.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_t.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},_t.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],c=u.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:c?E(u):this.points[u.index].properties},f=void 0;c?f=u.id:this.options.generateId?f=u.index:this.points[u.index].id&&(f=this.points[u.index].id),void 0!==f&&(l.id=f),o.features.push(l)}},_t.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(+t,this.options.maxZoom+1))},_t.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.minPoints,a=r.radius/(r.extent*Math.pow(2,e)),s=0;s<t.length;s++){var u=t[s];if(!(u.zoom<=e)){u.zoom=e;for(var c=this.trees[e+1],l=c.within(u.x,u.y,a),f=u.numPoints||1,h=f,p=0,d=l;p<d.length;p+=1){var v=c.points[d[p]];v.zoom>e&&(h+=v.numPoints||1)}if(h>=o){for(var m=u.x*f,g=u.y*f,y=i&&f>1?this._map(u,!0):null,_=(s<<5)+(e+1)+this.points.length,x=0,w=l;x<w.length;x+=1){var E=c.points[w[x]];if(!(E.zoom<=e)){E.zoom=e;var S=E.numPoints||1;m+=E.x*S,g+=E.y*S,E.parentId=_,i&&(y||(y=this._map(u,!0)),i(y,this._map(E)))}}u.parentId=_,n.push(b(m/h,g/h,_,h,y))}else if(n.push(u),h>1)for(var O=0,T=l;O<T.length;O+=1){var A=c.points[T[O]];A.zoom<=e||(A.zoom=e,n.push(A))}}}return n},_t.prototype._getOriginId=function(t){return t-this.points.length>>5},_t.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},_t.prototype._map=function(t,e){if(t.numPoints)return e?T({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?T({},r):r},$.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},$.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,c=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var l=1<<e,f=tt(e,n,r),h=this.tiles[f];if(!h&&(c>1&&console.time("creation"),h=this.tiles[f]=K(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var p="z"+e;this.stats[p]=(this.stats[p]||0)+1,this.total++}if(h.source=t,i){if(e===u.maxZoom||e===i)continue;var d=1<<i-e;if(n!==Math.floor(o/d)||r!==Math.floor(a/d))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){c>1&&console.time("clipping");var v,m,g,y,_,b,x=.5*u.buffer/u.extent,w=.5-x,E=.5+x,S=1+x;v=m=g=y=null,_=z(t,l,n-x,n+E,0,h.minX,h.maxX,u),b=z(t,l,n+w,n+S,0,h.minX,h.maxX,u),t=null,_&&(v=z(_,l,r-x,r+E,1,h.minY,h.maxY,u),m=z(_,l,r+w,r+S,1,h.minY,h.maxY,u),_=null),b&&(g=z(b,l,r-x,r+E,1,h.minY,h.maxY,u),y=z(b,l,r+w,r+S,1,h.minY,h.maxY,u),b=null),c>1&&console.timeEnd("clipping"),s.push(v||[],e+1,2*n,2*r),s.push(m||[],e+1,2*n,2*r+1),s.push(g||[],e+1,2*n+1,2*r),s.push(y||[],e+1,2*n+1,2*r+1)}}},$.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=tt(t,e=(e%a+a)%a,n);if(this.tiles[s])return X(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,c=t,l=e,f=n;!u&&c>0;)c--,l=Math.floor(l/2),f=Math.floor(f/2),u=this.tiles[tt(c,l,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,f),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,f,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?X(this.tiles[s],i):null):null};var bt=function(e){function n(t,n,r,i){e.call(this,t,n,r,et),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,function(a,s){if(a||!s)return n(a);if("object"!=typeof s)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,n){var r,i=e&&e.type;if("FeatureCollection"===i)for(r=0;r<e.features.length;r++)t(e.features[r],n);else if("GeometryCollection"===i)for(r=0;r<e.geometries.length;r++)t(e.geometries[r],n);else if("Feature"===i)t(e.geometry,n);else if("Polygon"===i)o(e.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<e.coordinates.length;r++)o(e.coordinates[r],n);return e}(s,!0);try{if(r.filter){var u=t.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===u.result)throw new Error(u.value.map(function(t){return t.key+": "+t.message}).join(", "));s={type:"FeatureCollection",features:s.features.filter(function(t){return u.value.evaluate({zoom:0},t)})}}e._geoJSONIndex=r.cluster?new _t(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),c=0,l=u;c<l.length;c+=1){var f=l[c],h=r[f],p=h[0],d=t.createExpression(h[1]),v=t.createExpression("string"==typeof p?[p,["accumulated"],["get",f]]:p);i[f]=d.value,o[f]=v.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(s.features):function(t,e){return new $(t,e)}(s,r.geojsonVtOptions)}catch(a){return n(a)}e.loaded={};var c={};if(i){var l=i.finish();l&&(c.resourceTiming={},c.resourceTiming[r.source]=JSON.parse(JSON.stringify(l)))}n(null,c)})}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(ot),xt=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ot,geojson:bt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return xt.prototype.setReferrer=function(t,e){this.referrer=e},xt.prototype.setImages=function(t,e,n){for(var r in this.availableImages[t]=e,this.workerSources[t]){var i=this.workerSources[t][r];for(var o in i)i[o].availableImages=e}n()},xt.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},xt.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},xt.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},xt.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},xt.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},xt.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},xt.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},xt.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},xt.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},xt.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},xt.prototype.syncRTLPluginState=function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(t){r(t.toString())}},xt.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},xt.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new nt),e},xt.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},xt.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new st),this.demWorkerSources[t][e]},xt.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xt(self)),xt}),t(["./shared"],function(t){function e(t){if(!Ot)return t[0];for(var e=0;e<t.length;e++)if(t[e]in Ot)return t[e];return t[0]}function n(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}function r(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(t,e,n,r,i,a,s){for(var u=0;u<e;u++){for(var c=0;c<n;c++)r[c]=t[c*e+u];for(o(r,i,a,s,n),c=0;c<n;c++)t[c*e+u]=i[c]}for(c=0;c<n;c++){for(u=0;u<e;u++)r[u]=t[c*e+u];for(o(r,i,a,s,e),u=0;u<e;u++)t[c*e+u]=Math.sqrt(i[u])}}function o(t,e,n,r,i){n[0]=0,r[0]=-Rt,r[1]=+Rt;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+Rt}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}function a(e,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),a.tiles=n.canonicalizeTileset(a,e.url),r(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame(function(){return i(null,e)})}function s(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function u(t,e,n,r,i,o){var a=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),u=o.maxPitchScaleFactor(),l=t.tilesIn(r,u,a);l.sort(c);for(var f=[],h=0,p=l;h<p.length;h+=1){var d=p[h];f.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(e,n,t._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,i,o,u,s(t.transform,d.tileID))})}var v=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var c in a)for(var l=a[c],f=u[c]=u[c]||{},h=e[c]=e[c]||[],p=0,d=l;p<d.length;p+=1){var v=d[p];f[v.featureIndex]||(f[v.featureIndex]=!0,h.push(v))}}return e}(f);for(var m in v)v[m].forEach(function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r});return v}function c(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function l(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function f(t){return"raster"===t||"image"===t||"video"===t}function h(){return new t.window.Worker(Yi.workerUrl)}function p(){return We||(We=new He),We}function d(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach(function(t){t in n&&(r[t]=n[t])}),r}function v(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=d(t[r],e[t[r].ref]));return t}function m(t,e,n){n.push({command:Ze.addSource,args:[t,e[t]]})}function g(t,e,n){e.push({command:Ze.removeSource,args:[t]}),n[t]=!0}function y(t,e,n,r){g(t,n,r),m(t,e,n)}function _(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;return!0}function b(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function x(t){return t.id}function w(t,e){return t[e.id]=e,t}function E(e,n,r,i,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function S(e,n,r,i,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function O(e,n){var r=[e.x,e.y,0,1];L(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function T(t,e){return.5+t/e*.5}function A(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function C(e,n,r,i,o,a,s,u){var c=i?e.textSizeData:e.iconSizeData,l=t.evaluateSizeForZoom(c,r.transform.zoom),f=[256/r.width*2+1,256/r.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var p=e.lineVertexArray,d=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,v=r.transform.width/r.transform.height,m=!1,g=0;g<d.length;g++){var y=d.get(g);if(y.hidden||y.writingMode===t.WritingMode.vertical&&!m)R(y.numGlyphs,h);else{m=!1;var _=[y.anchorX,y.anchorY,0,1];if(t.transformMat4(_,_,n),A(_,f)){var b=T(r.transform.cameraToCenterDistance,_[3]),x=t.evaluateSizeForFeature(c,l,y),w=s?x/b:x*b,E=new t.Point(y.anchorX,y.anchorY),S=O(E,o).point,C={},k=P(y,w,!1,u,n,o,a,e.glyphOffsetArray,p,h,S,E,C,v);m=k.useVertical,(k.notEnoughRoom||m||k.needsFlipping&&P(y,w,!0,u,n,o,a,e.glyphOffsetArray,p,h,S,E,C,v).notEnoughRoom)&&R(y.numGlyphs,h)}else R(y.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function k(t,e,n,r,i,o,a,s,u,c,l){var f=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,d=e.getoffsetX(s.glyphStartIndex),v=e.getoffsetX(f-1),m=I(t*d,n,r,i,o,a,s.segment,h,p,u,c,l);if(!m)return null;var g=I(t*v,n,r,i,o,a,s.segment,h,p,u,c,l);return g?{first:m,last:g}:null}function M(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function P(e,n,r,i,o,a,s,u,c,l,f,h,p,d){var v,m=n/24,g=e.lineOffsetX*m,y=e.lineOffsetY*m;if(e.numGlyphs>1){var _=e.glyphStartIndex+e.numGlyphs,b=e.lineStartIndex,x=e.lineStartIndex+e.lineLength,w=k(m,u,g,y,r,f,h,e,c,a,p);if(!w)return{notEnoughRoom:!0};var E=O(w.first.point,s).point,S=O(w.last.point,s).point;if(i&&!r){var T=M(e.writingMode,E,S,d);if(T)return T}v=[w.first];for(var A=e.glyphStartIndex+1;A<_-1;A++)v.push(I(m*u.getoffsetX(A),g,y,r,f,h,e.segment,b,x,c,a,p));v.push(w.last)}else{if(i&&!r){var C=O(h,o).point,P=e.lineStartIndex+e.segment+1,R=new t.Point(c.getx(P),c.gety(P)),L=O(R,o),D=L.signedDistanceFromCamera>0?L.point:j(h,R,C,1,o),N=M(e.writingMode,C,D,d);if(N)return N}var z=I(m*u.getoffsetX(e.glyphStartIndex),g,y,r,f,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,c,a,p);if(!z)return{notEnoughRoom:!0};v=[z]}for(var F=0,B=v;F<B.length;F+=1){var U=B[F];t.addDynamicAttributes(l,U.point,U.angle)}return{}}function j(t,e,n,r,i){var o=O(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function I(e,n,r,i,o,a,s,u,c,l,f,h){var p=i?e-n:e+n,d=p>0?1:-1,v=0;i&&(d*=-1,v=Math.PI),d<0&&(v+=Math.PI);for(var m=d>0?u+s:u+s+1,g=o,y=o,_=0,b=0,x=Math.abs(p),w=[];_+b<=x;){if((m+=d)<u||m>=c)return null;if(y=g,w.push(g),void 0===(g=h[m])){var E=new t.Point(l.getx(m),l.gety(m)),S=O(E,f);if(S.signedDistanceFromCamera>0)g=h[m]=S.point;else{var T=m-d;g=j(0===_?a:new t.Point(l.getx(T),l.gety(T)),E,y,x-_+1,f)}}_+=b,b=y.dist(g)}var A=(x-_)/b,C=g.sub(y),k=C.mult(A)._add(y);k._add(C._unit()._perp()._mult(r*d));var M=v+Math.atan2(g.y-y.y,g.x-y.x);return w.push(k),{point:k,angle:M,path:w}}function R(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(Ke,3*r)}}function L(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}function D(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}function N(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.Point(s+c[0]*o,u+c[1]*o)}function z(e,n,r,i,o,a){var s=e.x1,u=e.x2,c=e.y1,l=e.y2,f=e.anchorPointX,h=e.anchorPointY,p=new t.Point(n,r);return i&&p._rotate(o?a:-a),{x1:s+p.x,y1:c+p.y,x2:u+p.x,y2:l+p.y,anchorPointX:f,anchorPointY:h}}function F(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}function B(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*an+e*sn+n*un+e*cn+n*ln+e*fn+n*hn+e}function U(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=e.match(/attribute ([\w]+) ([\w]+)/g),i=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(i):i,s={};return{fragmentSource:t=t.replace(n,function(t,e,n,r,i){return s[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),vertexSource:e=e.replace(n,function(t,e,n,r,i){var o="float"===r?"vec2":"vec4",a=i.match(/color/)?"color":o;return s[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\nvarying "+n+" "+r+" "+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+n+" "+o+" a_"+i+";\n#else\nuniform "+n+" "+r+" u_"+i+";\n#endif\n":"vec4"===a?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = a_"+i+";\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+n+" "+r+" "+i+" = unpack_mix_"+a+"(a_"+i+", u_"+i+"_t);\n#else\n    "+n+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),staticAttributes:r,staticUniforms:a}}function V(t){for(var e=[],n=0;n<t.length;n++)if(null!==t[n]){var r=t[n].split(" ");e.push(r.pop())}return e}function G(t,e,n){var r=1/D(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}function H(t,e){return 1/D(t,1,e.tileZoom)}function W(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function q(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function Z(e,n,r,i,o,a,s){for(var u=e.context,c=u.gl,l=e.useProgram("collisionBox"),f=[],h=0,p=0,d=0;d<i.length;d++){var v=i[d],m=n.getTile(v),g=m.getBucket(r);if(g){var y=v.posMatrix;0===o[0]&&0===o[1]||(y=e.translatePosMatrix(v.posMatrix,m,o,a));var _=s?g.textCollisionBox:g.iconCollisionBox,b=g.collisionCircleArray;if(b.length>0){var x=t.create(),w=y;t.mul(x,g.placementInvProjMatrix,e.transform.glCoordMatrix),t.mul(x,x,g.placementViewportMatrix),f.push({circleArray:b,circleOffset:p,transform:w,invTransform:x}),p=h+=b.length/4}_&&l.draw(u,c.LINES,Ne.disabled,ze.disabled,e.colorModeForRenderPass(),Be.disabled,lr(y,e.transform,m),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,e.transform.zoom,null,null,_.collisionVertexBuffer)}}if(s&&f.length){var E=e.useProgram("collisionCircle"),S=new t.StructArrayLayout2f1f2i16;S.resize(4*h),S._trim();for(var O=0,T=0,A=f;T<A.length;T+=1)for(var C=A[T],k=0;k<C.circleArray.length/4;k++){var M=4*k,P=C.circleArray[M+0],j=C.circleArray[M+1],I=C.circleArray[M+2],R=C.circleArray[M+3];S.emplace(O++,P,j,I,R,0),S.emplace(O++,P,j,I,R,1),S.emplace(O++,P,j,I,R,2),S.emplace(O++,P,j,I,R,3)}(!nr||nr.length<2*h)&&(nr=function(e){var n=2*e,r=new t.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var o=6*i;r.uint16[o+0]=4*i+0,r.uint16[o+1]=4*i+1,r.uint16[o+2]=4*i+2,r.uint16[o+3]=4*i+2,r.uint16[o+4]=4*i+3,r.uint16[o+5]=4*i+0}return r}(h));for(var L=u.createIndexBuffer(nr,!0),D=u.createVertexBuffer(S,t.collisionCircleLayout.members,!0),N=0,z=f;N<z.length;N+=1){var F=z[N],B=fr(F.transform,F.invTransform,e.transform);E.draw(u,c.TRIANGLES,Ne.disabled,ze.disabled,e.colorModeForRenderPass(),Be.disabled,B,r.id,D,L,t.SegmentVector.simpleSegment(0,2*F.circleOffset,F.circleArray.length,F.circleArray.length/2),null,e.transform.zoom,null,null,null)}D.destroy(),L.destroy()}}function X(e,n,r,i,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*n,c=-(s.verticalAlign-.5)*r,l=t.evaluateVariableOffset(e,i);return new t.Point((u/o+l[0])*a,(c/o+l[1])*a)}function Y(e,n,r,i,o,a,s,u,c,l,f){var h=e.text.placedSymbolArray,p=e.text.dynamicLayoutVertexArray,d=e.icon.dynamicLayoutVertexArray,v={};p.clear();for(var m=0;m<h.length;m++){var g=h.get(m),y=g.hidden||!g.crossTileID||e.allowVerticalPlacement&&!g.placedOrientation?null:i[g.crossTileID];if(y){var _=new t.Point(g.anchorX,g.anchorY),b=O(_,r?u:s),x=T(a.cameraToCenterDistance,b.signedDistanceFromCamera),w=o.evaluateSizeForFeature(e.textSizeData,l,g)*x/t.ONE_EM;r&&(w*=e.tilePixelRatio/c);for(var E=X(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),S=r?O(_.add(E),s).point:b.point.add(n?E.rotate(-a.angle):E),A=e.allowVerticalPlacement&&g.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,C=0;C<g.numGlyphs;C++)t.addDynamicAttributes(p,S,A);f&&g.associatedIconIndex>=0&&(v[g.associatedIconIndex]={shiftedAnchor:S,angle:A})}else R(g.numGlyphs,p)}if(f){d.clear();for(var k=e.icon.placedSymbolArray,M=0;M<k.length;M++){var P=k.get(M);if(P.hidden)R(P.numGlyphs,d);else{var j=v[M];if(j)for(var I=0;I<P.numGlyphs;I++)t.addDynamicAttributes(d,j.shiftedAnchor,j.angle);else R(P.numGlyphs,d)}}e.icon.dynamicLayoutVertexBuffer.updateData(d)}e.text.dynamicLayoutVertexBuffer.updateData(p)}function K(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function J(e,n,r,i,o,a,s,u,c,l,f,h){for(var p=e.context,d=p.gl,v=e.transform,m="map"===u,g="map"===c,y=m&&"point"!==r.layout.get("symbol-placement"),_=m&&!g&&!y,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=!1,w=e.depthModeForSublayer(0,Ne.ReadOnly),O=r.layout.get("text-variable-anchor"),T=[],A=0,k=i;A<k.length;A+=1){var M=k[A],P=n.getTile(M),j=P.getBucket(r);if(j){var I=o?j.text:j.icon;if(I&&I.segments.get().length){var R=I.programConfigurations.get(r.id),L=o||j.sdfIcons,N=o?j.textSizeData:j.iconSizeData,z=g||0!==v.pitch,F=e.useProgram(K(L,o,j),R),B=t.evaluateSizeForZoom(N,v.zoom),U=void 0,V=[0,0],G=void 0,H=void 0,W=null,q=void 0;if(o)G=P.glyphAtlasTexture,H=d.LINEAR,U=P.glyphAtlasTexture.size,j.iconsInText&&(V=P.imageAtlasTexture.size,W=P.imageAtlasTexture,q=z||e.options.rotating||e.options.zooming||"composite"===N.kind||"camera"===N.kind?d.LINEAR:d.NEAREST);else{var Z=1!==r.layout.get("icon-size").constantOr(0)||j.iconsNeedLinear;G=P.imageAtlasTexture,H=L||e.options.rotating||e.options.zooming||Z||z?d.LINEAR:d.NEAREST,U=P.imageAtlasTexture.size}var X=D(P,1,e.transform.zoom),Y=E(M.posMatrix,g,m,e.transform,X),J=S(M.posMatrix,g,m,e.transform,X),$=O&&j.hasTextData(),tt="none"!==r.layout.get("icon-text-fit")&&$&&j.hasIconData();y&&C(j,M.posMatrix,e,o,Y,J,g,l);var et=e.translatePosMatrix(M.posMatrix,P,a,s),nt=y||o&&O||tt?Tr:Y,rt=e.translatePosMatrix(J,P,a,s,!0),it=L&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),ot={program:F,buffers:I,uniformValues:L?j.iconsInText?wr(N.kind,B,_,g,e,et,nt,rt,U,V):xr(N.kind,B,_,g,e,et,nt,rt,o,U,!0):br(N.kind,B,_,g,e,et,nt,rt,o,U),atlasTexture:G,atlasTextureIcon:W,atlasInterpolation:H,atlasInterpolationIcon:q,isSDF:L,hasHalo:it};if(b&&j.canOverlap){x=!0;for(var at=0,st=I.segments.get();at<st.length;at+=1){var ut=st[at];T.push({segments:new t.SegmentVector([ut]),sortKey:ut.sortKey,state:ot})}}else T.push({segments:I.segments,sortKey:0,state:ot})}}}x&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var ct=0,lt=T;ct<lt.length;ct+=1){var ft=lt[ct],ht=ft.state;if(p.activeTexture.set(d.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,d.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(p.activeTexture.set(d.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),ht.isSDF){var pt=ht.uniformValues;ht.hasHalo&&(pt.u_is_halo=1,Q(ht.buffers,ft.segments,r,e,ht.program,w,f,h,pt)),pt.u_is_halo=0}Q(ht.buffers,ft.segments,r,e,ht.program,w,f,h,ht.uniformValues)}}function Q(t,e,n,r,i,o,a,s,u){var c=r.context;i.draw(c,c.gl.TRIANGLES,o,a,s,Be.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function $(t,e,n,r,i,o,a){var s,u,c,l,f,h=t.context.gl,p=n.paint.get("fill-pattern"),d=p&&p.constantOr(1),v=n.getCrossfadeParameters();a?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=d?"fillPattern":"fill",s=h.TRIANGLES);for(var m=0,g=r;m<g.length;m+=1){var y=g[m],_=e.getTile(y);if(!d||_.patternsLoaded()){var b=_.getBucket(n);if(b){var x=b.programConfigurations.get(n.id),w=t.useProgram(u,x);d&&(t.context.activeTexture.set(h.TEXTURE0),_.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePaintBuffers(v));var E=p.constantOr(null);if(E&&_.imageAtlas){var S=_.imageAtlas,O=S.patternPositions[E.to.toString()],T=S.patternPositions[E.from.toString()];O&&T&&x.setConstantPatternPositions(O,T)}var A=t.translatePosMatrix(y.posMatrix,_,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){l=b.indexBuffer2,f=b.segments2;var C=[h.drawingBufferWidth,h.drawingBufferHeight];c="fillOutlinePattern"===u&&d?ur(A,t,v,_,C):sr(A,C)}else l=b.indexBuffer,f=b.segments,c=d?ar(A,t,v,_):or(A);w.draw(t.context,s,i,t.stencilModeForClipping(y),o,Be.disabled,c,n.id,b.layoutVertexBuffer,l,f,n.paint,t.transform.zoom,x)}}}}function tt(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,c=n.paint.get("fill-extrusion-pattern"),l=c.constantOr(1),f=n.getCrossfadeParameters(),h=n.paint.get("fill-extrusion-opacity"),p=0,d=r;p<d.length;p+=1){var v=d[p],m=e.getTile(v),g=m.getBucket(n);if(g){var y=g.programConfigurations.get(n.id),_=t.useProgram(l?"fillExtrusionPattern":"fillExtrusion",y);l&&(t.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),y.updatePaintBuffers(f));var b=c.constantOr(null);if(b&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[b.to.toString()],E=x.patternPositions[b.from.toString()];w&&E&&y.setConstantPatternPositions(w,E)}var S=t.translatePosMatrix(v.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),O=n.paint.get("fill-extrusion-vertical-gradient"),T=l?ir(S,t,O,h,v,f,m):rr(S,t,O,h);_.draw(s,s.gl.TRIANGLES,i,o,a,Be.backCCW,T,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,n.paint,t.transform.zoom,y)}}}function et(e,n,r,i,o,a){var s=e.context,u=s.gl,c=n.fbo;if(c){var l=e.useProgram("hillshade");s.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var f=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,c,l,f=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),f),u_image:0,u_latrange:(u=n.tileID,c=Math.pow(2,u.canonical.z),l=u.canonical.y,[new t.MercatorCoordinate(0,l/c).toLngLat().lat,new t.MercatorCoordinate(0,(l+1)/c).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}}(e,n,r);l.draw(s,u.TRIANGLES,i,o,a,Be.disabled,f,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function nt(e,n,r,i,o,a){var s=e.context,u=s.gl,c=n.dem;if(c&&c.data){var l=c.dim,f=c.stride,h=c.getPixels();if(s.activeTexture.set(u.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(f),n.demTexture){var p=n.demTexture;p.update(h,{premultiply:!1}),p.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(s,h,u.RGBA,{premultiply:!1}),n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);s.activeTexture.set(u.TEXTURE0);var d=n.fbo;if(!d){var v=new t.Texture(s,{width:l,height:l,data:null},u.RGBA);v.bind(u.LINEAR,u.CLAMP_TO_EDGE),(d=n.fbo=s.createFramebuffer(l,l,!0)).colorAttachment.set(v.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,l,l]),e.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,Be.disabled,function(e,n){var r=n.stride,i=t.create();return t.ortho(i,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(i,i,[0,-t.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:e.overscaledZ,u_unpack:n.getUnpackVector()}}(n.tileID,c),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function rt(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,c=n?(s-n.timeAdded)/a:-1,l=r.getSource(),f=o.coveringZoomLevel({tileSize:l.tileSize,roundZoom:l.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),p=h&&e.refreshedUponExpiration?1:t.clamp(h?u:1-c,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}function it(t,e,n,r){at(t,0,e+n/2,t.transform.width,n,r)}function ot(t,e,n,r){at(t,e-n/2,0,n,t.transform.height,r)}function at(e,n,r,i,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function st(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=Ne.disabled,c=ze.disabled,l=e.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,u,c,l,Be.disabled,hr(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var f=n.getTileByID(r.key).latestRawTileData,h=Math.floor((f&&f.byteLength||0)/1024),p=n.getTile(r).tileSize,d=512/Math.min(p,512)*(r.overscaledZ/e.transform.zoom)*.5,v=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(v+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,v+" "+h+"kb"),s.draw(i,o.TRIANGLES,u,c,Fe.alphaBlended,Be.disabled,hr(a,t.Color.transparent,d),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}function ut(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function ct(e,n,r){var i=r.maxSpeed,o=r.linearity,a=r.deceleration,s=t.clamp(e*o/(n/1e3),-i,i),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}function lt(t,e){for(var n={},r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}function ft(t,e,n){for(var r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}function ht(t,e){return Math.log(t/e)/Math.LN2}function pt(t,e){return 180*t.angleWith(e)/Math.PI}function dt(t){return Math.abs(t.y)>Math.abs(t.x)}function vt(t){return t*(2-t)}function mt(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}function gt(t){t.parentNode&&t.parentNode.removeChild(t)}function yt(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}function _t(t,e,n){var r=t.classList;for(var i in Ni)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}function bt(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?xt(e,r,u/5280,t._getUIString("ScaleControl.Miles")):xt(e,r,u,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?xt(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?xt(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):xt(e,r,s,t._getUIString("ScaleControl.Meters"))}function xt(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+r}var wt,Et=t.createCommonjsModule(function(t){function e(t){return!n(t)}function n(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var n=e.getImageData(0,0,1,1);return n&&n.width===t.width}()?(void 0===r[n=t&&t.failIfMajorPerformanceCaveat]&&(r[n]=function(t){var n=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(t);if(!n)return!1;var r=n.createShader(n.VERTEX_SHADER);return!(!r||n.isContextLost())&&(n.shaderSource(r,"void main() {}"),n.compileShader(r),!0===n.getShaderParameter(r,n.COMPILE_STATUS))}(n)),r[n]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var n}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e,window.mapboxgl.notSupportedReason=n);var r={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),St={create:function(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},Ot=t.window.document&&t.window.document.documentElement.style,Tt=e(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);St.disableDrag=function(){Ot&&Tt&&(wt=Ot[Tt],Ot[Tt]="none")},St.enableDrag=function(){Ot&&Tt&&(Ot[Tt]=wt)};var At=e(["transform","WebkitTransform"]);St.setTransform=function(t,e){t.style[At]=e};var Ct=!1;try{var kt=Object.defineProperty({},"passive",{get:function(){Ct=!0}});t.window.addEventListener("test",kt,kt),t.window.removeEventListener("test",kt,kt)}catch(t){Ct=!1}St.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&Ct?r:r.capture)},St.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&Ct?r:r.capture)};var Mt=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",Mt,!0)};St.suppressClick=function(){t.window.addEventListener("click",Mt,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",Mt,!0)},0)},St.mousePos=function(e,n){var r=e.getBoundingClientRect();return new t.Point(n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop)},St.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o=0;o<n.length;o++)i.push(new t.Point(n[o].clientX-r.left-e.clientLeft,n[o].clientY-r.top-e.clientTop));return i},St.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},St.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var Pt=function(e){function r(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.isLoaded=function(){return this.loaded},r.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},r.prototype.getImage=function(t){return this.images[t]},r.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},r.prototype._validate=function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},r.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},r.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},r.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},r.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},r.prototype.listImages=function(){return Object.keys(this.images)},r.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},r.prototype._notify=function(e,n){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},r.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},r.prototype.getPattern=function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},r.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},r.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,c=u.x+1,l=u.y+1,f=this.images[s].data,h=f.width,p=f.height;t.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:l},{width:h,height:p}),t.RGBAImage.copy(f,a,{x:0,y:p-1},{x:c,y:l-1},{width:h,height:1}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:c,y:l+p},{width:h,height:1}),t.RGBAImage.copy(f,a,{x:h-1,y:0},{x:c-1,y:l},{width:1,height:p}),t.RGBAImage.copy(f,a,{x:0,y:0},{x:c+h,y:l},{width:1,height:p})}this.dirty=!0},r.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},r.prototype.dispatchRenderCallbacks=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!this.callbackDispatchedThisFrame[i]){this.callbackDispatchedThisFrame[i]=!0;var o=this.images[i];n(o)&&this.updateImage(i,o)}}},r}(t.Evented),jt=r,It=r,Rt=1e20;r.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var o=e.data[4*r+3]/255;this.gridOuter[r]=1===o?0:0===o?Rt:Math.pow(Math.max(0,.5-o),2),this.gridInner[r]=1===o?Rt:0===o?0:Math.pow(Math.max(0,o-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},jt.default=It;var Lt=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};Lt.prototype.setURL=function(t){this.url=t},Lt.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{},ranges:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void e(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else if(o.ranges[s])e(null,{stack:n,id:i,glyph:a});else{var u=o.requests[s];u||(u=o.requests[s]=[],Lt.loadGlyphRange(n,s,r.url,r.requestManager,function(t,e){if(e){for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);o.ranges[s]=!0}for(var i=0,a=u;i<a.length;i+=1)(0,a[i])(t,e);delete o.requests[s]})),u.push(function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})})}}else e(null,{stack:n,id:i,glyph:a})},function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,c=a.glyph;(r[s]||(r[s]={}))[u]=c&&{id:c.id,bitmap:c.bitmap.clone(),metrics:c.metrics}}n(null,r)}})},Lt.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},Lt.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new Lt.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Lt.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}})},Lt.TinySDF=jt;var Dt=function(){this.specification=t.styleSpec.light.position};Dt.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},Dt.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var Nt=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new Dt,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),zt=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(Nt),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),Ft=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ft.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},Ft.prototype.getDashRanges=function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var c=t[u];r.push({left:i=s*n,right:o=(s+=c)*n,isDash:a=!a,zeroLength:0===c})}return r},Ft.prototype.addRoundDash=function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var c=Math.abs(u-s.left),l=Math.abs(u-s.right),f=Math.min(c,l),h=void 0,p=i/n*(r+1);if(s.isDash){var d=r-Math.abs(p);h=Math.sqrt(f*f+d*d)}else h=r-Math.sqrt(f*f+p*p);this.data[o+u]=Math.max(0,Math.min(255,h+128))}},Ft.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],c=0;c<this.width;c++){c/u.right>1&&(u=t[++s]);var l=Math.abs(c-u.left),f=Math.abs(c-u.right),h=Math.min(l,f);this.data[a+c]=Math.max(0,Math.min(255,(u.isDash?h:-h)+128))}},Ft.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var c={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,c},Ft.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var Bt=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};Bt.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,function(t,r){t.send(e,n,r)},r=r||function(){})},Bt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Bt.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},Bt.Actor=t.Actor;var Ut=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};Ut.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},Ut.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var Vt=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=a(this._options,this.map._requestManager,function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Ut(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setSourceProperty=function(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},n.prototype.setTiles=function(t){var e=this;return this.setSourceProperty(function(){e._options.tiles=t}),this},n.prototype.setUrl=function(t){var e=this;return this.setSourceProperty(function(){e.url=t,e._options.url=t}),this},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){function r(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),o={request:this.map._requestManager.transformRequest(i,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};o.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",o,r.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",o,r.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Gt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=a(this._options,this.map._requestManager,function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new Ut(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}})},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Ht=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){function r(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}var i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,r.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(Gt),Wt=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}})},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}}),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),e(t))})},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))})},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),qt=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Zt=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())})},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var c=Math.max(i-n,o-r),l=Math.max(0,Math.floor(-Math.log(c)/Math.LN2)),f=Math.pow(2,l);return new t.CanonicalTileID(l,Math.floor((n+i)/2*f),Math.floor((r+o)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map(function(t){return n.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,qt.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),Xt=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.setAttribute("playsinline",""),e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,qt.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(Zt),Yt=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,qt.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(Zt),Kt={vector:Vt,raster:Gt,"raster-dem":Ht,geojson:Wt,video:Xt,image:Zt,canvas:Yt},Jt=function(t,e){this.max=t,this.onRemove=e,this.reset()};Jt.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},Jt.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout(function(){r.remove(t,o)},n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},Jt.prototype.has=function(t){return t.wrapped().key in this.data},Jt.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},Jt.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},Jt.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},Jt.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},Jt.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},Jt.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},Jt.prototype.filter=function(t){var e=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var Qt=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};Qt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},Qt.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},Qt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var $t={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},te=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},te.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},te.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},te.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[$t[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ee=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ee.prototype.get=function(){return this.current},ee.prototype.set=function(t){},ee.prototype.getDefault=function(){return this.default},ee.prototype.setDefault=function(){this.set(this.default)};var ne=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(ee),re=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(ee),ie=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(ee),oe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(ee),ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(ee),se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(ee),ue=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(ee),ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(ee),le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(ee),fe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(ee),he=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(ee),pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(ee),de=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(ee),ve=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(ee),me=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(ee),ge=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(ee),ye=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(ee),_e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(ee),be=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(ee),xe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(ee),we=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(ee),Ee=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(ee),Se=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(ee),Oe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(ee),Te=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(ee),Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(ee),Ce=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(ee),ke=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(ee),Me=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(ee),Pe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(ee),je=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(ee),Ie=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(ee),Re=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(Ie),Le=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(Ie),De=function(t,e,n,r){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Re(t,i),r&&(this.depthAttachment=new Le(t,i))};De.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var Ne=function(t,e,n){this.func=t,this.mask=e,this.range=n};Ne.ReadOnly=!1,Ne.ReadWrite=!0,Ne.disabled=new Ne(519,Ne.ReadOnly,[0,1]);var ze=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};ze.disabled=new ze({func:519,mask:0},0,0,7680,7680,7680);var Fe=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};Fe.disabled=new Fe(Fe.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Fe.unblended=new Fe(Fe.Replace,t.Color.transparent,[!0,!0,!0,!0]),Fe.alphaBlended=new Fe([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Be=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Be.disabled=new Be(!1,1029,2305),Be.backCCW=new Be(!0,1029,2305);var Ue=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ne(this),this.clearDepth=new re(this),this.clearStencil=new ie(this),this.colorMask=new oe(this),this.depthMask=new ae(this),this.stencilMask=new se(this),this.stencilFunc=new ue(this),this.stencilOp=new ce(this),this.stencilTest=new le(this),this.depthRange=new fe(this),this.depthTest=new he(this),this.depthFunc=new pe(this),this.blend=new de(this),this.blendFunc=new ve(this),this.blendColor=new me(this),this.blendEquation=new ge(this),this.cullFace=new ye(this),this.cullFaceSide=new _e(this),this.frontFace=new be(this),this.program=new xe(this),this.activeTexture=new we(this),this.viewport=new Ee(this),this.bindFramebuffer=new Se(this),this.bindRenderbuffer=new Oe(this),this.bindTexture=new Te(this),this.bindVertexBuffer=new Ae(this),this.bindElementBuffer=new Ce(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ke(this),this.pixelStoreUnpack=new Me(this),this.pixelStoreUnpackPremultiplyAlpha=new Pe(this),this.pixelStoreUnpackFlipY=new je(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)};Ue.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ue.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ue.prototype.createIndexBuffer=function(t,e){return new Qt(this,t,e)},Ue.prototype.createVertexBuffer=function(t,e,n){return new te(this,t,e,n)},Ue.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},Ue.prototype.createFramebuffer=function(t,e,n){return new De(this,t,e,n)},Ue.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Ue.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Ue.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Ue.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Ue.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Fe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Ue.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ve=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=function(e,n,r,i){var o=new Kt[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,r,i,this),this._tiles={},this._cache=new Jt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map(function(t){return t.tileID}).sort(l).map(function(t){return t.key})},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort(function(e,r){var i=e.tileID,o=r.tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x}).map(function(t){return t.tileID.key}):r.map(function(t){return t.tileID}).sort(l).map(function(t){return t.key})},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){function e(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}for(var n=this.getRenderableIds(),r=0;r<n.length;r++){var i=n[r];if(t.neighboringTiles&&t.neighboringTiles[i]){var o=this.getTileByID(i);e(t,o),e(o,t)}}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter(function(t){return r._source.hasTile(t)}))):i=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(f(this._source.type)){for(var c={},l={},h=0,p=Object.keys(u);h<p.length;h+=1){var d=p[h],v=u[d],m=this._tiles[d];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var g=this.findLoadedParent(v,a);g&&(this._addTile(g.tileID),c[g.tileID.key]=g.tileID),l[d]=v}}for(var y in this._retainLoadedChildren(l,o,s,u),c)u[y]||(this._coveredTiles[y]=!0,u[y]=c[y])}for(var _ in u)this._tiles[_].clearFadeHold();for(var b=0,x=t.keysDifference(this._tiles,u);b<x.length;b+=1){var w=x[b],E=this._tiles[w];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(w)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,c=t;u<c.length;u+=1){var l=c[u],f=this._addTile(l);r[l.key]=l,f.hasData()||e<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,e,a,r);for(var h=0,p=t;h<p.length;h+=1){var d=p[h],v=this._tiles[d.key];if(!v.hasData()){if(e+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){r[m.key]=m;continue}}else{var y=d.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var _=v.wasRequested(),b=d.overscaledZ-1;b>=o;--b){var x=d.scaledTo(b);if(i[x.key])break;if(i[x.key]=!0,!(v=this.getTile(x))&&_&&(v=this._addTile(x)),v&&(r[x.key]=x,_=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout(function(){n._reloadTile(t,"expired"),delete n._timers[t]},r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map(function(t){return a.pointCoordinate(t)}),c=s.map(function(t){return a.pointCoordinate(t)}),l=this.getIds(),f=1/0,h=1/0,p=-1/0,d=-1/0,v=0,m=c;v<m.length;v+=1){var g=m[v];f=Math.min(f,g.x),h=Math.min(h,g.y),p=Math.max(p,g.x),d=Math.max(d,g.y)}for(var y=0;y<l.length;y++)!function(e){var r=i._tiles[l[e]];if(!r.holdingForFade()){var s=r.tileID,v=Math.pow(2,a.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*t.EXTENT/r.tileSize/v,g=[s.getTilePoint(new t.MercatorCoordinate(f,h)),s.getTilePoint(new t.MercatorCoordinate(p,d))];if(g[0].x-m<t.EXTENT&&g[0].y-m<t.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var y=u.map(function(t){return s.getTilePoint(t)}),_=c.map(function(t){return s.getTilePoint(t)});o.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:_,scale:v})}}}(y);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(f(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter(function(n){return!n.hasDependency(t,e)})},n}(t.Evented);Ve.maxOverzooming=10,Ve.maxUnderzooming=3;var Ge="mapboxgl_preloaded_worker_pool",He=function(){this.active={}};He.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<He.workerCount;)this.workers.push(new h);return this.active[t]=!0,this.workers.slice()},He.prototype.release=function(t){delete this.active[t],0===this.numActive()&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},He.prototype.isPreloaded=function(){return!!this.active[Ge]},He.prototype.numActive=function(){return Object.keys(this.active).length};var We,qe=Math.floor(t.browser.hardwareConcurrency/2);He.workerCount=Math.max(Math.min(qe,6),1);var Ze={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"},Xe=function(t,e){this.reset(t,e)};Xe.prototype.reset=function(t,e){this.points=t||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(e||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Xe.prototype.lerp=function(e){if(1===this.points.length)return this.points[0];e=t.clamp(e,0,1);for(var n=1,r=this._distances[n],i=e*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var o=n-1,a=this._distances[o],s=r-a,u=s>0?(i-a)/s:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))};var Ye=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};Ye.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ye.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ye.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},Ye.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},Ye.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},Ye.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var c=this.circles[3*u],l=this.circles[3*u+1],f=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:c-f,y1:l-f,x2:c+f,y2:l+f})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},Ye.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var c=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,c,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c},Ye.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},Ye.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},Ye.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},Ye.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,c=this.boxCells[i];if(null!==c)for(var l=this.bboxes,f=0,h=c;f<h.length;f+=1){var p=h[f];if(!u.box[p]){u.box[p]=!0;var d=4*p;if(t<=l[d+2]&&e<=l[d+3]&&n>=l[d+0]&&r>=l[d+1]&&(!s||s(this.boxKeys[p]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[p],x1:l[d],y1:l[d+1],x2:l[d+2],y2:l[d+3]})}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,g=0,y=v;g<y.length;g+=1){var _=y[g];if(!u.circle[_]){u.circle[_]=!0;var b=3*_;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],t,e,n,r)&&(!s||s(this.circleKeys[_]))){if(a.hitTest)return o.push(!0),!0;var x=m[b],w=m[b+1],E=m[b+2];o.push({key:this.circleKeys[_],x1:x-E,y1:w-E,x2:x+E,y2:w+E})}}}},Ye.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,c=a.seenUids,l=this.boxCells[i];if(null!==l)for(var f=this.bboxes,h=0,p=l;h<p.length;h+=1){var d=p[h];if(!c.box[d]){c.box[d]=!0;var v=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(this.boxKeys[d])))return o.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,_=m;y<_.length;y+=1){var b=_[y];if(!c.circle[b]){c.circle[b]=!0;var x=3*b;if(this._circlesCollide(g[x],g[x+1],g[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[b])))return o.push(!0),!0}}},Ye.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),c=this._convertToYCellCoord(e),l=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r),h=u;h<=l;h++)for(var p=c;p<=f;p++)if(i.call(this,t,e,n,r,this.xCellCount*p+h,o,a,s))return},Ye.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Ye.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Ye.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},Ye.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var c=(a-i)/2,l=Math.abs(e-(i+c));if(l>c+n)return!1;if(u<=s||l<=c)return!0;var f=u-s,h=l-c;return f*f+h*h<=n*n};var Ke=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]),Je=function(t,e,n){void 0===e&&(e=new Ye(t.width+200,t.height+200,25)),void 0===n&&(n=new Ye(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};Je.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,c=t.x2*a+o.point.x,l=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,c,l)||!e&&this.grid.hitTest(s,u,c,l,i)?{box:[],offscreen:!1}:{box:[s,u,c,l],offscreen:this.isOffscreen(s,u,c,l)}},Je.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,c,l,f,h,p){var d=[],v=new t.Point(n.anchorX,n.anchorY),m=O(v,a),g=T(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(l?o/g:o*g)/t.ONE_EM,_=O(v,s).point,b=k(y,i,n.lineOffsetX*y,n.lineOffsetY*y,!1,_,v,n,r,s,{}),x=!1,w=!1,E=!0;if(b){for(var S=.5*h*g+p,A=new t.Point(-100,-100),C=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),M=new Xe,P=b.first,j=b.last,I=[],R=P.path.length-1;R>=1;R--)I.push(P.path[R]);for(var L=1;L<j.path.length;L++)I.push(j.path[L]);var D=2.5*S;if(u){var N=I.map(function(t){return O(t,u)});I=N.some(function(t){return t.signedDistanceFromCamera<=0})?[]:N.map(function(t){return t.point})}var z=[];if(I.length>0){for(var F=I[0].clone(),B=I[0].clone(),U=1;U<I.length;U++)F.x=Math.min(F.x,I[U].x),F.y=Math.min(F.y,I[U].y),B.x=Math.max(B.x,I[U].x),B.y=Math.max(B.y,I[U].y);z=F.x>=A.x&&B.x<=C.x&&F.y>=A.y&&B.y<=C.y?[I]:B.x<A.x||F.x>C.x||B.y<A.y||F.y>C.y?[]:t.clipLine([I],A.x,A.y,C.x,C.y)}for(var V=0,G=z;V<G.length;V+=1){var H;M.reset(G[V],.25*S),H=M.length<=.5*S?1:Math.ceil(M.paddedLength/D)+1;for(var W=0;W<H;W++){var q=W/Math.max(H-1,1),Z=M.lerp(q),X=Z.x+100,Y=Z.y+100;d.push(X,Y,S,0);var K=X-S,J=Y-S,Q=X+S,$=Y+S;if(E=E&&this.isOffscreen(K,J,Q,$),w=w||this.isInsideGrid(K,J,Q,$),!e&&this.grid.hitTestCircle(X,Y,S,f)&&(x=!0,!c))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!c&&x||!w?[]:d,offscreen:E,collisionDetected:x}},Je.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var c=u[s],l=new t.Point(c.x+100,c.y+100);r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y),n.push(l)}for(var f={},h={},p=0,d=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));p<d.length;p+=1){var v=d[p],m=v.key;if(void 0===f[m.bucketInstanceId]&&(f[m.bucketInstanceId]={}),!f[m.bucketInstanceId][m.featureIndex]){var g=[new t.Point(v.x1,v.y1),new t.Point(v.x2,v.y1),new t.Point(v.x2,v.y2),new t.Point(v.x1,v.y2)];t.polygonIntersectsPolygon(n,g)&&(f[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},Je.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},Je.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},Je.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return L(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},Je.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},Je.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary},Je.prototype.getViewportMatrix=function(){var e=t.identity([]);return t.translate(e,e,[-100,-100,0]),e};var Qe=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};Qe.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var $e=function(t,e,n,r,i){this.text=new Qe(t?t.text:null,e,n,i),this.icon=new Qe(t?t.icon:null,e,r,i)};$e.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var tn=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},en=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},nn=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},rn=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};rn.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var on=function(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new Je(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new rn(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};on.prototype.getBucketParts=function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),l=r.tileSize/t.EXTENT,f=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h="map"===u.get("text-pitch-alignment"),p="map"===u.get("text-rotation-alignment"),d=D(r,1,this.transform.zoom),v=E(f,h,p,this.transform,d),m=null;if(h){var g=S(f,h,p,this.transform,d);m=t.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[o.bucketInstanceId]=new nn(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var y={bucket:o,layout:u,posMatrix:f,textLabelPlaneMatrix:v,labelToScreenMatrix:m,scale:c,textPixelRatio:l,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var _=0,b=o.sortKeyRanges;_<b.length;_+=1){var x=b[_];e.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}},on.prototype.attemptAnchorPlacement=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d){var v,m=[f.textOffset0,f.textOffset1],g=N(t,n,r,m,i),y=this.collisionIndex.placeCollisionBox(z(e,g.x,g.y,o,a,this.transform.angle),l,s,u,c.predicate);if(!d||0!==this.collisionIndex.placeCollisionBox(z(d,g.x,g.y,o,a,this.transform.angle),l,s,u,c.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID].text&&(v=this.prevPlacement.variableOffsets[f.crossTileID].anchor),this.variableOffsets[f.crossTileID]={textOffset:m,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:v},this.markUsedJustification(h,t,f,p),h.allowVerticalPlacement&&(this.markUsedOrientation(h,p,f),this.placedOrientations[f.crossTileID]=p),{shift:g,placedGlyphBoxes:y}):void 0},on.prototype.placeLayerBucketPart=function(e,n,r){var i=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,l=o.labelToScreenMatrix,f=o.textPixelRatio,h=o.holdingForFade,p=o.collisionBoxArray,d=o.partiallyEvaluatedTextSize,v=o.collisionGroup,m=s.get("text-optional"),g=s.get("icon-optional"),y=s.get("text-allow-overlap"),_=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),E="viewport-y"===s.get("symbol-z-order"),S=y&&(_||!a.hasIconData()||g),O=_&&(y||!a.hasTextData()||m);!a.collisionArrays&&p&&a.deserializeCollisionBoxes(p);var T=function(e,o){if(!n[e.crossTileID])if(h)i.placements[e.crossTileID]=new tn(!1,!1,!1);else{var p,E=!1,T=!1,A=!0,C=null,k={box:null,offscreen:null},M={box:null,offscreen:null},P=null,j=null,I=0,R=0,L=0;o.textFeatureIndex?I=o.textFeatureIndex:e.useRuntimeCollisionCircles&&(I=e.featureIndex),o.verticalTextFeatureIndex&&(R=o.verticalTextFeatureIndex);var D=o.textBox;if(D){var N=function(n){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,i.markUsedOrientation(a,r=o,e))}return r},F=function(n,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,s=a.writingModes;i<s.length&&(s[i]===t.WritingMode.vertical?(k=r(),M=k):k=n(),!(k&&k.box&&k.box.length));i+=1);else k=n()};if(s.get("text-variable-anchor")){var B=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var U=i.prevPlacement.variableOffsets[e.crossTileID];B.indexOf(U.anchor)>0&&(B=B.filter(function(t){return t!==U.anchor})).unshift(U.anchor)}var V=function(t,n,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,c=e.textBoxScale,l=w&&!_?n:null,h={box:[],offscreen:!1},p=y?2*B.length:B.length,d=0;d<p;++d){var m=i.attemptAnchorPlacement(B[d%B.length],t,o,s,c,b,x,f,u,v,d>=B.length,e,a,r,l);if(m&&(h=m.placedGlyphBoxes)&&h.box&&h.box.length){E=!0,C=m.shift;break}}return h};F(function(){return V(D,o.iconBox,t.WritingMode.horizontal)},function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(k&&k.box&&k.box.length)&&e.numVerticalGlyphVertices>0&&n?V(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}}),k&&(E=k.box,A=k.offscreen);var G=N(k&&k.box);if(!E&&i.prevPlacement){var H=i.prevPlacement.variableOffsets[e.crossTileID];H&&(i.variableOffsets[e.crossTileID]=H,i.markUsedJustification(a,H.anchor,e,G))}}else{var W=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,y,f,u,v.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),r};F(function(){return W(D,t.WritingMode.horizontal)},function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?W(n,t.WritingMode.vertical):{box:null,offscreen:null}}),N(k&&k.box&&k.box.length)}}if(E=(p=k)&&p.box&&p.box.length>0,A=p&&p.offscreen,e.useRuntimeCollisionCircles){var q=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),Z=t.evaluateSizeForFeature(a.textSizeData,d,q),X=s.get("text-padding");P=i.collisionIndex.placeCollisionCircles(y,q,a.lineVertexArray,a.glyphOffsetArray,Z,u,c,l,r,x,v.predicate,e.collisionCircleDiameter,X),E=y||P.circles.length>0&&!P.collisionDetected,A=A&&P.offscreen}if(o.iconFeatureIndex&&(L=o.iconFeatureIndex),o.iconBox){var Y=function(t){var e=w&&C?z(t,C.x,C.y,b,x,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,_,f,u,v.predicate)};T=M&&M.box&&M.box.length&&o.verticalIconBox?(j=Y(o.verticalIconBox)).box.length>0:(j=Y(o.iconBox)).box.length>0,A=A&&j.offscreen}var K=m||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,J=g||0===e.numIconVertices;if(K||J?J?K||(T=T&&E):E=T&&E:T=E=T&&E,E&&p&&p.box&&i.collisionIndex.insertCollisionBox(p.box,s.get("text-ignore-placement"),a.bucketInstanceId,M&&M.box&&R?R:I,v.ID),T&&j&&i.collisionIndex.insertCollisionBox(j.box,s.get("icon-ignore-placement"),a.bucketInstanceId,L,v.ID),P&&(E&&i.collisionIndex.insertCollisionCircles(P.circles,s.get("text-ignore-placement"),a.bucketInstanceId,I,v.ID),r)){var Q=a.bucketInstanceId,$=i.collisionCircleArrays[Q];void 0===$&&($=i.collisionCircleArrays[Q]=new en);for(var tt=0;tt<P.circles.length;tt+=4)$.circles.push(P.circles[tt+0]),$.circles.push(P.circles[tt+1]),$.circles.push(P.circles[tt+2]),$.circles.push(P.collisionDetected?1:0)}i.placements[e.crossTileID]=new tn(E||S,T||O,A||a.justReloaded),n[e.crossTileID]=!0}};if(E)for(var A=a.getSortedSymbolIndexes(this.transform.angle),C=A.length-1;C>=0;--C){var k=A[C];T(a.symbolInstances.get(k),a.collisionArrays[k])}else for(var M=e.symbolInstanceStart;M<e.symbolInstanceEnd;M++)T(a.symbolInstances.get(M),a.collisionArrays[M]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){var P=this.collisionCircleArrays[a.bucketInstanceId];t.invert(P.invProjMatrix,u),P.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1},on.prototype.markUsedJustification=function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},on.prototype.markUsedOrientation=function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},on.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],c=i[s];c?(this.opacities[s]=new $e(c,r,u.text,u.icon),n=n||u.text!==c.text.placed||u.icon!==c.icon.placed):(this.opacities[s]=new $e(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var l in i){var f=i[l];if(!this.opacities[l]){var h=new $e(f,r,!1,!1);h.isHidden()||(this.opacities[l]=h,n=n||f.text.placed||f.icon.placed)}}for(var p in o)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=o[p]);for(var d in a)this.placedOrientations[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.placedOrientations[d]=a[d]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},on.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},on.prototype.updateBucketOpacities=function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();var o=e.layers[0].layout,a=new $e(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),c=o.get("text-variable-anchor"),l="map"===o.get("text-rotation-alignment"),f="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),p=new $e(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(r);for(var d=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},v=0;v<e.symbolInstances.length;v++)!function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,v=o.crossTileID,m=i.opacities[v];n[v]?m=a:m||(i.opacities[v]=m=p),n[v]=!0;var g=o.numIconVertices>0,y=i.placedOrientations[o.crossTileID],_=y===t.WritingMode.vertical,b=y===t.WritingMode.horizontal||y===t.WritingMode.horizontalOnly;if(s>0||u>0){var x=B(m.text);d(e.text,s,_?pn:x),d(e.text,u,b?pn:x);var w=m.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach(function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=w||_?1:0)}),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var E=i.variableOffsets[o.crossTileID];E&&i.markUsedJustification(e,E.anchor,o,y);var S=i.placedOrientations[o.crossTileID];S&&(i.markUsedJustification(e,"left",o,S),i.markUsedOrientation(e,S,o))}if(g){var O=B(m.icon),T=!(h&&o.verticalPlacedIconSymbolIndex&&_);o.placedIconSymbolIndex>=0&&(d(e.icon,o.numIconVertices,T?O:pn),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=m.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(d(e.icon,o.numVerticalIconVertices,T?pn:O),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){var A=e.collisionArrays[r];if(A){var C=new t.Point(0,0);if(A.textBox||A.verticalTextBox){var k=!0;if(c){var M=i.variableOffsets[v];M?(C=N(M.anchor,M.width,M.height,M.textOffset,M.textBoxScale),l&&C._rotate(f?i.transform.angle:-i.transform.angle)):k=!1}A.textBox&&F(e.textCollisionBox.collisionVertexArray,m.text.placed,!k||_,C.x,C.y),A.verticalTextBox&&F(e.textCollisionBox.collisionVertexArray,m.text.placed,!k||b,C.x,C.y)}var P=Boolean(!b&&A.verticalIconBox);A.iconBox&&F(e.iconCollisionBox.collisionVertexArray,m.icon.placed,P,h?C.x:0,h?C.y:0),A.verticalIconBox&&F(e.iconCollisionBox.collisionVertexArray,m.icon.placed,!P,h?C.x:0,h?C.y:0)}}}(v);if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.bucketInstanceId in this.collisionCircleArrays){var m=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=m.invProjMatrix,e.placementViewportMatrix=m.viewportMatrix,e.collisionCircleArray=m.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}},on.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},on.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},on.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},on.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},on.prototype.setStale=function(){this.stale=!0};var an=Math.pow(2,25),sn=Math.pow(2,24),un=Math.pow(2,17),cn=Math.pow(2,16),ln=Math.pow(2,9),fn=Math.pow(2,8),hn=Math.pow(2,1),pn=0,dn=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};dn.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(function(t,e){return t.sortKey-e.sortKey}));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var vn=function(t,e,n,r,i,o,a){this.placement=new on(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};vn.prototype.isDone=function(){return this._done},vn.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new dn(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},vn.prototype.commit=function(t){return this.placement.commit(t),this.placement};var mn=512/t.EXTENT/2,gn=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};gn.prototype.getScaledCoordinates=function(e,n){var r=mn/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},gn.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,c=a;u<c.length;u+=1){var l=c[u];if(Math.abs(l.coord.x-s.x)<=r&&Math.abs(l.coord.y-s.y)<=r&&!n[l.crossTileID]){n[l.crossTileID]=!0,o.crossTileID=l.crossTileID;break}}}}};var yn=function(){this.maxCrossTileID=0};yn.prototype.generate=function(){return++this.maxCrossTileID};var _n=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};_n.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},_n.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var c=a[t.scaledTo(Number(o)).key];c&&c.findMatches(e.symbolInstances,t,i)}}for(var l=0;l<e.symbolInstances.length;l++){var f=e.symbolInstances.get(l);f.crossTileID||(f.crossTileID=n.generate(),i[f.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new gn(t,e.symbolInstances,e.bucketInstanceId),!0},_n.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},_n.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var bn=function(){this.layerIndexes={},this.crossTileIDs=new yn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};bn.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new _n);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],c=u.getBucket(t);c&&t.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,c,this.crossTileIDs)&&(i=!0),o[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},bn.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var xn=function(e,n){return t.emitValidationErrors(e,n&&n.filter(function(t){return"source.canvas"!==t.identifier}))},wn=t.pick(Ze,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),En=t.pick(Ze,["setCenter","setZoom","setBearing","setPitch"]),Sn=function(){var e={},n=t.styleSpec.$version;for(var r in t.styleSpec.$root){var i,o=t.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(e[r]=i)}return e}(),On=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new Bt(p(),this),this.imageManager=new Pt,this.imageManager.setEventedParent(this),this.glyphManager=new Lt(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new Ft(256,512),this.crossTileSymbolIndex=new bn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange(function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every(function(t){return t}))for(var r in a.sourceCaches)a.sourceCaches[r].reload()})}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}})}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)})},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){r._request=null,r._load(e,!1!==n.validate)})},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(Sn,!1)},n.prototype._load=function(e,n){if(!n||!xn(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=v(this.stylesheet.layers);this._order=i.map(function(t){return t.id}),this._layers={},this._serializedLayers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new zt(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,r){function i(){if(s)r(s);else if(o&&a){var e=t.browser.getImageData(a),n={};for(var i in o){var u=o[i],c=u.width,l=u.height,f=u.x,h=u.y,p=u.sdf,d=u.pixelRatio,v=u.stretchX,m=u.stretchY,g=u.content,y=new t.RGBAImage({width:c,height:l});t.RGBAImage.copy(e,y,{x:f,y:h},{x:0,y:0},{width:c,height:l}),n[i]={data:y,pixelRatio:d,sdf:p,stretchX:v,stretchY:m,content:g}}r(null,n)}}var o,a,s,u=t.browser.devicePixelRatio>1?"@2x":"",c=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,u,".json"),t.ResourceType.SpriteJSON),function(t,e){c=null,s||(s=t,o=e,i())}),l=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,u,".png"),t.ResourceType.SpriteImage),function(t,e){l=null,s||(s=t,a=e,i())});return{cancel:function(){c&&(c.cancel(),c=null),l&&(l.cancel(),l=null)}}}(e,this.map._requestManager,function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))})},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}var u={};for(var c in this.sourceCaches){var l=this.sourceCaches[c];u[c]=l.used,l.used=!1}for(var f=0,h=this._order;f<h.length;f+=1){var p=this._layers[h[f]];p.recalculate(e,this._availableImages),!p.isHidden(e.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}for(var d in u){var v=this.sourceCaches[d];u[d]!==v.used&&v.fire(new t.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),xn(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=v(e.layers);var r=function(e,n){if(!e)return[{command:Ze.setStyle,args:[n]}];var r=[];try{if(!t.deepEqual(e.version,n.version))return[{command:Ze.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||r.push({command:Ze.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||r.push({command:Ze.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||r.push({command:Ze.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||r.push({command:Ze.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||r.push({command:Ze.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||r.push({command:Ze.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||r.push({command:Ze.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||r.push({command:Ze.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||g(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&_(e,n,o)?r.push({command:Ze.setGeoJSONSourceData,args:[o,n[o].data]}):y(o,n,r,i)):m(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach(function(t){i[t.source]?r.push({command:Ze.removeLayer,args:[t.id]}):a.push(t)}),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,c,l,f=(e=e||[]).map(x),h=n.map(x),p=e.reduce(w,{}),d=n.reduce(w,{}),v=f.slice(),m=Object.create(null);for(i=0,o=0;i<f.length;i++)d.hasOwnProperty(a=f[i])?o++:(r.push({command:Ze.removeLayer,args:[a]}),v.splice(v.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)v[v.length-1-i]!==(a=h[h.length-1-i])&&(p.hasOwnProperty(a)?(r.push({command:Ze.removeLayer,args:[a]}),v.splice(v.lastIndexOf(a,v.length-o),1)):o++,r.push({command:Ze.addLayer,args:[d[a],c=v[v.length-i]]}),v.splice(v.length-i,0,a),m[a]=!0);for(i=0;i<h.length;i++)if(s=p[a=h[i]],u=d[a],!m[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(l in b(s.layout,u.layout,r,a,null,Ze.setLayoutProperty),b(s.paint,u.paint,r,a,null,Ze.setPaintProperty),t.deepEqual(s.filter,u.filter)||r.push({command:Ze.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:Ze.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?b(s[l],u[l],r,a,l.slice(6),Ze.setPaintProperty):t.deepEqual(s[l],u[l])||r.push({command:Ze.setLayerProperty,args:[a,l,u[l]]}));for(l in u)u.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&"layout"!==l&&"paint"!==l&&"filter"!==l&&"metadata"!==l&&"minzoom"!==l&&"maxzoom"!==l&&(0===l.indexOf("paint.")?b(s[l],u[l],r,a,l.slice(6),Ze.setPaintProperty):t.deepEqual(s[l],u[l])||r.push({command:Ze.setLayerProperty,args:[a,l,u[l]]}))}else r.push({command:Ze.removeLayer,args:[a]}),c=v[v.lastIndexOf(a)+1],r.push({command:Ze.addLayer,args:[u,c]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:Ze.setStyle,args:[n]}]}return r}(this.serialize(),e).filter(function(t){return!(t.command in En)});if(0===r.length)return!1;var i=r.filter(function(t){return!(t.command in wn)});if(i.length>0)throw new Error("Unimplemented: "+i.map(function(t){return t.command}).join(", ")+".");return r.forEach(function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)}),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._afterImageUpdated(e)},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._afterImageUpdated(e)},n.prototype._afterImageUpdated=function(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Ve(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(xn(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var c=u[s][a];if(c)for(var l=0,f=c;l<f.length;l+=1)i.push(f[l])}}}i.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var h=[],p=this._order.length-1;p>=0;p--){var d=this._order[p];if(n(d))for(var v=i.length-1;v>=0;v--){var m=i[v].feature;if(r[m.layer.id]<p)break;h.push(m),i.pop()}else for(var g=0,y=t;g<y.length;g+=1){var _=y[g][d];if(_)for(var b=0,x=_;b<x.length;b+=1)h.push(x[b].feature)}}return h},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[l.source]=!0}}var f=[];for(var h in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[h]||f.push(u(this.sourceCaches[h],this._layers,this._serializedLayers,e,n,r));return this.placement&&f.push(function(t,e,n,r,i,o,a){for(var s={},u=o.queryRenderedSymbols(r),l=[],f=0,h=Object.keys(u).map(Number);f<h.length;f+=1)l.push(a[h[f]]);l.sort(c);for(var p=0,d=l;p<d.length;p+=1)!function(){var n=d[p],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],c=r[o];c.sort(function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex});for(var l=0,f=c;l<f.length;l+=1)a.push(f[l])}}();for(var v in s)!function(e){s[e].forEach(function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o})}(v);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(f)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&xn(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},c=0,l=this._order;c<l.length;c+=1){var f=this._layers[l[c]];if("symbol"===f.type){if(!u[f.source]){var h=this.sourceCaches[f.source];u[f.source]=h.getRenderableIds(!0).map(function(t){return h.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var p=this.crossTileSymbolIndex.addLayer(f,u[f.source],e.center.lng);a=a||p}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new vn(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var d=0,v=this._order;d<v.length;d+=1){var m=this._layers[v[d]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,u[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);On.getSourceType=function(t){return Kt[t]},On.setSourceType=function(t,e){Kt[t]=e},On.registerForPluginStateChange=t.registerForPluginStateChange;var Tn=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),An=U("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Cn=U("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),kn=U("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Mn=U("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Pn=U("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),jn=U("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),In=U("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Rn=U("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ln=U("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Dn=U("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Nn=U("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),zn=U("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Fn=U("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Bn=U("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Un=U("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Vn=U("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Gn=U("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Hn=U("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Wn=U("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),qn=U("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Zn=U("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Xn=U("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),Yn=U("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Kn=U("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),Jn=U("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),Qn=U("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),$n=Object.freeze({__proto__:null,prelude:An,background:Cn,backgroundPattern:kn,circle:Mn,clippingMask:Pn,heatmap:jn,heatmapTexture:In,collisionBox:Rn,collisionCircle:Ln,debug:Dn,fill:Nn,fillOutline:zn,fillOutlinePattern:Fn,fillPattern:Bn,fillExtrusion:Un,fillExtrusionPattern:Vn,hillshadePrepare:Gn,hillshade:Hn,line:Wn,lineGradient:qn,linePattern:Zn,lineSDF:Xn,raster:Yn,symbolIcon:Kn,symbolSDF:Jn,symbolTextAndIcon:Qn}),tr=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};tr.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},tr.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,c=this.context,l=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=c.currentNumAttributes||0;for(var f=u;f<s;f++)l.disableVertexAttribArray(f)}e.enableAttributes(l,t);for(var h=0,p=n;h<p.length;h+=1)p[h].enableAttributes(l,t);o&&o.enableAttributes(l,t),a&&a.enableAttributes(l,t),e.bind(),e.setVertexAttribPointers(l,t,i);for(var d=0,v=n;d<v.length;d+=1){var m=v[d];m.bind(),m.setVertexAttribPointers(l,t,i)}o&&(o.bind(),o.setVertexAttribPointers(l,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(l,t,i)),c.currentNumAttributes=u},tr.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var er=function(t,e,n,r,i,o){var a=t.gl;this.program=a.createProgram();for(var s=V(n.staticAttributes),u=r?r.getBinderAttributes():[],c=s.concat(u),l=n.staticUniforms?V(n.staticUniforms):[],f=r?r.getBinderUniforms():[],h=[],p=0,d=l.concat(f);p<d.length;p+=1){var v=d[p];h.indexOf(v)<0&&h.push(v)}var m=r?r.defines():[];o&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(An.fragmentSource,n.fragmentSource).join("\n"),y=m.concat(An.vertexSource,n.vertexSource).join("\n"),_=a.createShader(a.FRAGMENT_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(_,g),a.compileShader(_),a.attachShader(this.program,_);var b=a.createShader(a.VERTEX_SHADER);if(a.isContextLost())this.failedToCreate=!0;else{a.shaderSource(b,y),a.compileShader(b),a.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=c.length;for(var w=0;w<this.numAttributes;w++)c[w]&&(a.bindAttribLocation(this.program,w,c[w]),this.attributes[c[w]]=w);a.linkProgram(this.program),a.deleteShader(b),a.deleteShader(_);for(var E=0;E<h.length;E++){var S=h[E];if(S&&!x[S]){var O=a.getUniformLocation(this.program,S);O&&(x[S]=O)}}this.fixedUniforms=i(t,x),this.binderUniforms=r?r.getUniforms(t,x):[]}}};er.prototype.draw=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v){var m,g=t.gl;if(!this.failedToCreate){for(var y in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[y].set(a[y]);p&&p.setUniforms(t,this.binderUniforms,f,{zoom:h});for(var _=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[e],b=0,x=l.get();b<x.length;b+=1){var w=x[b],E=w.vaos||(w.vaos={});(E[s]||(E[s]=new tr)).bind(t,this,u,p?p.getPaintVertexBuffers():[],c,w.vertexOffset,d,v),g.drawElements(e,w.primitiveLength*_,g.UNSIGNED_SHORT,w.primitiveOffset*_*2)}}};var nr,rr=function(e,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(s,s,u);var c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+r,u_opacity:i}},ir=function(e,n,r,i,o,a,s){return t.extend(rr(e,n,r,i),G(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},or=function(t){return{u_matrix:t}},ar=function(e,n,r,i){return t.extend(or(e),G(r,n,i))},sr=function(t,e){return{u_matrix:t,u_world:e}},ur=function(e,n,r,i,o){return t.extend(ar(e,n,r,i),{u_world:o})},cr=function(e,n,r,i){var o,a,s=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=D(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},lr=function(t,e,n){var r=D(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},fr=function(t,e,n){return{u_matrix:t,u_inv_matrix:e,u_camera_to_center_distance:n.cameraToCenterDistance,u_viewport_size:[n.width,n.height]}},hr=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},pr=function(t){return{u_matrix:t}},dr=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:D(e,1,n),u_intensity:r}},vr=function(e,n,r){var i=e.transform;return{u_matrix:W(e,n,r),u_ratio:1/D(n,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},mr=function(e,n,r,i){return t.extend(vr(e,n,r),{u_image:0,u_image_height:i})},gr=function(e,n,r,i){var o=e.transform,a=H(n,o);return{u_matrix:W(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/D(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},yr=function(e,n,r,i,o){var a=e.lineAtlas,s=H(n,e.transform),u="round"===r.layout.get("line-cap"),c=a.getDash(i.from,u),l=a.getDash(i.to,u),f=c.width*o.fromScale,h=l.width*o.toScale;return t.extend(vr(e,n,r),{u_patternscale_a:[s/f,-c.height/2],u_patternscale_b:[s/h,-l.height/2],u_sdfgamma:a.width/(256*Math.min(f,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:l.y,u_mix:o.t})},_r=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:q(i.paint.get("raster-hue-rotate"))};var o,a},br=function(t,e,n,r,i,o,a,s,u,c){var l=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:l.cameraToCenterDistance,u_pitch:l.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:l.width/l.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:c,u_texture:0}},xr=function(e,n,r,i,o,a,s,u,c,l,f){var h=o.transform;return t.extend(br(e,n,r,i,o,a,s,u,c,l),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+f})},wr=function(e,n,r,i,o,a,s,u,c,l){return t.extend(xr(e,n,r,i,o,a,s,u,!0,c,!0),{u_texsize_icon:l,u_texture_icon:1})},Er=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Sr=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,c=Math.pow(2,r.tileID.overscaledZ),l=r.tileSize*Math.pow(2,n.transform.tileZoom)/c,f=l*(r.tileID.canonical.x+r.tileID.wrap*c),h=l*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/D(r,1,n.transform.tileZoom),u_pixel_coord_upper:[f>>16,h>>16],u_pixel_coord_lower:[65535&f,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Or={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},collisionCircle:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_inv_matrix:new t.UniformMatrix4f(e,n.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(e,n.u_viewport_size)}},debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image),u_image_height:new t.Uniform1f(e,n.u_image_height)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}},Tr=t.identity(new Float32Array(16)),Ar=new t.Color(1,0,0,1),Cr=new t.Color(0,1,0,1),kr=new t.Color(0,0,1,1),Mr=new t.Color(1,0,1,1),Pr=new t.Color(0,1,1,1),jr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=ze.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){for(var u=n.transform,c="map"===o,l="map"===a,f=0,h=e;f<h.length;f+=1){var p=h[f],d=i.getTile(p),v=d.getBucket(r);if(v&&v.text&&v.text.segments.get().length){var m=t.evaluateSizeForZoom(v.textSizeData,u.zoom),g=D(d,1,n.transform.zoom),y=E(p.posMatrix,l,c,n.transform,g),_="none"!==r.layout.get("icon-text-fit")&&v.hasIconData();if(m){var b=Math.pow(2,u.zoom-d.tileID.overscaledZ);Y(v,c,l,s,t.symbolSize,u,y,p.posMatrix,b,m,_)}}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&J(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&J(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(Z(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Z(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var c=e.context,l=c.gl,f=e.depthModeForSublayer(0,Ne.ReadOnly),h=ze.disabled,p=e.colorModeForRenderPass(),d=[],v=0;v<i.length;v++){var m=i[v],g=n.getTile(m),y=g.getBucket(r);if(y){var _=y.programConfigurations.get(r.id),b={programConfiguration:_,program:e.useProgram("circle",_),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:cr(e,m,g,r)};if(u)for(var x=0,w=y.segments.get();x<w.length;x+=1){var E=w[x];d.push({segments:new t.SegmentVector([E]),sortKey:E.sortKey,state:b})}else d.push({segments:y.segments,sortKey:0,state:b})}}u&&d.sort(function(t,e){return t.sortKey-e.sortKey});for(var S=0,O=d;S<O.length;S+=1){var T=O[S],A=T.state;A.program.draw(c,l.TRIANGLES,f,h,p,Be.disabled,A.uniformValues,r.id,A.layoutVertexBuffer,A.indexBuffer,T.segments,r.paint,e.transform.zoom,A.programConfiguration)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=ze.disabled,u=new Fe([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function(t,e,n,r){var i=t.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e.width/4,e.height/4,0,i.RGBA,t.extRenderToTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var c=0;c<i.length;c++){var l=i[c];if(!n.hasRenderableParent(l)){var f=n.getTile(l),h=f.getBucket(r);if(h){var p=h.programConfigurations.get(r.id);e.useProgram("heatmap",p).draw(o,a.TRIANGLES,Ne.disabled,s,u,Be.disabled,dr(l.posMatrix,f,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,p)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,Ne.disabled,ze.disabled,e.colorModeForRenderPass(),Be.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1))for(var s=e.depthModeForSublayer(0,Ne.ReadOnly),u=e.colorModeForRenderPass(),c=r.paint.get("line-dasharray"),l=r.paint.get("line-pattern"),f=l.constantOr(1),h=r.paint.get("line-gradient"),p=r.getCrossfadeParameters(),d=f?"linePattern":c?"lineSDF":h?"lineGradient":"line",v=e.context,m=v.gl,g=!0,y=0,_=i;y<_.length;y+=1){var b=_[y],x=n.getTile(b);if(!f||x.patternsLoaded()){var w=x.getBucket(r);if(w){var E=w.programConfigurations.get(r.id),S=e.context.program.get(),O=e.useProgram(d,E),T=g||O.program!==S,A=l.constantOr(null);if(A&&x.imageAtlas){var C=x.imageAtlas,k=C.patternPositions[A.to.toString()],M=C.patternPositions[A.from.toString()];k&&M&&E.setConstantPatternPositions(k,M)}var P=f?gr(e,x,r,p):c?yr(e,x,r,c,p):h?mr(e,x,r,w.lineClipsArray.length):vr(e,x,r);if(f)v.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),E.updatePaintBuffers(p);else if(c&&(T||e.lineAtlas.dirty))v.activeTexture.set(m.TEXTURE0),e.lineAtlas.bind(v);else if(h){var j=w.gradients[r.id],I=j.texture;if(r.gradientVersion!==j.version){var R=256;if(r.stepInterpolant){var L=n.getSource().maxzoom,D=b.canonical.z===L?Math.ceil(1<<e.transform.maxZoom-b.canonical.z):1;R=t.clamp(t.nextPowerOfTwo(w.maxLineLength/t.EXTENT*1024*D),256,v.maxTextureSize)}j.gradient=t.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:j.gradient||void 0,clips:w.lineClipsArray}),j.texture?j.texture.update(j.gradient):j.texture=new t.Texture(v,j.gradient,m.RGBA),j.version=r.gradientVersion,I=j.texture}v.activeTexture.set(m.TEXTURE0),I.bind(r.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}O.draw(v,m.TRIANGLES,s,e.stencilModeForClipping(b),u,Be.disabled,P,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,e.transform.zoom,E,w.layoutVertexBuffer2),g=!1}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){$(e,n,r,i,e.depthModeForSublayer(1,"opaque"===e.renderPass?Ne.ReadWrite:Ne.ReadOnly),s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){$(e,n,r,i,e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,Ne.ReadOnly),s,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new Ne(t.context.gl.LEQUAL,Ne.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))tt(t,e,n,r,o,ze.disabled,Fe.disabled),tt(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();tt(t,e,n,r,o,ze.disabled,a)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=t.depthModeForSublayer(0,Ne.ReadOnly),a=t.colorModeForRenderPass(),s="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],u=s[0],c=0,l=s[1];c<l.length;c+=1){var f=l[c],h=e.getTile(f);h.needsHillshadePrepare&&"offscreen"===t.renderPass?nt(t,h,n,o,ze.disabled,a):"translucent"===t.renderPass&&et(t,h,n,o,u[f.overscaledZ],a)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),c=a instanceof Zt?[{},r]:t.stencilConfigForOverlap(r),l=c[0],f=c[1],h=f[f.length-1].overscaledZ,p=!t.options.moving,d=0,v=f;d<v.length;d+=1){var m=v[d],g=t.depthModeForSublayer(m.overscaledZ-h,1===n.paint.get("raster-opacity")?Ne.ReadWrite:Ne.ReadOnly,o.LESS),y=e.getTile(m),_=t.transform.calculatePosMatrix(m.toUnwrapped(),p);y.registerFadeDuration(n.paint.get("raster-fade-duration"));var b=e.findLoadedParent(m,0),x=rt(y,b,e,n,t.transform),w=void 0,E=void 0,S="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),b?(b.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),E=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(S,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var O=_r(_,E||[0,0],w||1,x,n);a instanceof Zt?s.draw(i,o.TRIANGLES,g,ze.disabled,u,Be.disabled,O,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,g,l[m.overscaledZ],u,Be.disabled,O,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,c=n.paint.get("background-pattern");if(!t.isPatternMissing(c)){var l=!c&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===l){var f=ze.disabled,h=t.depthModeForSublayer(0,"opaque"===l?Ne.ReadWrite:Ne.ReadOnly),p=t.colorModeForRenderPass(),d=t.useProgram(c?"backgroundPattern":"background"),v=s.coveringTiles({tileSize:u});c&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var m=n.getCrossfadeParameters(),g=0,y=v;g<y.length;g+=1){var _=y[g],b=t.transform.calculatePosMatrix(_.toUnwrapped()),x=c?Sr(b,i,t,c,{tileID:_,tileSize:u},m):Er(b,i,r);d.draw(o,a.TRIANGLES,h,f,p,Be.disabled,x,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)st(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(ze.disabled);var a="3d"===i.renderingMode?new Ne(t.context.gl.LEQUAL,Ne.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Ne.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},Ir=function(t,e){this.context=new Ue(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Ve.maxUnderzooming+Ve.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new bn,this.gpuTimers={}};Ir.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},Ir.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Tn.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Tn.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,qt.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Tn.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new ze({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},Ir.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,Ne.disabled,this.stencilClearMode,Fe.disabled,Be.disabled,pr(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ir.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(Fe.disabled),n.setDepthMode(Ne.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,Ne.disabled,new ze({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),Fe.disabled,Be.disabled,pr(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ir.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new ze({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},Ir.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new ze({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},Ir.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,r=t.sort(function(t,e){return e.overscaledZ-t.overscaledZ}),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new ze({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[i]=ze.disabled,e),r]},Ir.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Fe([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Fe.unblended:Fe.alphaBlended},Ir.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return Ne.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Ne(n||this.context.gl.LEQUAL,e,[r,r])},Ir.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ir.prototype.render=function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,c,l={},f={},h={};for(var p in o){var d=o[p];l[p]=d.getVisibleCoordinates(),f[p]=l[p].slice().reverse(),h[p]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var v=0;v<i.length;v++)if(this.style._layers[i[v]].is3D()){this.opaquePassCutoff=v;break}this.renderPass="offscreen";for(var m=0,g=i;m<g.length;m+=1){var y=this.style._layers[g[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var _=f[y.source];("custom"===y.type||_.length)&&this.renderLayer(this,o[y.source],y,_)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[i[this.currentLayer]],x=o[b.source],w=l[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var E=this.style._layers[i[this.currentLayer]],S=o[E.source],O=("symbol"===E.type?h:f)[E.source];this._renderTileClippingMasks(E,l[E.source]),this.renderLayer(this,S,E,O)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach(function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(c&&c.id)&&(c=r.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<c.getSource().maxzoom)&&(u=c))}),u&&jr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;it(t,t.transform.height-(e.top||0),3,Ar),it(t,e.bottom||0,3,Cr),ot(t,e.left||0,3,kr),ot(t,t.transform.width-(e.right||0),3,Mr);var n=t.transform.centerPoint;!function(t,e,n,r){at(t,e-1,n-10,2,20,r),at(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,Pr)}(this),this.context.setDefault()},Ir.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),jr[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ir.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},Ir.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},Ir.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},Ir.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e},Ir.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var c=[o?r[0]:D(n,r[0],this.transform.zoom),o?r[1]:D(n,r[1],this.transform.zoom),0],l=new Float32Array(16);return t.translate(l,e,c),l},Ir.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},Ir.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},Ir.prototype.isPatternMissing=function(t){if(!t)return!1;if(!t.from||!t.to)return!0;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},Ir.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new er(this.context,t,$n[t],e,Or[t],this._showOverdrawInspector)),this.cache[n]},Ir.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ir.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},Ir.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ir.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Rr=function(t,e){this.points=t,this.planes=e};Rr.fromInvProjectionMatrix=function(e,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(n){return t.transformMat4([],n,e)}).map(function(e){return t.scale$1([],e,1/e[3]/n*i)}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(e){var n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)});return new Rr(o,a)};var Lr=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};Lr.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new Lr(r,i)},Lr.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},Lr.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},Lr.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var c=Number.MAX_VALUE,l=-Number.MAX_VALUE,f=0;f<e.points.length;f++){var h=e.points[f][u]-this.min[u];c=Math.min(c,h),l=Math.max(l,h)}if(l<0||c>this.max[u]-this.min[u])return 0}return 1};var Dr=function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r};Dr.prototype.interpolate=function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this},Dr.prototype.getCenter=function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)},Dr.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},Dr.prototype.clone=function(){return new Dr(this.top,this.bottom,this.left,this.right)},Dr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Nr=function(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Dr,this._posMatrixCache={},this._alignedPosMatrixCache={}},zr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Nr.prototype.clone=function(){var t=new Nr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},zr.minZoom.get=function(){return this._minZoom},zr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},zr.maxZoom.get=function(){return this._maxZoom},zr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},zr.minPitch.get=function(){return this._minPitch},zr.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},zr.maxPitch.get=function(){return this._maxPitch},zr.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},zr.renderWorldCopies.get=function(){return this._renderWorldCopies},zr.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},zr.worldSize.get=function(){return this.tileSize*this.scale},zr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},zr.size.get=function(){return new t.Point(this.width,this.height)},zr.bearing.get=function(){return-this.angle/Math.PI*180},zr.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},zr.pitch.get=function(){return this._pitch/Math.PI*180},zr.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},zr.fov.get=function(){return this._fov/Math.PI*180},zr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},zr.zoom.get=function(){return this._zoom},zr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},zr.center.get=function(){return this._center},zr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},zr.padding.get=function(){return this._edgeInsets.toJSON()},zr.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},zr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Nr.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},Nr.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},Nr.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},Nr.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=s-1;c<=u+1;c++)0!==c&&n.push(new t.UnwrappedTileID(c,e));return n},Nr.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=Rr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var c=function(t){return{aabb:new Lr([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},l=[],f=[],h=n,p=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var d=1;d<=3;d++)l.push(c(-d)),l.push(c(d));for(l.push(c(0));l.length>0;){var v=l.pop(),m=v.x,g=v.y,y=v.fullyVisible;if(!y){var _=v.aabb.intersects(s);if(0===_)continue;y=2===_}var b=v.aabb.distanceX(a),x=v.aabb.distanceY(a),w=Math.max(Math.abs(b),Math.abs(x));if(v.zoom===h||w>3+(1<<h-v.zoom)-2&&v.zoom>=u)f.push({tileID:new t.OverscaledTileID(v.zoom===h?p:v.zoom,v.wrap,v.zoom,m,g),distanceSq:t.sqrLen([a[0]-.5-m,a[1]-.5-g])});else for(var E=0;E<4;E++){var S=(m<<1)+E%2,O=(g<<1)+(E>>1);l.push({aabb:v.aabb.quadrant(E),zoom:v.zoom+1,x:S,y:O,wrap:v.wrap,fullyVisible:y})}}return f.sort(function(t,e){return t.distanceSq-e.distanceSq}).map(function(t){return t.tileID})},Nr.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},zr.unmodified.get=function(){return this._unmodified},Nr.prototype.zoomScale=function(t){return Math.pow(2,t)},Nr.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},Nr.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},Nr.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},zr.point.get=function(){return this.project(this.center)},Nr.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},Nr.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},Nr.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},Nr.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},Nr.prototype.coordinateLocation=function(t){return t.toLngLat()},Nr.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,c=r[2]/o,l=u===c?0:(0-u)/(c-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,l)/this.worldSize,t.number(a,s,l)/this.worldSize)},Nr.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},Nr.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Nr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Nr.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Nr.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},Nr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Nr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,c=this.size,l=this._unmodified;if(this.latRange){var f=this.latRange;o=t.mercatorYfromLat(f[1])*this.worldSize,e=(a=t.mercatorYfromLat(f[0])*this.worldSize)-o<c.y?c.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,n=(u=t.mercatorXfromLng(h[1])*this.worldSize)-s<c.x?c.x/(u-s):0}var p=this.point,d=Math.max(n||0,e||0);if(d)return this.center=this.unproject(new t.Point(n?(u+s)/2:p.x,e?(a+o)/2:p.y)),this.zoom+=this.scaleZoom(d),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var v=p.y,m=c.y/2;v-m<o&&(i=o+m),v+m>a&&(i=a-m)}if(this.lngRange){var g=p.x,y=c.x/2;g-y<s&&(r=s+y),g+y>u&&(r=u-y)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:p.x,void 0!==i?i:p.y))),this._unmodified=l,this._constraining=!1}},Nr.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),c=this.height/50,l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,c,u),l[8]=2*-e.x/this.width,l[9]=2*e.y/this.height,t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-a,-s,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l,this.invProjMatrix=t.invert([],this.projMatrix);var f=this.width%2/2,h=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),v=a-Math.round(a)+p*f+d*h,m=s-Math.round(s)+p*h+d*f,g=new Float64Array(l);if(t.translate(g,g,[v>.5?v-1:v,m>.5?m-1:m,0]),this.alignedProjMatrix=g,l=t.create(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=t.create(),t.scale(l,l,[1,-1,1]),t.translate(l,l,[-1,-1,0]),t.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Nr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},Nr.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},Nr.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var c=u[s];r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(Nr.prototype,zr);var Fr=function(e){var n,r,i,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};Fr.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Fr.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Fr.prototype.getHashString=function(e){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),c=this._map.getPitch(),l="";if(l+=e?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||c)&&(l+="/"+Math.round(10*u)/10),c&&(l+="/"+Math.round(c)),this._hashName){var f=this._hashName,h=!1,p=t.window.location.hash.slice(1).split("&").map(function(t){var e=t.split("=")[0];return e===f?(h=!0,e+"="+l):t}).filter(function(t){return t});return h||p.push(f+"="+l),"#"+p.join("&")}return"#"+l},Fr.prototype._getCurrentHash=function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map(function(t){return t.split("=")}).forEach(function(t){t[0]===n._hashName&&(e=t)}),(e&&e[1]||"").split("/")):r.split("/")},Fr.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some(function(t){return isNaN(t)})){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},Fr.prototype._updateHashUnthrottled=function(){var e=t.window.location.href.replace(/(#.+)?$/,this.getHashString());try{t.window.history.replaceState(t.window.history.state,null,e)}catch(t){}};var Br={linearity:.3,easing:t.bezier(0,0,.3,1)},Ur=t.extend({deceleration:2500,maxSpeed:1400},Br),Vr=t.extend({deceleration:20,maxSpeed:1400},Br),Gr=t.extend({deceleration:1e3,maxSpeed:360},Br),Hr=t.extend({deceleration:1e3,maxSpeed:90},Br),Wr=function(t){this._map=t,this.clear()};Wr.prototype.clear=function(){this._inertiaBuffer=[]},Wr.prototype.record=function(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:e})},Wr.prototype._drainInertiaBuffer=function(){for(var e=this._inertiaBuffer,n=t.browser.now();e.length>0&&n-e[0].time>160;)e.shift()},Wr.prototype._onMoveEnd=function(e){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var n={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},r=0,i=this._inertiaBuffer;r<i.length;r+=1){var o=i[r].settings;n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround)}var a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(n.pan.mag()){var u=ct(n.pan.mag(),a,t.extend({},Ur,e||{}));s.offset=n.pan.mult(u.amount/n.pan.mag()),s.center=this._map.transform.center,ut(s,u)}if(n.zoom){var c=ct(n.zoom,a,Vr);s.zoom=this._map.transform.zoom+c.amount,ut(s,c)}if(n.bearing){var l=ct(n.bearing,a,Gr);s.bearing=this._map.transform.bearing+t.clamp(l.amount,-179,179),ut(s,l)}if(n.pitch){var f=ct(n.pitch,a,Hr);s.pitch=this._map.transform.pitch+f.amount,ut(s,f)}if(s.zoom||s.bearing){var h=void 0===n.pinchAround?n.around:n.pinchAround;s.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),t.extend(s,{noMoveStart:!0})}};var qr=function(e){function n(n,r,i,o){void 0===o&&(o={});var a=St.mousePos(r.getCanvasContainer(),i),s=r.unproject(a);e.call(this,n,t.extend({point:a,lngLat:s,originalEvent:i},o)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Zr=function(e){function n(n,r,i){var o="touchend"===n?i.changedTouches:i.touches,a=St.touchPos(r.getCanvasContainer(),o),s=a.map(function(t){return r.unproject(t)}),u=a.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new t.Point(0,0)),c=r.unproject(u);e.call(this,n,{points:a,point:u,lngLats:s,lngLat:c,originalEvent:i}),this._defaultPrevented=!1}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),Xr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),Yr=function(t,e){this._map=t,this._clickTolerance=e.clickTolerance};Yr.prototype.reset=function(){delete this._mousedownPos},Yr.prototype.wheel=function(t){return this._firePreventable(new Xr(t.type,this._map,t))},Yr.prototype.mousedown=function(t,e){return this._mousedownPos=e,this._firePreventable(new qr(t.type,this._map,t))},Yr.prototype.mouseup=function(t){this._map.fire(new qr(t.type,this._map,t))},Yr.prototype.click=function(t,e){this._mousedownPos&&this._mousedownPos.dist(e)>=this._clickTolerance||this._map.fire(new qr(t.type,this._map,t))},Yr.prototype.dblclick=function(t){return this._firePreventable(new qr(t.type,this._map,t))},Yr.prototype.mouseover=function(t){this._map.fire(new qr(t.type,this._map,t))},Yr.prototype.mouseout=function(t){this._map.fire(new qr(t.type,this._map,t))},Yr.prototype.touchstart=function(t){return this._firePreventable(new Zr(t.type,this._map,t))},Yr.prototype.touchmove=function(t){this._map.fire(new Zr(t.type,this._map,t))},Yr.prototype.touchend=function(t){this._map.fire(new Zr(t.type,this._map,t))},Yr.prototype.touchcancel=function(t){this._map.fire(new Zr(t.type,this._map,t))},Yr.prototype._firePreventable=function(t){if(this._map.fire(t),t.defaultPrevented)return{}},Yr.prototype.isEnabled=function(){return!0},Yr.prototype.isActive=function(){return!1},Yr.prototype.enable=function(){},Yr.prototype.disable=function(){};var Kr=function(t){this._map=t};Kr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Kr.prototype.mousemove=function(t){this._map.fire(new qr(t.type,this._map,t))},Kr.prototype.mousedown=function(){this._delayContextMenu=!0},Kr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Kr.prototype.contextmenu=function(t){this._delayContextMenu?this._contextMenuEvent=t:this._map.fire(new qr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()},Kr.prototype.isEnabled=function(){return!0},Kr.prototype.isActive=function(){return!1},Kr.prototype.enable=function(){},Kr.prototype.disable=function(){};var Jr=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=e.clickTolerance||1};Jr.prototype.isEnabled=function(){return!!this._enabled},Jr.prototype.isActive=function(){return!!this._active},Jr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Jr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jr.prototype.mousedown=function(t,e){this.isEnabled()&&t.shiftKey&&0===t.button&&(St.disableDrag(),this._startPos=this._lastPos=e,this._active=!0)},Jr.prototype.mousemoveWindow=function(t,e){if(this._active){var n=e;if(!(this._lastPos.equals(n)||!this._box&&n.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=n,this._box||(this._box=St.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,n.x),o=Math.max(r.x,n.x),a=Math.min(r.y,n.y),s=Math.max(r.y,n.y);St.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}}},Jr.prototype.mouseupWindow=function(e,n){var r=this;if(this._active&&0===e.button){var i=this._startPos,o=n;if(this.reset(),St.suppressClick(),i.x!==o.x||i.y!==o.y)return this._map.fire(new t.Event("boxzoomend",{originalEvent:e})),{cameraAnimation:function(t){return t.fitScreenCoordinates(i,o,r._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",e)}},Jr.prototype.keydown=function(t){this._active&&27===t.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",t))},Jr.prototype.blur=function(){this.reset()},Jr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(St.remove(this._box),this._box=null),St.enableDrag(),delete this._startPos,delete this._lastPos},Jr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Qr=function(t){this.reset(),this.numTouches=t.numTouches};Qr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Qr.prototype.touchstart=function(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=function(e){for(var n=new t.Point(0,0),r=0,i=e;r<i.length;r+=1)n._add(i[r]);return n.div(e.length)}(n),this.touches=lt(r,n)))},Qr.prototype.touchmove=function(t,e,n){if(!this.aborted&&this.centroid){var r=lt(n,e);for(var i in this.touches){var o=r[i];(!o||o.dist(this.touches[i])>30)&&(this.aborted=!0)}}},Qr.prototype.touchend=function(t,e,n){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var $r=function(t){this.singleTap=new Qr(t),this.numTaps=t.numTaps,this.reset()};$r.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},$r.prototype.touchstart=function(t,e,n){this.singleTap.touchstart(t,e,n)},$r.prototype.touchmove=function(t,e,n){this.singleTap.touchmove(t,e,n)},$r.prototype.touchend=function(t,e,n){var r=this.singleTap.touchend(t,e,n);if(r){var i=t.timeStamp-this.lastTime<500,o=!this.lastTap||this.lastTap.dist(r)<30;if(i&&o||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var ti=function(){this._zoomIn=new $r({numTouches:1,numTaps:2}),this._zoomOut=new $r({numTouches:2,numTaps:1}),this.reset()};ti.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ti.prototype.touchstart=function(t,e,n){this._zoomIn.touchstart(t,e,n),this._zoomOut.touchstart(t,e,n)},ti.prototype.touchmove=function(t,e,n){this._zoomIn.touchmove(t,e,n),this._zoomOut.touchmove(t,e,n)},ti.prototype.touchend=function(t,e,n){var r=this,i=this._zoomIn.touchend(t,e,n),o=this._zoomOut.touchend(t,e,n);return i?(this._active=!0,t.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()+1,around:e.unproject(i)},{originalEvent:t})}}):o?(this._active=!0,t.preventDefault(),setTimeout(function(){return r.reset()},0),{cameraAnimation:function(e){return e.easeTo({duration:300,zoom:e.getZoom()-1,around:e.unproject(o)},{originalEvent:t})}}):void 0},ti.prototype.touchcancel=function(){this.reset()},ti.prototype.enable=function(){this._enabled=!0},ti.prototype.disable=function(){this._enabled=!1,this.reset()},ti.prototype.isEnabled=function(){return this._enabled},ti.prototype.isActive=function(){return this._active};var ei={0:1,2:2},ni=function(t){this.reset(),this._clickTolerance=t.clickTolerance||1};ni.prototype.blur=function(){this.reset()},ni.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ni.prototype._correctButton=function(t,e){return!1},ni.prototype._move=function(t,e){return{}},ni.prototype.mousedown=function(t,e){if(!this._lastPoint){var n=St.mouseButton(t);this._correctButton(t,n)&&(this._lastPoint=e,this._eventButton=n)}},ni.prototype.mousemoveWindow=function(t,e){var n=this._lastPoint;if(n)if(t.preventDefault(),function(t,e){var n=ei[e];return void 0===t.buttons||(t.buttons&n)!==n}(t,this._eventButton))this.reset();else if(this._moved||!(e.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=e,this._move(n,e)},ni.prototype.mouseupWindow=function(t){this._lastPoint&&St.mouseButton(t)===this._eventButton&&(this._moved&&St.suppressClick(),this.reset())},ni.prototype.enable=function(){this._enabled=!0},ni.prototype.disable=function(){this._enabled=!1,this.reset()},ni.prototype.isEnabled=function(){return this._enabled},ni.prototype.isActive=function(){return this._active};var ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.mousedown=function(e,n){t.prototype.mousedown.call(this,e,n),this._lastPoint&&(this._active=!0)},e.prototype._correctButton=function(t,e){return 0===e&&!t.ctrlKey},e.prototype._move=function(t,e){return{around:e,panDelta:e.sub(t)}},e}(ni),ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=.8*(e.x-t.x);if(n)return this._active=!0,{bearingDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(ni),oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._correctButton=function(t,e){return 0===e&&t.ctrlKey||2===e},e.prototype._move=function(t,e){var n=-.5*(e.y-t.y);if(n)return this._active=!0,{pitchDelta:n}},e.prototype.contextmenu=function(t){t.preventDefault()},e}(ni),ai=function(t){this._minTouches=1,this._clickTolerance=t.clickTolerance||1,this.reset()};ai.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},ai.prototype.touchstart=function(t,e,n){return this._calculateTransform(t,e,n)},ai.prototype.touchmove=function(t,e,n){if(this._active&&!(n.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,e,n)},ai.prototype.touchend=function(t,e,n){this._calculateTransform(t,e,n),this._active&&n.length<this._minTouches&&this.reset()},ai.prototype.touchcancel=function(){this.reset()},ai.prototype._calculateTransform=function(e,n,r){r.length>0&&(this._active=!0);var i=lt(r,n),o=new t.Point(0,0),a=new t.Point(0,0),s=0;for(var u in i){var c=i[u],l=this._touches[u];l&&(o._add(c),a._add(c.sub(l)),s++,i[u]=c)}if(this._touches=i,!(s<this._minTouches)&&a.mag()){var f=a.div(s);if(this._sum._add(f),!(this._sum.mag()<this._clickTolerance))return{around:o.div(s),panDelta:f}}},ai.prototype.enable=function(){this._enabled=!0},ai.prototype.disable=function(){this._enabled=!1,this.reset()},ai.prototype.isEnabled=function(){return this._enabled},ai.prototype.isActive=function(){return this._active};var si=function(){this.reset()};si.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},si.prototype._start=function(t){},si.prototype._move=function(t,e,n){return{}},si.prototype.touchstart=function(t,e,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([e[0],e[1]]))},si.prototype.touchmove=function(t,e,n){if(this._firstTwoTouches){t.preventDefault();var r=this._firstTwoTouches,i=r[1],o=ft(n,e,r[0]),a=ft(n,e,i);if(o&&a){var s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,t)}}},si.prototype.touchend=function(t,e,n){if(this._firstTwoTouches){var r=this._firstTwoTouches,i=r[1],o=ft(n,e,r[0]),a=ft(n,e,i);o&&a||(this._active&&St.suppressClick(),this.reset())}},si.prototype.touchcancel=function(){this.reset()},si.prototype.enable=function(t){this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around},si.prototype.disable=function(){this._enabled=!1,this.reset()},si.prototype.isEnabled=function(){return this._enabled},si.prototype.isActive=function(){return this._active};var ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._distance,delete this._startDistance},e.prototype._start=function(t){this._startDistance=this._distance=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(ht(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ht(this._distance,n),pinchAround:e}},e}(si),ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},e.prototype._start=function(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])},e.prototype._move=function(t,e){var n=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pt(this._vector,n),pinchAround:e}},e.prototype._isBelowThreshold=function(t){this._minDiameter=Math.min(this._minDiameter,t.mag());var e=25/(Math.PI*this._minDiameter)*360,n=pt(t,this._startVector);return Math.abs(n)<e},e}(si),li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.reset=function(){t.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},e.prototype._start=function(t){this._lastPoints=t,dt(t[0].sub(t[1]))&&(this._valid=!1)},e.prototype._move=function(t,e,n){var r=t[0].sub(this._lastPoints[0]),i=t[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,i,n.timeStamp),this._valid)return this._lastPoints=t,this._active=!0,{pitchDelta:(r.y+i.y)/2*-.5}},e.prototype.gestureBeginsVertically=function(t,e,n){if(void 0!==this._valid)return this._valid;var r=t.mag()>=2,i=e.mag()>=2;if(r||i){if(!r||!i)return void 0===this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var o=t.y>0==e.y>0;return dt(t)&&dt(e)&&o}},e}(si),fi={panStep:100,bearingStep:15,pitchStep:10},hi=function(){var t=fi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1};hi.prototype.blur=function(){this.reset()},hi.prototype.reset=function(){this._active=!1},hi.prototype.keydown=function(t){var e=this;if(!(t.altKey||t.ctrlKey||t.metaKey)){var n=0,r=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:t.shiftKey?r=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?r=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(t.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var u=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:vt,zoom:n?Math.round(u)+n*(t.shiftKey?2:1):u,bearing:s.getBearing()+r*e._bearingStep,pitch:s.getPitch()+i*e._pitchStep,offset:[-o*e._panStep,-a*e._panStep],center:s.getCenter()},{originalEvent:t})}}}},hi.prototype.enable=function(){this._enabled=!0},hi.prototype.disable=function(){this._enabled=!1,this.reset()},hi.prototype.isEnabled=function(){return this._enabled},hi.prototype.isActive=function(){return this._active},hi.prototype.disableRotation=function(){this._rotationDisabled=!0},hi.prototype.enableRotation=function(){this._rotationDisabled=!1};var pi=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onTimeout"],this)};pi.prototype.setZoomRate=function(t){this._defaultZoomRate=t},pi.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},pi.prototype.isEnabled=function(){return!!this._enabled},pi.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},pi.prototype.isZooming=function(){return!!this._zooming},pi.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},pi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pi.prototype.wheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}},pi.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)},pi.prototype._start=function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var n=St.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},pi.prototype.renderFrame=function(){var e=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a,s="number"==typeof this._targetZoom?this._targetZoom:n.zoom,u=this._startZoom,c=this._easing,l=!1;if("wheel"===this._type&&u&&c){var f=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),h=c(f);a=t.number(u,s,h),f<1?this._frameId||(this._frameId=!0):l=!0}else a=s,l=!0;return this._active=!0,l&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._handler._triggerRenderFrame(),delete e._targetZoom,delete e._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!l,zoomDelta:a-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},pi.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n},pi.prototype.blur=function(){this.reset()},pi.prototype.reset=function(){this._active=!1};var di=function(t,e){this._clickZoom=t,this._tapZoom=e};di.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},di.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},di.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},di.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var vi=function(){this.reset()};vi.prototype.reset=function(){this._active=!1},vi.prototype.blur=function(){this.reset()},vi.prototype.dblclick=function(t,e){return t.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(t.shiftKey?-1:1),around:n.unproject(e)},{originalEvent:t})}}},vi.prototype.enable=function(){this._enabled=!0},vi.prototype.disable=function(){this._enabled=!1,this.reset()},vi.prototype.isEnabled=function(){return this._enabled},vi.prototype.isActive=function(){return this._active};var mi=function(){this._tap=new $r({numTouches:1,numTaps:1}),this.reset()};mi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},mi.prototype.touchstart=function(t,e,n){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=e[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(t,e,n))},mi.prototype.touchmove=function(t,e,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=e[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,t.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(t,e,n)},mi.prototype.touchend=function(t,e,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(t,e,n)&&(this._tapTime=t.timeStamp)},mi.prototype.touchcancel=function(){this.reset()},mi.prototype.enable=function(){this._enabled=!0},mi.prototype.disable=function(){this._enabled=!1,this.reset()},mi.prototype.isEnabled=function(){return this._enabled},mi.prototype.isActive=function(){return this._active};var gi=function(t,e,n){this._el=t,this._mousePan=e,this._touchPan=n};gi.prototype.enable=function(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},gi.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},gi.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},gi.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var yi=function(t,e,n){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=e,this._mousePitch=n};yi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},yi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},yi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},yi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var _i=function(t,e,n,r){this._el=t,this._touchZoom=e,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};_i.prototype.enable=function(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},_i.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},_i.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},_i.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},_i.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},_i.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var bi=function(t){return t.zoom||t.drag||t.pitch||t.rotate},xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(t.Event),wi=function(e,n){this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Wr(e),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n),t.bindAll(["handleEvent","handleWindowEvent"],this);var r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[t.window,"blur",void 0]];for(var i=0,o=this._listeners;i<o.length;i+=1){var a=o[i],s=a[0];St.addEventListener(s,a[1],s===t.window.document?this.handleWindowEvent:this.handleEvent,a[2])}};wi.prototype.destroy=function(){for(var e=0,n=this._listeners;e<n.length;e+=1){var r=n[e],i=r[0];St.removeEventListener(i,r[1],i===t.window.document?this.handleWindowEvent:this.handleEvent,r[2])}},wi.prototype._addDefaultHandlers=function(t){var e=this._map,n=e.getCanvasContainer();this._add("mapEvent",new Yr(e,t));var r=e.boxZoom=new Jr(e,t);this._add("boxZoom",r);var i=new ti,o=new vi;e.doubleClickZoom=new di(o,i),this._add("tapZoom",i),this._add("clickZoom",o);var a=new mi;this._add("tapDragZoom",a);var s=e.touchPitch=new li;this._add("touchPitch",s);var u=new ii(t),c=new oi(t);e.dragRotate=new yi(t,u,c),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);var l=new ri(t),f=new ai(t);e.dragPan=new gi(n,l,f),this._add("mousePan",l),this._add("touchPan",f,["touchZoom","touchRotate"]);var h=new ci,p=new ui;e.touchZoomRotate=new _i(n,p,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]);var d=e.scrollZoom=new pi(e,this);this._add("scrollZoom",d,["mousePan"]);var v=e.keyboard=new hi;this._add("keyboard",v),this._add("blockableMapEvent",new Kr(e));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var y=g[m];t.interactive&&t[y]&&e[y].enable(t[y])}},wi.prototype._add=function(t,e,n){this._handlers.push({handlerName:t,handler:e,allowed:n}),this._handlersById[t]=e},wi.prototype.stop=function(t){if(!this._updatingCamera){for(var e=0,n=this._handlers;e<n.length;e+=1)n[e].handler.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}},wi.prototype.isActive=function(){for(var t=0,e=this._handlers;t<e.length;t+=1)if(e[t].handler.isActive())return!0;return!1},wi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},wi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},wi.prototype.isMoving=function(){return Boolean(bi(this._eventsInProgress))||this.isZooming()},wi.prototype._blockedByActive=function(t,e,n){for(var r in t)if(r!==n&&(!e||e.indexOf(r)<0))return!0;return!1},wi.prototype.handleWindowEvent=function(t){this.handleEvent(t,t.type+"Window")},wi.prototype._getMapTouches=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=r[n];this._el.contains(i.target)&&e.push(i)}return e},wi.prototype.handleEvent=function(t,e){this._updatingCamera=!0;for(var n="renderFrame"===t.type?void 0:t,r={needsRenderFrame:!1},i={},o={},a=t.touches?this._getMapTouches(t.touches):void 0,s=a?St.touchPos(this._el,a):St.mousePos(this._el,t),u=0,c=this._handlers;u<c.length;u+=1){var l=c[u],f=l.handlerName,h=l.handler,p=l.allowed;if(h.isEnabled()){var d=void 0;this._blockedByActive(o,p,f)?h.reset():h[e||t.type]&&(d=h[e||t.type](t,s,a),this.mergeHandlerResult(r,i,d,f,n),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||h.isActive())&&(o[f]=h)}}var v={};for(var m in this._previousActiveHandlers)o[m]||(v[m]=n);this._previousActiveHandlers=o,(Object.keys(v).length||mt(r))&&(this._changes.push([r,i,v]),this._triggerRenderFrame()),(Object.keys(o).length||mt(r))&&this._map._stop(!0),this._updatingCamera=!1;var g=r.cameraAnimation;g&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],g(this._map))},wi.prototype.mergeHandlerResult=function(e,n,r,i,o){if(r){t.extend(e,r);var a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}},wi.prototype._applyChanges=function(){for(var e={},n={},r={},i=0,o=this._changes;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],c=a[2];s.panDelta&&(e.panDelta=(e.panDelta||new t.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(e.around=s.around),void 0!==s.pinchAround&&(e.pinchAround=s.pinchAround),s.noInertia&&(e.noInertia=s.noInertia),t.extend(n,u),t.extend(r,c)}this._updateMapTransform(e,n,r),this._changes=[]},wi.prototype._updateMapTransform=function(t,e,n){var r=this._map,i=r.transform;if(!mt(t))return this._fireEvents(e,n,!0);var o=t.panDelta,a=t.zoomDelta,s=t.bearingDelta,u=t.pitchDelta,c=t.around,l=t.pinchAround;void 0!==l&&(c=l),r._stop(!0),c=c||r.transform.centerPoint;var f=i.pointLocation(o?c.sub(o):c);s&&(i.bearing+=s),u&&(i.pitch+=u),a&&(i.zoom+=a),i.setLocationAtPoint(f,c),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(e,n,!0)},wi.prototype._fireEvents=function(e,n,r){var i=this,o=bi(this._eventsInProgress),a=bi(e),s={};for(var u in e)this._eventsInProgress[u]||(s[u+"start"]=e[u].originalEvent),this._eventsInProgress[u]=e[u];for(var c in!o&&a&&this._fireEvent("movestart",a.originalEvent),s)this._fireEvent(c,s[c]);for(var l in a&&this._fireEvent("move",a.originalEvent),e)this._fireEvent(l,e[l].originalEvent);var f,h={};for(var p in this._eventsInProgress){var d=this._eventsInProgress[p],v=d.handlerName,m=d.originalEvent;this._handlersById[v].isActive()||(delete this._eventsInProgress[p],h[p+"end"]=f=n[v]||m)}for(var g in h)this._fireEvent(g,h[g]);var y=bi(this._eventsInProgress);if(r&&(o||a)&&!y){this._updatingCamera=!0;var _=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(t){return 0!==t&&-i._bearingSnap<t&&t<i._bearingSnap};_?(b(_.bearing||this._map.getBearing())&&(_.bearing=0),this._map.easeTo(_,{originalEvent:f})):(this._map.fire(new t.Event("moveend",{originalEvent:f})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},wi.prototype._fireEvent=function(e,n){this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},wi.prototype._requestFrame=function(){var t=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(e){delete t._frameId,t.handleEvent(new xi("renderFrame",{timeStamp:e})),t._applyChanges()})},wi.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var Ei=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){e=t.LngLatBounds.convert(e);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=t.extend(o,i.padding);var s=this.transform,u=s.padding,c=s.project(t.LngLat.convert(e)),l=s.project(t.LngLat.convert(n)),f=c.rotate(-r*Math.PI/180),h=l.rotate(-r*Math.PI/180),p=new t.Point(Math.max(f.x,h.x),Math.max(f.y,h.y)),d=new t.Point(Math.min(f.x,h.x),Math.min(f.y,h.y)),v=p.sub(d),m=(s.width-(u.left+u.right+i.padding.left+i.padding.right))/v.x,g=(s.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/v.y;if(!(g<0||m<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),i.maxZoom),_="number"==typeof i.offset.x?new t.Point(i.offset.x,i.offset.y):t.Point.convert(i.offset),b=new t.Point((i.padding.left-i.padding.right)/2,(i.padding.top-i.padding.bottom)/2).rotate(r*Math.PI/180),x=_.add(b).mult(s.scale/s.zoomScale(y));return{center:s.unproject(c.add(l).div(2).sub(x)),zoom:y,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this._stop(!1,e.easeId),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),c="zoom"in e?+e.zoom:o,l="bearing"in e?this._normalizeBearing(e.bearing,a):a,f="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:i.padding,p=t.Point.convert(e.offset),d=i.centerPoint.add(p),v=i.pointLocation(d),m=t.LngLat.convert(e.center||v);this._normalizeCenter(m);var g,y,_=i.project(v),b=i.project(m).sub(_),x=i.zoomScale(c-o);e.around&&(g=t.LngLat.convert(e.around),y=i.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||c!==o,this._rotating=this._rotating||a!==l,this._pitching=this._pitching||f!==s,this._padding=!i.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,w),this._ease(function(e){if(r._zooming&&(i.zoom=t.number(o,c,e)),r._rotating&&(i.bearing=t.number(a,l,e)),r._pitching&&(i.pitch=t.number(s,f,e)),r._padding&&(i.interpolatePadding(u,h,e),d=i.centerPoint.add(p)),g)i.setLocationAtPoint(g,y);else{var v=i.zoomScale(i.zoom-o),m=c>o?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-e),E=i.unproject(_.add(b.mult(e*w)).mult(v));i.setLocationAtPoint(i.renderWorldCopies?E.wrap():E,d)}r._fireMoveEvents(n)},function(t){r._afterEase(n,t)},e),this},n.prototype._prepareEase=function(e,n,r){void 0===r&&(r={}),this._moving=!0,n||r.moving||this.fire(new t.Event("movestart",e)),this._zooming&&!r.zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e,n){if(!this._easeId||!n||this._easeId!==n){delete this._easeId;var r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new t.Event("zoomend",e)),i&&this.fire(new t.Event("rotateend",e)),o&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))}},n.prototype.flyTo=function(e,n){function r(t){var e=(T*T-O*O+(t?-1:1)*M*M*A*A)/(2*(t?T:O)*M*A);return Math.log(Math.sqrt(e*e+1)-e)}function i(t){return(Math.exp(t)-Math.exp(-t))/2}function o(t){return(Math.exp(t)+Math.exp(-t))/2}var a=this;if(!e.essential&&t.browser.prefersReducedMotion){var s=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(s,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var u=this.transform,c=this.getZoom(),l=this.getBearing(),f=this.getPitch(),h=this.getPadding(),p="zoom"in e?t.clamp(+e.zoom,u.minZoom,u.maxZoom):c,d="bearing"in e?this._normalizeBearing(e.bearing,l):l,v="pitch"in e?+e.pitch:f,m="padding"in e?e.padding:u.padding,g=u.zoomScale(p-c),y=t.Point.convert(e.offset),_=u.centerPoint.add(y),b=u.pointLocation(_),x=t.LngLat.convert(e.center||b);this._normalizeCenter(x);var w=u.project(b),E=u.project(x).sub(w),S=e.curve,O=Math.max(u.width,u.height),T=O/g,A=E.mag();if("minZoom"in e){var C=t.clamp(Math.min(e.minZoom,c,p),u.minZoom,u.maxZoom),k=O/u.zoomScale(C-c);S=Math.sqrt(k/A*2)}var M=S*S,P=r(0),j=function(t){return o(P)/o(P+S*t)},I=function(t){return O*((o(P)*(i(e=P+S*t)/o(e))-i(P))/M)/A;var e},R=(r(1)-P)/S;if(Math.abs(A)<1e-6||!isFinite(R)){if(Math.abs(O-T)<1e-6)return this.easeTo(e,n);var L=T<O?-1:1;R=Math.abs(Math.log(T/O))/S,I=function(){return 0},j=function(t){return Math.exp(L*S*t)}}return e.duration="duration"in e?+e.duration:1e3*R/("screenSpeed"in e?+e.screenSpeed/S:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=l!==d,this._pitching=v!==f,this._padding=!u.isPaddingEqual(m),this._prepareEase(n,!1),this._ease(function(e){var r=e*R,i=1/j(r);u.zoom=1===e?p:c+u.scaleZoom(i),a._rotating&&(u.bearing=t.number(l,d,e)),a._pitching&&(u.pitch=t.number(f,v,e)),a._padding&&(u.interpolatePadding(h,m,e),_=u.centerPoint.add(y));var o=1===e?x:u.unproject(w.add(E.mult(I(r))).mult(i));u.setLocationAtPoint(u.renderWorldCopies?o.wrap():o,_),a._fireMoveEvents(n)},function(){return a._afterEase(n)},e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){return this._stop()},n.prototype._stop=function(t,e){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var n=this._onEaseEnd;delete this._onEaseEnd,n.call(this,e)}if(!t){var r=this.handlers;r&&r.stop(!1)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),Si=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Si.prototype.getDefaultPosition=function(){return"bottom-right"},Si.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=St.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=St.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=St.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Si.prototype.onRemove=function(){St.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Si.prototype._setElementTitle=function(t,e){var n=this._map._getUIString("AttributionControl."+e);t.title=n,t.setAttribute("aria-label",n)},Si.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Si.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce(function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow",this._setElementTitle(e,"MapFeedback")}},Si.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"visibility"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Si.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort(function(t,e){return t.length-e.length});var a=(t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0})).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Si.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var Oi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Oi.prototype.onAdd=function(t){this._map=t,this._container=St.create("div","mapboxgl-ctrl");var e=St.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Oi.prototype.onRemove=function(){St.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Oi.prototype.getDefaultPosition=function(){return"bottom-left"},Oi.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Oi.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Oi.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Ti=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ti.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Ti.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Ti.prototype.run=function(t){void 0===t&&(t=0);var e=this._currentlyRunning=this._queue;this._queue=[];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];if(!i.cancelled&&(i.callback(t),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ti.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ai={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ci=t.window.HTMLImageElement,ki=t.window.HTMLElement,Mi=t.window.ImageBitmap,Pi={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},ji=function(e){function n(n){var r=this;if(null!=(n=t.extend({},Pi,n)).minZoom&&null!=n.maxZoom&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=n.minPitch&&null!=n.maxPitch&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=n.minPitch&&n.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=n.maxPitch&&n.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var i=new Nr(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies);if(e.call(this,i,n),this._interactive=n.interactive,this._maxTileCacheSize=n.maxTileCacheSize,this._failIfMajorPerformanceCaveat=n.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=n.preserveDrawingBuffer,this._antialias=n.antialias,this._trackResize=n.trackResize,this._bearingSnap=n.bearingSnap,this._refreshExpiredTiles=n.refreshExpiredTiles,this._fadeDuration=n.fadeDuration,this._crossSourceCollisions=n.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=n.collectResourceTiming,this._renderTaskQueue=new Ti,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Ai,n.locale),this._clickTolerance=n.clickTolerance,this._requestManager=new t.RequestManager(n.transformRequest,n.accessToken),"string"==typeof n.container){if(this._container=t.window.document.getElementById(n.container),!this._container)throw new Error("Container '"+n.container+"' not found.")}else{if(!(n.container instanceof ki))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=n.container}if(n.maxBounds&&this.setMaxBounds(n.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1),t.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new wi(this,n),this._hash=n.hash&&new Fr("string"==typeof n.hash&&n.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,t.extend({},n.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=n.localIdeographFontFamily,n.style&&this.setStyle(n.style,{localIdeographFontFamily:n.localIdeographFontFamily}),n.attributionControl&&this.addControl(new Si({customAttribution:n.customAttribution})),this.addControl(new Oi,n.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n;var r={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(e,n){if(void 0===n&&(n=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},n.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},n.prototype.hasControl=function(t){return this._controls.indexOf(t)>-1},n.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];if(r===this.transform.width&&i===this.transform.height)return this;this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i);var o=!this._moving;return o&&this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)),this.fire(new t.Event("resize",e)),o&&this.fire(new t.Event("moveend",e)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},n.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(t){if((t=null==t?60:t)>60)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},n.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},n.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},n.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},n.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},n.prototype._createDelegatedListener=function(t,e,n){var r,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new qr(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new qr(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new qr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}},n.prototype.on=function(t,n,r){if(void 0===r)return e.prototype.on.call(this,t,n);var i=this._createDelegatedListener(t,n,r);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(o,i.delegates[o]);return this},n.prototype.once=function(t,n,r){if(void 0===r)return e.prototype.once.call(this,t,n);var i=this._createDelegatedListener(t,n,r);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},n.prototype.off=function(t,n,r){var i=this;return void 0===r?e.prototype.off.call(this,t,n):(this._delegatedListeners&&this._delegatedListeners[t]&&function(e){for(var o=e[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===n&&s.listener===r){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},n.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},n.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},n.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},n.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new On(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new On(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)})}else"object"==typeof e&&this._updateDiff(e,n)},n.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},n.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},n.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},n.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},n.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},n.prototype.getSource=function(t){return this.style.getSource(t)},n.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof Ci||Mi&&n instanceof Mi){var c=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:c.width,height:c.height},c.data),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var l=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:l}),l.onAdd&&l.onAdd(this,e)}},n.prototype.updateImage=function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Ci||Mi&&n instanceof Mi?t.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Ci||Mi&&n instanceof Mi)),void this.style.updateImage(e,r))},n.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(t){this.style.removeImage(t)},n.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},n.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},n.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},n.prototype.getLayer=function(t){return this.style.getLayer(t)},n.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},n.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},n.prototype.getFilter=function(t){return this.style.getFilter(t)},n.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},n.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},n.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},n.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},n.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},n.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},n.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=St.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=St.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=St.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=St.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=St.create("div","mapboxgl-ctrl-"+t,r)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},n.prototype._resizeCanvas=function(e,n){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},n.prototype._setupPainter=function(){var e=t.extend({},Et.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);n?(this.painter=new Ir(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},n.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},n.prototype._onMapScroll=function(t){if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},n.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},n.prototype._render=function(e){var n,r=this,i=0,o=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(n=o.createQueryEXT(),o.beginQueryEXT(o.TIME_ELAPSED_EXT,n),i=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),!this._removed){var a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,u=t.browser.now();this.style.zoomHistory.update(s,u);var c=new t.EvaluationParameters(s,{now:u,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=c.crossFadingFactor();1===l&&l===this._crossFadingFactor||(a=!0,this._crossFadingFactor=l),this.style.update(c)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var f=t.browser.now()-i;o.endQueryEXT(o.TIME_ELAPSED_EXT,n),setTimeout(function(){var e=o.getQueryObjectEXT(n,o.QUERY_RESULT_EXT)/1e6;o.deleteQueryEXT(n),r.fire(new t.Event("gpu-timing-frame",{cpuTime:f,gpuTime:e}))},50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout(function(){var e=r.painter.queryGpuTimers(h);r.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))},50)}var p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0),this}},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("orientationchange",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),gt(this._canvasContainer),gt(this._controlContainer),gt(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},n.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(t){e._frame=null,e._render(t)}))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},r.showTileBoundaries.get=function(){return!!this._showTileBoundaries},r.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},r.showPadding.get=function(){return!!this._showPadding},r.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},r.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},r.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},r.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},r.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},r.repaint.get=function(){return!!this._repaint},r.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},r.vertices.get=function(){return!!this._vertices},r.vertices.set=function(t){this._vertices=t,this._update()},n.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},r.version.get=function(){return t.version},Object.defineProperties(n.prototype,r),n}(Ei),Ii={showCompass:!0,showZoom:!0,visualizePitch:!1},Ri=function(e){var n=this;this.options=t.extend({},Ii,e),this._container=St.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(t){return n._map.zoomIn({},{originalEvent:t})}),St.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(t){return n._map.zoomOut({},{originalEvent:t})}),St.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(t){n.options.visualizePitch?n._map.resetNorthPitch({},{originalEvent:t}):n._map.resetNorth({},{originalEvent:t})}),this._compassIcon=St.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ri.prototype._updateZoomButtons=function(){var t=this._map.getZoom(),e=t===this._map.getMaxZoom(),n=t===this._map.getMinZoom();this._zoomInButton.disabled=e,this._zoomOutButton.disabled=n,this._zoomInButton.setAttribute("aria-disabled",e.toString()),this._zoomOutButton.setAttribute("aria-disabled",n.toString())},Ri.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Ri.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Li(this._map,this._compass,this.options.visualizePitch)),this._container},Ri.prototype.onRemove=function(){St.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ri.prototype._createButton=function(t,e){var n=St.create("button",t,this._container);return n.type="button",n.addEventListener("click",e),n},Ri.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var Li=function(e,n,r){void 0===r&&(r=!1),this._clickTolerance=10,this.element=n,this.mouseRotate=new ii({clickTolerance:e.dragRotate._mouseRotate._clickTolerance}),this.map=e,r&&(this.mousePitch=new oi({clickTolerance:e.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),St.addEventListener(n,"mousedown",this.mousedown),St.addEventListener(n,"touchstart",this.touchstart,{passive:!1}),St.addEventListener(n,"touchmove",this.touchmove),St.addEventListener(n,"touchend",this.touchend),St.addEventListener(n,"touchcancel",this.reset)};Li.prototype.down=function(t,e){this.mouseRotate.mousedown(t,e),this.mousePitch&&this.mousePitch.mousedown(t,e),St.disableDrag()},Li.prototype.move=function(t,e){var n=this.map,r=this.mouseRotate.mousemoveWindow(t,e);if(r&&r.bearingDelta&&n.setBearing(n.getBearing()+r.bearingDelta),this.mousePitch){var i=this.mousePitch.mousemoveWindow(t,e);i&&i.pitchDelta&&n.setPitch(n.getPitch()+i.pitchDelta)}},Li.prototype.off=function(){var t=this.element;St.removeEventListener(t,"mousedown",this.mousedown),St.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),St.removeEventListener(t,"touchmove",this.touchmove),St.removeEventListener(t,"touchend",this.touchend),St.removeEventListener(t,"touchcancel",this.reset),this.offTemp()},Li.prototype.offTemp=function(){St.enableDrag(),St.removeEventListener(t.window,"mousemove",this.mousemove),St.removeEventListener(t.window,"mouseup",this.mouseup)},Li.prototype.mousedown=function(e){this.down(t.extend({},e,{ctrlKey:!0,preventDefault:function(){return e.preventDefault()}}),St.mousePos(this.element,e)),St.addEventListener(t.window,"mousemove",this.mousemove),St.addEventListener(t.window,"mouseup",this.mouseup)},Li.prototype.mousemove=function(t){this.move(t,St.mousePos(this.element,t))},Li.prototype.mouseup=function(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()},Li.prototype.touchstart=function(t){1!==t.targetTouches.length?this.reset():(this._startPos=this._lastPos=St.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return t.preventDefault()}},this._startPos))},Li.prototype.touchmove=function(t){1!==t.targetTouches.length?this.reset():(this._lastPos=St.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:function(){return t.preventDefault()}},this._lastPos))},Li.prototype.touchend=function(t){0===t.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Li.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Di,Ni={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},zi=function(e){function n(n,r){if(e.call(this),(n instanceof t.window.HTMLElement||r)&&(n=t.extend({element:n},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&"auto"!==n.pitchAlignment?n.pitchAlignment:this._rotationAlignment,n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=St.create("div"),this._element.setAttribute("aria-label","Map marker");var i=St.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=St.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=St.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=St.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var l=c[u],f=St.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",l.rx),f.setAttributeNS(null,"ry",l.ry),s.appendChild(f)}var h=St.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var p=St.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(p);var d=St.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"opacity","0.25"),d.setAttributeNS(null,"fill","#000000");var v=St.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),d.appendChild(v);var m=St.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(6.0, 7.0)"),m.setAttributeNS(null,"fill","#FFFFFF");var g=St.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var y=St.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");var _=St.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),g.appendChild(y),g.appendChild(_),a.appendChild(s),a.appendChild(h),a.appendChild(d),a.appendChild(m),a.appendChild(g),i.appendChild(a),i.setAttributeNS(null,"height",41*this._scale+"px"),i.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(i),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),this._element.addEventListener("mousedown",function(t){t.preventDefault()}),_t(this._element,this._anchor,"marker"),this._popup=null}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),St.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},n.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=yt(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),St.setTransform(this._element,Ni[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+n+" "+e)}},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){if(!this._isDragging){var n=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=n}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag")))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},n.prototype.getRotation=function(){return this._rotation},n.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},n.prototype.getRotationAlignment=function(){return this._rotationAlignment},n.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},n.prototype.getPitchAlignment=function(){return this._pitchAlignment},n}(t.Evented),Fi={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Bi=0,Ui=!1,Vi=function(e){function n(n){e.call(this),this.options=t.extend({},Fi,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=St.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==Di?n(Di):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){n(Di="denied"!==t.state)}):n(Di=!!t.window.navigator.geolocation),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),St.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bi=0,Ui=!1},n.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},n.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},n.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},n.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},n.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},n.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},n.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},n.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Ui)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;if(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=St.create("button","mapboxgl-ctrl-geolocate",this._container),St.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=r,this._geolocateButton.setAttribute("aria-label",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=St.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new zi(this._dotElement),this._circleElement=St.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bi--,Ui=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Bi>1?(e={maximumAge:6e5,timeout:0},Ui=!0):(e=this.options.positionOptions,Ui=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Gi={maxWidth:100,unit:"metric"},Hi=function(e){this.options=t.extend({},Gi,e),t.bindAll(["_onMove","setUnit"],this)};Hi.prototype.getDefaultPosition=function(){return"bottom-left"},Hi.prototype._onMove=function(){bt(this._map,this._container,this.options)},Hi.prototype.onAdd=function(t){return this._map=t,this._container=St.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Hi.prototype.onRemove=function(){St.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Hi.prototype.setUnit=function(t){this.options.unit=t,bt(this._map,this._container,this.options)};var Wi=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Wi.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=St.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Wi.prototype.onRemove=function(){St.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Wi.prototype._setupUI=function(){var e=this._fullscreenButton=St.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);St.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Wi.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Wi.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Wi.prototype._isFullscreen=function(){return this._fullscreen},Wi.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Wi.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var qi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zi=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xi=function(e){function n(n){e.call(this),this.options=t.extend(Object.create(qi),n),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.addTo=function(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&St.remove(this._content),this._container&&(St.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},n.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},n.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=St.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(t),this._createCloseButton(),this._update(),this._focusFirstElement(),this},n.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},n.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},n.prototype.setOffset=function(t){return this.options.offset=t,this._update(),this},n.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},n.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=St.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},n.prototype._onMouseUp=function(t){this._update(t.point)},n.prototype._onMouseMove=function(t){this._update(t.point)},n.prototype._onDrag=function(t){this._update(t.point)},n.prototype._update=function(e){var n=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=St.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=St.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return n._container.classList.add(t)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=yt(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var r=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),i=this.options.anchor,o=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!i){var a,s=this._container.offsetWidth,u=this._container.offsetHeight;a=r.y+o.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?a.push("left"):r.x>this._map.transform.width-s/2&&a.push("right"),i=0===a.length?"bottom":a.join("-")}var c=r.add(o[i]).round();St.setTransform(this._container,Ni[i]+" translate("+c.x+"px,"+c.y+"px)"),_t(this._container,i,"popup")}},n.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var t=this._container.querySelector(Zi);t&&t.focus()}},n.prototype._onClose=function(){this.remove()},n}(t.Evented),Yi={version:t.version,supported:Et,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:ji,NavigationControl:Ri,GeolocateControl:Vi,AttributionControl:Si,ScaleControl:Hi,FullscreenControl:Wi,Popup:Xi,Marker:zi,Style:On,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:function(){p().acquire(Ge)},clearPrewarmedResources:function(){var t=We;t&&(t.isPreloaded()&&1===t.numActive()?(t.release(Ge),We=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return He.workerCount},set workerCount(t){He.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Yi}),r})},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(1),o=n(443),a=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"syncWithMapCamera",value:function(t){var e=t.center,n=t.zoom,r=t.pitch,i=t.bearing,a=t.viewportHeight,s=t.viewportWidth;this.viewport=new o.a({width:s,height:a,longitude:e&&e[0],latitude:e&&e[1],zoom:n,pitch:r,bearing:i})}},{key:"getZoom",value:function(){return this.viewport.zoom}},{key:"getZoomScale",value:function(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function(){return this.viewport.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(t,e){return this.viewport.projectFlat(t,e)}}]),t}()},function(t,e,n){"use strict";n(207),n(142),n(289)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(15),i=n(10),o=n(0),a=n(1),s=n(11),u=n(9),c=function(){function t(e){Object(o.a)(this,t),this.layer=e}return Object(a.a)(t,[{key:"pickRender",value:function(t){var e=this.layer.getContainer(),n=e.get(s.p.ILayerService),r=this.layer;if(r.tileLayer)return r.tileLayer.pickRender(t);r.hooks.beforePickingEncode.call(),n.renderTileLayerMask(r),r.renderModels({ispick:!0}),r.hooks.afterPickingEncode.call()}},{key:"pick",value:function(t,e){var n=this.layer.getContainer(),r=n.get(s.p.IPickingService);return"RasterLayer"===t.type?this.pickRasterLayer(t,e):(this.pickRender(e),r.pickFromPickingFBO(t,e))}},{key:"pickRasterLayer",value:function(t,e,n){var r=this.layer.getContainer(),o=r.get(s.p.IPickingService),a=r.get(s.p.IMapService),c=this.layer.getSource().extent,l=Object(u.M)(e.lngLat,c),f={x:e.x,y:e.y,type:e.type,lngLat:e.lngLat,target:e,rasterValue:null},h=n||t;if(l){var p=this.readRasterValue(t,c,a,e.x,e.y);return f.rasterValue=p,o.triggerHoverOnLayer(h,f),!0}return f.type="mousemove"===e.type?"mouseout":"un"+e.type,o.triggerHoverOnLayer(h,Object(i.a)(Object(i.a)({},f),{},{type:"unpick"})),o.triggerHoverOnLayer(h,f),!1}},{key:"readRasterValue",value:function(t,e,n,i,o){var a=t.getSource().data.dataArray[0],s=Object(r.a)(e,4),u=s[0],c=void 0===u?0:u,l=s[1],f=void 0===l?0:l,h=s[2],p=void 0===h?10:h,d=s[3],v=void 0===d?-10:d,m=n.lngLatToContainer([c,f]),g=n.lngLatToContainer([p,v]),y=g.x-m.x,_=m.y-g.y,b=[(i-m.x)/y,(o-g.y)/_],x=a.width||1,w=a.height||1,E=Math.floor(b[0]*x),S=Math.floor(b[1]*w),O=Math.max(0,S-1)*x+E;return a.data[O]}},{key:"selectFeature",value:function(t){var e=this.layer,n=Object(r.a)(t,3),i=n[0],o=n[1],a=n[2];e.hooks.beforeSelect.call([i,o,a])}},{key:"highlightPickedFeature",value:function(t){var e=Object(r.a)(t,3),n=e[0],i=e[1],o=e[2];this.layer.hooks.beforeHighlight.call([n,i,o])}},{key:"getFeatureById",value:function(t){return this.layer.getSource().getFeatureById(t)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(11),a=n(9),s=function(){function t(e){Object(r.a)(this,t),this.layer=e;var n=this.layer.getContainer();this.rendererService=n.get(o.p.IRendererService)}return Object(i.a)(t,[{key:"getColorTexture",value:function(t,e){var n=this.getTextureKey(t,e);return this.key===n?this.colorTexture:(this.createColorTexture(t,e),this.key=n,this.colorTexture)}},{key:"createColorTexture",value:function(t,e){var n=this.rendererService.createTexture2D,r=this.getColorRampBar(t,e),i=n({data:new Uint8Array(r.data),width:r.width,height:r.height,flipY:!1});return this.colorTexture=i,i}},{key:"setColorTexture",value:function(t,e,n){this.key=this.getTextureKey(e,n),this.colorTexture=t}},{key:"destroy",value:function(){var t;null===(t=this.colorTexture)||void 0===t||t.destroy()}},{key:"getColorRampBar",value:function(t,e){switch(t.type){case"cat":return Object(a.w)(t);case"quantize":return Object(a.A)(t);case"custom":return Object(a.y)(t,e);case"linear":return Object(a.z)(t,e);default:return Object(a.x)(t)}}},{key:"getTextureKey",value:function(t,e){var n;return"".concat(t.colors.join("_"),"_").concat(null===t||void 0===t?void 0:null===(n=t.positions)||void 0===n?void 0:n.join("_"),"_").concat(t.type,"_").concat(null===e||void 0===e?void 0:e.join("_"))}}]),t}()},function(t,e,n){"use strict";var r=n(1083),i={canvas:r.a};e.a=i},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(15),s=n(0),u=n(1),c=n(12),l=n(3),f=n(4),h=n(2),p=n(6),d=n(8),v=n.n(d),m=n(16),g=n(116),y=function(t){function e(){var t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(c.a)(t),"updateMode",g.a.ALWAYS),Object(p.a)(Object(c.a)(t),"renderUpdate",function(){var e=t.layer.getLayerConfig(),n=e.zIndex,r=void 0===n?10:n,i=e.update,o=void 0===i?g.a.ALWAYS:i,a=e.animateOption,s=void 0===a?{enable:!1,duration:20}:a;+t.canvas.style.zIndex===r&&(t.canvas.style.zIndex=r+""),t.updateMode!==o&&(t.updateMode=o,t.unBindListener(),t.bindListener()),t.updateMode===g.a.ALWAYS&&s.enable&&t.renderCanvas()}),Object(p.a)(Object(c.a)(t),"unBindListener",function(){t.mapService.off("mapchange",t.renderCanvas),t.mapService.off("zoomstart",t.clearCanvas),t.mapService.off("zoomend",t.renderCanvas),t.mapService.off("movestart",t.clearCanvas),t.mapService.off("moveend",t.renderCanvas)}),Object(p.a)(Object(c.a)(t),"bindListener",function(){t.updateMode===g.a.ALWAYS?t.mapService.on("mapchange",t.renderCanvas):(t.mapService.on("zoomstart",t.clearCanvas),t.mapService.on("zoomend",t.renderCanvas),t.mapService.on("movestart",t.clearCanvas),t.mapService.on("moveend",t.renderCanvas))}),Object(p.a)(Object(c.a)(t),"clearCanvas",function(){if(t.ctx){var e=t.rendererService.getViewportSize(),n=e.width,r=e.height;t.ctx.clearRect(0,0,n,r)}}),Object(p.a)(Object(c.a)(t),"renderCanvas",function(){var e=t.rendererService.getViewportSize(),n=e.width,r=e.height;if(t.prevSize[0]!==n||t.prevSize[1]!==r){t.prevSize=[n,r];var i=t.mapService.getSize(),o=Object(a.a)(i,2),s=o[0],u=o[1];t.canvas.width=n,t.canvas.height=r,t.canvas.style.width=s+"px",t.canvas.style.height=u+"px"}var c=t.layer.getLayerConfig(),l=c.drawingOnCanvas;t.ctx&&l({canvas:t.canvas,ctx:t.ctx,mapService:t.mapService,size:[n,r]})}),t}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"clearModels",value:function(){if(this.canvas){var t;null===(t=this.mapService.getContainer())||void 0===t||t.removeChild(this.canvas),this.canvas=null}this.unBindListener()}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(){var e,n,r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.update,r=void 0===n?g.a.ALWAYS:n,this.updateMode=r,this.initCanvas(),this.renderCanvas(),this.bindListener(),this.mapService.getContainer(),t.abrupt("return",[]);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"initCanvas",value:function(){var t,e=this.layer.getLayerConfig(),n=e.zIndex,r=this.mapService.getSize(),i=Object(a.a)(r,2),o=i[0],s=i[1],u=this.rendererService.getViewportSize(),c=u.width,l=u.height;this.prevSize=[c,l];var f=document.createElement("canvas");this.canvas=f,f.width=c,f.height=l,f.style.pointerEvents="none",f.style.width=o+"px",f.style.height=s+"px",f.style.position="absolute",f.style.top="0",f.style.left="0",f.style.zIndex=n+"",null===(t=this.mapService.getContainer())||void 0===t||t.appendChild(f);var h=f.getContext("2d");this.ctx=h}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){}}]),e}(m.a)},function(t,e,n){"use strict";function r(t,e){return{enable:t,mask:255,func:{cmp:o.t.EQUAL,ref:e?1:0,mask:1}}}function i(t){return t.maskOperation===o.i.OR?{enable:!0,mask:255,func:{cmp:o.t.ALWAYS,ref:1,mask:255},opFront:{fail:o.t.KEEP,zfail:o.t.REPLACE,zpass:o.t.REPLACE}}:{enable:!0,mask:255,func:{cmp:t.stencilType===o.n.SINGLE?o.t.ALWAYS:0===t.stencilIndex?o.t.ALWAYS:o.t.LESS,ref:t.stencilType===o.n.SINGLE?1:0===t.stencilIndex?2:1,mask:255},opFront:{fail:o.t.KEEP,zfail:o.t.REPLACE,zpass:o.t.REPLACE}}}e.a=r,e.b=i;var o=n(11)},function(t,e,n){"use strict";function r(t){switch(t){case"stroke":return{name:"stroke",type:i.a.Attribute,descriptor:{name:"a_Stroke",buffer:{usage:i.t.DYNAMIC_DRAW,data:[],type:i.t.FLOAT},size:4,update:function(t){var e=t.stroke;return void 0===e?[1,1,1,1]:e}}};case"opacity":return{name:"opacity",type:i.a.Attribute,descriptor:{name:"a_Opacity",buffer:{usage:i.t.STATIC_DRAW,data:[],type:i.t.FLOAT},size:1,update:function(t){var e=t.opacity;return[void 0===e?1:e]}}};case"offsets":return{name:"offsets",type:i.a.Attribute,descriptor:{name:"a_Offsets",buffer:{usage:i.t.STATIC_DRAW,data:[],type:i.t.FLOAT},size:2,update:function(t){return t.offsets}}};default:return}}e.a=r;var i=n(11)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1087);v.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(15),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(11),v=n(9),m=n(16),g=n(22),y=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.baseColor,i=void 0===r?"rgb(16,16,16)":r,o=t.brightColor,a=void 0===o?"rgb(255,176,38)":o,s=t.windowColor,u=void 0===s?"rgb(30,60,89)":s,c=t.time,l=void 0===c?0:c,f=t.sweep,h=void 0===f?{enable:!1,sweepRadius:1,sweepColor:"rgb(255, 255, 255)",sweepSpeed:.4,sweepCenter:this.cityCenter}:f;return{u_cityCenter:h.sweepCenter||this.cityCenter,u_cityMinSize:this.cityMinSize*h.sweepRadius,u_circleSweep:h.enable?1:0,u_circleSweepColor:Object(v.T)(h.sweepColor).slice(0,3),u_circleSweepSpeed:h.sweepSpeed,u_opacity:n,u_baseColor:Object(v.T)(i),u_brightColor:Object(v.T)(a),u_windowColor:Object(v.T)(u),u_time:this.layer.getLayerAnimateTime()||l}}},{key:"calCityGeo",value:function(){var t=Object(a.a)(this.layer.getSource().extent,4),e=t[0],n=t[1],r=t[2],i=t[3];if("GAODE2.x"===this.mapService.version){this.cityCenter=this.mapService.lngLatToCoord([(r+e)/2,(i+n)/2]);var o=this.mapService.lngLatToCoord([r,i]),s=this.mapService.lngLatToCoord([e,n]);this.cityMinSize=Math.sqrt(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2))/4}else{var u=r-e,c=i-n;this.cityCenter=[(r+e)/2,(i+n)/2],this.cityMinSize=Math.sqrt(Math.pow(u,2)+Math.pow(c,2))/4}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.calCityGeo(),this.startModelAnimate(),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"cityBuilding",vertexShader:'precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvarying vec4 v_Color;\nuniform mat4 u_Mvp;\n\nuniform float u_circleSweep;\nuniform vec2 u_cityCenter;\n\nvarying float v_worldDis;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\n\nvoid main() {\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n   v_texCoord = a_Uv;\n\n  if(u_circleSweep > 0.0) {\n     vec2 lnglatscale = vec2(0.0);\n    if(u_CoordinateSystem != COORDINATE_SYSTEM_P20_2) {\n      lnglatscale = (a_Position.xy - u_cityCenter) * vec2(0.0, 0.135);\n    }\n    v_worldDis = length(a_Position.xy + lnglatscale - u_cityCenter);\n  }\n \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  // v_Color = a_Color;\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'uniform float u_opacity: 1.0;\nuniform vec4 u_baseColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_brightColor : [ 1.0, 0, 0, 1.0 ];\nuniform vec4 u_windowColor : [ 1.0, 0, 0, 1.0 ];\nuniform float u_near : 0;\nuniform float u_far : 1;\nvarying vec4 v_Color;\nvarying vec2 v_texCoord;\nuniform float u_Zoom : 1;\nuniform float u_time;\n\nuniform float u_circleSweep;\nuniform float u_cityMinSize;\nuniform vec3 u_circleSweepColor;\nuniform float u_circleSweepSpeed;\n\nvarying float v_worldDis;\n\n#pragma include "picking"\n\nvec3 getWindowColor(float n, float hot, vec3 brightColor, vec3 darkColor) {\n    float s = step(hot, n);\n    vec3 color = mix(brightColor,vec3(0.9,0.9,1.0),n);\n\n    return mix(darkColor, color, s);\n}\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n}\n\nfloat LinearizeDepth()\n{\n    float z = gl_FragCoord.z * 2.0 - 1.0;\n    return (2.0 * u_near * u_far) / (u_far + u_near - z * (u_far - u_near));\n}\n\nvec3 fog(vec3 color, vec3 fogColor, float depth){\n    float fogFactor=clamp(depth,0.0,1.0);\n    vec3 output_color=mix(fogColor,color,fogFactor);\n    return output_color;\n}\n\nfloat sdRect(vec2 p, vec2 sz) {\n  vec2 d = abs(p) - sz;\n  float outside = length(max(d, 0.));\n  float inside = min(max(d.x, d.y), 0.);\n  return outside + inside;\n}\n\nvoid main() {\n  gl_FragColor = v_Color;\n  vec3 baseColor = u_baseColor.xyz;\n  vec3 brightColor = u_brightColor.xyz;\n  vec3 windowColor = u_windowColor.xyz;\n  float targetColId = 5.;\n  float depth = 1.0 - LinearizeDepth() / u_far * u_Zoom;\n  vec3 fogColor = vec3(23.0/255.0,31.0/255.0,51.0/255.0);\n  if(v_texCoord.x < 0.) { //\u9876\u90e8\u989c\u8272\n       vec3 foggedColor = fog(baseColor.xyz + vec3(0.12*0.9,0.2*0.9,0.3*0.9),fogColor,depth);\n       gl_FragColor = vec4( foggedColor, v_Color.w);\n  }else { // \u4fa7\u9762\u989c\u8272\n        vec2 st = v_texCoord;\n        vec2  UvScale = v_texCoord;\n        float tStep = min(0.08,max(0.05* (18.0-u_Zoom),0.02));\n        float tStart = 0.25 * tStep;\n        float tEnd = 0.75 * tStep;\n        float u = mod(UvScale.x, tStep);\n        float v = mod(UvScale.y, tStep);\n        float ux = floor(UvScale.x/tStep);\n        float uy = floor(UvScale.y/tStep);\n        float n = random(vec2(ux,uy));\n        float lightP = u_time;\n        float head = 1.0- step(0.005,st.y);\n        /*step3*/\n        // \u5c06\u7a97\u6237\u989c\u8272\u548c\u5899\u9762\u989c\u8272\u533a\u522b\u5f00\u6765\n        float sU = step(tStart, u) - step(tEnd, u);\n        float sV = step(tStart, v) - step(tEnd, v);\n        vec2 windowSize = vec2(abs(tEnd-tStart),abs(tEnd-tStart));\n        float dist = sdRect(vec2(u,v), windowSize);\n        float s = sU * sV;\n\n        float curColId = floor(UvScale.x / tStep);\n        float sCol = step(targetColId - 0.2, curColId) - step(targetColId + 0.2, curColId);\n\n        float mLightP = mod(lightP, 2.);\n        float sRow = step(mLightP - 0.2, st.y) - step(mLightP, st.y);\n        if(ux == targetColId){\n            n =0.;\n        }\n        float timeP = min(0.75, abs ( sin(u_time/3.0) ) );\n        float hot = smoothstep(1.0,0.0,timeP);\n        vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), s);\n        //vec3 color = mix(baseColor, getWindowColor(n,hot,brightColor,windowColor), 1.0);\n        float sFinal = s * sCol * sRow;\n        color += mix(baseColor, brightColor, sFinal*n);\n        if (st.y<0.01){\n        color = baseColor;\n         }\n        if(head ==1.0) { // \u9876\u90e8\u4eae\u7ebf\n            color = brightColor;\n        }\n        color = color * v_Color.rgb;\n\n        vec3 foggedColor = fog(color,fogColor,depth);\n\n        gl_FragColor = vec4(foggedColor,1.0);\n  }\n\n\n  if(u_circleSweep > 0.0 && v_worldDis < u_cityMinSize) {\n    float r = fract(((v_worldDis/u_cityMinSize) - u_time * u_circleSweepSpeed) * 2.0);\n    gl_FragColor.rgb += r * r * u_circleSweepColor;\n  }\n   \n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:g.j,depth:{enable:!0},cull:{enable:!0,face:d.t.BACK}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"normal",type:d.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:d.t.STATIC_DRAW,data:[],type:d.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:d.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:d.t.DYNAMIC_DRAW,data:[],type:d.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?10:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:d.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:d.t.DYNAMIC_DRAW,data:[],type:d.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(m.a)},function(t,e,n){"use strict";function r(t,e,n,r,i){p.c.add(t,n,r),p.c.normalize(t,t),e=p.c.fromValues(-t[1],t[0]);var o=p.c.fromValues(-n[1],n[0]);return[i/p.c.dot(e,o),e]}function i(t,e){return p.c.set(t,-e[1],e[0])}function o(t,e,n){return p.c.sub(t,e,n),p.c.normalize(t,t),t}function a(t,e){return t[0]===e[0]&&t[1]===e[1]}n.d(e,"a",function(){return y});var s=n(15),u=n(20),c=n(0),l=n(1),f=n(6),h=n(9),p=n(36),d=p.c.create(),v=(p.c.create(),p.c.create()),m=p.c.create(),g=p.c.create(),y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),Object(f.a)(this,"lastFlip",-1),Object(f.a)(this,"miter",p.c.fromValues(0,0)),Object(f.a)(this,"started",!1),Object(f.a)(this,"dash",!1),Object(f.a)(this,"totalDistance",0),Object(f.a)(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Object(l.a)(t,[{key:"simpleExtrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null;r+=this.simpleSegment(e,r,o,a,s)}if(this.dash)for(var u=0;u<e.positions.length/6;u++)e.positions[6*u+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleExtrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,c,l=t[o-1];l.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var f=e[o-1],h=t[o];h.push(null!==(s=e[o][2])&&void 0!==s?s:0);var p=e[o],d=o<t.length-1?[].concat(Object(u.a)(t[o+1]),[null!==(c=e[o+1][2])&&void 0!==c?c:0]):null,v=o<e.length-1?e[o+1]:null;i+=this.simpleSegment(n,i,l,h,d,f,p,v)}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude_gaode2",value:function(t,e){var n=this.complex;if(t.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var r=t.length,i=n.startIndex,o=1;o<r;o++){var a,s,c,l=t[o-1];l.push(null!==(a=e[o-1][2])&&void 0!==a?a:0);var f=e[o-1],h=t[o];h.push(null!==(s=e[o][2])&&void 0!==s?s:0);var p=e[o],d=o<t.length-1?[].concat(Object(u.a)(t[o+1]),[null!==(c=e[o+1][2])&&void 0!==c?c:0]):null,v=o<e.length-1?e[o+1]:null;i+=this.segment_gaode2(n,i,l,h,d,f,p,v)}if(this.dash)for(var m=0;m<n.positions.length/6;m++)n.positions[6*m+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}},{key:"extrude",value:function(t){var e=this.complex;if(t.length<=1)return e;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var n=t.length,r=e.startIndex,i=1;i<n;i++){var o=t[i-1],a=t[i],s=i<t.length-1?t[i+1]:null;r+=this.segment(e,r,o,a,s)}if(this.dash)for(var u=0;u<e.positions.length/6;u++)e.positions[6*u+5]=this.totalDistance;return e.startIndex=e.positions.length/6,e}},{key:"simpleSegment",value:function(t,e,n,c,l){var f=0,d=t.indices,y=t.positions,_=t.normals,b=Object(h.i)([c[0],c[1]]),x=Object(h.i)([n[0],n[1]]);o(v,b,x);var w=0;if(this.dash&&(w=this.lineSegmentDistance(b,x),this.totalDistance+=w),this.normal||(this.normal=p.c.create(),i(this.normal,v)),this.started||(this.started=!0,this.extrusions(y,_,n,this.normal,this.thickness,this.totalDistance-w)),d.push(e+0,e+1,e+2),l){var E=Object(h.i)([l[0],l[1]]);a(b,E)&&p.c.add(E,b,p.c.normalize(E,p.c.subtract(E,b,x))),o(m,E,b);var S=r(g,p.c.create(),v,m,this.thickness),O=Object(s.a)(S,2),T=O[0],A=O[1],C=p.c.dot(g,this.normal)<0?-1:1;this.extrusions(y,_,c,A,T,this.totalDistance),d.push.apply(d,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),C=-1,p.c.copy(this.normal,A),f+=2,this.lastFlip=C}else i(this.normal,v),this.extrusions(y,_,c,this.normal,this.thickness,this.totalDistance),d.push.apply(d,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),f+=2;return f}},{key:"segment_gaode2",value:function(t,e,n,c,l,f,y,_){var b=0,x=t.indices,w=t.positions,E=t.normals,S="square"===this.cap,O="bevel"===this.join,T=Object(h.i)([y[0],y[1]]),A=Object(h.i)([f[0],f[1]]);o(v,c,n);var C=0;if(this.dash&&(C=this.lineSegmentDistance(T,A),this.totalDistance+=C),this.normal||(this.normal=p.c.create(),i(this.normal,v)),!this.started)if(this.started=!0,S){var k=p.c.create(),M=p.c.create();p.c.add(k,this.normal,v),p.c.add(M,this.normal,v),E.push(M[0],M[1],0),E.push(k[0],k[1],0),w.push(n[0],n[1],0|n[2],this.totalDistance-C,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),w.push(n[0],n[1],0|n[2],this.totalDistance-C,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,E,n,this.normal,this.thickness,this.totalDistance-C);if(x.push(e+0,e+1,e+2),l){a(c,l)&&p.c.add(l,c,p.c.normalize(l,p.c.subtract(l,c,n))),o(m,l,c);var P=r(g,p.c.create(),v,m,this.thickness),j=Object(s.a)(P,2),I=j[0],R=j[1],L=p.c.dot(g,this.normal)<0?-1:1,D=O;if(!D&&"miter"===this.join){I>this.miterLimit&&(D=!0)}D?(E.push(this.normal[0],this.normal[1],0),E.push(R[0],R[1],0),w.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*L,0|c[2]),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness*L,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,x.push.apply(x,Object(u.a)(this.lastFlip!==-L?[e,e+2,e+3]:[e+2,e+1,e+3])),x.push(e+2,e+3,e+4),i(d,m),p.c.copy(this.normal,d),E.push(this.normal[0],this.normal[1],0),w.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*L,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,b+=3):(this.extrusions(w,E,c,R,I,this.totalDistance),x.push.apply(x,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),L=-1,p.c.copy(this.normal,R),b+=2),this.lastFlip=L}else{if(i(this.normal,v),S){var N=p.c.create(),z=p.c.create();p.c.sub(z,v,this.normal),p.c.add(N,v,this.normal),E.push(z[0],z[1],0),E.push(N[0],N[1],0),w.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),w.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(w,E,c,this.normal,this.thickness,this.totalDistance);x.push.apply(x,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),b+=2}return b}},{key:"segment",value:function(t,e,n,c,l){var f=0,y=t.indices,_=t.positions,b=t.normals,x="square"===this.cap,w="bevel"===this.join,E=Object(h.i)([c[0],c[1]]),S=Object(h.i)([n[0],n[1]]);o(v,E,S);var O=0;if(this.dash&&(O=this.lineSegmentDistance(E,S),this.totalDistance+=O),this.normal||(this.normal=p.c.create(),i(this.normal,v)),!this.started)if(this.started=!0,x){var T=p.c.create(),A=p.c.create();p.c.add(T,this.normal,v),p.c.add(A,this.normal,v),b.push(A[0],A[1],0),b.push(T[0],T[1],0),_.push(n[0],n[1],0|n[2],this.totalDistance-O,-this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),_.push(n[0],n[1],0|n[2],this.totalDistance-O,this.thickness,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(_,b,n,this.normal,this.thickness,this.totalDistance-O);if(y.push(e+0,e+1,e+2),l){var C=Object(h.i)([l[0],l[1]]);a(E,C)&&p.c.add(C,E,p.c.normalize(C,p.c.subtract(C,E,S))),o(m,C,E);var k=r(g,p.c.create(),v,m,this.thickness),M=Object(s.a)(k,2),P=M[0],j=M[1],I=p.c.dot(g,this.normal)<0?-1:1,R=w;if(!R&&"miter"===this.join){P>this.miterLimit&&(R=!0)}R?(b.push(this.normal[0],this.normal[1],0),b.push(j[0],j[1],0),_.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*I,0|c[2]),this.complex.indexes.push(this.currentIndex),_.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness*I,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,y.push.apply(y,Object(u.a)(this.lastFlip!==-I?[e,e+2,e+3]:[e+2,e+1,e+3])),y.push(e+2,e+3,e+4),i(d,m),p.c.copy(this.normal,d),b.push(this.normal[0],this.normal[1],0),_.push(c[0],c[1],0|c[2],this.totalDistance,-this.thickness*I,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++,f+=3):(this.extrusions(_,b,c,j,P,this.totalDistance),y.push.apply(y,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),I=-1,p.c.copy(this.normal,j),f+=2),this.lastFlip=I}else{if(i(this.normal,v),x){var L=p.c.create(),D=p.c.create();p.c.sub(D,v,this.normal),p.c.add(L,v,this.normal),b.push(D[0],D[1],0),b.push(L[0],L[1],0),_.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),_.push(c[0],c[1],0|c[2],this.totalDistance,this.thickness,0|c[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(_,b,c,this.normal,this.thickness,this.totalDistance);y.push.apply(y,Object(u.a)(1===this.lastFlip?[e,e+2,e+3]:[e+2,e+1,e+3])),f+=2}return f}},{key:"extrusions",value:function(t,e,n,r,i,o){e.push(r[0],r[1],0),e.push(r[0],r[1],0),t.push(n[0],n[1],0|n[2],o,-i,0|n[2]),this.complex.indexes.push(this.currentIndex),t.push(n[0],n[1],0|n[2],o,i,0|n[2]),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}}]),t}()},function(t,e,n){"use strict";function r(t){var e=t[0][0],n=t[0][t[0].length-1];e[0]===n[0]&&e[1]===n[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var r=t[0].length,i=l.a.flatten(t),o=i.vertices,a=i.dimensions,u=[],c=[],f=0;f<o.length/a;f++)2===a?u.push(o[2*f],o[2*f+1],1):u.push(o[3*f],o[3*f+1],1);var h=l()(i.vertices,i.holes,i.dimensions);c.push.apply(c,Object(s.a)(h));for(var p=0;p<r;p++)!function(){var t=i.vertices.slice(p*a,(p+1)*a),e=i.vertices.slice((p+1)*a,(p+2)*a);0===e.length&&(e=i.vertices.slice(0,a));var n=u.length/3;u.push(t[0],t[1],1,e[0],e[1],1,t[0],t[1],0,e[0],e[1],0),c.push.apply(c,Object(s.a)([0,2,1,2,3,1].map(function(t){return t+n})))}();return{positions:u,index:c}}function i(t){var e=l.a.flatten(t),n=l()(e.vertices,e.holes,e.dimensions);return{positions:e.vertices,index:n}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t[0][0],r=t[0][t[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(t[0]=t[0].slice(0,t[0].length-1));for(var i=t[0].length,o=l.a.flatten(t),u=o.vertices,c=o.dimensions,f=[],h=[],p=[],d=0;d<u.length/c;d++)f.push(u[d*c],u[d*c+1],1,-1,-1),p.push(0,0,1);var v=l()(o.vertices,o.holes,o.dimensions);h.push.apply(h,Object(s.a)(v));for(var m=0;m<i;m++)!function(){var t=o.vertices.slice(m*c,(m+1)*c),n=o.vertices.slice((m+1)*c,(m+2)*c);0===n.length&&(n=o.vertices.slice(0,c));var r=f.length/5;f.push(t[0],t[1],1,0,0,n[0],n[1],1,.1,0,t[0],t[1],0,0,.8,n[0],n[1],0,.1,.8);var i=a([n[0],n[1],1],[t[0],t[1],0],[t[0],t[1],1],e);p.push.apply(p,Object(s.a)(i).concat(Object(s.a)(i),Object(s.a)(i),Object(s.a)(i))),h.push.apply(h,Object(s.a)([1,2,0,3,2,1].map(function(t){return t+r})))}();return{positions:f,index:h,normals:p}}function a(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=f.d.create(),o=f.d.create(),a=f.d.create();r&&(t=Object(u.N)(t),e=Object(u.N)(e),n=Object(u.N)(n));var c=f.d.fromValues.apply(f.d,Object(s.a)(t)),l=f.d.fromValues.apply(f.d,Object(s.a)(e)),h=f.d.fromValues.apply(f.d,Object(s.a)(n));f.d.sub(i,h,l),f.d.sub(o,c,l),f.d.cross(a,i,o);var p=f.d.create();return f.d.normalize(p,a),p}e.a=r,e.c=i,e.b=o;var s=n(20),u=n(9),c=n(279),l=n.n(c),f=n(36)},function(t,e,n){"use strict";function r(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=2*Math.PI/t,r=[],i=0;i<t;i++)r.push(n*i+e*Math.PI/12);return r.map(function(t){return[Math.sin(t+Math.PI/4),Math.cos(t+Math.PI/4),0]})}function i(){return r(30)}function o(){return r(4)}function a(){return r(3)}function s(){return r(6,1)}function u(){return r(5)}n.d(e,"a",function(){return p});var c,l=n(6),f=function(t){return t.CYLINDER="cylinder",t.SQUARECOLUMN="squareColumn",t.TRIANGLECOLUMN="triangleColumn",t.HEXAGONCOLUMN="hexagonColumn",t.PENTAGONCOLUMN="pentagonColumn",t}({}),h=function(t){return t.CIRCLE="circle",t.SQUARE="square",t.TRIANGLE="triangle",t.HEXAGON="hexagon",t.PENTAGON="pentagon",t}({}),p=(c={},Object(l.a)(c,h.CIRCLE,i),Object(l.a)(c,h.HEXAGON,s),Object(l.a)(c,h.TRIANGLE,a),Object(l.a)(c,h.SQUARE,o),Object(l.a)(c,h.PENTAGON,u),Object(l.a)(c,f.CYLINDER,i),Object(l.a)(c,f.HEXAGONCOLUMN,s),Object(l.a)(c,f.TRIANGLECOLUMN,a),Object(l.a)(c,f.SQUARECOLUMN,o),Object(l.a)(c,f.PENTAGONCOLUMN,u),c)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1092);v.a},function(t,e,n){"use strict";var r=n(1093),i=n(1094),o=n(1095),a={plane:i.a,sprite:o.a,billboard:r.a};e.a=a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(20),s=n(0),u=n(1),c=n(12),l=n(3),f=n(4),h=n(2),p=n(6),d=n(8),v=n.n(d),m=n(11),g=n(16),y=function(t){function e(){var t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(c.a)(t),"radian",0),Object(p.a)(Object(c.a)(t),"planeGeometryTriangulation",function(){var e=t.layer.getLayerConfig(),n=e.center,r=void 0===n?[120,30]:n;return{size:4,indices:[0,1,2,2,3,0],vertices:[].concat(Object(a.a)(r),[1,1],Object(a.a)(r),[0,1],Object(a.a)(r),[0,0],Object(a.a)(r),[1,0])}}),t}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.width,r=void 0===n?1:n,i=t.height,o=void 0===i?1:i,a=t.raisingHeight,s=void 0===a?0:a,u=1;return"GAODE2.x"!==this.mapService.version&&"GAODE1.x"!==this.mapService.version||(u=-1),this.radian=u*Math.PI*(this.mapService.getRotation()%360)/180,{u_raisingHeight:Number(s),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_opacity:e||1,u_texture:this.texture,u_size:[r,o]}}},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(){var e,n,r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.drawCanvas,r=this.rendererService.createTexture2D,this.texture=r({height:0,width:0}),n&&this.updateTexture(n),t.next=6,this.layer.buildLayerModel({moduleName:"geometryBillboard",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform float u_raisingHeight: 0.0;\nuniform mat4 u_Mvp;\nuniform float u_opacity;\nuniform vec2 u_size: [1.0, 1.0];\nuniform mat2 u_RotateMatrix;\n\nattribute vec3 a_Extrude;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nattribute vec3 a_Color;\n\nvarying vec3 v_Color;\nvarying vec2 v_uv;\n\n#pragma include "projection"\n#pragma include "picking"\nvoid main() {\n   vec3 extrude = a_Extrude;\n   v_Color = a_Color;\n   v_uv = a_Uv;\n\n   float raiseHeight = u_raisingHeight;\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raiseHeight = u_raisingHeight * mapboxZoomScale;\n   }\n\n   // \u8ba1\u7b97\u7ecf\u7eac\u5ea6\u70b9\u4f4d\u5750\u6807\n   vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n   // \u8ba1\u7b97\u7ed5 z \u8f74\u65cb\u8f6c\u540e\u7684\u504f\u79fb\n   vec2 offsetXY = project_pixel(u_RotateMatrix * vec2(extrude.x * u_size.x, 0.0));\n   // \u7ed5 z \u8f74\u65cb\u8f6c\n   float x = project_pos.x + offsetXY.x;\n   float y = project_pos.y + offsetXY.y;\n   // z \u8f74\u4e0d\u53c2\u4e0e\u65cb\u8f6c\n   float z = project_pixel(extrude.y * u_size.y + raiseHeight);\n\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      // gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));\n      gl_Position = u_Mvp * (vec4(x, y, z, 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(x , y, z , 1.0));\n   }\n\n   setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nuniform sampler2D u_texture;\nuniform float u_opacity;\n\nvarying vec3 v_Color;\nvarying vec2 v_uv;\n\n#pragma include "picking"\nvoid main() {\n  gl_FragColor = texture2D(u_texture, vec2(v_uv.x, 1.0 - v_uv.y));\n  gl_FragColor.a *= u_opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:this.planeGeometryTriangulation,primitive:m.t.TRIANGLES,depth:{enable:!0}});case 6:return i=t.sent,t.abrupt("return",[i]);case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"updateTexture",value:function(t){var e=this.rendererService.createTexture2D,n=this.layer.getLayerConfig(),r=n.canvasWidth,i=void 0===r?1:r,o=n.canvasHeight,a=void 0===o?1:o,s=document.createElement("canvas");s.width=i,s.height=a,s.getContext("2d")&&(t(s),this.texture=e({data:s,width:s.width,height:s.height,wrapS:m.t.CLAMP_TO_EDGE,wrapT:m.t.CLAMP_TO_EDGE}),this.layerService.reRender())}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:m.a.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:m.t.DYNAMIC_DRAW,data:[],type:m.t.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:m.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:m.t.DYNAMIC_DRAW,data:[],type:m.t.FLOAT},size:2,update:function(t,e,n){return[n[2],n[3]]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(15),s=n(20),u=n(0),c=n(1),l=n(12),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(11),y=n(91),_=n(16),b=function(t){function e(){var t;Object(u.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(d.a)(Object(l.a)(t),"terrainImageLoaded",!1),Object(d.a)(Object(l.a)(t),"planeGeometryTriangulation",function(){var e,n=t.layer.getLayerConfig(),r=n.width,i=void 0===r?1:r,o=n.height,a=void 0===o?1:o,u=n.widthSegments,c=void 0===u?1:u,l=n.heightSegments,f=void 0===l?1:l,h=n.center,p=void 0===h?[120,30]:h,d=n.terrainTexture,v=(e=t).initPlane.apply(e,[i,a,c,f].concat(Object(s.a)(p))),m=v.indices,g=v.positions;return d&&t.loadTerrainTexture(g,m),{vertices:g,indices:m,size:5}}),t}Object(f.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"initPlane",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:120,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:30,s=t/2,u=e/2,c=Math.floor(n),l=Math.floor(r),f=c+1,h=l+1,p=t/c,d=e/l,v=[],m=[],g=0;g<h;g++)for(var _=g*d-u,b=0;b<f;b++){var x=b*p-s;if(this.mapService.version===y.b["GAODE2.x"]){var w=this.mapService.lngLatToCoord([x+i,-_+o]),E=Object(a.a)(w,2),S=E[0],O=E[1];m.push(S,O,0)}else m.push(x+i,-_+o,0);m.push(b/c),m.push(1-g/l)}for(var T=0;T<l;T++)for(var A=0;A<c;A++){var C=A+f*T,k=A+f*(T+1),M=A+1+f*(T+1),P=A+1+f*T;v.push(C,k,P),v.push(k,M,P)}return{indices:v,positions:m}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.mapTexture,r=t.terrainClipHeight,i=void 0===r?0:r,o=t.terrainTexture;if(this.mapTexture!==n){var a;this.mapTexture=n,null===(a=this.texture)||void 0===a||a.destroy(),this.updateTexture(n)}return{u_opacity:e||1,u_mapFlag:n?1:0,u_terrainClipHeight:o?i:-1,u_texture:this.texture}}},{key:"clearModels",value:function(){var t;this.terrainImage=null,null===(t=this.texture)||void 0===t||t.destroy()}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(m.a.mark(function t(){var e,n,r,i;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mapTexture,this.mapTexture=n,r=this.rendererService.createTexture2D,this.texture=r({height:0,width:0}),this.updateTexture(n),t.next=7,this.layer.buildLayerModel({moduleName:"geometryPlane",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\n\nuniform mat4 u_Mvp;\nuniform float u_opacity;\nuniform float u_terrainClipHeight;\n\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nattribute vec3 a_Color;\n\nvarying vec3 v_Color;\nvarying vec2 v_uv;\nvarying float v_clip;\n\n#pragma include "projection"\n#pragma include "picking"\nvoid main() {\n   v_Color = a_Color;\n   v_uv = a_Uv;\n  \n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   v_clip = 1.0;\n   if(a_Position.z < u_terrainClipHeight) {\n      v_clip = 0.0;\n   }\n  \n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n\n   // float x = 1.0;\n   // float y = 0.0;\n   // float z = 0.0;\n   // mat3 translateMatrix = mat3(\n   //    1.0, 0.0, 0.0 \n   //    0.0, 1.0, 0.0\n   //    -project_pos.x,    -project_pos.y,  1.0\n   // );\n   //  mat4 translateMatrix = mat4(\n   //    1.0, 0.0, 0.0, 0.0 ,\n   //    0.0, 1.0, 0.0, 0.0,\n   //    0.0, 0.0, 1.0, 0.0,\n   //    1.0, 0.0, 0.0, 1.0\n   // );\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, a_Position.z, 1.0));\n   }\n\n   setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nuniform sampler2D u_texture;\nuniform float u_mapFlag;\nuniform float u_opacity;\n\nvarying vec3 v_Color;\nvarying vec2 v_uv;\nvarying float v_clip;\n\n#pragma include "picking"\nvoid main() {\n  // gl_FragColor = vec4(v_Color, u_opacity);\n  if(u_mapFlag > 0.0) {\n    gl_FragColor = texture2D(u_texture, vec2(v_uv.x, 1.0 - v_uv.y));\n    gl_FragColor.a *= u_opacity;\n  } else {\n    // gl_FragColor = vec4(v_uv, 0.0, u_opacity);\n    gl_FragColor = vec4(v_Color, u_opacity);\n  }\n  gl_FragColor.a *= v_clip;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:this.planeGeometryTriangulation,primitive:g.t.TRIANGLES,depth:{enable:!0},cull:{enable:!0,face:g.t.BACK}});case 7:return i=t.sent,t.abrupt("return",[i]);case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"createModelData",value:function(t){if(t){var e=this.layer.getLayerConfig(),n=e.widthSegments,r=e.heightSegments,i=e.width,o=e.height,a=t,s=a.widthSegments,u=a.heightSegments,c=a.width,l=a.height;this.layer.style({widthSegments:void 0!==s?s:n,heightSegments:void 0!==u?u:r,width:void 0!==c?c:i,height:void 0!==l?l:o})}var f=this.layer.getEncodedData();return this.styleAttributeService.createAttributesAndIndices(f,this.planeGeometryTriangulation)}},{key:"updateTexture",value:function(t){var e=this,n=this.rendererService.createTexture2D;if(t){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e.texture=n({data:r,width:r.width,height:r.height,wrapS:g.t.CLAMP_TO_EDGE,wrapT:g.t.CLAMP_TO_EDGE}),e.layerService.reRender()},r.src=t}else this.texture=n({width:0,height:0})}},{key:"getImageData",value:function(t){var e=document.createElement("canvas"),n=e.getContext("2d"),r=t.width,i=t.height;return e.width=r,e.height=i,n.drawImage(t,0,0,r,i),n.getImageData(0,0,r,i)}},{key:"translateVertex",value:function(t,e,n,r,i,o){for(var a=n.width,s=n.height,u=this.getImageData(n).data,c=Math.floor(r),l=Math.floor(i),f=c+1,h=l+1,p=a/c,d=s/l,v=0;v<h;v++)for(var m=Math.floor(v*d),g=m*a,y=0;y<f;y++){var _=Math.floor(y*p),b=4*(g+_),x=u[b],w=u[b+1],E=u[b+2],S=5*(v*f+y)+2;t[S]=o(x,w,E)}var O=this.layer.getEncodedData(),T=this.styleAttributeService.createAttributesAndIndices(O,function(){return{vertices:t,indices:e,size:5}});this.layer.updateModelData(T),this.layerService.throttleRenderLayers()}},{key:"loadTerrainTexture",value:function(t,e){var n=this,r=this.layer.getLayerConfig(),i=r.widthSegments,o=void 0===i?1:i,a=r.heightSegments,s=void 0===a?1:a,u=r.terrainTexture,c=r.rgb2height,l=void 0===c?function(t,e,n){return t+e+n}:c;if(this.terrainImage)this.terrainImageLoaded?this.translateVertex(t,e,this.terrainImage,o,s,l):this.terrainImage.onload=function(){n.translateVertex(t,e,n.terrainImage,o,s,l)};else{var f=new Image;this.terrainImage=f,f.crossOrigin="anonymous",f.onload=function(){n.terrainImageLoaded=!0,setTimeout(function(){return n.layer.emit("terrainImageLoaded",null)}),n.translateVertex(t,e,f,o,s,l)},f.src=u}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:g.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:g.t.DYNAMIC_DRAW,data:[],type:g.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(_.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return x});var o=n(7),a=n(15),s=n(20),u=n(0),c=n(1),l=n(12),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(11),y=n(91),_=n(16),b=function(t){return t.UP="up",t.DOWN="down",t}(b||{}),x=function(t){function e(){var t;Object(u.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(d.a)(Object(l.a)(t),"planeGeometryUpdateTriangulation",function(){for(var e=t.layer.getLayerConfig(),n=e.spriteBottom,r=void 0===n?-1e5:n,i=t.spriteUpdate,o=r,a=t.spriteTop,s=0;s<t.positions.length;s+=5)t.spriteAnimate===b.UP?(t.positions[s+2]+=i,t.positions[s+2]>a&&(t.positions[s+2]=o)):(t.positions[s+2]-=i,t.positions[s+2]<o&&(t.positions[s+2]=a));return{vertices:t.positions,indices:t.indices,size:5}}),Object(d.a)(Object(l.a)(t),"updateModel",function(){var e=t.layer.createAttributes({triangulation:t.planeGeometryUpdateTriangulation});t.layer.models.map(function(t){t.updateAttributes(e)}),t.layerService.throttleRenderLayers(),t.timer=requestAnimationFrame(t.updateModel)}),Object(d.a)(Object(l.a)(t),"planeGeometryTriangulation",function(){var e,n=t.layer.getLayerConfig(),r=n.center,i=void 0===r?[120,30]:r,o=n.spriteCount,a=void 0===o?100:o,u=n.spriteRadius,c=void 0===u?10:u,l=(e=t).initSprite.apply(e,[c,a].concat(Object(s.a)(i))),f=l.indices,h=l.positions;return t.positions=h,t.indices=f,{vertices:h,indices:f,size:5}}),t}Object(f.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"initSprite",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:120,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,i=[],o=[],u=this.mapService,c=this.spriteAnimate===b.UP?-this.spriteTop:this.spriteTop,l=0;l<e;l++){var f=Math.random()*c;o.push.apply(o,Object(s.a)(function(e){var i=t*Math.random(),o=t*Math.random(),s=-t/2+i,c=-t/2+o;if(u.version===y.b["GAODE2.x"]){var l=u.lngLatToCoord([s+n,-c+r]),f=Object(a.a)(l,2);return[f[0],f[1],e,0,0]}return[s+n,-c+r,e,0,0]}(f)))}for(var h=0;h<e;h++)i.push(h);return{indices:i,positions:o}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.mapTexture,r=t.spriteScale,i=void 0===r?1:r;if(this.mapTexture!==n){var o;this.mapTexture=n,null===(o=this.texture)||void 0===o||o.destroy(),this.updateTexture(n)}return{u_opacity:e||1,u_mapFlag:n?1:0,u_texture:this.texture,u_Scale:i}}},{key:"clearModels",value:function(){var t;cancelAnimationFrame(this.timer),null===(t=this.texture)||void 0===t||t.destroy()}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(m.a.mark(function t(){var e,n,r,i,o,a,s,u,c,l,f=this;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.mapTexture,r=e.spriteTop,i=void 0===r?5e6:r,o=e.spriteUpdate,a=void 0===o?1e4:o,s=e.spriteAnimate,u=void 0===s?b.DOWN:s,this.mapTexture=n,this.spriteTop=i,this.spriteUpdate=a,this.spriteAnimate="up"===u?b.UP:b.DOWN,c=this.rendererService.createTexture2D,this.texture=c({height:0,width:0}),this.updateTexture(n),setTimeout(function(){f.updateModel()},100),t.next=11,this.layer.buildLayerModel({moduleName:"geometrySprite",vertexShader:'precision highp float;\n\nattribute vec3 a_Position;\nattribute vec3 a_Color;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_opacity;\nuniform float u_Scale;\nvarying vec3 v_Color;\nvarying float v_d;\n\n#pragma include "projection"\nvoid main() {\n   v_Color = a_Color;\n  \n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   v_d = a_Position.z;\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy, a_Position.z, 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, a_Position.z, 1.0));\n   }\n\n   gl_PointSize = pow((u_Zoom - 1.0), 2.0) * u_Scale;\n}\n',fragmentShader:"\nuniform sampler2D u_texture;\nuniform float u_mapFlag;\nuniform float u_opacity;\n\nvarying vec3 v_Color;\nvarying float v_d;\n\nvoid main() {\n\n  if(v_d < 0.0) {\n    discard;\n  }\n\n  if(u_mapFlag > 0.0) {\n    gl_FragColor = texture2D(u_texture, gl_PointCoord);\n    gl_FragColor.a *= u_opacity;\n  } else {\n    gl_FragColor = vec4(v_Color, u_opacity);\n  }\n}\n",triangulation:this.planeGeometryTriangulation,primitive:g.t.POINTS,depth:{enable:!1},blend:this.getBlend()});case 11:return l=t.sent,t.abrupt("return",[l]);case 13:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"updateTexture",value:function(t){var e=this,n=this.rendererService.createTexture2D;if(t){var r=new Image;r.crossOrigin="anonymous",r.onload=function(){e.texture=n({data:r,width:r.width,height:r.height,wrapS:g.t.CLAMP_TO_EDGE,wrapT:g.t.CLAMP_TO_EDGE}),e.layerService.reRender()},r.src=t}else this.texture=n({width:0,height:0})}},{key:"registerBuiltinAttributes",value:function(){return""}}]),e}(_.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1097);v.a},function(t,e,n){"use strict";var r=n(1098),i=n(1099),o=n(1100),a=n(1102),s={heatmap:o.a,heatmap3d:o.a,grid:r.a,grid3d:i.a,hexagon:a.a};e.a=s},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(16),v=n(22),m=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:'precision highp float;\r\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\r\nattribute vec3 a_Position;\r\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\r\nattribute vec3 a_Pos;\r\nattribute float a_Size;\r\nattribute vec4 a_Color;\r\nuniform vec2 u_radius;\r\nuniform float u_coverage: 0.9;\r\nuniform float u_angle: 0;\r\nuniform mat4 u_ModelMatrix;\r\nuniform mat4 u_Mvp;\r\nvarying vec4 v_color;\r\n\r\nuniform vec2 u_sceneCenterMercator;\r\n\r\n#pragma include "projection"\r\n#pragma include "project"\r\n#pragma include "picking"\r\n\r\nvoid main() {\r\n  v_color = a_Color;\r\n\r\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\r\n  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage ;\r\n  // vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r\n  // gl_Position = project_common_position_to_clipspace(project_pos);\r\n\r\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\r\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n    vec2 customLnglat = customProject(lnglat) - u_sceneCenterMercator; // \u5c06\u7ecf\u7eac\u5ea6\u8f6c\u6362\u4e3a\u9ad8\u5fb72.0\u9700\u8981\u7684\u5e73\u9762\u5750\u6807\r\n    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\r\n    gl_Position = u_Mvp * (project_pos);\r\n  } else {\r\n     vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\r\n    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\r\n    gl_Position = project_common_position_to_clipspace(project_pos);\r\n  }\r\n\r\n  setPickingColor(a_PickingColor);\r\n}\r\n',fragmentShader:'precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:v.c,primitive:p.t.TRIANGLES,depth:{enable:!1}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.a.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t){var e="GAODE2.x"===t.version?t.originCoordinates:t.coordinates;return[e[0],e[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(16),v=n(22),m=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||1,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:'precision highp float;\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\nattribute vec3 a_Position;\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\nattribute vec3 a_Pos;\n\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform vec2 u_sceneCenterMercator;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "light"\n#pragma include "picking"\n\n\nvoid main() {\n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n \n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u7ecf\u7eac\u5ea6\n    vec2 customLnglat = customProject(lnglat) - u_sceneCenterMercator; // \u5c06\u7ecf\u7eac\u5ea6\u8f6c\u6362\u4e3a\u9ad8\u5fb72.0\u9700\u8981\u7684\u5e73\u9762\u5750\u6807\n    vec4 project_pos = project_position(vec4(customLnglat, a_Position.z * a_Size, 1.0));\n\n    float lightWeight = calc_lighting(project_pos);\n    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n  \n    gl_Position = u_Mvp * vec4(customLnglat , a_Position.z * a_Size, 1.0);\n  } else {\n    vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // \u5b9e\u9645\u7684\u7ecf\u7eac\u5ea6\n    vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));\n    \n    float lightWeight = calc_lighting(project_pos);\n    v_color =vec4(a_Color.rgb*lightWeight, a_Color.w);\n    \n    gl_Position = project_common_position_to_clipspace(project_pos);\n  }\n\n\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:v.g,primitive:p.t.TRIANGLES,depth:{enable:!0}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:1,update:function(t){var e=t.size;return Array.isArray(e)?[e[0]]:[e]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.t.STATIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.a.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t){var e="GAODE2.x"===t.version?t.originCoordinates:t.coordinates;return[e[0],e[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(d.a)(t);if(e){var i=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(p.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return T});var o,a,s=n(20),u=n(10),c=n(7),l=n(0),f=n(1),h=n(3),p=n(4),d=n(2),v=n(8),m=n.n(v),g=n(11),y=n(9),_=n(36),b=n(13),x=(n.n(b),n(14)),w=(n.n(x),n(16)),E=n(22),S=n(19),O=(n.n(S),n(1101)),T=(o=Object(b.injectable)())(a=function(t){function e(){return Object(l.a)(this,e),n.apply(this,arguments)}Object(h.a)(e,t);var n=r(e);return Object(f.a)(e,[{key:"render",value:function(t){var e=this,n=this.rendererService,r=n.clear,i=n.useFramebuffer,o=this.layer.getLayerConfig(),a=o.rampColors;i(this.heatmapFramerBuffer,function(){r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:e.heatmapFramerBuffer}),e.drawIntensityMode()}),Object(S.isEqual)(this.preRampColors,a)||this.updateColorTexture(),"heatmap"===this.shapeType?this.drawColorMode(t):this.draw3DHeatMap(t)}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(m.a.mark(function t(){var e,n,r,i,o,a,s,u,c,l;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.rendererService,r=n.createFramebuffer,i=n.getViewportSize,o=n.createTexture2D,a=this.styleAttributeService.getLayerStyleAttribute("shape"),s=(null===a||void 0===a?void 0:null===(e=a.scale)||void 0===e?void 0:e.field)||"heatmap",this.shapeType=s,t.next=6,this.buildHeatMapIntensity();case 6:return this.intensityModel=t.sent,this.colorModel="heatmap"===s?this.buildHeatmapColor():this.build3dHeatMap(),u=i(),c=u.width,l=u.height,this.heatmapFramerBuffer=r({color:o({width:Math.floor(c/4),height:Math.floor(l/4),wrapS:g.t.CLAMP_TO_EDGE,wrapT:g.t.CLAMP_TO_EDGE,min:g.t.LINEAR,mag:g.t.LINEAR}),depth:!1}),this.updateColorTexture(),t.abrupt("return",[this.intensityModel,this.colorModel]);case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:g.a.Attribute,descriptor:{name:"a_Dir",buffer:{usage:g.t.DYNAMIC_DRAW,data:[],type:g.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:g.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:g.t.DYNAMIC_DRAW,data:[],type:g.t.FLOAT},size:1,update:function(t){var e=t.size;return[void 0===e?1:e]}}})}},{key:"buildHeatMapIntensity",value:function(){function t(){return e.apply(this,arguments)}var e=Object(c.a)(m.a.mark(function t(){var e;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.triangulation=E.d,t.next=3,this.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:'precision highp float;\nattribute vec3 a_Position;\nattribute float a_Size;\nattribute vec2 a_Dir;\nuniform float u_intensity;\nuniform float u_radius;\nvarying vec2 v_extrude;\nvarying float v_weight;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#define GAUSS_COEF  0.3989422804014327\n\n#pragma include "projection"\n\nvoid main(){\n    v_weight = a_Size;\n    float ZERO = 1.0 / 255.0 / 16.0;\n    float extrude_x = a_Dir.x * 2.0 -1.0;\n    float extrude_y = a_Dir.y * 2.0 -1.0;\n    vec2 extrude_dir = normalize(vec2(extrude_x,extrude_y));\n    float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;\n    v_extrude = extrude_dir * S;\n\n    vec2 offset = project_pixel(v_extrude * u_radius);\n    vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n    // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n        gl_Position = u_Mvp * (vec4(project_pos.xy + offset, 0.0, 1.0));\n    } else {\n        gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n    }\n}\n',fragmentShader:"precision highp float;\nuniform float u_intensity;\nvarying float v_weight;\nvarying vec2 v_extrude;\n#define GAUSS_COEF  0.3989422804014327\nvoid main(){\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = v_weight * u_intensity * GAUSS_COEF * exp(d);\n    gl_FragColor = vec4(val, 1., 1., 1.);\n}\n",triangulation:E.d,depth:{enable:!1},cull:{enable:!0,face:Object(y.D)(this.mapService.version)}});case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildHeatmapColor",value:function(){this.shaderModuleService.registerModule("heatmapColor",{vs:"precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  v_texCoord = a_Uv;\n\n  gl_Position = vec4(a_Position.xy, 0, 1.);\n}\n",fs:"uniform sampler2D u_texture;        // \u70ed\u529b\u5f3a\u5ea6\u56fe\nuniform sampler2D u_colorTexture;   // \u6839\u636e\u5f3a\u5ea6\u5206\u5e03\u7684\u8272\u5e26\nuniform float u_opacity;\nvarying vec2 v_texCoord;\n\nuniform vec2 u_ViewportSize;\n\nfloat getBlurIndusty() {\n    float vW = 2.0/u_ViewportSize.x;\n    float vH = 2.0/u_ViewportSize.y;\n    vec2 vUv = v_texCoord;\n    float i11 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y + 1.0 * vH) ).r;\n    float i12 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y + 1.0 * vH) ).r;\n    float i13 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y + 1.0 * vH) ).r;\n\n    float i21 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y) ).r;\n    float i22 = texture2D( u_texture, vec2( vUv.x , vUv.y) ).r;\n    float i23 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y) ).r;\n\n    float i31 = texture2D( u_texture, vec2( vUv.x - 1.0 * vW, vUv.y-1.0*vH) ).r;\n    float i32 = texture2D( u_texture, vec2( vUv.x - 0.0 * vW, vUv.y-1.0*vH) ).r;\n    float i33 = texture2D( u_texture, vec2( vUv.x + 1.0 * vW, vUv.y-1.0*vH) ).r;\n\n    return(\n        i11 + \n        i12 + \n        i13 + \n        i21 + \n        i21 + \n        i22 + \n        i23 + \n        i31 + \n        i32 + \n        i33\n        )/9.0;\n}\n\n\nvoid main(){\n    // float intensity = texture2D(u_texture, v_texCoord).r;\n    float intensity = getBlurIndusty();\n    vec4 color = texture2D(u_colorTexture, vec2(intensity, 0.0));\n\n    gl_FragColor =color;\n    gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n\n}\n"});var t=this.shaderModuleService.getModule("heatmapColor"),e=t.vs,n=t.fs,r=t.uniforms,i=this.rendererService,o=i.createAttribute,a=i.createElements,s=i.createBuffer;return(0,i.createModel)({vs:e,fs:n,attributes:{a_Position:o({buffer:s({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:g.t.FLOAT}),size:3}),a_Uv:o({buffer:s({data:[0,1,1,1,0,0,1,0],type:g.t.FLOAT}),size:2})},uniforms:Object(u.a)({},r),depth:{enable:!1},elements:a({data:[0,2,1,2,3,1],type:g.t.UNSIGNED_INT,count:6})})}},{key:"drawIntensityMode",value:function(){var t,e=this.layer.getLayerConfig(),n=e.opacity,r=e.intensity,i=void 0===r?10:r,o=e.radius,a=void 0===o?5:o;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),null===(t=this.intensityModel)||void 0===t||t.draw({uniforms:{u_opacity:n||1,u_radius:a,u_intensity:i},blend:{enable:!0,func:{srcRGB:g.t.ONE,srcAlpha:1,dstRGB:g.t.ONE,dstAlpha:1}},stencil:{enable:!1,mask:255,func:{cmp:514,ref:1,mask:255}}}),this.layer.hooks.afterRender.call()}},{key:"drawColorMode",value:function(t){var e,n=this.layer.getLayerConfig(),r=n.opacity;null===(e=this.colorModel)||void 0===e||e.draw({uniforms:{u_opacity:r||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer},blend:this.getBlend(),stencil:this.getStencil(t)})}},{key:"draw3DHeatMap",value:function(t){var e,n=this.layer.getLayerConfig(),r=n.opacity,i=_.b.create();_.b.invert(i,this.cameraService.getViewProjectionMatrixUncentered()),null===(e=this.colorModel)||void 0===e||e.draw({uniforms:{u_opacity:r||1,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:Object(s.a)(i)},blend:{enable:!0,func:{srcRGB:g.t.SRC_ALPHA,srcAlpha:1,dstRGB:g.t.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},stencil:this.getStencil(t)})}},{key:"build3dHeatMap",value:function(){var t=this.rendererService.getViewportSize,e=t(),n=e.width,r=e.height,i=Object(O.a)(n/4,r/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:'precision highp float;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_InverseViewProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrixUncentered;\nvarying float v_intensity;\n\n\nvec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {\n    float t2 = t * t;\n    float one_minus_t = 1.0 - t;\n    float one_minus_t2 = one_minus_t * one_minus_t;\n    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);\n}\nvec2 toBezier(float t, vec4 p){\n    return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));\n}\n#pragma include "projection"\nvoid main() {\n  v_texCoord = a_Uv;\n\n  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); // \u5c06\u539f\u672c 0 -> 1 \u7684 uv \u8f6c\u6362\u4e3a -1 -> 1 \u7684\u6807\u51c6\u5750\u6807\u7a7a\u95f4\uff08NDC\uff09\n\n  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y \u5e73\u9762\u4e0a\u7684\u70b9\uff08z == 0\uff09\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e09\u7ef4\u4e0a\u7684\u70b9\u88ab\u6295\u5f71\u5230\u5e73\u9762\u540e\u7684\u70b9\n\tvec4 p2 = vec4(pos, 1.0, 1.0); // \u5e73\u884c\u4e8ex/y\u5e73\u9762\u3001z==1 \u7684\u5e73\u9762\u4e0a\u7684\u70b9\n\n\tvec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // \u6839\u636e\u89c6\u56fe\u6295\u5f71\u77e9\u9635\u7684\u9006\u77e9\u9635\u5e73\u9762\u4e0a\u7684\u53cd\u7b97\u51fa\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u7684\u70b9\uff08p1\u5e73\u9762\u4e0a\u7684\u70b9\uff09\n\tvec4 inverseP2 = u_InverseViewProjectionMatrix * p2;\n\n  inverseP1 = inverseP1 / inverseP1.w; // \u5f52\u4e00\u5316\u64cd\u4f5c\uff08\u5f52\u4e00\u5316\u540e\u4e3a\u4e16\u754c\u5750\u6807\uff09\n\tinverseP2 = inverseP2 / inverseP2.w;\n\n\tfloat zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??\n\tvec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);\n\n  vec4 b= vec4(0.5000, 0.0, 1.0, 0.5000);\n  float fh;\n\n  v_intensity = texture2D(u_texture, v_texCoord).r;\n  fh = toBezier(v_intensity, b).y;\n  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.), 1.0);\n \n}\n',fs:"uniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_opacity;\nvarying vec2 v_texCoord;\nvarying float v_intensity;\n\nvoid main(){\n   \n     float intensity = texture2D(u_texture, v_texCoord).r;\n    vec4 color = texture2D(u_colorTexture,vec2(intensity, 0));\n    gl_FragColor = color;\n    // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;\n     gl_FragColor.a = color.a * smoothstep(0.,0.1,intensity) * u_opacity;\n}\n"});var o=this.shaderModuleService.getModule("heatmap3dColor"),a=o.vs,s=o.fs,c=o.uniforms,l=this.rendererService,f=l.createAttribute,h=l.createElements,p=l.createBuffer;return(0,l.createModel)({vs:a,fs:s,attributes:{a_Position:f({buffer:p({data:i.vertices,type:g.t.FLOAT}),size:3}),a_Uv:f({buffer:p({data:i.uvs,type:g.t.FLOAT}),size:2})},primitive:g.t.TRIANGLES,uniforms:Object(u.a)({},c),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:g.t.SRC_ALPHA,srcAlpha:1,dstRGB:g.t.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:h({data:i.indices,type:g.t.UNSIGNED_INT,count:i.indices.length})})}},{key:"updateStyle",value:function(){this.updateColorTexture()}},{key:"updateColorTexture",value:function(){var t=this.rendererService.createTexture2D;this.texture&&this.texture.destroy();var e=this.layer.getLayerConfig(),n=e.rampColors,r=Object(y.x)(n);this.colorTexture=t({data:new Uint8Array(r.data),width:r.width,height:r.height,wrapS:g.t.CLAMP_TO_EDGE,wrapT:g.t.CLAMP_TO_EDGE,min:g.t.NEAREST,mag:g.t.NEAREST,flipY:!1}),this.preRampColors=n}}]),e}(w.a))||a},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=[],i=[],o=t+1,a=e+1,s=t/2,u=e/2,c=0;c<a;c++)for(var l=c-u,f=0;f<o;f++){var h=f-s;r.push(h/s,-l/u,0),i.push(f/t),i.push(1-c/e)}for(var p=0;p<e;p++)for(var d=0;d<t;d++){var v=d+o*p,m=d+o*(p+1),g=d+1+o*(p+1),y=d+1+o*p;n.push(v,m,y),n.push(m,g,y)}return{vertices:r,indices:n,uvs:i}}e.a=r},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(16),v=n(22),m=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.coverage,r=t.angle;return{u_opacity:e||1,u_coverage:n||.9,u_angle:r||0,u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset]}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:'precision highp float;\n// \u591a\u8fb9\u5f62\u9876\u70b9\u5750\u6807\nattribute vec3 a_Position;\n// \u591a\u8fb9\u5f62\u7ecf\u7eac\u5ea6\u5750\u6807\nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 0.9;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform vec2 u_sceneCenterMercator;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nvoid main() {\n  v_color = a_Color;\n    \n  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n  vec2 offset =(vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage));\n  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);\n \n  // vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xy, 0., 1.0));\n    // gl_Position = u_Mvp * (vec4(a_Pos.xy + offset, 0., 1.0));\n    vec2 customLnglat = customProject(lnglat) - u_sceneCenterMercator;\n    vec4 project_pos = project_position(vec4(customLnglat, 0, 1.0));\n    gl_Position = u_Mvp * vec4(project_pos.xy, 0.0, 1.0);\n  } else {\n    vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'precision highp float;\nvarying vec4 v_color;\nuniform float u_opacity: 1;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:v.c,depth:{enable:!1},primitive:p.t.TRIANGLES});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:p.a.Attribute,descriptor:{name:"a_Pos",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t){var e="GAODE2.x"===t.version?t.originCoordinates:t.coordinates;return[e[0],e[1],0]}}})}}]),e}(d.a)},function(t,e,n){"use strict";var r=n(1104),i={image:r.a};e.a=i},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(9),v=n(16),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){return{u_opacity:this.layer.getLayerConfig().opacity||1,u_texture:this.texture}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e,n,r,i,o,a,s=this;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.layer.getSource(),n=this.rendererService.createTexture2D,this.texture=n({height:0,width:0}),!d.K){t.next=11;break}r=this.layerService.sceneService.getSceneConfig().canvas,i=r.createImage(),i.crossOrigin="anonymous",i.src=e.data.originData,i.onload=function(){s.texture=n({data:i,width:i.width,height:i.height}),s.layerService.reRender()},t.next=15;break;case 11:return t.next=13,e.data.images;case 13:o=t.sent,this.texture=n({data:o[0],width:o[0].width,height:o[0].height,mag:p.t.LINEAR,min:p.t.LINEAR});case 15:return t.next=17,this.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',fragmentShader:"precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n  if(gl_FragColor.a < 0.01)\n    discard;\n}\n",triangulation:m.k,primitive:p.t.TRIANGLES,blend:{enable:!0},depth:{enable:!1}});case 17:return a=t.sent,t.abrupt("return",[a]);case 19:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(v.a)},function(t,e,n){"use strict";var r=n(1106),i=n(1107),o=n(1108),a=n(1109),s=n(1110),u=n(474),c=n(1111),l=n(1112),f=n(1113),h={arc:r.a,arc3d:i.a,greatcircle:s.a,wall:f.a,line:u.a,simple:l.a,linearline:c.a,earthArc3d:o.a,flowline:a.a};e.a=h},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(22),_={solid:0,dash:1},b=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:v.t.NEAREST,min:v.t.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.forward,h=void 0===f||f,p=t.lineTexture,d=void 0!==p&&p,v=t.iconStep,g=void 0===v?100:v,y=t.segmentNumber,b=void 0===y?30:y,x=t.thetaOffset,w=void 0===x?.314:x;2===l.length&&l.push(0,0);var E=0,S=[0,0,0,0],O=[0,0,0,0];return r&&i&&(S=Object(m.T)(r),O=Object(m.T)(i),E=1),this.rendererService.getDirty()&&this.texture.bind(),{u_thetaOffset:w,u_opacity:n,u_textureBlend:"normal"===a?0:1,segmentNumber:b,u_line_type:_[u||"solid"],u_dash_array:l,u_blur:.9,u_lineDir:h?1:-1,u_texture:this.texture,u_line_texture:d?1:0,u_icon_step:g,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:E,u_sourceColor:S,u_targetColor:O}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return"dash"===t.lineType?{frag:'\nuniform float u_opacity;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying float v_distance_ratio;\n\nuniform float segmentNumber;\n\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n\n\n  float flag = 0.;\n  float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n  if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n    flag = 1.;\n  };\n  gl_FragColor.a *=flag;\n  \n  gl_FragColor = filterColor(gl_FragColor);\n}',vert:'\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nvarying vec4 v_color;\n\n\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_lineDir: 1.0;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\n\nuniform float u_thetaOffset: 0.314;\n\nuniform float u_opacity: 1.0;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n  // dash: index / (segmentNumber - 1.);\n  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n  return index / (segmentNumber - 1.);\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = vec4(a_Color.xyz, a_Color.w * u_opacity);\n  \n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n\n  vec2 s = source;\n  vec2 t = target;\n  \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    s = unProjCustomCoord(source);\n    t = unProjCustomCoord(target);\n  }\n  float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n\n  v_distance_ratio = segmentIndex / segmentNumber;\n\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, u_thetaOffset), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, u_thetaOffset), 0.0, 1.0));\n \n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  gl_PointSize = 5.0;\n  setPickingColor(a_PickingColor);\n}\n',type:"Dash"}:e&&n?{frag:'varying vec4 v_color;\n\n#pragma include "picking"\n\nvoid main() {\n// \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n\n  gl_FragColor = v_color;\n  gl_FragColor = filterColor(gl_FragColor);\n}',vert:'\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nvarying vec4 v_color;\nvarying float v_segmentIndex;\n\nuniform float u_lineDir: 1.0;\nuniform float u_opacity: 1.0;\n\nuniform float u_thetaOffset: 0.314;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n\n\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, u_thetaOffset), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, u_thetaOffset), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  //unProjCustomCoord\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n\n  v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  v_color.a *= u_opacity;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',type:"Linear"}:{frag:'\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\n\nuniform float segmentNumber;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_lineData;\n\n\n#pragma include "picking"\n\nvoid main() {\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  gl_FragColor = v_color;\n  \n  gl_FragColor.a *= u_opacity;\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n  }\n\n  // \u5f53\u5b58\u5728\u8d34\u56fe\u65f6\u5728\u5e95\u8272\u4e0a\u8d34\u4e0a\u8d34\u56fe\n  if(u_line_texture == LineTexture) { // while load texture\n    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));\n    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);\n\n    float count = v_lineData.g; // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n    float v = v_lineData.a; // \u6a2a\u5411 v\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= u_opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n    \n  } else {\n     gl_FragColor = filterColor(gl_FragColor);\n  }\n}',vert:'#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_lineDir: 1.0;\n\nuniform float u_thetaOffset: 0.314;\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_lineData;\nvarying vec2 v_distance_ratio;\n\nuniform float u_opacity: 1.0;\n\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\nvec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = arcThetaOffset;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  if(u_lineDir == 1.0) { // \u6b63\u5411\n    return mid;\n  } else { // \u9006\u5411\n    // (mid + vmin)/2 = (s + t)/2\n    vec2 vmid = source + target - mid;\n    return vmid;\n  }\n  // return mid;\n}\nfloat getSegmentRatio(float index) {\n    // dash: index / (segmentNumber - 1.);\n    // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n    return smoothstep(0.0, 1.0, index / (segmentNumber - 1.));\n    //  return index / (segmentNumber - 1.);\n}\nvec2 interpolate (vec2 source, vec2 target, float t, float arcThetaOffset) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  vec2 mid = midPoint(source, target, arcThetaOffset);\n  vec3 x = vec3(source.x, mid.x, target.x);\n  vec3 y = vec3(source.y, mid.y, target.y);\n  return vec2(bezier3(x ,t), bezier3(y,t));\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nvoid main() {\n  v_color = a_Color;\n\n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  float d_distance_ratio;\n  \n  if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n      if(u_lineDir != 1.0) {\n        d_distance_ratio = 1.0 - d_distance_ratio;\n      }\n  }\n\n v_lineData.b = d_distance_ratio;\n\n  vec4 curr = project_position(vec4(interpolate(source, target, segmentRatio, u_thetaOffset), 0.0, 1.0));\n  vec4 next = project_position(vec4(interpolate(source, target, nextSegmentRatio, u_thetaOffset), 0.0, 1.0));\n\n  \n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n\n\n  float d_segmentIndex = a_Position.x + 1.0; // \u5f53\u524d\u9876\u70b9\u5728\u5f27\u7ebf\u4e2d\u6240\u5904\u7684\u5206\u6bb5\u4f4d\u7f6e\n v_lineData.r = d_segmentIndex;\n\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f\n\n    float arcDistrance = length(source - target); // \u8d77\u59cb\u70b9\u548c\u7ec8\u70b9\u7684\u8ddd\u79bb\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      arcDistrance *= 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      // arcDistrance *= 8.0;\n      arcDistrance = project_pixel_allmap(arcDistrance);\n    }\n    v_iconMapUV = a_iconMapUV;\n\n    float pixelLen = project_pixel_texture(u_icon_step); // \u8d34\u56fe\u6cbf\u5f27\u7ebf\u65b9\u5411\u7684\u957f\u5ea6 - \u968f\u5730\u56fe\u7f29\u653e\u6539\u53d8\n    float texCount = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n    v_lineData.g = texCount;\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size); // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\n    v_lineData.a = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, 0, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n',type:""}}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i,o,a,s,u;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.segmentNumber,r=void 0===n?30:n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,t.next=4,this.layer.buildLayerModel({moduleName:"lineArc2d"+s,vertexShader:a,fragmentShader:o,triangulation:y.e,depth:{enable:!1},segmentNumber:r});case 4:return u=t.sent,t.abrupt("return",[u]);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:v.a.Attribute,descriptor:{name:"a_Instance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0};return[i.x,i.y]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return w});var o=n(7),a=n(10),s=n(0),u=n(1),c=n(12),l=n(3),f=n(4),h=n(2),p=n(6),d=n(8),v=n.n(d),m=n(11),g=n(9),y=n(16),_=n(22),b=n(208),x={solid:0,dash:1},w=function(t){function e(){var t;Object(s.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(p.a)(Object(c.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:m.t.NEAREST,min:m.t.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})}),t}Object(l.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor,r=t.textureBlend,i=void 0===r?"normal":r,o=t.lineType,s=void 0===o?"solid":o,u=t.dashArray,c=void 0===u?[10,5]:u,l=t.lineTexture,f=void 0!==l&&l,h=t.iconStep,p=void 0===h?100:h,d=t.segmentNumber,v=void 0===d?30:d,m=t.globalArcHeight,y=void 0===m?10:m;2===c.length&&c.push(0,0);var _=0,w=[0,0,0,0],E=[0,0,0,0];return e&&n&&(w=Object(g.T)(e),E=Object(g.T)(n),_=1),this.rendererService.getDirty()&&this.texture.bind(),Object(a.a)({u_globel:"GLOBEL"===this.mapService.version?1:0,u_globel_radius:b.a,u_global_height:y,u_textureBlend:"normal"===i?0:1,segmentNumber:v,u_line_type:x[s]||0,u_dash_array:c,u_texture:this.texture,u_line_texture:f?1:0,u_icon_step:p,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:_,u_sourceColor:w,u_targetColor:E},this.getStyleAttribute())}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return e&&n?{frag:'\n#define Animate 0.0\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_Color;\n\nvarying float v_distance_ratio;\n#pragma include "picking"\n\nvoid main() {\n\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  gl_FragColor = v_Color;\n\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute vec2 a_iconMapUV;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_distance_ratio;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  v_Color = mix(u_sourceColor, u_targetColor, a_Position.x/segmentNumber);\n\n  v_Color.a *= opacity;\n\n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',type:"Linear"}:{frag:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying vec4 v_line_data;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\nuniform float u_opacity;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = v_line_data.g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = v_line_data.b; // // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = v_line_data.a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',vert:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_line_data;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  v_line_data.g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    v_line_data.b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',type:""}}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(v.a.mark(function t(){var e,n,r,i,o,a,s,u;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.segmentNumber,r=void 0===n?30:n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,t.next=4,this.layer.buildLayerModel({moduleName:"lineArc3d"+s,vertexShader:a,fragmentShader:o,inject:this.getInject(),triangulation:_.e,segmentNumber:r});case 4:return u=t.sent,t.abrupt("return",[u]);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:m.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:m.t.DYNAMIC_DRAW,data:[],type:m.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:m.a.Attribute,descriptor:{name:"a_Instance",buffer:{usage:m.t.STATIC_DRAW,data:[],type:m.t.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:m.a.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:m.t.DYNAMIC_DRAW,data:[],type:m.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0};return[i.x,i.y]}}})}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return x});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(22),_=n(208),b={solid:0,dash:1},x=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:v.t.NEAREST,min:v.t.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.segmentNumber,g=void 0===v?30:v,y=t.globalArcHeight,x=void 0===y?10:y;2===l.length&&l.push(0,0);var w=0,E=[0,0,0,0],S=[0,0,0,0];return r&&i&&(E=Object(m.T)(r),S=Object(m.T)(i),w=1),this.rendererService.getDirty()&&this.texture.bind(),{u_globel:1,u_globel_radius:_.a,u_global_height:x,u_opacity:n,u_textureBlend:"normal"===a?0:1,segmentNumber:g,u_line_type:b[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:w,u_sourceColor:E,u_targetColor:S}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return e&&n?{frag:'\n#define Animate 0.0\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_Color;\n\nvarying float v_distance_ratio;\n#pragma include "picking"\n\nvoid main() {\n\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  gl_FragColor = v_Color;\n\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute vec2 a_iconMapUV;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_distance_ratio;\n\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    // float total_Distance = pixelDistance(a_Instance.rg, a_Instance.ba) / 2.0 * PI;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  v_Color = mix(u_sourceColor, u_targetColor, a_Position.x/segmentNumber);\n\n  v_Color.a *= opacity;\n\n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',type:"Linear"}:{frag:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying vec4 v_color;\nvarying vec4 v_line_data;\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nvarying float v_segmentIndex;\nuniform float segmentNumber;\nuniform float u_opacity;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = v_line_data.g; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  gl_FragColor = v_color;\n\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float flag = 0.;\n    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      flag = 1.;\n    }\n    gl_FragColor.a *=flag;\n  }\n\n  if(u_animate.x == Animate && u_line_texture != LineTexture) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      // alpha = smoothstep(0., 1., alpha);\n      alpha = clamp(alpha, 0.0, 1.0);\n      gl_FragColor.a *= alpha;\n\n      // u_animate \n      // x enable\n      // y duration\n      // z interval\n      // w trailLength\n  }\n\n  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture\n    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));\n    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);\n    float count = v_line_data.b; // // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float time = 0.0;\n    if(u_animate.x == Animate) {\n      time = u_time / u_animate.y;\n    }\n    float redioCount = arcRadio * count;\n\n    float u = fract(redioCount - time);\n\n    float v = v_line_data.a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    if(u_animate.x == Animate) {\n      float currentPlane = floor(redioCount - time);\n      float textureStep = floor(count * u_animate.z);\n      float a = mod(currentPlane, textureStep);\n      if(a < textureStep - 1.0) {\n        pattern = vec4(0.0);\n      }\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n          discard;\n        } else {\n          gl_FragColor = filterColor(pattern);\n        }\n    }\n\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',vert:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute vec4 a_Color;\nattribute float a_Size;\n\nuniform float u_globel;\nuniform float u_globel_radius;\nuniform float u_global_height: 10;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\nvarying float v_segmentIndex;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_line_data;\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n  float vertex_height = paraboloid(source, target, segmentRatio);\n\n  return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n  );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;\n\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\n\nfloat torad(float deg) {\n  return (deg / 180.0) * acos(-1.0);\n}\n\nvec3 lglt2xyz(vec2 lnglat) {\n  float pi = 3.1415926;\n  // + Math.PI/2 \u662f\u4e3a\u4e86\u5bf9\u9f50\u5750\u6807\n  float lng = torad(lnglat.x) + pi / 2.0;\n  float lat = torad(lnglat.y);\n\n  // \u624b\u52a8\u589e\u52a0\u4e00\u4e9b\u504f\u79fb\uff0c\u51cf\u8f7b\u9762\u7684\u51b2\u7a81\n  float radius = u_globel_radius;\n\n  float z = radius * cos(lat) * cos(lng);\n  float x = radius * cos(lat) * sin(lng);\n  float y = radius * sin(lat);\n  return vec3(x, y, z);\n}\n\nvoid main() {\n\n  v_color = a_Color;\n  vec2 source = project_position(vec4(a_Instance.rg, 0, 0)).xy;\n  vec2 target = project_position(vec4(a_Instance.ba, 0, 0)).xy;\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  float d_distance_ratio;\n   if(u_line_type == LineTypeDash) {\n    d_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);\n  }\n    if(u_animate.x == Animate) {\n      d_distance_ratio = segmentIndex / segmentNumber;\n  }\n  v_line_data.g = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  vec3 curr = getPos(source, target, segmentRatio);\n  vec3 next = getPos(source, target, nextSegmentRatio);\n  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n\n\n  v_segmentIndex = a_Position.x;\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n\n    float arcDistrance = length(source - target);\n    float pixelLen =  project_pixel_texture(u_icon_step);\n    v_line_data.b = floor(arcDistrance/pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    vec2 projectOffset = project_pixel(offset);\n    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\n    v_line_data.a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n  \n\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z, 1.0));\n  }\n\n  // \u5730\u7403\u6a21\u5f0f\n  if(u_globel > 0.0) {\n    vec3 startLngLat = lglt2xyz(a_Instance.rg);\n    vec3 endLngLat = lglt2xyz(a_Instance.ba);\n    float globalRadius = length(startLngLat);\n\n    vec3 lineDir = normalize(endLngLat - startLngLat);\n    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);\n\n    // \u7ebf\u7684\u504f\u79fb\n    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;\n    // \u8ba1\u7b97\u8d77\u59cb\u70b9\u548c\u7ec8\u6b62\u70b9\u7684\u8ddd\u79bb\n    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;\n    // \u8ba1\u7b97\u98de\u7ebf\u5404\u4e2a\u8282\u70b9\u76f8\u5e94\u7684\u9ad8\u5ea6\n    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;\n    // \u5730\u7403\u70b9\u4f4d\n    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;\n    \n    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);\n  }\n \n\n  setPickingColor(a_PickingColor);\n}\n',type:""}}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i,o,a,s,u;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.segmentNumber,r=void 0===n?30:n,i=this.getShaders(),o=i.frag,a=i.vert,s=i.type,t.next=4,this.layer.buildLayerModel({moduleName:"lineEarthArc3d"+s,vertexShader:a,fragmentShader:o,triangulation:y.e,depth:{enable:!0},segmentNumber:r});case 4:return u=t.sent,t.abrupt("return",[u]);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:v.a.Attribute,descriptor:{name:"a_Instance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0};return[i.x,i.y]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(10),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(11),v=n(9),m=n(16),g=n(22),y=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.gapWidth,n=void 0===e?2:e,r=t.strokeWidth,i=void 0===r?1:r,o=t.stroke,s=void 0===o?"#000":o,u=t.strokeOpacity,c=void 0===u?1:u;return Object(a.a)({u_gap_width:n,u_stroke_width:i,u_stroke:Object(v.T)(s),u_stroke_opacity:c},this.getStyleAttribute())}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"flow_line",vertexShader:'attribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec4 a_Instance;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n#pragma include "picking"\nvarying vec4 v_color;\nuniform float u_gap_width: 1.0;\nuniform float u_stroke_width: 1.0;\nuniform float u_stroke_opacity: 1.0;\n\n\nvoid main() {\n\n// #ifdef USE_ATTRIBUTE_OPACITY\n//   float opacity  = a_Opacity;\n// #else\n//   float opacity = u_opacity;\n// #endif\n\n\n// #ifdef USE_ATTRIBUTE_OFFSETS\n//   vec2 offsets  = a_Offsets;\n// #else\n//   vec2 offsets = u_offsets;\n// #endif\n\n  // float opacity = u_opacity;\n// \u900f\u660e\u5ea6\u8ba1\u7b97\n  vec2 source = a_Instance.rg;  // \u8d77\u59cb\u70b9\n  vec2 target =  a_Instance.ba; // \u7ec8\u70b9\n  vec2 flowlineDir = normalize(target - source);\n  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);\n\n\n  vec2 position = mix(source, target, a_Position.x);\n\n  float lengthCommon = length(target - source);    \n  vec2 offsetDistances = a_Size.x * project_pixel(a_Position.yz);\n  vec2 limitedOffsetDistances = clamp(   \n   offsetDistances,\n    -lengthCommon*.8, lengthCommon*.8\n  );\n\n  float startOffsetCommon = project_pixel(offsets[0]);\n  float endOffsetCommon = project_pixel(offsets[1]);\n  float endpointOffset = mix(\n    clamp(startOffsetCommon, 0.0, lengthCommon*.2),\n    -clamp(endOffsetCommon, 0.0, lengthCommon*.2),\n    a_Position.x\n  );\n\n  vec2 normalsCommon =  u_stroke_width * project_pixel(a_Normal.xy);\n\n  float gapCommon =  project_pixel(u_gap_width);\n  vec3 offsetCommon = vec3(\n    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -\n    perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),\n    0.0\n  );\n\n\n  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0));\n\n  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);\n  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);\n\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(project_pos.xy + offsetCommon.xy, 0., 1.0);\n  } else {\n     gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offsetCommon.xy, 0., 1.0));\n  }\n\n\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'#extension GL_OES_standard_derivatives : enable\n\nvarying vec4 v_color;\n\n\n// line texture\n\n#pragma include "picking"\n\nvoid main() {\ngl_FragColor = v_color;\ngl_FragColor = filterColor(gl_FragColor);\n}\n',inject:this.getInject(),triangulation:g.a,primitive:d.t.TRIANGLES,depth:{enable:!1},pick:!1});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:d.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:d.t.DYNAMIC_DRAW,data:[],type:d.t.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:d.a.Attribute,descriptor:{name:"a_Instance",buffer:{usage:d.t.STATIC_DRAW,data:[],type:d.t.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:d.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:d.t.STATIC_DRAW,data:[],type:d.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}})}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(22),_={solid:0,dash:1},b=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:v.t.NEAREST,min:v.t.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.lineType,u=void 0===s?"solid":s,c=t.dashArray,l=void 0===c?[10,5]:c,f=t.lineTexture,h=void 0!==f&&f,p=t.iconStep,d=void 0===p?100:p,v=t.segmentNumber,g=void 0===v?30:v;2===l.length&&l.push(0,0),this.rendererService.getDirty()&&this.texture.bind();var y=0,b=[0,0,0,0],x=[0,0,0,0];return r&&i&&(b=Object(m.T)(r),x=Object(m.T)(i),y=1),{u_opacity:n,u_textureBlend:"normal"===a?0:1,segmentNumber:g,u_line_type:_[u]||0,u_dash_array:l,u_texture:this.texture,u_line_texture:h?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:y,u_sourceColor:b,u_targetColor:x}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec4 a_Instance;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float segmentNumber;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nvarying vec4 v_color;\n\nvarying float v_distance_ratio;\nuniform float u_line_type: 0.0;\nuniform vec4 u_dash_array: [10.0, 5., 0, 0];\nvarying vec4 v_dash_array;\n\nuniform float u_icon_step: 100;\nuniform float u_line_texture: 0.0;\n\nattribute vec2 a_iconMapUV;\nvarying vec2 v_iconMapUV;\nvarying vec4 v_line_data;\n\n\n#pragma include "projection"\n#pragma include "project"\n#pragma include "picking"\n\nfloat maps (float value, float start1, float stop1, float start2, float stop2) {\n    return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));\n}\n\nfloat getSegmentRatio(float index) {\n    return index / (segmentNumber - 1.);\n}\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n    vec2 x = mix(source, target, ratio);\n    vec2 center = mix(source, target, 0.5);\n    float dSourceCenter = distance(source, center);\n    float dXCenter = distance(x, center);\n    return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvec3 getPos(vec2 source, vec2 target, float segmentRatio) {\n     float vertex_height = paraboloid(source, target, segmentRatio);\n\n    return vec3(\n    mix(source, target, segmentRatio),\n    sqrt(max(0.0, vertex_height))\n    );\n}\nvec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size)/ 2.0;\n  return offset;\n}\nvec2 getNormal(vec2 line_clipspace, float offset_direction) {\n  // normalized direction of the line\n  vec2 dir_screenspace = normalize(line_clipspace);\n  // rotate by 90 degrees\n   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);\n   return reverse_offset_normal(vec3(dir_screenspace,1.0)).xy * sign(offset_direction);\n}\nfloat getAngularDist (vec2 source, vec2 target) {\n  vec2 delta = source - target;\n  vec2 sin_half_delta = sin(delta / 2.0);\n  float a =\n    sin_half_delta.y * sin_half_delta.y +\n    cos(source.y) * cos(target.y) *\n    sin_half_delta.x * sin_half_delta.x;\n  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));\n}\n\nvec2 midPoint(vec2 source, vec2 target) {\n  vec2 center = target - source;\n  float r = length(center);\n  float theta = atan(center.y, center.x);\n  float thetaOffset = 0.314;\n  float r2 = r / 2.0 / cos(thetaOffset);\n  float theta2 = theta + thetaOffset;\n  vec2 mid = vec2(r2*cos(theta2) + source.x, r2*sin(theta2) + source.y);\n  return mid;\n}\nfloat bezier3(vec3 arr, float t) {\n  float ut = 1. - t;\n  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;\n}\n\nvec2 interpolate (vec2 source, vec2 target, float angularDist, float t) {\n  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    vec2 mid = midPoint(source, target);\n    vec3 x = vec3(source.x, mid.x, target.x);\n    vec3 y = vec3(source.y, mid.y, target.y);\n    return vec2(bezier3(x ,t), bezier3(y,t));\n  }else {\n    if(abs(angularDist - PI) < 0.001) {\n      return (1.0 - t) * source + t * target;\n    }\n    float a = sin((1.0 - t) * angularDist) / sin(angularDist);\n    float b = sin(t * angularDist) / sin(angularDist);\n    vec2 sin_source = sin(source);\n    vec2 cos_source = cos(source);\n    vec2 sin_target = sin(target);\n    vec2 cos_target = cos(target);\n    float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;\n    float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;\n    float z = a * sin_source.y + b * sin_target.y;\n    return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));\n  }\n}\n\nvoid main() {\n  \n\n  v_color = a_Color;\n  vec2 source = radians(a_Instance.rg);\n  vec2 target = radians(a_Instance.ba);\n  float angularDist = getAngularDist(source, target);\n  float segmentIndex = a_Position.x;\n  float segmentRatio = getSegmentRatio(segmentIndex);\n  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));\n\n  if(u_line_type == LineTypeDash) {\n    v_distance_ratio = segmentIndex / segmentNumber;\n    vec2 s = source;\n    vec2 t = target;\n    \n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      s = unProjCustomCoord(source);\n      t = unProjCustomCoord(target);\n    }\n    float total_Distance = pixelDistance(s, t) / 2.0 * PI;\n    total_Distance = total_Distance*16.0; // total_Distance*16.0 \u8c03\u6574\u9ed8\u8ba4\u7684\u6548\u679c\n    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;\n  }\n\n  if(u_animate.x == Animate) {\n      v_distance_ratio = segmentIndex / segmentNumber;\n  }\n\n  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);\n  v_distance_ratio = segmentIndex / segmentNumber;\n  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0));\n  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0));\n  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);\n  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));\n  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n\nv_line_data.g = a_Position.x; // \u8be5\u9876\u70b9\u5728\u5f27\u7ebf\u4e0a\u7684\u5206\u6bb5\u6392\u5e8f\n  if(LineTexture == u_line_texture) { // \u5f00\u542f\u8d34\u56fe\u6a21\u5f0f  \n    // float mapZoomScale = u_CoordinateSystem !== COORDINATE_SYSTEM_P20_2?10000000.0:1.0;\n    float d_arcDistrance = length(source - target);\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20) { // amap\n      d_arcDistrance = d_arcDistrance * 1000000.0;\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) { // mapbox\n      d_arcDistrance = project_pixel_allmap(d_arcDistrance);\n    }\n    float d_pixelLen = project_pixel(u_icon_step)/8.0;\nv_line_data.b = floor(d_arcDistrance/d_pixelLen); // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n\n    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\n    float linePixelSize = project_pixel(a_Size);  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb\nv_line_data.a = lineOffsetWidth/linePixelSize;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    v_iconMapUV = a_iconMapUV;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(curr.xy + offset, curr.z, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));\n  }\n  setPickingColor(a_PickingColor);\n}\n\n',fragmentShader:'#define LineTypeSolid 0.0\n#define LineTypeDash 1.0\n#define Animate 0.0\n#define LineTexture 1.0\n\nuniform float u_opacity;\nuniform float u_textureBlend;\nuniform float u_blur : 0.9;\nuniform float u_line_type: 0.0;\n// varying vec2 v_normal;\nvarying vec4 v_dash_array;\nvarying float v_distance_ratio;\nvarying vec4 v_color;\n\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\n\nuniform float u_line_texture: 0.0;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float segmentNumber;\n\nvarying vec2 v_iconMapUV;\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nvarying vec4 v_line_data;\n\n#pragma include "picking"\n#pragma include "project"\n#pragma include "projection"\n\nvoid main() {\n  float opacity = u_opacity;\n  float animateSpeed = 0.0;\n  float d_segmentIndex = v_line_data.g;\n  \n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));\n  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));\n  gl_FragColor.a *= opacity;\n  if(u_line_type == LineTypeDash) {\n    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);\n    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {\n      // \u5b9e\u7ebf\u90e8\u5206\n    } else {\n      // \u865a\u7ebf\u90e8\u5206\n      discard;\n    };\n  }\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u52a8\u753b\u6a21\u5f0f\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  // \u8bbe\u7f6e\u5f27\u7ebf\u7684\u8d34\u56fe\n  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { \n    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));\n    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);\n    float count = v_line_data.b; // \u8d34\u56fe\u5728\u5f27\u7ebf\u4e0a\u91cd\u590d\u7684\u6570\u91cf\n    float u = fract(arcRadio * count - animateSpeed * count);\n    // float u = fract(arcRadio * count - animateSpeed);\n    if(u_animate.x == Animate) {\n      u = gl_FragColor.a/opacity;\n    }\n\n    float v = v_line_data.a; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n    \n    // \u8bbe\u7f6e\u8d34\u56fe\u548c\u5e95\u8272\u7684\u53e0\u52a0\u6a21\u5f0f\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  // gl_FragColor = filterColor(gl_FragColor);\n}',triangulation:y.e,depth:{enable:!1}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:v.a.Attribute,descriptor:{name:"a_Instance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:4,update:function(t,e,n){return[n[3],n[4],n[5],n[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0};return[i.x,i.y]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(116),_=n(22),b=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;t.colorTexture&&t.colorTexture.destroy();var n=t.layer.getLayerConfig(),r=n.rampColors,i=Object(m.x)(r);t.colorTexture=e({data:new Uint8Array(i.data),width:i.width,height:i.height,wrapS:v.t.CLAMP_TO_EDGE,wrapT:v.t.CLAMP_TO_EDGE,min:v.t.NEAREST,mag:v.t.NEAREST,flipY:!1})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.vertexHeightScale,i=void 0===r?20:r,o=t.raisingHeight,a=void 0===o?0:o,s=t.heightfixed,u=void 0!==s&&s,c=t.linearDir,l=void 0===c?y.b.VERTICAL:c;return this.rendererService.getDirty()&&this.colorTexture.bind(),{u_linearDir:l===y.b.VERTICAL?1:0,u_opacity:n,u_texture:this.colorTexture,u_heightfixed:Number(u),u_vertexScale:i,u_raisingHeight:Number(a)}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTexture(),t.abrupt("return",this.buildModels());case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.colorTexture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.depth,r=void 0!==n&&n,this.layer.triangulation=_.f,t.next=4,this.layer.buildLayerModel({moduleName:"lineRampColors",vertexShader:'\nattribute float a_Miter;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\n\n// dash line\nattribute float a_Total_Distance;\nattribute vec2 a_DistanceAndIndex;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_heightfixed: 0.0;\nuniform float u_vertexScale: 1.0;\nuniform float u_raisingHeight: 0.0;\nuniform float u_opacity : 1.0;\nuniform sampler2D u_texture;\nuniform float u_linearDir: 1.0;\nvarying vec4 v_Color;\n\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n\n\n  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);\n  \n  vec2 offset = project_pixel(size.xy);\n\n  float lineDistance = a_DistanceAndIndex.x;\n  float currentLinePointRatio = lineDistance / a_Total_Distance;\n \n\n  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7ebf\u6a2a\u5411\u504f\u79fb\u7684\u8ddd\u79bb\uff08\u5411\u4e24\u4fa7\u504f\u79fb\u7684\u548c\uff09\n  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5b9a\u70b9\u4f4d\u7f6e\u504f\u79fb\uff0c\u6309\u5730\u56fe\u7b49\u7ea7\u7f29\u653e\u540e\u7684\u8ddd\u79bb \u5355\u4fa7 * 2\n  float texV = lineOffsetWidth/linePixelSize; // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n  float linearRadio =currentLinePointRatio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  if(u_linearDir < 1.0) {\n    linearRadio = texV;\n  }\n\n  v_Color = texture2D(u_texture, vec2(linearRadio, 0.5));\n\n  v_Color.a *= u_opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n\n\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5 vertex height\n  float lineHeight = a_Size.y; // size \u7b2c\u4e8c\u4e2a\u53c2\u6570\u4ee3\u8868\u7684\u9ad8\u5ea6 [linewidth, lineheight]\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    lineHeight *= 0.2; // \u4fdd\u6301\u548c amap/mapbox \u4e00\u81f4\u7684\u6548\u679c\n    h *= 0.2;\n    if(u_heightfixed < 1.0) {\n      lineHeight = project_pixel(a_Size.y);\n    }\n    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h + u_raisingHeight, 1.0));\n  } else {\n    // mapbox -  amap\n    \n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // mapbox\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      h *= mapboxZoomScale;\n      h += u_raisingHeight * mapboxZoomScale;\n      if(u_heightfixed > 0.0) {\n        lineHeight *= mapboxZoomScale;\n      }\n      \n    } else {\n      // amap\n      h += u_raisingHeight;\n      // lineHeight \u9876\u70b9\u504f\u79fb\u9ad8\u5ea6\n      if(u_heightfixed < 1.0) {\n        lineHeight *= pow(2.0, 20.0 - u_Zoom);\n      }\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nvarying vec4 v_Color;\n#pragma include "picking"\nvoid main() {\n\n  gl_FragColor = v_Color; // \u5168\u5c40\u900f\u660e\u5ea6\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:_.f,depth:{enable:r}});case 4:return i=t.sent,t.abrupt("return",[i]);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:v.a.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t,e,n,r,i,o){return void 0===o?[n[3],10]:[n[3],o]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:v.a.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:v.a.Attribute,descriptor:{name:"a_Miter",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(9),v=n(16),m=n(22),g='attribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Position;\n\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_opacity: 1.0;\nuniform float u_vertexScale: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\n\n\n#pragma include "projection"\n\nvarying vec4 v_color;\nvarying float v_distanceScale;\n\nvoid main() {\n\n  v_color = a_Color; \n  v_distanceScale = a_Distance / a_Total_Distance;\n  v_color = vec4(a_Color.xyz, a_Color.w * u_opacity); \n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  float h = float(a_Position.z) * u_vertexScale; // \u7ebf\u9876\u70b9\u7684\u9ad8\u5ea6 - \u517c\u5bb9\u4e0d\u5b58\u5728\u7b2c\u4e09\u4e2a\u6570\u503c\u7684\u60c5\u51b5\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy, project_pixel(a_Size.y) + h * 0.2, 1.0));\n  } else {\n    float lineHeight = a_Size.y;\n    // \u517c\u5bb9 mapbox \u5728\u7ebf\u9ad8\u5ea6\u4e0a\u7684\u6548\u679c\u8868\u73b0\u57fa\u672c\u4e00\u81f4\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      h *= 2.0/pow(2.0, 20.0 - u_Zoom);\n    }\n\n    // #define COORDINATE_SYSTEM_P20 5.0\n    // #define COORDINATE_SYSTEM_P20_OFFSET 6.0\n    // amap1.x\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // \u4fdd\u6301\u9ad8\u5ea6\u76f8\u5bf9\u4e0d\u53d8\n      lineHeight *= pow(2.0, 20.0 - u_Zoom);\n    }\n\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));\n    gl_PointSize = 10.0;\n  }\n}\n',y=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.vertexHeightScale,a=void 0===o?20:o,s=0,u=[0,0,0,0],c=[0,0,0,0];return r&&i&&(u=Object(d.T)(r),c=Object(d.T)(i),s=1),{u_opacity:n,u_linearColor:s,u_sourceColor:u,u_targetColor:c,u_vertexScale:a}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.sourceColor,n=t.targetColor;return e&&n?{frag:"uniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float opacity;\nvoid main() {\n  gl_FragColor = mix(u_sourceColor, u_targetColor, v_distanceScale);\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n}\n",vert:g,type:"lineSimpleLinear"}:{frag:"\nvarying vec4 v_color;\nvoid main() {\n  gl_FragColor = v_color;\n\n}\n",vert:g,type:"lineSimpleNormal"}}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e,n,r,i,o;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getShaders(),n=e.frag,r=e.vert,i=e.type,t.next=3,this.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,triangulation:m.l,primitive:p.t.LINES,depth:{enable:!1},pick:!1});case 3:return o=t.sent,t.abrupt("return",[o]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"distance",type:p.a.Attribute,descriptor:{name:"a_Distance",buffer:{usage:p.t.STATIC_DRAW,data:[],type:p.t.FLOAT},size:1,update:function(t,e,n){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:p.a.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:p.t.STATIC_DRAW,data:[],type:p.t.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}})}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(19),y=(n.n(g),n(16)),_=n(22),b=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas()}),void t.layer.render();t.texture=e({data:t.iconService.getCanvas(),mag:v.t.NEAREST,min:v.t.NEAREST,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.sourceColor,i=t.targetColor,o=t.textureBlend,a=void 0===o?"normal":o,s=t.heightfixed,u=void 0!==s&&s,c=t.lineTexture,l=void 0!==c&&c,f=t.iconStep,h=void 0===f?100:f,p=t.iconStepCount,d=void 0===p?1:p;this.rendererService.getDirty()&&this.texture.bind();var v=0,y=[0,0,0,0],_=[0,0,0,0];return r&&i&&(y=Object(m.T)(r),_=Object(m.T)(i),v=1),{u_heightfixed:Number(u),u_opacity:Object(g.isNumber)(n)?n:1,u_textureBlend:"normal"===a?0:1,u_texture:this.texture,u_line_texture:l?1:0,u_iconStepCount:d,u_icon_step:h,u_textSize:[1024,this.iconService.canvasHeight||128],u_linearColor:v,u_sourceColor:y,u_targetColor:_}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption;return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"lineWall",vertexShader:'#define Animate 0.0\n\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute vec2 a_Size;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\nattribute vec2 a_iconMapUV;\nattribute float a_Total_Distance;\nattribute float a_Distance;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ];\nuniform float u_icon_step: 100;\nuniform float u_heightfixed;\nuniform float u_linearColor: 0;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\n// texV \u7ebf\u56fe\u5c42 - \u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\uff08\u7ebf\u7684\u5bbd\u5ea6\u65b9\u5411\uff09\nvarying vec2 v_iconMapUV;\nvarying vec4 v_color;\nvarying float v_blur;\nvarying float v_radio;\nvarying vec4 v_dataset;\n\nvoid main() {\n\n\n  float d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  float d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n\n  v_iconMapUV = a_iconMapUV;\n  if(u_heightfixed < 1.0) {     // \u9ad8\u5ea6\u968f zoom \u8c03\u6574\n    d_texPixelLen = project_pixel(u_icon_step);\n  } else {\n    d_texPixelLen = u_icon_step;\n  }\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n    d_texPixelLen *= 10.0;\n  }\n\n  if(u_animate.x == Animate || u_linearColor == 1.0) {\n      d_distance_ratio = a_Distance / a_Total_Distance;\n  }\n\n  float miter = (a_Miter + 1.0)/2.0;\n  // \u8bbe\u7f6e\u6570\u636e\u96c6\u7684\u53c2\u6570\n  v_dataset[0] = d_distance_ratio; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  v_dataset[1] = a_Distance;       // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n  v_dataset[2] = d_texPixelLen;    // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n  v_dataset[3] = miter;          // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c 0 - 1\n\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n\n  float originSize = a_Size.x;  // \u56fa\u5b9a\u9ad8\u5ea6\n  if(u_heightfixed < 1.0) {     // \u9ad8\u5ea6\u968f zoom \u8c03\u6574\n    originSize = project_float_pixel(a_Size.x);\n  }\n\n  float wallHeight = originSize * miter;\n  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));\n\n  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);\n  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xy, wallHeight, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'#define Animate 0.0\n#define LineTexture 1.0\n\n// line texture\nuniform float u_line_texture;\nuniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_opacity : 1.0;\nuniform float u_textureBlend;\nuniform float u_iconStepCount;\nuniform float u_time;\nuniform vec4 u_animate: [ 1., 2., 1.0, 0.2 ]; // \u63a7\u5236\u8fd0\u52a8\n\nvarying vec2 v_iconMapUV;\nvarying float v_blur;\nvarying float v_radio;\nvarying vec4 v_color;\nvarying vec4 v_dataset;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float animateSpeed = 0.0; // \u8fd0\u52a8\u901f\u5ea6\n  float d_distance_ratio = v_dataset.r; // \u5f53\u524d\u70b9\u4f4d\u8ddd\u79bb\u5360\u7ebf\u603b\u957f\u7684\u6bd4\u4f8b\n  float v = v_dataset.a;\n\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    gl_FragColor = mix(u_sourceColor, u_targetColor, v);\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     gl_FragColor = v_color;\n  }\n\n  gl_FragColor.a *= opacity; // \u5168\u5c40\u900f\u660e\u5ea6\n  if(u_animate.x == Animate) {\n      animateSpeed = u_time / u_animate.y;\n       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);\n      alpha = (alpha + u_animate.w -1.0) / u_animate.w;\n      alpha = smoothstep(0., 1., alpha);\n      gl_FragColor.a *= alpha;\n  }\n\n  if(u_line_texture == LineTexture) { // while load texture\n    float aDistance = v_dataset.g;      // \u5f53\u524d\u9876\u70b9\u7684\u8ddd\u79bb\n    float d_texPixelLen = v_dataset.b;  // \u8d34\u56fe\u7684\u50cf\u7d20\u957f\u5ea6\uff0c\u6839\u636e\u5730\u56fe\u5c42\u7ea7\u7f29\u653e\n    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);\n    float v = v_dataset.a;  // \u7ebf\u56fe\u5c42\u8d34\u56fe\u90e8\u5206\u7684 v \u5750\u6807\u503c\n\n    // \u8ba1\u7b97\u7eb9\u7406\u95f4\u9694 start\n    float flag = 0.0;\n    if(u > 1.0/u_iconStepCount) {\n      flag = 1.0;\n    }\n    u = fract(u*u_iconStepCount);\n    // \u8ba1\u7b97\u7eb9\u7406\u95f4\u9694 end\n\n    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;\n    vec4 pattern = texture2D(u_texture, uv);\n\n    // Tip: \u5224\u65ad\u7eb9\u7406\u95f4\u9694\n    if(flag > 0.0) {\n      pattern = vec4(0.0);\n    }\n\n    if(u_textureBlend == 0.0) { // normal\n      pattern.a = 0.0;\n      gl_FragColor = filterColor(gl_FragColor + pattern);\n    } else { // replace\n        pattern.a *= opacity;\n        if(gl_FragColor.a <= 0.0) {\n          pattern.a = 0.0;\n        }\n        gl_FragColor = filterColor(pattern);\n    }\n  }\n  \n\n  // blur - AA\n  if(v < v_blur) {\n    gl_FragColor.a = mix(0.0, gl_FragColor.a, v/v_blur);\n  } else if(v > 1.0 - v_blur) {\n    gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:_.f,depth:{enable:!1},blend:this.getBlend()});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"distance",type:v.a.Attribute,descriptor:{name:"a_Distance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[3]]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:v.a.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:v.a.Attribute,descriptor:{name:"a_Miter",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t,e,n){return[n[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.texture,i=n[r]||{x:0,y:0};return[i.x,i.y]}}})}}]),e}(y.a)},function(t,e,n){"use strict";var r=n(1115),i=n(1116),o=n(475),a=n(476),s=n(1117),u=n(477),c=n(478),l=n(1118),f=n(1119),h=n(479),p={fillImage:s.a,fill:a.a,radar:l.a,image:u.a,normal:c.a,simplePoint:f.a,extrude:o.a,text:h.a,earthFill:i.a,earthExtrude:r.a};e.a=p},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return x});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(19),y=(n.n(g),n(16)),_=n(22),b=n(208),x=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"raiseCount",0),Object(h.a)(Object(u.a)(t),"raiseRepeat",0),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1,speed:.01,repeat:!1}:e,r=t.opacity,i=void 0===r?1:r,o=t.sourceColor,a=t.targetColor,s=t.pickLight,u=void 0!==s&&s,c=t.heightfixed,l=void 0!==c&&c,f=t.opacityLinear,h=void 0===f?{enable:!1,dir:"up"}:f,p=t.lightEnable,d=void 0===p||p,v=0,y=[0,0,0,0],_=[0,0,0,0];if(o&&a&&(y=Object(m.T)(o),_=Object(m.T)(a),v=1),this.raiseCount<1&&this.raiseRepeat>0&&n.enable){var b=n.speed,x=void 0===b?.01:b;this.raiseCount+=x,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}return{u_pickLight:Number(u),u_heightfixed:Number(l),u_r:n.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:Object(g.isNumber)(i)?i:1,u_linearColor:v,u_sourceColor:y,u_targetColor:_,u_opacitylinear:Number(h.enable),u_opacitylinear_dir:"up"===h.dir?1:0,u_lightEnable:Number(d)}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.animateOption.repeat,r=void 0===n?1:n,this.raiseRepeat=r,t.next=4,this.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:'precision highp float;\n\n#define pi 3.1415926535\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_globel;\nuniform float u_r;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform float u_lightEnable: 1;\nvarying float v_lightWeight;\nvarying float v_barLinearZ;\n// \u7528\u4e8e\u5c06\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u597d\u7684\u6837\u5f0f\u503c\u4f20\u9012\u7ed9\u7247\u5143\n\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nfloat getYRadian(float x, float z) {\n  if(x > 0.0 && z > 0.0) {\n    return atan(x/z);\n  } else if(x > 0.0 && z <= 0.0){\n    return atan(-z/x) + pi/2.0;\n  } else if(x <= 0.0 && z <= 0.0) {\n    return  pi + atan(x/z); //atan(x/z) + \n  } else {\n    return atan(z/-x) + pi*3.0/2.0;\n  }\n}\n\nfloat getXRadian(float y, float r) {\n  return atan(y/r);\n}\n\nvoid main() {\n\n  \n  float textureOffset = 0.0; // \u5728 cell \u4e2d\u53d6\u503c\u7684\u504f\u79fb\u91cf\n\n  textureOffset = opacityAndOffset.g;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec3 size = a_Size * a_Position;\n\n  // a_Position.z \u662f\u5728\u6784\u5efa\u7f51\u683c\u7684\u65f6\u5019\u4f20\u5165\u7684\u6807\u51c6\u503c 0 - 1\uff0c\u5728\u63d2\u503c\u5668\u63d2\u503c\u53ef\u4ee5\u83b7\u53d6 0\uff5e1 \u7ebf\u6027\u6e10\u53d8\u7684\u503c\n  v_barLinearZ =  a_Position.z;\n\n  vec3 offset = size; // \u63a7\u5236\u5706\u67f1\u4f53\u7684\u5927\u5c0f - \u4ece\u6807\u51c6\u5355\u4f4d\u5706\u67f1\u4f53\u8fdb\u884c\u504f\u79fb\n  if(u_heightfixed < 1.0) { // \u5706\u67f1\u4f53\u4e0d\u56fa\u5b9a\u9ad8\u5ea6\n    \n    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n      // P20 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf1\n      offset = offset * pow(2.0, (19.0 - u_Zoom));\n    }\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {\n      // P20_2 \u5750\u6807\u7cfb\u4e0b\uff0c\u4e3a\u4e86\u548c Web \u58a8\u5361\u6258\u5750\u6807\u7cfb\u7edf\u4e00\uff0czoom \u9ed8\u8ba4\u51cf3\n      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));\n    }\n  } else {// \u5706\u67f1\u4f53\u56fa\u5b9a\u9ad8\u5ea6 \uff08 \u5904\u7406 mapbox \uff09\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);\n    }\n  }\n\n\n  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));\n\n  // u_r \u63a7\u5236\u5706\u67f1\u7684\u751f\u957f\n  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);\n\n  // \u5706\u67f1\u5149\u7167\u6548\u679c\n  float lightWeight = 1.0;\n  if(u_lightEnable > 0.0) { // \u53d6\u6d88\u4e09\u5143\u8868\u8fbe\u5f0f\uff0c\u589e\u5f3a\u5065\u58ee\u6027\n    lightWeight = calc_lighting(pos);\n  }\n  v_lightWeight = lightWeight;\n  // \u8bbe\u7f6e\u5706\u67f1\u7684\u5e95\u8272\n  if(u_linearColor == 1.0) { // \u4f7f\u7528\u6e10\u53d8\u989c\u8272\n    v_color = mix(u_sourceColor, u_targetColor, barLinearZ);\n    v_color.rgb *= lightWeight;\n  } else { // \u4f7f\u7528 color \u65b9\u6cd5\u4f20\u5165\u7684\u989c\u8272\n     v_color = a_Color;\n  }\n  v_color.a *= u_opacity;\n\n    \n  // \u5728\u5730\u7403\u6a21\u5f0f\u4e0b\uff0c\u5c06\u539f\u672c\u5782\u76f4\u4e8e xy \u5e73\u9762\u7684\u5706\u67f1\u8c03\u6574\u59ff\u6001\u5230\u9002\u5e94\u5706\u7684\u89d2\u5ea6\n  //\u65cb\u8f6c\u77e9\u9635mx\uff0c\u521b\u5efa\u7ed5x\u8f74\u65cb\u8f6c\u77e9\u9635\n  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);\n  float xRadian = getXRadian(a_Pos.y, r);\n  float xcos = cos(xRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u4f59\u5f26\u503c\n  float xsin = sin(xRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u6b63\u5f26\u503c\n  mat4 mx = mat4(\n    1,0,0,0,  \n    0,xcos,-xsin,0,  \n    0,xsin,xcos,0,  \n    0,0,0,1);\n\n  //\u65cb\u8f6c\u77e9\u9635my\uff0c\u521b\u5efa\u7ed5y\u8f74\u65cb\u8f6c\u77e9\u9635\n  float yRadian = getYRadian(a_Pos.x, a_Pos.z);\n  float ycos = cos(yRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u4f59\u5f26\u503c\n  float ysin = sin(yRadian);//\u6c42\u89e3\u65cb\u8f6c\u89d2\u5ea6\u6b63\u5f26\u503c\n  mat4 my = mat4(\n    ycos,0,-ysin,0,  \n    0,1,0,0,  \n    ysin,0,ycos,0,  \n    0,0,0,1);\n\n  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);\n  \n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'varying vec4 v_color;\nuniform float u_opacity: 1.0;\n\nuniform float u_pickLight: 0.0;\n\n#pragma include "picking"\n\n\nuniform float u_linearColor: 0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\n\nuniform float u_opacitylinear: 0.0;\nuniform float u_opacitylinear_dir: 1.0;\nvarying float v_lightWeight;\nvarying float v_barLinearZ;\nvoid main() {\n\n   gl_FragColor = v_color;\n\n  // \u5f00\u542f\u900f\u660e\u5ea6\u6e10\u53d8\n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;\n  }\n\n  // picking\n  if(u_pickLight > 0.0) {\n    gl_FragColor = filterColorAlpha(gl_FragColor, v_lightWeight);\n  } else {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n',triangulation:_.g,depth:{enable:!0},cull:{enable:!0,face:Object(m.D)(this.mapService.version)},blend:this.getBlend()});case 4:return i=t.sent,t.abrupt("return",[i]);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t){var e=t.size;if(e){var n=[];return Array.isArray(e)&&(n=2===e.length?[e[0],e[0],e[1]]:e),Array.isArray(e)||(n=[e,e,e]),n}return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:v.a.Attribute,descriptor:{name:"a_Pos",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t){var e=Object(m.q)(t.coordinates);return Object(b.d)([e[0],e[1]])}}})}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(20),a=n(15),s=n(7),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(8),d=n.n(p),v=n(11),m=n(16),g=n(22),y=n(9),_=n(36),b=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.strokeOpacity,i=void 0===r?1:r,o=t.strokeWidth,a=void 0===o?0:o,s=t.stroke,u=void 0===s?"rgba(0,0,0,0)":s,c=t.blend,l=t.blur;return{u_blur:void 0===l?0:l,u_additive:"additive"===c?1:0,u_opacity:n,u_stroke_opacity:i,u_stroke_width:a,u_stroke_color:Object(y.T)(u)}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1}:e;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(s.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(s.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.triangulation=g.b,t.next=3,this.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:'attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\nuniform vec2 u_offsets;\n\nuniform float u_blur : 0.0;\n\n#pragma include "projection"\n#pragma include "picking"\n\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float shape_type = a_Shape;\n  /*\n  *  setPickingSize \u8bbe\u7f6e\u62fe\u53d6\u5927\u5c0f\n  */\n  float newSize = setPickingSize(a_Size);\n  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n  // radius(16-bit)\n  v_radius = newSize;\n\n  // anti-alias\n  //  float antialiased_blur = -max(u_blur, antialiasblur);\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);\n\n  // TODP: /abs(extrude.x) \u662f\u4e3a\u4e86\u517c\u5bb9\u5730\u7403\u6a21\u5f0f\n  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);\n\n\n  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + u_offsets, 1.0);\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:"uniform float u_additive;\nuniform float u_opacity : 1;\nuniform float u_stroke_opacity : 1;\nuniform float u_stroke_width : 2;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n#pragma include \"picking\"\n\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius + strokeWidth);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  if(outer_df > antialiasblur + 0.018) discard;\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(\n    antialiasblur,\n    0.0,\n    inner_df\n  );\n\n  if(strokeWidth < 0.01) {\n    gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);\n  } else {\n    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), u_stroke_color * u_stroke_opacity, color_t);\n  }\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);\n  } else {\n    gl_FragColor.a *= opacity_t;\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n}\n",triangulation:g.b,depth:{enable:!0},blend:this.getBlend()});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:v.a.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r){var i=Object(a.a)(n,3),s=i[0],u=i[1],c=i[2],l=_.d.fromValues(0,0,1),f=_.d.fromValues(s,0,c),h=s>=0?_.d.angle(l,f):2*Math.PI-_.d.angle(l,f),p=2*Math.PI-Math.asin(u/100),d=_.b.create();_.b.rotateY(d,d,h),_.b.rotateX(d,d,p);var v=_.d.fromValues(1,1,0);_.d.transformMat4(v,v,d),_.d.normalize(v,v);var m=_.d.fromValues(-1,1,0);_.d.transformMat4(m,m,d),_.d.normalize(m,m);var g=_.d.fromValues(-1,-1,0);_.d.transformMat4(g,g,d),_.d.normalize(g,g);var y=_.d.fromValues(1,-1,0);_.d.transformMat4(y,y,d),_.d.normalize(y,y);var b=[].concat(Object(o.a)(v),Object(o.a)(m),Object(o.a)(g),Object(o.a)(y)),x=r%4*3;return[b[x],b[x+1],b[x+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:v.a.Attribute,descriptor:{name:"a_Shape",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(e){var n=e.shape,r=void 0===n?2:n;return[t.layer.getLayerConfig().shape2d.indexOf(r)]}}})}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(116),_=n(22),b=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"meter2coord",1),Object(h.a)(Object(u.a)(t),"isMeter",!1),Object(h.a)(Object(u.a)(t),"radian",0),Object(h.a)(Object(u.a)(t),"updateTexture",function(){var e=t.rendererService.createTexture2D;if(t.texture)return t.texture.update({data:t.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),void t.layerService.throttleRenderLayers();t.texture=e({data:t.iconService.getCanvas(),mag:v.t.LINEAR,min:v.t.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:t.iconService.canvasHeight||128,mipmap:!0})}),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,i=void 0===r?[0,0]:r,o=t.rotation,a=t.raisingHeight,s=void 0===a?0:a,u=t.heightfixed,c=void 0!==u&&u,l=t.unit,f=void 0===l?"pixel":l;this.rendererService.getDirty()&&this.texture.bind();var h=1;return"GAODE2.x"!==this.mapService.version&&"GAODE1.x"!==this.mapService.version||(h=-1),this.radian=void 0!==o?h*Math.PI*o/180:h*Math.PI*(this.mapService.getRotation()%360)/180,{u_raisingHeight:Number(s),u_heightfixed:Number(c),u_size_unit:y.c[f],u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:n,u_offsets:i}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),_.h)}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.iconService.on("imageUpdate",this.updateTexture),this.updateTexture(),t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:'attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nattribute vec2 a_Uv;\nattribute float a_Rotate;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform mat2 u_RotateMatrix;\nuniform int u_size_unit;\n\nvarying vec2 v_uv; // \u672c\u8eab\u7684 uv \u5750\u6807\nvarying vec2 v_Iconuv; // icon \u8d34\u56fe\u7684 uv \u5750\u6807\n\nuniform float u_raisingHeight: 0.0;\nuniform float u_heightfixed: 0.0;\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\n\n\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  v_uv = (a_Extrude.xy + 1.0)/2.0;\n  v_uv.y = 1.0 - v_uv.y;\n  v_Iconuv = a_Uv;\n\n\n  highp float angle_sin = sin(a_Rotate);\n  highp float angle_cos = cos(a_Rotate);\n  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n  float newSize = a_Size;\n  if(u_size_unit == 1) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n\n  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);\n  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (newSize) + u_offsets);\n  vec3 aPosition = a_Position;\n\n  offset = project_pixel(offset);\n\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n  float raisingHeight = u_raisingHeight;\n  if(u_heightfixed < 1.0) { // height fixed\n    raisingHeight = project_pixel(u_raisingHeight);\n  } else {\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      raisingHeight = u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp *vec4(project_pos.xy + offset, raisingHeight, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));\n  }\n \n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'uniform sampler2D u_texture;\nuniform vec2 u_textSize;\nuniform float u_opacity : 1;\n\n#pragma include "sdf_2d"\n#pragma include "picking"\nvarying vec2 v_uv; // \u672c\u8eab\u7684 uv \u5750\u6807\nvarying vec2 v_Iconuv;\n\nvoid main() {\n\n  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;\n  gl_FragColor = texture2D(u_texture, pos);\n  gl_FragColor.a *= u_opacity;\n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:_.h,depth:{enable:!1},cull:{enable:!0,face:Object(m.D)(this.mapService.version)}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;this.iconService.off("imageUpdate",this.updateTexture),null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:v.a.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.rotate,n=void 0===e?0:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(e){var n=t.iconService.getIconMap(),r=e.shape,i=n[r]||{x:-64,y:-64};return[i.x,i.y]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:v.a.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(16),v=n(116),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.blend,i=t.speed,o=void 0===i?1:i,a=t.unit,s=void 0===a?"pixel":a;return{u_size_unit:v.c[s],u_speed:o,u_additive:"additive"===r?1:0,u_opacity:n}}},{key:"getAnimateUniforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=void 0===e?{enable:!1}:e;return{u_animate:this.animateOption2Array(n),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),m.h)}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:'attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Extrude;\nattribute float a_Size;\nuniform float u_speed: 1.0;\nuniform float u_time;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform int u_size_unit;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec2 v_exteude;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  vec3 extrude = a_Extrude;\n  float newSize = setPickingSize(a_Size);\n\n  float time = u_time * u_speed;\n  mat2 rotateMatrix = mat2( \n    cos(time), sin(time), \n    -sin(time), cos(time)\n  );\n  v_exteude = rotateMatrix * a_Extrude.xy;\n\n  // unpack color(vec2)\n  v_color = a_Color;\n\n\n\n  // anti-alias\n  float blur = 0.0;\n  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);\n\n  if(u_size_unit == 1) {\n    newSize = newSize  * u_PixelsPerMeter.z;\n  }\n  // radius(16-bit)\n  v_radius = newSize;\n\n  vec2 offset = (extrude.xy * (newSize));\n  vec3 aPosition = a_Position;\n  \n    // \u4e0d\u4ee5\u7c73\u4e3a\u5b9e\u9645\u5355\u4f4d\n  offset = project_pixel(offset);\n  \n  v_data = vec4(extrude.x, extrude.y, antialiasblur, -1.0);\n\n  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp *vec4(project_pos.xy + offset, 0.0, 1.0);\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nuniform float u_additive;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\nvarying vec2 v_exteude;\n#pragma include "sdf_2d"\n#pragma include "picking"\n\nvoid main() {\n\n  lowp float antialiasblur = v_data.z;\n  float r = v_radius / (v_radius);\n\n  float outer_df = sdCircle(v_data.xy, 1.0);\n  float inner_df = sdCircle(v_data.xy, r);\n\n  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);\n\n  gl_FragColor = vec4(v_color.rgb, v_color.a * u_opacity);\n\n  if(u_additive > 0.0) {\n    gl_FragColor *= opacity_t;\n  } else {\n    gl_FragColor.a *= opacity_t;\n  }\n\n  if(gl_FragColor.a > 0.0) {\n    gl_FragColor = filterColor(gl_FragColor);\n  }\n\n  vec2 extrude =  v_exteude;\n  vec2 dir = normalize(extrude);\n  vec2 baseDir = vec2(1.0, 0.0);\n  float pi = 3.14159265359;\n  // full circle\n  // float rades = dot(dir, baseDir);\n  // float flag = sign(dir.y);\n  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;\n  \n  // half circle\n  float flag = sign(dir.y);\n  float rades = dot(dir, baseDir);\n  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;\n  // simple AA\n  if(radar_v > 0.99) {\n    radar_v = 1.0 - (radar_v - 0.99)/0.01;\n  }\n\n  gl_FragColor.a *= radar_v;\n}\n',triangulation:m.h,depth:{enable:!1}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"animateOption2Array",value:function(t){return[t.enable?0:1,t.speed||1,t.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:p.a.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t,e,n,r){var i=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=r%4*3;return[i[o],i[o+1],i[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:p.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?5:e;return Array.isArray(n)?[n[0]]:[n]}}})}}]),e}(d.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function o(t){var e=t.coordinates;return{vertices:Object(h.a)(e),indices:[0],size:e.length}}n.d(e,"a",function(){return y});var a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(20),p=n(8),d=n.n(p),v=n(11),m=n(16),g=n(9),y=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.offsets,i=void 0===r?[0,0]:r,o=t.blend,a=t.strokeOpacity,s=void 0===a?1:a,u=t.strokeWidth,c=void 0===u?0:u,l=t.stroke,f=void 0===l?"#fff":l;return{u_additive:"additive"===o?1:0,u_opacity:n,u_offsets:i,u_stroke_opacity:s,u_stroke_width:c,u_stroke_color:Object(g.T)(f)}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.triangulation=o,t.next=3,this.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:'\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute float a_Size;\nattribute vec4 a_Color;\nvarying vec4 v_color;\n\nuniform float u_opacity : 1;\nuniform vec2 u_offsets;\nuniform float u_stroke_width;\n\nvarying float v_blur;\nvarying float v_innerRadius;\n\n\n\n#pragma include "projection"\n#pragma include "picking"\n#pragma include "project"\nvoid main() {\n  v_color = vec4(a_Color.xyz, a_Color.w * u_opacity);\n  v_blur = 1.0 - max(2.0/a_Size, 0.05);\n  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);\n  \n  vec2 offset = project_pixel(u_offsets);\n  \n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);\n  } else { // else\n    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);\n    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\n  }\n\n  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;\n  setPickingColor(a_PickingColor);\n}\n',fragmentShader:'\nuniform float u_additive;\nuniform float u_stroke_opacity : 1;\n\nuniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];\n\nvarying vec4 v_color;\nvarying float v_blur;\nvarying float v_innerRadius;\n\n#pragma include "picking"\nvoid main() {\n  vec2 center = vec2(0.5);\n\n  // Tip: \u7247\u5143\u5230\u4e2d\u5fc3\u70b9\u7684\u8ddd\u79bb 0 - 1\n  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;\n  // Tip: \u7247\u5143\u7684\u526a\u5207\u6210\u5706\u5f62\n  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);\n\n\n  if(v_innerRadius < 0.99) {\n    // \u5f53\u5b58\u5728 stroke \u4e14 stroke > 0.01\n    float blurWidth = (1.0 - v_blur)/2.0;\n    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);\n    if(fragmengTocenter > v_innerRadius + blurWidth) {\n      gl_FragColor = stroke;\n    } else if(fragmengTocenter > v_innerRadius - blurWidth){\n      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);\n      gl_FragColor = mix(v_color, stroke, mixR);\n    } else {\n      gl_FragColor = v_color;\n    }\n  } else {\n    // \u5f53\u4e0d\u5b58\u5728 stroke \u6216 stroke <= 0.01\n    gl_FragColor = v_color;\n  }\n\n  gl_FragColor = filterColor(gl_FragColor);\n  \n  if(u_additive > 0.0) {\n    gl_FragColor *= circleClipOpacity;\n  } else {\n    gl_FragColor.a *= circleClipOpacity;\n  }\n\n}\n',triangulation:o,depth:{enable:!1},primitive:v.t.POINTS});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}})}}]),e}(m.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(20),i=n(0),o=n(1),a=n(6),s=n(36),u=n(1121),c=function(){function t(e,n){Object(i.a)(this,t),Object(a.a)(this,"viewportPadding",100),this.width=e,this.height=n,this.viewportPadding=Math.max(e,n),this.grid=new u.a(e+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=e+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=e+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return Object(o.a)(t,[{key:"placeCollisionBox",value:function(t){var e=t.x1+t.anchorPointX+this.viewportPadding,n=t.y1+t.anchorPointY+this.viewportPadding,r=t.x2+t.anchorPointX+this.viewportPadding,i=t.y2+t.anchorPointY+this.viewportPadding;return!this.isInsideGrid(e,n,r,i)||this.grid.hitTest(e,n,r,i)?{box:[]}:{box:[e,n,r,i]}}},{key:"insertCollisionBox",value:function(t,e){var n={featureIndex:e};this.grid.insert(n,t[0],t[1],t[2],t[3])}},{key:"project",value:function(t,e,n){var i=s.e.fromValues(e,n,0,1),o=s.e.create(),a=s.b.fromValues.apply(s.b,Object(r.a)(t));return s.e.transformMat4(o,i,a),{x:(o[0]/o[3]+1)/2*this.width+this.viewportPadding,y:(-o[1]/o[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary}}]),t}()},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=n(0),s=n(1),u=n(6),c=function(){function t(e,n,r){Object(a.a)(this,t),Object(u.a)(this,"boxCells",[]);var i=this.boxCells;this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0}return Object(s.a)(t,[{key:"insert",value:function(t,e,n,r,i){this.forEachCell(e,n,r,i,this.insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"query",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!1,i)}},{key:"hitTest",value:function(t,e,n,r,i){return this.queryHitTest(t,e,n,r,!0,i)}},{key:"insertBoxCell",value:function(t,e,n,r,i,o){this.boxCells[i].push(o)}},{key:"queryHitTest",value:function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});return o?a.filter(o):a}var u={hitTest:i,seenUids:{box:{},circle:{}}};return this.forEachCell(t,e,n,r,this.queryCell,a,u,o),i?a.length>0:a}},{key:"queryCell",value:function(t,e,n,i,o,a,s,u){var c=s.seenUids,l=this.boxCells[o];if(null!==l){var f,h=this.bboxes,p=r(l);try{for(p.s();!(f=p.n()).done;){var d=f.value;if(!c.box[d]){c.box[d]=!0;var v=4*d;if(t<=h[v+2]&&e<=h[v+3]&&n>=h[v+0]&&i>=h[v+1]&&(!u||u(this.boxKeys[d]))){if(s.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[d],x1:h[v],y1:h[v+1],x2:h[v+2],y2:h[v+3]})}}}}catch(t){p.e(t)}finally{p.f()}}return!1}},{key:"forEachCell",value:function(t,e,n,r,i,o,a,s){for(var u=this.convertToXCellCoord(t),c=this.convertToYCellCoord(e),l=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),h=u;h<=l;h++)for(var p=c;p<=f;p++){var d=this.xCellCount*p+h;if(i.call(this,t,e,n,r,d,o,a,s))return}}},{key:"convertToXCellCoord",value:function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}},{key:"convertToYCellCoord",value:function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}}]),t}();e.a=c},function(t,e,n){"use strict";function r(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=i(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:e,verticalAlign:n}}function s(t,e,n,r,i){if(i){var o=t[r],a=o.glyph;if(a)for(var s=e[a].advance*o.scale,u=(t[r].x+s)*i,c=n;c<=r;c++)t[c].x-=u}}function u(t,e,n,i,o,a,s){var u,c=(e-n)*o,l=(-i*s+.5)*a,f=r(t);try{for(f.s();!(u=f.n()).done;){var h=u.value;h.x+=c,h.y+=l}}catch(t){f.e(t)}finally{f.f()}}function c(t,e,n,r,i,o,c){var l=0,f=-8,h=0,p=t.positionedGlyphs,d="right"===o?1:"left"===o?0:.5,v=p.length;n.forEach(function(t){if(t.split("").forEach(function(t){var n=e[t];n&&(p.push({glyph:t,x:l,y:f+0,vertical:!1,scale:1,metrics:n}),l+=n.advance+c)}),p.length!==v){var n=l-c;h=Math.max(n,h),s(p,e,v,p.length-1,d)}l=0,f-=r+5});var m=a(i),g=m.horizontalAlign,y=m.verticalAlign;u(p,d,g,y,h,r,n.length);var _=f- -8;t.top+=-y*_,t.bottom=t.top-_,t.left+=-g*h,t.right=t.left+h}function l(t,e,n,r,i,o,c){var l=0,f=-8,h=0,p=t.positionedGlyphs,d="right"===o?1:"left"===o?0:.5,v=p.length;n.forEach(function(t){var n=e[t];if(n&&(p.push({glyph:t,x:n.advance/2,y:f+0,vertical:!1,scale:1,metrics:n}),l+=n.advance+c),p.length!==v){var i=l-c;h=Math.max(i,h),s(p,e,v,p.length-1,d)}l=0,f-=r+5});var m=a(i),g=m.horizontalAlign,y=m.verticalAlign;u(p,d,g,y,h,r,n.length);var _=f- -8;t.top+=-y*_,t.bottom=t.top-_,t.left+=-g*h,t.right=t.left+h}function f(t,e,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=arguments.length>7?arguments[7]:void 0,u=t.split("\n"),f=[],h={positionedGlyphs:f,top:a[1],bottom:a[1],left:a[0],right:a[0],lineCount:u.length,text:t};return s?l(h,e,u,n,r,i,o):c(h,e,u,n,r,i,o),!!f.length&&h}function h(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],i=arguments.length>2?arguments[2]:void 0,o=t.positionedGlyphs,a=void 0===o?[]:o,s=[],u=r(a);try{for(u.s();!(e=u.n()).done;){var c=e.value,l=c.metrics,f=l.advance*c.scale/2,h=i?[c.x+f,c.y]:[0,0],p=i?[0,0]:[c.x+f+n[0],c.y+n[1]],d=-4*c.scale-f+p[0],v=-4*c.scale+p[1],m=d+l.width*c.scale,g=v+l.height*c.scale,y={x:d,y:v},_={x:m,y:v},b={x:d,y:g},x={x:m,y:g};s.push({tl:y,tr:_,bl:b,br:x,tex:l,glyphOffset:h})}}catch(t){u.e(t)}finally{u.f()}return s}e.b=f,e.a=h},function(t,e,n){"use strict";var r=n(474),i=n(475),o=n(476),a=n(477),s=n(478),u=n(479),c=n(1124),l=n(1125),f=n(1126),h=n(1127),p={fill:l.a,line:r.a,extrude:c.a,text:u.a,point_fill:o.a,point_image:a.a,point_normal:s.a,point_extrude:i.a,water:h.a,ocean:f.a};e.a=p},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return _});var o=n(15),a=n(7),s=n(10),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(22),_=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.heightfixed,n=void 0!==e&&e,r=t.raisingHeight,i=void 0===r?0:r,o=t.topsurface,a=void 0===o||o,u=t.sidesurface,c=void 0===u||u,l=t.sourceColor,f=t.targetColor,h=0,p=[1,1,1,1],d=[1,1,1,1];return l&&f&&(p=Object(m.T)(l),d=Object(m.T)(f),h=1),Object(s.a)({u_topsurface:Number(a),u_sidesurface:Number(c),u_heightfixed:Number(n),u_raisingHeight:Number(i),u_linearColor:h,u_sourceColor:p,u_targetColor:d,u_texture:this.texture},this.getStyleAttribute())}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadTexture();case 2:return t.abrupt("return",this.buildModels());case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){var e,n,r,i,o;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getShaders(),n=e.frag,r=e.vert,i=e.type,t.next=3,this.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,inject:this.getInject(),triangulation:y.j});case 3:return o=t.sent,t.abrupt("return",[o]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"getShaders",value:function(){var t=this.layer.getLayerConfig(),e=t.pickLight;return t.mapTexture?{frag:'uniform sampler2D u_texture;\nuniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying vec3 v_uvs;\nvarying vec2 v_texture_data;\n\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float isSide = v_texture_data.x;\n  float lightWeight = v_texture_data.y;\n  float topU = v_uvs[0];\n  float topV = 1.0 - v_uvs[1];\n  float sidey = v_uvs[2];\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {// \u662f\u5426\u662f\u8fb9\u7f18\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n\n    if(u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      gl_FragColor = v_Color;\n    }\n  } else {\n\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    gl_FragColor = texture2D(u_texture, vec2(topU, topV));\n    // gl_FragColor = vec4(1.0, 0., 0., 1.0);\n  }\n  \n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform sampler2D u_texture;\n\n\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\nuniform float u_linearColor: 0.0;\n\nvarying vec2 v_texture_data;\nvarying vec3 v_uvs;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n \n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  float lightWeight = calc_lighting(pos);\n  vec4 project_pos = project_position(pos);\n  v_uvs = a_uvs;\n\n  v_texture_data = vec2(a_Position.z, lightWeight);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n\n\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrudeTexture"}:e?{frag:'uniform float u_opacity: 1.0;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nvarying vec3 v_uvs;\nvarying vec2 v_texture_data;\n\n#pragma include "picking"\n\nvoid main() {\n  float opacity = u_opacity;\n  float isSide =  v_texture_data.x;\n  float sidey = v_uvs[2];\n  float lightWeight = v_texture_data.y;\n\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    if(u_sidesurface < 1.0) {\n      discard;\n    }\n    \n    if( u_linearColor == 1.0) {\n      // side use linear\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      gl_FragColor = linearColor;\n    } else {\n      // side notuse linear\n       gl_FragColor = v_Color;\n    }\n  } else {\n    // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n    gl_FragColor = v_Color;\n  }\n\n  gl_FragColor.a *= opacity;\n  gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);\n}\n',vert:'precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\n\nvarying vec2 v_texture_data;\nvarying vec3 v_uvs;\nvarying vec4 v_Color;\n\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n\n\n  v_uvs = a_uvs;\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  float lightWeight = calc_lighting(pos);\n  v_texture_data = vec2(a_Position.z,lightWeight);\n\n  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w);\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrudePickLight"}:{frag:'uniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n\n\n     // top face\n    if(u_topsurface < 1.0) {\n      discard;\n    }\n\n    gl_FragColor = v_Color;\n  \n\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'precision highp float;\n\n#define ambientRatio 0.5\n#define diffuseRatio 0.3\n#define specularRatio 0.2\n\nattribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nattribute vec3 a_uvs;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform vec4 u_sourceColor;\nuniform vec4 u_targetColor;\nuniform float u_linearColor: 0;\n\nuniform float u_topsurface: 1.0;\nuniform float u_sidesurface: 1.0;\n\nvarying vec4 v_Color;\nuniform float u_heightfixed: 0.0; // \u9ed8\u8ba4\u4e0d\u56fa\u5b9a\nuniform float u_raisingHeight: 0.0;\n\n#pragma include "projection"\n#pragma include "light"\n#pragma include "picking"\n\nvoid main() {\n \n  float isSide = a_Position.z;\n float topU = a_uvs[0];\n float topV = 1.0 - a_uvs[1];\n float sidey = a_uvs[2];\n\n  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);\n  float lightWeight = calc_lighting(pos);\n\n  vec4 project_pos = project_position(pos);\n\n  if(u_heightfixed > 0.0) { // \u5224\u65ad\u51e0\u4f55\u4f53\u662f\u5426\u56fa\u5b9a\u9ad8\u5ea6\n    project_pos.z = a_Position.z * a_Size;\n    project_pos.z += u_raisingHeight;\n\n    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n      project_pos.z *= mapboxZoomScale;\n      project_pos.z += u_raisingHeight * mapboxZoomScale;\n    }\n  }\n\n\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    // gl_Position = u_Mvp * (vec4(project_pos.xyz * vec3(1.0, 1.0, -1.0), 1.0));\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  // Tip: \u90e8\u5206\u673a\u578b GPU \u8ba1\u7b97\u7cbe\u5ea6\u517c\u5bb9\n  if(isSide < 0.999) {\n    // side face\n    // if(u_sidesurface < 1.0) {\n    //   discard;\n    // }\n\n    if(u_linearColor == 1.0) {\n      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);\n      linearColor.rgb *= lightWeight;\n      v_Color = linearColor;\n    } else {\n      v_Color = a_Color;\n    }\n\n  } else {\n    v_Color = a_Color;\n  }\n\n  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);\n\n\n  setPickingColor(a_PickingColor);\n}\n',type:"polygonExtrude"}}},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,e=t,n=this.layer.coordCenter||this.layer.getSource().center,r=e[2]-e[0],i=e[3]-e[1];if("GAODE2.x"===this.mapService.version){var a=this.mapService.coordToAMap2RelativeCoordinates([t[0],t[1]],n),s=Object(o.a)(a,2),u=s[0],c=s[1],l=this.mapService.coordToAMap2RelativeCoordinates([t[2],t[3]],n),f=Object(o.a)(l,2),h=f[0],p=f[1];r=h-u,i=p-c,e=[u,c,h,p]}this.styleAttributeService.registerStyleAttribute({name:"uvs",type:v.a.Attribute,descriptor:{name:"a_uvs",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,n,o){var a=o[0],s=o[1];return[(a-e[0])/r,(s-e[1])/i,o[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?10:e;return Array.isArray(n)?[n[0]]:[n]}}})}},{key:"loadTexture",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(d.a.mark(function t(){var e,n,r,i=this;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.layer.getLayerConfig(),n=e.mapTexture,r=this.rendererService.createTexture2D,this.texture=r({height:0,width:0}),!n){t.next=5;break}return t.abrupt("return",new Promise(function(t,e){var o=new Image;o.crossOrigin="anonymous",o.src=n,o.onload=function(){return i.texture=r({data:o,width:o.width,height:o.height,wrapS:v.t.CLAMP_TO_EDGE,wrapT:v.t.CLAMP_TO_EDGE,min:v.t.LINEAR,mag:v.t.LINEAR}),t(null)},o.onerror=function(){e(new Error("image load error"))}}));case 5:case"end":return t.stop()}},t,this)}));return t}()}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(10),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(11),v=n(9),m=n(16),g=n(22),y=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.raisingHeight,n=void 0===e?0:e,r=t.opacityLinear,i=void 0===r?{enable:!1,dir:"in"}:r;return Object(a.a)({u_raisingHeight:Number(n),u_opacitylinear:Number(i.enable),u_dir:"in"===i.dir?1:0},this.getStyleAttribute())}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(p.a.mark(function t(){var e,n,r,i,o,a,s,u,c,l;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getModelParams(),n=e.frag,r=e.vert,i=e.triangulation,o=e.type,a=this.layer.getLayerConfig(),s=a.workerEnabled,u=void 0!==s&&s,c=a.enablePicking,this.layer.triangulation=i,t.next=5,this.layer.buildLayerModel({moduleName:o,vertexShader:r,fragmentShader:n,inject:this.getInject(),triangulation:i,primitive:d.t.TRIANGLES,depth:{enable:!1},workerEnabled:u,workerOptions:{modelType:o,enablePicking:c}});case 5:return l=t.sent,t.abrupt("return",[l]);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getLayerConfig(),e=t.opacityLinear;(void 0===e?{enable:!1,dir:"in"}:e).enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:d.a.Attribute,descriptor:{name:"a_linear",buffer:{usage:d.t.STATIC_DRAW,data:[],type:d.t.FLOAT},size:3,update:function(t,e,n){return[n[3],n[4],n[5]]}}})}},{key:"getModelParams",value:function(){var t=this.layer.getLayerConfig(),e=t.opacityLinear;return(void 0===e?{enable:!1}:e).enable?{frag:'#pragma include "picking"\nuniform float u_opacitylinear: 0.0;\nuniform float u_dir: 1.0;\nvarying vec3 v_linear;\nvarying vec2 v_pos;\nvarying vec4 v_Color;\n\n\nvoid main() {\n   gl_FragColor = v_Color;\n  if(u_opacitylinear > 0.0) {\n    gl_FragColor.a *= u_dir == 1.0 ? 1.0 - length(v_pos - v_linear.xy)/v_linear.z : length(v_pos - v_linear.xy)/v_linear.z;\n  }\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nuniform float u_raisingHeight: 0.0;\n\nvarying vec4 v_Color;\n\n\n#pragma include "projection"\n#pragma include "picking"\n\nuniform float u_opacitylinear: 0.0;\n\nattribute vec3 a_linear;\nvarying vec3 v_linear;\nvarying vec2 v_pos;\n\nvoid main() {\n  if(u_opacitylinear > 0.0) {\n    v_linear = a_linear;\n    v_pos = a_Position.xy;\n  }\n  v_Color = vec4(a_Color.xyz, a_Color.w * opacity);\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  project_pos.z += u_raisingHeight;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}',type:"polygonLinear",triangulation:g.p}:{frag:'varying vec4 v_color;\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',vert:'attribute vec4 a_Color;\nattribute vec3 a_Position;\n\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nuniform float u_raisingHeight: 0.0;\n\nvarying vec4 v_color;\n\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  // cal style mapping - \u6570\u636e\u7eb9\u7406\u6620\u5c04\u90e8\u5206\u7684\u8ba1\u7b97\n\n  v_color = vec4(a_Color.xyz, a_Color.w * opacity);\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  project_pos.z += u_raisingHeight;\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);\n    project_pos.z *= mapboxZoomScale;\n    project_pos.z += u_raisingHeight * mapboxZoomScale;\n  }\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n\n  setPickingColor(a_PickingColor);\n}\n\n',type:"polygonFill",triangulation:v.S}}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(15),a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(11),v=n(91),m=n(9),g=n(19),y=(n.n(g),n(16)),_=n(22),b=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.watercolor,i=void 0===r?"#6D99A8":r,o=t.watercolor2,a=void 0===o?"#0F121C":o;return{u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3,u_watercolor:Object(m.T)(i),u_watercolor2:Object(m.T)(a),u_opacity:Object(g.isNumber)(n)?n:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadTexture(),t.abrupt("return",this.buildModels());case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:'attribute vec2 a_uv;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec2 v_uv;\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',fragmentShader:"\nuniform float u_time: 0.0;\nuniform float u_opacity: 1.0;\n\nvarying vec2 v_uv;\n\nfloat coast2water_fadedepth = 0.10;\nfloat large_waveheight      = .750; // change to adjust the \"heavy\" waves\nfloat large_wavesize        = 3.4;  // factor to adjust the large wave size\nfloat small_waveheight      = 0.6;  // change to adjust the small random waves\nfloat small_wavesize        = 0.5;   // factor to ajust the small wave size\nfloat water_softlight_fact  = 15.;  // range [1..200] (should be << smaller than glossy-fact)\nfloat water_glossylight_fact= 120.; // range [1..200]\nfloat particle_amount       = 70.;\n// vec3 watercolor             = vec3(0.43, 0.60, 0.66); // 'transparent' low-water color (RGB)\n// vec3 watercolor2            = vec3(0.06, 0.07, 0.11); // deep-water color (RGB, should be darker than the low-water color)\nuniform vec4 u_watercolor;\nuniform vec4 u_watercolor2;\nvec3 water_specularcolor    = vec3(1.3, 1.3, 0.9);    // specular Color (RGB) of the water-highlights\n#define light                 vec3(-0., sin(u_time*0.5)*.5 + .35, 2.8) // position of the sun\n\nuniform sampler2D u_texture1;\nuniform sampler2D u_texture2;\nuniform sampler2D u_texture3;\n\n  \n\nfloat hash( float n ) {\n    return fract(sin(n)*43758.5453123);\n}\n\n// 2d noise function\nfloat noise1( in vec2 x ) {\n  vec2 p  = floor(x);\n  vec2 f  = smoothstep(0.0, 1.0, fract(x));\n  float n = p.x + p.y*57.0;\n  return mix(mix( hash(n+  0.0), hash(n+  1.0),f.x),\n    mix( hash(n+ 57.0), hash(n+ 58.0),f.x),f.y);\n}\n\nfloat noise(vec2 p) {\n    return texture2D(u_texture2,p*vec2(1./256.)).x;\n}\n\nvec4 highness(vec2 p) {\n    vec4 t = texture2D(u_texture1,fract(p));\n    float clipped = -2.0-smoothstep(3.,10.,t.a)*6.9-smoothstep(10.,100.,t.a)*89.9-smoothstep(0.,10000.,t.a)*10000.0;\n    return clamp(t, 0.0,3.0)+clamp(t/3.0-1.0, 0.0,1.0)+clamp(t/16.0-1.0, 0.0,1.0);\n}\n\nfloat height_map( vec2 p ) {\n    vec4 height=highness(p);\n    /*\n    height = -0.5+\n        0.5*smoothstep(-100.,0.,-height)+\n        2.75*smoothstep(0.,2.,height)+\n        1.75*smoothstep(2.,4.,height)+\n        2.75*smoothstep(4.,16.,height)+\n        1.5*smoothstep(16.,1000.,height);\n    */\n\n    mat2 m = mat2( 0.9563*1.4,  -0.2924*1.4,  0.2924*1.4,  0.9563*1.4 );\n    //p = p*6.;\n    float f = 0.6000*noise1( p ); p = m*p*1.1*6.;\n    f += 0.2500*noise( p ); p = m*p*1.32;\n    f += 0.1666*noise( p ); p = m*p*1.11;\n    f += 0.0834*noise( p ); p = m*p*1.12;\n    f += 0.0634*noise( p ); p = m*p*1.13;\n    f += 0.0444*noise( p ); p = m*p*1.14;\n    f += 0.0274*noise( p ); p = m*p*1.15;\n    f += 0.0134*noise( p ); p = m*p*1.16;\n    f += 0.0104*noise( p ); p = m*p*1.17;\n    f += 0.0084*noise( p );\n    f = .25*f+dot(height,vec4(-.03125,-.125,.25,.25))*.5;\n        const float FLAT_LEVEL = 0.92525;\n        //f = f*0.25+height*0.75;\n    if (f<FLAT_LEVEL)\n        f = f;\n    else\n        f = pow((f-FLAT_LEVEL)/(1.-FLAT_LEVEL), 2.)*(1.-FLAT_LEVEL)*2.0+FLAT_LEVEL; // makes a smooth coast-increase\n    return clamp(f, 0., 10.);\n}\n\nvec3 plasma_quintic( float x ) {\n    x = clamp( x, 0.0, 1.0);\n    vec4 x1 = vec4( 1.0, x, x * x, x * x * x ); // 1 x x2 x3\n    vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7\n    return vec3(\n        dot( x1.xyzw, vec4( +0.063861086, +1.992659096, -1.023901152, -0.490832805 ) ) + dot( x2.xy, vec2( +1.308442123, -0.914547012 ) ),\n        dot( x1.xyzw, vec4( +0.049718590, -0.791144343, +2.892305078, +0.811726816 ) ) + dot( x2.xy, vec2( -4.686502417, +2.717794514 ) ),\n        dot( x1.xyzw, vec4( +0.513275779, +1.580255060, -5.164414457, +4.559573646 ) ) + dot( x2.xy, vec2( -1.916810682, +0.570638854 ) ) );\n}\n\nvec4 color(vec2 p){\n    vec4 c1 = vec4(1.7,1.6,.9,1);\n    vec4 c2 = vec4(.2,.94,.1,1);\n    vec4 c3 = vec4(.3,.2,.0,1);\n    vec4 c4 = vec4(.99,.99,1.6,1);\n    vec4 v = highness(p);\n    float los = smoothstep(0.1,1.1,v.b);\n    float his = smoothstep(3.5,6.5,v.b);\n    float ces = smoothstep(1.,5.,v.a);\n    vec4 lo = mix(c1,c2,los);\n    vec4 hi = mix(c3,c4,his);\n    vec4 ce = mix(lo,hi,ces);\n\n    return vec4(plasma_quintic(ces),1).ragb;\n}\n\nvec3 terrain_map( vec2 p )\n{\n  return color(p).rgb*0.75+0.25*vec3(0.7, .55, .4)+texture2D(u_texture3, fract(p*5.)).rgb*.5; // test-terrain is simply 'sandstone'\n}\n\nconst mat2 m = mat2( 0.72, -1.60,  1.60,  0.72 );\n\nfloat water_map( vec2 p, float height ) {\n    vec2 p2 = p*large_wavesize;\n    vec2 shift1 = 0.001*vec2( u_time*160.0*2.0, u_time*120.0*2.0 );\n    vec2 shift2 = 0.001*vec2( u_time*190.0*2.0, -u_time*130.0*2.0 );\n\n    // coarse crossing 'ocean' waves...\n    float f = 0.6000*noise( p );\n    f += 0.2500*noise( p*m );\n    f += 0.1666*noise( p*m*m );\n    float wave = sin(p2.x*0.622+p2.y*0.622+shift2.x*4.269)*large_waveheight*f*height*height ;\n\n    p *= small_wavesize;\n    f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<9; i++)\n    { p = m*p*.947; f -= amp*abs(sin((noise( p+shift1*s )-.5)*2.)); amp = amp*.59; s*=-1.329; }\n    \n    return wave+f*small_waveheight;\n}\n\nfloat nautic(vec2 p) {\n    p *= 18.;\n    float f = 0.;\n    float amp = 1.0, s = .5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*abs(smoothstep(0., 1., noise( p+u_time*s ))-.5); amp = amp*.5; s*=-1.227; }\n    return pow(1.-f, 5.);\n}\n\nfloat particles(vec2 p) {\n    p *= 200.;\n    float f = 0.;\n    float amp = 1.0, s = 1.5;\n    for (int i=0; i<3; i++)\n    { p = m*p*1.2; f += amp*noise( p+u_time*s ); amp = amp*.5; s*=-1.227; }\n    return pow(f*.35, 7.)*particle_amount;\n}\n\nfloat test_shadow( vec2 xy, float height) {\n    vec3 r0 = vec3(xy, height);\n    vec3 rd = normalize( light - r0 );\n    \n    float hit = 1.0;\n    float t   = 0.001;\n    for (int j=1; j<25; j++)\n    {\n        vec3 p = r0 + t*rd;\n        float h = height_map( p.xy );\n        float height_diff = p.z - h;\n        if (height_diff<0.0)\n        {\n            return 0.0;\n        }\n        t += 0.01+height_diff*.02;\n        hit = min(hit, 2.*height_diff/t); // soft shaddow   \n    }\n    return hit;\n}\n\nvec3 CalcTerrain(vec2 uv, float height) {\n    vec3 col = terrain_map( uv );\n    vec2 iResolution = vec2(512.);\n    float h1 = height_map(uv-vec2(0., 0.5)/ iResolution.xy);\n    float h2 = height_map(uv+vec2(0., 0.5)/ iResolution.xy);\n    float h3 = height_map(uv-vec2(0.5, 0.)/ iResolution.xy);\n    float h4 = height_map(uv+vec2(0.5, 0.)/ iResolution.xy);\n    vec3 norm = normalize(vec3(h3-h4, h1-h2, 1.));\n    vec3 r0 = vec3(uv, height);\n    vec3 rd = normalize( light - r0 );\n    float grad = dot(norm, rd);\n    col *= grad+pow(grad, 8.);\n    float terrainshade = test_shadow( uv, height );\n    col = mix(col*.25, col, terrainshade);\n    return col;\n}\n\n\nvoid main() {\n  vec3 watercolor = u_watercolor.rgb;\n  vec3 watercolor2 = u_watercolor2.rgb;\n  vec2 uv = v_uv;\n  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)\n  float deepwater_fadedepth   = 0.4 + coast2water_fadedepth;\n  float height = height_map( uv );\n  vec3 col;\n\n    float waveheight = clamp(WATER_LEVEL*3.-1.5, 0., 1.);\n    float level = WATER_LEVEL + .2*water_map(uv*15. + vec2(u_time*.1), waveheight);\n    if (height > level)\n    {\n        col = CalcTerrain(uv, height);\n    }\n    if (height <= level)\n    {\n        vec2 dif = vec2(.0, .01);\n        vec2 pos = uv*15. + vec2(u_time*.01);\n        float h1 = water_map(pos-dif,waveheight);\n        float h2 = water_map(pos+dif,waveheight);\n        float h3 = water_map(pos-dif.yx,waveheight);\n        float h4 = water_map(pos+dif.yx,waveheight);\n        vec3 normwater = normalize(vec3(h3-h4, h1-h2, .125)); // norm-vector of the 'bumpy' water-plane\n        uv += normwater.xy*.002*(level-height);\n        \n        col = CalcTerrain(uv, height);\n\n        float coastfade = clamp((level-height)/coast2water_fadedepth, 0., 1.);\n        float coastfade2= clamp((level-height)/deepwater_fadedepth, 0., 1.);\n        float intensity = col.r*.2126+col.g*.7152+col.b*.0722;\n        watercolor = mix(watercolor*intensity, watercolor2, smoothstep(0., 1., coastfade2));\n\n        vec3 r0 = vec3(uv, WATER_LEVEL);\n        vec3 rd = normalize( light - r0 ); // ray-direction to the light from water-position\n        float grad     = dot(normwater, rd); // dot-product of norm-vector and light-direction\n        float specular = pow(grad, water_softlight_fact);  // used for soft highlights                          \n        float specular2= pow(grad, water_glossylight_fact); // used for glossy highlights\n        float gradpos  = dot(vec3(0., 0., 1.), rd);\n        float specular1= smoothstep(0., 1., pow(gradpos, 5.));  // used for diffusity (some darker corona around light's specular reflections...)                          \n        float watershade  = test_shadow( uv, level );\n        watercolor *= 2.2+watershade;\n        watercolor += (.2+.8*watershade) * ((grad-1.0)*.5+specular) * .25;\n        watercolor /= (1.+specular1*1.25);\n        watercolor += watershade*specular2*water_specularcolor;\n        watercolor += watershade*coastfade*(1.-coastfade2)*(vec3(.5, .6, .7)*nautic(uv)+vec3(1., 1., 1.)*particles(uv));\n        \n        col = mix(col, watercolor, coastfade);\n    }\n    \n\n  float opacity = u_opacity;\n  gl_FragColor = vec4(col, opacity);  \n}\n",triangulation:_.o,primitive:d.t.TRIANGLES,depth:{enable:!1}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t,e,n;null===(t=this.texture1)||void 0===t||t.destroy(),null===(e=this.texture2)||void 0===e||e.destroy(),null===(n=this.texture3)||void 0===n||n.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,e=Object(o.a)(t,4),n=e[0],r=e[1],i=e[2],a=e[3],s=i-n,u=a-r;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:d.a.Attribute,descriptor:{name:"a_uv",buffer:{usage:d.t.STATIC_DRAW,data:[],type:d.t.FLOAT},size:2,update:function(t,e,i,a){var c=t.version===v.b["GAODE2.x"]?t.originCoordinates[0][a]:i,l=Object(o.a)(c,2),f=l[0],h=l[1];return[(f-n)/s,(h-r)/u]}}})}},{key:"loadTexture",value:function(){function t(t){return n({data:t,width:t.width,height:t.height,wrapS:d.t.MIRRORED_REPEAT,wrapT:d.t.MIRRORED_REPEAT,min:d.t.LINEAR,mag:d.t.LINEAR})}var e=this,n=this.rendererService.createTexture2D,r={height:0,width:0};this.texture1=n(r),this.texture2=n(r),this.texture3=n(r),function(t){var e=0,n=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(function(r){var i=new Image;i.crossOrigin="",i.src=r,n.push(i),i.onload=function(){3===++e&&t(n)}})}(function(n){e.texture1=t(n[0]),e.texture2=t(n[1]),e.texture3=t(n[2]),e.layerService.reRender()})}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return _});var o=n(15),a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(11),v=n(91),m=n(19),g=(n.n(m),n(16)),y=n(22),_=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.speed,i=void 0===r?.5:r;return{u_texture:this.texture,u_speed:i,u_opacity:Object(m.isNumber)(n)?n:1}}},{key:"getAnimateUniforms",value:function(){return{u_time:this.layer.getLayerAnimateTime()}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadTexture(),t.abrupt("return",this.buildModels());case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:'attribute vec4 a_Color;\nattribute vec2 a_uv;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\nvarying vec4 v_Color;\nvarying vec2 v_uv;\nuniform float u_opacity: 1.0;\n\n\n#pragma include "projection"\n\nvoid main() {\n  v_uv = a_uv;\n\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',fragmentShader:"uniform sampler2D u_texture;\nuniform float u_time: 0.0;\nuniform float u_speed: 1.0;\nuniform float u_opacity: 1.0;\n\nvarying vec4 v_Color;\nvarying vec2 v_uv;\n\nfloat rand(vec2 n) { return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453); }\n\nfloat water(vec3 p) {\n  float t = u_time * u_speed;\n  p.z += t * 2.; p.x += t * 2.;\n  vec3 c1 = texture2D(u_texture, p.xz / 30.).xyz;\n  p.z += t * 3.; p.x += t * 0.52;\n  vec3 c2 = texture2D(u_texture, p.xz / 30.).xyz;\n  p.z += t * 4.; p.x += t * 0.8;\n  vec3 c3 = texture2D(u_texture, p.xz / 30.).xyz;\n  c1 += c2 - c3;\n  float z = (c1.x + c1.y + c1.z) / 3.;\n  return p.y + z / 4.;\n}\n\nfloat map(vec3 p) {\n  float d = 100.0;\n  d = water(p);\n  return d;\n}\n\nfloat intersect(vec3 ro, vec3 rd) {\n  float d = 0.0;\n  for (int i = 0; i <= 100; i++) {\n    float h = map(ro + rd * d);\n    if (h < 0.1) return  d;\n    d += h;\n  }\n  return 0.0;\n}\n\nvec3 norm(vec3 p) {\n  float eps = .1;\n  return normalize(vec3(\n    map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),\n    map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),\n    map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))\n  ));\n} \n\nfloat calSpc() {\n  vec3 l1 = normalize(vec3(1, 1, 1));\n  vec3 ro = vec3(-3, 20, -8);\n  vec3 rc = vec3(0, 0, 0);\n  vec3 ww = normalize(rc - ro);\n  vec3 uu = normalize(cross(vec3(0,1,0), ww));\n  vec3 vv = normalize(cross(rc - ro, uu));\n  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);\n  float d = intersect(ro, rd);\n  vec3 p = ro + rd * d;\n  vec3 n = norm(p);\n  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);\n  return spc;\n}\n\nvoid main() {\n  float opacity = u_opacity;\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= opacity;\n\n  float spc = calSpc();\n  gl_FragColor += spc * 0.4;\n}\n",triangulation:y.o,primitive:d.t.TRIANGLES,depth:{enable:!1}});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){var t=this.layer.getSource().extent,e=Object(o.a)(t,4),n=e[0],r=e[1],i=e[2],a=e[3],s=i-n,u=a-r;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:d.a.Attribute,descriptor:{name:"a_uv",buffer:{usage:d.t.STATIC_DRAW,data:[],type:d.t.FLOAT},size:2,update:function(t,e,i,a){var c=t.version===v.b["GAODE2.x"]?t.originCoordinates[0][a]:i,l=Object(o.a)(c,2),f=l[0],h=l[1];return[(f-n)/s,(h-r)/u]}}})}},{key:"loadTexture",value:function(){var t=this,e=this.layer.getLayerConfig(),n=e.waterTexture,r=this.rendererService.createTexture2D;this.texture=r({height:0,width:0});var i=new Image;i.crossOrigin="",n?(console.warn("L7 recommend\uff1ahttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),i.src=n):i.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",i.onload=function(){t.texture=r({data:i,width:i.width,height:i.height,wrapS:d.t.MIRRORED_REPEAT,wrapT:d.t.MIRRORED_REPEAT,min:d.t.LINEAR,mag:d.t.LINEAR}),t.layerService.reRender()}}}]),e}(g.a)},function(t,e,n){"use strict";var r=n(1129),i=n(1130),o=n(1131),a={raster:r.a,rasterRgb:i.a,raster3d:r.a,rasterTerrainRgb:o.a};e.a=a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(9),v=n(16),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.clampLow,i=void 0===r||r,o=t.clampHigh,a=void 0===o||o,s=t.noDataValue,u=void 0===s?-9999999:s,c=t.domain,l=t.rampColors,f=c||Object(d.E)(l);return this.colorTexture=this.layer.textureService.getColorTexture(l,f),{u_opacity:n||1,u_texture:this.texture,u_domain:f,u_clampLow:i,u_clampHigh:"undefined"!==typeof a?a:i,u_noDataValue:u,u_colorTexture:this.colorTexture}}},{key:"getRasterData",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(e){var n,r,i,o;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Array.isArray(e.data)){t.next=4;break}return t.abrupt("return",{data:e.data,width:e.width,height:e.height});case 4:return t.next=6,e.data;case 6:return n=t.sent,r=n.rasterData,i=n.width,o=n.height,t.abrupt("return",{data:Array.from(r),width:i,height:o});case 11:case"end":return t.stop()}},t)}));return t}()},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e,n,r,i,o,a,s,u;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getSource(),n=this.rendererService.createTexture2D,r=e.data.dataArray[0],t.next=5,this.getRasterData(r);case 5:return i=t.sent,o=i.data,a=i.width,s=i.height,this.texture=n({data:o,width:a,height:s,format:p.t.LUMINANCE,type:p.t.FLOAT}),t.next=12,this.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',fragmentShader:"precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\nuniform float u_min;\nuniform float u_max;\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nvarying vec2 v_texCoord;\nbool isnan_emu(float x) { return (x > 0.0 || x < 0.0) ? x != x : x != 0.0; }\n\n\nvoid main() {\n\n  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;\n  if (value == u_noDataValue || isnan_emu(value))\n      discard;\n  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))\n     discard;\n  else {\n    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);\n    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));\n    \n    gl_FragColor = color;\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n    if(gl_FragColor.a < 0.01)\n      discard;\n   \n  }\n}\n",triangulation:m.k,primitive:p.t.TRIANGLES,depth:{enable:!1}});case 12:return u=t.sent,t.abrupt("return",[u]);case 14:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.colorTexture)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(p.a)(t);if(e){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(h.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return w});var o=n(10),a=n(49),s=n(7),u=n(0),c=n(1),l=n(12),f=n(3),h=n(4),p=n(2),d=n(6),v=n(8),m=n.n(v),g=n(11),y=n(16),_=n(22),b=["data"],x=["rasterData"],w=function(t){function e(){var t;Object(u.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(d.a)(Object(l.a)(t),"dataOption",{}),t}Object(f.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.noDataValue,i=void 0===r?0:r,o=this.dataOption,a=o.rMinMax,s=o.gMinMax,u=o.bMinMax;return{u_opacity:n||1,u_texture:this.texture,u_noDataValue:i,u_rminmax:a,u_gminmax:s,u_bminmax:u}}},{key:"getRasterData",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(s.a)(m.a.mark(function t(e){var n,r,i,s,u;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!Array.isArray(e.data)){t.next=4;break}return n=e.data,r=Object(a.a)(e,b),this.dataOption=r,t.abrupt("return",Object(o.a)({data:n},r));case 4:return t.next=6,e.data;case 6:if(i=t.sent,s=i.rasterData,u=Object(a.a)(i,x),this.dataOption=u,!Array.isArray(s)){t.next=14;break}return t.abrupt("return",Object(o.a)({data:s},u));case 14:return t.abrupt("return",Object(o.a)({data:Array.from(s)},u));case 15:case"end":return t.stop()}},t,this)}));return t}()},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(s.a)(m.a.mark(function t(){var e,n,r,i,o,a,s,u;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getSource(),n=this.rendererService.createTexture2D,r=e.data.dataArray[0],t.next=5,this.getRasterData(r);case 5:return i=t.sent,o=i.data,a=i.width,s=i.height,this.texture=n({data:o,width:a,height:s,format:g.t.RGB,type:g.t.FLOAT}),t.next=12,this.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',fragmentShader:"precision mediump float;\nuniform vec2 u_rminmax: vec2(0,255); \nuniform vec2 u_gminmax: vec2(0,255);\nuniform vec2 u_bminmax: vec2(0,255);\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nuniform float u_noDataValue : 0.0;\nvarying vec2 v_texCoord;\n\nvoid main() {\n  vec3 rgb = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).rgb;\n  if(rgb == vec3(u_noDataValue)) {\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n    gl_FragColor = vec4(rgb.r / (u_rminmax.y -u_rminmax.x), rgb.g /(u_gminmax.y -u_gminmax.x), rgb.b/ (u_bminmax.y - u_bminmax.x), u_opacity);\n  }\n  if(gl_FragColor.a < 0.01)\n    discard;\n \n}",triangulation:_.k,primitive:g.t.TRIANGLES,depth:{enable:!1}});case 12:return u=t.sent,t.abrupt("return",[u]);case 14:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(s.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:g.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:g.t.DYNAMIC_DRAW,data:[],type:g.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(9),v=n(16),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=t.clampLow,r=void 0===n||n,i=t.clampHigh,o=void 0===i||i,a=t.noDataValue,s=void 0===a?-9999999:a,u=t.domain,c=t.rampColors,l=t.colorTexture,f=t.rScaler,h=void 0===f?6553.6:f,p=t.gScaler,v=void 0===p?25.6:p,m=t.bScaler,g=void 0===m?.1:m,y=t.offset,_=void 0===y?1e4:y,b=u||Object(d.E)(c),x=l;return l?this.layer.textureService.setColorTexture(l,c,b):x=this.layer.textureService.getColorTexture(c,b),{u_opacity:e||1,u_texture:this.texture,u_domain:b,u_clampLow:r,u_clampHigh:"undefined"!==typeof o?o:r,u_noDataValue:s,u_unpack:[h,v,g,_],u_colorTexture:x}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e,n,r,i;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getSource(),n=this.rendererService.createTexture2D,t.next=4,e.data.images;case 4:return r=t.sent,this.texture=n({data:r[0],width:r[0].width,height:r[0].height,min:p.t.LINEAR,mag:p.t.LINEAR}),t.next=8,this.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',fragmentShader:"precision mediump float;\nuniform float u_opacity: 1.0;\n\nuniform sampler2D u_texture;\nuniform sampler2D u_colorTexture;\n\nvarying vec2 v_texCoord;\n\nuniform vec2 u_domain;\nuniform float u_noDataValue;\nuniform bool u_clampLow: true;\nuniform bool u_clampHigh: true;\nuniform vec4 u_unpack;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_texture, coord,bias) * 255.0;\n    data.a = -1.0;\n    return dot(data, u_unpack);\n}\n\nvec4 getColor(float value) {\n   float normalisedValue =(value- u_domain[0]) / (u_domain[1] - u_domain[0]);\n    vec2 coord = vec2(normalisedValue, 0);\n    return texture2D(u_colorTexture, coord);\n}\n\nvoid main() {\n  float value = getElevation(v_texCoord,0.0);\n  if (value == u_noDataValue) {\n    gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1])) {\n     gl_FragColor = vec4(0.0, 0, 0, 0.0);\n  } else {\n   \n    gl_FragColor = getColor(value);\n    gl_FragColor.a =  gl_FragColor.a * u_opacity ;\n      if(gl_FragColor.a < 0.01)\n      discard;\n  }\n}\n",triangulation:m.k,primitive:p.t.TRIANGLES,depth:{enable:!1}});case 8:return i=t.sent,t.abrupt("return",[i]);case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t;null===(t=this.texture)||void 0===t||t.destroy()}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46);v.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1134),g=n(1135),y=n(1136),_={base:g.a,atomSphere:m.a,bloomSphere:y.a},b=["base","atomSphere","bloomSphere"];v.a},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(19),v=(n.n(d),n(16)),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;return{u_opacity:Object(d.isNumber)(n)?n:1}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.zIndex=-997,t.next=3,this.layer.buildLayerModel({moduleName:"earthAtmoSphere",vertexShader:"\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_Uv;\nattribute vec4 a_Color;\nuniform vec3 u_CameraPosition;\nvarying float v_CamreaDistance;\n\nuniform mat4 u_ViewProjectionMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_ViewMatrix;\n\nvarying vec3 vVertexNormal;\nvarying vec4 v_Color;\nvarying float v_offset;\n\nvoid main() {\n    float EARTH_RADIUS = 100.0;\n    \n    v_Color = a_Color;\n\n    v_offset = min(((length(u_CameraPosition) - EARTH_RADIUS)/600.0) * 0.5 + 0.4, 1.0);\n    vVertexNormal = a_Normal;\n\n    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);\n}\n",fragmentShader:"\nuniform float u_opacity;\nuniform vec3 u_CameraPosition;\n\nvarying vec3 vVertexNormal;\nvarying float v_offset;\nvarying vec4 v_Color;\nvoid main() {\n    \n    \n    // float intensity = pow(0.5 + dot(normalize(vVertexNormal), normalize(u_CameraPosition)), 3.0);\n    float intensity = pow(v_offset + dot(normalize(vVertexNormal), normalize(u_CameraPosition)), 3.0);\n    // \u53bb\u9664\u80cc\u9762\n    if(intensity > 1.0) intensity = 0.0;\n\n    gl_FragColor = vec4(v_Color.rgb, v_Color.a * intensity * u_opacity);\n}\n",triangulation:m.n,depth:{enable:!1},blend:this.getBlend()});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.t.STATIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(16),g=n(22),y=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"earthTime",3.4),Object(h.a)(Object(u.a)(t),"sunX",1e3),Object(h.a)(Object(u.a)(t),"sunY",1e3),Object(h.a)(Object(u.a)(t),"sunZ",1e3),Object(h.a)(Object(u.a)(t),"sunRadius",Math.sqrt(t.sunX*t.sunX+t.sunY*t.sunY+t.sunZ*t.sunZ)),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.animateOption,n=t.globalOptions;return null!==e&&void 0!==e&&e.enable&&(this.mapService.rotateY({reg:.002}),this.earthTime+=.02,this.sunY=10,this.sunX=Math.cos(this.earthTime)*(this.sunRadius-this.sunY),this.sunZ=Math.sin(this.earthTime)*(this.sunRadius-this.sunY)),{u_ambientRatio:(null===n||void 0===n?void 0:n.ambientRatio)||.6,u_diffuseRatio:(null===n||void 0===n?void 0:n.diffuseRatio)||.4,u_specularRatio:(null===n||void 0===n?void 0:n.specularRatio)||.1,u_sunLight:[this.sunX,this.sunY,this.sunZ],u_texture:this.texture}}},{key:"setEarthTime",value:function(t){this.earthTime=t,this.sunY=10,this.sunX=Math.cos(this.earthTime)*(this.sunRadius-this.sunY),this.sunZ=Math.sin(this.earthTime)*(this.sunRadius-this.sunY),this.layerService.throttleRenderLayers()}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i,o=this;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.layer.getLayerConfig(),n=e.globalOptions,void 0!==(null===n||void 0===n?void 0:n.earthTime)&&this.setEarthTime(n.earthTime),r=this.layer.getSource(),i=this.rendererService.createTexture2D,this.texture=i({height:0,width:0}),r.data.images.then(function(t){o.texture=i({data:t[0],width:t[0].width,height:t[0].height}),o.layerService.reRender()}),t.abrupt("return",this.buildModels());case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.zIndex=-998,t.next=3,this.layer.buildLayerModel({moduleName:"earthBase",vertexShader:"// attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\n// attribute vec2 a_Extrude;\n// attribute float a_Size;\n// attribute float a_Shape;\n\nuniform vec3 u_CameraPosition;\nuniform mat4 u_ViewProjectionMatrix;\nuniform mat4 u_ModelMatrix;\nuniform float u_ambientRatio : 0.5;\nuniform float u_diffuseRatio : 0.3;\nuniform float u_specularRatio : 0.2;\nuniform vec3 u_sunLight: [1.0, -10.5, 12.0];\n\n\n\nfloat calc_lighting(vec4 pos) {\n\n    vec3 worldPos = vec3(pos * u_ModelMatrix);\n\n    vec3 worldNormal = a_Normal;\n\n    // cal light weight\n    vec3 viewDir = normalize(u_CameraPosition - worldPos);\n\n    vec3 lightDir = normalize(u_sunLight);\n\n    vec3 halfDir = normalize(viewDir+lightDir);\n    // lambert\n    float lambert = dot(worldNormal, lightDir);\n    // specular\n    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);\n    //sum to light weight\n    float lightWeight = u_ambientRatio + u_diffuseRatio * lambert + u_specularRatio * specular;\n\n    return lightWeight;\n}\n\nvarying float v_lightWeight;\nvoid main() {\n\n    v_texCoord = a_Uv;\n\n    float lightWeight = calc_lighting(vec4(a_Position, 1.0));\n    v_lightWeight = lightWeight;\n\n    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);\n}\n",fragmentShader:"\nuniform sampler2D u_texture;\n\nvarying vec2 v_texCoord;\nvarying float v_lightWeight;\n\n\nvoid main() {\n\n    vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n    color.xyz = color.xyz * v_lightWeight;\n    gl_FragColor = color;\n}\n",triangulation:g.n,depth:{enable:!0},blend:this.getBlend()});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:v.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:v.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:v.t.STATIC_DRAW,data:[],type:v.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(11),d=n(19),v=(n.n(d),n(16)),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e;return{u_opacity:Object(d.isNumber)(n)?n:1}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){return""}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.layer.zIndex=-999,t.next=3,this.layer.buildLayerModel({moduleName:"earthBloom",vertexShader:"\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute vec2 a_Uv;\nattribute vec4 a_Color;\nuniform vec3 u_CameraPosition;\nuniform mat4 u_ViewProjectionMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_ViewMatrix;\n\nvarying vec3 vVertexNormal;\nvarying vec4 v_Color;\n\nvoid main() {\n    v_Color = a_Color;\n\n    vVertexNormal = a_Normal;\n\n    gl_Position = u_ViewProjectionMatrix * u_ModelMatrix * vec4(a_Position, 1.0);\n}\n",fragmentShader:"\nuniform float u_opacity;\nuniform vec3 u_CameraPosition;\nvarying vec3 vVertexNormal;\n\nvarying vec4 v_Color;\nvoid main() {\n\n\n    float intensity =  - dot(normalize(vVertexNormal), normalize(u_CameraPosition));\n    // \u53bb\u9664\u80cc\u9762\n    if(intensity > 1.0) intensity = 0.0;\n\n    gl_FragColor = vec4(v_Color.rgb, v_Color.a * intensity * u_opacity);\n}\n",triangulation:m.m,depth:{enable:!1},blend:this.getBlend()});case 3:return e=t.sent,t.abrupt("return",[e]);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:p.a.Attribute,descriptor:{name:"a_Size",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:1,update:function(t){var e=t.size,n=void 0===e?1:e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:p.a.Attribute,descriptor:{name:"a_Normal",buffer:{usage:p.t.STATIC_DRAW,data:[],type:p.t.FLOAT},size:3,update:function(t,e,n,r,i){return i}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:p.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:p.t.DYNAMIC_DRAW,data:[],type:p.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}}]),e}(v.a)},function(t,e,n){"use strict";var r=n(1138),i={fill:r.a};e.a=i},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return g});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(9),d=n(19),v=(n.n(d),n(16)),m=n(22),g=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"getUninforms",value:function(){var t=this.layer.getLayerConfig(),e=t.opacity,n=void 0===e?1:e,r=t.color,i=void 0===r?"#000":r;return{u_opacity:Object(d.isNumber)(n)?n:0,u_color:Object(p.T)(i)}}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.buildModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layer.buildLayerModel({moduleName:"mask",vertexShader:'attribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\n\n#pragma include "projection"\n\nvoid main() {\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n\n  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));\n  } else {\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n  }\n}\n\n',fragmentShader:"uniform float u_opacity : 1.0;\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n  gl_FragColor.a *= u_opacity;\n}\n",triangulation:m.o,depth:{enable:!1},pick:!1});case 2:return e=t.sent,t.abrupt("return",[e]);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(46),m=n(1140);v.a},function(t,e,n){"use strict";var r=n(1141),i={wind:r.a};e.a=i},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return x});var o=n(7),a=n(0),s=n(1),u=n(12),c=n(3),l=n(4),f=n(2),h=n(6),p=n(8),d=n.n(p),v=n(11),m=n(9),g=n(16),y=n(22),_=n(1142),b={0:"#3288bd",.1:"#66c2a5",.2:"#abdda4",.3:"#e6f598",.4:"#fee08b",.5:"#fdae61",.6:"#f46d43",1:"#d53e4f"},x=function(t){function e(){var t;Object(a.a)(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=n.call.apply(n,[this].concat(i)),Object(h.a)(Object(u.a)(t),"sizeScale",.5),Object(h.a)(Object(u.a)(t),"frequency",new m.c(7.2)),t}Object(c.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"render",value:function(t){var e=this;this.drawColorMode(t),this.frequency.run(function(){e.drawWind()})}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){var e,n,r,i,o,a,s,u,c,l,f,h,p,m,g,x,w,E,S,O,T,A,C,k,M,P,j,I,R=this;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.layer.getLayerConfig(),o=i.uMin,a=void 0===o?-21.32:o,s=i.uMax,u=void 0===s?26.8:s,c=i.vMin,l=void 0===c?-21.57:c,f=i.vMax,h=void 0===f?21.42:f,p=i.fadeOpacity,m=void 0===p?.996:p,g=i.speedFactor,x=void 0===g?.25:g,w=i.dropRate,E=void 0===w?.003:w,S=i.dropRateBump,O=void 0===S?.01:S,T=i.rampColors,A=void 0===T?b:T,C=i.sizeScale,k=void 0===C?.5:C,M=this.rendererService.createTexture2D,P=this.layer.getSource(),this.texture=M({height:0,width:0}),this.cacheZoom=Math.floor(this.mapService.getZoom()),j=this.rendererService.getGLContext(),this.imageCoords=null===(e=P.data)||void 0===e?void 0:e.dataArray[0].coordinates,null===(n=P.data)||void 0===n||null===(r=n.images)||void 0===r||r.then(function(t){var e;R.sizeScale=k*R.getZoomScale();var n=R.getWindSize(),r=n.imageWidth,i=n.imageHeight,o={glContext:j,imageWidth:r,imageHeight:i,fadeOpacity:m,speedFactor:x,dropRate:E,dropRateBump:O,rampColors:A};R.wind=new _.a(o),R.wind.setWind({uMin:a,uMax:u,vMin:l,vMax:h,image:t[0]}),null===(e=R.texture)||void 0===e||e.destroy(),R.texture=M({width:r,height:i}),R.layerService.reRender()}),t.next=10,this.layer.buildLayerModel({moduleName:"wind",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_Mvp;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   \n   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x\n      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));\n   } else {\n      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n   }\n}\n',fragmentShader:"precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n  gl_FragColor.a *= u_opacity;\n}\n",triangulation:y.k,primitive:v.t.TRIANGLES,depth:{enable:!1}});case 10:return I=t.sent,this.colorModel=I,t.abrupt("return",[I]);case 13:case"end":return t.stop()}},t,this)}));return t}()},{key:"getWindSize",value:function(){var t=this.mapService.lngLatToPixel(this.imageCoords[0]),e=this.mapService.lngLatToPixel(this.imageCoords[1]);return{imageWidth:Math.min(Math.floor((e.x-t.x)*this.sizeScale),2048),imageHeight:Math.min(Math.floor((t.y-e.y)*this.sizeScale),2048)}}},{key:"buildModels",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.initModels());case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearModels",value:function(){var t,e;null===(t=this.texture)||void 0===t||t.destroy(),null===(e=this.wind)||void 0===e||e.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:v.a.Attribute,descriptor:{name:"a_Uv",buffer:{usage:v.t.DYNAMIC_DRAW,data:[],type:v.t.FLOAT},size:2,update:function(t,e,n){return[n[3],n[4]]}}})}},{key:"getZoomScale",value:function(){return Math.min((this.cacheZoom+4)/30*2,2)}},{key:"drawWind",value:function(){if(this.wind){var t=this.layer.getLayerConfig(),e=t.uMin,n=void 0===e?-21.32:e,r=t.uMax,i=void 0===r?26.8:r,o=t.vMin,a=void 0===o?-21.57:o,s=t.vMax,u=void 0===s?21.42:s,c=t.numParticles,l=void 0===c?65535:c,f=t.fadeOpacity,h=void 0===f?.996:f,p=t.speedFactor,d=void 0===p?.25:p,v=t.dropRate,m=void 0===v?.003:v,g=t.dropRateBump,y=void 0===g?.01:g,_=t.rampColors,x=void 0===_?b:_,w=t.sizeScale,E=void 0===w?.5:w,S=l,O=Math.floor(this.mapService.getZoom());if("number"===typeof E&&E!==this.sizeScale||O!==this.cacheZoom){var T=this.getZoomScale();this.sizeScale=E,S*=T;var A=this.getWindSize(),C=A.imageWidth,k=A.imageHeight;this.wind.reSize(C,k),this.cacheZoom=O}this.wind.updateWindDir(n,i,a,u),this.wind.updateParticelNum(S),this.wind.updateColorRampTexture(x),this.wind.fadeOpacity=h,this.wind.speedFactor=d,this.wind.dropRate=m,this.wind.dropRateBump=y;var M=this.wind.draw(),P=M.d,j=M.w,I=M.h;this.rendererService.setBaseState(),this.texture.update({data:P,width:j,height:I})}}},{key:"drawColorMode",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.layer.getLayerConfig(),r=n.opacity;this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),this.layerService.renderMask(this.layer.masks),null===(t=this.colorModel)||void 0===t||t.draw({uniforms:{u_opacity:r||1,u_texture:this.texture},blend:this.getBlend(),stencil:this.getStencil(e)}),this.layer.hooks.afterRender.call()}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;for(var r=n.createLinearGradient(0,0,256,0),i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];r.addColorStop(+a,t[+a])}return n.fillStyle=r,n.fillRect(0,0,256,1),e=null,new Uint8Array(n.getImageData(0,0,256,1).data)}function i(t,e,n,r){t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,r,t.FLOAT,!1,0,0)}function o(t,e,n){t.bindFramebuffer(t.FRAMEBUFFER,e),n&&t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}n.d(e,"a",function(){return f});var a=n(0),s=n(1),u=n(6),c=n(1143),l=n(1144),f=function(){function t(e){Object(a.a)(this,t),Object(u.a)(this,"width",512),Object(u.a)(this,"height",512),Object(u.a)(this,"numParticles",65536),this.gl=e.glContext,this.width=e.imageWidth,this.height=e.imageHeight,this.fadeOpacity=e.fadeOpacity,this.speedFactor=e.speedFactor,this.dropRate=e.dropRate,this.dropRateBump=e.dropRateBump,this.rampColors=e.rampColors,this.init()}return Object(s.a)(t,[{key:"init",value:function(){var t=this.gl;this.fadeOpacity=.996,this.speedFactor=.25,this.dropRate=.003,this.dropRateBump=.01,this.drawProgram=c.d(t,l.b,l.a),this.fullScreenProgram=c.d(t,l.d,l.c),this.updateProgram=c.d(t,l.f,l.e),this.quadBuffer=c.b(t,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])),this.framebuffer=t.createFramebuffer(),this.colorRampTexture=c.e(this.gl,this.gl.LINEAR,r(this.rampColors),16,16);var e=new Uint8Array(this.width*this.height*4);this.backgroundTexture=c.e(t,t.NEAREST,e,this.width,this.height),this.screenTexture=c.e(t,t.NEAREST,e,this.width,this.height);var n=this.particleStateResolution=Math.ceil(Math.sqrt(this.numParticles));this.numParticlesSize=n*n;for(var i=new Uint8Array(4*this.numParticlesSize),o=0;o<i.length;o++)i[o]=Math.floor(256*Math.random());this.particleStateTexture0=c.e(t,t.NEAREST,i,n,n),this.particleStateTexture1=c.e(t,t.NEAREST,i,n,n);for(var a=new Float32Array(this.numParticlesSize),s=0;s<this.numParticlesSize;s++)a[s]=s;this.particleIndexBuffer=c.b(t,a)}},{key:"setWind",value:function(t){this.windData=t,this.windTexture=c.c(this.gl,this.gl.LINEAR,t.image)}},{key:"updateParticelNum",value:function(t){var e=this.gl;if(t!==this.numParticles){this.numParticles=t;var n=this.particleStateResolution=Math.ceil(Math.sqrt(this.numParticles));this.numParticlesSize=n*n;for(var r=new Uint8Array(4*this.numParticlesSize),i=0;i<r.length;i++)r[i]=Math.floor(256*Math.random());this.particleStateTexture0=c.e(e,e.NEAREST,r,n,n),this.particleStateTexture1=c.e(e,e.NEAREST,r,n,n);for(var o=new Float32Array(this.numParticlesSize),a=0;a<this.numParticlesSize;a++)o[a]=a;this.particleIndexBuffer=c.b(e,o)}}},{key:"updateWindDir",value:function(t,e,n,r){this.windData.uMin=t,this.windData.uMax=e,this.windData.vMin=n,this.windData.vMax=r}},{key:"updateColorRampTexture",value:function(t){if(this.isColorChanged(t)){this.rampColors=t;var e=this.gl;e.deleteTexture(this.colorRampTexture),this.colorRampTexture=c.e(e,e.LINEAR,r(t),16,16)}}},{key:"isColorChanged",value:function(t){for(var e=Object.keys(t),n=0,r=e;n<r.length;n++){var i=r[n],o=Number(i);if(!this.rampColors[o])return!0;if(this.rampColors[o]&&this.rampColors[o]!==t[o])return!0}return!1}},{key:"reSize",value:function(t,e){if(t!==this.width||e!==this.height){var n=this.gl;n.deleteTexture(this.backgroundTexture),n.deleteTexture(this.screenTexture),this.width=t,this.height=e;var r=new Uint8Array(t*e*4);this.backgroundTexture=c.e(n,n.NEAREST,r,t,e),this.screenTexture=c.e(n,n.NEAREST,r,t,e)}}},{key:"draw",value:function(){var t;if(null!==(t=this.windData)&&void 0!==t&&t.image){var e=this.gl;return c.a(e,this.windTexture,0),c.a(e,this.particleStateTexture0,1),this.drawScreen(),this.updateParticles(),{d:this.pixels,w:this.width,h:this.height}}return{d:new Uint8Array([0,0,0,0]),w:1,h:1}}},{key:"drawScreen",value:function(){var t=this.gl;o(t,this.framebuffer,this.screenTexture),t.viewport(0,0,this.width,this.height),t.disable(t.BLEND),this.drawFullTexture(this.backgroundTexture,this.fadeOpacity),this.drawParticles(),this.pixels=new Uint8Array(4*this.width*this.height),t.readPixels(0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.pixels),o(t,null,null),t.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);var e=this.backgroundTexture;this.backgroundTexture=this.screenTexture,this.screenTexture=e}},{key:"drawFullTexture",value:function(t,e){var n=this.gl,r=this.fullScreenProgram;n.useProgram(r),n.bindBuffer(n.ARRAY_BUFFER,this.quadBuffer),n.vertexAttribPointer(r.a_pos,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.a_pos),n.bindBuffer(n.ARRAY_BUFFER,null),c.a(n,t,2),n.uniform1i(r.u_screen,2),n.uniform1f(r.u_opacity,e),n.drawArrays(n.TRIANGLES,0,6)}},{key:"drawParticles",value:function(){var t=this.gl,e=this.drawProgram;t.useProgram(e),i(t,this.particleIndexBuffer,e.a_index,1),c.a(t,this.colorRampTexture,2),t.uniform1i(e.u_wind,0),t.uniform1i(e.u_particles,1),t.uniform1i(e.u_color_ramp,2),t.uniform1f(e.u_particles_res,this.particleStateResolution),t.uniform2f(e.u_wind_min,this.windData.uMin,this.windData.vMin),t.uniform2f(e.u_wind_max,this.windData.uMax,this.windData.vMax),t.drawArrays(t.POINTS,0,this.numParticlesSize)}},{key:"updateParticles",value:function(){var t=this.gl;o(t,this.framebuffer,this.particleStateTexture1),t.viewport(0,0,this.particleStateResolution,this.particleStateResolution);var e=this.updateProgram;t.useProgram(e),i(t,this.quadBuffer,e.a_pos,2),t.uniform1i(e.u_wind,0),t.uniform1i(e.u_particles,1),t.uniform1f(e.u_rand_seed,Math.random()),t.uniform2f(e.u_wind_res,2*this.windData.image.width,2*this.windData.image.height),t.uniform2f(e.u_wind_min,this.windData.uMin,this.windData.vMin),t.uniform2f(e.u_wind_max,this.windData.uMax,this.windData.vMax),t.uniform1f(e.u_speed_factor,this.speedFactor),t.uniform1f(e.u_drop_rate,this.dropRate),t.uniform1f(e.u_drop_rate_bump,this.dropRateBump),t.drawArrays(t.TRIANGLES,0,6);var n=this.particleStateTexture0;this.particleStateTexture0=this.particleStateTexture1,this.particleStateTexture1=n,o(t,null,null)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.quadBuffer),this.gl.deleteBuffer(this.particleIndexBuffer),this.gl.deleteFramebuffer(this.framebuffer),this.gl.deleteShader(this.drawProgram.vertexShader),this.gl.deleteShader(this.drawProgram.fragmentShader),this.gl.deleteProgram(this.drawProgram),this.gl.deleteShader(this.fullScreenProgram.vertexShader),this.gl.deleteShader(this.fullScreenProgram.fragmentShader),this.gl.deleteProgram(this.fullScreenProgram),this.gl.deleteShader(this.updateProgram.vertexShader),this.gl.deleteShader(this.updateProgram.fragmentShader),this.gl.deleteProgram(this.updateProgram),this.gl.deleteTexture(this.colorRampTexture),this.gl.deleteTexture(this.backgroundTexture),this.gl.deleteTexture(this.screenTexture),this.gl.deleteTexture(this.particleStateTexture0),this.gl.deleteTexture(this.particleStateTexture1),this.gl.deleteTexture(this.windTexture)}}]),t}()},function(t,e,n){"use strict";function r(t,e,n){var r=i(t,t.VERTEX_SHADER,e),o=i(t,t.FRAGMENT_SHADER,n);if(!r||!o)return null;var a=t.createProgram();if(!a)return null;if(t.attachShader(a,r),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var s=t.getProgramInfoLog(a);return console.warn("Failed to link program: "+s),t.deleteProgram(a),t.deleteShader(o),t.deleteShader(r),null}for(var u=t.getProgramParameter(a,t.ACTIVE_ATTRIBUTES),c=0;c<u;c++){var l=t.getActiveAttrib(a,c);a[l.name]=t.getAttribLocation(a,l.name)}for(var f=t.getProgramParameter(a,t.ACTIVE_UNIFORMS),h=0;h<f;h++){var p=t.getActiveUniform(a,h);a[p.name]=t.getUniformLocation(a,p.name)}return a.vertexShader=r,a.fragmentShader=o,a}function i(t,e,n){var r=t.createShader(e);if(null==r)return console.warn("unable to create shader"),null;if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);return console.warn("Failed to compile shader: "+i),t.deleteShader(r),null}return r}function o(t,e,n,r,i){var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,i,0,t.RGBA,t.UNSIGNED_BYTE,n),t.bindTexture(t.TEXTURE_2D,null),o}function a(t,e,n){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.bindTexture(t.TEXTURE_2D,null),r}function s(t,e,n){t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,e)}function u(t,e){var n=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),n}e.d=r,e.e=o,e.c=a,e.a=s,e.b=u},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"e",function(){return a}),n.d(e,"d",function(){return s}),n.d(e,"c",function(){return u});var r="\n precision mediump float;\n\n attribute float a_index;\n\n uniform sampler2D u_particles;\n uniform float u_particles_res;\n\n varying vec2 v_particle_pos;\n\n void main() {\n     vec4 color = texture2D(u_particles, vec2(\n         fract(a_index / u_particles_res),\n         floor(a_index / u_particles_res) / u_particles_res)\n     );\n\n     // decode current particle position from the pixel's RGBA value\n     v_particle_pos = vec2( color.r / 255.0 + color.b, color.g / 255.0 + color.a);\n\n     gl_PointSize = 1.0;\n     gl_Position = vec4(2.0 * v_particle_pos.x - 1.0, 1.0 - 2.0 * v_particle_pos.y, 0, 1);\n }",i="\n precision mediump float;\n\n uniform sampler2D u_wind;\n uniform vec2 u_wind_min;\n uniform vec2 u_wind_max;\n uniform sampler2D u_color_ramp;\n\n varying vec2 v_particle_pos;\n\n void main() {\n     vec2 velocity = mix(u_wind_min, u_wind_max, texture2D(u_wind, v_particle_pos).rg);\n     float speed_t = length(velocity) / length(u_wind_max);\n\n     // color ramp is encoded in a 16x16 texture\n     vec2 ramp_pos = vec2( fract(16.0 * speed_t), floor(16.0 * speed_t) / 16.0);\n\n     gl_FragColor = texture2D(u_color_ramp, ramp_pos);\n }",o="\n precision mediump float;\n\n attribute vec2 a_pos;\n\n varying vec2 v_tex_pos;\n\n void main() {\n     v_tex_pos = a_pos;\n     gl_Position = vec4(1.0 - 2.0 * a_pos, 0, 1);\n     // framebuffer \u59cb\u7ec8\u7528\u94fa\u6ee1\u5c4f\u5e55\u7684 texture\n }",a="\n precision highp float;\n\n uniform sampler2D u_particles;\n uniform sampler2D u_wind;\n uniform vec2 u_wind_res;\n uniform vec2 u_wind_min;\n uniform vec2 u_wind_max;\n uniform float u_rand_seed;\n uniform float u_speed_factor;\n uniform float u_drop_rate;\n uniform float u_drop_rate_bump;\n\n varying vec2 v_tex_pos;\n\n // pseudo-random generator\n const vec3 rand_constants = vec3(12.9898, 78.233, 4375.85453);\n float rand(const vec2 co) {\n float t = dot(rand_constants.xy, co);\n     return fract(sin(t) * (rand_constants.z + t));\n }\n\n // wind speed lookup; use manual bilinear filtering based on 4 adjacent pixels for smooth interpolation\n vec2 lookup_wind(const vec2 uv) {\n     // return texture2D(u_wind, uv).rg; // lower-res hardware filtering\n     vec2 px = 1.0 / u_wind_res;\n     vec2 vc = (floor(uv * u_wind_res)) * px;\n     vec2 f = fract(uv * u_wind_res);\n     vec2 tl = texture2D(u_wind, vc).rg;\n     vec2 tr = texture2D(u_wind, vc + vec2(px.x, 0)).rg;\n     vec2 bl = texture2D(u_wind, vc + vec2(0, px.y)).rg;\n     vec2 br = texture2D(u_wind, vc + px).rg;\n     return mix(mix(tl, tr, f.x), mix(bl, br, f.x), f.y);\n }\n\n void main() {\n     vec4 color = texture2D(u_particles, v_tex_pos);\n     vec2 pos = vec2(\n         color.r / 255.0 + color.b,\n         color.g / 255.0 + color.a); // decode particle position from pixel RGBA\n     vec2 velocity = mix(u_wind_min, u_wind_max, lookup_wind(pos));\n     float speed_t = length(velocity) / length(u_wind_max);\n\n     // take EPSG:4236 distortion into account for calculating where the particle moved\n     float distortion = cos(radians(pos.y * 180.0 - 90.0));\n     vec2 offset = vec2(velocity.x / distortion, -velocity.y) * 0.0001 * u_speed_factor;\n\n     // update particle position, wrapping around the date line\n     pos = fract(1.0 + pos + offset);\n\n     // a random seed to use for the particle drop\n     vec2 seed = (pos + v_tex_pos) * u_rand_seed;\n\n     // drop rate is a chance a particle will restart at random position, to avoid degeneration\n     float drop_rate = u_drop_rate + speed_t * u_drop_rate_bump;\n     float drop = step(1.0 - drop_rate, rand(seed));\n\n     vec2 random_pos = vec2(\n         rand(seed + 1.3),\n         rand(seed + 2.1));\n         pos = mix(pos, random_pos, drop);\n\n     // encode the new particle position back into RGBA\n     gl_FragColor = vec4(\n         fract(pos * 255.0),\n         floor(pos * 255.0) / 255.0);\n }",s="\n     precision mediump float;\n\n     attribute vec2 a_pos;\n\n     varying vec2 v_tex_pos;\n\n     void main() {\n         v_tex_pos = a_pos;\n         gl_Position = vec4(1.0 - 2.0 * a_pos, 0.0, 1.0);\n         gl_PointSize = 100.0;\n }",u="\n precision mediump float;\n\n uniform sampler2D u_screen;\n uniform float u_opacity;\n varying vec2 v_tex_pos;\n\n void main() {\n     vec4 color = texture2D(u_screen, 1.0 - v_tex_pos);\n\n     // a hack to guarantee opacity fade out even with a value close to 1.0\n     gl_FragColor = vec4(floor(255.0 * color * u_opacity) / 255.0);\n }"},function(t,e,n){"use strict";n.d(e,"a",function(){return S});var r,i,o,a,s,u,c,l=n(10),f=n(7),h=n(39),p=n(0),d=n(1),v=(n(6),n(40)),m=(n(41),n(8)),g=n.n(m),y=n(11),_=n(91),b=n(9),x=n(13),w=(n.n(x),n(19)),E=(n.n(w),n(14)),S=(n.n(E),r=Object(x.injectable)(),i=Object(x.inject)(y.p.IMapService),o=Object(x.inject)(y.p.IFontService),r((s=function(){function t(){Object(p.a)(this,t),Object(h.a)(this,"mapService",u,this),Object(h.a)(this,"fontService",c,this)}return Object(d.a)(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("DataMappingPlugin",Object(f.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.log(y.f.MappingStart,y.g.INIT),n.generateMaping(t,{styleAttributeService:r}),t.log(y.f.MappingEnd,y.g.INIT);case 3:case"end":return e.stop()}},e)}))),t.hooks.beforeRenderData.tapPromise("DataMappingPlugin",function(){var e=Object(f.a)(g.a.mark(function e(i){var o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",i);case 2:return t.dataState.dataMappingNeedUpdate=!1,t.log(y.f.MappingStart,y.g.UPDATE),o=n.generateMaping(t,{styleAttributeService:r}),t.log(y.f.MappingEnd,y.g.UPDATE),e.abrupt("return",o);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),t.hooks.beforeRender.tap("DataMappingPlugin",function(){var e=t.getSource();if(!t.layerModelNeedUpdate&&e&&e.inited){var i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=e.data.dataArray;if(!Array.isArray(a)||0!==a.length){var s=i.filter(function(t){return t.needRemapping}),u=a;if(null!==o&&void 0!==o&&o.needRemapping&&null!==o&&void 0!==o&&o.scale&&(u=a.filter(function(t){return n.applyAttributeMapping(o,t)[0]})),s.length){var c=n.mapping(t,s,u,t.getEncodedData());t.setEncodedData(c)}}}})}},{key:"generateMaping",value:function(t,e){var n=this,r=e.styleAttributeService,i=r.getLayerStyleAttributes()||[],o=r.getLayerStyleAttribute("filter"),a=t.getSource().data.dataArray,s=a;null!==o&&void 0!==o&&o.scale&&(s=a.filter(function(t){return n.applyAttributeMapping(o,t)[0]})),s=t.processData(s);var u=this.mapping(t,i,s,void 0);return t.setEncodedData(u),(0!==a.length||0!==t.encodeDataLength)&&(t.emit("dataUpdate",null),!0)}},{key:"mapping",value:function(t,e,n,r){var i=this,o=t.getLayerConfig(),a=o.arrow,s=void 0===a?{enable:!1}:a,u=e.filter(function(t){return void 0!==t.scale}).filter(function(t){return"filter"!==t.name}),c=n.map(function(e,n){var o=r?r[n]:{},a=Object(l.a)({id:e._id,coordinates:e.coordinates},o);if(u.forEach(function(t){var n=i.applyAttributeMapping(t,e);"color"!==t.name&&"stroke"!==t.name||(n=n.map(function(t){return Object(b.T)(t)})),a[t.name]=Array.isArray(n)&&1===n.length?n[0]:n,"shape"===t.name&&(a.shape=i.fontService.getIconFontKey(a[t.name]))}),s.enable&&"line"===a.shape){var c=a.coordinates;if(t.arrowInsertCount<t.encodeDataLength){var f=i.getArrowPoints(c[0],c[1]);a.coordinates.splice(1,0,f,f),t.arrowInsertCount++}}return a});return e.forEach(function(t){t.needRemapping=!1}),this.adjustData2Amap2Coordinates(c,t),this.adjustData2SimpleCoordinates(c),c}},{key:"adjustData2Amap2Coordinates",value:function(t,e){var n=this;if(t.length>0&&this.mapService.version===_.b["GAODE2.x"]){var r=e.coordCenter||e.getSource().center;t.filter(function(t){return!t.originCoordinates}).map(function(t){t.version=_.b["GAODE2.x"],t.originCoordinates=Object(w.cloneDeep)(t.coordinates),t.coordinates=n.mapService.coordToAMap2RelativeCoordinates(t.coordinates,r)})}}},{key:"adjustData2SimpleCoordinates",value:function(t){var e=this;t.length>0&&this.mapService.version===_.b.SIMPLE&&t.map(function(t){t.simpleCoordinate||(t.coordinates=e.unProjectCoordinates(t.coordinates),t.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(t){var e=this;if("number"===typeof t[0])return this.mapService.simpleMapCoord.unproject(t);if(t[0]&&t[0][0]instanceof Array){var n=[];return t.map(function(t){var r=[];t.map(function(t){r.push(e.mapService.simpleMapCoord.unproject(t))}),n.push(r)}),n}var r=[];return t.map(function(t){r.push(e.mapService.simpleMapCoord.unproject(t))}),r}},{key:"applyAttributeMapping",value:function(t,e){var n;if(!t.scale)return[];var r=(null===t||void 0===t?void 0:null===(n=t.scale)||void 0===n?void 0:n.scalers)||[],i=[];return r.forEach(function(n){var r,o=n.field;(e.hasOwnProperty(o)||"variable"===(null===(r=t.scale)||void 0===r?void 0:r.type))&&i.push(e[o])}),t.mapping?t.mapping(i):[]}},{key:"getArrowPoints",value:function(t,e){var n=[e[0]-t[0],e[1]-t[1]],r=Object(b.Q)(n);return[t[0]+1e-4*r[0],t[1]+1e-4*r[1]]}}]),t}(),u=Object(v.a)(s.prototype,"mapService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(v.a)(s.prototype,"fontService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=s))||a)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r,i,o=n(7),a=n(0),s=n(1),u=n(8),c=n.n(u),l=n(11),f=n(183),h=n(13),p=(n.n(h),n(14)),d=(n.n(p),(r=Object(h.injectable)())(i=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"apply",value:function(t){var e=this;this.mapService=t.getContainer().get(l.p.IMapService),t.hooks.init.tapPromise("DataSourcePlugin",Object(o.a)(c.a.mark(function n(){var r,i,o,a;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.log(l.f.SourceInitStart,l.g.INIT),r=t.getSource(),r||(i=t.sourceOption||t.defaultSourceConfig,o=i.data,a=i.options,r=new f.a(o,a),t.setSource(r)),!r.inited){n.next=8;break}e.updateClusterData(t),t.log(l.f.SourceInitEnd,l.g.INIT),n.next=10;break;case 8:return n.next=10,new Promise(function(n){r.on("update",function(r){"inited"===r.type&&(e.updateClusterData(t),t.log(l.f.SourceInitEnd,l.g.INIT)),n(null)})});case 10:case"end":return n.stop()}},n)}))),t.hooks.beforeRenderData.tapPromise("DataSourcePlugin",Object(o.a)(c.a.mark(function n(){var r,i,o;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.updateClusterData(t),i=t.dataState.dataSourceNeedUpdate,t.dataState.dataSourceNeedUpdate=!1,o=r||i,n.abrupt("return",o);case 5:case"end":return n.stop()}},n)})))}},{key:"updateClusterData",value:function(t){if(t.isTileLayer||t.tileLayer||!t.getSource())return!1;var e=t.getSource(),n=e.cluster,r=e.clusterOptions.zoom,i=void 0===r?0:r,o=this.mapService.getZoom()-1,a=t.dataState.dataSourceNeedUpdate;return n&&a&&e.updateClusterData(Math.floor(o)),!!(n&&Math.abs(t.clusterZoom-o)>=1)&&(i!==Math.floor(o)&&e.updateClusterData(Math.floor(o)),t.clusterZoom=o,!0)}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return E});var r,i,o,a=n(10),s=n(7),u=n(0),c=n(1),l=n(6),f=n(8),h=n.n(f),p=n(11),d=n(65),v=n(493),m=n(1177),g=n(13),y=(n.n(g),n(19)),_=(n.n(y),n(14)),b=(n.n(_),n(1218)),x=/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,w=(r={},Object(l.a)(r,p.l.LINEAR,m.b),Object(l.a)(r,p.l.POWER,m.e),Object(l.a)(r,p.l.LOG,m.c),Object(l.a)(r,p.l.IDENTITY,b.a),Object(l.a)(r,p.l.SEQUENTIAL,m.h),Object(l.a)(r,p.l.TIME,m.j),Object(l.a)(r,p.l.QUANTILE,m.f),Object(l.a)(r,p.l.QUANTIZE,m.g),Object(l.a)(r,p.l.THRESHOLD,m.i),Object(l.a)(r,p.l.CAT,m.d),Object(l.a)(r,p.l.DIVERGING,m.a),r),E=(i=Object(g.injectable)())(o=function(){function t(){Object(u.a)(this,t),Object(l.a)(this,"scaleOptions",{})}return Object(c.a)(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("FeatureScalePlugin",Object(s.a)(h.a.mark(function e(){var i,o,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.log(p.f.ScaleInitStart,p.g.INIT),n.scaleOptions=t.getScaleOptions(),o=r.getLayerStyleAttributes(),a=null===(i=t.getSource())||void 0===i?void 0:i.data.dataArray,!Array.isArray(a)||0!==a.length){e.next=8;break}return e.abrupt("return");case 8:n.caculateScalesForAttributes(o||[],a);case 9:t.log(p.f.ScaleInitEnd,p.g.INIT);case 10:case"end":return e.stop()}},e)}))),t.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",function(){var e=Object(s.a)(h.a.mark(function e(i){var o,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",i);case 2:if(t.log(p.f.ScaleInitStart,p.g.UPDATE),n.scaleOptions=t.getScaleOptions(),o=r.getLayerStyleAttributes(),a=t.getSource().data.dataArray,!Array.isArray(a)||0!==a.length){e.next=8;break}return e.abrupt("return",!0);case 8:return n.caculateScalesForAttributes(o||[],a),t.log(p.f.ScaleInitEnd,p.g.UPDATE),t.layerModelNeedUpdate=!0,e.abrupt("return",!0);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),t.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!t.layerModelNeedUpdate){n.scaleOptions=t.getScaleOptions();var e=r.getLayerStyleAttributes(),i=t.getSource().data.dataArray;if((!Array.isArray(i)||0!==i.length)&&e){var o=e.filter(function(t){return t.needRescale});o.length&&n.caculateScalesForAttributes(o,i)}}})}},{key:"isNumber",value:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},{key:"caculateScalesForAttributes",value:function(t,e){var n=this;t.forEach(function(t){if(t.scale){var r=t.scale;r.names=n.parseFields(t.scale.field||[]);var i=[];r.names.forEach(function(r){var o;i.push(n.createScale(r,t.name,null===(o=t.scale)||void 0===o?void 0:o.values,e))}),i.some(function(t){return t.type===p.o.VARIABLE})?(r.type=p.o.VARIABLE,i.forEach(function(t){if(!r.callback&&"text"!==r.values){var e;switch(null===(e=t.option)||void 0===e?void 0:e.type){case p.l.LOG:case p.l.LINEAR:case p.l.POWER:if(r.values&&r.values.length>2){var n=t.scale.ticks(r.values.length);t.scale.domain(n)}r.values?t.scale.range(r.values):t.scale.range(t.option.domain);break;case p.l.QUANTILE:case p.l.QUANTIZE:case p.l.THRESHOLD:t.scale.range(r.values);break;case p.l.IDENTITY:break;case p.l.CAT:r.values?t.scale.range(r.values):t.scale.range(t.option.domain);break;case p.l.DIVERGING:case p.l.SEQUENTIAL:t.scale.interpolator(v.c(r.values))}}if("text"===r.values){var i;t.scale.range(null===(i=t.option)||void 0===i?void 0:i.domain)}})):(r.type=p.o.CONSTANT,r.defaultValues=i.map(function(t,e){return t.scale(r.names[e])})),r.scalers=i.map(function(t){return{field:t.field,func:t.scale,option:t.option}}),t.needRescale=!1}})}},{key:"parseFields",value:function(t){return Array.isArray(t)?t:Object(y.isString)(t)?t.split("*"):[t]}},{key:"createScale",value:function(t,e,n,r){var i,o,a=this.scaleOptions[e]&&(null===(i=this.scaleOptions[e])||void 0===i?void 0:i.field)===t?this.scaleOptions[e]:this.scaleOptions[t],s={field:t,scale:void 0,type:p.o.VARIABLE,option:a};if(!r||!r.length)return a&&a.type?s.scale=this.createDefaultScale(a):(s.scale=m.d([t]),s.type=p.o.CONSTANT),s;var u=null===(o=r.find(function(e){return!Object(y.isNil)(e[t])}))||void 0===o?void 0:o[t];if(this.isNumber(t)||Object(y.isNil)(u)&&!a)s.scale=m.d([t]),s.type=p.o.CONSTANT;else{var c=a&&a.type||this.getDefaultType(u);"text"===n&&(c=p.l.CAT);var l=this.createScaleConfig(c,t,a,r);s.scale=this.createDefaultScale(l),s.option=l}return s}},{key:"getDefaultType",value:function(t){var e=p.l.LINEAR;return"string"===typeof t&&(e=x.test(t)?p.l.TIME:p.l.CAT),e}},{key:"createScaleConfig",value:function(t,e,n,r){var i={type:t},o=(null===r||void 0===r?void 0:r.map(function(t){return t[e]}))||[];if(null!==n&&void 0!==n&&n.domain)i.domain=null===n||void 0===n?void 0:n.domain;else if(t===p.l.CAT||t===p.l.IDENTITY)i.domain=Object(y.uniq)(o);else if(t===p.l.QUANTILE)i.domain=o;else if(t===p.l.DIVERGING){var s=Object(d.d)(o),u=void 0!==(null===n||void 0===n?void 0:n.neutral)?null===n||void 0===n?void 0:n.neutral:(s[0]+s[1])/2;i.domain=[s[0],u,s[1]]}else i.domain=Object(d.d)(o);return Object(a.a)(Object(a.a)({},i),n)}},{key:"createDefaultScale",value:function(t){var e=t.type,n=t.domain,r=t.unknown,i=t.clamp,o=t.nice,a=w[e]();return n&&a.domain&&a.domain(n),r&&a.unknown(r),void 0!==i&&a.clamp&&a.clamp(i),void 0!==o&&a.nice&&a.nice(o),a}}]),t}())||o},function(t,e,n){"use strict";n(483)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(487),n(481),n(1151),n(486),n(1152),n(488),n(489),n(490)},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";n(487),n(144),n(165),n(300)},function(t,e,n){"use strict";n(484)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(165)},function(t,e,n){"use strict";n(144),n(165),n(300)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(144)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(492)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(145)},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}},function(t,e,n){"use strict";function r(t,e,n,r){function o(t){return t.length?t.pop()+" ":""}function a(t,r,o,a,s,u){if(t!==o||r!==a){var c=s.push("translate(",null,e,null,n);u.push({i:c-4,x:Object(i.a)(t,o)},{i:c-2,x:Object(i.a)(r,a)})}else(o||a)&&s.push("translate("+o+e+a+n)}function s(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Object(i.a)(t,e)})):e&&n.push(o(n)+"rotate("+e+r)}function u(t,e,n,a){t!==e?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Object(i.a)(t,e)}):e&&n.push(o(n)+"skewX("+e+r)}function c(t,e,n,r,a,s){if(t!==n||e!==r){var u=a.push(o(a)+"scale(",null,",",null,")");s.push({i:u-4,x:Object(i.a)(t,n)},{i:u-2,x:Object(i.a)(e,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),s(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),c(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}var i=n(210),o=n(1168);r(o.a,"px, ","px)","deg)"),r(o.b,", ",")",")")},function(t,e,n){"use strict";function r(t){return"none"===t?c.b:(o||(o=document.createElement("DIV"),a=document.documentElement,s=document.defaultView),o.style.transform=t,t=s.getComputedStyle(a.appendChild(o),null).getPropertyValue("transform"),a.removeChild(o),t=t.slice(7,-1).split(","),Object(c.a)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function i(t){return null==t?c.b:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",t),(t=u.transform.baseVal.consolidate())?(t=t.matrix,Object(c.a)(t.a,t.b,t.c,t.d,t.e,t.f)):c.b)}e.a=r,e.b=i;var o,a,s,u,c=n(1169)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.a=function(t,e,n,i,o,a){var s,u,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,c/=u),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*r,skewX:Math.atan(c)*r,scaleX:s,scaleY:u}}},function(t,e,n){"use strict";Math.SQRT2},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(i.d)(e)).h,(n=Object(i.d)(n)).h),a=Object(o.a)(e.s,n.s),s=Object(o.a)(e.l,n.l),u=Object(o.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=s(t),e.opacity=u(t),e+""}}}var i=n(107),o=n(145);r(o.c),r(o.a)},function(t,e,n){"use strict";n(107),n(145)},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(i.c)(e)).h,(n=Object(i.c)(n)).h),a=Object(o.a)(e.c,n.c),s=Object(o.a)(e.l,n.l),u=Object(o.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=a(t),e.l=s(t),e.opacity=u(t),e+""}}}var i=n(107),o=n(145);r(o.c),r(o.a)},function(t,e,n){"use strict";function r(t){return function e(n){function r(e,r){var a=t((e=Object(i.b)(e)).h,(r=Object(i.b)(r)).h),s=Object(o.a)(e.s,r.s),u=Object(o.a)(e.l,r.l),c=Object(o.a)(e.opacity,r.opacity);return function(t){return e.h=a(t),e.s=s(t),e.l=u(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,r.gamma=e,r}(1)}var i=n(107),o=n(145);r(o.c),r(o.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";var r=(n(1178),n(1185),n(118));n.d(e,"b",function(){return r.a});var i=n(305);n.d(e,"c",function(){return i.a});var o=(n(306),n(501));n.d(e,"d",function(){return o.a});var a=n(307);n.d(e,"e",function(){return a.a});var s=n(1197);n.d(e,"f",function(){return s.a});var u=n(1198);n.d(e,"g",function(){return u.a});var c=n(1199);n.d(e,"i",function(){return c.a});var l=n(509);n.d(e,"j",function(){return l.b});var f=(n(1215),n(513));n.d(e,"h",function(){return f.b});var h=(n(1216),n(1217));n.d(e,"a",function(){return h.a});n(503)},function(t,e,n){"use strict";n(65),n(47),n(501)},function(t,e,n){"use strict";var r=(n(1180),n(1181),n(304));n.d(e,"a",function(){return r.a});n(1182),n(1183),n(1184)},function(t,e,n){"use strict";n(304)},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t){n.add(t)});else if(t){var i=-1,o=t.length;if(null==e)for(;++i<o;)n.add(t[i]);else for(;++i<o;)n.add(e(t[i],i,t))}return n}var o=n(304),a=o.a.prototype;r.prototype=i.prototype={constructor:r,has:a.has,add:function(t){return t+="",this[o.b+t]=t,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(117),n(118),n(502)},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r,i,o,a=n(505);!function(t){r=Object(a.a)(t),i=r.format,o=r.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},function(t,e,n){"use strict";e.a=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}},function(t,e,n){"use strict";e.a=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}},function(t,e,n){"use strict";e.a=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}},function(t,e,n){"use strict";var r=n(212),i=n(507),o=n(1192);e.a={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:r.a,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Object(o.a)(100*t,e)},r:o.a,s:i.a,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}},function(t,e,n){"use strict";var r=n(212);e.a=function(t,e){var n=Object(r.b)(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(211);e.a=function(t){return Math.max(0,-Object(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(211);e.a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(r.a)(e)/3)))-Object(r.a)(Math.abs(t)))}},function(t,e,n){"use strict";var r=n(211);e.a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Object(r.a)(e)-Object(r.a)(t))+1}},function(t,e,n){"use strict";function r(){function t(){var t=0,n=Math.max(1,u.length);for(c=new Array(n-1);++t<n;)c[t-1]=Object(i.e)(s,t/n);return e}function e(t){return isNaN(t=+t)?n:u[Object(i.b)(c,t)]}var n,s=[],u=[],c=[];return e.invertExtent=function(t){var e=u.indexOf(t);return e<0?[NaN,NaN]:[e>0?c[e-1]:s[0],e<c.length?c[e]:s[s.length-1]]},e.domain=function(e){if(!arguments.length)return s.slice();s=[];for(var n,r=0,o=e.length;r<o;++r)null==(n=e[r])||isNaN(n=+n)||s.push(n);return s.sort(i.a),t()},e.range=function(e){return arguments.length?(u=o.b.call(e),t()):u.slice()},e.unknown=function(t){return arguments.length?(n=t,e):n},e.quantiles=function(){return c.slice()},e.copy=function(){return r().domain(s).range(u).unknown(n)},a.b.apply(e,arguments)}e.a=r;var i=n(65),o=n(117),a=n(47)},function(t,e,n){"use strict";function r(){function t(t){return t<=t?h[Object(i.b)(f,t,0,l)]:n}function e(){var e=-1;for(f=new Array(l);++e<l;)f[e]=((e+1)*c-(e-l)*u)/(l+1);return t}var n,u=0,c=1,l=1,f=[.5],h=[0,1];return t.domain=function(t){return arguments.length?(u=+t[0],c=+t[1],e()):[u,c]},t.range=function(t){return arguments.length?(l=(h=o.b.call(t)).length-1,e()):h.slice()},t.invertExtent=function(t){var e=h.indexOf(t);return e<0?[NaN,NaN]:e<1?[u,f[0]]:e>=l?[f[l-1],c]:[f[e-1],f[e]]},t.unknown=function(e){return arguments.length?(n=e,t):t},t.thresholds=function(){return f.slice()},t.copy=function(){return r().domain([u,c]).range(h).unknown(n)},s.b.apply(Object(a.b)(t),arguments)}e.a=r;var i=n(65),o=n(117),a=n(118),s=n(47)},function(t,e,n){"use strict";function r(){function t(t){return t<=t?s[Object(i.b)(n,t,0,u)]:e}var e,n=[.5],s=[0,1],u=1;return t.domain=function(e){return arguments.length?(n=o.b.call(e),u=Math.min(n.length,s.length-1),t):n.slice()},t.range=function(e){return arguments.length?(s=o.b.call(e),u=Math.min(n.length,s.length-1),t):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return[n[e-1],n[e]]},t.unknown=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return r().domain(n).range(s).unknown(e)},a.b.apply(t,arguments)}e.a=r;var i=n(65),o=n(117),a=n(47)},function(t,e,n){"use strict";var r=n(43),i=Object(r.a)(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Object(r.a)(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):i:null},e.a=i;i.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*i.d)},function(t,e){return(e-t)/i.d},function(t){return t.getUTCSeconds()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.d)},function(t,e){t.setTime(+t+e*i.c)},function(t,e){return(e-t)/i.c},function(t){return t.getMinutes()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*i.d-t.getMinutes()*i.c)},function(t,e){t.setTime(+t+e*i.b)},function(t,e){return(e-t)/i.b},function(t){return t.getHours()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*i.c)/i.a},function(t){return t.getDate()-1});e.a=o;o.range},function(t,e,n){"use strict";function r(t){return Object(i.a)(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*o.c)/o.e})}n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return l});var i=n(43),o=n(85),a=r(0),s=r(1),u=r(2),c=r(3),l=r(4),f=r(5),h=r(6);a.range,s.range,u.range,c.range,l.range,f.range,h.range},function(t,e,n){"use strict";var r=n(43),i=Object(r.a)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});e.a=i;i.range},function(t,e,n){"use strict";var r=n(43),i=Object(r.a)(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(r.a)(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null},e.a=i;i.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*i.c)},function(t,e){return(e-t)/i.c},function(t){return t.getUTCMinutes()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*i.b)},function(t,e){return(e-t)/i.b},function(t){return t.getUTCHours()});e.a=o;o.range},function(t,e,n){"use strict";var r=n(43),i=n(85),o=Object(r.a)(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/i.a},function(t){return t.getUTCDate()-1});e.a=o;o.range},function(t,e,n){"use strict";function r(t){return Object(i.a)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/o.e})}n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s}),n.d(e,"c",function(){return l});var i=n(43),o=n(85),a=r(0),s=r(1),u=r(2),c=r(3),l=r(4),f=r(5),h=r(6);a.range,s.range,u.range,c.range,l.range,f.range,h.range},function(t,e,n){"use strict";var r=n(43),i=Object(r.a)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});e.a=i;i.range},function(t,e,n){"use strict";var r=n(43),i=Object(r.a)(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});i.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(r.a)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null},e.a=i;i.range},function(t,e,n){"use strict";function r(t){var e=new Date(t);return isNaN(e)?null:e}var i=n(512),o=n(309);+new Date("2000-01-01T00:00:00.000Z")||Object(o.c)(i.a)},function(t,e,n){"use strict";n(509),n(510),n(308),n(47)},function(t,e,n){"use strict";n(65),n(94),n(47)},function(t,e,n){"use strict";function r(){function t(t){return isNaN(t=+t)?u:(t=.5+((t=+s(t))-n)*(t<n?i:a),h(p?Math.max(0,Math.min(1,t)):t))}var e,n,r,i,a,s,u,c=0,l=.5,f=1,h=o.c,p=!1;return t.domain=function(o){return arguments.length?(e=s(c=+o[0]),n=s(l=+o[1]),r=s(f=+o[2]),i=e===n?0:.5/(n-e),a=n===r?0:.5/(r-n),t):[c,l,f]},t.clamp=function(e){return arguments.length?(p=!!e,t):p},t.interpolator=function(e){return arguments.length?(h=e,t):h},t.unknown=function(e){return arguments.length?(u=e,t):u},function(o){return s=o,e=o(c),n=o(l),r=o(f),i=e===n?0:.5/(n-e),a=n===r?0:.5/(r-n),t}}function i(){var t=Object(s.b)(r()(o.c));return t.copy=function(){return Object(u.a)(t,i())},a.a.apply(t,arguments)}e.a=i;var o=n(94),a=n(47),s=n(118),u=(n(305),n(513));n(306),n(307)},function(t,e,n){"use strict";function r(t){function e(t){return null==t?n:t}var n,i=[];return e.invert=e,e.domain=e.range=function(t){return t?(i=t,t):i},e.unknown=function(t){return t?(n=t,t):n},e.copy=function(){return r(t).unknown(n)},e}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,i,o=n(10),a=n(0),s=n(1),u=n(13),c=(n.n(u),n(14)),l=(n.n(c),(r=Object(u.injectable)())(i=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){t.animateStatus&&t.models.forEach(function(e){e.addUniforms(Object(o.a)({},t.layerModel.getAnimateUniforms()))})})}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,i,o=n(20),a=n(0),s=n(1),u=n(13),c=(n.n(u),n(14)),l=(n.n(c),(r=Object(u.injectable)())(i=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerMaskPlugin",function(){var e=t.getLayerConfig(),n=e.maskLayers,r=e.enableMask;if(!t.tileLayer&&n&&n.length>0){var i;(i=t.masks).push.apply(i,Object(o.a)(n)),t.updateLayerConfig({mask:r})}})}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r,i,o=n(7),a=n(0),s=n(1),u=n(8),c=n.n(u),l=n(11),f=n(13),h=(n.n(f),n(14)),p=(n.n(h),n(1222)),d=(r=Object(f.injectable)())(i=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"build",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.prepareBuildModel(),t.next=3,e.buildModels();case 3:case"end":return t.stop()}},t)}));return t}()},{key:"initLayerModel",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.build(e);case 2:e.styleNeedUpdate=!1;case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"prepareLayerModel",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.build(e);case 2:e.styleNeedUpdate=!1;case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"apply",value:function(t){var e=this;t.hooks.init.tapPromise("LayerModelPlugin",Object(o.a)(c.a.mark(function n(){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.getSource().isTile){n.next=4;break}return t.prepareBuildModel(),t.tileLayer=new p.a(t),n.abrupt("return");case 4:return t.log(l.f.BuildModelStart,l.g.INIT),n.next=7,e.initLayerModel(t);case 7:t.log(l.f.BuildModelEnd,l.g.INIT);case 8:case"end":return n.stop()}},n)}))),t.hooks.beforeRenderData.tapPromise("LayerModelPlugin",function(){var n=Object(o.a)(c.a.mark(function n(r){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r){n.next=2;break}return n.abrupt("return",!1);case 2:if(!t.getSource().isTile){n.next=5;break}return t.tileLayer=new p.a(t),n.abrupt("return",!1);case 5:return t.log(l.f.BuildModelStart,l.g.UPDATE),n.next=8,e.prepareLayerModel(t);case 8:return t.log(l.f.BuildModelEnd,l.g.UPDATE),n.abrupt("return",!0);case 10:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()),t.hooks.beforeRender.tap("LayerModelPlugin",function(){t.styleNeedUpdate&&e.prepareLayerModel(t).then(function(){t.styleNeedUpdate=!1,t.renderLayers()}),t.styleNeedUpdate=!1})}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n(7),i=n(0),o=n(1),a=n(6),s=n(8),u=n.n(s),c=n(11),l=n(19),f=(n.n(l),n(1223)),h=n(1224),p=n(1228),d=n(1229),v=function(){function t(e){var n=this;Object(i.a)(this,t),Object(a.a)(this,"initedTileset",!1),Object(a.a)(this,"mapchange",function(){var t,e=n.getCurrentView(),r=e.latLonBounds,i=e.zoom;if("GAODE1.x"===n.mapService.version){var o=n.parent.getLayerConfig(),a=o.visible;i<2&&a?(n.parent.updateLayerConfig({visible:!1}),n.layerService.reRender()):i>=2&&!a&&(n.parent.updateLayerConfig({visible:!0}),n.layerService.reRender())}n.lastViewStates&&n.lastViewStates.zoom===i&&n.lastViewStates.latLonBounds.toString()===r.toString()||(n.lastViewStates={zoom:i,latLonBounds:r},null===(t=n.tilesetManager)||void 0===t||t.throttleUpdate(i,r))}),Object(a.a)(this,"viewchange",Object(l.debounce)(this.mapchange,24)),this.parent=e;var r=this.parent.getContainer();this.rendererService=r.get(c.p.IRendererService),this.layerService=r.get(c.p.ILayerService),this.mapService=r.get(c.p.IMapService),this.pickingService=r.get(c.p.IPickingService),this.tileLayerService=new f.a({rendererService:this.rendererService,layerService:this.layerService,parent:e}),this.tilePickService=new h.a({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:e}),this.parent.setLayerPickService(this.tilePickService),this.proxy(e),this.initTileSetManager()}return Object(o.a)(t,[{key:"initTileSetManager",value:function(){var t,e=this.parent.getSource();this.tilesetManager=e.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var n=this.getCurrentView(),r=n.latLonBounds,i=n.zoom;null===(t=this.tilesetManager)||void 0===t||t.update(i,r)}},{key:"getCurrentView",value:function(){var t=this.mapService.getBounds();return{latLonBounds:[t[0][0],t[0][1],t[1][0],t[1][1]],zoom:this.mapService.getZoom()}}},{key:"bindTilesetEvent",value:function(){var t=this;this.tilesetManager.on("tile-loaded",function(t){}),this.tilesetManager.on("tile-unload",function(e){t.tileUnLoad(e)}),this.tilesetManager.on("tile-error",function(e,n){t.tileError(e)}),this.tilesetManager.on("tile-update",function(){t.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}},{key:"render",value:function(){this.tileLayerService.render()}},{key:"getLayers",value:function(){return this.tileLayerService.getLayers()}},{key:"getTiles",value:function(){return this.tileLayerService.getTiles()}},{key:"getTile",value:function(t){return this.tileLayerService.getTile(t)}},{key:"tileLoaded",value:function(t){}},{key:"tileError",value:function(t){console.warn("error:",t)}},{key:"destroy",value:function(){var t;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),null===(t=this.tilesetManager)||void 0===t||t.destroy(),this.tileLayerService.destroy()}},{key:"reload",value:function(){var t;this.tilesetManager.clear();var e=this.getCurrentView(),n=e.latLonBounds,r=e.zoom;null===(t=this.tilesetManager)||void 0===t||t.update(r,n)}},{key:"tileUnLoad",value:function(t){this.tileLayerService.removeTile(t.key)}},{key:"tileUpdate",value:function(){function t(){return e.apply(this,arguments)}var e=Object(r.a)(u.a.mark(function t(){var e,n,i=this;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.tilesetManager){t.next=2;break}return t.abrupt("return");case 2:return e=this.parent.getMinZoom(),n=this.parent.getMaxZoom(),t.next=6,Promise.all(this.tilesetManager.tiles.filter(function(t){return t.isLoaded}).filter(function(t){return t.isVisibleChange}).filter(function(t){return t.data}).filter(function(t){return t.z>=e&&t.z<n}).map(function(){var t=Object(r.a)(u.a.mark(function t(e){var n,r;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.tileLayerService.hasTile(e.key)){t.next=9;break}return n=Object(d.a)(i.parent),r=new n(e,i.parent),t.next=5,r.initTileLayer();case 5:i.tilePickService.setPickState(),0!==r.getLayers().length&&(i.tileLayerService.addTile(r),i.tileLayerService.updateTileVisible(e),i.layerService.reRender()),t.next=12;break;case 9:i.tileLayerService.updateTileVisible(e),i.tilePickService.setPickState(),i.layerService.reRender();case 12:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 6:this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"setPickState",value:function(t){}},{key:"pickRender",value:function(t){this.tilePickService.pickRender(t)}},{key:"selectFeature",value:function(t){this.tilePickService.selectFeature(t)}},{key:"highlightPickedFeature",value:function(t){this.tilePickService.highlightPickedFeature(t)}},{key:"proxy",value:function(t){var e=this;p.a.forEach(function(n){var r=t[n].bind(t);t[n]=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return r.apply(void 0,o),e.getLayers().map(function(t){t[n].apply(t,o)}),"style"===n&&e.getTiles().forEach(function(t){return t.styleUpdate.apply(t,o)}),t}})}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(20),i=n(7),o=n(0),a=n(1),s=n(6),u=n(8),c=n.n(u),l=n(14),f=(n.n(l),function(){function t(e){var n=e.rendererService,r=e.layerService,i=e.parent;Object(o.a)(this,t),Object(s.a)(this,"tileResource",new Map),Object(s.a)(this,"layerTiles",[]),this.rendererService=n,this.layerService=r,this.parent=i}return Object(a.a)(t,[{key:"tiles",get:function(){return this.layerTiles}},{key:"hasTile",value:function(t){return this.layerTiles.some(function(e){return e.key===t})}},{key:"addTile",value:function(t){this.layerTiles.push(t)}},{key:"getTile",value:function(t){return this.layerTiles.find(function(e){return e.key===t})}},{key:"getVisibleTileBylngLat",value:function(t){return this.layerTiles.find(function(e){return e.isLoaded&&e.visible&&e.lnglatInBounds(t)})}},{key:"removeTile",value:function(t){var e=this.layerTiles.findIndex(function(e){return e.key===t}),n=this.layerTiles.splice(e,1);n[0]&&n[0].destroy()}},{key:"updateTileVisible",value:function(t){var e=this.getTile(t.key);null===e||void 0===e||e.updateVisible(t.isVisible)}},{key:"isParentLoaded",value:function(t){var e=t.parent;if(!e)return!0;var n=this.getTile(null===e||void 0===e?void 0:e.key);return!(null===n||void 0===n||!n.isLoaded)}},{key:"isChildrenLoaded",value:function(t){var e=this,n=null===t||void 0===t?void 0:t.children;return 0===n.length||n.some(function(t){var n=e.getTile(null===t||void 0===t?void 0:t.key);return!1===(null===n||void 0===n?void 0:n.isLoaded)})}},{key:"render",value:function(){function t(){return e.apply(this,arguments)}var e=Object(i.a)(c.a.mark(function t(){var e,n,r=this;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getRenderLayers(),n=e.map(function(){var t=Object(i.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.layerService.renderTileLayer(e);case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t.next=4,Promise.all(n);case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"getRenderLayers",value:function(){var t=this.layerTiles.filter(function(t){return t.visible&&t.isLoaded}),e=[];return t.map(function(t){return e.push.apply(e,Object(r.a)(t.getLayers()))}),e}},{key:"getLayers",value:function(){var t=this.layerTiles.filter(function(t){return t.isLoaded}),e=[];return t.map(function(t){return e.push.apply(e,Object(r.a)(t.getLayers()))}),e}},{key:"getTiles",value:function(){return this.layerTiles}},{key:"destroy",value:function(){this.layerTiles.forEach(function(t){return t.destroy()}),this.tileResource.clear()}}]),t}())},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(20),i=n(15),o=n(0),a=n(1),s=n(6),u=n(11),c=n(9),l=n(1225),f=function(){function t(e){var n=e.layerService,r=e.tileLayerService,i=e.parent;Object(o.a)(this,t),Object(s.a)(this,"tilePickID",new Map),this.layerService=n,this.tileLayerService=r,this.parent=i,this.tileSourceService=new l.a}return Object(a.a)(t,[{key:"pickRender",value:function(t){var e=this.tileLayerService.getVisibleTileBylngLat(t.lngLat);if(e){var n=e.getMainLayer();null===n||void 0===n||n.layerPickService.pickRender(t)}}},{key:"pick",value:function(t,e){var n=this.parent.getContainer(),r=n.get(u.p.IPickingService);if("RasterLayer"===t.type){var i=this.tileLayerService.getVisibleTileBylngLat(e.lngLat);if(i&&void 0!==i.getMainLayer()){var o=i.getMainLayer();return o.layerPickService.pickRasterLayer(o,e,this.parent)}return!1}return this.pickRender(e),r.pickFromPickingFBO(t,e)}},{key:"selectFeature",value:function(t){var e=Object(i.a)(t,3),n=e[0],r=e[1],o=e[2],a=this.color2PickId(n,r,o);this.tilePickID.set("select",a),this.updateHighLight(n,r,o,"select")}},{key:"highlightPickedFeature",value:function(t){var e=Object(i.a)(t,3),n=e[0],r=e[1],o=e[2],a=this.color2PickId(n,r,o);this.tilePickID.set("active",a),this.updateHighLight(n,r,o,"active")}},{key:"updateHighLight",value:function(t,e,n,r){this.tileLayerService.tiles.map(function(i){var o=i.getMainLayer();switch(r){case"select":null===o||void 0===o||o.hooks.beforeSelect.call([t,e,n]);break;case"active":null===o||void 0===o||o.hooks.beforeHighlight.call([t,e,n])}})}},{key:"setPickState",value:function(){var t=this.tilePickID.get("select"),e=this.tilePickID.get("active");if(t){var n=this.pickId2Color(t),r=Object(i.a)(n,3),o=r[0],a=r[1],s=r[2];return void this.updateHighLight(o,a,s,"select")}if(e){var u=this.pickId2Color(e),c=Object(i.a)(u,3),l=c[0],f=c[1],h=c[2];return void this.updateHighLight(l,f,h,"active")}}},{key:"color2PickId",value:function(t,e,n){return Object(c.s)(new Uint8Array([t,e,n]))}},{key:"pickId2Color",value:function(t){return Object(c.t)(t)}},{key:"getFeatureById",value:function(t){var e=this.tileLayerService.getTiles().filter(function(t){return t.visible}),n=[];return e.forEach(function(e){n.push.apply(n,Object(r.a)(e.getFeatureById(t)))}),n}},{key:"pickRasterLayer",value:function(t,e,n){return!1}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(10),i=n(0),o=n(1),a=n(106),s=n(1226),u=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,[{key:"getCombineFeature",value:function(t){var e=null,n=t[0];return t.map(function(t){var n=a.i(t.coordinates);e=null===e?n:Object(s.a)(e,n)}),n&&(e.properties=Object(r.a)({},n)),e}}]),t}()},function(t,e,n){"use strict";function r(t,e,n){void 0===n&&(n={});var r=Object(a.b)(t),i=Object(a.b)(e),u=o.a.union(r.coordinates,i.coordinates);return 0===u.length?null:1===u.length?Object(s.i)(u[0],n.properties):Object(s.g)(u,n.properties)}var i=n(1227),o=n.n(i),a=n(265),s=n(106);e.a=r},function(t,e,n){(function(e){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){return t>e?1:t<e?-1:0}function o(t,e,n){for(var r=new m(null,null),i=r,o=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,null===e.left)break}o.left=e,o=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,null===e.right)break}i.right=e,i=e,e=e.right}}return i.right=e.left,o.left=e.right,e.left=r.right,e.right=r.left,e}function a(t,e,n,r){var i=new m(t,e);if(null===n)return i.left=i.right=null,i;n=o(t,n,r);var a=r(t,n.key);return a<0?(i.left=n.left,i.right=n,n.left=null):a>=0&&(i.right=n.right,i.left=n,n.right=null),i}function s(t,e,n){var r=null,i=null;if(e){e=o(t,e,n);var a=n(e.key,t);0===a?(r=e.left,i=e.right):a<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function u(t,e,n){return null===e?t:null===t?e:(e=o(t.key,e,n),e.left=t,e)}function c(t,e,n,r,i){if(t){r(e+(n?"\u2514\u2500\u2500 ":"\u251c\u2500\u2500 ")+i(t)+"\n");var o=e+(n?"    ":"\u2502   ");t.left&&c(t.left,o,!1,r,i),t.right&&c(t.right,o,!0,r,i)}}function l(t,e,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),a=t[o],s=e[o],u=new m(a,s);return u.left=l(t,e,n,o),u.right=l(t,e,o+1,r),u}return null}function f(t,e){for(var n=new m(null,null),r=n,i=0;i<t.length;i++)r=r.next=new m(t[i],e[i]);return r.next=null,n.next}function h(t){for(var e=t,n=[],r=!1,i=new m(null,null),o=i;!r;)e?(n.push(e),e=e.left):n.length>0?(e=o=o.next=n.pop(),e=e.right):r=!0;return o.next=null,i.next}function p(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=p(t,e,i),a=t.head;return a.left=o,t.head=t.head.next,a.right=p(t,i+1,n),a}return null}function d(t,e,n){for(var r=new m(null,null),i=r,o=t,a=e;null!==o&&null!==a;)n(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return null!==o?i.next=o:null!==a&&(i.next=a),r.next}function v(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],a=n-1,s=r+1;;){do{a++}while(i(t[a],o)<0);do{s--}while(i(t[s],o)>0);if(a>=s)break;var u=t[a];t[a]=t[s],t[s]=u,u=e[a],e[a]=e[s],e[s]=u}v(t,e,n,s,i),v(t,e,s+1,r,i)}}var m=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return t}(),g=function(){function t(t){void 0===t&&(t=i),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new m(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,i=o(t,this._root,r),a=r(t,i.key);return 0===a?this._root=i:(a<0?(n.left=i.left,n.right=i,i.left=null):a>0&&(n.right=i.right,n.left=i,i.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:(e=o(t,e,n),0===n(t,e.key)?(null===e.left?r=e.right:(r=o(t,e.left,n),r.right=e.right),this._size--,r):e)},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,a=this._root;0!==i.length||a;)if(a)i.push(a),a=a.left;else{if(a=i.pop(),o(a.key,e)>0)break;if(o(a.key,t)>=0&&n.call(r,a))return this;a=a.right}return this},t.prototype.keys=function(){var t=[];return this.forEach(function(e){var n=e.key;return t.push(n)}),t},t.prototype.values=function(){var t=[];return this.forEach(function(e){var n=e.data;return t.push(n)}),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return h(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,i=this._comparator;if(n&&v(t,e,0,r-1,i),null===this._root)this._root=l(t,e,0,r),this._size=r;else{var o=d(this.toList(),f(t,e),i);r=this._size+r,this._root=p({head:o},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return c(this._root,"",!0,function(t){return e.push(t)},t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=s(t,this._root,r),o=i.left,c=i.right;r(t,e)<0?c=a(e,n,c,r):o=a(e,n,o,r),this._root=u(o,c,r)},t.prototype.split=function(t){return s(t,this._root,this._comparator)},t}(),y=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},_=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},b=Number.EPSILON;void 0===b&&(b=Math.pow(2,-52));var x=b*b,w=function(t,e){if(-b<t&&t<b&&-b<e&&e<b)return 0;var n=t-e;return n*n<x*t*e?0:t<e?-1:1},E=function(){function e(){t(this,e),this.reset()}return r(e,[{key:"reset",value:function(){this.xRounder=new S,this.yRounder=new S}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),S=function(){function e(){t(this,e),this.tree=new g,this.round(0)}return r(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===w(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===w(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),O=new E,T=function(t,e){return t.x*e.y-t.y*e.x},A=function(t,e){return t.x*e.x+t.y*e.y},C=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=T(r,i);return w(o,0)},k=function(t){return Math.sqrt(A(t,t))},M=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return T(i,r)/k(i)/k(r)},P=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return A(i,r)/k(i)/k(r)},j=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},I=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},R=function(t,e,n,r){if(0===e.x)return I(n,r,t.x);if(0===r.x)return I(t,e,n.x);if(0===e.y)return j(n,r,t.y);if(0===r.y)return j(t,e,n.y);var i=T(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},a=T(o,e)/i,s=T(o,r)/i;return{x:(t.x+s*e.x+(n.x+a*r.x))/2,y:(t.y+s*e.y+(n.y+a*r.y))/2}},L=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return r(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:N.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),r(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&(n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment))}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i=r.otherSE;n.set(r,{sine:M(e.point,t.point,i.point),cosine:P(e.point,t.point,i.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,a=i.cosine,s=n.get(e),u=s.sine,c=s.cosine;return o>=0&&u>=0?a<c?1:a>c?-1:0:o<0&&u<0?a<c?-1:a>c?1:0:u<o?-1:u>o?1:0}}}]),e}(),D=0,N=function(){function e(n,r,i,o){t(this,e),this.id=++D,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return r(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,u=t.rightSE.point.y,c=e.rightSE.point.y;if(n<r){if(s<a&&s<u)return 1;if(s>a&&s>u)return-1;var l=t.comparePoint(e.leftSE.point);if(l<0)return 1;if(l>0)return-1;var f=e.comparePoint(t.rightSE.point);return 0!==f?f:-1}if(n>r){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var h=e.comparePoint(t.leftSE.point);if(0!==h)return h;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var v=t.comparePoint(e.rightSE.point);if(v<0)return 1;if(v>0)return-1}if(i!==o){var m=u-a,g=i-n,y=c-s,_=o-r;if(m>g&&y<_)return 1;if(m<g&&y>_)return-1}return i>o?1:i<o?-1:u<c?-1:u>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),r(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var a=(t.x-e.x)/r.x,s=e.y+a*r.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=_(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,u=y(e,a)&&0===this.comparePoint(a),c=y(n,i)&&0===t.comparePoint(i),l=y(e,s)&&0===this.comparePoint(s),f=y(n,o)&&0===t.comparePoint(o);if(c&&u)return f&&!l?o:!f&&l?s:null;if(c)return l&&i.x===s.x&&i.y===s.y?null:i;if(u)return f&&o.x===a.x&&o.y===a.y?null:a;if(f&&l)return null;if(f)return o;if(l)return s;var h=R(i,this.vector(),a,t.vector());return null===h?null:y(r,h)?O.round(h.x,h.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new L(t,!0),o=new L(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var s=new e(i,a,this.rings.slice(),this.windings.slice());return L.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),L.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var a=n;n=r,r=a}for(var s=0,u=r.rings.length;s<u;s++){var c=r.rings[s],l=r.windings[s],f=n.rings.indexOf(c);-1===f?(n.rings.push(c),n.windings.push(l)):n.windings[f]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var a=this.rings[i],s=this.windings[i],u=e.indexOf(a);-1===u?(e.push(a),n.push(s)):n[u]+=s}for(var c=[],l=[],f=0,h=e.length;f<h;f++)if(0!==n[f]){var p=e[f],d=p.poly;if(-1===l.indexOf(d))if(p.isExterior)c.push(d);else{-1===l.indexOf(d)&&l.push(d);var v=c.indexOf(p.poly);-1!==v&&c.splice(v,1)}}for(var m=0,g=c.length;m<g;m++){var y=c[m].multiPoly;-1===r.indexOf(y)&&r.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(X.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===X.numMultiPolys&&i<o;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2===1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(X.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,a,s=L.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,a=-1}return new e(new L(i,!0),new L(o,!1),[r],[a])}}]),e}(),z=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!==typeof n[0][0]||"number"!==typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=O.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,s=1,u=n.length;s<u;s++){if("number"!==typeof n[s][0]||"number"!==typeof n[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=O.round(n[s][0],n[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(N.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}o.x===a.x&&o.y===a.y||this.segments.push(N.fromRing(a,o,this))}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),F=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new z(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var a=new z(n[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),B=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"===typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var a=new F(n[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return r(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),U=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return r(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var a=null,s=o.leftSE,u=o.rightSE,c=[s],l=s.point,f=[];;){if(a=s,s=u,c.push(s),s.point===l)break;for(;;){var h=s.getAvailableLinkedEvents();if(0===h.length){var p=c[0].point,d=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===h.length){u=h[0].otherSE;break}for(var v=null,m=0,g=f.length;m<g;m++)if(f[m].point===s.point){v=m;break}if(null===v){f.push({index:c.length,point:s.point});var y=s.getLeftmostComparator(a);u=h.sort(y)[0].otherSE;break}var _=f.splice(v)[0],b=c.splice(_.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}}n.push(new e(c))}}return n}}]),r(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==C(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var a=e[0],s=e[1];0===C(a,t,s)&&e.shift(),e.push(e[0]);for(var u=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,l=this.isExteriorRing()?e.length:-1,f=[],h=c;h!=l;h+=u)f.push([e[h].x,e[h].y]);return f}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];L.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),V=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return r(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),G=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return r(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new V(i));else{var o=i.enclosingRing();o.poly||e.push(new V(o)),o.poly.addInterior(i)}}return e}}]),e}(),H=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.compare;t(this,e),this.queue=n,this.tree=new g(r),this.segments=[]}return r(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,a=void 0,s=void 0;void 0===a;)i=this.tree.prev(i),null===i?a=null:void 0===i.key.consumedBy&&(a=i.key);for(;void 0===s;)o=this.tree.next(o),null===o?s=null:void 0===o.key.consumedBy&&(s=o.key);if(t.isLeft){var u=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(u=c),!a.isAnEndpoint(c)))for(var l=this._splitSafely(a,c),f=0,h=l.length;f<h;f++)n.push(l[f])}var p=null;if(s){var d=s.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!s.isAnEndpoint(d)))for(var v=this._splitSafely(s,d),m=0,g=v.length;m<g;m++)n.push(v[m])}if(null!==u||null!==p){var y=null;if(null===u)y=p;else if(null===p)y=u;else{var _=L.comparePoints(u,p);y=_<=0?u:p}this.queue.remove(e.rightSE),n.push(e.rightSE);for(var b=e.split(y),x=0,w=b.length;x<w;x++)n.push(b[x])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var E=a.getIntersection(s);if(null!==E){if(!a.isAnEndpoint(E))for(var S=this._splitSafely(a,E),O=0,T=S.length;O<T;O++)n.push(S[O]);if(!s.isAnEndpoint(E))for(var A=this._splitSafely(s,E),C=0,k=A.length;C<k;C++)n.push(A[C])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),W="undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"."}).POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,q="undefined"!==typeof e&&Object({NODE_ENV:"production",PUBLIC_URL:"."}).POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Z=function(){function e(){t(this,e)}return r(e,[{key:"run",value:function(t,e,n){X.type=t,O.reset();for(var r=[new B(e,!0)],i=0,o=n.length;i<o;i++)r.push(new B(n[i],!1));if(X.numMultiPolys=r.length,"difference"===X.type)for(var a=r[0],s=1;s<r.length;)null!==_(r[s].bbox,a.bbox)?s++:r.splice(s,1);if("intersection"===X.type)for(var u=0,c=r.length;u<c;u++)for(var l=r[u],f=u+1,h=r.length;f<h;f++)if(null===_(l.bbox,r[f].bbox))return[];for(var p=new g(L.compare),d=0,v=r.length;d<v;d++)for(var m=r[d].getSweepEvents(),y=0,b=m.length;y<b;y++)if(p.insert(m[y]),p.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new H(p),w=p.size,E=p.pop();E;){var S=E.key;if(p.size===w){var T=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(T.id," ")+"[".concat(T.leftSE.point.x,", ").concat(T.leftSE.point.y,"] -> ")+"[".concat(T.rightSE.point.x,", ").concat(T.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(p.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>q)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=x.process(S),C=0,k=A.length;C<k;C++){var M=A[C];void 0===M.consumedBy&&p.insert(M)}w=p.size,E=p.pop()}O.reset();var P=U.factory(x.segments);return new G(P).getGeom()}}]),e}(),X=new Z;return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X.run("difference",t,n)}}})}).call(e,n(135))},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask"]},function(t,e,n){"use strict";function r(t){switch(t.type){case"PolygonLayer":case"LineLayer":case"PointLayer":return f.a;case"TileDebugLayer":return o.a;case"MaskLayer":return s.a;case"RasterLayer":switch(t.getSource().parser.dataType){case i.k.RGB:case i.k.CUSTOMRGB:return u.a;case i.k.ARRAYBUFFER:case i.k.CUSTOMARRAYBUFFER:return l.a;case i.k.TERRAINRGB:case i.k.CUSTOMTERRAINRGB:return c.a;default:return a.a}default:return f.a}}e.a=r;var i=n(11),o=n(1230),a=n(1231),s=n(1232),u=n(1233),c=n(1234),l=n(1235),f=n(1236);n(1237),n(95)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(7),a=n(0),s=n(1),u=n(3),c=n(4),l=n(2),f=n(8),h=n.n(f),p=n(297),d=n(298),v=n(95),m=function(t){function e(){return Object(a.a)(this,e),n.apply(this,arguments)}Object(u.a)(e,t);var n=r(e);return Object(s.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(h.a.mark(function t(){var e,n,r,i;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getSourceOption(),n=e.data.features[0].properties,r=(new p.a).source(e.data,e.options).size(1).shape("line").color("red"),i=new d.a({minZoom:this.z-1,maxZoom:this.z+1,textAllowOverlap:!0}).source([n],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(this.key).style({stroke:"#fff",strokeWidth:2}),t.next=6,this.addLayer(r);case 6:return t.next=8,this.addLayer(i);case 8:this.isLoaded=!0;case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:t.transforms}}}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(10),a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(473),v=n(95),m=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){var e,n,r,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new d.a(Object(o.a)({},n)).source(r.data,r.options),e&&Object.keys(e).forEach(function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)}),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(10),a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(480),v=n(95),m=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){var e,n,r,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new d.a(Object(o.a)({},n)).source(r.data,r.options),e&&Object.keys(e).forEach(function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)}),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"getFeatures",value:function(t){return t?this.sourceTile.data.getTileData(t):[]}},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.parent.getLayerConfig(),n=e.sourceLayer,r=e.featureId;return{data:{type:"FeatureCollection",features:this.getFeatures(n)},options:{parser:{type:"geojson",featureId:r},transforms:t.transforms}}}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return y});var o=n(49),a=n(10),s=n(7),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(8),d=n.n(p),v=n(209),m=n(95),g=["rasterData"],y=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(s.a)(d.a.mark(function t(){var e,n,r,i;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new v.a(Object(a.a)({},n)).source(r.data,r.options),e&&Object.keys(e).forEach(function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)}),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.sourceTile.data.data,n=e.rasterData,r=Object(o.a)(e,g);return{data:n,options:{parser:Object(a.a)({type:"rasterRgb",extent:this.sourceTile.bounds},r),transforms:t.transforms}}}}]),e}(m.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(10),a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(209),v=n(95),m=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){var e,n,r,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=new d.a(Object(o.a)({},n)).source(r.data,r.options),e&&Object.keys(e).forEach(function(t){var n,r,o=t;i[o](null===(n=e[o])||void 0===n?void 0:n.field,null===(r=e[o])||void 0===r?void 0:r.values)}),t.next=7,this.addLayer(i);case 7:this.isLoaded=!0;case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:t.transforms}}}}]),e}(v.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(h.a)(t);if(e){var i=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return b});var o=n(49),a=n(10),s=n(7),u=n(0),c=n(1),l=n(3),f=n(4),h=n(2),p=n(8),d=n.n(p),v=n(9),m=n(209),g=n(95),y=["rasterData"],_={positions:[0,1],colors:["#000","#fff"]},b=function(t){function e(){return Object(u.a)(this,e),n.apply(this,arguments)}Object(l.a)(e,t);var n=r(e);return Object(c.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(s.a)(d.a.mark(function t(){var e,n,r,i,o,s,u;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=this.getSourceOption(),i=this.getLayerOptions(),o=i.rampColors,s=i.domain,this.colorTexture=this.parent.textureService.getColorTexture(o,s),u=new m.a(Object(a.a)(Object(a.a)({},n),{},{colorTexture:this.colorTexture})).source(r.data,r.options),e&&Object.keys(e).forEach(function(t){var n,r,i=t;u[i](null===(n=e[i])||void 0===n?void 0:n.field,null===(r=e[i])||void 0===r?void 0:r.values)}),t.next=9,this.addLayer(u);case 9:this.isLoaded=!0;case 10:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.sourceTile.data.data,n=e.rasterData,r=Object(o.a)(e,y);return{data:n,options:{parser:Object(a.a)({type:"raster",extent:this.sourceTile.bounds},r),transforms:t.transforms}}}},{key:"styleUpdate",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n,o=i.rampColors,a=void 0===o?_:o,s=i.domain;this.colorTexture=this.parent.textureService.getColorTexture(a,s||Object(v.E)(a)),this.layers.forEach(function(e){return e.style({colorTexture:t.colorTexture})})}},{key:"destroy",value:function(){this.layers.forEach(function(t){return t.destroy()})}}]),e}(g.a)},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(f.a)(t);if(e){var i=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return m});var o=n(10),a=n(7),s=n(0),u=n(1),c=n(3),l=n(4),f=n(2),h=n(8),p=n.n(h),d=n(95),v=n(514),m=function(t){function e(){return Object(s.a)(this,e),n.apply(this,arguments)}Object(c.a)(e,t);var n=r(e);return Object(u.a)(e,[{key:"initTileLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(a.a)(p.a.mark(function t(){var e,n,r,i,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.parent.getLayerAttributeConfig(),n=this.getLayerOptions(),r=Object(v.a)(this.parent.type),i=this.getSourceOption()){t.next=7;break}return this.isLoaded=!0,t.abrupt("return");case 7:return a=new r(Object(o.a)({},n)).source(i.data,i.options),Object.keys(e).forEach(function(t){var n,r,i=t;a[i](null===(n=e[i])||void 0===n?void 0:n.field,null===(r=e[i])||void 0===r?void 0:r.values)}),t.next=11,this.addLayer(a);case 11:if(!n.tileMask){t.next=14;break}return t.next=14,this.addTileMask();case 14:this.setLayerMinMaxZoom(a),this.isLoaded=!0;case 16:case"end":return t.stop()}},t,this)}));return t}()},{key:"getSourceOption",value:function(){var t=this.parent.getSource(),e=this.parent.getLayerConfig(),n=e.sourceLayer,r=void 0===n?"defaultLayer":n,i=e.featureId,o=void 0===i?"id":i;return{data:{type:"FeatureCollection",features:this.getFeatures(r)},options:{parser:{type:"geojson",featureId:o},transforms:t.transforms}}}},{key:"setLayerMinMaxZoom",value:function(t){"text"===t.getModelType()&&t.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}},{key:"getFeatures",value:function(t){return this.sourceTile.data.getTileData(t)}},{key:"getFeatureById",value:function(t){var e=this.getMainLayer();return e?e.getSource().data.dataArray.filter(function(e){return e._id===t}):[]}}]),e}(d.a)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n(0),a=n(1),s=n(13),u=(n.n(s),n(14)),c=(n.n(u),(r=Object(s.injectable)())(i=function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,[{key:"apply",value:function(t){t.hooks.afterInit.tap("LayerStylePlugin",function(){var e=t.getLayerConfig(),n=e.autoFit,r=e.fitBoundsOptions;n&&t.fitBounds(r)})}}]),t}())||i)},function(t,e,n){"use strict";function r(t){var e={u_DirectionalLights:new Array(3).fill(Object(c.a)({},v)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(Object(c.a)({},m)),u_NumOfSpotLights:0};return t&&t.length||(t=[d]),t.forEach(function(t){var n=t.type,r=void 0===n?"directional":n,i=Object(u.a)(t,h),o=p[r].lights,a=p[r].num,s=e[a];e[o][s]=Object(c.a)(Object(c.a)({},e[o][s]),i),e[a]++}),e}n.d(e,"a",function(){return g});var i,o,a=n(0),s=n(1),u=n(49),c=n(10),l=n(13),f=(n.n(l),n(14)),h=(n.n(f),["type"]),p={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},d={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},v={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},m={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5},g=(i=Object(l.injectable)())(o=function(){function t(){Object(a.a)(this,t)}return Object(s.a)(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("LightingPlugin",function(){t.getLayerConfig().enableLighting&&t.models.forEach(function(t){return t.addUniforms(Object(c.a)({},r()))})})}}]),t}())||o},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r,i,o=n(0),a=n(1),s=n(13),u=(n.n(s),n(14)),c=(n.n(u),n(472)),l=(r=Object(s.injectable)())(i=function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,[{key:"apply",value:function(t,e){var n=this,r=e.rendererService,i=e.postProcessingPassFactory,o=e.normalPassFactory;t.hooks.init.tapPromise("MultiPassRendererPlugin",function(){var e=t.getLayerConfig(),r=e.enableMultiPassRenderer,a=e.passes,s=void 0===a?[]:a;n.enabled=!!r&&!1!==t.getLayerConfig().enableMultiPassRenderer,n.enabled&&(t.multiPassRenderer=Object(c.a)(t,s,i,o),t.multiPassRenderer.setRenderFlag(!0))}),t.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(n.enabled){var e=r.getViewportSize(),i=e.width,o=e.height;t.multiPassRenderer.resize(i,o)}})}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r,i,o=n(0),a=n(1),s=n(11),u=n(9),c=n(13),l=(n.n(c),n(14)),f=(n.n(l),{NONE:0,ENCODE:1,HIGHLIGHT:2}),h=(r=Object(c.injectable)())(i=function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,[{key:"apply",value:function(t,e){var n=e.styleAttributeService;t.hooks.init.tapPromise("PixelPickingPlugin",function(){var e=t.getLayerConfig(),r=e.enablePicking;n.registerStyleAttribute({name:"pickingColor",type:s.a.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:s.t.FLOAT},size:3,update:function(t){var e=t.id;return r?Object(u.t)(e):[0,0,0]}}})}),t.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){t.getLayerConfig().enablePicking&&t.isVisible()&&t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.ENCODE})})}),t.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){t.getLayerConfig().enablePicking&&t.isVisible()&&t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.HIGHLIGHT})})}),t.hooks.beforeHighlight.tap("PixelPickingPlugin",function(e){var n=t.getLayerConfig(),r=n.highlightColor,i=n.activeMix,o=void 0===i?0:i,a="string"===typeof r?Object(u.T)(r):r||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Object(u.s)(new Uint8Array(e))}),t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:a.map(function(t){return 255*t}),u_activeMix:o})})}),t.hooks.beforeSelect.tap("PixelPickingPlugin",function(e){var n=t.getLayerConfig(),r=n.selectColor,i=n.selectMix,o=void 0===i?0:i,a="string"===typeof r?Object(u.T)(r):r||[1,0,0,1];t.updateLayerConfig({pickedFeatureID:Object(u.s)(new Uint8Array(e))}),t.models.forEach(function(t){return t.addUniforms({u_PickingStage:f.HIGHLIGHT,u_PickingColor:e,u_HighlightColor:a.map(function(t){return 255*t}),u_activeMix:o,u_CurrentSelectedId:e,u_SelectColor:a.map(function(t){return 255*t}),u_EnableSelect:1})})})}}]),t}())||i},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r,i,o=n(0),a=n(1),s=n(11),u=n(13),c=(n.n(u),n(14)),l=(n.n(c),n(1243)),f=(r=Object(u.injectable)())(i=function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("RegisterStyleAttributePlugin",function(){Object(l.a)(t)||n.registerBuiltinAttributes(r,t)})}},{key:"registerBuiltinAttributes",value:function(t,e){if("MaskLayer"===e.type)return void this.registerPositionAttribute(t);this.registerPositionAttribute(t),this.registerColorAttribute(t),this.registerVertexIdAttribute(t)}},{key:"registerPositionAttribute",value:function(t){t.registerStyleAttribute({name:"position",type:s.a.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:s.t.FLOAT},size:3,update:function(t,e,n){return 2===n.length?[n[0],n[1],0]:[n[0],n[1],n[2]]}}})}},{key:"registerFilterAttribute",value:function(t){t.registerStyleAttribute({name:"filter",type:s.a.Attribute,descriptor:{name:"filter",buffer:{usage:s.t.DYNAMIC_DRAW,data:[],type:s.t.FLOAT},size:1,update:function(t){return t.filter?[1]:[0]}}})}},{key:"registerColorAttribute",value:function(t){t.registerStyleAttribute({name:"color",type:s.a.Attribute,descriptor:{name:"a_Color",buffer:{usage:s.t.DYNAMIC_DRAW,data:[],type:s.t.FLOAT},size:4,update:function(t){var e=t.color;return e&&e.length?e:[1,1,1,1]}}})}},{key:"registerVertexIdAttribute",value:function(t){t.registerStyleAttribute({name:"vertexId",type:s.a.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:s.t.DYNAMIC_DRAW,data:[],type:s.t.FLOAT},size:1,update:function(t,e){return[e]}}})}}]),t}())||i},function(t,e,n){"use strict";function r(t){var e=t.getSource();return i.includes(e.parser.type)}e.a=r;var i=(n(9),["mvt","geojsonvt","testTile"])},function(t,e,n){"use strict";n.d(e,"a",function(){return E});var r,i,o,a,s,u,c,l,f,h,p,d=n(39),v=n(0),m=n(1),g=n(6),y=n(40),_=(n(41),n(11)),b=n(9),x=n(13),w=(n.n(x),n(14)),E=(n.n(w),r=Object(x.injectable)(),i=Object(x.inject)(_.p.ICameraService),o=Object(x.inject)(_.p.ICoordinateSystemService),a=Object(x.inject)(_.p.IRendererService),s=Object(x.inject)(_.p.IMapService),r((c=function(){function t(){Object(v.a)(this,t),Object(d.a)(this,"cameraService",l,this),Object(d.a)(this,"coordinateSystemService",f,this),Object(d.a)(this,"rendererService",h,this),Object(d.a)(this,"mapService",p,this)}return Object(m.a)(t,[{key:"apply",value:function(t){var e=this,n=this.mapService.version,r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=[0,0];t.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var o=t.getLayerConfig().tileOrigin;e.coordinateSystemService.refresh(o),"GAODE2.x"===n&&(e.setLayerCenter(t),r=e.mapService.map.customCoords.getMVPMatrix(),i=e.mapService.getCustomCoordCenter());var a=e.rendererService.getViewportSize(),s=a.width,u=a.height;t.models.forEach(function(n){var o;n.addUniforms((o={},Object(g.a)(o,_.c.ProjectionMatrix,e.cameraService.getProjectionMatrix()),Object(g.a)(o,_.c.ViewMatrix,e.cameraService.getViewMatrix()),Object(g.a)(o,_.c.ViewProjectionMatrix,e.cameraService.getViewProjectionMatrix()),Object(g.a)(o,_.c.Zoom,e.cameraService.getZoom()),Object(g.a)(o,_.c.ZoomScale,e.cameraService.getZoomScale()),Object(g.a)(o,_.c.FocalDistance,e.cameraService.getFocalDistance()),Object(g.a)(o,_.c.CameraPosition,e.cameraService.getCameraPosition()),Object(g.a)(o,_.e.CoordinateSystem,e.coordinateSystemService.getCoordinateSystem()),Object(g.a)(o,_.e.ViewportCenter,e.coordinateSystemService.getViewportCenter()),Object(g.a)(o,_.e.ViewportCenterProjection,e.coordinateSystemService.getViewportCenterProjection()),Object(g.a)(o,_.e.PixelsPerDegree,e.coordinateSystemService.getPixelsPerDegree()),Object(g.a)(o,_.e.PixelsPerDegree2,e.coordinateSystemService.getPixelsPerDegree2()),Object(g.a)(o,_.e.PixelsPerMeter,e.coordinateSystemService.getPixelsPerMeter()),Object(g.a)(o,_.e.Mvp,r),Object(g.a)(o,"u_sceneCenterMercator",i),Object(g.a)(o,"u_ViewportSize",[s,u]),Object(g.a)(o,"u_ModelMatrix",e.cameraService.getModelMatrix()),Object(g.a)(o,"u_DevicePixelRatio",b.a.devicePixelRatio),Object(g.a)(o,"u_PickingBuffer",t.getLayerConfig().pickingBuffer||0),Object(g.a)(o,"u_shaderPick",Number(t.getShaderPickStat())),o))})})}},{key:"setLayerCenter",value:function(t){void 0===t.coordCenter&&(t.coordCenter=t.getSource().center),this.mapService.setCoordCenter&&this.mapService.setCoordCenter(t.coordCenter)}}]),t}(),l=Object(y.a)(c.prototype,"cameraService",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=Object(y.a)(c.prototype,"coordinateSystemService",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=Object(y.a)(c.prototype,"rendererService",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=Object(y.a)(c.prototype,"mapService",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=c))||u)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n(0),a=n(1),s=n(13),u=(n.n(s),n(14)),c=(n.n(u),(r=Object(s.injectable)())(i=function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,[{key:"apply",value:function(t){t.hooks.beforeRender.tap("UpdateModelPlugin",function(){t.layerModel&&t.layerModel.needUpdate().then(function(e){e&&t.renderLayers()})}),t.hooks.afterRender.tap("UpdateModelPlugin",function(){t.layerModelNeedUpdate=!1})}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r,i,o=n(0),a=n(1),s=n(13),u=(n.n(s),n(14)),c=(n.n(u),(r=Object(s.injectable)())(i=function(){function t(){Object(o.a)(this,t)}return Object(a.a)(t,[{key:"apply",value:function(t,e){var n=this,r=e.styleAttributeService;t.hooks.init.tapPromise("UpdateStyleAttributePlugin",function(){n.initStyleAttribute(t,{styleAttributeService:r})}),t.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){t.layerModelNeedUpdate||t.inited&&n.updateStyleAttribute(t,{styleAttributeService:r})})}},{key:"updateStyleAttribute",value:function(t,e){var n=e.styleAttributeService,r=n.getLayerStyleAttributes()||[],i=n.getLayerStyleAttribute("filter");if(i&&i.needRegenerateVertices)return t.layerModelNeedUpdate=!0,void r.forEach(function(t){return t.needRegenerateVertices=!1});r.filter(function(t){return t.needRegenerateVertices}).forEach(function(e){n.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex,t),e.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(t,e){var n=e.styleAttributeService;(n.getLayerStyleAttributes()||[]).filter(function(t){return t.needRegenerateVertices}).forEach(function(e){n.updateAttributeByFeatureRange(e.name,t.getEncodedData(),e.featureRange.startIndex,e.featureRange.endIndex),e.needRegenerateVertices=!1})}}]),t}())||i)},function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n(10),i=n(15),o=n(7),a=n(0),s=n(1),u=n(8),c=n.n(u),l=n(434),f=n(11),h=n(438),p=n(1248),d=n(9),v=n(1262),m=function(){function t(e){Object(a.a)(this,t);var n=e.id,r=e.map,i=e.canvas,o=e.hasBaseMap,s=Object(f.s)();this.container=s,r.setContainer(s,n,i,o),s.bind(f.p.IRendererService).to(p.a).inSingletonScope(),this.sceneService=s.get(f.p.ISceneService),this.mapService=s.get(f.p.IMapService),this.iconService=s.get(f.p.IIconService),this.fontService=s.get(f.p.IFontService),this.controlService=s.get(f.p.IControlService),this.layerService=s.get(f.p.ILayerService),this.debugService=s.get(f.p.IDebugService),this.debugService.setEnable(e.debug),this.markerService=s.get(f.p.IMarkerService),this.interactionService=s.get(f.p.IInteractionService),this.popupService=s.get(f.p.IPopupService),this.boxSelect=new v.b(this,{}),Object(d.U)((null===e||void 0===e?void 0:e.isMini)||!1),d.K?this.sceneService.initMiniScene(e):(this.initComponent(n),this.sceneService.init(e),this.initControl())}return Object(s.a)(t,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"getDebugService",value:function(){return this.debugService}},{key:"exportPng",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sceneService.exportPng(e));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"exportMap",value:function(){function t(t){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.sceneService.exportPng(e));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"registerRenderService",value:function(t){var e=this;if(this.sceneService.loaded){new t(this).init()}else this.on("loaded",function(){new t(e).init()})}},{key:"setBgColor",value:function(t){this.mapService.setBgColor(t)}},{key:"addLayer",value:function(t){var e=this,n=Object(f.r)(this.container);if(t.setContainer(n,this.container),this.sceneService.addLayer(t),t.inited){var r=this.initMask(t);this.addMask(r,t.id)}else t.on("inited",function(){var n=e.initMask(t);e.addMask(n,t.id)})}},{key:"initMask",value:function(t){var e=t.getLayerConfig(),n=e.mask,r=e.maskfence,i=e.maskColor,o=void 0===i?"#000":i,a=e.maskOpacity,s=void 0===a?0:a;if(n&&r){return(new h.a).source(r).shape("fill").style({color:o,opacity:s})}}},{key:"addMask",value:function(t,e){if(t){var n=this.getLayer(e);if(n){var r=Object(f.r)(this.container);t.setContainer(r,this.container),n.addMaskLayer(t),this.sceneService.addMask(t)}else console.warn("parent layer not find!")}}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(t){return this.layerService.getLayer(t)}},{key:"getLayerByName",value:function(t){return this.layerService.getLayerByName(t)}},{key:"removeLayer",value:function(){function t(t,n){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e,n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layerService.remove(e,n);case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"removeAllLayer",value:function(){function t(){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.layerService.removeAllLayers();case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(t){this.layerService.setEnableRender(t)}},{key:"addIconFont",value:function(t,e){this.fontService.addIconFont(t,e)}},{key:"addIconFonts",value:function(t){var e=this;t.forEach(function(t){var n=Object(i.a)(t,2),r=n[0],o=n[1];e.fontService.addIconFont(r,o)})}},{key:"addFontFace",value:function(t,e){var n=this;this.fontService.once("fontloaded",function(t){n.emit("fontloaded",t)}),this.fontService.addFontFace(t,e)}},{key:"addImage",value:function(){function t(t,n){return e.apply(this,arguments)}var e=Object(o.a)(c.a.mark(function t(e,n){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d.K){t.next=5;break}return t.next=3,this.iconService.addImage(e,n);case 3:t.next=6;break;case 5:this.iconService.addImageMini(e,n,this.sceneService);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"hasImage",value:function(t){return this.iconService.hasImage(t)}},{key:"removeImage",value:function(t){this.iconService.removeImage(t)}},{key:"addIconFontGlyphs",value:function(t,e){this.fontService.addIconGlyphs(e)}},{key:"addControl",value:function(t){this.controlService.addControl(t,this.container)}},{key:"removeControl",value:function(t){this.controlService.removeControl(t)}},{key:"getControlByName",value:function(t){return this.controlService.getControlByName(t)}},{key:"addMarker",value:function(t){this.markerService.addMarker(t)}},{key:"addMarkerLayer",value:function(t){this.markerService.addMarkerLayer(t)}},{key:"removeMarkerLayer",value:function(t){this.markerService.removeMarkerLayer(t)}},{key:"removeAllMarkers",value:function(){this.markerService.removeAllMarkers()}},{key:"removeAllMakers",value:function(){console.warn("removeAllMakers \u5df2\u5e9f\u5f03\uff0c\u8bf7\u4f7f\u7528 removeAllMarkers"),this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(t){this.popupService.addPopup(t)}},{key:"removePopup",value:function(t){this.popupService.removePopup(t)}},{key:"on",value:function(t,e){if(v.a.includes(t)){var n;null===(n=this.boxSelect)||void 0===n||n.on(t,e)}else f.m.includes(t)?this.sceneService.on(t,e):this.mapService.on(t,e)}},{key:"once",value:function(t,e){if(v.a.includes(t)){var n;null===(n=this.boxSelect)||void 0===n||n.once(t,e)}else f.m.includes(t)?this.sceneService.once(t,e):this.mapService.once(t,e)}},{key:"emit",value:function(t,e){-1===f.m.indexOf(t)?this.mapService.on(t,e):this.sceneService.emit(t,e)}},{key:"off",value:function(t,e){if(v.a.includes(t)){var n;null===(n=this.boxSelect)||void 0===n||n.off(t,e)}else f.m.includes(t)?this.sceneService.off(t,e):this.mapService.off(t,e)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(t){return this.mapService.getCenter(t)}},{key:"setCenter",value:function(t,e){return this.mapService.setCenter(t,e)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(t){return this.mapService.setPitch(t)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(t){this.mapService.setRotation(t)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(t){this.mapService.panTo(t)}},{key:"panBy",value:function(t,e){this.mapService.panBy(t,e)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(t){this.mapService.setZoom(t)}},{key:"fitBounds",value:function(t,e){var n=this.sceneService.getSceneConfig(),i=n.fitBoundsOptions,o=n.animate;this.mapService.fitBounds(t,e||Object(r.a)(Object(r.a)({},i),{},{animate:o}))}},{key:"setZoomAndCenter",value:function(t,e){this.mapService.setZoomAndCenter(t,e)}},{key:"setMapStyle",value:function(t){this.mapService.setMapStyle(t)}},{key:"setMapStatus",value:function(t){this.mapService.setMapStatus(t)}},{key:"pixelToLngLat",value:function(t){return this.mapService.pixelToLngLat(t)}},{key:"lngLatToPixel",value:function(t){return this.mapService.lngLatToPixel(t)}},{key:"containerToLngLat",value:function(t){return this.mapService.containerToLngLat(t)}},{key:"lngLatToContainer",value:function(t){return this.mapService.lngLatToContainer(t)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(t,e){this.container.bind(f.p.IPostProcessingPass).to(t).whenTargetNamed(e)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"enableBoxSelect",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.boxSelect.enable(),e&&this.boxSelect.once("selectend",function(){t.disableBoxSelect()})}},{key:"disableBoxSelect",value:function(){this.boxSelect.disable()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(t){this.controlService.init({container:d.b.getContainer(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var t=this.sceneService.getSceneConfig(),e=t.logoVisible,n=t.logoPosition;e&&this.addControl(new l.a({position:n}))}}]),t}()},function(t,e,n){"use strict";var r=n(1249);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return w});var r,i,o=n(7),a=n(0),s=n(1),u=n(6),c=n(8),l=n.n(c),f=n(9),h=n(13),p=(n.n(h),n(1250)),d=n.n(p),v=n(14),m=(n.n(v),n(1256)),g=n(1257),y=n(1258),_=n(1259),b=n(1260),x=n(1261),w=(r=Object(h.injectable)())(i=function(){function t(){var e=this;Object(a.a)(this,t),Object(u.a)(this,"createModel",function(t){return new b.a(e.gl,t)}),Object(u.a)(this,"createAttribute",function(t){return new m.a(e.gl,t)}),Object(u.a)(this,"createBuffer",function(t){return new g.a(e.gl,t)}),Object(u.a)(this,"createElements",function(t){return new y.a(e.gl,t)}),Object(u.a)(this,"createTexture2D",function(t){return new x.a(e.gl,t)}),Object(u.a)(this,"createFramebuffer",function(t){return new _.a(e.gl,t)}),Object(u.a)(this,"useFramebuffer",function(t,n){e.gl({framebuffer:t?t.get():null})(n)}),Object(u.a)(this,"clear",function(t){var n,r=t.color,i=t.depth,o=t.stencil,a=t.framebuffer,s=void 0===a?null:a,u={color:r,depth:i,stencil:o};u.framebuffer=null===s?s:s.get(),null===(n=e.gl)||void 0===n||n.clear(u)}),Object(u.a)(this,"viewport",function(t){var n=t.x,r=t.y,i=t.width,o=t.height;e.gl._gl.viewport(n,r,i,o),e.width=i,e.height=o,e.gl._refresh()}),Object(u.a)(this,"readPixels",function(t){var n=t.framebuffer,r=t.x,i=t.y,o=t.width,a=t.height,s={x:r,y:i,width:o,height:a};return n&&(s.framebuffer=n.get()),e.gl.read(s)}),Object(u.a)(this,"getViewportSize",function(){return{width:e.gl._gl.drawingBufferWidth,height:e.gl._gl.drawingBufferHeight}}),Object(u.a)(this,"getContainer",function(){if(f.K)return e.canvas;var t;return null===(t=e.canvas)||void 0===t?void 0:t.parentElement}),Object(u.a)(this,"getCanvas",function(){return e.canvas}),Object(u.a)(this,"getGLContext",function(){return e.gl._gl}),Object(u.a)(this,"destroy",function(){var t,n,r;e.canvas=null,null===(t=e.gl)||void 0===t||null===(n=t._gl)||void 0===n||null===(r=n.getExtension("WEBGL_lose_context"))||void 0===r||r.loseContext(),e.gl.destroy(),e.gl=null})}return Object(s.a)(t,[{key:"init",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=Object(o.a)(l.a.mark(function t(e,n,r){var i=this;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.canvas=e,!r){t.next=5;break}this.gl=r,t.next=8;break;case 5:return t.next=7,new Promise(function(t,e){d()({canvas:i.canvas,attributes:{alpha:!0,antialias:n.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,stencil:n.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:function(n,r){!n&&r||e(n),t(r)}})});case 7:this.gl=t.sent;case 8:this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 9:case"end":return t.stop()}},t,this)}));return t}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(t){return!!this.getGLContext().getExtension(t)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var t=this.getGLContext();t.disable(t.CULL_FACE)}},{key:"setDirty",value:function(t){this.isDirty=t}},{key:"getDirty",value:function(){return this.isDirty}}]),t}())||i},function(t,e,n){!function(e,r){t.exports=r(n(1251))}(0,function(t){"use strict";function e(t){return"undefined"!==typeof atob?atob(t):"base64:"+t}function n(t){var e=new Error("(regl) "+t);throw console.error(e),e}function r(t,e){t||n(e)}function i(t){return t?": "+t:""}function o(t,e,r){t in e||n("unknown parameter ("+t+")"+i(r)+". possible values: "+Object.keys(e).join())}function a(t,e){te(t)||n("invalid parameter type"+i(e)+". must be a typed array")}function s(t,e){switch(e){case"number":return"number"===typeof t;case"object":return"object"===typeof t;case"string":return"string"===typeof t;case"boolean":return"boolean"===typeof t;case"function":return"function"===typeof t;case"undefined":return"undefined"===typeof t;case"symbol":return"symbol"===typeof t}}function u(t,e,r){s(t,e)||n("invalid parameter type"+i(r)+". expected "+e+", got "+typeof t)}function c(t,e){t>=0&&(0|t)===t||n("invalid parameter type, ("+t+")"+i(e)+". must be a nonnegative integer")}function l(t,e,r){e.indexOf(t)<0&&n("invalid value"+i(r)+". must be one of: "+e)}function f(t){Object.keys(t).forEach(function(t){re.indexOf(t)<0&&n('invalid regl constructor argument "'+t+'". must be one of '+re)})}function h(t,e){for(t+="";t.length<e;)t=" "+t;return t}function p(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function d(t,e){this.number=t,this.line=e,this.errors=[]}function v(t,e,n){this.file=t,this.line=e,this.message=n}function m(){var t=new Error,e=(t.stack||t).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(e);return r?r[1]:"unknown"}function g(){var t=new Error,e=(t.stack||t).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(e);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(e);return r?r[1]:"unknown"}function y(t,n){var r=t.split("\n"),i=1,o=0,a={unknown:new p,0:new p};a.unknown.name=a[0].name=n||m(),a.unknown.lines.push(new d(0,""));for(var s=0;s<r.length;++s){var u=r[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(u);if(c)switch(c[1]){case"line":var l=/(\d+)(\s+\d+)?/.exec(c[2]);l&&(i=0|l[1],l[2]&&((o=0|l[2])in a||(a[o]=new p)));break;case"define":var f=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);f&&(a[o].name=f[1]?e(f[2]):f[2])}a[o].lines.push(new d(i++,u))}return Object.keys(a).forEach(function(t){var e=a[t];e.lines.forEach(function(t){e.index[t.number]=t})}),a}function _(t){var e=[];return t.split("\n").forEach(function(t){if(!(t.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(t);n?e.push(new v(0|n[1],0|n[2],n[3].trim())):t.length>0&&e.push(new v("unknown",0,t))}}),e}function b(t,e){e.forEach(function(e){var n=t[e.file];if(n){var r=n.index[e.line];if(r)return r.errors.push(e),void(n.hasErrors=!0)}t.unknown.hasErrors=!0,t.unknown.lines[0].errors.push(e)})}function x(t,e,n,i,o){if(!t.getShaderParameter(e,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(e),s=i===t.FRAGMENT_SHADER?"fragment":"vertex";C(n,"string",s+" shader source must be a string",o);var u=y(n,o),c=_(a);b(u,c),Object.keys(u).forEach(function(t){function e(t,e){r.push(t),i.push(e||"")}var n=u[t];if(n.hasErrors){var r=[""],i=[""];e("file number "+t+": "+n.name+"\n","color:red;text-decoration:underline;font-weight:bold"),n.lines.forEach(function(t){if(t.errors.length>0){e(h(t.number,4)+"|  ","background-color:yellow; font-weight:bold"),e(t.line+ne,"color:red; background-color:yellow; font-weight:bold");var n=0;t.errors.forEach(function(r){var i=r.message,o=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(o){var a=o[1];switch(i=o[2],a){case"assign":a="="}n=Math.max(t.line.indexOf(a,n),0)}else n=0;e(h("| ",6)),e(h("^^^",n+3)+ne,"font-weight:bold"),e(h("| ",6)),e(i+ne,"font-weight:bold")}),e(h("| ",6)+ne)}else e(h(t.number,4)+"|  "),e(t.line+ne,"color:red")}),"undefined"===typeof document||window.chrome?console.log(r.join("")):(i[0]=r.join("%c"),console.log.apply(console,i))}}),r.raise("Error compiling "+s+" shader, "+u[0].name)}}function w(t,e,n,i,o){if(!t.getProgramParameter(e,t.LINK_STATUS)){var a=t.getProgramInfoLog(e),s=y(n,o),u=y(i,o),c='Error linking program with vertex shader, "'+u[0].name+'", and fragment shader "'+s[0].name+'"';"undefined"!==typeof document?console.log("%c"+c+ne+"%c"+a,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(c+ne+a),r.raise(c)}}function E(t){t._commandRef=m()}function S(t,e,n,r){function i(t){return t?r.id(t):0}function o(t,e){Object.keys(e).forEach(function(e){t[r.id(e)]=!0})}E(t),t._fragId=i(t.static.frag),t._vertId=i(t.static.vert);var a=t._uniformSet={};o(a,e.static),o(a,e.dynamic);var s=t._attributeSet={};o(s,n.static),o(s,n.dynamic),t._hasCount="count"in t.static||"count"in t.dynamic||"elements"in t.static||"elements"in t.dynamic}function O(t,e){var r=g();n(t+" in command "+(e||m())+("unknown"===r?"":" called from "+r))}function T(t,e,n){t||O(e,n||m())}function A(t,e,n,r){t in e||O("unknown parameter ("+t+")"+i(n)+". possible values: "+Object.keys(e).join(),r||m())}function C(t,e,n,r){s(t,e)||O("invalid parameter type"+i(n)+". expected "+e+", got "+typeof t,r||m())}function k(t){t()}function M(t,e,n){t.texture?l(t.texture._texture.internalformat,e,"unsupported texture format for attachment"):l(t.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}function P(t,e){return t===he||t===fe||t===pe?2:t===de?4:ve[t]*e}function j(t){return!(t&t-1)&&!!t}function I(t,e,n){var i,o=e.width,a=e.height,s=e.channels;r(o>0&&o<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),t.wrapS===ie&&t.wrapT===ie||r(j(o)&&j(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===e.mipmask?1!==o&&1!==a&&r(t.minFilter!==ae&&t.minFilter!==ue&&t.minFilter!==se&&t.minFilter!==ce,"min filter requires mipmap"):(r(j(o)&&j(a),"texture must be a square power of 2 to support mipmapping"),r(e.mipmask===(o<<1)-1,"missing or incomplete mipmap data")),e.type===le&&(n.extensions.indexOf("oes_texture_float_linear")<0&&r(t.minFilter===oe&&t.magFilter===oe,"filter not supported, must enable oes_texture_float_linear"),r(!t.genMipmaps,"mipmap generation not supported with float textures"));var u=e.images;for(i=0;i<16;++i)if(u[i]){var c=o>>i,l=a>>i;r(e.mipmask&1<<i,"missing mipmap data");var f=u[i];if(r(f.width===c&&f.height===l,"invalid shape for mip images"),r(f.format===e.format&&f.internalformat===e.internalformat&&f.type===e.type,"incompatible type for mip image"),f.compressed);else if(f.data){var h=Math.ceil(P(f.type,s)*c/f.unpackAlignment)*f.unpackAlignment;r(f.data.byteLength===h*l,"invalid data for image, buffer size is inconsistent with image format")}else f.element||f.copy}else t.genMipmaps||r(0===(e.mipmask&1<<i),"extra mipmap data");e.compressed&&r(!t.genMipmaps,"mipmap generation for compressed images not supported")}function R(t,e,n,i){var o=t.width,a=t.height,s=t.channels;r(o>0&&o<=i.maxTextureSize&&a>0&&a<=i.maxTextureSize,"invalid texture shape"),r(o===a,"cube map must be square"),r(e.wrapS===ie&&e.wrapT===ie,"wrap mode not supported by cube map");for(var u=0;u<n.length;++u){var c=n[u];r(c.width===o&&c.height===a,"inconsistent cube map face shape"),e.genMipmaps&&(r(!c.compressed,"can not generate mipmap for compressed textures"),r(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var l=c.images,f=0;f<16;++f){var h=l[f];if(h){var p=o>>f,d=a>>f;r(c.mipmask&1<<f,"missing mipmap data"),r(h.width===p&&h.height===d,"invalid shape for mip images"),r(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed||(h.data?r(h.data.byteLength===p*d*Math.max(P(h.type,s),h.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):h.element||h.copy)}}}}function L(t,e){this.id=ge++,this.type=t,this.data=e}function D(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function N(t){if(0===t.length)return[];var e=t.charAt(0),n=t.charAt(t.length-1);if(t.length>1&&e===n&&('"'===e||"'"===e))return['"'+D(t.substr(1,t.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(t);if(r)return N(t.substr(0,r.index)).concat(N(r[1])).concat(N(t.substr(r.index+r[0].length)));var i=t.split(".");if(1===i.length)return['"'+D(t)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(N(i[a]));return o}function z(t){return"["+N(t).join("][")+"]"}function F(t,e){return new L(t,z(e+""))}function B(t){return"function"===typeof t&&!t._reglType||t instanceof L}function U(t,e){return"function"===typeof t?new L(ye,t):"number"===typeof t||"boolean"===typeof t?new L(_e,t):Array.isArray(t)?new L(be,t.map(function(t,n){return U(t,e+"["+n+"]")})):t instanceof L?t:void me(!1,"invalid option type in uniform "+e)}function V(){var t={"":0},e=[""];return{id:function(n){var r=t[n];return r||(r=t[n]=e.length,e.push(n),r)},str:function(t){return e[t]}}}function G(t,e,n){function r(){var e=window.innerWidth,r=window.innerHeight;if(t!==document.body){var i=o.getBoundingClientRect();e=i.right-i.left,r=i.bottom-i.top}o.width=n*e,o.height=n*r}function i(){a?a.disconnect():window.removeEventListener("resize",r),t.removeChild(o)}var o=document.createElement("canvas");ee(o.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),t.appendChild(o),t===document.body&&(o.style.position="absolute",ee(t.style,{margin:0,padding:0}));var a;return t!==document.body&&"function"===typeof ResizeObserver?(a=new ResizeObserver(function(){setTimeout(r)}),a.observe(t)):window.addEventListener("resize",r,!1),r(),{canvas:o,onDestroy:i}}function H(t,e){function n(n){try{return t.getContext(n,e)}catch(t){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function W(t){return"string"===typeof t.nodeName&&"function"===typeof t.appendChild&&"function"===typeof t.getBoundingClientRect}function q(t){return"function"===typeof t.drawArrays||"function"===typeof t.drawElements}function Z(t){return"string"===typeof t?t.split():(me(Array.isArray(t),"invalid extension array"),t)}function X(t){return"string"===typeof t?(me("undefined"!==typeof document,"not supported outside of DOM"),document.querySelector(t)):t}function Y(t){var e,n,r,i,o=t||{},a={},s=[],u=[],c="undefined"===typeof window?1:window.devicePixelRatio,l=!1,f=function(t){t&&me.raise(t)},h=function(){};if("string"===typeof o?(me("undefined"!==typeof document,"selector queries only supported in DOM environments"),e=document.querySelector(o),me(e,"invalid query string for element")):"object"===typeof o?W(o)?e=o:q(o)?(i=o,r=i.canvas):(me.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=X(o.canvas):"container"in o&&(n=X(o.container)),"attributes"in o&&(a=o.attributes,me.type(a,"object","invalid context attributes")),"extensions"in o&&(s=Z(o.extensions)),"optionalExtensions"in o&&(u=Z(o.optionalExtensions)),"onDone"in o&&(me.type(o.onDone,"function","invalid or missing onDone callback"),f=o.onDone),"profile"in o&&(l=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,me(c>0,"invalid pixel ratio"))):me.raise("invalid arguments to regl"),e&&("canvas"===e.nodeName.toLowerCase()?r=e:n=e),!i){if(!r){me("undefined"!==typeof document,"must manually specify webgl context outside of DOM environments");var p=G(n||document.body,f,c);if(!p)return null;r=p.canvas,h=p.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=H(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:u,pixelRatio:c,profile:l,onDone:f,onDestroy:h}:(h(),f("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function K(t,e){function n(t){me.type(t,"string","extension name must be string");var e,n=t.toLowerCase();try{e=i[n]=r(t)}catch(t){}return!!e}function r(e){return t.getExtension(e)?t.getExtension(e):t.getExtension(e.toLowerCase())?t.getExtension(e.toLowerCase()):null}for(var i={},o=0;o<e.extensions.length;++o){var a=e.extensions[o];if(!n(a))return e.onDestroy(),e.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(n),{extensions:i,restore:function(){Object.keys(i).forEach(function(t){if(i[t]&&!n(t))throw new Error("(regl): error restoring extension "+t)})}}}function J(t,e){for(var n=Array(t),r=0;r<t;++r)n[r]=e(r);return n}function Q(t){for(var e=16;e<=1<<28;e*=16)if(t<=e)return e;return 0}function $(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,(e|=n)|t>>1}function tt(){function t(t){var e=Q(t),n=i[$(e)>>2];return n.length>0?n.pop():new ArrayBuffer(e)}function e(t){i[$(t.byteLength)>>2].push(t)}function n(e,n){var r=null;switch(e){case Oe:r=new Int8Array(t(n),0,n);break;case Te:r=new Uint8Array(t(n),0,n);break;case Ae:r=new Int16Array(t(2*n),0,n);break;case Ce:r=new Uint16Array(t(2*n),0,n);break;case ke:r=new Int32Array(t(4*n),0,n);break;case Me:r=new Uint32Array(t(4*n),0,n);break;case Pe:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function r(t){e(t.buffer)}var i=J(8,function(){return[]});return{alloc:t,free:e,allocType:n,freeType:r}}function et(t){return!!t&&"object"===typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"===typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||te(t.data))}function nt(t,e,n){for(var r=0;r<e;++r)n[r]=t[r]}function rt(t,e,n,r){for(var i=0,o=0;o<e;++o)for(var a=t[o],s=0;s<n;++s)r[i++]=a[s]}function it(t,e,n,r,i,o){for(var a=o,s=0;s<e;++s)for(var u=t[s],c=0;c<n;++c)for(var l=u[c],f=0;f<r;++f)i[a++]=l[f]}function ot(t,e,n,r,i){for(var o=1,a=n+1;a<e.length;++a)o*=e[a];var s=e[n];if(e.length-n===4){var u=e[n+1],c=e[n+2],l=e[n+3];for(a=0;a<s;++a)it(t[a],u,c,l,r,i),i+=o}else for(a=0;a<s;++a)ot(t[a],e,n+1,r,i),i+=o}function at(t,e,n,r){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;var a=r||je.allocType(n,i);switch(e.length){case 0:break;case 1:nt(t,e[0],a);break;case 2:rt(t,e[0],e[1],a);break;case 3:it(t,e[0],e[1],e[2],a,0);break;default:ot(t,e,0,a,0)}return a}function st(t){for(var e=[],n=t;n.length;n=n[0])e.push(n.length);return e}function ut(t){return 0|De[Object.prototype.toString.call(t)]}function ct(t,e){for(var n=0;n<e.length;++n)t[n]=e[n]}function lt(t,e,n,r,i,o,a){for(var s=0,u=0;u<n;++u)for(var c=0;c<r;++c)t[s++]=e[i*u+o*c+a]}function ft(t,e,n,r){function i(e){this.id=h++,this.buffer=t.createBuffer(),this.type=e,this.usage=Ue,this.byteLength=0,this.dimension=1,this.dtype=Ge,this.persistentData=null,n.profile&&(this.stats={size:0})}function o(t,e){var n=d.pop();return n||(n=new i(t)),n.bind(),u(n,e,Ve,0,1,!1),n}function a(t){d.push(t)}function s(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function u(t,e,n,r,i,o){var a;if(t.usage=n,Array.isArray(e)){if(t.dtype=r||He,e.length>0){var u;if(Array.isArray(e[0])){a=Be(e);for(var c=1,l=1;l<a.length;++l)c*=a[l];t.dimension=c,u=Fe(e,a,t.dtype),s(t,u,n),o?t.persistentData=u:je.freeType(u)}else if("number"===typeof e[0]){t.dimension=i;var f=je.allocType(t.dtype,e.length);ct(f,e),s(t,f,n),o?t.persistentData=f:je.freeType(f)}else te(e[0])?(t.dimension=e[0].length,t.dtype=r||ut(e[0])||He,u=Fe(e,[e.length,e[0].length],t.dtype),s(t,u,n),o?t.persistentData=u:je.freeType(u)):me.raise("invalid buffer data")}}else if(te(e))t.dtype=r||ut(e),t.dimension=i,s(t,e,n),o&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(et(e)){a=e.shape;var h=e.stride,p=e.offset,d=0,v=0,m=0,g=0;1===a.length?(d=a[0],v=1,m=h[0],g=0):2===a.length?(d=a[0],v=a[1],m=h[0],g=h[1]):me.raise("invalid shape"),t.dtype=r||ut(e.data)||He,t.dimension=v;var y=je.allocType(t.dtype,d*v);lt(y,e.data,d,v,m,g,p),s(t,y,n),o?t.persistentData=y:je.freeType(y)}else e instanceof ArrayBuffer?(t.dtype=Ge,t.dimension=i,s(t,e,n),o&&(t.persistentData=new Uint8Array(new Uint8Array(e)))):me.raise("invalid buffer data")}function c(n){e.bufferCount--,r(n);var i=n.buffer;me(i,"buffer must not be deleted already"),t.deleteBuffer(i),n.buffer=null,delete p[n.id]}function l(r,o,a,s){function l(e){var r=Ue,i=null,o=0,a=0,c=1;return Array.isArray(e)||te(e)||et(e)||e instanceof ArrayBuffer?i=e:"number"===typeof e?o=0|e:e&&(me.type(e,"object","buffer arguments must be an object, a number or an array"),"data"in e&&(me(null===i||Array.isArray(i)||te(i)||et(i),"invalid data for buffer"),i=e.data),"usage"in e&&(me.parameter(e.usage,ze,"invalid buffer usage"),r=ze[e.usage]),"type"in e&&(me.parameter(e.type,Ne,"invalid buffer type"),a=Ne[e.type]),"dimension"in e&&(me.type(e.dimension,"number","invalid dimension"),c=0|e.dimension),"length"in e&&(me.nni(o,"buffer length must be a nonnegative integer"),o=0|e.length)),d.bind(),i?u(d,i,r,a,c,s):(o&&t.bufferData(d.type,o,r),d.dtype=a||Ge,d.usage=r,d.dimension=c,d.byteLength=o),n.profile&&(d.stats.size=d.byteLength*We[d.dtype]),l}function f(e,n){me(n+e.byteLength<=d.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+d.byteLength),t.bufferSubData(d.type,n,e)}function h(t,e){var n,r=0|(e||0);if(d.bind(),te(t)||t instanceof ArrayBuffer)f(t,r);else if(Array.isArray(t)){if(t.length>0)if("number"===typeof t[0]){var i=je.allocType(d.dtype,t.length);ct(i,t),f(i,r),je.freeType(i)}else if(Array.isArray(t[0])||te(t[0])){n=Be(t);var o=Fe(t,n,d.dtype);f(o,r),je.freeType(o)}else me.raise("invalid buffer data")}else if(et(t)){n=t.shape;var a=t.stride,s=0,u=0,c=0,h=0;1===n.length?(s=n[0],u=1,c=a[0],h=0):2===n.length?(s=n[0],u=n[1],c=a[0],h=a[1]):me.raise("invalid shape");var p=Array.isArray(t.data)?d.dtype:ut(t.data),v=je.allocType(p,s*u);lt(v,t.data,s,u,c,h,t.offset),f(v,r),je.freeType(v)}else me.raise("invalid data for buffer subdata");return l}e.bufferCount++;var d=new i(o);return p[d.id]=d,a||l(r),l._reglType="buffer",l._buffer=d,l.subdata=h,n.profile&&(l.stats=d.stats),l.destroy=function(){c(d)},l}function f(){Re(p).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})}var h=0,p={};i.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){c(this)};var d=[];return n.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(p).forEach(function(e){t+=p[e].stats.size}),t}),{create:l,createStream:o,destroyStream:a,clear:function(){Re(p).forEach(c),d.forEach(c)},getBuffer:function(t){return t&&t._buffer instanceof i?t._buffer:null},restore:f,_initBuffer:u}}function ht(t,e,n,r){function i(t){this.id=f++,l[this.id]=this,this.buffer=t,this.primType=Ye,this.vertCount=0,this.type=0}function o(t){var e=p.pop();return e||(e=new i(n.create(null,nn,!0,!1)._buffer)),s(e,t,rn,-1,-1,0,0),e}function a(t){p.push(t)}function s(r,i,o,a,s,u,c){r.buffer.bind();var l;if(i){var f=c;c||te(i)&&(!et(i)||te(i.data))||(f=e.oes_element_index_uint?en:$e),n._initBuffer(r.buffer,i,o,f,3)}else t.bufferData(nn,u,o),r.buffer.dtype=l||Je,r.buffer.usage=o,r.buffer.dimension=3,r.buffer.byteLength=u;if(l=c,!c){switch(r.buffer.dtype){case Je:case Ke:l=Je;break;case $e:case Qe:l=$e;break;case en:case tn:l=en;break;default:me.raise("unsupported type for element array")}r.buffer.dtype=l}r.type=l,me(l!==en||!!e.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var h=s;h<0&&(h=r.buffer.byteLength,l===$e?h>>=1:l===en&&(h>>=2)),r.vertCount=h;var p=a;if(a<0){p=Ye;var d=r.buffer.dimension;1===d&&(p=Ze),2===d&&(p=Xe),3===d&&(p=Ye)}r.primType=p}function u(t){r.elementsCount--,me(null!==t.buffer,"must not double destroy elements"),delete l[t.id],t.buffer.destroy(),t.buffer=null}function c(t,e){function o(t){if(t)if("number"===typeof t)a(t),c.primType=Ye,c.vertCount=0|t,c.type=Je;else{var e=null,n=on,r=-1,i=-1,u=0,l=0;Array.isArray(t)||te(t)||et(t)?e=t:(me.type(t,"object","invalid arguments for elements"),"data"in t&&(e=t.data,me(Array.isArray(e)||te(e)||et(e),"invalid data for element buffer")),"usage"in t&&(me.parameter(t.usage,ze,"invalid element buffer usage"),n=ze[t.usage]),"primitive"in t&&(me.parameter(t.primitive,qe,"invalid element buffer primitive"),r=qe[t.primitive]),"count"in t&&(me("number"===typeof t.count&&t.count>=0,"invalid vertex count for elements"),i=0|t.count),"type"in t&&(me.parameter(t.type,h,"invalid buffer type"),l=h[t.type]),"length"in t?u=0|t.length:(u=i,l===$e||l===Qe?u*=2:l!==en&&l!==tn||(u*=4))),s(c,e,n,r,i,u,l)}else a(),c.primType=Ye,c.vertCount=0,c.type=Je;return o}var a=n.create(null,nn,!0),c=new i(a._buffer);return r.elementsCount++,o(t),o._reglType="elements",o._elements=c,o.subdata=function(t,e){return a.subdata(t,e),o},o.destroy=function(){u(c)},o}var l={},f=0,h={uint8:Je,uint16:$e};e.oes_element_index_uint&&(h.uint32=en),i.prototype.bind=function(){this.buffer.bind()};var p=[];return{create:c,createStream:o,destroyStream:a,getElements:function(t){return"function"===typeof t&&t._elements instanceof i?t._elements:null},clear:function(){Re(l).forEach(u)}}}function pt(t){for(var e=je.allocType(un,t.length),n=0;n<t.length;++n)if(isNaN(t[n]))e[n]=65535;else if(t[n]===1/0)e[n]=31744;else if(t[n]===-1/0)e[n]=64512;else{an[0]=t[n];var r=sn[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)e[n]=i;else if(o<-14){var s=-14-o;e[n]=i+(a+1024>>s)}else e[n]=o>15?i+31744:i+(o+15<<10)+a}return e}function dt(t){return Array.isArray(t)||te(t)}function vt(t){return"[object "+t+"]"}function mt(t){return Array.isArray(t)&&(0===t.length||"number"===typeof t[0])}function gt(t){return!!Array.isArray(t)&&!(0===t.length||!dt(t[0]))}function yt(t){return Object.prototype.toString.call(t)}function _t(t){return yt(t)===br}function bt(t){return yt(t)===xr}function xt(t){return yt(t)===wr}function wt(t){return yt(t)===Er}function Et(t){return yt(t)===Sr}function St(t){return yt(t)===Or}function Ot(t){return!("undefined"===typeof my||!my||"function"!==typeof my.showToast||!0===my.isFRM||!t||!t.getContext)}function Tt(t){return!!("undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM&&t&&"src"in t&&"crossOrigin"in t)}function At(t){if(!t)return!1;if(Ot(t)||Tt(t))return!0;var e=yt(t);return Tr.indexOf(e)>=0||(mt(t)||gt(t)||et(t))}function Ct(t){return 0|De[Object.prototype.toString.call(t)]}function kt(t,e){var n=e.length;switch(t.type){case Gn:case Hn:case Wn:case qn:var r=je.allocType(t.type,n);r.set(e),t.data=r;break;case Mn:t.data=pt(e);break;default:me.raise("unsupported texture type, must specify a typed array")}}function Mt(t,e){return je.allocType(t.type===Mn?qn:t.type,e)}function Pt(t,e){t.type===Mn?(t.data=pt(e),je.freeType(e)):t.data=e}function jt(t,e,n,r,i,o){for(var a=t.width,s=t.height,u=t.channels,c=a*s*u,l=Mt(t,c),f=0,h=0;h<s;++h)for(var p=0;p<a;++p)for(var d=0;d<u;++d)l[f++]=e[n*p+r*h+i*d+o];Pt(t,l)}function It(t,e,n,r,i,o){var a;if(a="undefined"!==typeof Cr[t]?Cr[t]:_r[t]*Ar[e],o&&(a*=6),i){for(var s=0,u=n;u>=1;)s+=a*u*u,u/=2;return s}return a*n*r}function Rt(t,e,n,r,i,o,a){function s(){this.internalformat=dn,this.format=dn,this.type=Gn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=vr,this.width=0,this.height=0,this.channels=0}function u(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function c(t,r){if("object"===typeof r&&r){if("premultiplyAlpha"in r&&(me.type(r.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),t.premultiplyAlpha=r.premultiplyAlpha),"flipY"in r&&(me.type(r.flipY,"boolean","invalid texture flip"),t.flipY=r.flipY),"alignment"in r&&(me.oneOf(r.alignment,[1,2,4,8],"invalid texture unpack alignment"),t.unpackAlignment=r.alignment),"colorSpace"in r&&(me.parameter(r.colorSpace,F,"invalid colorSpace"),t.colorSpace=F[r.colorSpace]),"type"in r){var i=r.type;me(e.oes_texture_float||!("float"===i||"float32"===i),"you must enable the OES_texture_float extension in order to use floating point textures."),me(e.oes_texture_half_float||!("half float"===i||"float16"===i),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),me(e.webgl_depth_texture||!("uint16"===i||"uint32"===i||"depth stencil"===i),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),me.parameter(i,B,"invalid texture type"),t.type=B[i]}var o=t.width,a=t.height,s=t.channels,u=!1;"shape"in r?(me(Array.isArray(r.shape)&&r.shape.length>=2,"shape must be an array"),o=r.shape[0],a=r.shape[1],3===r.shape.length&&(s=r.shape[2],me(s>0&&s<=4,"invalid number of channels"),u=!0),me(o>=0&&o<=n.maxTextureSize,"invalid width"),me(a>=0&&a<=n.maxTextureSize,"invalid height")):("radius"in r&&(o=a=r.radius,me(o>=0&&o<=n.maxTextureSize,"invalid radius")),"width"in r&&(o=r.width,me(o>=0&&o<=n.maxTextureSize,"invalid width")),"height"in r&&(a=r.height,me(a>=0&&a<=n.maxTextureSize,"invalid height")),"channels"in r&&(s=r.channels,me(s>0&&s<=4,"invalid number of channels"),u=!0)),t.width=0|o,t.height=0|a,t.channels=0|s;var c=!1;if("format"in r){var l=r.format;me(e.webgl_depth_texture||!("depth"===l||"depth stencil"===l),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),me.parameter(l,U,"invalid texture format");var f=t.internalformat=U[l];t.format=K[f],l in B&&("type"in r||(t.type=B[l])),l in V&&(t.compressed=!0),c=!0}!u&&c?t.channels=_r[t.format]:u&&!c?t.channels!==yr[t.format]&&(t.format=t.internalformat=yr[t.channels]):c&&u&&me(t.channels===_r[t.format],"number of channels inconsistent with specified format")}}function l(e){t.pixelStorei(hr,e.flipY),t.pixelStorei(pr,e.premultiplyAlpha),t.pixelStorei(dr,e.colorSpace),t.pixelStorei(fr,e.unpackAlignment)}function f(){s.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(t,e){var r=null;if(At(e)?r=e:e&&(me.type(e,"object","invalid pixel data type"),c(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),At(e.data)&&(r=e.data)),me(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),e.copy){me(!r,"can not specify copy and data field for the same texture");var o=i.viewportWidth,a=i.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||a-t.yOffset,t.needsCopy=!0,me(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<a&&t.width>0&&t.width<=o&&t.height>0&&t.height<=a,"copy texture read out of bounds")}else if(r){if(te(r))t.channels=t.channels||4,t.data=r,"type"in e||t.type!==Gn||(t.type=Ct(r));else if(mt(r))t.channels=t.channels||4,kt(t,r),t.alignment=1,t.needsFree=!0;else if(et(r)){var s=r.data;Array.isArray(s)||t.type!==Gn||(t.type=Ct(s));var u,l,f,h,p,d,v=r.shape,m=r.stride;3===v.length?(f=v[2],d=m[2]):(me(2===v.length,"invalid ndarray pixel data, must be 2 or 3D"),f=1,d=1),u=v[0],l=v[1],h=m[0],p=m[1],t.alignment=1,t.width=u,t.height=l,t.channels=f,t.format=t.internalformat=yr[f],t.needsFree=!0,jt(t,s,h,p,d,r.offset)}else if(Ot(r)||_t(r)||bt(r)||xt(r))Ot(r)||_t(r)||bt(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(wt(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(Et(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(Tt(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(St(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(gt(r)){var g=t.width||r[0].length,y=t.height||r.length,_=t.channels;_=dt(r[0][0])?_||r[0][0].length:_||1;for(var b=Le.shape(r),x=1,w=0;w<b.length;++w)x*=b[w];var E=Mt(t,x);Le.flatten(r,b,"",E),Pt(t,E),t.alignment=1,t.width=g,t.height=y,t.channels=_,t.format=t.internalformat=yr[_],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===qn?me(n.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Mn&&me(n.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function p(e,n,i){var o=e.element,a=e.data,s=e.internalformat,u=e.format,c=e.type,f=e.width,h=e.height;l(e),o?t.texImage2D(n,i,u,u,c,o):e.compressed?t.compressedTexImage2D(n,i,s,f,h,0,a):e.needsCopy?(r(),t.copyTexImage2D(n,i,u,e.xOffset,e.yOffset,f,h,0)):t.texImage2D(n,i,u,f,h,0,u,c,a||null)}function d(e,n,i,o,a){var s=e.element,u=e.data,c=e.internalformat,f=e.format,h=e.type,p=e.width,d=e.height;l(e),s?t.texSubImage2D(n,a,i,o,f,h,s):e.compressed?t.compressedTexSubImage2D(n,a,i,o,c,p,d,u):e.needsCopy?(r(),t.copyTexSubImage2D(n,a,i,o,e.xOffset,e.yOffset,p,d)):t.texSubImage2D(n,a,i,o,p,d,f,h,u)}function v(){return J.pop()||new f}function m(t){t.needsFree&&je.freeType(t.data),f.call(t),J.push(t)}function g(){s.call(this),this.genMipmaps=!1,this.mipmapHint=sr,this.mipmask=0,this.images=Array(16)}function y(t,e,n){var r=t.images[0]=v();t.mipmask=1,r.width=t.width=e,r.height=t.height=n,r.channels=t.channels=4}function _(t,e){var n=null;if(At(e))n=t.images[0]=v(),u(n,t),h(n,e),t.mipmask=1;else if(c(t,e),Array.isArray(e.mipmap))for(var r=e.mipmap,i=0;i<r.length;++i)n=t.images[i]=v(),u(n,t),n.width>>=i,n.height>>=i,h(n,r[i]),t.mipmask|=1<<i;else n=t.images[0]=v(),u(n,t),h(n,e),t.mipmask=1;u(t,t.images[0]),!t.compressed||t.internalformat!==Pn&&t.internalformat!==jn&&t.internalformat!==In&&t.internalformat!==Rn||me(t.width%4===0&&t.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function b(t,e){for(var n=t.images,r=0;r<n.length;++r){if(!n[r])return;p(n[r],e,r)}}function x(){var t=Q.pop()||new g;s.call(t),t.mipmask=0;for(var e=0;e<16;++e)t.images[e]=null;return t}function w(t){for(var e=t.images,n=0;n<e.length;++n)e[n]&&m(e[n]),e[n]=null;Q.push(t)}function E(){this.minFilter=tr,this.magFilter=tr,this.wrapS=Kn,this.wrapT=Kn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=sr}function S(t,e){if("min"in e){var r=e.min;me.parameter(r,z),t.minFilter=z[r],gr.indexOf(t.minFilter)>=0&&!("faces"in e)&&(t.genMipmaps=!0)}if("mag"in e){var i=e.mag;me.parameter(i,N),t.magFilter=N[i]}var o=t.wrapS,a=t.wrapT;if("wrap"in e){var s=e.wrap;"string"===typeof s?(me.parameter(s,D),o=a=D[s]):Array.isArray(s)&&(me.parameter(s[0],D),me.parameter(s[1],D),o=D[s[0]],a=D[s[1]])}else{if("wrapS"in e){var u=e.wrapS;me.parameter(u,D),o=D[u]}if("wrapT"in e){var c=e.wrapT;me.parameter(c,D),a=D[c]}}if(t.wrapS=o,t.wrapT=a,"anisotropic"in e){var l=e.anisotropic;me("number"===typeof l&&l>=1&&l<=n.maxAnisotropic,"aniso samples must be between 1 and "),t.anisotropic=e.anisotropic}if("mipmap"in e){var f=!1;switch(typeof e.mipmap){case"string":me.parameter(e.mipmap,L,"invalid mipmap hint"),t.mipmapHint=L[e.mipmap],t.genMipmaps=!0,f=!0;break;case"boolean":f=t.genMipmaps=e.mipmap;break;case"object":me(Array.isArray(e.mipmap),"invalid mipmap type"),t.genMipmaps=!1,f=!0;break;default:me.raise("invalid mipmap type")}!f||"min"in e||(t.minFilter=nr)}}function O(n,r){t.texParameteri(r,$n,n.minFilter),t.texParameteri(r,Qn,n.magFilter),t.texParameteri(r,Zn,n.wrapS),t.texParameteri(r,Xn,n.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(r,lr,n.anisotropic),n.genMipmaps&&(t.hint(ar,n.mipmapHint),t.generateMipmap(r))}function T(e){s.call(this),this.mipmask=0,this.internalformat=dn,this.id=$++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new E,a.profile&&(this.stats={size:0})}function A(e){t.activeTexture(mr),t.bindTexture(e.target,e.texture)}function C(){var e=rt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(fn,null)}function k(e){var n=e.texture;me(n,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(t.activeTexture(mr+r),t.bindTexture(i,null),rt[r]=null),t.deleteTexture(n),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete tt[e.id],o.textureCount--}function M(e,r){function i(t,e){var r=l.texInfo;E.call(r);var o=x();return"number"===typeof t?"number"===typeof e?y(o,0|t,0|e):y(o,0|t,0|t):t?(me.type(t,"object","invalid arguments to regl.texture"),S(r,t),_(o,t)):y(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),l.mipmask=o.mipmask,u(l,o),me.texture2D(r,o,n),l.internalformat=o.internalformat,i.width=o.width,i.height=o.height,A(l),b(o,fn),O(r,fn),C(),w(o),a.profile&&(l.stats.size=It(l.internalformat,l.type,o.width,o.height,r.genMipmaps,!1)),i.format=W[l.internalformat],i.type=q[l.type],i.mag=Z[r.magFilter],i.min=X[r.minFilter],i.wrapS=Y[r.wrapS],i.wrapT=Y[r.wrapT],i}function s(t,e,n,r){me(!!t,"must specify image data");var o=0|e,a=0|n,s=0|r,c=v();return u(c,l),c.width=0,c.height=0,h(c,t),c.width=c.width||(l.width>>s)-o,c.height=c.height||(l.height>>s)-a,me(l.type===c.type&&l.format===c.format&&l.internalformat===c.internalformat,"incompatible format for texture.subimage"),me(o>=0&&a>=0&&o+c.width<=l.width&&a+c.height<=l.height,"texture.subimage write out of bounds"),me(l.mipmask&1<<s,"missing mipmap data"),me(c.data||c.element||c.needsCopy,"missing image data"),A(l),d(c,fn,o,a,s),C(),m(c),i}function c(e,n){var r=0|e,o=0|n||r;if(r===l.width&&o===l.height)return i;i.width=l.width=r,i.height=l.height=o,A(l);for(var s=0;l.mipmask>>s;++s){var u=r>>s,c=o>>s;if(!u||!c)break;t.texImage2D(fn,s,l.format,u,c,0,l.format,l.type,null)}return C(),a.profile&&(l.stats.size=It(l.internalformat,l.type,r,o,!1,!1)),i}var l=new T(fn);return tt[l.id]=l,o.textureCount++,i(e,r),i.subimage=s,i.resize=c,i._reglType="texture2d",i._texture=l,a.profile&&(i.stats=l.stats),i.destroy=function(){l.decRef()},i}function P(e,r,i,s,l,f){function p(t,e,r,i,o,s){var l,f=M.texInfo;for(E.call(f),l=0;l<6;++l)P[l]=x();if("number"!==typeof t&&t)if("object"===typeof t)if(e)_(P[0],t),_(P[1],e),_(P[2],r),_(P[3],i),_(P[4],o),_(P[5],s);else if(S(f,t),c(M,t),"faces"in t){var h=t.faces;for(me(Array.isArray(h)&&6===h.length,"cube faces must be a length 6 array"),l=0;l<6;++l)me("object"===typeof h[l]&&!!h[l],"invalid input for cube map face"),u(P[l],M),_(P[l],h[l])}else for(l=0;l<6;++l)_(P[l],t);else me.raise("invalid arguments to cube map");else{var d=0|t||1;for(l=0;l<6;++l)y(P[l],d,d)}for(u(M,P[0]),me.optional(function(){n.npotTextureCube||me(cn(M.width)&&cn(M.height),"your browser does not support non power or two texture dimensions")}),f.genMipmaps?M.mipmask=(P[0].width<<1)-1:M.mipmask=P[0].mipmask,me.textureCube(M,f,P,n),M.internalformat=P[0].internalformat,p.width=P[0].width,p.height=P[0].height,A(M),l=0;l<6;++l)b(P[l],pn+l);for(O(f,hn),C(),a.profile&&(M.stats.size=It(M.internalformat,M.type,p.width,p.height,f.genMipmaps,!0)),p.format=W[M.internalformat],p.type=q[M.type],p.mag=Z[f.magFilter],p.min=X[f.minFilter],p.wrapS=Y[f.wrapS],p.wrapT=Y[f.wrapT],l=0;l<6;++l)w(P[l]);return p}function g(t,e,n,r,i){me(!!e,"must specify image data"),me("number"===typeof t&&t===(0|t)&&t>=0&&t<6,"invalid face");var o=0|n,a=0|r,s=0|i,c=v();return u(c,M),c.width=0,c.height=0,h(c,e),c.width=c.width||(M.width>>s)-o,c.height=c.height||(M.height>>s)-a,me(M.type===c.type&&M.format===c.format&&M.internalformat===c.internalformat,"incompatible format for texture.subimage"),me(o>=0&&a>=0&&o+c.width<=M.width&&a+c.height<=M.height,"texture.subimage write out of bounds"),me(M.mipmask&1<<s,"missing mipmap data"),me(c.data||c.element||c.needsCopy,"missing image data"),A(M),d(c,pn+t,o,a,s),C(),m(c),p}function k(e){var n=0|e;if(n!==M.width){p.width=M.width=n,p.height=M.height=n,A(M);for(var r=0;r<6;++r)for(var i=0;M.mipmask>>i;++i)t.texImage2D(pn+r,i,M.format,n>>i,n>>i,0,M.format,M.type,null);return C(),a.profile&&(M.stats.size=It(M.internalformat,M.type,p.width,p.height,!1,!0)),p}}var M=new T(hn);tt[M.id]=M,o.cubeCount++;var P=new Array(6);return p(e,r,i,s,l,f),p.subimage=g,p.resize=k,p._reglType="textureCube",p._texture=M,a.profile&&(p.stats=M.stats),p.destroy=function(){M.decRef()},p}function j(){for(var e=0;e<nt;++e)t.activeTexture(mr+e),t.bindTexture(fn,null),rt[e]=null;Re(tt).forEach(k),o.cubeCount=0,o.textureCount=0}function I(){for(var e=0;e<nt;++e){var n=rt[e];n&&(n.bindCount=0,n.unit=-1,rt[e]=null)}Re(tt).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var n=0;n<32;++n)if(0!==(e.mipmask&1<<n))if(e.target===fn)t.texImage2D(fn,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)t.texImage2D(pn+r,n,e.internalformat,e.width>>n,e.height>>n,0,e.internalformat,e.type,null);O(e.texInfo,e.target)})}function R(){for(var e=0;e<nt;++e){var n=rt[e];n&&(n.bindCount=0,n.unit=-1,rt[e]=null),t.activeTexture(mr+e),t.bindTexture(fn,null),t.bindTexture(hn,null)}}var L={"don't care":sr,"dont care":sr,nice:cr,fast:ur},D={repeat:Yn,clamp:Kn,mirror:Jn},N={nearest:tr,linear:er},z=ee({mipmap:or,"nearest mipmap nearest":nr,"linear mipmap nearest":rr,"nearest mipmap linear":ir,"linear mipmap linear":or},N),F={none:0,browser:vr},B={uint8:Gn,rgba4:wn,rgb565:Sn,"rgb5 a1":En},U={alpha:vn,luminance:gn,"luminance alpha":yn,rgb:mn,rgba:dn,rgba4:_n,"rgb5 a1":bn,rgb565:xn},V={};e.ext_srgb&&(U.srgb=Cn,U.srgba=kn),e.oes_texture_float&&(B.float32=B.float=qn),e.oes_texture_half_float&&(B.float16=B["half float"]=Mn),e.webgl_depth_texture&&(ee(U,{depth:Tn,"depth stencil":An}),ee(B,{uint16:Hn,uint32:Wn,"depth stencil":On})),e.webgl_compressed_texture_s3tc&&ee(V,{"rgb s3tc dxt1":Pn,"rgba s3tc dxt1":jn,"rgba s3tc dxt3":In,"rgba s3tc dxt5":Rn}),e.webgl_compressed_texture_atc&&ee(V,{"rgb atc":Ln,"rgba atc explicit alpha":Dn,"rgba atc interpolated alpha":Nn}),e.webgl_compressed_texture_pvrtc&&ee(V,{"rgb pvrtc 4bppv1":zn,"rgb pvrtc 2bppv1":Fn,"rgba pvrtc 4bppv1":Bn,"rgba pvrtc 2bppv1":Un}),e.webgl_compressed_texture_etc1&&(V["rgb etc1"]=Vn);var G=Array.prototype.slice.call(t.getParameter(ln)||new Uint32Array(0));Object.keys(V).forEach(function(t){var e=V[t];G.indexOf(e)>=0&&(U[t]=e)});var H=Object.keys(U);n.textureFormats=H;var W=[];Object.keys(U).forEach(function(t){var e=U[t];W[e]=t});var q=[];Object.keys(B).forEach(function(t){var e=B[t];q[e]=t});var Z=[];Object.keys(N).forEach(function(t){var e=N[t];Z[e]=t});var X=[];Object.keys(z).forEach(function(t){var e=z[t];X[e]=t});var Y=[];Object.keys(D).forEach(function(t){var e=D[t];Y[e]=t});var K=H.reduce(function(t,n){var r=U[n];return r===gn||r===vn||r===gn||r===yn||r===Tn||r===An||e.ext_srgb&&(r===Cn||r===kn)?t[r]=r:r===bn||n.indexOf("rgba")>=0?t[r]=dn:t[r]=mn,t},{}),J=[],Q=[],$=0,tt={},nt=n.maxTextureUnits,rt=Array(nt).map(function(){return null});return ee(T.prototype,{bind:function(){var e=this;e.bindCount+=1;var n=e.unit;if(n<0){for(var r=0;r<nt;++r){var i=rt[r];if(i){if(i.bindCount>0)continue;i.unit=-1}rt[r]=e,n=r;break}n>=nt&&me.raise("insufficient number of texture units"),a.profile&&o.maxTextureUnits<n+1&&(o.maxTextureUnits=n+1),e.unit=n,t.activeTexture(mr+n),t.bindTexture(e.target,e.texture)}return n},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&k(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(tt).forEach(function(e){t+=tt[e].stats.size}),t}),{create2D:M,createCube:P,clear:j,getTexture:function(t){return null},restore:I,refresh:R}}function Lt(t,e,n){return Pr[t]*e*n}function Dt(t,e,n,r,i,o){function a(t,e,n){this.target=t,this.texture=e,this.renderbuffer=n;var r=0,i=0;e?(r=e.width,i=e.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function s(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function u(t,e,n){if(t)if(t.texture){var r=t.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);me(i===e&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=t.renderbuffer._renderbuffer;me(a.width===e&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function c(e,n){n&&(n.texture?t.framebufferTexture2D(Ir,e,n.target,n.texture._texture.texture,0):t.framebufferRenderbuffer(Ir,e,Rr,n.renderbuffer._renderbuffer.renderbuffer))}function l(t){var e=Lr,n=null,r=null,i=t;"object"===typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),me.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,me(e===Lr)):"textureCube"===o?(n=i,me(e>=Dr&&e<Dr+6,"invalid cube map target")):"renderbuffer"===o?(r=i,e=Rr):me.raise("invalid regl object for attachment"),new a(e,n,r)}function f(t,e,n,o,s){if(n){var u=r.create2D({width:t,height:e,format:o,type:s});return u._texture.refCount=0,new a(Lr,u,null)}var c=i.create({width:t,height:e,format:o});return c._renderbuffer.refCount=0,new a(Rr,null,c)}function h(t){return t&&(t.texture||t.renderbuffer)}function p(t,e,n){t&&(t.texture?t.texture.resize(e,n):t.renderbuffer&&t.renderbuffer.resize(e,n),t.width=e,t.height=n)}function d(){this.id=O++,T[this.id]=this,this.framebuffer=t.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function v(t){t.colorAttachments.forEach(s),s(t.depthAttachment),s(t.stencilAttachment),s(t.depthStencilAttachment)}function m(e){var n=e.framebuffer;me(n,"must not double destroy framebuffer"),t.deleteFramebuffer(n),e.framebuffer=null,o.framebufferCount--,delete T[e.id]}function g(e){var r;t.bindFramebuffer(Ir,e.framebuffer);var i=e.colorAttachments;for(r=0;r<i.length;++r)c(Nr+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)t.framebufferTexture2D(Ir,Nr+r,Lr,null,0);t.framebufferTexture2D(Ir,Br,Lr,null,0),t.framebufferTexture2D(Ir,zr,Lr,null,0),t.framebufferTexture2D(Ir,Fr,Lr,null,0),c(zr,e.depthAttachment),c(Fr,e.stencilAttachment),c(Br,e.depthStencilAttachment);var o=t.checkFramebufferStatus(Ir);t.isContextLost()||o===Ur||me.raise("framebuffer configuration not supported, status = "+Kr[o]),t.bindFramebuffer(Ir,x.next?x.next.framebuffer:null),x.cur=x.next,t.getError()}function y(t,r){function i(t,r){var o;me(x.next!==s,"can not update framebuffer which is currently in use");var a=0,c=0,p=!0,d=!0,m=null,y=!0,_="rgba",b="uint8",O=1,T=null,A=null,C=null,k=!1;if("number"===typeof t)a=0|t,c=0|r||a;else if(t){me.type(t,"object","invalid arguments for framebuffer");var M=t;if("shape"in M){var P=M.shape;me(Array.isArray(P)&&P.length>=2,"invalid shape for framebuffer"),a=P[0],c=P[1]}else"radius"in M&&(a=c=M.radius),"width"in M&&(a=M.width),"height"in M&&(c=M.height);("color"in M||"colors"in M)&&(m=M.color||M.colors,Array.isArray(m)&&me(1===m.length||e.webgl_draw_buffers,"multiple render targets not supported")),m||("colorCount"in M&&(O=0|M.colorCount,me(O>0,"invalid color buffer count")),"colorTexture"in M&&(y=!!M.colorTexture,_="rgba4"),"colorType"in M&&(b=M.colorType,y?(me(e.oes_texture_float||!("float"===b||"float32"===b),"you must enable OES_texture_float in order to use floating point framebuffer objects"),me(e.oes_texture_half_float||!("half float"===b||"float16"===b),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===b||"float16"===b?(me(e.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),_="rgba16f"):"float"!==b&&"float32"!==b||(me(e.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),_="rgba32f"),me.oneOf(b,S,"invalid color type")),"colorFormat"in M&&(_=M.colorFormat,w.indexOf(_)>=0?y=!0:E.indexOf(_)>=0?y=!1:me.optional(function(){y?me.oneOf(M.colorFormat,w,"invalid color format for texture"):me.oneOf(M.colorFormat,E,"invalid color format for renderbuffer")}))),("depthTexture"in M||"depthStencilTexture"in M)&&(k=!(!M.depthTexture&&!M.depthStencilTexture),me(!k||e.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in M&&("boolean"===typeof M.depth?p=M.depth:(T=M.depth,d=!1)),"stencil"in M&&("boolean"===typeof M.stencil?d=M.stencil:(A=M.stencil,p=!1)),"depthStencil"in M&&("boolean"===typeof M.depthStencil?p=d=M.depthStencil:(C=M.depthStencil,p=!1,d=!1))}else a=c=1;var j=null,I=null,R=null,L=null;if(Array.isArray(m))j=m.map(l);else if(m)j=[l(m)];else for(j=new Array(O),o=0;o<O;++o)j[o]=f(a,c,y,_,b);me(e.webgl_draw_buffers||j.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),me(j.length<=n.maxColorAttachments,"too many color attachments, not supported"),a=a||j[0].width,c=c||j[0].height,T?I=l(T):p&&!d&&(I=f(a,c,k,"depth","uint32")),A?R=l(A):d&&!p&&(R=f(a,c,!1,"stencil","uint8")),C?L=l(C):!T&&!A&&d&&p&&(L=f(a,c,k,"depth stencil","depth stencil")),me(!!T+!!A+!!C<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var D=null;for(o=0;o<j.length;++o)if(u(j[o],a,c),me(!j[o]||j[o].texture&&Gr.indexOf(j[o].texture._texture.format)>=0||j[o].renderbuffer&&Yr.indexOf(j[o].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+o+" is invalid"),j[o]&&j[o].texture){var N=Hr[j[o].texture._texture.format]*Wr[j[o].texture._texture.type];null===D?D=N:me(D===N,"all color attachments much have the same number of bits per pixel.")}return u(I,a,c),me(!I||I.texture&&I.texture._texture.format===Vr||I.renderbuffer&&I.renderbuffer._renderbuffer.format===qr,"invalid depth attachment for framebuffer object"),u(R,a,c),me(!R||R.renderbuffer&&R.renderbuffer._renderbuffer.format===Zr,"invalid stencil attachment for framebuffer object"),u(L,a,c),me(!L||L.texture&&L.texture._texture.format===Xr||L.renderbuffer&&L.renderbuffer._renderbuffer.format===Xr,"invalid depth-stencil attachment for framebuffer object"),v(s),s.width=a,s.height=c,s.colorAttachments=j,s.depthAttachment=I,s.stencilAttachment=R,s.depthStencilAttachment=L,i.color=j.map(h),i.depth=h(I),i.stencil=h(R),i.depthStencil=h(L),i.width=s.width,i.height=s.height,g(s),i}function a(t,e){me(x.next!==s,"can not resize a framebuffer which is currently in use");var n=Math.max(0|t,1),r=Math.max(0|e||n,1);if(n===s.width&&r===s.height)return i;for(var o=s.colorAttachments,a=0;a<o.length;++a)p(o[a],n,r);return p(s.depthAttachment,n,r),p(s.stencilAttachment,n,r),p(s.depthStencilAttachment,n,r),s.width=i.width=n,s.height=i.height=r,g(s),i}var s=new d;return o.framebufferCount++,i(t,r),ee(i,{resize:a,_reglType:"framebuffer",_framebuffer:s,destroy:function(){m(s),v(s)},use:function(t){x.setFBO({framebuffer:i},t)}})}function _(t){function i(t){var n;me(a.indexOf(x.next)<0,"can not update framebuffer which is currently in use");var o={color:null},s=0,u=null,c="rgba",l="uint8",f=1;if("number"===typeof t)s=0|t;else if(t){me.type(t,"object","invalid arguments for framebuffer");var h=t;if("shape"in h){var p=h.shape;me(Array.isArray(p)&&p.length>=2,"invalid shape for framebuffer"),me(p[0]===p[1],"cube framebuffer must be square"),s=p[0]}else"radius"in h&&(s=0|h.radius),"width"in h?(s=0|h.width,"height"in h&&me(h.height===s,"must be square")):"height"in h&&(s=0|h.height);("color"in h||"colors"in h)&&(u=h.color||h.colors,Array.isArray(u)&&me(1===u.length||e.webgl_draw_buffers,"multiple render targets not supported")),u||("colorCount"in h&&(f=0|h.colorCount,me(f>0,"invalid color buffer count")),"colorType"in h&&(me.oneOf(h.colorType,S,"invalid color type"),l=h.colorType),"colorFormat"in h&&(c=h.colorFormat,me.oneOf(h.colorFormat,w,"invalid color format for texture"))),"depth"in h&&(o.depth=h.depth),"stencil"in h&&(o.stencil=h.stencil),"depthStencil"in h&&(o.depthStencil=h.depthStencil)}else s=1;var d;if(u)if(Array.isArray(u))for(d=[],n=0;n<u.length;++n)d[n]=u[n];else d=[u];else{d=Array(f);var v={radius:s,format:c,type:l};for(n=0;n<f;++n)d[n]=r.createCube(v)}for(o.color=Array(d.length),n=0;n<d.length;++n){var m=d[n];me("function"===typeof m&&"textureCube"===m._reglType,"invalid cube map"),s=s||m.width,me(m.width===s&&m.height===s,"invalid cube map shape"),o.color[n]={target:Dr,data:d[n]}}for(n=0;n<6;++n){for(var g=0;g<d.length;++g)o.color[g].target=Dr+n;n>0&&(o.depth=a[0].depth,o.stencil=a[0].stencil,o.depthStencil=a[0].depthStencil),a[n]?a[n](o):a[n]=y(o)}return ee(i,{width:s,height:s,color:d})}function o(t){var e,r=0|t;if(me(r>0&&r<=n.maxCubeMapSize,"invalid radius for cube fbo"),r===i.width)return i;var o=i.color;for(e=0;e<o.length;++e)o[e].resize(r);for(e=0;e<6;++e)a[e].resize(r);return i.width=i.height=r,i}var a=Array(6);return i(t),ee(i,{faces:a,resize:o,_reglType:"framebufferCube",destroy:function(){a.forEach(function(t){t.destroy()})}})}function b(){x.cur=null,x.next=null,x.dirty=!0,Re(T).forEach(function(e){e.framebuffer=t.createFramebuffer(),g(e)})}var x={cur:null,next:null,dirty:!1,setFBO:null},w=["rgba"],E=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&E.push("srgba"),e.ext_color_buffer_half_float&&E.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&E.push("rgba32f");var S=["uint8"];e.oes_texture_half_float&&S.push("half float","float16"),e.oes_texture_float&&S.push("float","float32");var O=0,T={};return ee(x,{getFramebuffer:function(t){if("function"===typeof t&&"framebuffer"===t._reglType){var e=t._framebuffer;if(e instanceof d)return e}return null},create:y,createCube:_,clear:function(){Re(T).forEach(m)},restore:b})}function Nt(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Jr,this.offset=0,this.stride=0,this.divisor=0}function zt(t,e,n,r,i,o,a){function s(e){for(var n=0;n<y.length;++n){var r=y[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}}function u(){return e.oes_vertex_array_object}function c(){return e.angle_instanced_arrays}function l(t){return"function"===typeof t&&t._vao?t._vao:null}function f(t){if(t!==w.currentVAO){var e=u();t?e.bindVertexArrayOES(t.vao):e.bindVertexArrayOES(null),w.currentVAO=t}}function h(e){if(e!==w.currentVAO){if(e)e.bindAttrs();else{for(var n=c(),r=0;r<y.length;++r){var i=y[r];i.buffer?(t.enableVertexAttribArray(r),i.buffer.bind(),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}a.elements?t.bindBuffer($r,a.elements.buffer.buffer):t.bindBuffer($r,null)}w.currentVAO=e}}function p(){Re(x).forEach(function(t){t.destroy()})}function d(){this.id=++b,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var t=u();this.vao=t?t.createVertexArrayOES():null,x[this.id]=this,this.buffers=[]}function v(){u()&&Re(x).forEach(function(t){t.refresh()})}function m(t){function n(t){var r;if(Array.isArray(t))r=t,a.elements&&a.ownsElements&&a.elements.destroy(),a.elements=null,a.ownsElements=!1,a.offset=0,a.count=0,a.instances=-1,a.primitive=4;else{if(me("object"===typeof t,"invalid arguments for create vao"),me("attributes"in t,"must specify attributes for vao"),t.elements){var s=t.elements;a.ownsElements?"function"===typeof s&&"elements"===s._reglType?(a.elements.destroy(),a.ownsElements=!1):(a.elements(s),a.ownsElements=!1):o.getElements(t.elements)?(a.elements=t.elements,a.ownsElements=!1):(a.elements=o.create(t.elements),a.ownsElements=!0)}else a.elements=null,a.ownsElements=!1;r=t.attributes,a.offset=0,a.count=-1,a.instances=-1,a.primitive=4,a.elements&&(a.count=a.elements._elements.vertCount,a.primitive=a.elements._elements.primType),"offset"in t&&(a.offset=0|t.offset),"count"in t&&(a.count=0|t.count),"instances"in t&&(a.instances=0|t.instances),"primitive"in t&&(me(t.primitive in qe,"bad primitive type: "+t.primitive),a.primitive=qe[t.primitive]),me.optional(function(){for(var e=Object.keys(t),n=0;n<e.length;++n)me(ti.indexOf(e[n])>=0,'invalid option for vao: "'+e[n]+'" valid options are '+ti)}),me(Array.isArray(r),"attributes must be an array")}me(r.length<g,"too many attributes"),me(r.length>0,"must specify at least one attribute");var u={},c=a.attributes;c.length=r.length;for(var l=0;l<r.length;++l){var f=r[l],h=c[l]=new Nt,p=f.data||f;if(Array.isArray(p)||te(p)||et(p)){var d;a.buffers[l]&&(d=a.buffers[l],te(p)&&d._buffer.byteLength>=p.byteLength?d.subdata(p):(d.destroy(),a.buffers[l]=null)),a.buffers[l]||(d=a.buffers[l]=i.create(f,Qr,!1,!0)),h.buffer=i.getBuffer(d),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1,u[l]=1}else i.getBuffer(f)?(h.buffer=i.getBuffer(f),h.size=0|h.buffer.dimension,h.normalized=!1,h.type=h.buffer.dtype,h.offset=0,h.stride=0,h.divisor=0,h.state=1):i.getBuffer(f.buffer)?(h.buffer=i.getBuffer(f.buffer),h.size=0|(+f.size||h.buffer.dimension),h.normalized=!!f.normalized||!1,"type"in f?(me.parameter(f.type,Ne,"invalid buffer type"),h.type=Ne[f.type]):h.type=h.buffer.dtype,h.offset=0|(f.offset||0),h.stride=0|(f.stride||0),h.divisor=0|(f.divisor||0),h.state=1,me(h.size>=1&&h.size<=4,"size must be between 1 and 4"),me(h.offset>=0,"invalid offset"),me(h.stride>=0&&h.stride<=255,"stride must be between 0 and 255"),me(h.divisor>=0,"divisor must be positive"),me(!h.divisor||!!e.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in f?(me(l>0,"first attribute must not be a constant"),h.x=+f.x||0,h.y=+f.y||0,h.z=+f.z||0,h.w=+f.w||0,h.state=2):me(!1,"invalid attribute spec for location "+l)}for(var v=0;v<a.buffers.length;++v)!u[v]&&a.buffers[v]&&(a.buffers[v].destroy(),a.buffers[v]=null);return a.refresh(),n}var a=new d;return r.vaoCount+=1,n.destroy=function(){for(var t=0;t<a.buffers.length;++t)a.buffers[t]&&a.buffers[t].destroy();a.buffers.length=0,a.ownsElements&&(a.elements.destroy(),a.elements=null,a.ownsElements=!1),a.destroy()},n._vao=a,n._reglType="vao",n(t)}for(var g=n.maxAttributes,y=new Array(g),_=0;_<g;++_)y[_]=new Nt;var b=0,x={},w={Record:Nt,scope:{},state:y,currentVAO:null,targetVAO:null,restore:u()?v:function(){},createVAO:m,getVAO:l,destroyBuffer:s,setVAO:u()?f:h,clear:u()?p:function(){}};return d.prototype.bindAttrs=function(){for(var e=c(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(Qr,i.buffer.buffer),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),e&&i.divisor&&e.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var a=n.length;a<g;++a)t.disableVertexAttribArray(a);var s=o.getElements(this.elements);s?t.bindBuffer($r,s.buffer.buffer):t.bindBuffer($r,null)},d.prototype.refresh=function(){var t=u();t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),w.currentVAO=null,t.bindVertexArrayOES(null))},d.prototype.destroy=function(){if(this.vao){var t=u();this===w.currentVAO&&(w.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),x[this.id]&&(delete x[this.id],r.vaoCount-=1)},w}function Ft(t,e,n,r){function i(t,e,n,r){this.name=t,this.id=e,this.location=n,this.info=r}function o(t,e){for(var n=0;n<t.length;++n)if(t[n].id===e.id)return void(t[n].location=e.location);t.push(e)}function a(n,r,i){var o=n===ei?l:f,a=o[r];if(!a){var s=e.str(r);a=t.createShader(n),t.shaderSource(a,s),t.compileShader(a),me.shaderError(t,a,s,n,i),o[r]=a}return a}function s(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function u(n,s,u){var c,l,f=a(ei,n.fragId),h=a(ni,n.vertId),p=n.program=t.createProgram();if(t.attachShader(p,f),t.attachShader(p,h),u)for(c=0;c<u.length;++c){var d=u[c];t.bindAttribLocation(p,d[0],d[1])}t.linkProgram(p),me.linkError(t,p,e.str(n.fragId),e.str(n.vertId),s);var v=t.getProgramParameter(p,ri);r.profile&&(n.stats.uniformsCount=v);var m=n.uniforms;for(c=0;c<v;++c)if(l=t.getActiveUniform(p,c))if(l.size>1)for(var g=0;g<l.size;++g){var y=l.name.replace("[0]","["+g+"]");o(m,new i(y,e.id(y),t.getUniformLocation(p,y),l))}else o(m,new i(l.name,e.id(l.name),t.getUniformLocation(p,l.name),l));var _=t.getProgramParameter(p,ii);r.profile&&(n.stats.attributesCount=_);var b=n.attributes;for(c=0;c<_;++c)(l=t.getActiveAttrib(p,c))&&o(b,new i(l.name,e.id(l.name),t.getAttribLocation(p,l.name),l))}function c(){l={},f={};for(var t=0;t<p.length;++t)u(p[t],null,p[t].attributes.map(function(t){return[t.location,t.name]}))}var l={},f={},h={},p=[],d=0;return r.profile&&(n.getMaxUniformsCount=function(){var t=0;return p.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},n.getMaxAttributesCount=function(){var t=0;return p.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);Re(l).forEach(e),l={},Re(f).forEach(e),f={},p.forEach(function(e){t.deleteProgram(e.program)}),p.length=0,h={},n.shaderCount=0},program:function(e,r,i,o){me.command(e>=0,"missing vertex shader",i),me.command(r>=0,"missing fragment shader",i);var a=h[r];a||(a=h[r]={});var c=a[e];if(c&&(c.refCount++,!o))return c;var d=new s(r,e);return n.shaderCount++,u(d,i,o),c||(a[e]=d),p.push(d),ee(d,{destroy:function(){if(--d.refCount<=0){t.deleteProgram(d.program);var e=p.indexOf(d);p.splice(e,1),n.shaderCount--}a[d.vertId].refCount<=0&&(t.deleteShader(f[d.vertId]),delete f[d.vertId],delete h[d.fragId][d.vertId]),Object.keys(h[d.fragId]).length||(t.deleteShader(l[d.fragId]),delete l[d.fragId],delete h[d.fragId])}})},restore:c,shader:a,frag:-1,vert:-1}}function Bt(t,e,n,r,i,o,a){function s(s){var u;null===e.next?(me(i.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),u=ai):(me(null!==e.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),u=e.next.colorAttachments[0].texture._texture.type,me.optional(function(){o.oes_texture_float?(me(u===ai||u===ui,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),u===ui&&me(a.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):me(u===ai,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var c=0,l=0,f=r.framebufferWidth,h=r.framebufferHeight,p=null;te(s)?p=s:s&&(me.type(s,"object","invalid arguments to regl.read()"),c=0|s.x,l=0|s.y,me(c>=0&&c<r.framebufferWidth,"invalid x offset for regl.read"),me(l>=0&&l<r.framebufferHeight,"invalid y offset for regl.read"),f=0|(s.width||r.framebufferWidth-c),h=0|(s.height||r.framebufferHeight-l),p=s.data||null),p&&(u===ai?me(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):u===ui&&me(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),me(f>0&&f+c<=r.framebufferWidth,"invalid width for read pixels"),me(h>0&&h+l<=r.framebufferHeight,"invalid height for read pixels"),n();var d=f*h*4;return p||(u===ai?p=new Uint8Array(d):u===ui&&(p=p||new Float32Array(d))),me.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),me(p.byteLength>=d,"data buffer for regl.read() too small"),t.pixelStorei(si,4),t.readPixels(c,l,f,h,oi,u,p),p}function u(t){var n;return e.setFBO({framebuffer:t.framebuffer},function(){n=s(t)}),n}function c(t){return t&&"framebuffer"in t?u(t):s(t)}return c}function Ut(t){return Array.prototype.slice.call(t)}function Vt(t){return Ut(t).join("")}function Gt(){function e(t){for(var e=0;e<c.length;++e)if(c[e]===t)return u[e];var n="g"+s++;return u.push(n),c.push(t),n}function n(){function t(){n.push.apply(n,Ut(arguments))}function e(){var t="v"+s++;return r.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,Ut(arguments)),n.push(";")),t}var n=[],r=[];return ee(t,{def:e,toString:function(){return Vt([r.length>0?"var "+r.join(",")+";":"",Vt(n)])}})}function r(){function t(t,n){r(t,n,"=",e.def(t,n),";")}var e=n(),r=n(),i=e.toString,o=r.toString;return ee(function(){e.apply(e,Ut(arguments))},{def:e.def,entry:e,exit:r,save:t,set:function(n,r,i){t(n,r),e(n,r,"=",i,";")},toString:function(){return i()+o()}})}function i(){var t=Vt(arguments),e=r(),n=r(),i=e.toString,o=n.toString;return ee(e,{then:function(){return e.apply(e,Ut(arguments)),this},else:function(){return n.apply(n,Ut(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),Vt(["if(",t,"){",i(),"}",e])}})}function o(t,e){function n(){var t="a"+i.length;return i.push(t),t}var i=[];e=e||0;for(var o=0;o<e;++o)n();var a=r(),s=a.toString;return f[t]=ee(a,{arg:n,toString:function(){return Vt(["function(",i.join(),"){",s(),"}"])}})}function a(){var e=['"use strict";',l,"return {"];Object.keys(f).forEach(function(t){e.push('"',t,'":',f[t].toString(),",")}),e.push("}");var n=Vt(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return("undefined"===typeof my||!my||"function"!==typeof my.showToast||!0===my.isFRM?Function.apply(null,u.concat(n)):t.Function.apply(null,u.concat(n))).apply(null,c)}var s=0,u=[],c=[],l=n(),f={};return{global:l,link:e,block:n,proc:o,scope:r,cond:i,compile:a}}function Ht(t){return Array.isArray(t)||te(t)||et(t)}function Wt(t){return t.sort(function(t,e){return t===qi?-1:e===qi?1:t<e?-1:1})}function qt(t,e,n,r){this.thisDep=t,this.contextDep=e,this.propDep=n,this.append=r}function Zt(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function Xt(t){return new qt(!1,!1,!1,t)}function Yt(t,e){var n=t.type;if(n===pi){var r=t.data.length;return new qt(!0,r>=1,r>=2,e)}if(n===gi){var i=t.data;return new qt(i.thisDep,i.contextDep,i.propDep,e)}if(n===yi)return new qt(!1,!1,!1,e);if(n===_i){for(var o=!1,a=!1,s=!1,u=0;u<t.data.length;++u){var c=t.data[u];if(c.type===di)s=!0;else if(c.type===vi)a=!0;else if(c.type===mi)o=!0;else if(c.type===pi){o=!0;var l=c.data;l>=1&&(a=!0),l>=2&&(s=!0)}else c.type===gi&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new qt(o,a,s,e)}return new qt(n===mi,n===vi,n===di,e)}function Kt(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d){function v(t){return t.replace(".","_")}function m(t,e,n){var r=v(t);rt.push(t),nt[r]=et[r]=!!n,it[r]=e}function g(t,e,n){var r=v(t);rt.push(t),Array.isArray(n)?(et[r]=n.slice(),nt[r]=n.slice()):et[r]=nt[r]=n,ot[r]=e}function y(){var t=Gt(),n=t.link,r=t.global;t.id=ut++,t.batchId="0";var i=n(at),o=t.shared={props:"a0"};Object.keys(at).forEach(function(t){o[t]=r.def(i,".",t)}),me.optional(function(){t.CHECK=n(me),t.commandStr=me.guessCommand(),t.command=n(t.commandStr),t.assert=function(t,e,r){t("if(!(",e,"))",this.CHECK,".commandRaise(",n(r),",",this.command,");")},st.invalidBlendCombinations=ra});var a=t.next={},s=t.current={};Object.keys(ot).forEach(function(t){Array.isArray(et[t])&&(a[t]=r.def(o.next,".",t),s[t]=r.def(o.current,".",t))});var u=t.constants={};Object.keys(st).forEach(function(t){u[t]=r.def(JSON.stringify(st[t]))}),t.invoke=function(e,r){switch(r.type){case pi:var i=["this",o.context,o.props,t.batchId];return e.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case di:return e.def(o.props,r.data);case vi:return e.def(o.context,r.data);case mi:return e.def("this",r.data);case gi:return r.data.append(t,e),r.data.ref;case yi:return r.data.toString();case _i:return r.data.map(function(n){return t.invoke(e,n)})}},t.attribCache={};var l={};return t.scopeAttrib=function(t){var r=e.id(t);if(r in l)return l[r];var i=c.scope[r];return i||(i=c.scope[r]=new Y),l[r]=n(i)},t}function _(t){var e,n=t.static,r=t.dynamic;if(Zi in n){var i=!!n[Zi];e=Xt(function(t,e){return i}),e.enable=i}else if(Zi in r){var o=r[Zi];e=Yt(o,function(t,e){return t.invoke(e,o)})}return e}function b(t,e){var n=t.static,r=t.dynamic;if(Xi in n){var i=n[Xi];return i?(i=s.getFramebuffer(i),me.command(i,"invalid framebuffer object"),Xt(function(t,e){var n=t.link(i),r=t.shared;e.set(r.framebuffer,".next",n);var o=r.context;return e.set(o,"."+ro,n+".width"),e.set(o,"."+io,n+".height"),n})):Xt(function(t,e){var n=t.shared;e.set(n.framebuffer,".next","null");var r=n.context;return e.set(r,"."+ro,r+"."+so),e.set(r,"."+io,r+"."+uo),"null"})}if(Xi in r){var o=r[Xi];return Yt(o,function(t,e){var n=t.invoke(e,o),r=t.shared,i=r.framebuffer,a=e.def(i,".getFramebuffer(",n,")");me.optional(function(){t.assert(e,"!"+n+"||"+a,"invalid framebuffer object")}),e.set(i,".next",a);var s=r.context;return e.set(s,"."+ro,a+"?"+a+".width:"+s+"."+so),e.set(s,"."+io,a+"?"+a+".height:"+s+"."+uo),a})}return null}function x(t,e,n){function r(t){if(t in i){var r=i[t];me.commandType(r,"object","invalid "+t,n.commandStr);var a,s,u=!0,c=0|r.x,l=0|r.y;return"width"in r?(a=0|r.width,me.command(a>=0,"invalid "+t,n.commandStr)):u=!1,"height"in r?(s=0|r.height,me.command(s>=0,"invalid "+t,n.commandStr)):u=!1,new qt(!u&&e&&e.thisDep,!u&&e&&e.contextDep,!u&&e&&e.propDep,function(t,e){var n=t.shared.context,i=a;"width"in r||(i=e.def(n,".",ro,"-",c));var o=s;return"height"in r||(o=e.def(n,".",io,"-",l)),[c,l,i,o]})}if(t in o){var f=o[t],h=Yt(f,function(e,n){var r=e.invoke(n,f);me.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)});var i=e.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",ro,"-",o,")"),u=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",io,"-",a,")");return me.optional(function(){e.assert(n,s+">=0&&"+u+">=0","invalid "+t)}),[o,a,s,u]});return e&&(h.thisDep=h.thisDep||e.thisDep,h.contextDep=h.contextDep||e.contextDep,h.propDep=h.propDep||e.propDep),h}return e?new qt(e.thisDep,e.contextDep,e.propDep,function(t,e){var n=t.shared.context;return[0,0,e.def(n,".",ro),e.def(n,".",io)]}):null}var i=t.static,o=t.dynamic,a=r(qi);if(a){var s=a;a=new qt(a.thisDep,a.contextDep,a.propDep,function(t,e){var n=s.append(t,e),r=t.shared.context;return e.set(r,"."+oo,n[2]),e.set(r,"."+ao,n[3]),n})}return{viewport:a,scissor_box:r(Wi)}}function w(t,e){var n=t.static;if("string"===typeof n[Ki]&&"string"===typeof n[Yi]){if(Object.keys(e.dynamic).length>0)return null;var r=e.static,i=Object.keys(r);if(i.length>0&&"number"===typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)me("number"===typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}function E(t,n,r){function i(t){if(t in a){var n=e.id(a[t]);me.optional(function(){l.shader(aa[t],n,me.guessCommand())});var r=Xt(function(){return n});return r.id=n,r}if(t in s){var i=s[t];return Yt(i,function(e,n){var r=e.invoke(n,i),o=n.def(e.shared.strings,".id(",r,")");return me.optional(function(){n(e.shared.shader,".shader(",aa[t],",",o,",",e.command,");")}),o})}return null}var o,a=t.static,s=t.dynamic,u=i(Ki),c=i(Yi),f=null;return Zt(u)&&Zt(c)?(f=l.program(c.id,u.id,null,r),o=Xt(function(t,e){return t.link(f)})):o=new qt(u&&u.thisDep||c&&c.thisDep,u&&u.contextDep||c&&c.contextDep,u&&u.propDep||c&&c.propDep,function(t,e){var n,r=t.shared.shader;n=u?u.append(t,e):e.def(r,".",Ki);var i;i=c?c.append(t,e):e.def(r,".",Yi);var o=r+".program("+i+","+n;return me.optional(function(){o+=","+t.command}),e.def(o+")")}),{frag:u,vert:c,progVar:o,program:f}}function S(t,e){function n(t,n){if(t in r){var o=0|r[t];return n?a.offset=o:a.instances=o,me.command(!n||o>=0,"invalid "+t,e.commandStr),Xt(function(t,e){return n&&(t.OFFSET=o),o})}if(t in i){var c=i[t];return Yt(c,function(e,r){var i=e.invoke(r,c);return n&&(e.OFFSET=i,me.optional(function(){e.assert(r,i+">=0","invalid "+t)})),i})}if(n){if(l)return Xt(function(t,e){return t.OFFSET=0,0});if(s)return new qt(u.thisDep,u.contextDep,u.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.offset:0")})}else if(s)return new qt(u.thisDep,u.contextDep,u.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.instances:-1")});return null}var r=t.static,i=t.dynamic,a={},s=!1,u=function(){if(no in r){var t=r[no];return null!==t&&null===c.getVAO(t)&&(t=c.createVAO(t)),s=!0,a.vao=t,Xt(function(e){var n=c.getVAO(t);return n?e.link(n):"null"})}if(no in i){s=!0;var e=i[no];return Yt(e,function(t,n){var r=t.invoke(n,e);return n.def(t.shared.vao+".getVAO("+r+")")})}return null}(),l=!1,f=function(){if(Ji in r){var t=r[Ji];if(a.elements=t,Ht(t)){var n=a.elements=o.create(t,!0);t=o.getElements(n),l=!0}else t&&(t=o.getElements(t),l=!0,me.command(t,"invalid elements",e.commandStr));var c=Xt(function(e,n){if(t){var r=e.link(t);return e.ELEMENTS=r,r}return e.ELEMENTS=null,null});return c.value=t,c}if(Ji in i){l=!0;var f=i[Ji];return Yt(f,function(t,e){var n=t.shared,r=n.isBufferArgs,i=n.elements,o=t.invoke(e,f),a=e.def("null"),s=e.def(r,"(",o,")"),u=t.cond(s).then(a,"=",i,".createStream(",o,");").else(a,"=",i,".getElements(",o,");");return me.optional(function(){t.assert(u.else,"!"+o+"||"+a,"invalid elements")}),e.entry(u),e.exit(t.cond(s).then(i,".destroyStream(",a,");")),t.ELEMENTS=a,a})}return s?new qt(u.thisDep,u.contextDep,u.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.elements+".getElements("+t.shared.vao+".currentVAO.elements):null")}):null}(),h=n(to,!0),p=function(){if(Qi in r){var t=r[Qi];return a.primitive=t,me.commandParameter(t,qe,"invalid primitve",e.commandStr),Xt(function(e,n){return qe[t]})}if(Qi in i){var n=i[Qi];return Yt(n,function(t,e){var r=t.constants.primTypes,i=t.invoke(e,n);return me.optional(function(){t.assert(e,i+" in "+r,"invalid primitive, must be one of "+Object.keys(qe))}),e.def(r,"[",i,"]")})}return l?Zt(f)?Xt(f.value?function(t,e){return e.def(t.ELEMENTS,".primType")}:function(){return Uo}):new qt(f.thisDep,f.contextDep,f.propDep,function(t,e){var n=t.ELEMENTS;return e.def(n,"?",n,".primType:",Uo)}):s?new qt(u.thisDep,u.contextDep,u.propDep,function(t,e){return e.def(t.shared.vao+".currentVAO?"+t.shared.vao+".currentVAO.primitive:"+Uo)}):null}(),d=function(){if($i in r){var t=0|r[$i];return a.count=t,me.command("number"===typeof t&&t>=0,"invalid vertex count",e.commandStr),Xt(function(){return t})}if($i in i){var n=i[$i];return Yt(n,function(t,e){var r=t.invoke(e,n);return me.optional(function(){t.assert(e,"typeof "+r+'==="number"&&'+r+">=0&&"+r+"===("+r+"|0)","invalid vertex count")}),r})}if(l){if(Zt(f)){if(f)return h?new qt(h.thisDep,h.contextDep,h.propDep,function(t,e){var n=e.def(t.ELEMENTS,".vertCount-",t.OFFSET);return me.optional(function(){t.assert(e,n+">=0","invalid vertex offset/element buffer too small")}),n}):Xt(function(t,e){return e.def(t.ELEMENTS,".vertCount")});var o=Xt(function(){return-1});return me.optional(function(){o.MISSING=!0}),o}var c=new qt(f.thisDep||h.thisDep,f.contextDep||h.contextDep,f.propDep||h.propDep,function(t,e){var n=t.ELEMENTS;return t.OFFSET?e.def(n,"?",n,".vertCount-",t.OFFSET,":-1"):e.def(n,"?",n,".vertCount:-1")});return me.optional(function(){c.DYNAMIC=!0}),c}if(s){return new qt(u.thisDep,u.contextDep,u.propDep,function(t,e){return e.def(t.shared.vao,".currentVAO?",t.shared.vao,".currentVAO.count:-1")})}return null}(),v=n(eo,!1);return{elements:f,primitive:p,count:d,instances:v,offset:h,vao:u,vaoActive:s,elementsActive:l,static:a}}function O(t,e){var n=t.static,i=t.dynamic,o={};return rt.forEach(function(t){function a(e,r){if(t in n){var a=e(n[t]);o[s]=Xt(function(){return a})}else if(t in i){var u=i[t];o[s]=Yt(u,function(t,e){return r(t,e,t.invoke(e,u))})}}var s=v(t);switch(t){case Mi:case xi:case bi:case Fi:case Oi:case Hi:case Ri:case Di:case Ni:case Ci:return a(function(n){return me.commandType(n,"boolean",t,e.commandStr),n},function(e,n,r){return me.optional(function(){e.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+t,e.commandStr)}),r});case Ti:return a(function(n){return me.commandParameter(n,ia,"invalid "+t,e.commandStr),ia[n]},function(e,n,r){var i=e.constants.compareFuncs;return me.optional(function(){e.assert(n,r+" in "+i,"invalid "+t+", must be one of "+Object.keys(ia))}),n.def(i,"[",r,"]")});case Ai:return a(function(t){return me.command(dt(t)&&2===t.length&&"number"===typeof t[0]&&"number"===typeof t[1]&&t[0]<=t[1],"depth range is 2d array",e.commandStr),t},function(t,e,n){return me.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")}),[e.def("+",n,"[0]"),e.def("+",n,"[1]")]});case Si:return a(function(t){me.commandType(t,"object","blend.func",e.commandStr);var n="srcRGB"in t?t.srcRGB:t.src,r="srcAlpha"in t?t.srcAlpha:t.src,i="dstRGB"in t?t.dstRGB:t.dst,o="dstAlpha"in t?t.dstAlpha:t.dst;return me.commandParameter(n,na,s+".srcRGB",e.commandStr),me.commandParameter(r,na,s+".srcAlpha",e.commandStr),me.commandParameter(i,na,s+".dstRGB",e.commandStr),me.commandParameter(o,na,s+".dstAlpha",e.commandStr),me.command(-1===ra.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",e.commandStr),[na[n],na[i],na[r],na[o]]},function(e,n,r){function i(i,a){var s=n.def('"',i,a,'" in ',r,"?",r,".",i,a,":",r,".",i);return me.optional(function(){e.assert(n,s+" in "+o,"invalid "+t+"."+i+a+", must be one of "+Object.keys(na))}),s}var o=e.constants.blendFuncs;me.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")});var a=i("src","RGB"),s=i("dst","RGB");me.optional(function(){var t=e.constants.invalidBlendCombinations;e.assert(n,t+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var u=n.def(o,"[",a,"]"),c=n.def(o,"[",i("src","Alpha"),"]");return[u,n.def(o,"[",s,"]"),c,n.def(o,"[",i("dst","Alpha"),"]")]});case Ei:return a(function(n){return"string"===typeof n?(me.commandParameter(n,K,"invalid "+t,e.commandStr),[K[n],K[n]]):"object"===typeof n?(me.commandParameter(n.rgb,K,t+".rgb",e.commandStr),me.commandParameter(n.alpha,K,t+".alpha",e.commandStr),[K[n.rgb],K[n.alpha]]):void me.commandRaise("invalid blend.equation",e.commandStr)},function(e,n,r){var i=e.constants.blendEquations,o=n.def(),a=n.def(),s=e.cond("typeof ",r,'==="string"');return me.optional(function(){function n(t,n,r){e.assert(t,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(K))}n(s.then,t,r),e.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+t),n(s.else,t+".rgb",r+".rgb"),n(s.else,t+".alpha",r+".alpha")}),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]});case wi:return a(function(t){return me.command(dt(t)&&4===t.length,"blend.color must be a 4d array",e.commandStr),J(4,function(e){return+t[e]})},function(t,e,n){return me.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")}),J(4,function(t){return e.def("+",n,"[",t,"]")})});case Bi:return a(function(t){return me.commandType(t,"number",s,e.commandStr),0|t},function(t,e,n){return me.optional(function(){t.assert(e,"typeof "+n+'==="number"',"invalid stencil.mask")}),e.def(n,"|0")});case Ui:return a(function(n){me.commandType(n,"object",s,e.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return me.commandParameter(r,ia,t+".cmp",e.commandStr),me.commandType(i,"number",t+".ref",e.commandStr),me.commandType(o,"number",t+".mask",e.commandStr),[ia[r],i,o]},function(t,e,n){var r=t.constants.compareFuncs;return me.optional(function(){function i(){t.assert(e,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")}),[e.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Yo),e.def(n,".ref|0"),e.def('"mask" in ',n,"?",n,".mask|0:-1")]});case Vi:case Gi:return a(function(n){me.commandType(n,"object",s,e.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return me.commandParameter(r,oa,t+".fail",e.commandStr),me.commandParameter(i,oa,t+".zfail",e.commandStr),me.commandParameter(o,oa,t+".zpass",e.commandStr),[t===Gi?Go:Vo,oa[r],oa[i],oa[o]]},function(e,n,r){function i(i){return me.optional(function(){e.assert(n,'!("'+i+'" in '+r+")||("+r+"."+i+" in "+o+")","invalid "+t+"."+i+", must be one of "+Object.keys(oa))}),n.def('"',i,'" in ',r,"?",o,"[",r,".",i,"]:",Yo)}var o=e.constants.stencilOps;return me.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[t===Gi?Go:Vo,i("fail"),i("zfail"),i("zpass")]});case Li:return a(function(t){me.commandType(t,"object",s,e.commandStr);var n=0|t.factor,r=0|t.units;return me.commandType(n,"number",s+".factor",e.commandStr),me.commandType(r,"number",s+".units",e.commandStr),[n,r]},function(e,n,r){return me.optional(function(){e.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+t)}),[n.def(r,".factor|0"),n.def(r,".units|0")]});case Pi:return a(function(t){var n=0;return"front"===t?n=Vo:"back"===t&&(n=Go),me.command(!!n,s,e.commandStr),n},function(t,e,n){return me.optional(function(){t.assert(e,n+'==="front"||'+n+'==="back"',"invalid cull.face")}),e.def(n,'==="front"?',Vo,":",Go)});case Ii:return a(function(t){return me.command("number"===typeof t&&t>=r.lineWidthDims[0]&&t<=r.lineWidthDims[1],"invalid line width, must be a positive number between "+r.lineWidthDims[0]+" and "+r.lineWidthDims[1],e.commandStr),t},function(t,e,n){return me.optional(function(){t.assert(e,"typeof "+n+'==="number"&&'+n+">="+r.lineWidthDims[0]+"&&"+n+"<="+r.lineWidthDims[1],"invalid line width")}),n});case ji:return a(function(t){return me.commandParameter(t,sa,s,e.commandStr),sa[t]},function(t,e,n){return me.optional(function(){t.assert(e,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),e.def(n+'==="cw"?'+Ho+":"+Wo)});case ki:return a(function(t){return me.command(dt(t)&&4===t.length,"color.mask must be length 4 array",e.commandStr),t.map(function(t){return!!t})},function(t,e,n){return me.optional(function(){t.assert(e,t.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")}),J(4,function(t){return"!!"+n+"["+t+"]"})});case zi:return a(function(t){me.command("object"===typeof t&&t,s,e.commandStr);var n="value"in t?t.value:1,r=!!t.invert;return me.command("number"===typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",e.commandStr),[n,r]},function(t,e,n){return me.optional(function(){t.assert(e,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")}),[e.def('"value" in ',n,"?+",n,".value:1"),e.def("!!",n,".invert")]})}}),o}function T(t,e){var n=t.static,r=t.dynamic,i={};return Object.keys(n).forEach(function(t){var r,o=n[t];if("number"===typeof o||"boolean"===typeof o)r=Xt(function(){return o});else if("function"===typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=Xt(function(t){return t.link(o)}):"framebuffer"===a||"framebufferCube"===a?(me.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+t+'"',e.commandStr),r=Xt(function(t){return t.link(o.color[0])})):me.commandRaise('invalid data for uniform "'+t+'"',e.commandStr)}else dt(o)?r=Xt(function(e){return e.global.def("[",J(o.length,function(n){return me.command("number"===typeof o[n]||"boolean"===typeof o[n],"invalid uniform "+t,e.commandStr),o[n]}),"]")}):me.commandRaise('invalid or missing data for uniform "'+t+'"',e.commandStr);r.value=o,i[t]=r}),Object.keys(r).forEach(function(t){var e=r[t];i[t]=Yt(e,function(t,n){return t.invoke(n,e)})}),i}function A(t,n){var r=t.static,o=t.dynamic,a={};return Object.keys(r).forEach(function(t){var o=r[t],s=e.id(t),u=new Y;if(Ht(o))u.state=fi,u.buffer=i.getBuffer(i.create(o,lo,!1,!0)),u.type=0;else{var c=i.getBuffer(o);if(c)u.state=fi,u.buffer=c,u.type=0;else if(me.command("object"===typeof o&&o,"invalid data for attribute "+t,n.commandStr),"constant"in o){var l=o.constant;u.buffer="null",u.state=hi,"number"===typeof l?u.x=l:(me.command(dt(l)&&l.length>0&&l.length<=4,"invalid constant for attribute "+t,n.commandStr),ci.forEach(function(t,e){e<l.length&&(u[t]=l[e])}))}else{c=Ht(o.buffer)?i.getBuffer(i.create(o.buffer,lo,!1,!0)):i.getBuffer(o.buffer),me.command(!!c,'missing buffer for attribute "'+t+'"',n.commandStr);var f=0|o.offset;me.command(f>=0,'invalid offset for attribute "'+t+'"',n.commandStr);var h=0|o.stride;me.command(h>=0&&h<256,'invalid stride for attribute "'+t+'", must be integer betweeen [0, 255]',n.commandStr);var p=0|o.size;me.command(!("size"in o)||p>0&&p<=4,'invalid size for attribute "'+t+'", must be 1,2,3,4',n.commandStr);var d=!!o.normalized,v=0;"type"in o&&(me.commandParameter(o.type,Ne,"invalid type for attribute "+t,n.commandStr),v=Ne[o.type]);var m=0|o.divisor;me.optional(function(){"divisor"in o&&(me.command(0===m||Q,'cannot specify divisor for attribute "'+t+'", instancing not supported',n.commandStr),me.command(m>=0,'invalid divisor for attribute "'+t+'"',n.commandStr));var e=n.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(o).forEach(function(n){me.command(r.indexOf(n)>=0,'unknown parameter "'+n+'" for attribute pointer "'+t+'" (valid parameters are '+r+")",e)})}),u.buffer=c,u.state=fi,u.size=p,u.normalized=d,u.type=v||c.dtype,u.offset=f,u.stride=h,u.divisor=m}}a[t]=Xt(function(t,e){var n=t.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(u).forEach(function(t){r[t]=u[t]}),u.buffer&&(r.buffer=t.link(u.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r})}),Object.keys(o).forEach(function(t){function e(e,r){function i(t){r(l[t],"=",o,".",t,"|0;")}var o=e.invoke(r,n),a=e.shared,s=e.constants,u=a.isBufferArgs,c=a.buffer;me.optional(function(){e.assert(r,o+"&&(typeof "+o+'==="object"||typeof '+o+'==="function")&&('+u+"("+o+")||"+c+".getBuffer("+o+")||"+c+".getBuffer("+o+".buffer)||"+u+"("+o+'.buffer)||("constant" in '+o+"&&(typeof "+o+'.constant==="number"||'+a.isArrayLike+"("+o+".constant))))",'invalid dynamic attribute "'+t+'"')});var l={isStream:r.def(!1)},f=new Y;f.state=fi,Object.keys(f).forEach(function(t){l[t]=r.def(""+f[t])});var h=l.buffer,p=l.type;return r("if(",u,"(",o,")){",l.isStream,"=true;",h,"=",c,".createStream(",lo,",",o,");",p,"=",h,".dtype;","}else{",h,"=",c,".getBuffer(",o,");","if(",h,"){",p,"=",h,".dtype;",'}else if("constant" in ',o,"){",l.state,"=",hi,";","if(typeof "+o+'.constant === "number"){',l[ci[0]],"=",o,".constant;",ci.slice(1).map(function(t){return l[t]}).join("="),"=0;","}else{",ci.map(function(t,e){return l[t]+"="+o+".constant.length>"+e+"?"+o+".constant["+e+"]:0;"}).join(""),"}}else{","if(",u,"(",o,".buffer)){",h,"=",c,".createStream(",lo,",",o,".buffer);","}else{",h,"=",c,".getBuffer(",o,".buffer);","}",p,'="type" in ',o,"?",s.glTypes,"[",o,".type]:",h,".dtype;",l.normalized,"=!!",o,".normalized;"),i("size"),i("offset"),i("stride"),i("divisor"),r("}}"),r.exit("if(",l.isStream,"){",c,".destroyStream(",h,");","}"),l}var n=o[t];a[t]=Yt(n,e)}),a}function C(t){var e=t.static,n=t.dynamic,r={};return Object.keys(e).forEach(function(t){var n=e[t];r[t]=Xt(function(t,e){return"number"===typeof n||"boolean"===typeof n?""+n:t.link(n)})}),Object.keys(n).forEach(function(t){var e=n[t];r[t]=Yt(e,function(t,n){return t.invoke(n,e)})}),r}function k(t,e,r,i,o){function a(t){var e=h[t];e&&(d[t]=e)}var s=t.static,u=t.dynamic;me.optional(function(){function t(t){Object.keys(t).forEach(function(t){me.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',o.commandStr)})}var e=[Xi,Yi,Ki,Ji,Qi,to,$i,eo,Zi,no].concat(rt);t(s),t(u)});var l=w(t,e),f=b(t,o),h=x(t,f,o),p=S(t,o),d=O(t,o),m=E(t,o,l);a(qi),a(v(Wi));var g=Object.keys(d).length>0,y={framebuffer:f,draw:p,shader:m,state:d,dirty:g,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(y.profile=_(t,o),y.uniforms=T(r,o),y.drawVAO=y.scopeVAO=p.vao,!y.drawVAO&&m.program&&!l&&n.angle_instanced_arrays&&p.static.elements){var k=!0,M=m.program.attributes.map(function(t){var n=e.static[t];return k=k&&!!n,n});if(k&&M.length>0){var P=c.getVAO(c.createVAO({attributes:M,elements:p.static.elements}));y.drawVAO=new qt(null,null,null,function(t,e){return t.link(P)}),y.useVAO=!0}}return l?y.useVAO=!0:y.attributes=A(e,o),y.context=C(i,o),y}function M(t,e,n){var r=t.shared,i=r.context,o=t.scope();Object.keys(n).forEach(function(r){e.save(i,"."+r);var a=n[r],s=a.append(t,e);Array.isArray(s)?o(i,".",r,"=[",s.join(),"];"):o(i,".",r,"=",s,";")}),e(o)}function P(t,e,n,r){var i,o=t.shared,a=o.gl,s=o.framebuffer;$&&(i=e.def(o.extensions,".webgl_draw_buffers"));var u,c=t.constants,l=c.drawBuffer,f=c.backBuffer;u=n?n.append(t,e):e.def(s,".next"),r||e("if(",u,"!==",s,".cur){"),e("if(",u,"){",a,".bindFramebuffer(",ta,",",u,".framebuffer);"),$&&e(i,".drawBuffersWEBGL(",l,"[",u,".colorAttachments.length]);"),e("}else{",a,".bindFramebuffer(",ta,",null);"),$&&e(i,".drawBuffersWEBGL(",f,");"),e("}",s,".cur=",u,";"),r||e("}")}function j(t,e,n){var r=t.shared,i=r.gl,o=t.current,a=t.next,s=r.current,u=r.next,c=t.cond(s,".dirty");rt.forEach(function(e){var r=v(e);if(!(r in n.state)){var l,f;if(r in a){l=a[r],f=o[r];var h=J(et[r].length,function(t){return c.def(l,"[",t,"]")});c(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(i,".",ot[r],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else{l=c.def(u,".",r);var p=t.cond(l,"!==",s,".",r);c(p),r in it?p(t.cond(l).then(i,".enable(",it[r],");").else(i,".disable(",it[r],");"),s,".",r,"=",l,";"):p(i,".",ot[r],"(",l,");",s,".",r,"=",l,";")}}}),0===Object.keys(n.state).length&&c(s,".dirty=false;"),e(c)}function I(t,e,n,r){var i=t.shared,o=t.current,a=i.current,s=i.gl;Wt(Object.keys(n)).forEach(function(i){var u=n[i];if(!r||r(u)){var c=u.append(t,e);if(it[i]){var l=it[i];Zt(u)?c?e(s,".enable(",l,");"):e(s,".disable(",l,");"):e(t.cond(c).then(s,".enable(",l,");").else(s,".disable(",l,");")),e(a,".",i,"=",c,";")}else if(dt(c)){var f=o[i];e(s,".",ot[i],"(",c,");",c.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(s,".",ot[i],"(",c,");",a,".",i,"=",c,";")}})}function R(t,e){Q&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function L(t,e,n,r,i){function o(){return"undefined"===typeof my||!my||"function"!==typeof my.showToast||!0===my.isFRM?"undefined"===typeof performance?"Date.now()":"performance.now()":"Date.now()"}function a(t){c=e.def(),t(c,"=",o(),";"),"string"===typeof i?t(d,".count+=",i,";"):t(d,".count++;"),p&&(r?(l=e.def(),t(l,"=",m,".getNumPendingQueries();")):t(m,".beginQuery(",d,");"))}function s(t){t(d,".cpuTime+=",o(),"-",c,";"),p&&(r?t(m,".pushScopeStats(",l,",",m,".getNumPendingQueries(),",d,");"):t(m,".endQuery();"))}function u(t){var n=e.def(v,".profile");e(v,".profile=",t,";"),e.exit(v,".profile=",n,";")}var c,l,f,h=t.shared,d=t.stats,v=h.current,m=h.timer,g=n.profile;if(g){if(Zt(g))return void(g.enable?(a(e),s(e.exit),u("true")):u("false"));f=g.append(t,e),u(f)}else f=e.def(v,".profile");var y=t.block();a(y),e("if(",f,"){",y,"}");var _=t.block();s(_),e.exit("if(",f,"){",_,"}")}function D(t,e,n,r,i){function o(t){switch(t){case Oo:case ko:case Io:return 2;case To:case Mo:case Ro:return 3;case Ao:case Po:case Lo:return 4;default:return 1}}function a(n,r,i){function o(){e("if(!",l,".buffer){",u,".enableVertexAttribArray(",c,");}");var n,o=i.type;if(n=i.size?e.def(i.size,"||",r):r,e("if(",l,".type!==",o,"||",l,".size!==",n,"||",d.map(function(t){return l+"."+t+"!=="+i[t]}).join("||"),"){",u,".bindBuffer(",lo,",",h,".buffer);",u,".vertexAttribPointer(",[c,n,o,i.normalized,i.stride,i.offset],");",l,".type=",o,";",l,".size=",n,";",d.map(function(t){return l+"."+t+"="+i[t]+";"}).join(""),"}"),Q){var a=i.divisor;e("if(",l,".divisor!==",a,"){",t.instancing,".vertexAttribDivisorANGLE(",[c,a],");",l,".divisor=",a,";}")}}function a(){e("if(",l,".buffer){",u,".disableVertexAttribArray(",c,");",l,".buffer=null;","}if(",ci.map(function(t,e){return l+"."+t+"!=="+p[e]}).join("||"),"){",u,".vertexAttrib4f(",c,",",p,");",ci.map(function(t,e){return l+"."+t+"="+p[e]+";"}).join(""),"}")}var u=s.gl,c=e.def(n,".location"),l=e.def(s.attributes,"[",c,"]"),f=i.state,h=i.buffer,p=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];f===fi?o():f===hi?a():(e("if(",f,"===",fi,"){"),o(),e("}else{"),a(),e("}"))}var s=t.shared;r.forEach(function(r){var s,u=r.name,c=n.attributes[u];if(c){if(!i(c))return;s=c.append(t,e)}else{if(!i(ua))return;var l=t.scopeAttrib(u);me.optional(function(){t.assert(e,l+".state","missing attribute "+u)}),s={},Object.keys(new Y).forEach(function(t){s[t]=e.def(l,".",t)})}a(t.link(r),o(r.info.type),s)})}function N(t,n,r,i,o,a){for(var s,u=t.shared,c=u.gl,l=0;l<i.length;++l){var f,h=i[l],p=h.name,d=h.info.type,v=r.uniforms[p],m=t.link(h),g=m+".location";if(v){if(!o(v))continue;if(Zt(v)){var y=v.value;if(me.command(null!==y&&"undefined"!==typeof y,'missing uniform "'+p+'"',t.commandStr),d===Fo||d===Bo){me.command("function"===typeof y&&(d===Fo&&("texture2d"===y._reglType||"framebuffer"===y._reglType)||d===Bo&&("textureCube"===y._reglType||"framebufferCube"===y._reglType)),"invalid texture for uniform "+p,t.commandStr);var _=t.link(y._texture||y.color[0]._texture);n(c,".uniform1i(",g,",",_+".bind());"),n.exit(_,".unbind();")}else if(d===Do||d===No||d===zo){me.optional(function(){me.command(dt(y),"invalid matrix for uniform "+p,t.commandStr),me.command(d===Do&&4===y.length||d===No&&9===y.length||d===zo&&16===y.length,"invalid length for matrix uniform "+p,t.commandStr)});var b=t.global.def("new Float32Array(["+Array.prototype.slice.call(y)+"])"),x=2;d===No?x=3:d===zo&&(x=4),n(c,".uniformMatrix",x,"fv(",g,",false,",b,");")}else{switch(d){case So:me.commandType(y,"number","uniform "+p,t.commandStr),s="1f";break;case Oo:me.command(dt(y)&&2===y.length,"uniform "+p,t.commandStr),s="2f";break;case To:me.command(dt(y)&&3===y.length,"uniform "+p,t.commandStr),s="3f";break;case Ao:me.command(dt(y)&&4===y.length,"uniform "+p,t.commandStr),s="4f";break;case jo:me.commandType(y,"boolean","uniform "+p,t.commandStr),s="1i";break;case Co:me.commandType(y,"number","uniform "+p,t.commandStr),s="1i";break;case Io:case ko:me.command(dt(y)&&2===y.length,"uniform "+p,t.commandStr),s="2i";break;case Ro:case Mo:me.command(dt(y)&&3===y.length,"uniform "+p,t.commandStr),s="3i";break;case Lo:case Po:me.command(dt(y)&&4===y.length,"uniform "+p,t.commandStr),s="4i"}n(c,".uniform",s,"(",g,",",dt(y)?Array.prototype.slice.call(y):y,");")}continue}f=v.append(t,n)}else{if(!o(ua))continue;f=n.def(u.uniforms,"[",e.id(p),"]")}d===Fo?(me(!Array.isArray(f),"must specify a scalar prop for textures"),n("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}")):d===Bo&&(me(!Array.isArray(f),"must specify a scalar prop for cube maps"),n("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}")),me.optional(function(){function e(e,r){t.assert(n,e,'bad data or missing for uniform "'+p+'".  '+r)}function r(t){me(!Array.isArray(f),"must not specify an array type for uniform"),e("typeof "+f+'==="'+t+'"',"invalid type, expected "+t)}function i(n,r){Array.isArray(f)?me(f.length===n,"must have length "+n):e(u.isArrayLike+"("+f+")&&"+f+".length==="+n,"invalid vector, should have length "+n,t.commandStr)}function o(n){me(!Array.isArray(f),"must not specify a value type"),e("typeof "+f+'==="function"&&'+f+'._reglType==="texture'+(n===ho?"2d":"Cube")+'"',"invalid texture type",t.commandStr)}switch(d){case Co:r("number");break;case ko:i(2,"number");break;case Mo:i(3,"number");break;case Po:i(4,"number");break;case So:r("number");break;case Oo:i(2,"number");break;case To:i(3,"number");break;case Ao:i(4,"number");break;case jo:r("boolean");break;case Io:i(2,"boolean");break;case Ro:i(3,"boolean");break;case Lo:i(4,"boolean");break;case Do:i(4,"number");break;case No:i(9,"number");break;case zo:i(16,"number");break;case Fo:o(ho);break;case Bo:o(po)}});var w=1;switch(d){case Fo:case Bo:var E=n.def(f,"._texture");n(c,".uniform1i(",g,",",E,".bind());"),n.exit(E,".unbind();");continue;case Co:case jo:s="1i";break;case ko:case Io:s="2i",w=2;break;case Mo:case Ro:s="3i",w=3;break;case Po:case Lo:s="4i",w=4;break;case So:s="1f";break;case Oo:s="2f",w=2;break;case To:s="3f",w=3;break;case Ao:s="4f",w=4;break;case Do:s="Matrix2fv";break;case No:s="Matrix3fv";break;case zo:s="Matrix4fv"}if("M"===s.charAt(0)){n(c,".uniform",s,"(",g,",");var S=Math.pow(d-Do+2,2),O=t.global.def("new Float32Array(",S,")");Array.isArray(f)?n("false,(",J(S,function(t){return O+"["+t+"]="+f[t]}),",",O,")"):n("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",J(S,function(t){return O+"["+t+"]="+f+"["+t+"]"}),",",O,")"),n(");")}else if(w>1){for(var T=[],A=[],C=0;C<w;++C)Array.isArray(f)?A.push(f[C]):A.push(n.def(f+"["+C+"]")),a&&T.push(n.def());a&&n("if(!",t.batchId,"||",T.map(function(t,e){return t+"!=="+A[e]}).join("||"),"){",T.map(function(t,e){return t+"="+A[e]+";"}).join("")),n(c,".uniform",s,"(",g,",",A.join(","),");"),a&&n("}")}else{if(me(!Array.isArray(f),"uniform value must not be an array"),a){var k=n.def();n("if(!",t.batchId,"||",k,"!==",f,"){",k,"=",f,";")}n(c,".uniform",s,"(",g,",",f,");"),a&&n("}")}}}function z(t,e,n,r){function i(i){var o=l[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(t,n):o.append(t,e):e.def(c,".",i)}function o(){function t(){n(m,".drawElementsInstancedANGLE(",[h,d,g,p+"<<(("+g+"-"+li+")>>1)",v],");")}function e(){n(m,".drawArraysInstancedANGLE(",[h,p,d,v],");")}f&&"null"!==f?y?t():(n("if(",f,"){"),t(),n("}else{"),e(),n("}")):e()}function a(){function t(){n(u+".drawElements("+[h,d,g,p+"<<(("+g+"-"+li+")>>1)"]+");")}function e(){n(u+".drawArrays("+[h,p,d]+");")}f&&"null"!==f?y?t():(n("if(",f,"){"),t(),n("}else{"),e(),n("}")):e()}var s=t.shared,u=s.gl,c=s.draw,l=r.draw,f=function(){var i,o=l.elements,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a),l.elementsActive&&a("if("+i+")"+u+".bindBuffer("+fo+","+i+".buffer.buffer);")):(i=a.def(),a(i,"=",c,".",Ji,";","if(",i,"){",u,".bindBuffer(",fo,",",i,".buffer.buffer);}","else if(",s.vao,".currentVAO){",i,"=",t.shared.elements+".getElements("+s.vao,".currentVAO.elements);",tt?"":"if("+i+")"+u+".bindBuffer("+fo+","+i+".buffer.buffer);","}")),i}(),h=i(Qi),p=i(to),d=function(){var i,o=l.count,a=e;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(a=n),i=o.append(t,a),me.optional(function(){o.MISSING&&t.assert(e,"false","missing vertex count"),o.DYNAMIC&&t.assert(a,i+">=0","missing vertex count")})):(i=a.def(c,".",$i),me.optional(function(){t.assert(a,i+">=0","missing vertex count")})),i}();if("number"===typeof d){if(0===d)return}else n("if(",d,"){"),n.exit("}");var v,m;Q&&(v=i(eo),m=t.instancing);var g=f+".type",y=l.elements&&Zt(l.elements)&&!l.vaoActive;Q&&("number"!==typeof v||v>=0)?"string"===typeof v?(n("if(",v,">0){"),o(),n("}else if(",v,"<0){"),a(),n("}")):o():a()}function F(t,e,n,r,i){var o=y(),a=o.proc("body",i);return me.optional(function(){o.commandStr=e.commandStr,o.command=o.link(e.commandStr)}),Q&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),t(o,a,n,r),o.compile().body}function B(t,e,n,r){R(t,e),n.useVAO?n.drawVAO?e(t.shared.vao,".setVAO(",n.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),D(t,e,n,r.attributes,function(){return!0})),N(t,e,n,r.uniforms,function(){return!0},!1),z(t,e,e,n)}function U(t,e){var n=t.proc("draw",1);R(t,n),M(t,n,e.context),P(t,n,e.framebuffer),j(t,n,e),I(t,n,e.state),L(t,n,e,!1,!0);var r=e.shader.progVar.append(t,n);if(n(t.shared.gl,".useProgram(",r,".program);"),e.shader.program)B(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(n){return F(B,t,e,n,1)}),"(",r,");",a,".call(this,a0);"))}Object.keys(e.state).length>0&&n(t.shared.current,".dirty=true;"),t.shared.vao&&n(t.shared.vao,".setVAO(null);")}function V(t,e,n,r){function i(){return!0}t.batchId="a1",R(t,e),D(t,e,n,r.attributes,i),N(t,e,n,r.uniforms,i,!1),z(t,e,e,n)}function G(t,e,n,r){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}R(t,e);var a=n.contextDep,s=e.def(),u=e.def();t.shared.props=u,t.batchId=s;var c=t.scope(),l=t.scope();if(e(c.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",u,"=","a0","[",s,"];",l,"}",c.exit),n.needsContext&&M(t,l,n.context),n.needsFramebuffer&&P(t,l,n.framebuffer),I(t,l,n.state,i),n.profile&&i(n.profile)&&L(t,l,n,!1,!0),r)n.useVAO?n.drawVAO?i(n.drawVAO)?l(t.shared.vao,".setVAO(",n.drawVAO.append(t,l),");"):c(t.shared.vao,".setVAO(",n.drawVAO.append(t,c),");"):c(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(c(t.shared.vao,".setVAO(null);"),D(t,c,n,r.attributes,o),D(t,l,n,r.attributes,i)),N(t,c,n,r.uniforms,o,!1),N(t,l,n,r.uniforms,i,!0),z(t,c,l,n);else{var f=t.global.def("{}"),h=n.shader.progVar.append(t,l),p=l.def(h,".id"),d=l.def(f,"[",p,"]");l(t.shared.gl,".useProgram(",h,".program);","if(!",d,"){",d,"=",f,"[",p,"]=",t.link(function(e){return F(V,t,n,e,2)}),"(",h,");}",d,".call(this,a0[",s,"],",s,");")}}function H(t,e){function n(t){return t.contextDep&&i||t.propDep}var r=t.proc("batch",2);t.batchId="0",R(t,r);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(M(t,r,e.context),o=!1);var a=e.framebuffer,s=!1;a?(a.propDep?i=s=!0:a.contextDep&&i&&(s=!0),s||P(t,r,a)):P(t,r,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),j(t,r,e),I(t,r,e.state,function(t){return!n(t)}),e.profile&&n(e.profile)||L(t,r,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=s;var u=e.shader.progVar;if(u.contextDep&&i||u.propDep)G(t,r,e,null);else{var c=u.append(t,r);if(r(t.shared.gl,".useProgram(",c,".program);"),e.shader.program)G(t,r,e,e.shader.program);else{r(t.shared.vao,".setVAO(null);");var l=t.global.def("{}"),f=r.def(c,".id"),h=r.def(l,"[",f,"]");r(t.cond(h).then(h,".call(this,a0,a1);").else(h,"=",l,"[",f,"]=",t.link(function(n){return F(G,t,e,n,2)}),"(",c,");",h,".call(this,a0,a1);"))}}Object.keys(e.state).length>0&&r(t.shared.current,".dirty=true;"),t.shared.vao&&r(t.shared.vao,".setVAO(null);")}function W(t,n){function r(e){var r=n.shader[e];r&&i.set(o.shader,"."+e,r.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;M(t,i,n.context),n.framebuffer&&n.framebuffer.append(t,i),Wt(Object.keys(n.state)).forEach(function(e){var r=n.state[e],a=r.append(t,i);dt(a)?a.forEach(function(n,r){i.set(t.next[e],"["+r+"]",n)}):i.set(o.next,"."+e,a)}),L(t,i,n,!0,!0),[Ji,to,$i,eo,Qi].forEach(function(e){var r=n.draw[e];r&&i.set(o.draw,"."+e,""+r.append(t,i))}),Object.keys(n.uniforms).forEach(function(r){var a=n.uniforms[r].append(t,i);Array.isArray(a)&&(a="["+a.join()+"]"),i.set(o.uniforms,"["+e.id(r)+"]",a)}),Object.keys(n.attributes).forEach(function(e){var r=n.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new Y).forEach(function(t){i.set(o,"."+t,r[t])})}),n.scopeVAO&&i.set(o.vao,".targetVAO",n.scopeVAO.append(t,i)),r(Yi),r(Ki),Object.keys(n.state).length>0&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function q(t){if("object"===typeof t&&!dt(t)){for(var e=Object.keys(t),n=0;n<e.length;++n)if(xe.isDynamic(t[e[n]]))return!0;return!1}}function Z(t,e,n){function r(t,e){a.forEach(function(n){var r=i[n];if(xe.isDynamic(r)){var o=t.invoke(e,r);e(l,".",n,"=",o,";")}})}var i=e.static[n];if(i&&q(i)){var o=t.global,a=Object.keys(i),s=!1,u=!1,c=!1,l=t.global.def("{}");a.forEach(function(e){var n=i[e];if(xe.isDynamic(n)){"function"===typeof n&&(n=i[e]=xe.unbox(n));var r=Yt(n,null);s=s||r.thisDep,c=c||r.propDep,u=u||r.contextDep}else{switch(o(l,".",e,"="),typeof n){case"number":o(n);break;case"string":o('"',n,'"');break;case"object":Array.isArray(n)&&o("[",n.join(),"]");break;default:o(t.link(n))}o(";")}}),e.dynamic[n]=new xe.DynamicVariable(gi,{thisDep:s,contextDep:u,propDep:c,ref:l,append:r}),delete e.static[n]}}function X(t,e,n,r,i){var o=y();o.stats=o.link(i),Object.keys(e.static).forEach(function(t){Z(o,e,t)}),co.forEach(function(e){Z(o,t,e)});var a=k(t,e,n,r,o);return U(o,a),W(o,a),H(o,a),ee(o.compile(),{destroy:function(){a.shader.program.destroy()}})}var Y=c.Record,K={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(K.min=qo,K.max=Zo);var Q=n.angle_instanced_arrays,$=n.webgl_draw_buffers,tt=n.oes_vertex_array_object,et={dirty:!0,profile:d.profile},nt={},rt=[],it={},ot={};m(bi,go),m(xi,mo),g(wi,"blendColor",[0,0,0,0]),g(Ei,"blendEquationSeparate",[Qo,Qo]),g(Si,"blendFuncSeparate",[Jo,Ko,Jo,Ko]),m(Oi,_o,!0),g(Ti,"depthFunc",$o),g(Ai,"depthRange",[0,1]),g(Ci,"depthMask",!0),g(ki,ki,[!0,!0,!0,!0]),m(Mi,vo),g(Pi,"cullFace",Go),g(ji,ji,Wo),g(Ii,Ii,1),m(Ri,xo),g(Li,"polygonOffset",[0,0]),m(Di,wo),m(Ni,Eo),g(zi,"sampleCoverage",[1,!1]),m(Fi,yo),g(Bi,"stencilMask",-1),g(Ui,"stencilFunc",[Xo,0,-1]),g(Vi,"stencilOpSeparate",[Vo,Yo,Yo,Yo]),g(Gi,"stencilOpSeparate",[Go,Yo,Yo,Yo]),m(Hi,bo),g(Wi,"scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),g(qi,qi,[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var at={gl:t,context:h,strings:e,next:nt,current:et,draw:f,elements:o,buffer:i,shader:l,attributes:c.state,vao:c,uniforms:u,framebuffer:s,extensions:n,timer:p,isBufferArgs:Ht},st={primTypes:qe,compareFuncs:ia,blendFuncs:na,blendEquations:K,stencilOps:oa,glTypes:Ne,orientationType:sa};me.optional(function(){at.isArrayLike=dt}),$&&(st.backBuffer=[Go],st.drawBuffer=J(r.maxDrawbuffers,function(t){return 0===t?[0]:J(t,function(t){return ea+t})}));var ut=0;return{next:nt,current:et,procs:function(){var t=y(),e=t.proc("poll"),i=t.proc("refresh"),o=t.block();e(o),i(o);var a=t.shared,s=a.gl,u=a.next,c=a.current;o(c,".dirty=false;"),P(t,e),P(t,i,null,!0);var l;Q&&(l=t.link(Q)),n.oes_vertex_array_object&&i(t.link(n.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var f=0;f<r.maxAttributes;++f){var h=i.def(a.attributes,"[",f,"]"),p=t.cond(h,".buffer");p.then(s,".enableVertexAttribArray(",f,");",s,".bindBuffer(",lo,",",h,".buffer.buffer);",s,".vertexAttribPointer(",f,",",h,".size,",h,".type,",h,".normalized,",h,".stride,",h,".offset);").else(s,".disableVertexAttribArray(",f,");",s,".vertexAttrib4f(",f,",",h,".x,",h,".y,",h,".z,",h,".w);",h,".buffer=null;"),i(p),Q&&i(l,".vertexAttribDivisorANGLE(",f,",",h,".divisor);")}return i(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(it).forEach(function(n){var r=it[n],a=o.def(u,".",n),l=t.block();l("if(",a,"){",s,".enable(",r,")}else{",s,".disable(",r,")}",c,".",n,"=",a,";"),i(l),e("if(",a,"!==",c,".",n,"){",l,"}")}),Object.keys(ot).forEach(function(n){var r,a,l=ot[n],f=et[n],h=t.block();if(h(s,".",l,"("),dt(f)){var p=f.length;r=t.global.def(u,".",n),a=t.global.def(c,".",n),h(J(p,function(t){return r+"["+t+"]"}),");",J(p,function(t){return a+"["+t+"]="+r+"["+t+"];"}).join("")),e("if(",J(p,function(t){return r+"["+t+"]!=="+a+"["+t+"]"}).join("||"),"){",h,"}")}else r=o.def(u,".",n),a=o.def(c,".",n),h(r,");",c,".",n,"=",r,";"),e("if(",r,"!==",a,"){",h,"}");i(h)}),t.compile()}(),compile:X}}function Jt(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}function Qt(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}function $t(t){function e(t){return L.destroyBuffer(t)}function n(){if(0===W.length)return O&&O.update(),void(J=null);J=we.next(n),p();for(var t=W.length-1;t>=0;--t){var e=W[t];e&&e(k,null,0)}y.flush(),O&&O.update()}function r(){!J&&W.length>0&&(J=we.next(n))}function i(){J&&(we.cancel(n),J=null)}function o(t){t.preventDefault(),b=!0,i(),q.forEach(function(t){t()})}function a(t){y.getError(),b=!1,x.restore(),D.restore(),I.restore(),N.restore(),z.restore(),F.restore(),L.restore(),O&&O.restore(),B.procs.refresh(),r(),Z.forEach(function(t){t()})}function s(){W.length=0,i(),!Q&&H&&(H.removeEventListener(ga,o),H.removeEventListener(ya,a)),D.clear(),F.clear(),z.clear(),L.clear(),N.clear(),R.clear(),I.clear(),O&&O.clear(),X.forEach(function(t){t()})}function u(t){function e(t,e){var n={},r={};return Object.keys(t).forEach(function(i){var o=t[i];if(xe.isDynamic(o))return void(r[i]=xe.unbox(o,i));if(e&&Array.isArray(o))for(var a=0;a<o.length;++a)if(xe.isDynamic(o[a]))return void(r[i]=xe.unbox(o,i));n[i]=o}),{dynamic:r,static:n}}function n(t){for(;p.length<t;)p.push(null);return p}function r(t,e){var r;if(b&&me.raise("context lost"),"function"===typeof t)return h.call(this,null,t,0);if("function"===typeof e)if("number"===typeof t)for(r=0;r<t;++r)h.call(this,null,e,r);else{if(!Array.isArray(t))return h.call(this,t,e,0);for(r=0;r<t.length;++r)h.call(this,t[r],e,r)}else if("number"===typeof t){if(t>0)return f.call(this,n(0|t),0|t)}else{if(!Array.isArray(t))return l.call(this,t);if(t.length)return f.call(this,t,t.length)}}me(!!t,"invalid args to regl({...})"),me.type(t,"object","invalid args to regl({...})");var i=e(t.context||{},!0),o=e(t.uniforms||{},!0),a=e(t.attributes||{},!1),s=e(function(t){function e(t){if(t in n){var e=n[t];delete n[t],Object.keys(e).forEach(function(r){n[t+"."+r]=e[r]})}}var n=ee({},t);return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),"vao"in t&&(n.vao=t.vao),n}(t),!1),u={gpuTime:0,cpuTime:0,count:0},c=B.compile(s,a,o,i,u),l=c.draw,f=c.batch,h=c.scope,p=[];return ee(r,{stats:u,destroy:function(){c.destroy()}})}function c(t,e){var n=0;B.procs.poll();var r=e.color;r&&(y.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=pa),"depth"in e&&(y.clearDepth(+e.depth),n|=da),"stencil"in e&&(y.clearStencil(0|e.stencil),n|=va),me(!!n,"called regl.clear with no buffer specified"),y.clear(n)}function l(t){if(me("object"===typeof t&&t,"regl.clear() takes an object as input"),"framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;e<6;++e)$(ee({framebuffer:t.framebuffer.faces[e]},t),c);else $(t,c);else c(null,t)}function f(t){function e(){function e(){var t=Qt(W,e);W[t]=W[W.length-1],W.length-=1,W.length<=0&&i()}var n=Qt(W,t);me(n>=0,"cannot cancel a frame twice"),W[n]=e}return me.type(t,"function","regl.frame() callback must be a function"),W.push(t),r(),{cancel:e}}function h(){var t=G.viewport,e=G.scissor_box;t[0]=t[1]=e[0]=e[1]=0,k.viewportWidth=k.framebufferWidth=k.drawingBufferWidth=t[2]=e[2]=y.drawingBufferWidth,k.viewportHeight=k.framebufferHeight=k.drawingBufferHeight=t[3]=e[3]=y.drawingBufferHeight}function p(){k.tick+=1,k.time=v(),h(),B.procs.poll()}function d(){N.refresh(),h(),B.procs.refresh(),O&&O.update()}function v(){return(Se()-T)/1e3}function m(t,e){me.type(e,"function","listener callback must be a function");var n;switch(t){case"frame":return f(e);case"lost":n=q;break;case"restore":n=Z;break;case"destroy":n=X;break;default:me.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(e),{cancel:function(){for(var t=0;t<n.length;++t)if(n[t]===e)return n[t]=n[n.length-1],void n.pop()}}}var g=Y(t);if(!g)return null;var y=g.gl,_=y.getContextAttributes(),b=y.isContextLost(),x=K(y,g);if(!x)return null;var w=V(),E=Jt(),S=x.extensions,O=ha(y,S),T=Se(),A=y.drawingBufferWidth,C=y.drawingBufferHeight,k={tick:0,time:0,viewportWidth:A,viewportHeight:C,framebufferWidth:A,framebufferHeight:C,drawingBufferWidth:A,drawingBufferHeight:C,pixelRatio:g.pixelRatio},M={},P={elements:null,primitive:4,count:-1,offset:0,instances:-1},j=Ie(y,S),I=ft(y,E,g,e),R=ht(y,S,I,E),L=zt(y,S,j,E,I,R,P),D=Ft(y,w,E,g),N=Rt(y,S,j,function(){B.procs.poll()},k,E,g),z=jr(y,S,j,E,g),F=Dt(y,S,j,N,z,E),B=Kt(y,w,S,j,I,R,N,F,M,L,D,P,k,O,g),U=Bt(y,F,B.procs.poll,k,_,S,j),G=B.next,H=y.canvas,W=[],q=[],Z=[],X=[g.onDestroy],J=null,Q="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM;!Q&&H&&(H.addEventListener(ga,o,!1),H.addEventListener(ya,a,!1));var $=F.setFBO=u({framebuffer:xe.define.call(null,_a,"framebuffer")});d();var tt=ee(u,{clear:l,prop:xe.define.bind(null,_a),context:xe.define.bind(null,ba),this:xe.define.bind(null,xa),draw:u({}),buffer:function(t){return I.create(t,ma,!1,!1)},elements:function(t){return R.create(t,!1)},texture:N.create2D,cube:N.createCube,renderbuffer:z.create,framebuffer:F.create,framebufferCube:F.createCube,vao:L.createVAO,attributes:_,frame:f,on:m,limits:j,hasExtension:function(t){return j.extensions.indexOf(t.toLowerCase())>=0},read:U,destroy:s,_gl:y,_refresh:d,poll:function(){p(),O&&O.update()},now:v,stats:E});return g.onDone(null,tt),tt}var te=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},ee=function(t,e){for(var n=Object.keys(e),r=0;r<n.length;++r)t[n[r]]=e[n[r]];return t},ne="\n",re=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"],ie=33071,oe=9728,ae=9984,se=9985,ue=9986,ce=9987,le=5126,fe=32819,he=32820,pe=33635,de=34042,ve={};ve[5120]=ve[5121]=1,ve[5122]=ve[5123]=ve[36193]=ve[pe]=ve[fe]=ve[he]=2,ve[5124]=ve[5125]=ve[le]=ve[de]=4;var me=ee(r,{optional:k,raise:n,commandRaise:O,command:T,parameter:o,commandParameter:A,constructor:f,type:u,commandType:C,isTypedArray:a,nni:c,oneOf:l,shaderError:x,linkError:w,callSite:g,saveCommandRef:E,saveDrawInfo:S,framebufferFormat:M,guessCommand:m,texture2D:I,textureCube:R}),ge=0,ye=0,_e=5,be=6,xe={DynamicVariable:L,define:F,isDynamic:B,unbox:U,accessor:z},we={next:"function"===typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"===typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},Ee="undefined"!==typeof my&&!!my&&"function"===typeof my.showToast&&!0!==my.isFRM,Se=Ee?function(){return+new Date}:"undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Oe=5120,Te=5121,Ae=5122,Ce=5123,ke=5124,Me=5125,Pe=5126,je=tt();je.zero=tt();var Ie=function(t,e){var n=1;e.ext_texture_filter_anisotropic&&(n=t.getParameter(34047));var r=1,i=1;e.webgl_draw_buffers&&(r=t.getParameter(34852),i=t.getParameter(36063));var o=!!e.oes_texture_float;if(o){var a=t.createTexture();t.bindTexture(3553,a),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var s=t.createFramebuffer();if(t.bindFramebuffer(36160,s),t.framebufferTexture2D(36160,36064,3553,a,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var u=je.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,u),t.getError()?o=!1:(t.deleteFramebuffer(s),t.deleteTexture(a),o=1===u[0]),je.freeType(u)}}var c="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),l=!0;if(!c){var f=t.createTexture(),h=je.allocType(5121,36);t.activeTexture(33984),t.bindTexture(34067,f),t.texImage2D(34069,0,6408,3,3,0,6408,5121,h),je.freeType(h),t.bindTexture(34067,null),t.deleteTexture(f),l=!t.getError()}return{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:o,npotTextureCube:l}},Re=function(t){return Object.keys(t).map(function(e){return t[e]})},Le={shape:st,flatten:at},De={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ne={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ze={dynamic:35048,stream:35040,static:35044},Fe=Le.flatten,Be=Le.shape,Ue=35044,Ve=35040,Ge=5121,He=5126,We=[];We[5120]=1,We[5122]=2,We[5124]=4,We[5121]=1,We[5123]=2,We[5125]=4,We[5126]=4;var qe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Ze=0,Xe=1,Ye=4,Ke=5120,Je=5121,Qe=5122,$e=5123,tn=5124,en=5125,nn=34963,rn=35040,on=35044,an=new Float32Array(1),sn=new Uint32Array(an.buffer),un=5123,cn=function(t){return!(t&t-1)&&!!t},ln=34467,fn=3553,hn=34067,pn=34069,dn=6408,vn=6406,mn=6407,gn=6409,yn=6410,_n=32854,bn=32855,xn=36194,wn=32819,En=32820,Sn=33635,On=34042,Tn=6402,An=34041,Cn=35904,kn=35906,Mn=36193,Pn=33776,jn=33777,In=33778,Rn=33779,Ln=35986,Dn=35987,Nn=34798,zn=35840,Fn=35841,Bn=35842,Un=35843,Vn=36196,Gn=5121,Hn=5123,Wn=5125,qn=5126,Zn=10242,Xn=10243,Yn=10497,Kn=33071,Jn=33648,Qn=10240,$n=10241,tr=9728,er=9729,nr=9984,rr=9985,ir=9986,or=9987,ar=33170,sr=4352,ur=4353,cr=4354,lr=34046,fr=3317,hr=37440,pr=37441,dr=37443,vr=37444,mr=33984,gr=[nr,ir,rr,or],yr=[0,gn,yn,mn,dn],_r={};_r[gn]=_r[vn]=_r[Tn]=1,_r[An]=_r[yn]=2,_r[mn]=_r[Cn]=3,_r[dn]=_r[kn]=4;var br=vt("HTMLCanvasElement"),xr=vt("OffscreenCanvas"),wr=vt("CanvasRenderingContext2D"),Er=vt("ImageBitmap"),Sr=vt("HTMLImageElement"),Or=vt("HTMLVideoElement"),Tr=Object.keys(De).concat([br,xr,wr,Er,Sr,Or]),Ar=[];Ar[Gn]=1,Ar[qn]=4,Ar[Mn]=2,Ar[Hn]=2,Ar[Wn]=4;var Cr=[];Cr[_n]=2,Cr[bn]=2,Cr[xn]=2,Cr[An]=4,Cr[Pn]=.5,Cr[jn]=.5,Cr[In]=1,Cr[Rn]=1,Cr[Ln]=.5,Cr[Dn]=1,Cr[Nn]=1,Cr[zn]=.5,Cr[Fn]=.25,Cr[Bn]=.5,Cr[Un]=.25,Cr[Vn]=.5;var kr=36161,Mr=32854,Pr=[];Pr[Mr]=2,Pr[32855]=2,Pr[36194]=2,Pr[33189]=2,Pr[36168]=1,Pr[34041]=4,Pr[35907]=4,Pr[34836]=16,Pr[34842]=8,Pr[34843]=6;var jr=function(t,e,n,r,i){function o(t){this.id=f++,this.refCount=1,this.renderbuffer=t,this.format=Mr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function a(e){var n=e.renderbuffer;me(n,"must not double destroy renderbuffer"),t.bindRenderbuffer(kr,null),t.deleteRenderbuffer(n),e.renderbuffer=null,e.refCount=0,delete h[e.id],r.renderbufferCount--}function s(e,a){function s(e,r){var o=0,a=0,u=Mr;if("object"===typeof e&&e){var h=e;if("shape"in h){var p=h.shape;me(Array.isArray(p)&&p.length>=2,"invalid renderbuffer shape"),o=0|p[0],a=0|p[1]}else"radius"in h&&(o=a=0|h.radius),"width"in h&&(o=0|h.width),"height"in h&&(a=0|h.height);"format"in h&&(me.parameter(h.format,c,"invalid renderbuffer format"),u=c[h.format])}else"number"===typeof e?(o=0|e,a="number"===typeof r?0|r:o):e?me.raise("invalid arguments to renderbuffer constructor"):o=a=1;if(me(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),o!==f.width||a!==f.height||u!==f.format)return s.width=f.width=o,s.height=f.height=a,f.format=u,t.bindRenderbuffer(kr,f.renderbuffer),t.renderbufferStorage(kr,u,o,a),me(0===t.getError(),"invalid render buffer format"),i.profile&&(f.stats.size=Lt(f.format,f.width,f.height)),s.format=l[f.format],s}function u(e,r){var o=0|e,a=0|r||o;return o===f.width&&a===f.height?s:(me(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),s.width=f.width=o,s.height=f.height=a,t.bindRenderbuffer(kr,f.renderbuffer),t.renderbufferStorage(kr,f.format,o,a),me(0===t.getError(),"invalid render buffer format"),i.profile&&(f.stats.size=Lt(f.format,f.width,f.height)),s)}var f=new o(t.createRenderbuffer());return h[f.id]=f,r.renderbufferCount++,s(e,a),s.resize=u,s._reglType="renderbuffer",s._renderbuffer=f,i.profile&&(s.stats=f.stats),s.destroy=function(){f.decRef()},s}function u(){Re(h).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(kr,e.renderbuffer),t.renderbufferStorage(kr,e.format,e.width,e.height)}),t.bindRenderbuffer(kr,null)}var c={rgba4:Mr,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(c.srgba=35907),e.ext_color_buffer_half_float&&(c.rgba16f=34842,c.rgb16f=34843),e.webgl_color_buffer_float&&(c.rgba32f=34836);var l=[];Object.keys(c).forEach(function(t){var e=c[t];l[e]=t});var f=0,h={};return o.prototype.decRef=function(){--this.refCount<=0&&a(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var t=0;return Object.keys(h).forEach(function(e){t+=h[e].stats.size}),t}),{create:s,clear:function(){Re(h).forEach(a)},restore:u}},Ir=36160,Rr=36161,Lr=3553,Dr=34069,Nr=36064,zr=36096,Fr=36128,Br=33306,Ur=36053,Vr=6402,Gr=[6407,6408],Hr=[];Hr[6408]=4,Hr[6407]=3;var Wr=[];Wr[5121]=1,Wr[5126]=4,Wr[36193]=2;var qr=33189,Zr=36168,Xr=34041,Yr=[32854,32855,36194,35907,34842,34843,34836],Kr={};Kr[Ur]="complete",Kr[36054]="incomplete attachment",Kr[36057]="incomplete dimensions",Kr[36055]="incomplete, missing attachment",Kr[36061]="unsupported";var Jr=5126,Qr=34962,$r=34963,ti=["attributes","elements","offset","count","primitive","instances"],ei=35632,ni=35633,ri=35718,ii=35721,oi=6408,ai=5121,si=3333,ui=5126,ci="xyzw".split(""),li=5121,fi=1,hi=2,pi=0,di=1,vi=2,mi=3,gi=4,yi=5,_i=6,bi="dither",xi="blend.enable",wi="blend.color",Ei="blend.equation",Si="blend.func",Oi="depth.enable",Ti="depth.func",Ai="depth.range",Ci="depth.mask",ki="colorMask",Mi="cull.enable",Pi="cull.face",ji="frontFace",Ii="lineWidth",Ri="polygonOffset.enable",Li="polygonOffset.offset",Di="sample.alpha",Ni="sample.enable",zi="sample.coverage",Fi="stencil.enable",Bi="stencil.mask",Ui="stencil.func",Vi="stencil.opFront",Gi="stencil.opBack",Hi="scissor.enable",Wi="scissor.box",qi="viewport",Zi="profile",Xi="framebuffer",Yi="vert",Ki="frag",Ji="elements",Qi="primitive",$i="count",to="offset",eo="instances",no="vao",ro=Xi+"Width",io=Xi+"Height",oo=qi+"Width",ao=qi+"Height",so="drawingBufferWidth",uo="drawingBufferHeight",co=[Si,Ei,Ui,Vi,Gi,zi,qi,Wi,Li],lo=34962,fo=34963,ho=3553,po=34067,vo=2884,mo=3042,go=3024,yo=2960,_o=2929,bo=3089,xo=32823,wo=32926,Eo=32928,So=5126,Oo=35664,To=35665,Ao=35666,Co=5124,ko=35667,Mo=35668,Po=35669,jo=35670,Io=35671,Ro=35672,Lo=35673,Do=35674,No=35675,zo=35676,Fo=35678,Bo=35680,Uo=4,Vo=1028,Go=1029,Ho=2304,Wo=2305,qo=32775,Zo=32776,Xo=519,Yo=7680,Ko=0,Jo=1,Qo=32774,$o=513,ta=36160,ea=36064,na={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},ra=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ia={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},oa={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},aa={frag:35632,vert:35633},sa={cw:Ho,ccw:Wo},ua=new qt(!1,!1,!1,function(){}),ca=34918,la=34919,fa=35007,ha=function(t,e){function n(){return f.pop()||e.ext_disjoint_timer_query.createQueryEXT()}function r(t){f.push(t)}function i(t){var r=n();e.ext_disjoint_timer_query.beginQueryEXT(fa,r),h.push(r),c(h.length-1,h.length,t)}function o(){e.ext_disjoint_timer_query.endQueryEXT(fa)}function a(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}function s(){return p.pop()||new a}function u(t){p.push(t)}function c(t,e,n){var r=s();r.startQueryIndex=t,r.endQueryIndex=e,r.sum=0,r.stats=n,d.push(r)}function l(){var t,n,i=h.length;if(0!==i){m.length=Math.max(m.length,i+1),v.length=Math.max(v.length,i+1),v[0]=0,m[0]=0;var o=0;for(t=0,n=0;n<h.length;++n){var a=h[n];e.ext_disjoint_timer_query.getQueryObjectEXT(a,la)?(o+=e.ext_disjoint_timer_query.getQueryObjectEXT(a,ca),r(a)):h[t++]=a,v[n+1]=o,m[n+1]=t}for(h.length=t,t=0,n=0;n<d.length;++n){var s=d[n],c=s.startQueryIndex,l=s.endQueryIndex;s.sum+=v[l]-v[c];var f=m[c],p=m[l];p===f?(s.stats.gpuTime+=s.sum/1e6,u(s)):(s.startQueryIndex=f,s.endQueryIndex=p,d[t++]=s)}d.length=t}}if(!e.ext_disjoint_timer_query)return null;var f=[],h=[],p=[],d=[],v=[],m=[];return{beginQuery:i,endQuery:o,pushScopeStats:c,update:l,getNumPendingQueries:function(){return h.length},clear:function(){f.push.apply(f,h);for(var t=0;t<f.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(f[t]);h.length=0,f.length=0},restore:function(){h.length=0,f.length=0}}},pa=16384,da=256,va=1024,ma=34962,ga="webglcontextlost",ya="webglcontextrestored",_a=1,ba=2,xa=3;return $t})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(515),i=n(310),o=n(1254),a=n(1255);n.d(e,"Interpreter",function(){return r.a}),n.d(e,"vm",function(){return i}),n.d(e,"evaluate",function(){return o.a}),n.d(e,"Function",function(){return a.a}),e.default=o.a},function(t,e,n){t.exports=n.p+"static/media/acorn.222268ea.mjs"},function(t,e,n){"use strict";function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){var e="function"===typeof Map?new Map:void 0;return(i=function(t){function n(){return a(t,arguments,c(this).constructor)}if(null===t||!s(t))return t;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,t)})(t)}function o(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t,e,n){return a=o()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=Function.bind.apply(t,r),o=new i;return n&&u(o,n.prototype),o},a.apply(null,arguments)}function s(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return d}),n.d(e,"c",function(){return v}),n.d(e,"b",function(){return m}),n.d(e,"d",function(){return g});var l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(i(Error)),f=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(i(SyntaxError)),h=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(i(ReferenceError)),p=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(i(TypeError)),d=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(l),v=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(f),m=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e}(h),g={UnknownError:[3001,"%0",d],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",d],NodeTypeSyntaxError:[1001,"Unknown node type: %0",m],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",m],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",m],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",m],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",m],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",m],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",m],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",m],ParamTypeSyntaxError:[1009,"Unknown param type: %0",m],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",m],FunctionUndefinedReferenceError:[2001,"%0 is not a function",h],VariableUndefinedReferenceError:[2002,"%0 is not defined",h],IsNotConstructor:[2003,"%0 is not a constructor",p]}},function(t,e,n){"use strict";var r=n(310);e.a=function(t,e,n){return Object(r.runInContext)(t,e,n)}},function(t,e,n){"use strict";var r=n(310);e.a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.pop();return Object(r.compileFunction)(i||"",e)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(e,n){Object(r.a)(this,t);var i=n.buffer,o=n.offset,a=n.stride,s=n.normalized,u=n.size,c=n.divisor;this.buffer=i,this.attribute={buffer:i.get(),offset:o||0,stride:a||0,normalized:s||!1,divisor:c||0},u&&(this.attribute.size=u)}return Object(i.a)(t,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(t){this.buffer.subData(t)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(11),a=n(213),s=function(){function t(e,n){Object(r.a)(this,t);var i=n.data,s=n.usage,u=n.type;this.buffer=e.buffer({data:i,usage:a.m[s||o.t.STATIC_DRAW],type:a.e[u||o.t.UNSIGNED_BYTE]})}return Object(i.a)(t,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(t){var e=t.data,n=t.offset;this.buffer.subdata(e,n)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(1),o=n(11),a=n(213),s=function(){function t(e,n){Object(r.a)(this,t);var i=n.data,s=n.usage,u=n.type,c=n.count;this.elements=e.elements({data:i,usage:a.m[s||o.t.STATIC_DRAW],type:a.e[u||o.t.UNSIGNED_BYTE],count:c})}return Object(i.a)(t,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(t){var e=t.data;this.elements.subdata(e)}},{key:"destroy",value:function(){}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(){function t(e,n){Object(r.a)(this,t);var i=n.width,o=n.height,a=n.color,s=n.colors,u={width:i,height:o};Array.isArray(s)&&(u.colors=s.map(function(t){return t.get()})),a&&"boolean"!==typeof a&&(u.color=a.get()),this.framebuffer=e.framebuffer(u)}return Object(i.a)(t,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.framebuffer.resize(e,n)}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(83),i=n(10),o=n(0),a=n(1),s=n(6),u=n(11),c=n(19),l=(n.n(c),n(213)),f=function(){function t(e,n){Object(o.a)(this,t),Object(s.a)(this,"destroyed",!1),Object(s.a)(this,"uniforms",{}),this.reGl=e;var r=n.vs,i=n.fs,a=n.attributes,c=n.uniforms,f=n.primitive,h=n.count,p=n.elements,d=n.depth,v=n.cull,m=n.instances,g={};this.options=n,c&&(this.uniforms=this.extractUniforms(c),Object.keys(c).forEach(function(t){g[t]=e.prop(t)}));var y={};Object.keys(a).forEach(function(t){y[t]=a[t].get()});var _={attributes:y,frag:i,uniforms:g,vert:r,colorMask:e.prop("colorMask"),lineWidth:1,blend:{enable:e.prop("blend.enable"),func:e.prop("blend.func"),equation:e.prop("blend.equation"),color:e.prop("blend.color")},stencil:{enable:e.prop("stencil.enable"),mask:e.prop("stencil.mask"),func:e.prop("stencil.func"),opFront:e.prop("stencil.opFront"),opBack:e.prop("stencil.opBack")},primitive:l.j[void 0===f?u.t.TRIANGLES:f]};m&&(_.instances=m),h?_.count=h:p&&(_.elements=p.get()),this.initDepthDrawParams({depth:d},_),this.initCullDrawParams({cull:v},_),this.drawCommand=e(_),this.drawParams=_}return Object(a.a)(t,[{key:"updateAttributesAndElements",value:function(t,e){var n={};Object.keys(t).forEach(function(e){n[e]=t[e].get()}),this.drawParams.attributes=n,this.drawParams.elements=e.get(),this.drawCommand=this.reGl(this.drawParams)}},{key:"updateAttributes",value:function(t){var e={};Object.keys(t).forEach(function(n){e[n]=t[n].get()}),this.drawParams.attributes=e,this.drawCommand=this.reGl(this.drawParams)}},{key:"addUniforms",value:function(t){this.uniforms=Object(i.a)(Object(i.a)({},this.uniforms),this.extractUniforms(t))}},{key:"draw",value:function(t,e){if(!this.drawParams.attributes||0!==Object.keys(this.drawParams.attributes).length){var n=Object(i.a)(Object(i.a)({},this.uniforms),this.extractUniforms(t.uniforms||{})),o={};Object.keys(n).forEach(function(t){var e=Object(r.a)(n[t]);"boolean"===e||"number"===e||Array.isArray(n[t])||n[t].BYTES_PER_ELEMENT?o[t]=n[t]:o[t]=n[t].get()}),o.blend=e?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(t),o.stencil=this.getStencilDrawParams(t),o.colorMask=this.getColorMaskDrawParams(t,e),this.drawCommand(o)}}},{key:"destroy",value:function(){var t,e;null===(t=this.drawParams)||void 0===t||null===(e=t.elements)||void 0===e||e.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(t){null===t||void 0===t||t.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(t,e){var n=t.depth;n&&(e.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:l.f[n.func||u.t.LESS],range:n.range||[0,1]})}},{key:"getBlendDrawParams",value:function(t){var e=t.blend,n=e||{},r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;return{enable:!!r,func:{srcRGB:l.b[i&&i.srcRGB||u.t.SRC_ALPHA],srcAlpha:l.b[i&&i.srcAlpha||u.t.SRC_ALPHA],dstRGB:l.b[i&&i.dstRGB||u.t.ONE_MINUS_SRC_ALPHA],dstAlpha:l.b[i&&i.dstAlpha||u.t.ONE_MINUS_SRC_ALPHA]},equation:{rgb:l.a[o&&o.rgb||u.t.FUNC_ADD],alpha:l.a[o&&o.alpha||u.t.FUNC_ADD]},color:s}}},{key:"getStencilDrawParams",value:function(t){var e=t.stencil,n=e||{},r=n.enable,o=n.mask,a=void 0===o?-1:o,s=n.func,c=void 0===s?{cmp:u.t.ALWAYS,ref:0,mask:-1}:s,f=n.opFront,h=void 0===f?{fail:u.t.KEEP,zfail:u.t.KEEP,zpass:u.t.KEEP}:f,p=n.opBack,d=void 0===p?{fail:u.t.KEEP,zfail:u.t.KEEP,zpass:u.t.KEEP}:p;return{enable:!!r,mask:a,func:Object(i.a)(Object(i.a)({},c),{},{cmp:l.k[c.cmp]}),opFront:{fail:l.l[h.fail],zfail:l.l[h.zfail],zpass:l.l[h.zpass]},opBack:{fail:l.l[d.fail],zfail:l.l[d.zfail],zpass:l.l[d.zpass]}}}},{key:"getColorMaskDrawParams",value:function(t,e){var n=t.stencil;return null!==n&&void 0!==n&&n.enable&&n.opFront&&!e?[!1,!1,!1,!1]:[!0,!0,!0,!0]}},{key:"initCullDrawParams",value:function(t,e){var n=t.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?u.t.BACK:i;e.cull={enable:!!r,face:l.d[o]}}}},{key:"extractUniforms",value:function(t){var e=this,n={};return Object.keys(t).forEach(function(r){e.extractUniformsRecursively(r,t[r],n,"")}),n}},{key:"extractUniformsRecursively",value:function(t,e,n,r){var i=this;if(null===e||"number"===typeof e||"boolean"===typeof e||Array.isArray(e)&&"number"===typeof e[0]||Object(c.isTypedArray)(e)||""===e||"resize"in e)return void(n["".concat(r&&r+".").concat(t)]=e);Object(c.isPlainObject)(e)&&Object.keys(e).forEach(function(o){i.extractUniformsRecursively(o,e[o],n,"".concat(r&&r+".").concat(t))}),Array.isArray(e)&&e.forEach(function(e,o){Object.keys(e).forEach(function(a){i.extractUniformsRecursively(a,e[a],n,"".concat(r&&r+".").concat(t,"[").concat(o,"]"))})})}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(0),i=n(1),o=n(6),a=n(11),s=n(213),u=function(){function t(e,n){Object(r.a)(this,t),Object(o.a)(this,"isDestroy",!1);var i=n.data,u=n.type,c=void 0===u?a.t.UNSIGNED_BYTE:u,l=n.width,f=n.height,h=n.flipY,p=void 0!==h&&h,d=n.format,v=void 0===d?a.t.RGBA:d,m=n.mipmap,g=void 0!==m&&m,y=n.wrapS,_=void 0===y?a.t.CLAMP_TO_EDGE:y,b=n.wrapT,x=void 0===b?a.t.CLAMP_TO_EDGE:b,w=n.aniso,E=void 0===w?0:w,S=n.alignment,O=void 0===S?1:S,T=n.premultiplyAlpha,A=void 0!==T&&T,C=n.mag,k=void 0===C?a.t.NEAREST:C,M=n.min,P=void 0===M?a.t.NEAREST:M,j=n.colorSpace,I=void 0===j?a.t.BROWSER_DEFAULT_WEBGL:j,R=n.x,L=void 0===R?0:R,D=n.y,N=void 0===D?0:D,z=n.copy,F=void 0!==z&&z;this.width=l,this.height=f;var B={width:l,height:f,type:s.e[c],format:s.h[v],wrapS:s.n[_],wrapT:s.n[x],mag:s.g[k],min:s.g[P],alignment:O,flipY:p,colorSpace:s.c[I],premultiplyAlpha:A,aniso:E,x:L,y:N,copy:F};i&&(B.data=i),"number"===typeof g?B.mipmap=s.i[g]:"boolean"===typeof g&&(B.mipmap=g),this.texture=e.texture(B)}return Object(i.a)(t,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.texture(t)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.texture.resize(e,n),this.width=e,this.height=n}},{key:"getSize",value:function(){return[this.width,this.height]}},{key:"destroy",value:function(){if(!this.isDestroy){var t;null===(t=this.texture)||void 0===t||t.destroy()}this.isDestroy=!0}}]),t}()},function(t,e,n){"use strict";function r(t){var e=i();return function(){var n,r=Object(l.a)(t);if(e){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}n.d(e,"a",function(){return d}),n.d(e,"b",function(){return v});var o=n(0),a=n(1),s=n(12),u=n(3),c=n(4),l=n(2),f=n(6),h=n(9),p=n(37),d=(n.n(p),["selectstart","selecting","selectend"]),v=function(t){function e(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o.a)(this,e),r=n.call(this),Object(f.a)(Object(s.a)(r),"isEnable",!1),Object(f.a)(Object(s.a)(r),"onDragStart",function(t){r.box.style.display="block",r.startEvent=r.endEvent=t,r.syncBoxBound(),r.emit("selectstart",r.getLngLatBox(),r.startEvent,r.endEvent)}),Object(f.a)(Object(s.a)(r),"onDragging",function(t){r.endEvent=t,r.syncBoxBound(),r.emit("selecting",r.getLngLatBox(),r.startEvent,r.endEvent)}),Object(f.a)(Object(s.a)(r),"onDragEnd",function(t){r.endEvent=t,r.box.style.display="none",r.emit("selectend",r.getLngLatBox(),r.startEvent,r.endEvent)}),r.scene=t,r.options=i,r}Object(u.a)(e,t);var n=r(e);return Object(a.a)(e,[{key:"container",get:function(){return this.scene.getMapService().getMarkerContainer()}},{key:"enable",value:function(){if(!this.isEnable){var t=this.options.className;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){var e=h.b.create("div",void 0,this.container);e.classList.add("l7-select-box"),t&&e.classList.add(t),e.style.display="none",this.box=e}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}}},{key:"disable",value:function(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}},{key:"syncBoxBound",value:function(){var t=this.startEvent,e=t.x,n=t.y,r=this.endEvent,i=r.x,o=r.y,a=Math.min(e,i),s=Math.min(n,o),u=Math.abs(e-i),c=Math.abs(n-o);this.box.style.top="".concat(s,"px"),this.box.style.left="".concat(a,"px"),this.box.style.width="".concat(u,"px"),this.box.style.height="".concat(c,"px")}},{key:"getLngLatBox",value:function(){var t=this.startEvent.lngLat,e=t.lng,n=t.lat,r=this.endEvent.lngLat,i=r.lng,o=r.lat;return Object(h.C)([[e,n],[i,o]])}}]),e}(p.EventEmitter)},function(t,e,n){"use strict"},function(t,e){t.exports={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[108.29904227031494,22.895945597611796],[108.2987987747758,22.892394455709432],[108.29818900898343,22.8883208402025],[108.29776237831769,22.88439038554584],[108.2975917260514,22.879909528410774],[108.29875888639697,22.872076557126167],[108.28569487606815,22.869609966757263],[108.26920424007933,22.866452665728584],[108.26170849644804,22.86546599410904],[108.2486410886863,22.861551121236246],[108.22807529484548,22.856708186860644],[108.22144853905235,22.854286654961847],[108.21651158088056,22.851281760331347],[108.21456025971014,22.846909660191255],[108.21436895371305,22.840033895798513],[108.21444547611186,22.832064626359724],[108.21578461809156,22.824094890215843],[108.21962525006101,22.81128673396097],[108.22049074562017,22.79147053340886],[108.22041422322133,22.787766734455193],[108.22240380559117,22.784415591584022],[108.22657427632798,22.78088798382709],[108.2283342915013,22.77905359174462],[108.23135692625551,22.77333859677717],[108.2347239118045,22.770586847175533],[108.24405964446302,22.765259584531567],[108.25025071689743,22.762220615397176],[108.25506940923181,22.761233188449708],[108.25978101951434,22.76113444536226],[108.26762491889635,22.76051954907829],[108.28399318767133,22.760174248512204],[108.29268188237798,22.75902005091769],[108.30672560822315,22.758645173805057],[108.31574315850268,22.760349152389193],[108.3163344732751,22.76041731109035],[108.31681491652768,22.750363535176014],[108.32028889081569,22.745830573882298],[108.32488690705463,22.740001782523382],[108.32931023592957,22.73446520714026],[108.33090116026284,22.72947623248561],[108.3345072554182,22.723949018669504],[108.34139570345808,22.715930745848073],[108.35110112587246,22.718039750877377],[108.36304626115171,22.71898664052254],[108.37139852371024,22.719287922217433],[108.38292537917107,22.718668304830263],[108.392455681788,22.716198937498636],[108.40186795080922,22.713391288504308],[108.40900703556596,22.712186105821882],[108.41679936990828,22.711282211846765],[108.42379847261097,22.71046439786935],[108.42571156068304,22.716619404125083],[108.42860452313346,22.726690635452627],[108.4301909864127,22.7338777702441],[108.43176259064906,22.740971178799075],[108.43455060768176,22.75965761052456],[108.43455060768174,22.771364023221874],[108.4341523195342,22.786328406289773],[108.43370424536826,22.79853739222652],[108.43335574323915,22.807486894114774],[108.43221066481502,22.81437072636501],[108.4286758575057,22.826210104002236],[108.42613677056518,22.83488248308586],[108.42474276204882,22.84263668203856],[108.41473577234211,22.852500852461468],[108.40873215367314,22.85490815931515],[108.40166473824937,22.856782974915276],[108.39213443563244,22.86299928371244],[108.38421036379364,22.870892599339072],[108.37123607085957,22.879447424479643],[108.36655164004029,22.881447453039684],[108.3585538313244,22.882184298239963],[108.34895646086535,22.882605350844504],[108.33787378307336,22.885447421765786],[108.32941895671658,22.888605208552057],[108.31799351569393,22.891973433472725],[108.31330908487462,22.894394293493313],[108.30908167169622,22.896078344553636],[108.3030261879542,22.897341369130363],[108.29921292258123,22.897517659260494],[108.29904227031494,22.895945597611796]]]}}]}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(385),s=(n.n(a),n(386)),u=n.n(s),c=n(35),l=n.n(c),f=n(389),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=function(t){function e(t){r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={info:""},n}return o(e,t),h(e,[{key:"getInfo",value:function(){var t=this;Object(f.a)({url:"/v2/asir/about"}).then(function(e){t.setState({info:e[0].result.data}),u.a.hide()})}},{key:"componentDidMount",value:function(){u.a.loading("\u52a0\u8f7d\u4e2d",0),this.getInfo()}},{key:"render",value:function(){return l.a.createElement("div",{style:{padding:16}},l.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.info}}))}}]),e}(c.Component);e.a=p},function(t,e,n){var r=n(1267);"string"===typeof r&&(r=[[t.i,r,""]]);var i={};i.transform=void 0;n(101)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(100)(void 0),e.push([t.i,"body {\r\n  background: #fff;\r\n  height: 100%;\r\n}\r\n.banner___1gPlk{\r\n  width: 100%;\r\n  height: 180px;\r\n}",""]),e.locals={banner:"banner___1gPlk"}},function(t,e,n){t.exports=n.p+"static/media/banner.573269dc.jpg"},function(t,e,n){"use strict";(function(t){function e(t,e,n){t[e]||Object[r](t,e,{writable:!0,configurable:!0,value:n})}if(n(1270),n(1467),n(1468),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var r="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,n(80))},function(t,e,n){n(1271),n(1274),n(1275),n(1276),n(1277),n(1278),n(1279),n(1280),n(1281),n(1282),n(1283),n(1284),n(1285),n(1286),n(1287),n(1288),n(1289),n(1290),n(1291),n(1292),n(1293),n(1294),n(1295),n(1296),n(1297),n(1298),n(1299),n(1300),n(1301),n(1302),n(1303),n(1304),n(1305),n(1306),n(1307),n(1308),n(1309),n(1310),n(1311),n(1312),n(1313),n(1314),n(1315),n(1316),n(1317),n(1318),n(1319),n(1320),n(1321),n(1322),n(1323),n(1324),n(1325),n(1326),n(1327),n(1328),n(1329),n(1330),n(1331),n(1332),n(1333),n(1334),n(1335),n(1336),n(1337),n(1338),n(1339),n(1340),n(1341),n(1342),n(1343),n(1344),n(1345),n(1346),n(1347),n(1348),n(1349),n(1351),n(1352),n(1354),n(1355),n(1356),n(1357),n(1358),n(1359),n(1360),n(1362),n(1363),n(1364),n(1365),n(1366),n(1367),n(1368),n(1369),n(1370),n(1371),n(1372),n(1373),n(1374),n(331),n(1375),n(535),n(1376),n(536),n(1377),n(1378),n(1379),n(1380),n(1381),n(539),n(541),n(542),n(1382),n(1383),n(1384),n(1385),n(1386),n(1387),n(1388),n(1389),n(1390),n(1391),n(1392),n(1393),n(1394),n(1395),n(1396),n(1397),n(1398),n(1399),n(1400),n(1401),n(1402),n(1403),n(1404),n(1405),n(1406),n(1407),n(1408),n(1409),n(1410),n(1411),n(1412),n(1413),n(1414),n(1415),n(1416),n(1417),n(1418),n(1419),n(1420),n(1421),n(1422),n(1423),n(1424),n(1425),n(1426),n(1427),n(1428),n(1429),n(1430),n(1431),n(1432),n(1433),n(1434),n(1435),n(1436),n(1437),n(1438),n(1439),n(1440),n(1441),n(1442),n(1443),n(1444),n(1445),n(1446),n(1447),n(1448),n(1449),n(1450),n(1451),n(1452),n(1453),n(1454),n(1455),n(1456),n(1457),n(1458),n(1459),n(1460),n(1461),n(1462),n(1463),n(1464),n(1465),n(1466),t.exports=n(66)},function(t,e,n){"use strict";var r=n(21),i=n(57),o=n(30),a=n(5),s=n(51),u=n(97).KEY,c=n(23),l=n(166),f=n(146),h=n(120),p=n(27),d=n(517),v=n(312),m=n(1273),g=n(216),y=n(17),_=n(24),b=n(34),x=n(58),w=n(76),E=n(119),S=n(123),O=n(520),T=n(59),A=n(215),C=n(33),k=n(121),M=T.f,P=C.f,j=O.f,I=r.Symbol,R=r.JSON,L=R&&R.stringify,D=p("_hidden"),N=p("toPrimitive"),z={}.propertyIsEnumerable,F=l("symbol-registry"),B=l("symbols"),U=l("op-symbols"),V=Object.prototype,G="function"==typeof I&&!!A.f,H=r.QObject,W=!H||!H.prototype||!H.prototype.findChild,q=o&&c(function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(V,e);r&&delete V[e],P(t,e,n),r&&t!==V&&P(V,e,r)}:P,Z=function(t){var e=B[t]=S(I.prototype);return e._k=t,e},X=G&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},Y=function(t,e,n){return t===V&&Y(U,e,n),y(t),e=w(e,!0),y(n),i(B,e)?(n.enumerable?(i(t,D)&&t[D][e]&&(t[D][e]=!1),n=S(n,{enumerable:E(0,!1)})):(i(t,D)||P(t,D,E(1,{})),t[D][e]=!0),q(t,e,n)):P(t,e,n)},K=function(t,e){y(t);for(var n,r=m(e=x(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},J=function(t,e){return void 0===e?S(t):K(S(t),e)},Q=function(t){var e=z.call(this,t=w(t,!0));return!(this===V&&i(B,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(B,t)||i(this,D)&&this[D][t])||e)},$=function(t,e){if(t=x(t),e=w(e,!0),t!==V||!i(B,e)||i(U,e)){var n=M(t,e);return!n||!i(B,e)||i(t,D)&&t[D][e]||(n.enumerable=!0),n}},tt=function(t){for(var e,n=j(x(t)),r=[],o=0;n.length>o;)i(B,e=n[o++])||e==D||e==u||r.push(e);return r},et=function(t){for(var e,n=t===V,r=j(n?U:x(t)),o=[],a=0;r.length>a;)!i(B,e=r[a++])||n&&!i(V,e)||o.push(B[e]);return o};G||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(U,n),i(this,D)&&i(this[D],t)&&(this[D][t]=!1),q(this,t,E(1,n))};return o&&W&&q(V,t,{configurable:!0,set:e}),Z(t)},s(I.prototype,"toString",function(){return this._k}),T.f=$,C.f=Y,n(124).f=O.f=tt,n(168).f=Q,A.f=et,o&&!n(96)&&s(V,"propertyIsEnumerable",Q,!0),d.f=function(t){return Z(p(t))}),a(a.G+a.W+a.F*!G,{Symbol:I});for(var nt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;nt.length>rt;)p(nt[rt++]);for(var it=k(p.store),ot=0;it.length>ot;)v(it[ot++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=I(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!G,"Object",{create:J,defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var at=c(function(){A.f(1)});a(a.S+a.F*at,"Object",{getOwnPropertySymbols:function(t){return A.f(b(t))}}),R&&a(a.S+a.F*(!G||c(function(){var t=I();return"[null]"!=L([t])||"{}"!=L({a:t})||"{}"!=L(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(_(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,L.apply(R,r)}}),I.prototype[N]||n(50)(I.prototype,N,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){t.exports=n(166)("native-function-to-string",Function.toString)},function(t,e,n){var r=n(121),i=n(215),o=n(168);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(5);r(r.S,"Object",{create:n(123)})},function(t,e,n){var r=n(5);r(r.S+r.F*!n(30),"Object",{defineProperty:n(33).f})},function(t,e,n){var r=n(5);r(r.S+r.F*!n(30),"Object",{defineProperties:n(519)})},function(t,e,n){var r=n(58),i=n(59).f;n(78)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(34),i=n(60);n(78)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(34),i=n(121);n(78)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(78)("getOwnPropertyNames",function(){return n(520).f})},function(t,e,n){var r=n(24),i=n(97).onFreeze;n(78)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(24),i=n(97).onFreeze;n(78)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(24),i=n(97).onFreeze;n(78)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(24);n(78)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(24);n(78)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(24);n(78)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(521)})},function(t,e,n){var r=n(5);r(r.S,"Object",{is:n(522)})},function(t,e,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(316).set})},function(t,e,n){"use strict";var r=n(147),i={};i[n(27)("toStringTag")]="z",i+""!="[object z]"&&n(51)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(5);r(r.P,"Function",{bind:n(523)})},function(t,e,n){var r=n(33).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(30)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(24),i=n(60),o=n(27)("hasInstance"),a=Function.prototype;o in a||n(33).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(5),i=n(525);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(5),i=n(526);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(21),i=n(57),o=n(68),a=n(318),s=n(76),u=n(23),c=n(124).f,l=n(59).f,f=n(33).f,h=n(148).trim,p=r.Number,d=p,v=p.prototype,m="Number"==o(n(123)(v)),g="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=g?e.trim():h(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if((a=u.charCodeAt(c))<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(m?u(function(){v.valueOf.call(n)}):"Number"!=o(n))?a(new d(y(e)),n,p):y(e)};for(var _,b=n(30)?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)i(d,_=b[x])&&!i(p,_)&&f(p,_,l(d,_));p.prototype=v,v.constructor=p,n(51)(r,"Number",p)}},function(t,e,n){"use strict";var r=n(5),i=n(69),o=n(527),a=n(319),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2===1?d(t,e-1,n*t):d(t*t,e/2,n)},v=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(23)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),m="",g="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(e=v(u*d(2,69,1))-69,n=e<0?u*d(2,-e,1):u/d(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(d(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),g=p()}else f(0,n),f(1<<-e,0),g=p()+a.call("0",c);return c>0?(s=g.length,g=m+(s<=c?"0."+a.call("0",c-s)+g:g.slice(0,s-c)+"."+g.slice(s-c))):g=m+g,g}})},function(t,e,n){"use strict";var r=n(5),i=n(23),o=n(527),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(5);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(5),i=n(21).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(5);r(r.S,"Number",{isInteger:n(528)})},function(t,e,n){var r=n(5);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(5),i=n(528),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(5);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(5);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(5),i=n(526);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(5),i=n(525);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(5),i=n(529),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=n(5),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,e,n){var r=n(5),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(5),i=n(320);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(5);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(5),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(5),i=n(321);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(5);r(r.S,"Math",{fround:n(530)})},function(t,e,n){var r=n(5),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var r=n(5),i=Math.imul;r(r.S+r.F*n(23)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(5);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(5);r(r.S,"Math",{log1p:n(529)})},function(t,e,n){var r=n(5);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(5);r(r.S,"Math",{sign:n(320)})},function(t,e,n){var r=n(5),i=n(321),o=Math.exp;r(r.S+r.F*n(23)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(5),i=n(321),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(5);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(5),i=n(122),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(5),i=n(58),o=n(29);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,n){"use strict";n(148)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(217)(!0);n(322)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(5),i=n(217)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(5),i=n(29),o=n(324),a="".endsWith;r(r.P+r.F*n(325)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(5),i=n(324);r(r.P+r.F*n(325)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(5);r(r.P,"String",{repeat:n(319)})},function(t,e,n){"use strict";var r=n(5),i=n(29),o=n(324),a="".startsWith;r(r.P+r.F*n(325)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(52)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(52)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(52)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(52)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(52)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(52)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(52)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(52)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(52)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(52)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(52)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(52)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(52)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(5);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(5),i=n(34),o=n(76);r(r.P+r.F*n(23)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(5),i=n(1350);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(23),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(51)(r,"toString",function(){var t=o.call(this);return t===t?i.call(this):"Invalid Date"})},function(t,e,n){var r=n(27)("toPrimitive"),i=Date.prototype;r in i||n(50)(i,r,n(1353))},function(t,e,n){"use strict";var r=n(17),i=n(76);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(5);r(r.S,"Array",{isArray:n(216)})},function(t,e,n){"use strict";var r=n(67),i=n(5),o=n(34),a=n(531),s=n(326),u=n(29),c=n(327),l=n(328);i(i.S+i.F*!n(219)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,g=0,y=l(h);if(m&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(e=u(h.length),n=new p(e);e>g;g++)c(n,g,m?v(h[g],g):h[g]);else for(f=y.call(h),n=new p;!(i=f.next()).done;g++)c(n,g,m?a(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){"use strict";var r=n(5),i=n(327);r(r.S+r.F*n(23)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(5),i=n(58),o=[].join;r(r.P+r.F*(n(167)!=Object||!n(70)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(5),i=n(315),o=n(68),a=n(122),s=n(29),u=[].slice;r(r.P+r.F*n(23)(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),f=new Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(t,e,n){"use strict";var r=n(5),i=n(44),o=n(34),a=n(23),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!n(70)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(5),i=n(79)(0),o=n(70)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(24),i=n(216),o=n(27)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(5),i=n(79)(1);r(r.P+r.F*!n(70)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(5),i=n(79)(2);r(r.P+r.F*!n(70)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(5),i=n(79)(3);r(r.P+r.F*!n(70)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(5),i=n(79)(4);r(r.P+r.F*!n(70)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(5),i=n(532);r(r.P+r.F*!n(70)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(5),i=n(532);r(r.P+r.F*!n(70)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(5),i=n(214)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(70)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(5),i=n(58),o=n(69),a=n(29),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(70)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(5);r(r.P,"Array",{copyWithin:n(533)}),n(98)("copyWithin")},function(t,e,n){var r=n(5);r(r.P,"Array",{fill:n(330)}),n(98)("fill")},function(t,e,n){"use strict";var r=n(5),i=n(79)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(98)("find")},function(t,e,n){"use strict";var r=n(5),i=n(79)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(98)(o)},function(t,e,n){n(125)("Array")},function(t,e,n){var r=n(21),i=n(318),o=n(33).f,a=n(124).f,s=n(218),u=n(169),c=r.RegExp,l=c,f=c.prototype,h=/a/g,p=/a/g,d=new c(h)!==h;if(n(30)&&(!d||n(23)(function(){return p[n(27)("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(d?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:f,c)};for(var v=a(l),m=0;v.length>m;)!function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}(v[m++]);f.constructor=c,c.prototype=f,n(51)(r,"RegExp",c)}n(125)("RegExp")},function(t,e,n){"use strict";n(536);var r=n(17),i=n(169),o=n(30),a=/./.toString,s=function(t){n(51)(RegExp.prototype,"toString",t,!0)};n(23)(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},function(t,e,n){"use strict";var r=n(17),i=n(29),o=n(333),a=n(220);n(221)("match",1,function(t,e,n,s){return[function(n){var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var u=r(t),c=String(this);if(!u.global)return a(u,c);var l=u.unicode;u.lastIndex=0;for(var f,h=[],p=0;null!==(f=a(u,c));){var d=String(f[0]);h[p]=d,""===d&&(u.lastIndex=o(c,i(u.lastIndex),l)),p++}return 0===p?null:h}]})},function(t,e,n){"use strict";var r=n(17),i=n(34),o=n(29),a=n(69),s=n(333),u=n(220),c=Math.max,l=Math.min,f=Math.floor,h=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,d=function(t){return void 0===t?t:String(t)};n(221)("replace",2,function(t,e,n,v){function m(t,e,r,o,a,s){var u=r+t.length,c=o.length,l=p;return void 0!==a&&(a=i(a),l=h),n.call(s,l,function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>c){var h=f(l/10);return 0===h?n:h<=c?void 0===o[h-1]?i.charAt(1):o[h-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s})}return[function(r,i){var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=v(n,t,this,e);if(i.done)return i.value;var f=r(t),h=String(this),p="function"===typeof e;p||(e=String(e));var g=f.global;if(g){var y=f.unicode;f.lastIndex=0}for(var _=[];;){var b=u(f,h);if(null===b)break;if(_.push(b),!g)break;""===String(b[0])&&(f.lastIndex=s(h,o(f.lastIndex),y))}for(var x="",w=0,E=0;E<_.length;E++){b=_[E];for(var S=String(b[0]),O=c(l(a(b.index),h.length),0),T=[],A=1;A<b.length;A++)T.push(d(b[A]));var C=b.groups;if(p){var k=[S].concat(T,O,h);void 0!==C&&k.push(C);var M=String(e.apply(void 0,k))}else M=m(S,h,O,T,C,e);O>=w&&(x+=h.slice(w,O)+M,w=O+S.length)}return x+h.slice(w)}]})},function(t,e,n){"use strict";var r=n(17),i=n(522),o=n(220);n(221)("search",1,function(t,e,n,a){return[function(n){var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),u=String(this),c=s.lastIndex;i(c,0)||(s.lastIndex=0);var l=o(s,u);return i(s.lastIndex,c)||(s.lastIndex=c),null===l?-1:l.index}]})},function(t,e,n){"use strict";var r=n(218),i=n(17),o=n(170),a=n(333),s=n(29),u=n(220),c=n(332),l=n(23),f=Math.min,h=[].push,p="length",d=!l(function(){RegExp(4294967295,"y")});n(221)("split",2,function(t,e,n,l){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,l+"g");(o=c.call(v,i))&&!((a=v.lastIndex)>f&&(u.push(i.slice(f,o.index)),o[p]>1&&o.index<i[p]&&h.apply(u,o.slice(1)),s=o[0][p],f=a,u[p]>=d));)v.lastIndex===o.index&&v.lastIndex++;return f===i[p]?!s&&v.test("")||u.push(""):u.push(i.slice(f)),u[p]>d?u.slice(0,d):u}:"0".split(void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,i,r):v.call(String(i),n,r)},function(t,e){var r=l(v,t,this,e,v!==n);if(r.done)return r.value;var c=i(t),h=String(this),p=o(c,RegExp),m=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(d?"y":"g"),y=new p(d?c:"^(?:"+c.source+")",g),_=void 0===e?4294967295:e>>>0;if(0===_)return[];if(0===h.length)return null===u(y,h)?[h]:[];for(var b=0,x=0,w=[];x<h.length;){y.lastIndex=d?x:0;var E,S=u(y,d?h:h.slice(x));if(null===S||(E=f(s(y.lastIndex+(d?0:x)),h.length))===b)x=a(h,x,m);else{if(w.push(h.slice(b,x)),w.length===_)return w;for(var O=1;O<=S.length-1;O++)if(w.push(S[O]),w.length===_)return w;x=b=E}}return w.push(h.slice(b)),w}]})},function(t,e,n){"use strict";var r,i,o,a,s=n(96),u=n(21),c=n(67),l=n(147),f=n(5),h=n(24),p=n(44),d=n(126),v=n(127),m=n(170),g=n(334).set,y=n(335)(),_=n(336),b=n(537),x=n(222),w=n(538),E=u.TypeError,S=u.process,O=S&&S.versions,T=O&&O.v8||"",A=u.Promise,C="process"==l(S),k=function(){},M=i=_.f,P=!!function(){try{var t=A.resolve(1),e=(t.constructor={})[n(27)("species")]=function(t){t(k,k)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==T.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),j=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&D(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?c(E("Promise-chain cycle")):(o=j(n))?o.call(n,u,c):u(n)):c(r)}catch(t){l&&!a&&l.exit(),c(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){g.call(u,function(){var e,n,r,i=t._v,o=L(t);if(o&&(e=b(function(){C?S.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=C||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){g.call(u,function(){var e;C?S.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},z=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw E("Promise can't be resolved itself");(e=j(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(z,r,1),c(N,r,1))}catch(t){N.call(r,t)}}):(n._v=t,n._s=1,I(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};P||(A=function(t){d(this,A,"Promise","_h"),p(t),r.call(this);try{t(c(z,this,1),c(N,this,1))}catch(t){N.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(128)(A.prototype,{then:function(t,e){var n=M(m(this,A));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(z,t,1),this.reject=c(N,t,1)},_.f=M=function(t){return t===A||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!P,{Promise:A}),n(146)(A,"Promise"),n(125)("Promise"),a=n(66).Promise,f(f.S+f.F*!P,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!P),"Promise",{resolve:function(t){return w(s&&this===a?A:this,t)}}),f(f.S+f.F*!(P&&n(219)(function(t){A.all(t).catch(k)})),"Promise",{all:function(t){var e=this,n=M(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=M(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(543),i=n(129);n(223)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(5),i=n(224),o=n(337),a=n(17),s=n(122),u=n(29),c=n(24),l=n(21).ArrayBuffer,f=n(170),h=o.ArrayBuffer,p=o.DataView,d=i.ABV&&l.isView,v=h.prototype.slice,m=i.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||c(t)&&m in t}}),r(r.P+r.U+r.F*n(23)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(f(this,h))(u(i-r)),c=new p(this),l=new p(o),d=0;r<i;)l.setUint8(d++,c.getUint8(r++));return o}}),n(125)("ArrayBuffer")},function(t,e,n){var r=n(5);r(r.G+r.W+r.F*!n(224).ABV,{DataView:n(337).DataView})},function(t,e,n){n(86)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(86)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(86)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(5),i=n(44),o=n(17),a=(n(21).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(23)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},function(t,e,n){var r=n(5),i=n(123),o=n(44),a=n(17),s=n(24),u=n(23),c=n(523),l=(n(21).Reflect||{}).construct,f=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),h=!u(function(){l(function(){})});r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,p=i(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},function(t,e,n){var r=n(33),i=n(5),o=n(17),a=n(76);i(i.S+i.F*n(23)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(5),i=n(59).f,o=n(17);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(5),i=n(17),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(323)(o,"Object",function(){var t,e=this,n=e._k;do{if(e._i>=n.length)return{value:void 0,done:!0}}while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function r(t,e){var n,s,l=arguments.length<3?t:arguments[2];return c(t)===l?t[e]:(n=i.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(t))?r(s,e,l):void 0}var i=n(59),o=n(60),a=n(57),s=n(5),u=n(24),c=n(17);s(s.S,"Reflect",{get:r})},function(t,e,n){var r=n(59),i=n(5),o=n(17);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(5),i=n(60),o=n(17);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(5);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(5),i=n(17),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(5);r(r.S,"Reflect",{ownKeys:n(545)})},function(t,e,n){var r=n(5),i=n(17),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){function r(t,e,n){var u,h,p=arguments.length<4?t:arguments[3],d=o.f(l(t),e);if(!d){if(f(h=a(t)))return r(h,e,n,p);d=c(0)}if(s(d,"value")){if(!1===d.writable||!f(p))return!1;if(u=o.f(p,e)){if(u.get||u.set||!1===u.writable)return!1;u.value=n,i.f(p,e,u)}else i.f(p,e,c(0,n));return!0}return void 0!==d.set&&(d.set.call(p,n),!0)}var i=n(33),o=n(59),a=n(60),s=n(57),u=n(5),c=n(119),l=n(17),f=n(24);u(u.S,"Reflect",{set:r})},function(t,e,n){var r=n(5),i=n(316);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(5),i=n(214)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(98)("includes")},function(t,e,n){"use strict";var r=n(5),i=n(546),o=n(34),a=n(29),s=n(44),u=n(329);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return s(t),e=a(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(98)("flatMap")},function(t,e,n){"use strict";var r=n(5),i=n(546),o=n(34),a=n(29),s=n(69),u=n(329);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(98)("flatten")},function(t,e,n){"use strict";var r=n(5),i=n(217)(!0),o=n(23),a=o(function(){return"\ud842\udfb7"!=="\ud842\udfb7".at(0)});r(r.P+r.F*a,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(5),i=n(547),o=n(222),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(5),i=n(547),o=n(222),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(148)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(148)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(5),i=n(77),o=n(29),a=n(218),s=n(169),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(323)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},function(t,e,n){n(312)("asyncIterator")},function(t,e,n){n(312)("observable")},function(t,e,n){var r=n(5),i=n(545),o=n(58),a=n(59),s=n(327);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=a.f,c=i(r),l={},f=0;c.length>f;)void 0!==(n=u(r,e=c[f++]))&&s(l,e,n);return l}})},function(t,e,n){var r=n(5),i=n(548)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(5),i=n(548)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(5),i=n(34),o=n(44),a=n(33);n(30)&&r(r.P+n(225),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(5),i=n(34),o=n(44),a=n(33);n(30)&&r(r.P+n(225),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(5),i=n(34),o=n(76),a=n(60),s=n(59).f;n(30)&&r(r.P+n(225),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.get}while(n=a(n))}})},function(t,e,n){"use strict";var r=n(5),i=n(34),o=n(76),a=n(60),s=n(59).f;n(30)&&r(r.P+n(225),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do{if(e=s(n,r))return e.set}while(n=a(n))}})},function(t,e,n){var r=n(5);r(r.P+r.R,"Map",{toJSON:n(549)("Map")})},function(t,e,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(549)("Set")})},function(t,e,n){n(226)("Map")},function(t,e,n){n(226)("Set")},function(t,e,n){n(226)("WeakMap")},function(t,e,n){n(226)("WeakSet")},function(t,e,n){n(227)("Map")},function(t,e,n){n(227)("Set")},function(t,e,n){n(227)("WeakMap")},function(t,e,n){n(227)("WeakSet")},function(t,e,n){var r=n(5);r(r.G,{global:n(21)})},function(t,e,n){var r=n(5);r(r.S,"System",{global:n(21)})},function(t,e,n){var r=n(5),i=n(68);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(5);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(5);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(5),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(5),i=n(551),o=n(530);r(r.S,"Math",{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},function(t,e,n){var r=n(5);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(5);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(5);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(5);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(5),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(5);r(r.S,"Math",{scale:n(551)})},function(t,e,n){var r=n(5);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(5);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(5),i=n(66),o=n(21),a=n(170),s=n(538);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(5),i=n(336),o=n(537);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(87),i=n(17),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(87),i=n(17),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},function(t,e,n){var r=n(87),i=n(17),o=n(60),a=r.has,s=r.get,u=r.key,c=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(541),i=n(550),o=n(87),a=n(17),s=n(60),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=s(t);if(null===o)return n;var a=l(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(87),i=n(17),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(87),i=n(17),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(87),i=n(17),o=n(60),a=r.has,s=r.key,u=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(87),i=n(17),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(87),i=n(17),o=n(44),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},function(t,e,n){var r=n(5),i=n(335)(),o=n(21).process,a="process"==n(68)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(5),i=n(21),o=n(66),a=n(335)(),s=n(27)("observable"),u=n(44),c=n(17),l=n(126),f=n(128),h=n(50),p=n(127),d=p.RETURN,v=function(t){return null==t?void 0:u(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},y=function(t){g(t)||(t._o=void 0,m(t))},_=function(t,e){c(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),r=n;null!=n&&("function"===typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}g(this)&&m(this)};_.prototype=f({},{unsubscribe:function(){y(this)}});var b=function(t){this._s=t};b.prototype=f({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{y(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{m(e)}finally{throw t}}return m(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{m(e)}finally{throw t}}return m(e),t}}});var x=function(t){l(this,x,"Observable","_f")._f=u(t)};f(x.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})})}}),f(x,{from:function(t){var e="function"===typeof this?this:x,n=v(c(t)[s]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"===typeof this?this:x)(function(t){var e=!1;return a(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),h(x.prototype,s,function(){return this}),r(r.G,{Observable:x}),n(125)("Observable")},function(t,e,n){var r=n(21),i=n(5),o=n(222),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(5),i=n(334);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(331),i=n(121),o=n(51),a=n(21),s=n(50),u=n(149),c=n(27),l=c("iterator"),f=c("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var m,g=d[v],y=p[g],_=a[g],b=_&&_.prototype;if(b&&(b[l]||s(b,l,h),b[f]||s(b,f,g),u[g]=h,y))for(m in r)b[m]||o(b,m,r[m],!0)}},function(t,e,n){(function(e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new p(r||[]);return a._invoke=c(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function n(e,i,o,a){var s=r(t[e],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"===typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function i(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}"object"===typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n));var o;this._invoke=i}function c(t,e,n){var i=O;return function(o,a){if(i===A)throw new Error("Generator is already running");if(i===C){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===k)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===O)throw i=C,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=A;var c=r(t,e,n);if("normal"===c.type){if(i=n.done?C:T,c.arg===k)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=C,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===m){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=m,l(t,e),"throw"===e.method))return k;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,k;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=m),e.delegate=null,k):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k)}function f(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(f,this),this.reset(!0)}function d(t){if(t){var e=t[b];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(y.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=m,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:m,done:!0}}var m,g=Object.prototype,y=g.hasOwnProperty,_="function"===typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag",E="object"===typeof t,S=e.regeneratorRuntime;if(S)return void(E&&(t.exports=S));S=e.regeneratorRuntime=E?t.exports:{},S.wrap=n;var O="suspendedStart",T="suspendedYield",A="executing",C="completed",k={},M={};M[b]=function(){return this};var P=Object.getPrototypeOf,j=P&&P(P(d([])));j&&j!==g&&y.call(j,b)&&(M=j);var I=a.prototype=i.prototype=Object.create(M);o.prototype=I.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(I),t},S.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[x]=function(){return this},S.AsyncIterator=u,S.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(I),I[w]="Generator",I[b]=function(){return this},I.toString=function(){return"[object Generator]"},S.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},S.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=m)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=m),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,k):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=m),k}}}("object"===typeof e?e:"object"===typeof window?window:"object"===typeof self?self:this)}).call(e,n(80))},function(t,e,n){n(1469),t.exports=n(66).RegExp.escape},function(t,e,n){var r=n(5),i=n(1470)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="./service-worker.js";a?o(t):i(t)})}}function i(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function o(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):i(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}e.a=r;var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);